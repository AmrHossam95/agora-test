(self.webpackChunkagora_test=self.webpackChunkagora_test||[]).push([[179],{104:(r,t,o)=>{"use strict";function l(s){return"function"==typeof s}function p(s){const u=s(f=>{Error.call(f),f.stack=(new Error).stack});return u.prototype=Object.create(Error.prototype),u.prototype.constructor=u,u}const _=p(s=>function(u){s(this),this.message=u?`${u.length} errors occurred during unsubscription:\n${u.map((f,A)=>`${A+1}) ${f.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=u});function R(s,a){if(s){const u=s.indexOf(a);0<=u&&s.splice(u,1)}}class M{constructor(a){this.initialTeardown=a,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let a;if(!this.closed){this.closed=!0;const{_parentage:u}=this;if(u)if(this._parentage=null,Array.isArray(u))for(const S of u)S.remove(this);else u.remove(this);const{initialTeardown:f}=this;if(l(f))try{f()}catch(S){a=S instanceof _?S.errors:[S]}const{_finalizers:A}=this;if(A){this._finalizers=null;for(const S of A)try{G(S)}catch(x){a=null!=a?a:[],x instanceof _?a=[...a,...x.errors]:a.push(x)}}if(a)throw new _(a)}}add(a){var u;if(a&&a!==this)if(this.closed)G(a);else{if(a instanceof M){if(a.closed||a._hasParent(this))return;a._addParent(this)}(this._finalizers=null!==(u=this._finalizers)&&void 0!==u?u:[]).push(a)}}_hasParent(a){const{_parentage:u}=this;return u===a||Array.isArray(u)&&u.includes(a)}_addParent(a){const{_parentage:u}=this;this._parentage=Array.isArray(u)?(u.push(a),u):u?[u,a]:a}_removeParent(a){const{_parentage:u}=this;u===a?this._parentage=null:Array.isArray(u)&&R(u,a)}remove(a){const{_finalizers:u}=this;u&&R(u,a),a instanceof M&&a._removeParent(this)}}M.EMPTY=(()=>{const s=new M;return s.closed=!0,s})();const P=M.EMPTY;function F(s){return s instanceof M||s&&"closed"in s&&l(s.remove)&&l(s.add)&&l(s.unsubscribe)}function G(s){l(s)?s():s.unsubscribe()}const z={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},we={setTimeout(s,a,...u){const{delegate:f}=we;return(null==f?void 0:f.setTimeout)?f.setTimeout(s,a,...u):setTimeout(s,a,...u)},clearTimeout(s){const{delegate:a}=we;return((null==a?void 0:a.clearTimeout)||clearTimeout)(s)},delegate:void 0};function xe(s){we.setTimeout(()=>{const{onUnhandledError:a}=z;if(!a)throw s;a(s)})}function _n(){}const fa=Da("C",void 0,void 0);function Da(s,a,u){return{kind:s,value:a,error:u}}let Ja=null;function rl(s){if(z.useDeprecatedSynchronousErrorHandling){const a=!Ja;if(a&&(Ja={errorThrown:!1,error:null}),s(),a){const{errorThrown:u,error:f}=Ja;if(Ja=null,u)throw f}}else s()}class Vl extends M{constructor(a){super(),this.isStopped=!1,a?(this.destination=a,F(a)&&a.add(this)):this.destination=ic}static create(a,u,f){return new Ha(a,u,f)}next(a){this.isStopped?Rl(function Ta(s){return Da("N",s,void 0)}(a),this):this._next(a)}error(a){this.isStopped?Rl(function da(s){return Da("E",void 0,s)}(a),this):(this.isStopped=!0,this._error(a))}complete(){this.isStopped?Rl(fa,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(a){this.destination.next(a)}_error(a){try{this.destination.error(a)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const xl=Function.prototype.bind;function kd(s,a){return xl.call(s,a)}class E0{constructor(a){this.partialObserver=a}next(a){const{partialObserver:u}=this;if(u.next)try{u.next(a)}catch(f){_u(f)}}error(a){const{partialObserver:u}=this;if(u.error)try{u.error(a)}catch(f){_u(f)}else _u(a)}complete(){const{partialObserver:a}=this;if(a.complete)try{a.complete()}catch(u){_u(u)}}}class Ha extends Vl{constructor(a,u,f){let A;if(super(),l(a)||!a)A={next:null!=a?a:void 0,error:null!=u?u:void 0,complete:null!=f?f:void 0};else{let S;this&&z.useDeprecatedNextContext?(S=Object.create(a),S.unsubscribe=()=>this.unsubscribe(),A={next:a.next&&kd(a.next,S),error:a.error&&kd(a.error,S),complete:a.complete&&kd(a.complete,S)}):A=a}this.destination=new E0(A)}}function _u(s){z.useDeprecatedSynchronousErrorHandling?function Nl(s){z.useDeprecatedSynchronousErrorHandling&&Ja&&(Ja.errorThrown=!0,Ja.error=s)}(s):xe(s)}function Rl(s,a){const{onStoppedNotification:u}=z;u&&we.setTimeout(()=>u(s,a))}const ic={closed:!0,next:_n,error:function ul(s){throw s},complete:_n},wc="function"==typeof Symbol&&Symbol.observable||"@@observable";function tl(s){return s}let Fd=(()=>{class s{constructor(u){u&&(this._subscribe=u)}lift(u){const f=new s;return f.source=this,f.operator=u,f}subscribe(u,f,A){const S=function Th(s){return s&&s instanceof Vl||function Jp(s){return s&&l(s.next)&&l(s.error)&&l(s.complete)}(s)&&F(s)}(u)?u:new Ha(u,f,A);return rl(()=>{const{operator:x,source:j}=this;S.add(x?x.call(S,j):j?this._subscribe(S):this._trySubscribe(S))}),S}_trySubscribe(u){try{return this._subscribe(u)}catch(f){u.error(f)}}forEach(u,f){return new(f=Bl(f))((A,S)=>{const x=new Ha({next:j=>{try{u(j)}catch(q){S(q),x.unsubscribe()}},error:S,complete:A});this.subscribe(x)})}_subscribe(u){var f;return null===(f=this.source)||void 0===f?void 0:f.subscribe(u)}[wc](){return this}pipe(...u){return function kl(s){return 0===s.length?tl:1===s.length?s[0]:function(u){return s.reduce((f,A)=>A(f),u)}}(u)(this)}toPromise(u){return new(u=Bl(u))((f,A)=>{let S;this.subscribe(x=>S=x,x=>A(x),()=>f(S))})}}return s.create=a=>new s(a),s})();function Bl(s){var a;return null!==(a=null!=s?s:z.Promise)&&void 0!==a?a:Promise}const H0=p(s=>function(){s(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ba=(()=>{class s extends Fd{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(u){const f=new p1(this,this);return f.operator=u,f}_throwIfClosed(){if(this.closed)throw new H0}next(u){rl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const f of this.currentObservers)f.next(u)}})}error(u){rl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=u;const{observers:f}=this;for(;f.length;)f.shift().error(u)}})}complete(){rl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:u}=this;for(;u.length;)u.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var u;return(null===(u=this.observers)||void 0===u?void 0:u.length)>0}_trySubscribe(u){return this._throwIfClosed(),super._trySubscribe(u)}_subscribe(u){return this._throwIfClosed(),this._checkFinalizedStatuses(u),this._innerSubscribe(u)}_innerSubscribe(u){const{hasError:f,isStopped:A,observers:S}=this;return f||A?P:(this.currentObservers=null,S.push(u),new M(()=>{this.currentObservers=null,R(S,u)}))}_checkFinalizedStatuses(u){const{hasError:f,thrownError:A,isStopped:S}=this;f?u.error(A):S&&u.complete()}asObservable(){const u=new Fd;return u.source=this,u}}return s.create=(a,u)=>new p1(a,u),s})();class p1 extends ba{constructor(a,u){super(),this.destination=a,this.source=u}next(a){var u,f;null===(f=null===(u=this.destination)||void 0===u?void 0:u.next)||void 0===f||f.call(u,a)}error(a){var u,f;null===(f=null===(u=this.destination)||void 0===u?void 0:u.error)||void 0===f||f.call(u,a)}complete(){var a,u;null===(u=null===(a=this.destination)||void 0===a?void 0:a.complete)||void 0===u||u.call(a)}_subscribe(a){var u,f;return null!==(f=null===(u=this.source)||void 0===u?void 0:u.subscribe(a))&&void 0!==f?f:P}}function R0(s){return l(null==s?void 0:s.lift)}function zy(s){return a=>{if(R0(a))return a.lift(function(u){try{return s(u,this)}catch(f){this.error(f)}});throw new TypeError("Unable to lift unknown Observable type")}}function u0(s,a,u,f,A){return new p3(s,a,u,f,A)}class p3 extends Vl{constructor(a,u,f,A,S,x){super(a),this.onFinalize=S,this.shouldUnsubscribe=x,this._next=u?function(j){try{u(j)}catch(q){a.error(q)}}:super._next,this._error=A?function(j){try{A(j)}catch(q){a.error(q)}finally{this.unsubscribe()}}:super._error,this._complete=f?function(){try{f()}catch(j){a.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var a;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:u}=this;super.unsubscribe(),!u&&(null===(a=this.onFinalize)||void 0===a||a.call(this))}}}function v0(s,a){return zy((u,f)=>{let A=0;u.subscribe(u0(f,S=>{f.next(s.call(a,S,A++))}))})}function fR(s){return this instanceof fR?(this.v=s,this):new fR(s)}function aV(s,a,u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var A,f=u.apply(s,a||[]),S=[];return A={},x("next"),x("throw"),x("return"),A[Symbol.asyncIterator]=function(){return this},A;function x(ha){f[ha]&&(A[ha]=function(pa){return new Promise(function(cc,ol){S.push([ha,pa,cc,ol])>1||j(ha,pa)})})}function j(ha,pa){try{!function q(ha){ha.value instanceof fR?Promise.resolve(ha.value.v).then(ce,Ye):_r(S[0][2],ha)}(f[ha](pa))}catch(cc){_r(S[0][3],cc)}}function ce(ha){j("next",ha)}function Ye(ha){j("throw",ha)}function _r(ha,pa){ha(pa),S.shift(),S.length&&j(S[0][0],S[0][1])}}function cV(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u,a=s[Symbol.asyncIterator];return a?a.call(s):(s=function A3(s){var a="function"==typeof Symbol&&Symbol.iterator,u=a&&s[a],f=0;if(u)return u.call(s);if(s&&"number"==typeof s.length)return{next:function(){return s&&f>=s.length&&(s=void 0),{value:s&&s[f++],done:!s}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")}(s),u={},f("next"),f("throw"),f("return"),u[Symbol.asyncIterator]=function(){return this},u);function f(S){u[S]=s[S]&&function(x){return new Promise(function(j,q){!function A(S,x,j,q){Promise.resolve(q).then(function(ce){S({value:ce,done:j})},x)}(j,q,(x=s[S](x)).done,x.value)})}}}const n6=s=>s&&"number"==typeof s.length&&"function"!=typeof s;function AT(s){return l(null==s?void 0:s.then)}function LL(s){return l(s[wc])}function PL(s){return Symbol.asyncIterator&&l(null==s?void 0:s[Symbol.asyncIterator])}function ML(s){return new TypeError(`You provided ${null!==s&&"object"==typeof s?"an invalid object":`'${s}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const F2=function E3(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function mT(s){return l(null==s?void 0:s[F2])}function r6(s){return aV(this,arguments,function*(){const u=s.getReader();try{for(;;){const{value:f,done:A}=yield fR(u.read());if(A)return yield fR(void 0);yield yield fR(f)}}finally{u.releaseLock()}})}function BL(s){return l(null==s?void 0:s.getReader)}function nS(s){if(s instanceof Fd)return s;if(null!=s){if(LL(s))return function k0(s){return new Fd(a=>{const u=s[wc]();if(l(u.subscribe))return u.subscribe(a);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(s);if(n6(s))return function C0(s){return new Fd(a=>{for(let u=0;u<s.length&&!a.closed;u++)a.next(s[u]);a.complete()})}(s);if(AT(s))return function i6(s){return new Fd(a=>{s.then(u=>{a.closed||(a.next(u),a.complete())},u=>a.error(u)).then(null,xe)})}(s);if(PL(s))return o6(s);if(mT(s))return function uV(s){return new Fd(a=>{for(const u of s)if(a.next(u),a.closed)return;a.complete()})}(s);if(BL(s))return function ET(s){return o6(r6(s))}(s)}throw ML(s)}function o6(s){return new Fd(a=>{(function lV(s,a){var u,f,A,S;return function $j(s,a,u,f){return new(u||(u=Promise))(function(S,x){function j(Ye){try{ce(f.next(Ye))}catch(_r){x(_r)}}function q(Ye){try{ce(f.throw(Ye))}catch(_r){x(_r)}}function ce(Ye){Ye.done?S(Ye.value):function A(S){return S instanceof u?S:new u(function(x){x(S)})}(Ye.value).then(j,q)}ce((f=f.apply(s,a||[])).next())})}(this,void 0,void 0,function*(){try{for(u=cV(s);!(f=yield u.next()).done;)if(a.next(f.value),a.closed)return}catch(x){A={error:x}}finally{try{f&&!f.done&&(S=u.return)&&(yield S.call(u))}finally{if(A)throw A.error}}a.complete()})})(s,a).catch(u=>a.error(u))})}function B0(s,a,u,f=0,A=!1){const S=a.schedule(function(){u(),A?s.add(this.schedule(null,f)):this.unsubscribe()},f);if(s.add(S),!A)return S}function q0(s,a,u=1/0){return l(a)?q0((f,A)=>v0((S,x)=>a(f,S,A,x))(nS(s(f,A))),u):("number"==typeof a&&(u=a),zy((f,A)=>function by(s,a,u,f,A,S,x,j){const q=[];let ce=0,Ye=0,_r=!1;const ha=()=>{_r&&!q.length&&!ce&&a.complete()},pa=ol=>ce<f?cc(ol):q.push(ol),cc=ol=>{S&&a.next(ol),ce++;let wl=!1;nS(u(ol,Ye++)).subscribe(u0(a,Il=>{null==A||A(Il),S?pa(Il):a.next(Il)},()=>{wl=!0},void 0,()=>{if(wl)try{for(ce--;q.length&&ce<f;){const Il=q.shift();x?B0(a,x,()=>cc(Il)):cc(Il)}ha()}catch(Il){a.error(Il)}}))};return s.subscribe(u0(a,pa,()=>{_r=!0,ha()})),()=>{null==j||j()}}(f,A,s,u)))}function dO(s=1/0){return q0(tl,s)}const k1=new Fd(s=>s.complete());function FL(s){return s[s.length-1]}function hO(s){return function s6(s){return s&&l(s.schedule)}(FL(s))?s.pop():void 0}function _3(s,a=0){return zy((u,f)=>{u.subscribe(u0(f,A=>B0(f,s,()=>f.next(A),a),()=>B0(f,s,()=>f.complete(),a),A=>B0(f,s,()=>f.error(A),a)))})}function fO(s,a=0){return zy((u,f)=>{f.add(s.schedule(()=>u.subscribe(f),a))})}function ml(s,a){if(!s)throw new Error("Iterable cannot be null");return new Fd(u=>{B0(u,a,()=>{const f=s[Symbol.asyncIterator]();B0(u,a,()=>{f.next().then(A=>{A.done?u.complete():u.next(A.value)})},0,!0)})})}function Hd(s,a){return a?function Qh(s,a){if(null!=s){if(LL(s))return function pR(s,a){return nS(s).pipe(fO(a),_3(a))}(s,a);if(n6(s))return function pO(s,a){return new Fd(u=>{let f=0;return a.schedule(function(){f===s.length?u.complete():(u.next(s[f++]),u.closed||this.schedule())})})}(s,a);if(AT(s))return function a6(s,a){return nS(s).pipe(fO(a),_3(a))}(s,a);if(PL(s))return ml(s,a);if(mT(s))return function yc(s,a){return new Fd(u=>{let f;return B0(u,a,()=>{f=s[F2](),B0(u,a,()=>{let A,S;try{({value:A,done:S}=f.next())}catch(x){return void u.error(x)}S?u.complete():u.next(A)},0,!0)}),()=>l(null==f?void 0:f.return)&&f.return()})}(s,a);if(BL(s))return function $e(s,a){return ml(r6(s),a)}(s,a)}throw ML(s)}(s,a):nS(s)}function sb(s,a,...u){if(!0===a)return void s();if(!1===a)return;const f=new Ha({next:()=>{f.unsubscribe(),s()}});return a(...u).subscribe(f)}function Dg(s){for(let a in s)if(s[a]===Dg)return a;throw Error("Could not find renamed property on target object.")}function xp(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(xp).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function gR(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const I3=Dg({__forward_ref__:Dg});function j2(s){return s.__forward_ref__=j2,s.toString=function(){return xp(this())},s}function Sp(s){return function AR(s){return"function"==typeof s&&s.hasOwnProperty(I3)&&s.__forward_ref__===j2}(s)?s():s}class $p extends Error{constructor(a,u){super(function b3(s,a){return`NG0${Math.abs(s)}${a?": "+a:""}`}(a,u)),this.code=a}}function up(s){return"string"==typeof s?s:null==s?"":String(s)}function U0(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():up(s)}function Q2(s,a){const u=a?` in ${a}`:"";throw new $p(-201,`No provider for ${U0(s)} found${u}`)}function F_(s,a){null==s&&function y0(s,a,u,f){throw new Error(`ASSERTION ERROR: ${s}`+(null==f?"":` [Expected=> ${u} ${f} ${a} <=Actual]`))}(a,s,null,"!=")}function Hf(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function M1(s){return{providers:s.providers||[],imports:s.imports||[]}}function WL(s){return __(s,q2)||__(s,mR)}function __(s,a){return s.hasOwnProperty(a)?s[a]:null}function H2(s){return s&&(s.hasOwnProperty(DS)||s.hasOwnProperty(W2))?s[DS]:null}const q2=Dg({\u0275prov:Dg}),DS=Dg({\u0275inj:Dg}),mR=Dg({ngInjectableDef:Dg}),W2=Dg({ngInjectorDef:Dg});var Of=(()=>((Of=Of||{})[Of.Default=0]="Default",Of[Of.Host=1]="Host",Of[Of.Self=2]="Self",Of[Of.SkipSelf=4]="SkipSelf",Of[Of.Optional=8]="Optional",Of))();let K2;function B1(s){const a=K2;return K2=s,a}function KL(s,a,u){const f=WL(s);return f&&"root"==f.providedIn?void 0===f.value?f.value=f.factory():f.value:u&Of.Optional?null:void 0!==a?a:void Q2(xp(s),"Injector")}function vT(s){return{toString:s}.toString()}var g1=(()=>((g1=g1||{})[g1.OnPush=0]="OnPush",g1[g1.Default=1]="Default",g1))(),iy=(()=>{return(s=iy||(iy={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",iy;var s})();const f6="undefined"!=typeof globalThis&&globalThis,AO="undefined"!=typeof window&&window,S3="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,_v=f6||"undefined"!=typeof global&&global||AO||S3,yT={},e0=[],yR=Dg({\u0275cmp:Dg}),Y2=Dg({\u0275dir:Dg}),rS=Dg({\u0275pipe:Dg}),YL=Dg({\u0275mod:Dg}),A1=Dg({\u0275fac:Dg}),m1=Dg({__NG_ELEMENT_ID__:Dg});let pb=0;function u_(s){return vT(()=>{const u={},f={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===g1.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||e0,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||iy.Emulated,id:"c",styles:s.styles||e0,_:null,setInput:null,schemas:s.schemas||null,tView:null},A=s.directives,S=s.features,x=s.pipes;return f.id+=pb++,f.inputs=U1(s.inputs,u),f.outputs=U1(s.outputs),S&&S.forEach(j=>j(f)),f.directiveDefs=A?()=>("function"==typeof A?A():A).map(T3):null,f.pipeDefs=x?()=>("function"==typeof x?x():x).map(JL):null,f})}function T3(s){return Sy(s)||function NS(s){return s[Y2]||null}(s)}function JL(s){return function _T(s){return s[rS]||null}(s)}const w3={};function E1(s){return vT(()=>{const a={type:s.type,bootstrap:s.bootstrap||e0,declarations:s.declarations||e0,imports:s.imports||e0,exports:s.exports||e0,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(w3[s.id]=s.type),a})}function U1(s,a){if(null==s)return yT;const u={};for(const f in s)if(s.hasOwnProperty(f)){let A=s[f],S=A;Array.isArray(A)&&(S=A[1],A=A[0]),u[A]=f,a&&(a[A]=S)}return u}const py=u_;function Sy(s){return s[yR]||null}function $y(s,a){const u=s[YL]||null;if(!u&&!0===a)throw new Error(`Type ${xp(s)} does not have '\u0275mod' property.`);return u}function wy(s){return Array.isArray(s)&&"object"==typeof s[1]}function F0(s){return Array.isArray(s)&&!0===s[1]}function X2(s){return 0!=(8&s.flags)}function EO(s){return 2==(2&s.flags)}function OT(s){return 1==(1&s.flags)}function v1(s){return null!==s.template}function g6(s){return 0!=(512&s[2])}function DT(s,a){return s.hasOwnProperty(A1)?s[A1]:null}class k3{constructor(a,u,f){this.previousValue=a,this.currentValue=u,this.firstChange=f}isFirstChange(){return this.firstChange}}function _O(s){return s.type.prototype.ngOnChanges&&(s.setInput=G1),bR}function bR(){const s=oy(this),a=null==s?void 0:s.current;if(a){const u=s.previous;if(u===yT)s.previous=a;else for(let f in a)u[f]=a[f];s.current=null,this.ngOnChanges(a)}}function G1(s,a,u,f){const A=oy(s)||function CR(s,a){return s[S_]=a}(s,{previous:yT,current:null}),S=A.current||(A.current={}),x=A.previous,j=this.declaredInputs[u],q=x[j];S[j]=new k3(q&&q.currentValue,a,x===yT),s[f]=a}const S_="__ngSimpleChanges__";function oy(s){return s[S_]||null}let T_;function J0(s){return!!s.listen}const zg={createRenderer:(s,a)=>function y1(){return void 0!==T_?T_:"undefined"!=typeof document?document:void 0}()};function _f(s){for(;Array.isArray(s);)s=s[0];return s}function L0(s,a){return _f(a[s.index])}function _h(s,a){const u=a[s];return wy(u)?u:u[0]}function P3(s){return 4==(4&s[2])}function IO(s){return 128==(128&s[2])}function q1(s,a){return null==a?null:s[a]}function bO(s){s[18]=0}function X0(s,a){s[5]+=a;let u=s,f=s[3];for(;null!==f&&(1===a&&1===u[5]||-1===a&&0===u[5]);)f[5]+=a,u=f,f=f[3]}const Nf={lFrame:kO(null),bindingsEnabled:!0};function tN(){return Nf.bindingsEnabled}function zc(){return Nf.lFrame.lView}function Mp(){return Nf.lFrame.tView}function n0(){let s=nN();for(;null!==s&&64===s.type;)s=s.parent;return s}function nN(){return Nf.lFrame.currentTNode}function Zy(s,a){const u=Nf.lFrame;u.currentTNode=s,u.isParent=a}function wO(){return Nf.lFrame.isParent}function aS(s,a){const u=Nf.lFrame;u.bindingIndex=u.bindingRootIndex=s,kT(a)}function kT(s){Nf.lFrame.currentDirectiveIndex=s}function wR(){return Nf.lFrame.currentQueryIndex}function Oy(s){Nf.lFrame.currentQueryIndex=s}function cS(s){const a=s[1];return 2===a.type?a.declTNode:1===a.type?s[6]:null}function B3(s,a,u){if(u&Of.SkipSelf){let A=a,S=s;for(;!(A=A.parent,null!==A||u&Of.Host||(A=cS(S),null===A||(S=S[15],10&A.type))););if(null===A)return!1;a=A,s=S}const f=Nf.lFrame=U3();return f.currentTNode=a,f.lView=s,!0}function DO(s){const a=U3(),u=s[1];Nf.lFrame=a,a.currentTNode=u.firstChild,a.lView=s,a.tView=u,a.contextLView=s,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function U3(){const s=Nf.lFrame,a=null===s?null:s.child;return null===a?kO(s):a}function kO(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function xO(){const s=Nf.lFrame;return Nf.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const iN=xO;function PS(){const s=xO();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function t_(){return Nf.lFrame.selectedIndex}function D0(s){Nf.lFrame.selectedIndex=s}function xS(s,a){for(let u=a.directiveStart,f=a.directiveEnd;u<f;u++){const S=s.data[u].type.prototype,{ngAfterContentInit:x,ngAfterContentChecked:j,ngAfterViewInit:q,ngAfterViewChecked:ce,ngOnDestroy:Ye}=S;x&&(s.contentHooks||(s.contentHooks=[])).push(-u,x),j&&((s.contentHooks||(s.contentHooks=[])).push(u,j),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,j)),q&&(s.viewHooks||(s.viewHooks=[])).push(-u,q),ce&&((s.viewHooks||(s.viewHooks=[])).push(u,ce),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,ce)),null!=Ye&&(s.destroyHooks||(s.destroyHooks=[])).push(u,Ye)}}function MS(s,a,u){_b(s,a,3,u)}function LT(s,a,u,f){(3&s[2])===u&&_b(s,a,u,f)}function RR(s,a){let u=s[2];(3&u)===a&&(u&=2047,u+=1,s[2]=u)}function _b(s,a,u,f){const S=null!=f?f:-1,x=a.length-1;let j=0;for(let q=void 0!==f?65535&s[18]:0;q<x;q++)if("number"==typeof a[q+1]){if(j=a[q],null!=f&&j>=f)break}else a[q]<0&&(s[18]+=65536),(j<S||-1==S)&&(BO(s,u,a,q),s[18]=(4294901760&s[18])+q+2),q++}function BO(s,a,u,f){const A=u[f]<0,S=u[f+1],j=s[A?-u[f]:u[f]];if(A){if(s[2]>>11<s[18]>>16&&(3&s[2])===a){s[2]+=2048;try{S.call(j)}finally{}}}else try{S.call(j)}finally{}}class OR{constructor(a,u,f){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=f}}function DR(s,a,u){const f=J0(s);let A=0;for(;A<u.length;){const S=u[A];if("number"==typeof S){if(0!==S)break;A++;const x=u[A++],j=u[A++],q=u[A++];f?s.setAttribute(a,j,q,x):a.setAttributeNS(x,j,q)}else{const x=S,j=u[++A];NP(x)?f&&s.setProperty(a,x,j):f?s.setAttribute(a,x,j):a.setAttribute(x,j),A++}}return A}function uN(s){return 3===s||4===s||6===s}function NP(s){return 64===s.charCodeAt(0)}function lN(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let u=-1;for(let f=0;f<a.length;f++){const A=a[f];"number"==typeof A?u=A:0===u||W1(s,u,A,null,-1===u||2===u?a[++f]:null)}}return s}function W1(s,a,u,f,A){let S=0,x=s.length;if(-1===a)x=-1;else for(;S<s.length;){const j=s[S++];if("number"==typeof j){if(j===a){x=-1;break}if(j>a){x=S-1;break}}}for(;S<s.length;){const j=s[S];if("number"==typeof j)break;if(j===u){if(null===f)return void(null!==A&&(s[S+1]=A));if(f===s[S+1])return void(s[S+2]=A)}S++,null!==f&&S++,null!==A&&S++}-1!==x&&(s.splice(x,0,a),S=x+1),s.splice(S++,0,u),null!==f&&s.splice(S++,0,f),null!==A&&s.splice(S++,0,A)}function V3(s){return-1!==s}function jO(s){return 32767&s}function xT(s,a){let u=function Dy(s){return s>>16}(s),f=a;for(;u>0;)f=f[15],u--;return f}let LP=!0;function Ny(s){const a=LP;return LP=s,a}let G3=0;function hN(s,a){const u=MP(s,a);if(-1!==u)return u;const f=a[1];f.firstCreatePass&&(s.injectorIndex=a.length,PP(f.data,s),PP(a,null),PP(f.blueprint,null));const A=MT(s,a),S=s.injectorIndex;if(V3(A)){const x=jO(A),j=xT(A,a),q=j[1].data;for(let ce=0;ce<8;ce++)a[S+ce]=j[x+ce]|q[x+ce]}return a[S+8]=A,S}function PP(s,a){s.push(0,0,0,0,0,0,0,0,a)}function MP(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function MT(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,f=null,A=a;for(;null!==A;){const S=A[1],x=S.type;if(f=2===x?S.declTNode:1===x?A[6]:null,null===f)return-1;if(u++,A=A[15],-1!==f.injectorIndex)return f.injectorIndex|u<<16}return-1}function lS(s,a,u){!function H3(s,a,u){let f;"string"==typeof u?f=u.charCodeAt(0)||0:u.hasOwnProperty(m1)&&(f=u[m1]),null==f&&(f=u[m1]=G3++);const A=255&f;a.data[s+(A>>5)]|=1<<A}(s,a,u)}function T6(s,a,u){if(u&Of.Optional)return s;Q2(a,"NodeInjector")}function $0(s,a,u,f){if(u&Of.Optional&&void 0===f&&(f=null),0==(u&(Of.Self|Of.Host))){const A=s[9],S=B1(void 0);try{return A?A.get(a,f,u&Of.Optional):KL(a,f,u&Of.Optional)}finally{B1(S)}}return T6(f,a,u)}function w6(s,a,u,f=Of.Default,A){if(null!==s){const S=function wV(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(m1)?s[m1]:void 0;return"number"==typeof a?a>=0?255&a:R6:a}(u);if("function"==typeof S){if(!B3(a,s,f))return f&Of.Host?T6(A,u,f):$0(a,u,f,A);try{const x=S(f);if(null!=x||f&Of.Optional)return x;Q2(u)}finally{iN()}}else if("number"==typeof S){let x=null,j=MP(s,a),q=-1,ce=f&Of.Host?a[16][6]:null;for((-1===j||f&Of.SkipSelf)&&(q=-1===j?MT(s,a):a[j+8],-1!==q&&D6(f,!1)?(x=a[1],j=jO(q),a=xT(q,a)):j=-1);-1!==j;){const Ye=a[1];if(O6(S,j,Ye.data)){const _r=TV(j,a,u,x,f,ce);if(_r!==q3)return _r}q=a[j+8],-1!==q&&D6(f,a[1].data[j+8]===ce)&&O6(S,j,a)?(x=Ye,j=jO(q),a=xT(q,a)):j=-1}}}return $0(a,u,f,A)}const q3={};function R6(){return new HO(n0(),zc())}function TV(s,a,u,f,A,S){const x=a[1],j=x.data[s+8],Ye=UP(j,x,u,null==f?EO(j)&&LP:f!=x&&0!=(3&j.type),A&Of.Host&&S===j);return null!==Ye?fN(a,x,Ye,j):q3}function UP(s,a,u,f,A){const S=s.providerIndexes,x=a.data,j=1048575&S,q=s.directiveStart,Ye=S>>20,ha=A?j+Ye:s.directiveEnd;for(let pa=f?j:j+Ye;pa<ha;pa++){const cc=x[pa];if(pa<q&&u===cc||pa>=q&&cc.type===u)return pa}if(A){const pa=x[q];if(pa&&v1(pa)&&pa.type===u)return q}return null}function fN(s,a,u,f){let A=s[u];const S=a.data;if(function j3(s){return s instanceof OR}(A)){const x=A;x.resolving&&function C3(s,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new $p(-200,`Circular dependency in DI detected for ${s}${u}`)}(U0(S[u]));const j=Ny(x.canSeeViewProviders);x.resolving=!0;const q=x.injectImpl?B1(x.injectImpl):null;B3(s,f,Of.Default);try{A=s[u]=x.factory(void 0,S,s,f),a.firstCreatePass&&u>=f.directiveStart&&function sN(s,a,u){const{ngOnChanges:f,ngOnInit:A,ngDoCheck:S}=a.type.prototype;if(f){const x=_O(a);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,x),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,x)}A&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,A),S&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,S),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,S))}(u,S[u],a)}finally{null!==q&&B1(q),Ny(j),x.resolving=!1,iN()}}return A}function O6(s,a,u){return!!(u[a+(s>>5)]&1<<s)}function D6(s,a){return!(s&Of.Self||s&Of.Host&&a)}class HO{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,f){return w6(this._tNode,this._lView,a,f,u)}}const BT="__parameters__";function US(s,a,u){return vT(()=>{const f=function K3(s){return function(...u){if(s){const f=s(...u);for(const A in f)this[A]=f[A]}}}(a);function A(...S){if(this instanceof A)return f.apply(this,S),this;const x=new A(...S);return j.annotation=x,j;function j(q,ce,Ye){const _r=q.hasOwnProperty(BT)?q[BT]:Object.defineProperty(q,BT,{value:[]})[BT];for(;_r.length<=Ye;)_r.push(null);return(_r[Ye]=_r[Ye]||[]).push(x),q}}return u&&(A.prototype=Object.create(u.prototype)),A.prototype.ngMetadataName=s,A.annotationCls=A,A})}class Zp{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Hf({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const RV=new Zp("AnalyzeForEntryComponents");function Db(s,a){void 0===a&&(a=s);for(let u=0;u<s.length;u++){let f=s[u];Array.isArray(f)?(a===s&&(a=s.slice(0,u)),Db(f,a)):a!==s&&a.push(f)}return a}function N_(s,a){s.forEach(u=>Array.isArray(u)?N_(u,a):a(u))}function FS(s,a,u){a>=s.length?s.push(u):s.splice(a,0,u)}function Q_(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}const gN={},_B="__NG_DI_FLAG__",e2="ngTempTokenPath",LV=/\n/gm,Q6="__source",n2=Dg({provide:String,useValue:Dg});let r2;function V6(s){const a=r2;return r2=s,a}function Ly(s,a=Of.Default){if(void 0===r2)throw new $p(203,"");return null===r2?KL(s,void 0,a):r2.get(s,a&Of.Optional?null:void 0,a)}function Mh(s,a=Of.Default){return(function d6(){return K2}()||Ly)(Sp(s),a)}const eU=Mh;function tU(s){const a=[];for(let u=0;u<s.length;u++){const f=Sp(s[u]);if(Array.isArray(f)){if(0===f.length)throw new $p(900,"");let A,S=Of.Default;for(let x=0;x<f.length;x++){const j=f[x],q=PV(j);"number"==typeof q?-1===q?A=j.token:S|=q:A=j}a.push(Mh(A,S))}else a.push(Mh(f))}return a}function AN(s,a){return s[_B]=a,s.prototype[_B]=a,s}function PV(s){return s[_B]}const XP=AN(US("Inject",s=>({token:s})),-1),UT=AN(US("Optional"),8),B=AN(US("SkipSelf"),4);var o0=(()=>((o0=o0||{})[o0.Important=1]="Important",o0[o0.DashCase=2]="DashCase",o0))();const mN="__ngContext__";function V_(s,a){s[mN]=a}function nU(s){const a=function ZP(s){return s[mN]||null}(s);return a?Array.isArray(a)?a:a.lView:null}function jV(s,a){return undefined(s,a)}function rU(s){const a=s[3];return F0(a)?a[3]:a}function VV(s){return HV(s[13])}function GV(s){return HV(s[4])}function HV(s){for(;null!==s&&!F0(s);)s=s[4];return s}function _x(s,a,u,f,A){if(null!=f){let S,x=!1;F0(f)?S=f:wy(f)&&(x=!0,f=f[0]);const j=_f(f);0===s&&null!==u?null==A?xz(a,u,j):EN(a,u,j,A||null,!0):1===s&&null!==u?EN(a,u,j,A||null,!0):2===s?function Ox(s,a,u){const f=J6(s,a);f&&function fie(s,a,u,f){J0(s)?s.removeChild(a,u,f):a.removeChild(u)}(s,f,a,u)}(a,j,x):3===s&&a.destroyNode(j),null!=S&&function vN(s,a,u,f,A){const S=u[7];S!==_f(u)&&_x(a,s,f,S,A);for(let j=10;j<u.length;j++){const q=u[j];aU(q[1],q,s,a,f,S)}}(a,s,S,u,A)}}function W6(s,a,u){if(J0(s))return s.createElement(a,u);{const f=null!==u?function _P(s){const a=s.toLowerCase();return"svg"===a?"http://www.w3.org/2000/svg":"math"===a?"http://www.w3.org/1998/MathML/":null}(u):null;return null===f?s.createElement(a):s.createElementNS(f,a)}}function Dz(s,a){const u=s[9],f=u.indexOf(a),A=a[3];1024&a[2]&&(a[2]&=-1025,X0(A,-1)),u.splice(f,1)}function JV(s,a){if(s.length<=10)return;const u=10+a,f=s[u];if(f){const A=f[17];null!==A&&A!==s&&Dz(A,f),a>0&&(s[u-1][4]=f[4]);const S=Q_(s,10+a);!function wz(s,a){aU(s,a,a[11],2,null,null),a[0]=null,a[6]=null}(f[1],f);const x=S[19];null!==x&&x.detachView(S[1]),f[3]=null,f[4]=null,f[2]&=-129}return f}function zV(s,a){if(!(256&a[2])){const u=a[11];J0(u)&&u.destroyNode&&aU(s,a,u,3,null,null),function lie(s){let a=s[13];if(!a)return o2(s[1],s);for(;a;){let u=null;if(wy(a))u=a[13];else{const f=a[10];f&&(u=f)}if(!u){for(;a&&!a[4]&&a!==s;)wy(a)&&o2(a[1],a),a=a[3];null===a&&(a=s),wy(a)&&o2(a[1],a),u=a&&a[4]}a=u}}(a)}}function o2(s,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function hie(s,a){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let f=0;f<u.length;f+=2){const A=a[u[f]];if(!(A instanceof OR)){const S=u[f+1];if(Array.isArray(S))for(let x=0;x<S.length;x+=2){const j=A[S[x]],q=S[x+1];try{q.call(j)}finally{}}else try{S.call(A)}finally{}}}}(s,a),function Y6(s,a){const u=s.cleanup,f=a[7];let A=-1;if(null!==u)for(let S=0;S<u.length-1;S+=2)if("string"==typeof u[S]){const x=u[S+1],j="function"==typeof x?x(a):_f(a[x]),q=f[A=u[S+2]],ce=u[S+3];"boolean"==typeof ce?j.removeEventListener(u[S],q,ce):ce>=0?f[A=ce]():f[A=-ce].unsubscribe(),S+=2}else{const x=f[A=u[S+1]];u[S].call(x)}if(null!==f){for(let S=A+1;S<f.length;S++)f[S]();a[7]=null}}(s,a),1===a[1].type&&J0(a[11])&&a[11].destroy();const u=a[17];if(null!==u&&F0(a[3])){u!==a[3]&&Dz(u,a);const f=a[19];null!==f&&f.detachView(s)}}}function kz(s,a,u){return function Lz(s,a,u){let f=a;for(;null!==f&&40&f.type;)f=(a=f).parent;if(null===f)return u[0];if(2&f.flags){const A=s.data[f.directiveStart].encapsulation;if(A===iy.None||A===iy.Emulated)return null}return L0(f,u)}(s,a.parent,u)}function EN(s,a,u,f,A){J0(s)?s.insertBefore(a,u,f,A):a.insertBefore(u,f,A)}function xz(s,a,u){J0(s)?s.appendChild(a,u):a.appendChild(u)}function Mz(s,a,u,f,A){null!==f?EN(s,a,u,f,A):xz(s,a,u)}function J6(s,a){return J0(s)?s.parentNode(a):a.parentNode}let Bz=function z6(s,a,u){return 40&s.type?L0(s,u):null};function Tx(s,a,u,f){const A=kz(s,f,a),S=a[11],j=function oU(s,a,u){return Bz(s,a,u)}(f.parent||a[6],f,a);if(null!=A)if(Array.isArray(u))for(let q=0;q<u.length;q++)Mz(S,A,u[q],j,!1);else Mz(S,A,u,j,!1)}function Rx(s,a){if(null!==a){const u=a.type;if(3&u)return L0(a,s);if(4&u)return sU(-1,s[a.index]);if(8&u){const f=a.child;if(null!==f)return Rx(s,f);{const A=s[a.index];return F0(A)?sU(-1,A):_f(A)}}if(32&u)return jV(a,s)()||_f(s[a.index]);{const f=$V(s,a);return null!==f?Array.isArray(f)?f[0]:Rx(rU(s[16]),f):Rx(s,a.next)}}return null}function $V(s,a){return null!==a?s[16][6].projection[a.projection]:null}function sU(s,a){const u=10+s+1;if(u<a.length){const f=a[u],A=f[1].firstChild;if(null!==A)return Rx(f,A)}return a[7]}function ZV(s,a,u,f,A,S,x){for(;null!=u;){const j=f[u.index],q=u.type;if(x&&0===a&&(j&&V_(_f(j),f),u.flags|=4),64!=(64&u.flags))if(8&q)ZV(s,a,u.child,f,A,S,!1),_x(a,s,A,j,S);else if(32&q){const ce=jV(u,f);let Ye;for(;Ye=ce();)_x(a,s,A,Ye,S);_x(a,s,A,j,S)}else 16&q?X6(s,a,f,u,A,S):_x(a,s,A,j,S);u=x?u.projectionNext:u.next}}function aU(s,a,u,f,A,S){ZV(u,f,s.firstChild,a,A,S,!1)}function X6(s,a,u,f,A,S){const x=u[16],q=x[6].projection[f.projection];if(Array.isArray(q))for(let ce=0;ce<q.length;ce++)_x(a,s,A,q[ce],S);else ZV(s,a,q,x[3],A,S,!0)}function t9(s,a,u){J0(s)?s.setAttribute(a,"style",u):a.style.cssText=u}function yN(s,a,u){J0(s)?""===u?s.removeAttribute(a,"class"):s.setAttribute(a,"class",u):a.className=u}function AU(s){return s.ngOriginalError}function g9(s,...a){s.error(...a)}class Mx{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a),f=function oX(s){return s&&s.ngErrorLogger||g9}(a);f(this._console,"ERROR",a),u&&f(this._console,"ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&AU(a);for(;u&&AU(u);)u=AU(u);return u||null}}const r5=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(_v))();function jT(s){return s instanceof Function?s():s}function lX(s,a,u){let f=s.length;for(;;){const A=s.indexOf(a,u);if(-1===A)return A;if(0===A||s.charCodeAt(A-1)<=32){const S=a.length;if(A+S===f||s.charCodeAt(A+S)<=32)return A}u=A+1}}const E9="ng-template";function Uie(s,a,u){let f=0;for(;f<s.length;){let A=s[f++];if(u&&"class"===A){if(A=s[f],-1!==lX(A.toLowerCase(),a,0))return!0}else if(1===A){for(;f<s.length&&"string"==typeof(A=s[f++]);)if(A.toLowerCase()===a)return!0;return!1}}return!1}function o5(s){return 4===s.type&&s.value!==E9}function Fie(s,a,u){return a===(4!==s.type||u?s.value:E9)}function dX(s,a,u){let f=4;const A=s.attrs||[],S=function Vie(s){for(let a=0;a<s.length;a++)if(uN(s[a]))return a;return s.length}(A);let x=!1;for(let j=0;j<a.length;j++){const q=a[j];if("number"!=typeof q){if(!x)if(4&f){if(f=2|1&f,""!==q&&!Fie(s,q,u)||""===q&&1===a.length){if(fS(f))return!1;x=!0}}else{const ce=8&f?q:a[++j];if(8&f&&null!==s.attrs){if(!Uie(s.attrs,ce,u)){if(fS(f))return!1;x=!0}continue}const _r=jie(8&f?"class":q,A,o5(s),u);if(-1===_r){if(fS(f))return!1;x=!0;continue}if(""!==ce){let ha;ha=_r>S?"":A[_r+1].toLowerCase();const pa=8&f?ha:null;if(pa&&-1!==lX(pa,ce,0)||2&f&&ce!==ha){if(fS(f))return!1;x=!0}}}}else{if(!x&&!fS(f)&&!fS(q))return!1;if(x&&fS(q))continue;x=!1,f=q|1&f}}return fS(f)||x}function fS(s){return 0==(1&s)}function jie(s,a,u,f){if(null===a)return-1;let A=0;if(f||!u){let S=!1;for(;A<a.length;){const x=a[A];if(x===s)return A;if(3===x||6===x)S=!0;else{if(1===x||2===x){let j=a[++A];for(;"string"==typeof j;)j=a[++A];continue}if(4===x)break;if(0===x){A+=4;continue}}A+=S?1:2}return-1}return function Gie(s,a){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const f=s[u];if("number"==typeof f)return-1;if(f===a)return u;u++}return-1}(a,s)}function hX(s,a,u=!1){for(let f=0;f<a.length;f++)if(dX(s,a[f],u))return!0;return!1}function VS(s,a){return s?":not("+a.trim()+")":a}function pX(s){let a=s[0],u=1,f=2,A="",S=!1;for(;u<s.length;){let x=s[u];if("string"==typeof x)if(2&f){const j=s[++u];A+="["+x+(j.length>0?'="'+j+'"':"")+"]"}else 8&f?A+="."+x:4&f&&(A+=" "+x);else""!==A&&!fS(x)&&(a+=VS(S,A),A=""),f=x,S=S||!fS(f);u++}return""!==A&&(a+=VS(S,A)),a}const Ap={};function b1(s){s5(Mp(),zc(),t_()+s,!1)}function s5(s,a,u,f){if(!f)if(3==(3&a[2])){const S=s.preOrderCheckHooks;null!==S&&MS(a,S,u)}else{const S=s.preOrderHooks;null!==S&&LT(a,S,0,u)}D0(u)}function _U(s,a){const u=s.contentQueries;if(null!==u)for(let f=0;f<u.length;f+=2){const A=u[f],S=u[f+1];if(-1!==S){const x=s.data[S];Oy(A),x.contentQueries(2,a[S],S)}}}function IU(s,a,u,f,A,S,x,j,q,ce){const Ye=a.blueprint.slice();return Ye[0]=A,Ye[2]=140|f,bO(Ye),Ye[3]=Ye[15]=s,Ye[8]=u,Ye[10]=x||s&&s[10],Ye[11]=j||s&&s[11],Ye[12]=q||s&&s[12]||null,Ye[9]=ce||s&&s[9]||null,Ye[6]=S,Ye[16]=2==a.type?s[16]:Ye,Ye}function Wx(s,a,u,f,A){let S=s.data[a];if(null===S)S=function N9(s,a,u,f,A){const S=nN(),x=wO(),q=s.data[a]=function h5(s,a,u,f,A,S){return{type:u,index:f,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:A,attrs:S,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,x?S:S&&S.parent,u,a,f,A);return null===s.firstChild&&(s.firstChild=q),null!==S&&(x?null==S.child&&null!==q.parent&&(S.child=q):null===S.next&&(S.next=q)),q}(s,a,u,f,A),function I6(){return Nf.lFrame.inI18n}()&&(S.flags|=64);else if(64&S.type){S.type=u,S.value=f,S.attrs=A;const x=function sS(){const s=Nf.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();S.injectorIndex=null===x?-1:x.injectorIndex}return Zy(S,!0),S}function Yx(s,a,u,f){if(0===u)return-1;const A=a.length;for(let S=0;S<u;S++)a.push(f),s.blueprint.push(f),s.data.push(null);return A}function Xx(s,a,u){DO(a);try{const f=s.viewQuery;null!==f&&U9(1,f,u);const A=s.template;null!==A&&IX(s,a,A,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&_U(s,a),s.staticViewQueries&&U9(2,s.viewQuery,u);const S=s.components;null!==S&&function noe(s,a){for(let u=0;u<a.length;u++)yoe(s,a[u])}(a,S)}catch(f){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),f}finally{a[2]&=-5,PS()}}function $x(s,a,u,f){const A=a[2];if(256!=(256&A)){DO(a);try{bO(a),function rN(s){return Nf.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&IX(s,a,u,2,f);const x=3==(3&A);if(x){const ce=s.preOrderCheckHooks;null!==ce&&MS(a,ce,null)}else{const ce=s.preOrderHooks;null!==ce&&LT(a,ce,0,null),RR(a,0)}if(function Eoe(s){for(let a=VV(s);null!==a;a=GV(a)){if(!a[2])continue;const u=a[9];for(let f=0;f<u.length;f++){const A=u[f],S=A[3];0==(1024&A[2])&&X0(S,1),A[2]|=1024}}}(a),function moe(s){for(let a=VV(s);null!==a;a=GV(a))for(let u=10;u<a.length;u++){const f=a[u],A=f[1];IO(f)&&$x(A,f,A.template,f[8])}}(a),null!==s.contentQueries&&_U(s,a),x){const ce=s.contentCheckHooks;null!==ce&&MS(a,ce)}else{const ce=s.contentHooks;null!==ce&&LT(a,ce,1),RR(a,1)}!function eoe(s,a){const u=s.hostBindingOpCodes;if(null!==u)try{for(let f=0;f<u.length;f++){const A=u[f];if(A<0)D0(~A);else{const S=A,x=u[++f],j=u[++f];aS(x,S),j(2,a[S])}}}finally{D0(-1)}}(s,a);const j=s.components;null!==j&&function toe(s,a){for(let u=0;u<a.length;u++)voe(s,a[u])}(a,j);const q=s.viewQuery;if(null!==q&&U9(2,q,f),x){const ce=s.viewCheckHooks;null!==ce&&MS(a,ce)}else{const ce=s.viewHooks;null!==ce&&LT(a,ce,2),RR(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[2]&=-73,1024&a[2]&&(a[2]&=-1025,X0(a[3],-1))}finally{PS()}}}function roe(s,a,u,f){const A=a[10],x=P3(a);try{!x&&A.begin&&A.begin(),x&&Xx(s,a,f),$x(s,a,u,f)}finally{!x&&A.end&&A.end()}}function IX(s,a,u,f,A){const S=t_(),x=2&f;try{D0(-1),x&&a.length>20&&s5(s,a,20,!1),u(f,A)}finally{D0(S)}}function CU(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=d5(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):a}function d5(s,a,u,f,A,S,x,j,q,ce){const Ye=20+f,_r=Ye+A,ha=function ioe(s,a){const u=[];for(let f=0;f<a;f++)u.push(f<s?null:Ap);return u}(Ye,_r),pa="function"==typeof ce?ce():ce;return ha[1]={type:s,blueprint:ha,template:u,queries:null,viewQuery:j,declTNode:a,data:ha.slice().fill(null,Ye),bindingStartIndex:Ye,expandoStartIndex:_r,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof S?S():S,pipeRegistry:"function"==typeof x?x():x,firstChild:null,schemas:q,consts:pa,incompleteFirstPass:!1}}function SX(s,a,u,f){const A=F9(a);null===u?A.push(f):(A.push(u),s.firstCreatePass&&MX(s).push(f,A.length-1))}function P9(s,a,u){for(let f in s)if(s.hasOwnProperty(f)){const A=s[f];(u=null===u?{}:u).hasOwnProperty(f)?u[f].push(a,A):u[f]=[a,A]}return u}function eM(s,a,u,f,A,S){const x=S.hostBindings;if(x){let j=s.hostBindingOpCodes;null===j&&(j=s.hostBindingOpCodes=[]);const q=~a.index;(function doe(s){let a=s.length;for(;a>0;){const u=s[--a];if("number"==typeof u&&u<0)return u}return 0})(j)!=q&&j.push(q),j.push(f,A,x)}}function RX(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function OX(s,a){a.flags|=2,(s.components||(s.components=[])).push(a.index)}function poe(s,a,u){if(u){if(a.exportAs)for(let f=0;f<a.exportAs.length;f++)u[a.exportAs[f]]=s;v1(a)&&(u[""]=s)}}function DX(s,a,u){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+u,s.providerIndexes=a}function NX(s,a,u,f,A){s.data[f]=A;const S=A.factory||(A.factory=DT(A.type)),x=new OR(S,v1(A),null);s.blueprint[f]=x,u[f]=x,eM(s,a,0,f,Yx(s,u,A.hostVars,Ap),A)}function kX(s,a,u){const f=L0(a,s),A=CU(u),S=s[10],x=p5(s,IU(s,A,null,u.onPush?64:16,f,a,S,S.createRenderer(f,u),null,null));s[a.index]=x}function goe(s,a,u,f,A,S){const x=S[a];if(null!==x){const j=f.setInput;for(let q=0;q<x.length;){const ce=x[q++],Ye=x[q++],_r=x[q++];null!==j?f.setInput(u,_r,ce,Ye):u[Ye]=_r}}}function Aoe(s,a){let u=null,f=0;for(;f<a.length;){const A=a[f];if(0!==A)if(5!==A){if("number"==typeof A)break;s.hasOwnProperty(A)&&(null===u&&(u=[]),u.push(A,s[A],a[f+1])),f+=2}else f+=2;else f+=4}return u}function voe(s,a){const u=_h(a,s);if(IO(u)){const f=u[1];80&u[2]?$x(f,u,f.template,u[8]):u[5]>0&&qS(u)}}function qS(s){for(let f=VV(s);null!==f;f=GV(f))for(let A=10;A<f.length;A++){const S=f[A];if(1024&S[2]){const x=S[1];$x(x,S,x.template,S[8])}else S[5]>0&&qS(S)}const u=s[1].components;if(null!==u)for(let f=0;f<u.length;f++){const A=_h(u[f],s);IO(A)&&A[5]>0&&qS(A)}}function yoe(s,a){const u=_h(a,s),f=u[1];(function LX(s,a){for(let u=a.length;u<s.blueprint.length;u++)a.push(s.blueprint[u])})(f,u),Xx(f,u,u[8])}function p5(s,a){return s[13]?s[14][4]=a:s[13]=a,s[14]=a,a}function x9(s){for(;s;){s[2]|=64;const a=rU(s);if(g6(s)&&!a)return s;s=a}return null}function PX(s){!function M9(s){for(let a=0;a<s.components.length;a++){const u=s.components[a],f=nU(u),A=f[1];roe(A,f,A.template,u)}}(s[8])}function U9(s,a,u){Oy(0),a(s,u)}const _oe=(()=>Promise.resolve(null))();function F9(s){return s[7]||(s[7]=[])}function MX(s){return s.cleanup||(s.cleanup=[])}function BX(s,a){const u=s[9],f=u?u.get(Mx,null):null;f&&f.handleError(a)}function LR(s,a,u){const f=function z0(s,a){return _f(a[s])}(a,s);!function WV(s,a,u){J0(s)?s.setValue(a,u):a.textContent=u}(s[11],f,u)}function A5(s,a,u){let f=u?s.styles:null,A=u?s.classes:null,S=0;if(null!==a)for(let x=0;x<a.length;x++){const j=a[x];"number"==typeof j?S=j:1==S?A=gR(A,j):2==S&&(f=gR(f,j+": "+a[++x]+";"))}u?s.styles=f:s.stylesWithoutHost=f,u?s.classes=A:s.classesWithoutHost=A}const Q9=new Zp("INJECTOR",-1);class FX{get(a,u=gN){if(u===gN){const f=new Error(`NullInjectorError: No provider for ${xp(a)}!`);throw f.name="NullInjectorError",f}return u}}const m5=new Zp("Set Injector scope."),wU={},E5={};let v5;function RU(){return void 0===v5&&(v5=new FX),v5}function jX(s,a=null,u=null,f){const A=QX(s,a,u,f);return A._resolveInjectorDefTypes(),A}function QX(s,a=null,u=null,f){return new u2(s,u,a||RU(),f)}class u2{constructor(a,u,f,A=null){this.parent=f,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const S=[];u&&N_(u,j=>this.processProvider(j,a,u)),N_([a],j=>this.processInjectorType(j,[],S)),this.records.set(Q9,nM(void 0,this));const x=this.records.get(m5);this.scope=null!=x?x.value:null,this.source=A||("object"==typeof a?null:xp(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,u=gN,f=Of.Default){this.assertNotDestroyed();const A=V6(this),S=B1(void 0);try{if(!(f&Of.SkipSelf)){let j=this.records.get(a);if(void 0===j){const q=function Roe(s){return"function"==typeof s||"object"==typeof s&&s instanceof Zp}(a)&&WL(a);j=q&&this.injectableDefInScope(q)?nM(V9(a),wU):null,this.records.set(a,j)}if(null!=j)return this.hydrate(a,j)}return(f&Of.Self?RU():this.parent).get(a,u=f&Of.Optional&&u===gN?null:u)}catch(x){if("NullInjectorError"===x.name){if((x[e2]=x[e2]||[]).unshift(xp(a)),A)throw x;return function QS(s,a,u,f){const A=s[e2];throw a[Q6]&&A.unshift(a[Q6]),s.message=function xV(s,a,u,f=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let A=xp(a);if(Array.isArray(a))A=a.map(xp).join(" -> ");else if("object"==typeof a){let S=[];for(let x in a)if(a.hasOwnProperty(x)){let j=a[x];S.push(x+":"+("string"==typeof j?JSON.stringify(j):xp(j)))}A=`{${S.join(", ")}}`}return`${u}${f?"("+f+")":""}[${A}]: ${s.replace(LV,"\n  ")}`}("\n"+s.message,A,u,f),s.ngTokenPath=A,s[e2]=null,s}(x,a,"R3InjectorError",this.source)}throw x}finally{B1(S),V6(A)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((f,A)=>a.push(xp(A))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new $p(205,!1)}processInjectorType(a,u,f){if(!(a=Sp(a)))return!1;let A=H2(a);const S=null==A&&a.ngModule||void 0,x=void 0===S?a:S,j=-1!==f.indexOf(x);if(void 0!==S&&(A=H2(S)),null==A)return!1;if(null!=A.imports&&!j){let Ye;f.push(x);try{N_(A.imports,_r=>{this.processInjectorType(_r,u,f)&&(void 0===Ye&&(Ye=[]),Ye.push(_r))})}finally{}if(void 0!==Ye)for(let _r=0;_r<Ye.length;_r++){const{ngModule:ha,providers:pa}=Ye[_r];N_(pa,cc=>this.processProvider(cc,ha,pa||e0))}}this.injectorDefTypes.add(x);const q=DT(x)||(()=>new x);this.records.set(x,nM(q,wU));const ce=A.providers;if(null!=ce&&!j){const Ye=a;N_(ce,_r=>this.processProvider(_r,Ye,ce))}return void 0!==S&&void 0!==a.providers}processProvider(a,u,f){let A=rM(a=Sp(a))?a:Sp(a&&a.provide);const S=function Toe(s,a,u){return GX(s)?nM(void 0,s.useValue):nM(function VX(s,a,u){let f;if(rM(s)){const A=Sp(s);return DT(A)||V9(A)}if(GX(s))f=()=>Sp(s.useValue);else if(function y5(s){return!(!s||!s.useFactory)}(s))f=()=>s.useFactory(...tU(s.deps||[]));else if(function woe(s){return!(!s||!s.useExisting)}(s))f=()=>Mh(Sp(s.useExisting));else{const A=Sp(s&&(s.useClass||s.provide));if(!function _5(s){return!!s.deps}(s))return DT(A)||V9(A);f=()=>new A(...tU(s.deps))}return f}(s),wU)}(a);if(rM(a)||!0!==a.multi)this.records.get(A);else{let x=this.records.get(A);x||(x=nM(void 0,wU,!0),x.factory=()=>tU(x.multi),this.records.set(A,x)),A=a,x.multi.push(a)}this.records.set(A,S)}hydrate(a,u){return u.value===wU&&(u.value=E5,u.value=u.factory()),"object"==typeof u.value&&u.value&&function G9(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=Sp(a.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function V9(s){const a=WL(s),u=null!==a?a.factory:DT(s);if(null!==u)return u;if(s instanceof Zp)throw new $p(204,!1);if(s instanceof Function)return function Soe(s){const a=s.length;if(a>0)throw function zO(s,a){const u=[];for(let f=0;f<s;f++)u.push(a);return u}(a,"?"),new $p(204,!1);const u=function db(s){const a=s&&(s[q2]||s[mR]);if(a){const u=function l6(s){if(s.hasOwnProperty("name"))return s.name;const a=(""+s).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),a}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new $p(204,!1)}function nM(s,a,u=!1){return{factory:s,value:a,multi:u?[]:void 0}}function GX(s){return null!==s&&"object"==typeof s&&n2 in s}function rM(s){return"function"==typeof s}let S1=(()=>{class s{static create(u,f){var A;if(Array.isArray(u))return jX({name:""},f,u,"");{const S=null!==(A=u.name)&&void 0!==A?A:"";return jX({name:S},u.parent,u.providers,S)}}}return s.THROW_IF_NOT_FOUND=gN,s.NULL=new FX,s.\u0275prov=Hf({token:s,providedIn:"any",factory:()=>Mh(Q9)}),s.__NG_ELEMENT_ID__=-1,s})();function t$(s,a){xS(nU(s)[1],n0())}let sM=null;function aM(){if(!sM){const s=_v.Symbol;if(s&&s.iterator)sM=s.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<a.length;++u){const f=a[u];"entries"!==f&&"size"!==f&&Map.prototype[f]===Map.prototype.entries&&(sM=f)}}}return sM}function G_(s,a,u){return!Object.is(s[a],u)&&(s[a]=u,!0)}function cM(s,a,u,f){return G_(s,function Eb(){return Nf.lFrame.bindingIndex++}(),u)?a+up(u)+f:Ap}function TN(s,a,u,f,A,S){const j=function CN(s,a,u,f){const A=G_(s,a,u);return G_(s,a+1,f)||A}(s,function _1(){return Nf.lFrame.bindingIndex}(),u,A);return function Ry(s){const a=Nf.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,u}(2),j?a+up(u)+f+up(A)+S:Ap}function af(s,a=Of.Default){const u=zc();return null===u?Mh(s,a):w6(n0(),u,Sp(s),a)}function o7(){throw new Error("invalid")}function w5(s,a,u,f,A){const x=A?"class":"style";!function UX(s,a,u,f,A){for(let S=0;S<u.length;){const x=u[S++],j=u[S++],q=a[x],ce=s.data[x];null!==ce.setInput?ce.setInput(q,A,f,j):q[j]=A}}(s,u,a.inputs[x],x,f)}function Ay(s,a,u,f){const A=zc(),S=Mp(),x=20+s,j=A[11],q=A[x]=W6(j,a,function oN(){return Nf.lFrame.currentNamespace}()),ce=S.firstCreatePass?function FU(s,a,u,f,A,S,x){const j=a.consts,ce=Wx(a,s,2,A,q1(j,S));return function Zx(s,a,u,f){let A=!1;if(tN()){const S=function foe(s,a,u){const f=s.directiveRegistry;let A=null;if(f)for(let S=0;S<f.length;S++){const x=f[S];hX(u,x.selectors,!1)&&(A||(A=[]),lS(hN(u,a),s,x.type),v1(x)?(OX(s,u),A.unshift(x)):A.push(x))}return A}(s,a,u),x=null===f?null:{"":-1};if(null!==S){A=!0,DX(u,s.data.length,S.length);for(let Ye=0;Ye<S.length;Ye++){const _r=S[Ye];_r.providersResolver&&_r.providersResolver(_r)}let j=!1,q=!1,ce=Yx(s,a,S.length,null);for(let Ye=0;Ye<S.length;Ye++){const _r=S[Ye];u.mergedAttrs=lN(u.mergedAttrs,_r.hostAttrs),NX(s,u,a,ce,_r),poe(ce,_r,x),null!==_r.contentQueries&&(u.flags|=8),(null!==_r.hostBindings||null!==_r.hostAttrs||0!==_r.hostVars)&&(u.flags|=128);const ha=_r.type.prototype;!j&&(ha.ngOnChanges||ha.ngOnInit||ha.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),j=!0),!q&&(ha.ngOnChanges||ha.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),q=!0),ce++}!function ooe(s,a){const f=a.directiveEnd,A=s.data,S=a.attrs,x=[];let j=null,q=null;for(let ce=a.directiveStart;ce<f;ce++){const Ye=A[ce],_r=Ye.inputs,ha=null===S||o5(a)?null:Aoe(_r,S);x.push(ha),j=P9(_r,ce,j),q=P9(Ye.outputs,ce,q)}null!==j&&(j.hasOwnProperty("class")&&(a.flags|=16),j.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=x,a.inputs=j,a.outputs=q}(s,u)}x&&function tM(s,a,u){if(a){const f=s.localNames=[];for(let A=0;A<a.length;A+=2){const S=u[a[A+1]];if(null==S)throw new $p(-301,!1);f.push(a[A],S)}}}(u,f,x)}return u.mergedAttrs=lN(u.mergedAttrs,u.attrs),A}(a,u,ce,q1(j,x)),null!==ce.attrs&&A5(ce,ce.attrs,!1),null!==ce.mergedAttrs&&A5(ce,ce.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,ce),ce}(x,S,A,0,a,u,f):S.data[x];Zy(ce,!0);const Ye=ce.mergedAttrs;null!==Ye&&DR(j,q,Ye);const _r=ce.classes;null!==_r&&yN(j,q,_r);const ha=ce.styles;return null!==ha&&t9(j,q,ha),64!=(64&ce.flags)&&Tx(S,A,q,ce),0===function eN(){return Nf.lFrame.elementDepthCount}()&&V_(q,A),function _E(){Nf.lFrame.elementDepthCount++}(),OT(ce)&&(function k9(s,a,u){!tN()||(function hoe(s,a,u,f){const A=u.directiveStart,S=u.directiveEnd;s.firstCreatePass||hN(u,a),V_(f,a);const x=u.initialInputs;for(let j=A;j<S;j++){const q=s.data[j],ce=v1(q);ce&&kX(a,u,q);const Ye=fN(a,s,j,u);V_(Ye,a),null!==x&&goe(0,j-A,Ye,q,0,x),ce&&(_h(u.index,a)[8]=Ye)}}(s,a,u,L0(u,a)),128==(128&u.flags)&&function wX(s,a,u){const f=u.directiveStart,A=u.directiveEnd,x=u.index,j=function RP(){return Nf.lFrame.currentDirectiveIndex}();try{D0(x);for(let q=f;q<A;q++){const ce=s.data[q],Ye=a[q];kT(q),(null!==ce.hostBindings||0!==ce.hostVars||null!==ce.hostAttrs)&&RX(ce,Ye)}}finally{D0(-1),kT(j)}}(s,a,u))}(S,A,ce),function bU(s,a,u){if(X2(a)){const A=a.directiveEnd;for(let S=a.directiveStart;S<A;S++){const x=s.data[S];x.contentQueries&&x.contentQueries(1,u[S],S)}}}(S,ce,A)),null!==f&&function L9(s,a,u=L0){const f=a.localNames;if(null!==f){let A=a.index+1;for(let S=0;S<f.length;S+=2){const x=f[S+1],j=-1===x?u(a,s):s[x];s[A++]=j}}}(A,ce),Ay}function r_(){let s=n0();wO()?function r0(){Nf.lFrame.isParent=!1}():(s=s.parent,Zy(s,!1));const a=s;!function SR(){Nf.lFrame.elementDepthCount--}();const u=Mp();return u.firstCreatePass&&(xS(u,s),X2(s)&&u.queries.elementEnd(s)),null!=a.classesWithoutHost&&function FO(s){return 0!=(16&s.flags)}(a)&&w5(u,a,zc(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function C6(s){return 0!=(32&s.flags)}(a)&&w5(u,a,zc(),a.stylesWithoutHost,!1),r_}function QT(s,a,u,f){return Ay(s,a,u,f),r_(),QT}function R5(s){return!!s&&"function"==typeof s.then}const O5=function l7(s){return!!s&&"function"==typeof s.subscribe};function wN(s,a,u,f){const A=zc(),S=Mp(),x=n0();return function P$(s,a,u,f,A,S,x,j){const q=OT(f),Ye=s.firstCreatePass&&MX(s),_r=a[8],ha=F9(a);let pa=!0;if(3&f.type||j){const wl=L0(f,a),Il=j?j(wl):wl,Xc=ha.length,Ed=j?Ip=>j(_f(Ip[f.index])):f.index;if(J0(u)){let Ip=null;if(!j&&q&&(Ip=function Yoe(s,a,u,f){const A=s.cleanup;if(null!=A)for(let S=0;S<A.length-1;S+=2){const x=A[S];if(x===u&&A[S+1]===f){const j=a[7],q=A[S+2];return j.length>q?j[q]:null}"string"==typeof x&&(S+=2)}return null}(s,a,A,f.index)),null!==Ip)(Ip.__ngLastListenerFn__||Ip).__ngNextListenerFn__=S,Ip.__ngLastListenerFn__=S,pa=!1;else{S=h7(f,a,_r,S,!1);const Fp=u.listen(Il,A,S);ha.push(S,Fp),Ye&&Ye.push(A,Ed,Xc,Xc+1)}}else S=h7(f,a,_r,S,!0),Il.addEventListener(A,S,x),ha.push(S),Ye&&Ye.push(A,Ed,Xc,x)}else S=h7(f,a,_r,S,!1);const cc=f.outputs;let ol;if(pa&&null!==cc&&(ol=cc[A])){const wl=ol.length;if(wl)for(let Il=0;Il<wl;Il+=2){const l1=a[ol[Il]][ol[Il+1]].subscribe(S),D2=ha.length;ha.push(S,l1),Ye&&Ye.push(A,f.index,D2,-(D2+1))}}}(S,A,A[11],x,s,a,!!u,f),wN}function d7(s,a,u,f){try{return!1!==u(f)}catch(A){return BX(s,A),!1}}function h7(s,a,u,f,A){return function S(x){if(x===Function)return f;const j=2&s.flags?_h(s.index,a):a;0==(32&a[2])&&x9(j);let q=d7(a,0,f,x),ce=S.__ngNextListenerFn__;for(;ce;)q=d7(a,0,ce,x)&&q,ce=ce.__ngNextListenerFn__;return A&&!1===q&&(x.preventDefault(),x.returnValue=!1),q}}function H_(s,a=""){const u=zc(),f=Mp(),A=s+20,S=f.firstCreatePass?Wx(f,A,1,a,null):f.data[A],x=u[A]=function qV(s,a){return J0(s)?s.createText(a):s.createTextNode(a)}(u[11],a);Tx(f,u,x,S),Zy(S,!1)}function f2(s,a,u){const f=zc(),A=cM(f,s,a,u);return A!==Ap&&LR(f,t_(),A),f2}function kN(s,a,u,f,A){const S=zc(),x=TN(S,s,a,u,f,A);return x!==Ap&&LR(S,t_(),x),kN}const WU="en-US";let lZ=WU;class t4{}class jZ{resolveComponentFactory(a){throw function FZ(s){const a=Error(`No component factory found for ${xp(s)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=s,a}(a)}}let n4=(()=>{class s{}return s.NULL=new jZ,s})();function F7(){return p2(n0(),zc())}function p2(s,a){return new HT(L0(s,a))}let HT=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=F7,s})();function QZ(s){return s instanceof HT?s.nativeElement:s}class VZ{}let e8=(()=>{class s{}return s.\u0275prov=Hf({token:s,providedIn:"root",factory:()=>null}),s})();class i4{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const t8=new i4("13.3.12"),o4={};function n8(s,a,u,f,A=!1){for(;null!==u;){const S=a[u.index];if(null!==S&&f.push(_f(S)),F0(S))for(let j=10;j<S.length;j++){const q=S[j],ce=q[1].firstChild;null!==ce&&n8(q[1],q,ce,f)}const x=u.type;if(8&x)n8(s,a,u.child,f);else if(32&x){const j=jV(u,a);let q;for(;q=j();)f.push(q)}else if(16&x){const j=$V(a,u);if(Array.isArray(j))f.push(...j);else{const q=rU(a[16]);n8(q[1],q,j,f,!0)}}u=A?u.projectionNext:u.next}return f}class s4{constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,u=a[1];return n8(u,a,u.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(F0(a)){const u=a[8],f=u?u.indexOf(this):-1;f>-1&&(JV(a,f),Q_(u,f))}this._attachedToViewContainer=!1}zV(this._lView[1],this._lView)}onDestroy(a){SX(this._lView[1],this._lView,null,a)}markForCheck(){x9(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function B9(s,a,u){const f=a[10];f.begin&&f.begin();try{$x(s,a,s.template,u)}catch(A){throw BX(a,A),A}finally{f.end&&f.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $p(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Sx(s,a){aU(s,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new $p(902,"");this._appRef=a}}class qse extends s4{constructor(a){super(a),this._view=a}detectChanges(){PX(this._view)}checkNoChanges(){}get context(){return null}}class Q7 extends n4{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=Sy(a);return new r8(u,this.ngModule)}}function SM(s){const a=[];for(let u in s)s.hasOwnProperty(u)&&a.push({propName:s[u],templateName:u});return a}class r8 extends t4{constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function Hie(s){return s.map(pX).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return SM(this.componentDef.inputs)}get outputs(){return SM(this.componentDef.outputs)}create(a,u,f,A){const S=(A=A||this.ngModule)?function HZ(s,a){return{get:(u,f,A)=>{const S=s.get(u,o4,A);return S!==o4||f===o4?S:a.get(u,f,A)}}}(a,A.injector):a,x=S.get(VZ,zg),j=S.get(e8,null),q=x.createRenderer(null,this.componentDef),ce=this.componentDef.selectors[0][0]||"div",Ye=f?function CX(s,a,u){if(J0(s))return s.selectRootElement(a,u===iy.ShadowDom);let f="string"==typeof a?s.querySelector(a):a;return f.textContent="",f}(q,f,this.componentDef.encapsulation):W6(x.createRenderer(null,this.componentDef),ce,function GZ(s){const a=s.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(ce)),_r=this.componentDef.onPush?576:528,ha=function e$(s,a){return{components:[],scheduler:s||r5,clean:_oe,playerHandler:a||null,flags:0}}(),pa=d5(0,null,null,1,0,null,null,null,null,null),cc=IU(null,pa,ha,_r,null,null,x,q,j,S);let ol,wl;DO(cc);try{const Il=function C5(s,a,u,f,A,S){const x=u[1];u[20]=s;const q=Wx(x,20,2,"#host",null),ce=q.mergedAttrs=a.hostAttrs;null!==ce&&(A5(q,ce,!0),null!==s&&(DR(A,s,ce),null!==q.classes&&yN(A,s,q.classes),null!==q.styles&&t9(A,s,q.styles)));const Ye=f.createRenderer(s,a),_r=IU(u,CU(a),null,a.onPush?64:16,u[20],q,f,Ye,S||null,null);return x.firstCreatePass&&(lS(hN(q,u),x,a.type),OX(x,q),DX(q,u.length,1)),p5(u,_r),u[20]=_r}(Ye,this.componentDef,cc,x,q);if(Ye)if(f)DR(q,Ye,["ng-version",t8.full]);else{const{attrs:Xc,classes:Ed}=function gX(s){const a=[],u=[];let f=1,A=2;for(;f<s.length;){let S=s[f];if("string"==typeof S)2===A?""!==S&&a.push(S,s[++f]):8===A&&u.push(S);else{if(!fS(A))break;A=S}f++}return{attrs:a,classes:u}}(this.componentDef.selectors[0]);Xc&&DR(q,Ye,Xc),Ed&&Ed.length>0&&yN(q,Ye,Ed.join(" "))}if(wl=function gy(s,a){return s.data[a]}(pa,20),void 0!==u){const Xc=wl.projection=[];for(let Ed=0;Ed<this.ngContentSelectors.length;Ed++){const Ip=u[Ed];Xc.push(null!=Ip?Array.from(Ip):null)}}ol=function ZX(s,a,u,f,A){const S=u[1],x=function TX(s,a,u){const f=n0();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),NX(s,f,a,Yx(s,a,1,null),u));const A=fN(a,s,f.directiveStart,f);V_(A,a);const S=L0(f,a);return S&&V_(S,a),A}(S,u,a);if(f.components.push(x),s[8]=x,A&&A.forEach(q=>q(x,a)),a.contentQueries){const q=n0();a.contentQueries(1,x,q.directiveStart)}const j=n0();return!S.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(D0(j.index),eM(u[1],j,0,j.directiveStart,j.directiveEnd,a),RX(a,x)),x}(Il,this.componentDef,cc,ha,[t$]),Xx(pa,cc,null)}finally{PS()}return new WZ(this.componentType,ol,p2(wl,cc),cc,wl)}}class WZ extends class e4{}{constructor(a,u,f,A,S){super(),this.location=f,this._rootLView=A,this._tNode=S,this.instance=u,this.hostView=this.changeDetectorRef=new qse(A),this.componentType=a}get injector(){return new HO(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}class FR{}class V7{}const xN=new Map;class XZ extends FR{constructor(a,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Q7(this);const f=$y(a);this._bootstrapComponents=jT(f.bootstrap),this._r3Injector=QX(a,u,[{provide:FR,useValue:this},{provide:n4,useValue:this.componentFactoryResolver}],xp(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,u=S1.THROW_IF_NOT_FOUND,f=Of.Default){return a===S1||a===FR||a===Q9?this:this._r3Injector.get(a,u,f)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class H7 extends V7{constructor(a){super(),this.moduleType=a,null!==$y(a)&&function G7(s){const a=new Set;!function u(f){const A=$y(f,!0),S=A.id;null!==S&&(function YZ(s,a,u){if(a&&a!==u)throw new Error(`Duplicate module registered for ${s} - ${xp(a)} vs ${xp(a.name)}`)}(S,xN.get(S),f),xN.set(S,f));const x=jT(A.imports);for(const j of x)a.has(j)||(a.add(j),u(j))}(s)}(a)}create(a){return new XZ(this.moduleType,a)}}function J7(s){return a=>{setTimeout(s,void 0,a)}}const Kb=class rae extends ba{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,f){var A,S,x;let j=a,q=u||(()=>null),ce=f;if(a&&"object"==typeof a){const _r=a;j=null===(A=_r.next)||void 0===A?void 0:A.bind(_r),q=null===(S=_r.error)||void 0===S?void 0:S.bind(_r),ce=null===(x=_r.complete)||void 0===x?void 0:x.bind(_r)}this.__isAsync&&(q=J7(q),j&&(j=J7(j)),ce&&(ce=J7(ce)));const Ye=super.subscribe({next:j,error:q,complete:ce});return a instanceof M&&a.add(Ye),Ye}};function TM(){return this._results[aM()]()}class z7{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=aM(),f=z7.prototype;f[u]||(f[u]=TM)}get changes(){return this._changes||(this._changes=new Kb)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const f=this;f.dirty=!1;const A=Db(a);(this._changesDetected=!function Y3(s,a,u){if(s.length!==a.length)return!1;for(let f=0;f<s.length;f++){let A=s[f],S=a[f];if(u&&(A=u(A),S=u(S)),S!==A)return!1}return!0}(f._results,A,u))&&(f._results=A,f.length=A.length,f.last=A[this.length-1],f.first=A[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let jR=(()=>{class s{}return s.__NG_ELEMENT_ID__=sae,s})();const iae=jR,oae=class extends iae{constructor(a,u,f){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=f}createEmbeddedView(a){const u=this._declarationTContainer.tViews,f=IU(this._declarationLView,u,a,16,null,u.declTNode,null,null,null,null);f[17]=this._declarationLView[this._declarationTContainer.index];const S=this._declarationLView[19];return null!==S&&(f[19]=S.createEmbeddedView(u)),Xx(u,f,a),new s4(f)}};function sae(){return wM(n0(),zc())}function wM(s,a){return 4&s.type?new oae(a,s,p2(s,a)):null}let JS=(()=>{class s{}return s.__NG_ELEMENT_ID__=aae,s})();function aae(){return oee(n0(),zc())}const cae=JS,o8=class extends cae{constructor(a,u,f){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=f}get element(){return p2(this._hostTNode,this._hostLView)}get injector(){return new HO(this._hostTNode,this._hostLView)}get parentInjector(){const a=MT(this._hostTNode,this._hostLView);if(V3(a)){const u=xT(a,this._hostLView),f=jO(a);return new HO(u[1].data[f+8],u)}return new HO(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=X7(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,u,f){const A=a.createEmbeddedView(u||{});return this.insert(A,f),A}createComponent(a,u,f,A,S){const x=a&&!function pN(s){return"function"==typeof s}(a);let j;if(x)j=u;else{const _r=u||{};j=_r.index,f=_r.injector,A=_r.projectableNodes,S=_r.ngModuleRef}const q=x?a:new r8(Sy(a)),ce=f||this.parentInjector;if(!S&&null==q.ngModule){const ha=(x?ce:this.parentInjector).get(FR,null);ha&&(S=ha)}const Ye=q.create(ce,A,void 0,S);return this.insert(Ye.hostView,j),Ye}insert(a,u){const f=a._lView,A=f[1];if(function w_(s){return F0(s[3])}(f)){const Ye=this.indexOf(a);if(-1!==Ye)this.detach(Ye);else{const _r=f[3],ha=new o8(_r,_r[6],_r[3]);ha.detach(ha.indexOf(a))}}const S=this._adjustIndex(u),x=this._lContainer;!function die(s,a,u,f){const A=10+f,S=u.length;f>0&&(u[A-1][4]=a),f<S-10?(a[4]=u[A],FS(u,10+f,a)):(u.push(a),a[4]=null),a[3]=u;const x=a[17];null!==x&&u!==x&&function YV(s,a){const u=s[9];a[16]!==a[3][3][16]&&(s[2]=!0),null===u?s[9]=[a]:u.push(a)}(x,a);const j=a[19];null!==j&&j.insertView(s),a[2]|=128}(A,f,x,S);const j=sU(S,x),q=f[11],ce=J6(q,x[7]);return null!==ce&&function K6(s,a,u,f,A,S){f[0]=A,f[6]=a,aU(s,f,u,1,A,S)}(A,x[6],q,f,ce,j),a.attachToViewContainerRef(),FS(s8(x),S,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=X7(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),f=JV(this._lContainer,u);f&&(Q_(s8(this._lContainer),u),zV(f[1],f))}detach(a){const u=this._adjustIndex(a,-1),f=JV(this._lContainer,u);return f&&null!=Q_(s8(this._lContainer),u)?new s4(f):null}_adjustIndex(a,u=0){return null==a?this.length+u:a}};function X7(s){return s[8]}function s8(s){return s[8]||(s[8]=[])}function oee(s,a){let u;const f=a[s.index];if(F0(f))u=f;else{let A;if(8&s.type)A=_f(f);else{const S=a[11];A=S.createComment("");const x=L0(s,a);EN(S,J6(S,x),A,function pie(s,a){return J0(s)?s.nextSibling(a):a.nextSibling}(S,x),!1)}a[s.index]=u=function TU(s,a,u,f){return new Array(s,!0,!1,a,null,0,f,u,null,null)}(f,a,A,s),p5(a,u)}return new o8(u,s,a)}class $7{constructor(a){this.queryList=a,this.matches=null}clone(){return new $7(this.queryList)}setDirty(){this.queryList.setDirty()}}class Z7{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const f=null!==a.contentQueries?a.contentQueries[0]:u.length,A=[];for(let S=0;S<f;S++){const x=u.getByIndex(S);A.push(this.queries[x.indexInDeclarationView].clone())}return new Z7(A)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==dee(a,u).matches&&this.queries[u].setDirty()}}class aee{constructor(a,u,f=null){this.predicate=a,this.flags=u,this.read=f}}class _G{constructor(a=[]){this.queries=a}elementStart(a,u){for(let f=0;f<this.queries.length;f++)this.queries[f].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let f=0;f<this.length;f++){const A=null!==u?u.length:0,S=this.getByIndex(f).embeddedTView(a,A);S&&(S.indexInDeclarationView=f,null!==u?u.push(S):u=[S])}return null!==u?new _G(u):null}template(a,u){for(let f=0;f<this.queries.length;f++)this.queries[f].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class a8{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new a8(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let f=a.parent;for(;null!==f&&8&f.type&&f.index!==u;)f=f.parent;return u===(null!==f?f.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const f=this.metadata.predicate;if(Array.isArray(f))for(let A=0;A<f.length;A++){const S=f[A];this.matchTNodeWithReadOption(a,u,c8(u,S)),this.matchTNodeWithReadOption(a,u,UP(u,a,S,!1,!1))}else f===jR?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,UP(u,a,f,!1,!1))}matchTNodeWithReadOption(a,u,f){if(null!==f){const A=this.metadata.read;if(null!==A)if(A===HT||A===JS||A===jR&&4&u.type)this.addMatch(u.index,-2);else{const S=UP(u,a,A,!1,!1);null!==S&&this.addMatch(u.index,S)}else this.addMatch(u.index,f)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function c8(s,a){const u=s.localNames;if(null!==u)for(let f=0;f<u.length;f+=2)if(u[f]===a)return u[f+1];return null}function _H(s,a,u,f){return-1===u?function lae(s,a){return 11&s.type?p2(s,a):4&s.type?wM(s,a):null}(a,s):-2===u?function RM(s,a,u){return u===HT?p2(a,s):u===jR?wM(a,s):u===JS?oee(a,s):void 0}(s,a,f):fN(s,s[1],u,a)}function cee(s,a,u,f){const A=a[19].queries[f];if(null===A.matches){const S=s.data,x=u.matches,j=[];for(let q=0;q<x.length;q+=2){const ce=x[q];j.push(ce<0?null:_H(a,S[ce],x[q+1],u.metadata.read))}A.matches=j}return A.matches}function eq(s,a,u,f){const A=s.queries.getByIndex(u),S=A.matches;if(null!==S){const x=cee(s,a,A,u);for(let j=0;j<S.length;j+=2){const q=S[j];if(q>0)f.push(x[j/2]);else{const ce=S[j+1],Ye=a[-q];for(let _r=10;_r<Ye.length;_r++){const ha=Ye[_r];ha[17]===ha[3]&&eq(ha[1],ha,ce,f)}if(null!==Ye[9]){const _r=Ye[9];for(let ha=0;ha<_r.length;ha++){const pa=_r[ha];eq(pa[1],pa,ce,f)}}}}}return f}function OM(s){const a=zc(),u=Mp(),f=wR();Oy(f+1);const A=dee(u,f);if(s.dirty&&P3(a)===(2==(2&A.metadata.flags))){if(null===A.matches)s.reset([]);else{const S=A.crossesNgTemplate?eq(u,a,f,[]):cee(u,a,A,f);s.reset(S,QZ),s.notifyOnChanges()}return!0}return!1}function u8(s,a,u){const f=Mp();f.firstCreatePass&&(function uee(s,a,u){null===s.queries&&(s.queries=new _G),s.queries.track(new a8(a,u))}(f,new aee(s,a,u),-1),2==(2&a)&&(f.staticViewQueries=!0)),function nq(s,a,u){const f=new z7(4==(4&u));SX(s,a,f,f.destroy),null===a[19]&&(a[19]=new Z7),a[19].queries.push(new $7(f))}(f,zc(),a)}function MN(){return function dae(s,a){return s[19].queries[a].queryList}(zc(),wR())}function dee(s,a){return s.queries.getByIndex(a)}function l4(...s){}const d4=new Zp("Application Initializer");let A8=(()=>{class s{constructor(u){this.appInits=u,this.resolve=l4,this.reject=l4,this.initialized=!1,this.done=!1,this.donePromise=new Promise((f,A)=>{this.resolve=f,this.reject=A})}runInitializers(){if(this.initialized)return;const u=[],f=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let A=0;A<this.appInits.length;A++){const S=this.appInits[A]();if(R5(S))u.push(S);else if(O5(S)){const x=new Promise((j,q)=>{S.subscribe({complete:j,error:q})});u.push(x)}}Promise.all(u).then(()=>{f()}).catch(A=>{this.reject(A)}),0===u.length&&f(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(Mh(d4,8))},s.\u0275prov=Hf({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const NM=new Zp("AppId",{providedIn:"root",factory:function fq(){return`${m8()}${m8()}${m8()}`}});function m8(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const wee=new Zp("Platform Initializer"),pq=new Zp("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Ree=new Zp("appBootstrapListener");let Tae=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Hf({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const A2=new Zp("LocaleId",{providedIn:"root",factory:()=>eU(A2,Of.Optional|Of.SkipSelf)||function wae(){return"undefined"!=typeof $localize&&$localize.locale||WU}()});class Oae{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}let v8=(()=>{class s{compileModuleSync(u){return new H7(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const f=this.compileModuleSync(u),S=jT($y(u).declarations).reduce((x,j)=>{const q=Sy(j);return q&&x.push(new r8(q)),x},[]);return new Oae(f,S)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Hf({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Nae=(()=>Promise.resolve(0))();function gq(s){"undefined"==typeof Zone?Nae.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class k_{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:f=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Kb(!1),this.onMicrotaskEmpty=new Kb(!1),this.onStable=new Kb(!1),this.onError=new Kb(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const A=this;A._nesting=0,A._outer=A._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(A._inner=A._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(A._inner=A._inner.fork(Zone.longStackTraceZoneSpec)),A.shouldCoalesceEventChangeDetection=!f&&u,A.shouldCoalesceRunChangeDetection=f,A.lastRequestAnimationFrameId=-1,A.nativeRequestAnimationFrame=function kae(){let s=_v.requestAnimationFrame,a=_v.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&a){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const f=a[Zone.__symbol__("OriginalDelegate")];f&&(a=f)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function Lae(s){const a=()=>{!function Nee(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(_v,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,vq(s),s.isCheckStableRunning=!0,mq(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),vq(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,f,A,S,x,j)=>{try{return kee(s),u.invokeTask(A,S,x,j)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===S.type||s.shouldCoalesceRunChangeDetection)&&a(),Lee(s)}},onInvoke:(u,f,A,S,x,j,q)=>{try{return kee(s),u.invoke(A,S,x,j,q)}finally{s.shouldCoalesceRunChangeDetection&&a(),Lee(s)}},onHasTask:(u,f,A,S)=>{u.hasTask(A,S),f===A&&("microTask"==S.change?(s._hasPendingMicrotasks=S.microTask,vq(s),mq(s)):"macroTask"==S.change&&(s.hasPendingMacrotasks=S.macroTask))},onHandleError:(u,f,A,S)=>(u.handleError(A,S),s.runOutsideAngular(()=>s.onError.emit(S)),!1)})}(A)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!k_.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(k_.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,u,f){return this._inner.run(a,u,f)}runTask(a,u,f,A){const S=this._inner,x=S.scheduleEventTask("NgZoneEvent: "+A,a,Dee,l4,l4);try{return S.runTask(x,u,f)}finally{S.cancelTask(x)}}runGuarded(a,u,f){return this._inner.runGuarded(a,u,f)}runOutsideAngular(a){return this._outer.run(a)}}const Dee={};function mq(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function vq(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function kee(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Lee(s){s._nesting--,mq(s)}class Pae{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Kb,this.onMicrotaskEmpty=new Kb,this.onStable=new Kb,this.onError=new Kb}run(a,u,f){return a.apply(u,f)}runGuarded(a,u,f){return a.apply(u,f)}runOutsideAngular(a){return a()}runTask(a,u,f,A){return a.apply(u,f)}}let _q=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{k_.assertNotInAngularZone(),gq(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())gq(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(f=>!f.updateCb||!f.updateCb(u)||(clearTimeout(f.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,f,A){let S=-1;f&&f>0&&(S=setTimeout(()=>{this._callbacks=this._callbacks.filter(x=>x.timeoutId!==S),u(this._didWork,this.getPendingTasks())},f)),this._callbacks.push({doneCb:u,timeoutId:S,updateCb:A})}whenStable(u,f,A){if(A&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,f,A),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,f,A){return[]}}return s.\u0275fac=function(u){return new(u||s)(Mh(k_))},s.\u0275prov=Hf({token:s,factory:s.\u0275fac}),s})(),xae=(()=>{class s{constructor(){this._applications=new Map,bq.addToWindow(this)}registerApplication(u,f){this._applications.set(u,f)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,f=!0){return bq.findTestabilityInTree(this,u,f)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Hf({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();class Pee{addToWindow(a){}findTestabilityInTree(a,u,f){return null}}let bq=new Pee,m2=null;const xee=new Zp("AllowMultipleToken"),h4=new Zp("PlatformOnDestroy");class Uee{constructor(a,u){this.name=a,this.token=u}}function kq(s,a,u=[]){const f=`Platform: ${a}`,A=new Zp(f);return(S=[])=>{let x=jq();if(!x||x.injector.get(xee,!1)){const j=[...u,...S,{provide:A,useValue:!0}];s?s(j):function Fee(s){if(m2&&!m2.get(xee,!1))throw new $p(400,"");m2=s;const a=s.get(jee),u=s.get(wee,null);u&&u.forEach(f=>f())}(function Fae(s=[],a){return S1.create({name:a,providers:[{provide:m5,useValue:"platform"},{provide:h4,useValue:()=>m2=null},...s]})}(j,f))}return function Uae(s){const a=jq();if(!a)throw new $p(401,"");return a}()}}function jq(){var s;return null!==(s=null==m2?void 0:m2.get(jee))&&void 0!==s?s:null}let jee=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,f){const j=function Qee(s,a){let u;return u="noop"===s?new Pae:("zone.js"===s?void 0:s)||new k_({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),u}(f?f.ngZone:void 0,{ngZoneEventCoalescing:f&&f.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:f&&f.ngZoneRunCoalescing||!1}),q=[{provide:k_,useValue:j}];return j.run(()=>{const ce=S1.create({providers:q,parent:this.injector,name:u.moduleType.name}),Ye=u.create(ce),_r=Ye.injector.get(Mx,null);if(!_r)throw new $p(402,"");return j.runOutsideAngular(()=>{const ha=j.onError.subscribe({next:pa=>{_r.handleError(pa)}});Ye.onDestroy(()=>{eW(this._modules,Ye),ha.unsubscribe()})}),function Qae(s,a,u){try{const f=u();return R5(f)?f.catch(A=>{throw a.runOutsideAngular(()=>s.handleError(A)),A}):f}catch(f){throw a.runOutsideAngular(()=>s.handleError(f)),f}}(_r,j,()=>{const ha=Ye.injector.get(A8);return ha.runInitializers(),ha.donePromise.then(()=>(function yse(s){F_(s,"Expected localeId to be defined"),"string"==typeof s&&(lZ=s.toLowerCase().replace(/_/g,"-"))}(Ye.injector.get(A2,WU)||WU),this._moduleDoBootstrap(Ye),Ye))})})}bootstrapModule(u,f=[]){const A=qq({},f);return function Mee(s,a,u){const f=new H7(u);return Promise.resolve(f)}(0,0,u).then(S=>this.bootstrapModuleFactory(S,A))}_moduleDoBootstrap(u){const f=u.injector.get(f4);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(A=>f.bootstrap(A));else{if(!u.instance.ngDoBootstrap)throw new $p(403,"");u.instance.ngDoBootstrap(f)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new $p(404,"");this._modules.slice().forEach(f=>f.destroy()),this._destroyListeners.forEach(f=>f());const u=this._injector.get(h4,null);null==u||u(),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(Mh(S1))},s.\u0275prov=Hf({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function qq(s,a){return Array.isArray(a)?a.reduce(qq,s):Object.assign(Object.assign({},s),a)}let f4=(()=>{class s{constructor(u,f,A,S){this._zone=u,this._injector=f,this._exceptionHandler=A,this._initStatus=S,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const x=new Fd(q=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{q.next(this._stable),q.complete()})}),j=new Fd(q=>{let ce;this._zone.runOutsideAngular(()=>{ce=this._zone.onStable.subscribe(()=>{k_.assertNotInAngularZone(),gq(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,q.next(!0))})})});const Ye=this._zone.onUnstable.subscribe(()=>{k_.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{q.next(!1)}))});return()=>{ce.unsubscribe(),Ye.unsubscribe()}});this.isStable=function Ph(...s){const a=hO(s),u=function y3(s,a){return"number"==typeof FL(s)?s.pop():a}(s,1/0),f=s;return f.length?1===f.length?nS(f[0]):dO(u)(Hd(f,a)):k1}(x,j.pipe(function fy(s={}){const{connector:a=(()=>new ba),resetOnError:u=!0,resetOnComplete:f=!0,resetOnRefCountZero:A=!0}=s;return S=>{let x,j,q,ce=0,Ye=!1,_r=!1;const ha=()=>{null==j||j.unsubscribe(),j=void 0},pa=()=>{ha(),x=q=void 0,Ye=_r=!1},cc=()=>{const ol=x;pa(),null==ol||ol.unsubscribe()};return zy((ol,wl)=>{ce++,!_r&&!Ye&&ha();const Il=q=null!=q?q:a();wl.add(()=>{ce--,0===ce&&!_r&&!Ye&&(j=sb(cc,A))}),Il.subscribe(wl),!x&&ce>0&&(x=new Ha({next:Xc=>Il.next(Xc),error:Xc=>{_r=!0,ha(),j=sb(pa,u,Xc),Il.error(Xc)},complete:()=>{Ye=!0,ha(),j=sb(pa,f),Il.complete()}}),nS(ol).subscribe(x))})(S)}}()))}bootstrap(u,f){if(!this._initStatus.done)throw new $p(405,"");let A;A=u instanceof t4?u:this._injector.get(n4).resolveComponentFactory(u),this.componentTypes.push(A.componentType);const S=function Bee(s){return s.isBoundToModule}(A)?void 0:this._injector.get(FR),j=A.create(S1.NULL,[],f||A.selector,S),q=j.location.nativeElement,ce=j.injector.get(_q,null),Ye=ce&&j.injector.get(xae);return ce&&Ye&&Ye.registerApplication(q,ce),j.onDestroy(()=>{this.detachView(j.hostView),eW(this.components,j),Ye&&Ye.unregisterApplication(q)}),this._loadComponent(j),j}tick(){if(this._runningTick)throw new $p(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const f=u;this._views.push(f),f.attachToAppRef(this)}detachView(u){const f=u;eW(this._views,f),f.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(Ree,[]).concat(this._bootstrapListeners).forEach(A=>A(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(Mh(k_),Mh(S1),Mh(Mx),Mh(A8))},s.\u0275prov=Hf({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function eW(s,a){const u=s.indexOf(a);u>-1&&s.splice(u,1)}let tW=!0,nW=(()=>{class s{}return s.__NG_ELEMENT_ID__=Gae,s})();function Gae(s){return function Wee(s,a,u){if(EO(s)&&!u){const f=_h(s.index,a);return new s4(f,f)}return 47&s.type?new s4(a[16],a):null}(n0(),zc(),16==(16&s))}const zae=kq(null,"core",[]);let Xae=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(Mh(f4))},s.\u0275mod=E1({type:s}),s.\u0275inj=M1({}),s})(),v4=null;function zS(){return v4}const t1=new Zp("DocumentToken");let y2=(()=>{class s{historyGo(u){throw new Error("Not implemented")}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Hf({token:s,factory:function(){return function ice(){return Mh(ite)}()},providedIn:"platform"}),s})();const oce=new Zp("Location Initialized");let ite=(()=>{class s extends y2{constructor(u){super(),this._doc=u,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return zS().getBaseHref(this._doc)}onPopState(u){const f=zS().getGlobalEventTarget(this._doc,"window");return f.addEventListener("popstate",u,!1),()=>f.removeEventListener("popstate",u)}onHashChange(u){const f=zS().getGlobalEventTarget(this._doc,"window");return f.addEventListener("hashchange",u,!1),()=>f.removeEventListener("hashchange",u)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(u){this.location.pathname=u}pushState(u,f,A){ote()?this._history.pushState(u,f,A):this.location.hash=A}replaceState(u,f,A){ote()?this._history.replaceState(u,f,A):this.location.hash=A}forward(){this._history.forward()}back(){this._history.back()}historyGo(u=0){this._history.go(u)}getState(){return this._history.state}}return s.\u0275fac=function(u){return new(u||s)(Mh(t1))},s.\u0275prov=Hf({token:s,factory:function(){return function ste(){return new ite(Mh(t1))}()},providedIn:"platform"}),s})();function ote(){return!!window.history.pushState}function dW(s,a){if(0==s.length)return a;if(0==a.length)return s;let u=0;return s.endsWith("/")&&u++,a.startsWith("/")&&u++,2==u?s+a.substring(1):1==u?s+a:s+"/"+a}function hW(s){const a=s.match(/#|\?|$/),u=a&&a.index||s.length;return s.slice(0,u-("/"===s[u-1]?1:0))+s.slice(u)}function XS(s){return s&&"?"!==s[0]?"?"+s:s}let FN=(()=>{class s{historyGo(u){throw new Error("Not implemented")}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Hf({token:s,factory:function(){return function ate(s){const a=Mh(t1).location;return new cte(Mh(y2),a&&a.origin||"")}()},providedIn:"root"}),s})();const C8=new Zp("appBaseHref");let cte=(()=>{class s extends FN{constructor(u,f){if(super(),this._platformLocation=u,this._removeListenerFns=[],null==f&&(f=this._platformLocation.getBaseHrefFromDOM()),null==f)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=f}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(u){this._removeListenerFns.push(this._platformLocation.onPopState(u),this._platformLocation.onHashChange(u))}getBaseHref(){return this._baseHref}prepareExternalUrl(u){return dW(this._baseHref,u)}path(u=!1){const f=this._platformLocation.pathname+XS(this._platformLocation.search),A=this._platformLocation.hash;return A&&u?`${f}${A}`:f}pushState(u,f,A,S){const x=this.prepareExternalUrl(A+XS(S));this._platformLocation.pushState(u,f,x)}replaceState(u,f,A,S){const x=this.prepareExternalUrl(A+XS(S));this._platformLocation.replaceState(u,f,x)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(u=0){var f,A;null===(A=(f=this._platformLocation).historyGo)||void 0===A||A.call(f,u)}}return s.\u0275fac=function(u){return new(u||s)(Mh(y2),Mh(C8,8))},s.\u0275prov=Hf({token:s,factory:s.\u0275fac}),s})(),sce=(()=>{class s extends FN{constructor(u,f){super(),this._platformLocation=u,this._baseHref="",this._removeListenerFns=[],null!=f&&(this._baseHref=f)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(u){this._removeListenerFns.push(this._platformLocation.onPopState(u),this._platformLocation.onHashChange(u))}getBaseHref(){return this._baseHref}path(u=!1){let f=this._platformLocation.hash;return null==f&&(f="#"),f.length>0?f.substring(1):f}prepareExternalUrl(u){const f=dW(this._baseHref,u);return f.length>0?"#"+f:f}pushState(u,f,A,S){let x=this.prepareExternalUrl(A+XS(S));0==x.length&&(x=this._platformLocation.pathname),this._platformLocation.pushState(u,f,x)}replaceState(u,f,A,S){let x=this.prepareExternalUrl(A+XS(S));0==x.length&&(x=this._platformLocation.pathname),this._platformLocation.replaceState(u,f,x)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(u=0){var f,A;null===(A=(f=this._platformLocation).historyGo)||void 0===A||A.call(f,u)}}return s.\u0275fac=function(u){return new(u||s)(Mh(y2),Mh(C8,8))},s.\u0275prov=Hf({token:s,factory:s.\u0275fac}),s})(),xM=(()=>{class s{constructor(u,f){this._subject=new Kb,this._urlChangeListeners=[],this._platformStrategy=u;const A=this._platformStrategy.getBaseHref();this._platformLocation=f,this._baseHref=hW(qT(A)),this._platformStrategy.onPopState(S=>{this._subject.emit({url:this.path(!0),pop:!0,state:S.state,type:S.type})})}path(u=!1){return this.normalize(this._platformStrategy.path(u))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(u,f=""){return this.path()==this.normalize(u+XS(f))}normalize(u){return s.stripTrailingSlash(function ace(s,a){return s&&a.startsWith(s)?a.substring(s.length):a}(this._baseHref,qT(u)))}prepareExternalUrl(u){return u&&"/"!==u[0]&&(u="/"+u),this._platformStrategy.prepareExternalUrl(u)}go(u,f="",A=null){this._platformStrategy.pushState(A,"",u,f),this._notifyUrlChangeListeners(this.prepareExternalUrl(u+XS(f)),A)}replaceState(u,f="",A=null){this._platformStrategy.replaceState(A,"",u,f),this._notifyUrlChangeListeners(this.prepareExternalUrl(u+XS(f)),A)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(u=0){var f,A;null===(A=(f=this._platformStrategy).historyGo)||void 0===A||A.call(f,u)}onUrlChange(u){this._urlChangeListeners.push(u),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(f=>{this._notifyUrlChangeListeners(f.url,f.state)}))}_notifyUrlChangeListeners(u="",f){this._urlChangeListeners.forEach(A=>A(u,f))}subscribe(u,f,A){return this._subject.subscribe({next:u,error:f,complete:A})}}return s.normalizeQueryParams=XS,s.joinWithSlash=dW,s.stripTrailingSlash=hW,s.\u0275fac=function(u){return new(u||s)(Mh(FN),Mh(y2))},s.\u0275prov=Hf({token:s,factory:function(){return function HR(){return new xM(Mh(FN),Mh(y2))}()},providedIn:"root"}),s})();function qT(s){return s.replace(/\/index.html$/,"")}function Ote(s,a){a=encodeURIComponent(a);for(const u of s.split(";")){const f=u.indexOf("="),[A,S]=-1==f?[u,""]:[u.slice(0,f),u.slice(f+1)];if(A.trim()===a)return decodeURIComponent(S)}return null}let FM=(()=>{class s{}return s.\u0275fac=function(u){return new(u||s)},s.\u0275mod=E1({type:s}),s.\u0275inj=M1({}),s})();let Fte=(()=>{class s{}return s.\u0275prov=Hf({token:s,providedIn:"root",factory:()=>new Pce(Mh(t1),window)}),s})();class Pce{constructor(a,u){this.document=a,this.window=u,this.offset=()=>[0,0]}setOffset(a){this.offset=Array.isArray(a)?()=>a:a}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(a){this.supportsScrolling()&&this.window.scrollTo(a[0],a[1])}scrollToAnchor(a){if(!this.supportsScrolling())return;const u=function Qte(s,a){const u=s.getElementById(a)||s.getElementsByName(a)[0];if(u)return u;if("function"==typeof s.createTreeWalker&&s.body&&(s.body.createShadowRoot||s.body.attachShadow)){const f=s.createTreeWalker(s.body,NodeFilter.SHOW_ELEMENT);let A=f.currentNode;for(;A;){const S=A.shadowRoot;if(S){const x=S.getElementById(a)||S.querySelector(`[name="${a}"]`);if(x)return x}A=f.nextNode()}}return null}(this.document,a);u&&(this.scrollToElement(u),u.focus())}setHistoryScrollRestoration(a){if(this.supportScrollRestoration()){const u=this.window.history;u&&u.scrollRestoration&&(u.scrollRestoration=a)}}scrollToElement(a){const u=a.getBoundingClientRect(),f=u.left+this.window.pageXOffset,A=u.top+this.window.pageYOffset,S=this.offset();this.window.scrollTo(f-S[0],A-S[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const a=jte(this.window.history)||jte(Object.getPrototypeOf(this.window.history));return!(!a||!a.writable&&!a.set)}catch(a){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(a){return!1}}}function jte(s){return Object.getOwnPropertyDescriptor(s,"scrollRestoration")}class Vte{}class Y extends class Gte extends class rce{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function rte(s){v4||(v4=s)}(new Y)}onAndCancel(a,u,f){return a.addEventListener(u,f,!1),()=>{a.removeEventListener(u,f,!1)}}dispatchEvent(a,u){a.dispatchEvent(u)}remove(a){a.parentNode&&a.parentNode.removeChild(a)}createElement(a,u){return(u=u||this.getDefaultDocument()).createElement(a)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(a){return a.nodeType===Node.ELEMENT_NODE}isShadowRoot(a){return a instanceof DocumentFragment}getGlobalEventTarget(a,u){return"window"===u?window:"document"===u?a:"body"===u?a.body:null}getBaseHref(a){const u=function kW(){return VN=VN||document.querySelector("base"),VN?VN.getAttribute("href"):null}();return null==u?null:function Mce(s){R4=R4||document.createElement("a"),R4.setAttribute("href",s);const a=R4.pathname;return"/"===a.charAt(0)?a:`/${a}`}(u)}resetBaseElement(){VN=null}getUserAgent(){return window.navigator.userAgent}getCookie(a){return Ote(document.cookie,a)}}let R4,VN=null;const G8=new Zp("TRANSITION_ID"),GN=[{provide:d4,useFactory:function LW(s,a,u){return()=>{u.get(A8).donePromise.then(()=>{const f=zS(),A=a.querySelectorAll(`style[ng-transition="${s}"]`);for(let S=0;S<A.length;S++)f.remove(A[S])})}},deps:[G8,t1,S1],multi:!0}];class O4{static init(){!function Mae(s){bq=s}(new O4)}addToWindow(a){_v.getAngularTestability=(f,A=!0)=>{const S=a.findTestabilityInTree(f,A);if(null==S)throw new Error("Could not find testability for element.");return S},_v.getAllAngularTestabilities=()=>a.getAllTestabilities(),_v.getAllAngularRootElements=()=>a.getAllRootElements(),_v.frameworkStabilizers||(_v.frameworkStabilizers=[]),_v.frameworkStabilizers.push(f=>{const A=_v.getAllAngularTestabilities();let S=A.length,x=!1;const j=function(q){x=x||q,S--,0==S&&f(x)};A.forEach(function(q){q.whenStable(j)})})}findTestabilityInTree(a,u,f){if(null==u)return null;const A=a.getTestability(u);return null!=A?A:f?zS().isShadowRoot(u)?this.findTestabilityInTree(a,u.host,!0):this.findTestabilityInTree(a,u.parentElement,!0):null}}let H8=(()=>{class s{build(){return new XMLHttpRequest}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Hf({token:s,factory:s.\u0275fac}),s})();const D4=new Zp("EventManagerPlugins");let N4=(()=>{class s{constructor(u,f){this._zone=f,this._eventNameToPlugin=new Map,u.forEach(A=>A.manager=this),this._plugins=u.slice().reverse()}addEventListener(u,f,A){return this._findPluginFor(f).addEventListener(u,f,A)}addGlobalEventListener(u,f,A){return this._findPluginFor(f).addGlobalEventListener(u,f,A)}getZone(){return this._zone}_findPluginFor(u){const f=this._eventNameToPlugin.get(u);if(f)return f;const A=this._plugins;for(let S=0;S<A.length;S++){const x=A[S];if(x.supports(u))return this._eventNameToPlugin.set(u,x),x}throw new Error(`No event manager plugin found for event ${u}`)}}return s.\u0275fac=function(u){return new(u||s)(Mh(D4),Mh(k_))},s.\u0275prov=Hf({token:s,factory:s.\u0275fac}),s})();class k4{constructor(a){this._doc=a}addGlobalEventListener(a,u,f){const A=zS().getGlobalEventTarget(this._doc,a);if(!A)throw new Error(`Unsupported event target ${A} for event ${u}`);return this.addEventListener(A,u,f)}}let Hte=(()=>{class s{constructor(){this._stylesSet=new Set}addStyles(u){const f=new Set;u.forEach(A=>{this._stylesSet.has(A)||(this._stylesSet.add(A),f.add(A))}),this.onStylesAdded(f)}onStylesAdded(u){}getAllStyles(){return Array.from(this._stylesSet)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Hf({token:s,factory:s.\u0275fac}),s})(),L4=(()=>{class s extends Hte{constructor(u){super(),this._doc=u,this._hostNodes=new Map,this._hostNodes.set(u.head,[])}_addStylesToHost(u,f,A){u.forEach(S=>{const x=this._doc.createElement("style");x.textContent=S,A.push(f.appendChild(x))})}addHost(u){const f=[];this._addStylesToHost(this._stylesSet,u,f),this._hostNodes.set(u,f)}removeHost(u){const f=this._hostNodes.get(u);f&&f.forEach(qte),this._hostNodes.delete(u)}onStylesAdded(u){this._hostNodes.forEach((f,A)=>{this._addStylesToHost(u,A,f)})}ngOnDestroy(){this._hostNodes.forEach(u=>u.forEach(qte))}}return s.\u0275fac=function(u){return new(u||s)(Mh(t1))},s.\u0275prov=Hf({token:s,factory:s.\u0275fac}),s})();function qte(s){zS().remove(s)}const PW={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},P4=/%COMP%/g;function x4(s,a,u){for(let f=0;f<a.length;f++){let A=a[f];Array.isArray(A)?x4(s,A,u):(A=A.replace(P4,s),u.push(A))}return u}function Yte(s){return a=>{if("__ngUnwrap__"===a)return s;!1===s(a)&&(a.preventDefault(),a.returnValue=!1)}}let MW=(()=>{class s{constructor(u,f,A){this.eventManager=u,this.sharedStylesHost=f,this.appId=A,this.rendererByCompId=new Map,this.defaultRenderer=new BW(u)}createRenderer(u,f){if(!u||!f)return this.defaultRenderer;switch(f.encapsulation){case iy.Emulated:{let A=this.rendererByCompId.get(f.id);return A||(A=new zte(this.eventManager,this.sharedStylesHost,f,this.appId),this.rendererByCompId.set(f.id,A)),A.applyToHost(u),A}case 1:case iy.ShadowDom:return new Xte(this.eventManager,this.sharedStylesHost,u,f);default:if(!this.rendererByCompId.has(f.id)){const A=x4(f.id,f.styles,[]);this.sharedStylesHost.addStyles(A),this.rendererByCompId.set(f.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return s.\u0275fac=function(u){return new(u||s)(Mh(N4),Mh(L4),Mh(NM))},s.\u0275prov=Hf({token:s,factory:s.\u0275fac}),s})();class BW{constructor(a){this.eventManager=a,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(a,u){return u?document.createElementNS(PW[u]||u,a):document.createElement(a)}createComment(a){return document.createComment(a)}createText(a){return document.createTextNode(a)}appendChild(a,u){a.appendChild(u)}insertBefore(a,u,f){a&&a.insertBefore(u,f)}removeChild(a,u){a&&a.removeChild(u)}selectRootElement(a,u){let f="string"==typeof a?document.querySelector(a):a;if(!f)throw new Error(`The selector "${a}" did not match any elements`);return u||(f.textContent=""),f}parentNode(a){return a.parentNode}nextSibling(a){return a.nextSibling}setAttribute(a,u,f,A){if(A){u=A+":"+u;const S=PW[A];S?a.setAttributeNS(S,u,f):a.setAttribute(u,f)}else a.setAttribute(u,f)}removeAttribute(a,u,f){if(f){const A=PW[f];A?a.removeAttributeNS(A,u):a.removeAttribute(`${f}:${u}`)}else a.removeAttribute(u)}addClass(a,u){a.classList.add(u)}removeClass(a,u){a.classList.remove(u)}setStyle(a,u,f,A){A&(o0.DashCase|o0.Important)?a.style.setProperty(u,f,A&o0.Important?"important":""):a.style[u]=f}removeStyle(a,u,f){f&o0.DashCase?a.style.removeProperty(u):a.style[u]=""}setProperty(a,u,f){a[u]=f}setValue(a,u){a.nodeValue=u}listen(a,u,f){return"string"==typeof a?this.eventManager.addGlobalEventListener(a,u,Yte(f)):this.eventManager.addEventListener(a,u,Yte(f))}}class zte extends BW{constructor(a,u,f,A){super(a),this.component=f;const S=x4(A+"-"+f.id,f.styles,[]);u.addStyles(S),this.contentAttr=function QM(s){return"_ngcontent-%COMP%".replace(P4,s)}(A+"-"+f.id),this.hostAttr=function Kte(s){return"_nghost-%COMP%".replace(P4,s)}(A+"-"+f.id)}applyToHost(a){super.setAttribute(a,this.hostAttr,"")}createElement(a,u){const f=super.createElement(a,u);return super.setAttribute(f,this.contentAttr,""),f}}class Xte extends BW{constructor(a,u,f,A){super(a),this.sharedStylesHost=u,this.hostEl=f,this.shadowRoot=f.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const S=x4(A.id,A.styles,[]);for(let x=0;x<S.length;x++){const j=document.createElement("style");j.textContent=S[x],this.shadowRoot.appendChild(j)}}nodeOrShadowRoot(a){return a===this.hostEl?this.shadowRoot:a}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(a,u){return super.appendChild(this.nodeOrShadowRoot(a),u)}insertBefore(a,u,f){return super.insertBefore(this.nodeOrShadowRoot(a),u,f)}removeChild(a,u){return super.removeChild(this.nodeOrShadowRoot(a),u)}parentNode(a){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(a)))}}let VM=(()=>{class s extends k4{constructor(u){super(u)}supports(u){return!0}addEventListener(u,f,A){return u.addEventListener(f,A,!1),()=>this.removeEventListener(u,f,A)}removeEventListener(u,f,A){return u.removeEventListener(f,A)}}return s.\u0275fac=function(u){return new(u||s)(Mh(t1))},s.\u0275prov=Hf({token:s,factory:s.\u0275fac}),s})();const UW=["alt","control","meta","shift"],$te={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},W8={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},K8={alt:s=>s.altKey,control:s=>s.ctrlKey,meta:s=>s.metaKey,shift:s=>s.shiftKey};let Uce=(()=>{class s extends k4{constructor(u){super(u)}supports(u){return null!=s.parseEventName(u)}addEventListener(u,f,A){const S=s.parseEventName(f),x=s.eventCallback(S.fullKey,A,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>zS().onAndCancel(u,S.domEventName,x))}static parseEventName(u){const f=u.toLowerCase().split("."),A=f.shift();if(0===f.length||"keydown"!==A&&"keyup"!==A)return null;const S=s._normalizeKey(f.pop());let x="";if(UW.forEach(q=>{const ce=f.indexOf(q);ce>-1&&(f.splice(ce,1),x+=q+".")}),x+=S,0!=f.length||0===S.length)return null;const j={};return j.domEventName=A,j.fullKey=x,j}static getEventFullKey(u){let f="",A=function Fce(s){let a=s.key;if(null==a){if(a=s.keyIdentifier,null==a)return"Unidentified";a.startsWith("U+")&&(a=String.fromCharCode(parseInt(a.substring(2),16)),3===s.location&&W8.hasOwnProperty(a)&&(a=W8[a]))}return $te[a]||a}(u);return A=A.toLowerCase()," "===A?A="space":"."===A&&(A="dot"),UW.forEach(S=>{S!=A&&K8[S](u)&&(f+=S+".")}),f+=A,f}static eventCallback(u,f,A){return S=>{s.getEventFullKey(S)===u&&A.runGuarded(()=>f(S))}}static _normalizeKey(u){return"esc"===u?"escape":u}}return s.\u0275fac=function(u){return new(u||s)(Mh(t1))},s.\u0275prov=Hf({token:s,factory:s.\u0275fac}),s})();const ene=kq(zae,"browser",[{provide:pq,useValue:"browser"},{provide:wee,useValue:function jce(){Y.makeCurrent(),O4.init()},multi:!0},{provide:t1,useFactory:function FW(){return function L3(s){T_=s}(document),document},deps:[]}]),Qce=[{provide:m5,useValue:"root"},{provide:Mx,useFactory:function Zte(){return new Mx},deps:[]},{provide:D4,useClass:VM,multi:!0,deps:[t1,k_,pq]},{provide:D4,useClass:Uce,multi:!0,deps:[t1]},{provide:MW,useClass:MW,deps:[N4,L4,NM]},{provide:VZ,useExisting:MW},{provide:Hte,useExisting:L4},{provide:L4,useClass:L4,deps:[t1]},{provide:_q,useClass:_q,deps:[k_]},{provide:N4,useClass:N4,deps:[D4,k_]},{provide:Vte,useClass:H8,deps:[]}];let jW=(()=>{class s{constructor(u){if(u)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(u){return{ngModule:s,providers:[{provide:NM,useValue:u.appId},{provide:G8,useExisting:NM},GN]}}}return s.\u0275fac=function(u){return new(u||s)(Mh(s,12))},s.\u0275mod=E1({type:s}),s.\u0275inj=M1({providers:Qce,imports:[FM,Xae]}),s})();function Np(...s){return Hd(s,hO(s))}function Y1(s,a){return l(a)?q0(s,a,1):q0(s,1)}function JR(s,a){return zy((u,f)=>{let A=0;u.subscribe(u0(f,S=>s.call(a,S,A++)&&f.next(S)))})}"undefined"!=typeof window&&window;class GW{}class HW{}class zR{constructor(a){this.normalizedNames=new Map,this.lazyUpdate=null,a?this.lazyInit="string"==typeof a?()=>{this.headers=new Map,a.split("\n").forEach(u=>{const f=u.indexOf(":");if(f>0){const A=u.slice(0,f),S=A.toLowerCase(),x=u.slice(f+1).trim();this.maybeSetNormalizedName(A,S),this.headers.has(S)?this.headers.get(S).push(x):this.headers.set(S,[x])}})}:()=>{this.headers=new Map,Object.keys(a).forEach(u=>{let f=a[u];const A=u.toLowerCase();"string"==typeof f&&(f=[f]),f.length>0&&(this.headers.set(A,f),this.maybeSetNormalizedName(u,A))})}:this.headers=new Map}has(a){return this.init(),this.headers.has(a.toLowerCase())}get(a){this.init();const u=this.headers.get(a.toLowerCase());return u&&u.length>0?u[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(a){return this.init(),this.headers.get(a.toLowerCase())||null}append(a,u){return this.clone({name:a,value:u,op:"a"})}set(a,u){return this.clone({name:a,value:u,op:"s"})}delete(a,u){return this.clone({name:a,value:u,op:"d"})}maybeSetNormalizedName(a,u){this.normalizedNames.has(u)||this.normalizedNames.set(u,a)}init(){this.lazyInit&&(this.lazyInit instanceof zR?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(a=>this.applyUpdate(a)),this.lazyUpdate=null))}copyFrom(a){a.init(),Array.from(a.headers.keys()).forEach(u=>{this.headers.set(u,a.headers.get(u)),this.normalizedNames.set(u,a.normalizedNames.get(u))})}clone(a){const u=new zR;return u.lazyInit=this.lazyInit&&this.lazyInit instanceof zR?this.lazyInit:this,u.lazyUpdate=(this.lazyUpdate||[]).concat([a]),u}applyUpdate(a){const u=a.name.toLowerCase();switch(a.op){case"a":case"s":let f=a.value;if("string"==typeof f&&(f=[f]),0===f.length)return;this.maybeSetNormalizedName(a.name,u);const A=("a"===a.op?this.headers.get(u):void 0)||[];A.push(...f),this.headers.set(u,A);break;case"d":const S=a.value;if(S){let x=this.headers.get(u);if(!x)return;x=x.filter(j=>-1===S.indexOf(j)),0===x.length?(this.headers.delete(u),this.normalizedNames.delete(u)):this.headers.set(u,x)}else this.headers.delete(u),this.normalizedNames.delete(u)}}forEach(a){this.init(),Array.from(this.normalizedNames.keys()).forEach(u=>a(this.normalizedNames.get(u),this.headers.get(u)))}}class ane{encodeKey(a){return qW(a)}encodeValue(a){return qW(a)}decodeKey(a){return decodeURIComponent(a)}decodeValue(a){return decodeURIComponent(a)}}const z8=/%(\d[a-f0-9])/gi,nue={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function qW(s){return encodeURIComponent(s).replace(z8,(a,u)=>{var f;return null!==(f=nue[u])&&void 0!==f?f:a})}function qN(s){return`${s}`}class J1{constructor(a={}){if(this.updates=null,this.cloneFrom=null,this.encoder=a.encoder||new ane,a.fromString){if(a.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function cne(s,a){const u=new Map;return s.length>0&&s.replace(/^\?/,"").split("&").forEach(A=>{const S=A.indexOf("="),[x,j]=-1==S?[a.decodeKey(A),""]:[a.decodeKey(A.slice(0,S)),a.decodeValue(A.slice(S+1))],q=u.get(x)||[];q.push(j),u.set(x,q)}),u}(a.fromString,this.encoder)}else a.fromObject?(this.map=new Map,Object.keys(a.fromObject).forEach(u=>{const f=a.fromObject[u];this.map.set(u,Array.isArray(f)?f:[f])})):this.map=null}has(a){return this.init(),this.map.has(a)}get(a){this.init();const u=this.map.get(a);return u?u[0]:null}getAll(a){return this.init(),this.map.get(a)||null}keys(){return this.init(),Array.from(this.map.keys())}append(a,u){return this.clone({param:a,value:u,op:"a"})}appendAll(a){const u=[];return Object.keys(a).forEach(f=>{const A=a[f];Array.isArray(A)?A.forEach(S=>{u.push({param:f,value:S,op:"a"})}):u.push({param:f,value:A,op:"a"})}),this.clone(u)}set(a,u){return this.clone({param:a,value:u,op:"s"})}delete(a,u){return this.clone({param:a,value:u,op:"d"})}toString(){return this.init(),this.keys().map(a=>{const u=this.encoder.encodeKey(a);return this.map.get(a).map(f=>u+"="+this.encoder.encodeValue(f)).join("&")}).filter(a=>""!==a).join("&")}clone(a){const u=new J1({encoder:this.encoder});return u.cloneFrom=this.cloneFrom||this,u.updates=(this.updates||[]).concat(a),u}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(a=>this.map.set(a,this.cloneFrom.map.get(a))),this.updates.forEach(a=>{switch(a.op){case"a":case"s":const u=("a"===a.op?this.map.get(a.param):void 0)||[];u.push(qN(a.value)),this.map.set(a.param,u);break;case"d":if(void 0===a.value){this.map.delete(a.param);break}{let f=this.map.get(a.param)||[];const A=f.indexOf(qN(a.value));-1!==A&&f.splice(A,1),f.length>0?this.map.set(a.param,f):this.map.delete(a.param)}}}),this.cloneFrom=this.updates=null)}}class rue{constructor(){this.map=new Map}set(a,u){return this.map.set(a,u),this}get(a){return this.map.has(a)||this.map.set(a,a.defaultValue()),this.map.get(a)}delete(a){return this.map.delete(a),this}has(a){return this.map.has(a)}keys(){return this.map.keys()}}function une(s){return"undefined"!=typeof ArrayBuffer&&s instanceof ArrayBuffer}function lne(s){return"undefined"!=typeof Blob&&s instanceof Blob}function WW(s){return"undefined"!=typeof FormData&&s instanceof FormData}class b2{constructor(a,u,f,A){let S;if(this.url=u,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=a.toUpperCase(),function GM(s){switch(s){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||A?(this.body=void 0!==f?f:null,S=A):S=f,S&&(this.reportProgress=!!S.reportProgress,this.withCredentials=!!S.withCredentials,S.responseType&&(this.responseType=S.responseType),S.headers&&(this.headers=S.headers),S.context&&(this.context=S.context),S.params&&(this.params=S.params)),this.headers||(this.headers=new zR),this.context||(this.context=new rue),this.params){const x=this.params.toString();if(0===x.length)this.urlWithParams=u;else{const j=u.indexOf("?");this.urlWithParams=u+(-1===j?"?":j<u.length-1?"&":"")+x}}else this.params=new J1,this.urlWithParams=u}serializeBody(){return null===this.body?null:une(this.body)||lne(this.body)||WW(this.body)||function iue(s){return"undefined"!=typeof URLSearchParams&&s instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof J1?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||WW(this.body)?null:lne(this.body)?this.body.type||null:une(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof J1?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(a={}){var u;const f=a.method||this.method,A=a.url||this.url,S=a.responseType||this.responseType,x=void 0!==a.body?a.body:this.body,j=void 0!==a.withCredentials?a.withCredentials:this.withCredentials,q=void 0!==a.reportProgress?a.reportProgress:this.reportProgress;let ce=a.headers||this.headers,Ye=a.params||this.params;const _r=null!==(u=a.context)&&void 0!==u?u:this.context;return void 0!==a.setHeaders&&(ce=Object.keys(a.setHeaders).reduce((ha,pa)=>ha.set(pa,a.setHeaders[pa]),ce)),a.setParams&&(Ye=Object.keys(a.setParams).reduce((ha,pa)=>ha.set(pa,a.setParams[pa]),Ye)),new b2(f,A,x,{params:Ye,headers:ce,context:_r,reportProgress:q,responseType:S,withCredentials:j})}}var Hy=(()=>((Hy=Hy||{})[Hy.Sent=0]="Sent",Hy[Hy.UploadProgress=1]="UploadProgress",Hy[Hy.ResponseHeader=2]="ResponseHeader",Hy[Hy.DownloadProgress=3]="DownloadProgress",Hy[Hy.Response=4]="Response",Hy[Hy.User=5]="User",Hy))();class Y_{constructor(a,u=200,f="OK"){this.headers=a.headers||new zR,this.status=void 0!==a.status?a.status:u,this.statusText=a.statusText||f,this.url=a.url||null,this.ok=this.status>=200&&this.status<300}}class r1 extends Y_{constructor(a={}){super(a),this.type=Hy.ResponseHeader}clone(a={}){return new r1({headers:a.headers||this.headers,status:void 0!==a.status?a.status:this.status,statusText:a.statusText||this.statusText,url:a.url||this.url||void 0})}}class X8 extends Y_{constructor(a={}){super(a),this.type=Hy.Response,this.body=void 0!==a.body?a.body:null}clone(a={}){return new X8({body:void 0!==a.body?a.body:this.body,headers:a.headers||this.headers,status:void 0!==a.status?a.status:this.status,statusText:a.statusText||this.statusText,url:a.url||this.url||void 0})}}class f0 extends Y_{constructor(a){super(a,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${a.url||"(unknown url)"}`:`Http failure response for ${a.url||"(unknown url)"}: ${a.status} ${a.statusText}`,this.error=a.error||null}}function HM(s,a){return{body:a,headers:s.headers,context:s.context,observe:s.observe,params:s.params,reportProgress:s.reportProgress,responseType:s.responseType,withCredentials:s.withCredentials}}let _t=(()=>{class s{constructor(u){this.handler=u}request(u,f,A={}){let S;if(u instanceof b2)S=u;else{let q,ce;q=A.headers instanceof zR?A.headers:new zR(A.headers),A.params&&(ce=A.params instanceof J1?A.params:new J1({fromObject:A.params})),S=new b2(u,f,void 0!==A.body?A.body:null,{headers:q,context:A.context,params:ce,reportProgress:A.reportProgress,responseType:A.responseType||"json",withCredentials:A.withCredentials})}const x=Np(S).pipe(Y1(q=>this.handler.handle(q)));if(u instanceof b2||"events"===A.observe)return x;const j=x.pipe(JR(q=>q instanceof X8));switch(A.observe||"body"){case"body":switch(S.responseType){case"arraybuffer":return j.pipe(v0(q=>{if(null!==q.body&&!(q.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return q.body}));case"blob":return j.pipe(v0(q=>{if(null!==q.body&&!(q.body instanceof Blob))throw new Error("Response is not a Blob.");return q.body}));case"text":return j.pipe(v0(q=>{if(null!==q.body&&"string"!=typeof q.body)throw new Error("Response is not a string.");return q.body}));default:return j.pipe(v0(q=>q.body))}case"response":return j;default:throw new Error(`Unreachable: unhandled observe type ${A.observe}}`)}}delete(u,f={}){return this.request("DELETE",u,f)}get(u,f={}){return this.request("GET",u,f)}head(u,f={}){return this.request("HEAD",u,f)}jsonp(u,f){return this.request("JSONP",u,{params:(new J1).append(f,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(u,f={}){return this.request("OPTIONS",u,f)}patch(u,f,A={}){return this.request("PATCH",u,HM(A,f))}post(u,f,A={}){return this.request("POST",u,HM(A,f))}put(u,f,A={}){return this.request("PUT",u,HM(A,f))}}return s.\u0275fac=function(u){return new(u||s)(Mh(GW))},s.\u0275prov=Hf({token:s,factory:s.\u0275fac}),s})();class ea{constructor(a,u){this.next=a,this.interceptor=u}handle(a){return this.interceptor.intercept(a,this.next)}}const W0=new Zp("HTTP_INTERCEPTORS");let KW=(()=>{class s{intercept(u,f){return f.handle(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Hf({token:s,factory:s.\u0275fac}),s})();const Z8=/^\)\]\}',?\n/;let M4=(()=>{class s{constructor(u){this.xhrFactory=u}handle(u){if("JSONP"===u.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Fd(f=>{const A=this.xhrFactory.build();if(A.open(u.method,u.urlWithParams),u.withCredentials&&(A.withCredentials=!0),u.headers.forEach((pa,cc)=>A.setRequestHeader(pa,cc.join(","))),u.headers.has("Accept")||A.setRequestHeader("Accept","application/json, text/plain, */*"),!u.headers.has("Content-Type")){const pa=u.detectContentTypeHeader();null!==pa&&A.setRequestHeader("Content-Type",pa)}if(u.responseType){const pa=u.responseType.toLowerCase();A.responseType="json"!==pa?pa:"text"}const S=u.serializeBody();let x=null;const j=()=>{if(null!==x)return x;const pa=A.statusText||"OK",cc=new zR(A.getAllResponseHeaders()),ol=function sue(s){return"responseURL"in s&&s.responseURL?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):null}(A)||u.url;return x=new r1({headers:cc,status:A.status,statusText:pa,url:ol}),x},q=()=>{let{headers:pa,status:cc,statusText:ol,url:wl}=j(),Il=null;204!==cc&&(Il=void 0===A.response?A.responseText:A.response),0===cc&&(cc=Il?200:0);let Xc=cc>=200&&cc<300;if("json"===u.responseType&&"string"==typeof Il){const Ed=Il;Il=Il.replace(Z8,"");try{Il=""!==Il?JSON.parse(Il):null}catch(Ip){Il=Ed,Xc&&(Xc=!1,Il={error:Ip,text:Il})}}Xc?(f.next(new X8({body:Il,headers:pa,status:cc,statusText:ol,url:wl||void 0})),f.complete()):f.error(new f0({error:Il,headers:pa,status:cc,statusText:ol,url:wl||void 0}))},ce=pa=>{const{url:cc}=j(),ol=new f0({error:pa,status:A.status||0,statusText:A.statusText||"Unknown Error",url:cc||void 0});f.error(ol)};let Ye=!1;const _r=pa=>{Ye||(f.next(j()),Ye=!0);let cc={type:Hy.DownloadProgress,loaded:pa.loaded};pa.lengthComputable&&(cc.total=pa.total),"text"===u.responseType&&!!A.responseText&&(cc.partialText=A.responseText),f.next(cc)},ha=pa=>{let cc={type:Hy.UploadProgress,loaded:pa.loaded};pa.lengthComputable&&(cc.total=pa.total),f.next(cc)};return A.addEventListener("load",q),A.addEventListener("error",ce),A.addEventListener("timeout",ce),A.addEventListener("abort",ce),u.reportProgress&&(A.addEventListener("progress",_r),null!==S&&A.upload&&A.upload.addEventListener("progress",ha)),A.send(S),f.next({type:Hy.Sent}),()=>{A.removeEventListener("error",ce),A.removeEventListener("abort",ce),A.removeEventListener("load",q),A.removeEventListener("timeout",ce),u.reportProgress&&(A.removeEventListener("progress",_r),null!==S&&A.upload&&A.upload.removeEventListener("progress",ha)),A.readyState!==A.DONE&&A.abort()}})}}return s.\u0275fac=function(u){return new(u||s)(Mh(Vte))},s.\u0275prov=Hf({token:s,factory:s.\u0275fac}),s})();const B4=new Zp("XSRF_COOKIE_NAME"),eQ=new Zp("XSRF_HEADER_NAME");class zW{}let hne=(()=>{class s{constructor(u,f,A){this.doc=u,this.platform=f,this.cookieName=A,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const u=this.doc.cookie||"";return u!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ote(u,this.cookieName),this.lastCookieString=u),this.lastToken}}return s.\u0275fac=function(u){return new(u||s)(Mh(t1),Mh(pq),Mh(B4))},s.\u0275prov=Hf({token:s,factory:s.\u0275fac}),s})(),qM=(()=>{class s{constructor(u,f){this.tokenService=u,this.headerName=f}intercept(u,f){const A=u.url.toLowerCase();if("GET"===u.method||"HEAD"===u.method||A.startsWith("http://")||A.startsWith("https://"))return f.handle(u);const S=this.tokenService.getToken();return null!==S&&!u.headers.has(this.headerName)&&(u=u.clone({headers:u.headers.set(this.headerName,S)})),f.handle(u)}}return s.\u0275fac=function(u){return new(u||s)(Mh(zW),Mh(eQ))},s.\u0275prov=Hf({token:s,factory:s.\u0275fac}),s})(),tQ=(()=>{class s{constructor(u,f){this.backend=u,this.injector=f,this.chain=null}handle(u){if(null===this.chain){const f=this.injector.get(W0,[]);this.chain=f.reduceRight((A,S)=>new ea(A,S),this.backend)}return this.chain.handle(u)}}return s.\u0275fac=function(u){return new(u||s)(Mh(HW),Mh(S1))},s.\u0275prov=Hf({token:s,factory:s.\u0275fac}),s})(),nQ=(()=>{class s{static disable(){return{ngModule:s,providers:[{provide:qM,useClass:KW}]}}static withOptions(u={}){return{ngModule:s,providers:[u.cookieName?{provide:B4,useValue:u.cookieName}:[],u.headerName?{provide:eQ,useValue:u.headerName}:[]]}}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275mod=E1({type:s}),s.\u0275inj=M1({providers:[qM,{provide:W0,useExisting:qM,multi:!0},{provide:zW,useClass:hne},{provide:B4,useValue:"XSRF-TOKEN"},{provide:eQ,useValue:"X-XSRF-TOKEN"}]}),s})(),XW=(()=>{class s{}return s.\u0275fac=function(u){return new(u||s)},s.\u0275mod=E1({type:s}),s.\u0275inj=M1({providers:[_t,{provide:GW,useClass:tQ},M4,{provide:HW,useExisting:M4}],imports:[[nQ.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),s})();class pl extends ba{constructor(a){super(),this._value=a}get value(){return this.getValue()}_subscribe(a){const u=super._subscribe(a);return!u.closed&&a.next(this._value),u}getValue(){const{hasError:a,thrownError:u,_value:f}=this;if(a)throw u;return this._throwIfClosed(),f}next(a){super.next(this._value=a)}}const{isArray:p0}=Array,{getPrototypeOf:z1,prototype:i1,keys:Gc}=Object;const{isArray:uy}=Array;function o1(...s){const a=hO(s),u=function v3(s){return l(FL(s))?s.pop():void 0}(s),{args:f,keys:A}=function WM(s){if(1===s.length){const a=s[0];if(p0(a))return{args:a,keys:null};if(function Jl(s){return s&&"object"==typeof s&&z1(s)===i1}(a)){const u=Gc(a);return{args:u.map(f=>a[f]),keys:u}}}return{args:s,keys:null}}(s);if(0===f.length)return Hd([],a);const S=new Fd(function ZW(s,a,u=tl){return f=>{s1(a,()=>{const{length:A}=s,S=new Array(A);let x=A,j=A;for(let q=0;q<A;q++)s1(a,()=>{const ce=Hd(s[q],a);let Ye=!1;ce.subscribe(u0(f,_r=>{S[q]=_r,Ye||(Ye=!0,j--),j||f.next(u(S.slice()))},()=>{--x||f.complete()}))},f)},f)}}(f,a,A?x=>function oQ(s,a){return s.reduce((u,f,A)=>(u[f]=a[A],u),{})}(A,x):tl));return u?S.pipe(function $W(s){return v0(a=>function iQ(s,a){return uy(a)?s(...a):s(a)}(s,a))}(u)):S}function s1(s,a,u){s?B0(u,s,a):a()}function sQ(s,a){const u=l(s)?s:()=>s,f=A=>A.error(u());return new Fd(a?A=>a.schedule(f,0,A):f)}const aQ=p(s=>function(){s(this),this.name="EmptyError",this.message="no elements in sequence"});function C2(...s){return function cue(){return dO(1)}()(Hd(s,hO(s)))}function cQ(s){return new Fd(a=>{nS(s()).subscribe(a)})}function U4(){return zy((s,a)=>{let u=null;s._refCount++;const f=u0(a,void 0,void 0,void 0,()=>{if(!s||s._refCount<=0||0<--s._refCount)return void(u=null);const A=s._connection,S=u;u=null,A&&(!S||A===S)&&A.unsubscribe(),a.unsubscribe()});s.subscribe(f),f.closed||(u=s.connect())})}class uue extends Fd{constructor(a,u){super(),this.source=a,this.subjectFactory=u,this._subject=null,this._refCount=0,this._connection=null,R0(a)&&(this.lift=a.lift)}_subscribe(a){return this.getSubject().subscribe(a)}getSubject(){const a=this._subject;return(!a||a.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:a}=this;this._subject=this._connection=null,null==a||a.unsubscribe()}connect(){let a=this._connection;if(!a){a=this._connection=new M;const u=this.getSubject();a.add(this.source.subscribe(u0(u,void 0,()=>{this._teardown(),u.complete()},f=>{this._teardown(),u.error(f)},()=>this._teardown()))),a.closed&&(this._connection=null,a=M.EMPTY)}return a}refCount(){return U4()(this)}}function zT(s,a){return zy((u,f)=>{let A=null,S=0,x=!1;const j=()=>x&&!A&&f.complete();u.subscribe(u0(f,q=>{null==A||A.unsubscribe();let ce=0;const Ye=S++;nS(s(q,Ye)).subscribe(A=u0(f,_r=>f.next(a?a(q,_r,Ye,ce++):_r),()=>{A=null,j()}))},()=>{x=!0,j()}))})}function Ag(s){return s<=0?()=>k1:zy((a,u)=>{let f=0;a.subscribe(u0(u,A=>{++f<=s&&(u.next(A),s<=f&&u.complete())}))})}function J_(s,a,u,f,A){return(S,x)=>{let j=u,q=a,ce=0;S.subscribe(u0(x,Ye=>{const _r=ce++;q=j?s(q,Ye,_r):(j=!0,Ye),f&&x.next(q)},A&&(()=>{j&&x.next(q),x.complete()})))}}function uQ(s,a){return zy(J_(s,a,arguments.length>=2,!0))}function X1(s){return zy((a,u)=>{let S,f=null,A=!1;f=a.subscribe(u0(u,void 0,void 0,x=>{S=nS(s(x,X1(s)(a))),f?(f.unsubscribe(),f=null,S.subscribe(u)):A=!0})),A&&(f.unsubscribe(),f=null,S.subscribe(u))})}function bf(s){return s<=0?()=>k1:zy((a,u)=>{let f=[];a.subscribe(u0(u,A=>{f.push(A),s<f.length&&f.shift()},()=>{for(const A of f)u.next(A);u.complete()},void 0,()=>{f=null}))})}function $1(s=_K){return zy((a,u)=>{let f=!1;a.subscribe(u0(u,A=>{f=!0,u.next(A)},()=>f?u.complete():u.error(s())))})}function _K(){return new aQ}function gne(s){return zy((a,u)=>{let f=!1;a.subscribe(u0(u,A=>{f=!0,u.next(A)},()=>{f||u.next(s),u.complete()}))})}function XT(s,a){const u=arguments.length>=2;return f=>f.pipe(s?JR((A,S)=>s(A,S,f)):tl,Ag(1),u?gne(a):$1(()=>new aQ))}function Z1(s,a,u){const f=l(s)||a||u?{next:s,error:a,complete:u}:s;return f?zy((A,S)=>{var x;null===(x=f.subscribe)||void 0===x||x.call(f);let j=!0;A.subscribe(u0(S,q=>{var ce;null===(ce=f.next)||void 0===ce||ce.call(f,q),S.next(q)},()=>{var q;j=!1,null===(q=f.complete)||void 0===q||q.call(f),S.complete()},q=>{var ce;j=!1,null===(ce=f.error)||void 0===ce||ce.call(f,q),S.error(q)},()=>{var q,ce;j&&(null===(q=f.unsubscribe)||void 0===q||q.call(f)),null===(ce=f.finalize)||void 0===ce||ce.call(f)}))}):tl}class XR{constructor(a,u){this.id=a,this.url=u}}class YM extends XR{constructor(a,u,f="imperative",A=null){super(a,u),this.navigationTrigger=f,this.restoredState=A}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class JM extends XR{constructor(a,u,f){super(a,u),this.urlAfterRedirects=f}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ane extends XR{constructor(a,u,f){super(a,u),this.reason=f}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class due extends XR{constructor(a,u,f){super(a,u),this.error=f}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class hue extends XR{constructor(a,u,f,A){super(a,u),this.urlAfterRedirects=f,this.state=A}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fue extends XR{constructor(a,u,f,A){super(a,u),this.urlAfterRedirects=f,this.state=A}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class eY extends XR{constructor(a,u,f,A,S){super(a,u),this.urlAfterRedirects=f,this.state=A,this.shouldActivate=S}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class mne extends XR{constructor(a,u,f,A){super(a,u),this.urlAfterRedirects=f,this.state=A}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pue extends XR{constructor(a,u,f,A){super(a,u),this.urlAfterRedirects=f,this.state=A}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lQ{constructor(a){this.route=a}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ene{constructor(a){this.route=a}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class gue{constructor(a){this.snapshot=a}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vne{constructor(a){this.snapshot=a}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yne{constructor(a){this.snapshot=a}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Aue{constructor(a){this.snapshot=a}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _ne{constructor(a,u,f){this.routerEvent=a,this.position=u,this.anchor=f}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const zp="primary";class mue{constructor(a){this.params=a||{}}has(a){return Object.prototype.hasOwnProperty.call(this.params,a)}get(a){if(this.has(a)){const u=this.params[a];return Array.isArray(u)?u[0]:u}return null}getAll(a){if(this.has(a)){const u=this.params[a];return Array.isArray(u)?u:[u]}return[]}get keys(){return Object.keys(this.params)}}function zM(s){return new mue(s)}const tY="ngNavigationCancelingError";function nY(s){const a=Error("NavigationCancelingError: "+s);return a[tY]=!0,a}function vue(s,a,u){const f=u.path.split("/");if(f.length>s.length||"full"===u.pathMatch&&(a.hasChildren()||f.length<s.length))return null;const A={};for(let S=0;S<f.length;S++){const x=f[S],j=s[S];if(x.startsWith(":"))A[x.substring(1)]=j;else if(x!==j.path)return null}return{consumed:s.slice(0,f.length),posParams:A}}function _S(s,a){const u=s?Object.keys(s):void 0,f=a?Object.keys(a):void 0;if(!u||!f||u.length!=f.length)return!1;let A;for(let S=0;S<u.length;S++)if(A=u[S],!bne(s[A],a[A]))return!1;return!0}function bne(s,a){if(Array.isArray(s)&&Array.isArray(a)){if(s.length!==a.length)return!1;const u=[...s].sort(),f=[...a].sort();return u.every((A,S)=>f[S]===A)}return s===a}function Cne(s){return Array.prototype.concat.apply([],s)}function rY(s){return s.length>0?s[s.length-1]:null}function h_(s,a){for(const u in s)s.hasOwnProperty(u)&&a(s[u],u)}function eT(s){return O5(s)?s:R5(s)?Hd(Promise.resolve(s)):Np(s)}const Sne={exact:function Rne(s,a,u){if(!yp(s.segments,a.segments)||!dQ(s.segments,a.segments,u)||s.numberOfChildren!==a.numberOfChildren)return!1;for(const f in a.children)if(!s.children[f]||!Rne(s.children[f],a.children[f],u))return!1;return!0},subset:Dne},Tne={exact:function yue(s,a){return _S(s,a)},subset:function One(s,a){return Object.keys(a).length<=Object.keys(s).length&&Object.keys(a).every(u=>bne(s[u],a[u]))},ignored:()=>!0};function wne(s,a,u){return Sne[u.paths](s.root,a.root,u.matrixParams)&&Tne[u.queryParams](s.queryParams,a.queryParams)&&!("exact"===u.fragment&&s.fragment!==a.fragment)}function Dne(s,a,u){return Nne(s,a,a.segments,u)}function Nne(s,a,u,f){if(s.segments.length>u.length){const A=s.segments.slice(0,u.length);return!(!yp(A,u)||a.hasChildren()||!dQ(A,u,f))}if(s.segments.length===u.length){if(!yp(s.segments,u)||!dQ(s.segments,u,f))return!1;for(const A in a.children)if(!s.children[A]||!Dne(s.children[A],a.children[A],f))return!1;return!0}{const A=u.slice(0,s.segments.length),S=u.slice(s.segments.length);return!!(yp(s.segments,A)&&dQ(s.segments,A,f)&&s.children[zp])&&Nne(s.children[zp],a,S,f)}}function dQ(s,a,u){return a.every((f,A)=>Tne[u](s[A].parameters,f.parameters))}class $R{constructor(a,u,f){this.root=a,this.queryParams=u,this.fragment=f}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zM(this.queryParams)),this._queryParamMap}toString(){return oY.serialize(this)}}class Eg{constructor(a,u){this.segments=a,this.children=u,this.parent=null,h_(u,(f,A)=>f.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return XM(this)}}class ZR{constructor(a,u){this.path=a,this.parameters=u}get parameterMap(){return this._parameterMap||(this._parameterMap=zM(this.parameters)),this._parameterMap}toString(){return pQ(this)}}function yp(s,a){return s.length===a.length&&s.every((u,f)=>u.path===a[f].path)}class By{}class $T{parse(a){const u=new WN(a);return new $R(u.parseRootSegment(),u.parseQueryParams(),u.parseFragment())}serialize(a){const u=`/${Fg(a.root,!0)}`,f=function bue(s){const a=Object.keys(s).map(u=>{const f=s[u];return Array.isArray(f)?f.map(A=>`${hQ(u)}=${hQ(A)}`).join("&"):`${hQ(u)}=${hQ(f)}`}).filter(u=>!!u);return a.length?`?${a.join("&")}`:""}(a.queryParams);return`${u}${f}${"string"==typeof a.fragment?`#${function _ue(s){return encodeURI(s)}(a.fragment)}`:""}`}}const oY=new $T;function XM(s){return s.segments.map(a=>pQ(a)).join("/")}function Fg(s,a){if(!s.hasChildren())return XM(s);if(a){const u=s.children[zp]?Fg(s.children[zp],!1):"",f=[];return h_(s.children,(A,S)=>{S!==zp&&f.push(`${S}:${Fg(A,!1)}`)}),f.length>0?`${u}(${f.join("//")})`:u}{const u=function iY(s,a){let u=[];return h_(s.children,(f,A)=>{A===zp&&(u=u.concat(a(f,A)))}),h_(s.children,(f,A)=>{A!==zp&&(u=u.concat(a(f,A)))}),u}(s,(f,A)=>A===zp?[Fg(s.children[zp],!1)]:[`${A}:${Fg(f,!1)}`]);return 1===Object.keys(s.children).length&&null!=s.children[zp]?`${XM(s)}/${u[0]}`:`${XM(s)}/(${u.join("//")})`}}function sY(s){return encodeURIComponent(s).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function hQ(s){return sY(s).replace(/%3B/gi,";")}function fQ(s){return sY(s).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xp(s){return decodeURIComponent(s)}function Wy(s){return Xp(s.replace(/\+/g,"%20"))}function pQ(s){return`${fQ(s.path)}${function Iue(s){return Object.keys(s).map(a=>`;${fQ(a)}=${fQ(s[a])}`).join("")}(s.parameters)}`}const Ky=/^[^\/()?;=#]+/;function s0(s){const a=s.match(Ky);return a?a[0]:""}const kne=/^[^=?&#]+/,zl=/^[^&#]+/;class WN{constructor(a){this.url=a,this.remaining=a}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Eg([],{}):new Eg([],this.parseChildren())}parseQueryParams(){const a={};if(this.consumeOptional("?"))do{this.parseQueryParam(a)}while(this.consumeOptional("&"));return a}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const a=[];for(this.peekStartsWith("(")||a.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),a.push(this.parseSegment());let u={};this.peekStartsWith("/(")&&(this.capture("/"),u=this.parseParens(!0));let f={};return this.peekStartsWith("(")&&(f=this.parseParens(!1)),(a.length>0||Object.keys(u).length>0)&&(f[zp]=new Eg(a,u)),f}parseSegment(){const a=s0(this.remaining);if(""===a&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(a),new ZR(Xp(a),this.parseMatrixParams())}parseMatrixParams(){const a={};for(;this.consumeOptional(";");)this.parseParam(a);return a}parseParam(a){const u=s0(this.remaining);if(!u)return;this.capture(u);let f="";if(this.consumeOptional("=")){const A=s0(this.remaining);A&&(f=A,this.capture(f))}a[Xp(u)]=Xp(f)}parseQueryParam(a){const u=function aY(s){const a=s.match(kne);return a?a[0]:""}(this.remaining);if(!u)return;this.capture(u);let f="";if(this.consumeOptional("=")){const x=function Gl(s){const a=s.match(zl);return a?a[0]:""}(this.remaining);x&&(f=x,this.capture(f))}const A=Wy(u),S=Wy(f);if(a.hasOwnProperty(A)){let x=a[A];Array.isArray(x)||(x=[x],a[A]=x),x.push(S)}else a[A]=S}parseParens(a){const u={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const f=s0(this.remaining),A=this.remaining[f.length];if("/"!==A&&")"!==A&&";"!==A)throw new Error(`Cannot parse url '${this.url}'`);let S;f.indexOf(":")>-1?(S=f.substr(0,f.indexOf(":")),this.capture(S),this.capture(":")):a&&(S=zp);const x=this.parseChildren();u[S]=1===Object.keys(x).length?x[zp]:new Eg([],x),this.consumeOptional("//")}return u}peekStartsWith(a){return this.remaining.startsWith(a)}consumeOptional(a){return!!this.peekStartsWith(a)&&(this.remaining=this.remaining.substring(a.length),!0)}capture(a){if(!this.consumeOptional(a))throw new Error(`Expected "${a}".`)}}class ZT{constructor(a){this._root=a}get root(){return this._root.value}parent(a){const u=this.pathFromRoot(a);return u.length>1?u[u.length-2]:null}children(a){const u=T2(a,this._root);return u?u.children.map(f=>f.value):[]}firstChild(a){const u=T2(a,this._root);return u&&u.children.length>0?u.children[0].value:null}siblings(a){const u=KN(a,this._root);return u.length<2?[]:u[u.length-2].children.map(A=>A.value).filter(A=>A!==a)}pathFromRoot(a){return KN(a,this._root).map(u=>u.value)}}function T2(s,a){if(s===a.value)return a;for(const u of a.children){const f=T2(s,u);if(f)return f}return null}function KN(s,a){if(s===a.value)return[a];for(const u of a.children){const f=KN(s,u);if(f.length)return f.unshift(a),f}return[]}class Ey{constructor(a,u){this.value=a,this.children=u}toString(){return`TreeNode(${this.value})`}}function Z0(s){const a={};return s&&s.children.forEach(u=>a[u.value.outlet]=u),a}class Ql extends ZT{constructor(a,u){super(a),this.snapshot=u,p_(this,a)}toString(){return this.snapshot.toString()}}function gQ(s,a){const u=function Rp(s,a){const x=new Ll([],{},{},"",{},zp,a,null,s.root,-1,{});return new ql("",new Ey(x,[]))}(s,a),f=new pl([new ZR("",{})]),A=new pl({}),S=new pl({}),x=new pl({}),j=new pl(""),q=new Vh(f,A,x,j,S,zp,a,u.root);return q.snapshot=u.root,new Ql(new Ey(q,[]),u)}class Vh{constructor(a,u,f,A,S,x,j,q){this.url=a,this.params=u,this.queryParams=f,this.fragment=A,this.data=S,this.outlet=x,this.component=j,this._futureSnapshot=q}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(v0(a=>zM(a)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(v0(a=>zM(a)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function f_(s,a="emptyOnly"){const u=s.pathFromRoot;let f=0;if("always"!==a)for(f=u.length-1;f>=1;){const A=u[f],S=u[f-1];if(A.routeConfig&&""===A.routeConfig.path)f--;else{if(S.component)break;f--}}return function Up(s){return s.reduce((a,u)=>({params:Object.assign(Object.assign({},a.params),u.params),data:Object.assign(Object.assign({},a.data),u.data),resolve:Object.assign(Object.assign({},a.resolve),u._resolvedData)}),{params:{},data:{},resolve:{}})}(u.slice(f))}class Ll{constructor(a,u,f,A,S,x,j,q,ce,Ye,_r){this.url=a,this.params=u,this.queryParams=f,this.fragment=A,this.data=S,this.outlet=x,this.component=j,this.routeConfig=q,this._urlSegment=ce,this._lastPathIndex=Ye,this._resolve=_r}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=zM(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zM(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(f=>f.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ql extends ZT{constructor(a,u){super(u),this.url=a,p_(this,u)}toString(){return Kh(this._root)}}function p_(s,a){a.value._routerState=s,a.children.forEach(u=>p_(s,u))}function Kh(s){const a=s.children.length>0?` { ${s.children.map(Kh).join(", ")} } `:"";return`${s.value}${a}`}function AQ(s){if(s.snapshot){const a=s.snapshot,u=s._futureSnapshot;s.snapshot=u,_S(a.queryParams,u.queryParams)||s.queryParams.next(u.queryParams),a.fragment!==u.fragment&&s.fragment.next(u.fragment),_S(a.params,u.params)||s.params.next(u.params),function Ine(s,a){if(s.length!==a.length)return!1;for(let u=0;u<s.length;++u)if(!_S(s[u],a[u]))return!1;return!0}(a.url,u.url)||s.url.next(u.url),_S(a.data,u.data)||s.data.next(u.data)}else s.snapshot=s._futureSnapshot,s.data.next(s._futureSnapshot.data)}function g_(s,a){const u=_S(s.params,a.params)&&function qy(s,a){return yp(s,a)&&s.every((u,f)=>_S(u.parameters,a[f].parameters))}(s.url,a.url);return u&&!(!s.parent!=!a.parent)&&(!s.parent||g_(s.parent,a.parent))}function F4(s,a,u){if(u&&s.shouldReuseRoute(a.value,u.value.snapshot)){const f=u.value;f._futureSnapshot=a.value;const A=function j4(s,a,u){return a.children.map(f=>{for(const A of u.children)if(s.shouldReuseRoute(f.value,A.value.snapshot))return F4(s,f,A);return F4(s,f)})}(s,a,u);return new Ey(f,A)}{if(s.shouldAttach(a.value)){const S=s.retrieve(a.value);if(null!==S){const x=S.route;return x.value._futureSnapshot=a.value,x.children=a.children.map(j=>F4(s,j)),x}}const f=function Pne(s){return new Vh(new pl(s.url),new pl(s.params),new pl(s.queryParams),new pl(s.fragment),new pl(s.data),s.outlet,s.component,s)}(a.value),A=a.children.map(S=>F4(s,S));return new Ey(f,A)}}function $M(s){return"object"==typeof s&&null!=s&&!s.outlets&&!s.segmentPath}function YN(s){return"object"==typeof s&&null!=s&&s.outlets}function mQ(s,a,u,f,A){let S={};if(f&&h_(f,(j,q)=>{S[q]=Array.isArray(j)?j.map(ce=>`${ce}`):`${j}`}),s===a)return new $R(u,S,A);const x=Mne(s,a,u);return new $R(x,S,A)}function Mne(s,a,u){const f={};return h_(s.children,(A,S)=>{f[S]=A===a?u:Mne(A,a,u)}),new Eg(s.segments,f)}class cY{constructor(a,u,f){if(this.isAbsolute=a,this.numberOfDoubleDots=u,this.commands=f,a&&f.length>0&&$M(f[0]))throw new Error("Root segment cannot have matrix parameters");const A=f.find(YN);if(A&&A!==rY(f))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class P0{constructor(a,u,f){this.segmentGroup=a,this.processChildren=u,this.index=f}}function EQ(s,a,u){if(s||(s=new Eg([],{})),0===s.segments.length&&s.hasChildren())return vQ(s,a,u);const f=function Sue(s,a,u){let f=0,A=a;const S={match:!1,pathIndex:0,commandIndex:0};for(;A<s.segments.length;){if(f>=u.length)return S;const x=s.segments[A],j=u[f];if(YN(j))break;const q=`${j}`,ce=f<u.length-1?u[f+1]:null;if(A>0&&void 0===q)break;if(q&&ce&&"object"==typeof ce&&void 0===ce.outlets){if(!lY(q,ce,x))return S;f+=2}else{if(!lY(q,{},x))return S;f++}A++}return{match:!0,pathIndex:A,commandIndex:f}}(s,a,u),A=u.slice(f.commandIndex);if(f.match&&f.pathIndex<s.segments.length){const S=new Eg(s.segments.slice(0,f.pathIndex),{});return S.children[zp]=new Eg(s.segments.slice(f.pathIndex),s.children),vQ(S,0,A)}return f.match&&0===A.length?new Eg(s.segments,{}):f.match&&!s.hasChildren()?R1(s,a,u):f.match?vQ(s,0,A):R1(s,a,u)}function vQ(s,a,u){if(0===u.length)return new Eg(s.segments,{});{const f=function uY(s){return YN(s[0])?s[0].outlets:{[zp]:s}}(u),A={};return h_(f,(S,x)=>{"string"==typeof S&&(S=[S]),null!==S&&(A[x]=EQ(s.children[x],a,S))}),h_(s.children,(S,x)=>{void 0===f[x]&&(A[x]=S)}),new Eg(s.segments,A)}}function R1(s,a,u){const f=s.segments.slice(0,a);let A=0;for(;A<u.length;){const S=u[A];if(YN(S)){const q=ZM(S.outlets);return new Eg(f,q)}if(0===A&&$M(u[0])){f.push(new ZR(s.segments[a].path,T0(u[0]))),A++;continue}const x=YN(S)?S.outlets[zp]:`${S}`,j=A<u.length-1?u[A+1]:null;x&&j&&$M(j)?(f.push(new ZR(x,T0(j))),A+=2):(f.push(new ZR(x,{})),A++)}return new Eg(f,{})}function ZM(s){const a={};return h_(s,(u,f)=>{"string"==typeof u&&(u=[u]),null!==u&&(a[f]=R1(new Eg([],{}),0,u))}),a}function T0(s){const a={};return h_(s,(u,f)=>a[f]=`${u}`),a}function lY(s,a,u){return s==u.path&&_S(a,u.parameters)}class tT{constructor(a,u,f,A){this.routeReuseStrategy=a,this.futureState=u,this.currState=f,this.forwardEvent=A}activate(a){const u=this.futureState._root,f=this.currState?this.currState._root:null;this.deactivateChildRoutes(u,f,a),AQ(this.futureState.root),this.activateChildRoutes(u,f,a)}deactivateChildRoutes(a,u,f){const A=Z0(u);a.children.forEach(S=>{const x=S.value.outlet;this.deactivateRoutes(S,A[x],f),delete A[x]}),h_(A,(S,x)=>{this.deactivateRouteAndItsChildren(S,f)})}deactivateRoutes(a,u,f){const A=a.value,S=u?u.value:null;if(A===S)if(A.component){const x=f.getContext(A.outlet);x&&this.deactivateChildRoutes(a,u,x.children)}else this.deactivateChildRoutes(a,u,f);else S&&this.deactivateRouteAndItsChildren(u,f)}deactivateRouteAndItsChildren(a,u){a.value.component&&this.routeReuseStrategy.shouldDetach(a.value.snapshot)?this.detachAndStoreRouteSubtree(a,u):this.deactivateRouteAndOutlet(a,u)}detachAndStoreRouteSubtree(a,u){const f=u.getContext(a.value.outlet),A=f&&a.value.component?f.children:u,S=Z0(a);for(const x of Object.keys(S))this.deactivateRouteAndItsChildren(S[x],A);if(f&&f.outlet){const x=f.outlet.detach(),j=f.children.onOutletDeactivated();this.routeReuseStrategy.store(a.value.snapshot,{componentRef:x,route:a,contexts:j})}}deactivateRouteAndOutlet(a,u){const f=u.getContext(a.value.outlet),A=f&&a.value.component?f.children:u,S=Z0(a);for(const x of Object.keys(S))this.deactivateRouteAndItsChildren(S[x],A);f&&f.outlet&&(f.outlet.deactivate(),f.children.onOutletDeactivated(),f.attachRef=null,f.resolver=null,f.route=null)}activateChildRoutes(a,u,f){const A=Z0(u);a.children.forEach(S=>{this.activateRoutes(S,A[S.value.outlet],f),this.forwardEvent(new Aue(S.value.snapshot))}),a.children.length&&this.forwardEvent(new vne(a.value.snapshot))}activateRoutes(a,u,f){const A=a.value,S=u?u.value:null;if(AQ(A),A===S)if(A.component){const x=f.getOrCreateContext(A.outlet);this.activateChildRoutes(a,u,x.children)}else this.activateChildRoutes(a,u,f);else if(A.component){const x=f.getOrCreateContext(A.outlet);if(this.routeReuseStrategy.shouldAttach(A.snapshot)){const j=this.routeReuseStrategy.retrieve(A.snapshot);this.routeReuseStrategy.store(A.snapshot,null),x.children.onOutletReAttached(j.contexts),x.attachRef=j.componentRef,x.route=j.route.value,x.outlet&&x.outlet.attach(j.componentRef,j.route.value),AQ(j.route.value),this.activateChildRoutes(a,null,x.children)}else{const j=function M_(s){for(let a=s.parent;a;a=a.parent){const u=a.routeConfig;if(u&&u._loadedConfig)return u._loadedConfig;if(u&&u.component)return null}return null}(A.snapshot),q=j?j.module.componentFactoryResolver:null;x.attachRef=null,x.route=A,x.resolver=q,x.outlet&&x.outlet.activateWith(A,q),this.activateChildRoutes(a,null,x.children)}}else this.activateChildRoutes(a,null,f)}}class _w{constructor(a,u){this.routes=a,this.module=u}}function a0(s){return"function"==typeof s}function c0(s){return s instanceof $R}const IS=Symbol("INITIAL_VALUE");function eR(){return zT(s=>o1(s.map(a=>a.pipe(Ag(1),function ya(...s){const a=hO(s);return zy((u,f)=>{(a?C2(s,u,a):C2(s,u)).subscribe(f)})}(IS)))).pipe(uQ((a,u)=>{let f=!1;return u.reduce((A,S,x)=>A!==IS?A:(S===IS&&(f=!0),f||!1!==S&&x!==u.length-1&&!c0(S)?A:S),a)},IS),JR(a=>a!==IS),v0(a=>c0(a)?a:!0===a),Ag(1)))}class _p{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new e3,this.attachRef=null}}class e3{constructor(){this.contexts=new Map}onChildOutletCreated(a,u){const f=this.getOrCreateContext(a);f.outlet=u,this.contexts.set(a,f)}onChildOutletDestroyed(a){const u=this.getContext(a);u&&(u.outlet=null,u.attachRef=null)}onOutletDeactivated(){const a=this.contexts;return this.contexts=new Map,a}onOutletReAttached(a){this.contexts=a}getOrCreateContext(a){let u=this.getContext(a);return u||(u=new _p,this.contexts.set(a,u)),u}getContext(a){return this.contexts.get(a)||null}}let fY=(()=>{class s{constructor(u,f,A,S,x){this.parentContexts=u,this.location=f,this.resolver=A,this.changeDetector=x,this.activated=null,this._activatedRoute=null,this.activateEvents=new Kb,this.deactivateEvents=new Kb,this.attachEvents=new Kb,this.detachEvents=new Kb,this.name=S||zp,u.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const u=this.parentContexts.getContext(this.name);u&&u.route&&(u.attachRef?this.attach(u.attachRef,u.route):this.activateWith(u.route,u.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const u=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(u.instance),u}attach(u,f){this.activated=u,this._activatedRoute=f,this.location.insert(u.hostView),this.attachEvents.emit(u.instance)}deactivate(){if(this.activated){const u=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(u)}}activateWith(u,f){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=u;const x=(f=f||this.resolver).resolveComponentFactory(u._futureSnapshot.routeConfig.component),j=this.parentContexts.getOrCreateContext(this.name).children,q=new Tue(u,j,this.location.injector);this.activated=this.location.createComponent(x,this.location.length,q),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return s.\u0275fac=function(u){return new(u||s)(af(e3),af(JS),af(n4),function NR(s){return function S6(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const u=s.attrs;if(u){const f=u.length;let A=0;for(;A<f;){const S=u[A];if(uN(S))break;if(0===S)A+=2;else if("number"==typeof S)for(A++;A<f&&"string"==typeof u[A];)A++;else{if(S===a)return u[A+1];A+=2}}}return null}(n0(),s)}("name"),af(nW))},s.\u0275dir=py({type:s,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),s})();class Tue{constructor(a,u,f){this.route=a,this.childContexts=u,this.parent=f}get(a,u){return a===Vh?this.route:a===e3?this.childContexts:this.parent.get(a,u)}}let ly=(()=>{class s{}return s.\u0275fac=function(u){return new(u||s)},s.\u0275cmp=u_({type:s,selectors:[["ng-component"]],decls:1,vars:0,template:function(u,f){1&u&&QT(0,"router-outlet")},directives:[fY],encapsulation:2}),s})();function yQ(s,a=""){for(let u=0;u<s.length;u++){const f=s[u];Q4(f,Bne(a,f))}}function Q4(s,a){s.children&&yQ(s.children,a)}function Bne(s,a){return a?s||a.path?s&&!a.path?`${s}/`:!s&&a.path?a.path:`${s}/${a.path}`:"":s}function Sh(s){const a=s.children&&s.children.map(Sh),u=a?Object.assign(Object.assign({},s),{children:a}):Object.assign({},s);return!u.component&&(a||u.loadChildren)&&u.outlet&&u.outlet!==zp&&(u.component=ly),u}function yl(s){return s.outlet||zp}function z_(s,a){const u=s.filter(f=>yl(f)===a);return u.push(...s.filter(f=>yl(f)!==a)),u}const Pf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function yy(s,a,u){var f;if(""===a.path)return"full"===a.pathMatch&&(s.hasChildren()||u.length>0)?Object.assign({},Pf):{matched:!0,consumedSegments:[],remainingSegments:u,parameters:{},positionalParamSegments:{}};const S=(a.matcher||vue)(u,s,a);if(!S)return Object.assign({},Pf);const x={};h_(S.posParams,(q,ce)=>{x[ce]=q.path});const j=S.consumed.length>0?Object.assign(Object.assign({},x),S.consumed[S.consumed.length-1].parameters):x;return{matched:!0,consumedSegments:S.consumed,remainingSegments:u.slice(S.consumed.length),parameters:j,positionalParamSegments:null!==(f=S.posParams)&&void 0!==f?f:{}}}function nT(s,a,u,f,A="corrected"){if(u.length>0&&function O1(s,a,u){return u.some(f=>w0(s,a,f)&&yl(f)!==zp)}(s,u,f)){const x=new Eg(a,function X_(s,a,u,f){const A={};A[zp]=f,f._sourceSegment=s,f._segmentIndexShift=a.length;for(const S of u)if(""===S.path&&yl(S)!==zp){const x=new Eg([],{});x._sourceSegment=s,x._segmentIndexShift=a.length,A[yl(S)]=x}return A}(s,a,f,new Eg(u,s.children)));return x._sourceSegment=s,x._segmentIndexShift=a.length,{segmentGroup:x,slicedSegments:[]}}if(0===u.length&&function a1(s,a,u){return u.some(f=>w0(s,a,f))}(s,u,f)){const x=new Eg(s.segments,function Yy(s,a,u,f,A,S){const x={};for(const j of f)if(w0(s,u,j)&&!A[yl(j)]){const q=new Eg([],{});q._sourceSegment=s,q._segmentIndexShift="legacy"===S?s.segments.length:a.length,x[yl(j)]=q}return Object.assign(Object.assign({},A),x)}(s,a,u,f,s.children,A));return x._sourceSegment=s,x._segmentIndexShift=a.length,{segmentGroup:x,slicedSegments:u}}const S=new Eg(s.segments,s.children);return S._sourceSegment=s,S._segmentIndexShift=a.length,{segmentGroup:S,slicedSegments:u}}function w0(s,a,u){return(!(s.hasChildren()||a.length>0)||"full"!==u.pathMatch)&&""===u.path}function rT(s,a,u,f){return!!(yl(s)===f||f!==zp&&w0(a,u,s))&&("**"===s.path||yy(a,s,u).matched)}function b0(s,a,u){return 0===a.length&&!s.children[u]}class JN{constructor(a){this.segmentGroup=a||null}}class o_{constructor(a){this.urlTree=a}}function dy(s){return sQ(new JN(s))}function pY(s){return sQ(new o_(s))}class Une{constructor(a,u,f,A,S){this.configLoader=u,this.urlSerializer=f,this.urlTree=A,this.config=S,this.allowRedirects=!0,this.ngModule=a.get(FR)}apply(){const a=nT(this.urlTree.root,[],[],this.config).segmentGroup,u=new Eg(a.segments,a.children);return this.expandSegmentGroup(this.ngModule,this.config,u,zp).pipe(v0(S=>this.createUrlTree(gY(S),this.urlTree.queryParams,this.urlTree.fragment))).pipe(X1(S=>{if(S instanceof o_)return this.allowRedirects=!1,this.match(S.urlTree);throw S instanceof JN?this.noMatchError(S):S}))}match(a){return this.expandSegmentGroup(this.ngModule,this.config,a.root,zp).pipe(v0(A=>this.createUrlTree(gY(A),a.queryParams,a.fragment))).pipe(X1(A=>{throw A instanceof JN?this.noMatchError(A):A}))}noMatchError(a){return new Error(`Cannot match any routes. URL Segment: '${a.segmentGroup}'`)}createUrlTree(a,u,f){const A=a.segments.length>0?new Eg([],{[zp]:a}):a;return new $R(A,u,f)}expandSegmentGroup(a,u,f,A){return 0===f.segments.length&&f.hasChildren()?this.expandChildren(a,u,f).pipe(v0(S=>new Eg([],S))):this.expandSegment(a,f,u,f.segments,A,!0)}expandChildren(a,u,f){const A=[];for(const S of Object.keys(f.children))"primary"===S?A.unshift(S):A.push(S);return Hd(A).pipe(Y1(S=>{const x=f.children[S],j=z_(u,S);return this.expandSegmentGroup(a,j,x,S).pipe(v0(q=>({segment:q,outlet:S})))}),uQ((S,x)=>(S[x.outlet]=x.segment,S),{}),function KM(s,a){const u=arguments.length>=2;return f=>f.pipe(s?JR((A,S)=>s(A,S,f)):tl,bf(1),u?gne(a):$1(()=>new aQ))}())}expandSegment(a,u,f,A,S,x){return Hd(f).pipe(Y1(j=>this.expandSegmentAgainstRoute(a,u,f,j,A,S,x).pipe(X1(ce=>{if(ce instanceof JN)return Np(null);throw ce}))),XT(j=>!!j),X1((j,q)=>{if(j instanceof aQ||"EmptyError"===j.name)return b0(u,A,S)?Np(new Eg([],{})):dy(u);throw j}))}expandSegmentAgainstRoute(a,u,f,A,S,x,j){return rT(A,u,S,x)?void 0===A.redirectTo?this.matchSegmentAgainstRoute(a,u,A,S,x):j&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(a,u,f,A,S,x):dy(u):dy(u)}expandSegmentAgainstRouteUsingRedirect(a,u,f,A,S,x){return"**"===A.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(a,f,A,x):this.expandRegularSegmentAgainstRouteUsingRedirect(a,u,f,A,S,x)}expandWildCardWithParamsAgainstRouteUsingRedirect(a,u,f,A){const S=this.applyRedirectCommands([],f.redirectTo,{});return f.redirectTo.startsWith("/")?pY(S):this.lineralizeSegments(f,S).pipe(q0(x=>{const j=new Eg(x,{});return this.expandSegment(a,j,u,x,A,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(a,u,f,A,S,x){const{matched:j,consumedSegments:q,remainingSegments:ce,positionalParamSegments:Ye}=yy(u,A,S);if(!j)return dy(u);const _r=this.applyRedirectCommands(q,A.redirectTo,Ye);return A.redirectTo.startsWith("/")?pY(_r):this.lineralizeSegments(A,_r).pipe(q0(ha=>this.expandSegment(a,u,f,ha.concat(ce),x,!1)))}matchSegmentAgainstRoute(a,u,f,A,S){if("**"===f.path)return f.loadChildren?(f._loadedConfig?Np(f._loadedConfig):this.configLoader.load(a.injector,f)).pipe(v0(_r=>(f._loadedConfig=_r,new Eg(A,{})))):Np(new Eg(A,{}));const{matched:x,consumedSegments:j,remainingSegments:q}=yy(u,f,A);return x?this.getChildConfig(a,f,A).pipe(q0(Ye=>{const _r=Ye.module,ha=Ye.routes,{segmentGroup:pa,slicedSegments:cc}=nT(u,j,q,ha),ol=new Eg(pa.segments,pa.children);if(0===cc.length&&ol.hasChildren())return this.expandChildren(_r,ha,ol).pipe(v0(Ed=>new Eg(j,Ed)));if(0===ha.length&&0===cc.length)return Np(new Eg(j,{}));const wl=yl(f)===S;return this.expandSegment(_r,ol,ha,cc,wl?zp:S,!0).pipe(v0(Xc=>new Eg(j.concat(Xc.segments),Xc.children)))})):dy(u)}getChildConfig(a,u,f){return u.children?Np(new _w(u.children,a)):u.loadChildren?void 0!==u._loadedConfig?Np(u._loadedConfig):this.runCanLoadGuards(a.injector,u,f).pipe(q0(A=>A?this.configLoader.load(a.injector,u).pipe(v0(S=>(u._loadedConfig=S,S))):function Rue(s){return sQ(nY(`Cannot load children because the guard of the route "path: '${s.path}'" returned false`))}(u))):Np(new _w([],a))}runCanLoadGuards(a,u,f){const A=u.canLoad;return A&&0!==A.length?Np(A.map(x=>{const j=a.get(x);let q;if(function md(s){return s&&a0(s.canLoad)}(j))q=j.canLoad(u,f);else{if(!a0(j))throw new Error("Invalid CanLoad guard");q=j(u,f)}return eT(q)})).pipe(eR(),Z1(x=>{if(!c0(x))return;const j=nY(`Redirecting to "${this.urlSerializer.serialize(x)}"`);throw j.url=x,j}),v0(x=>!0===x)):Np(!0)}lineralizeSegments(a,u){let f=[],A=u.root;for(;;){if(f=f.concat(A.segments),0===A.numberOfChildren)return Np(f);if(A.numberOfChildren>1||!A.children[zp])return sQ(new Error(`Only absolute redirects can have named outlets. redirectTo: '${a.redirectTo}'`));A=A.children[zp]}}applyRedirectCommands(a,u,f){return this.applyRedirectCreatreUrlTree(u,this.urlSerializer.parse(u),a,f)}applyRedirectCreatreUrlTree(a,u,f,A){const S=this.createSegmentGroup(a,u.root,f,A);return new $R(S,this.createQueryParams(u.queryParams,this.urlTree.queryParams),u.fragment)}createQueryParams(a,u){const f={};return h_(a,(A,S)=>{if("string"==typeof A&&A.startsWith(":")){const j=A.substring(1);f[S]=u[j]}else f[S]=A}),f}createSegmentGroup(a,u,f,A){const S=this.createSegments(a,u.segments,f,A);let x={};return h_(u.children,(j,q)=>{x[q]=this.createSegmentGroup(a,j,f,A)}),new Eg(S,x)}createSegments(a,u,f,A){return u.map(S=>S.path.startsWith(":")?this.findPosParam(a,S,A):this.findOrReturn(S,f))}findPosParam(a,u,f){const A=f[u.path.substring(1)];if(!A)throw new Error(`Cannot redirect to '${a}'. Cannot find '${u.path}'.`);return A}findOrReturn(a,u){let f=0;for(const A of u){if(A.path===a.path)return u.splice(f),A;f++}return a}}function gY(s){const a={};for(const f of Object.keys(s.children)){const S=gY(s.children[f]);(S.segments.length>0||S.hasChildren())&&(a[f]=S)}return function Due(s){if(1===s.numberOfChildren&&s.children[zp]){const a=s.children[zp];return new Eg(s.segments.concat(a.segments),a.children)}return s}(new Eg(s.segments,a))}class Fne{constructor(a){this.path=a,this.route=this.path[this.path.length-1]}}class _Q{constructor(a,u){this.component=a,this.route=u}}function Nue(s,a,u){const f=s._root;return V4(f,a?a._root:null,u,[f.value])}function IQ(s,a,u){const f=function jne(s){if(!s)return null;for(let a=s.parent;a;a=a.parent){const u=a.routeConfig;if(u&&u._loadedConfig)return u._loadedConfig}return null}(a);return(f?f.module.injector:u).get(s)}function V4(s,a,u,f,A={canDeactivateChecks:[],canActivateChecks:[]}){const S=Z0(a);return s.children.forEach(x=>{(function Lue(s,a,u,f,A={canDeactivateChecks:[],canActivateChecks:[]}){const S=s.value,x=a?a.value:null,j=u?u.getContext(s.value.outlet):null;if(x&&S.routeConfig===x.routeConfig){const q=function Pue(s,a,u){if("function"==typeof u)return u(s,a);switch(u){case"pathParamsChange":return!yp(s.url,a.url);case"pathParamsOrQueryParamsChange":return!yp(s.url,a.url)||!_S(s.queryParams,a.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!g_(s,a)||!_S(s.queryParams,a.queryParams);default:return!g_(s,a)}}(x,S,S.routeConfig.runGuardsAndResolvers);q?A.canActivateChecks.push(new Fne(f)):(S.data=x.data,S._resolvedData=x._resolvedData),V4(s,a,S.component?j?j.children:null:u,f,A),q&&j&&j.outlet&&j.outlet.isActivated&&A.canDeactivateChecks.push(new _Q(j.outlet.component,x))}else x&&G4(a,j,A),A.canActivateChecks.push(new Fne(f)),V4(s,null,S.component?j?j.children:null:u,f,A)})(x,S[x.value.outlet],u,f.concat([x.value]),A),delete S[x.value.outlet]}),h_(S,(x,j)=>G4(x,u.getContext(j),A)),A}function G4(s,a,u){const f=Z0(s),A=s.value;h_(f,(S,x)=>{G4(S,A.component?a?a.children.getContext(x):null:a,u)}),u.canDeactivateChecks.push(new _Q(A.component&&a&&a.outlet&&a.outlet.isActivated?a.outlet.component:null,A))}class mY{}function Gne(s){return new Fd(a=>a.error(s))}class qne{constructor(a,u,f,A,S,x){this.rootComponentType=a,this.config=u,this.urlTree=f,this.url=A,this.paramsInheritanceStrategy=S,this.relativeLinkResolution=x}recognize(){const a=nT(this.urlTree.root,[],[],this.config.filter(x=>void 0===x.redirectTo),this.relativeLinkResolution).segmentGroup,u=this.processSegmentGroup(this.config,a,zp);if(null===u)return null;const f=new Ll([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},zp,this.rootComponentType,null,this.urlTree.root,-1,{}),A=new Ey(f,u),S=new ql(this.url,A);return this.inheritParamsAndData(S._root),S}inheritParamsAndData(a){const u=a.value,f=f_(u,this.paramsInheritanceStrategy);u.params=Object.freeze(f.params),u.data=Object.freeze(f.data),a.children.forEach(A=>this.inheritParamsAndData(A))}processSegmentGroup(a,u,f){return 0===u.segments.length&&u.hasChildren()?this.processChildren(a,u):this.processSegment(a,u,u.segments,f)}processChildren(a,u){const f=[];for(const S of Object.keys(u.children)){const x=u.children[S],j=z_(a,S),q=this.processSegmentGroup(j,x,S);if(null===q)return null;f.push(...q)}const A=Kne(f);return function Wne(s){s.sort((a,u)=>a.value.outlet===zp?-1:u.value.outlet===zp?1:a.value.outlet.localeCompare(u.value.outlet))}(A),A}processSegment(a,u,f,A){for(const S of a){const x=this.processSegmentAgainstRoute(S,u,f,A);if(null!==x)return x}return b0(u,f,A)?[]:null}processSegmentAgainstRoute(a,u,f,A){if(a.redirectTo||!rT(a,u,f,A))return null;let S,x=[],j=[];if("**"===a.path){const pa=f.length>0?rY(f).parameters:{};S=new Ll(f,pa,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Yne(a),yl(a),a.component,a,H4(u),vY(u)+f.length,yY(a))}else{const pa=yy(u,a,f);if(!pa.matched)return null;x=pa.consumedSegments,j=pa.remainingSegments,S=new Ll(x,pa.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Yne(a),yl(a),a.component,a,H4(u),vY(u)+x.length,yY(a))}const q=function EY(s){return s.children?s.children:s.loadChildren?s._loadedConfig.routes:[]}(a),{segmentGroup:ce,slicedSegments:Ye}=nT(u,x,j,q.filter(pa=>void 0===pa.redirectTo),this.relativeLinkResolution);if(0===Ye.length&&ce.hasChildren()){const pa=this.processChildren(q,ce);return null===pa?null:[new Ey(S,pa)]}if(0===q.length&&0===Ye.length)return[new Ey(S,[])];const _r=yl(a)===A,ha=this.processSegment(q,ce,Ye,_r?zp:A);return null===ha?null:[new Ey(S,ha)]}}function CQ(s){const a=s.value.routeConfig;return a&&""===a.path&&void 0===a.redirectTo}function Kne(s){const a=[],u=new Set;for(const f of s){if(!CQ(f)){a.push(f);continue}const A=a.find(S=>f.value.routeConfig===S.value.routeConfig);void 0!==A?(A.children.push(...f.children),u.add(A)):a.push(f)}for(const f of u){const A=Kne(f.children);a.push(new Ey(f.value,A))}return a.filter(f=>!u.has(f))}function H4(s){let a=s;for(;a._sourceSegment;)a=a._sourceSegment;return a}function vY(s){let a=s,u=a._segmentIndexShift?a._segmentIndexShift:0;for(;a._sourceSegment;)a=a._sourceSegment,u+=a._segmentIndexShift?a._segmentIndexShift:0;return u-1}function Yne(s){return s.data||{}}function yY(s){return s.resolve||{}}function _Y(s){return[...Object.keys(s),...Object.getOwnPropertySymbols(s)]}function SQ(s){return zT(a=>{const u=s(a);return u?Hd(u).pipe(v0(()=>a)):Np(a)})}class IY extends class Jne{shouldDetach(a){return!1}store(a,u){}shouldAttach(a){return!1}retrieve(a){return null}shouldReuseRoute(a,u){return a.routeConfig===u.routeConfig}}{}const bY=new Zp("ROUTES");class CY{constructor(a,u,f,A){this.injector=a,this.compiler=u,this.onLoadStartListener=f,this.onLoadEndListener=A}load(a,u){if(u._loader$)return u._loader$;this.onLoadStartListener&&this.onLoadStartListener(u);const A=this.loadModuleFactory(u.loadChildren).pipe(v0(S=>{this.onLoadEndListener&&this.onLoadEndListener(u);const x=S.create(a);return new _w(Cne(x.injector.get(bY,void 0,Of.Self|Of.Optional)).map(Sh),x)}),X1(S=>{throw u._loader$=void 0,S}));return u._loader$=new uue(A,()=>new ba).pipe(U4()),u._loader$}loadModuleFactory(a){return eT(a()).pipe(q0(u=>u instanceof V7?Np(u):Hd(this.compiler.compileModuleAsync(u))))}}class oT{shouldProcessUrl(a){return!0}extract(a){return a}merge(a,u){return a}}function n3(s){throw s}function tO(s,a,u){return a.parse("/")}function R2(s,a){return Np(null)}const zne={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Hue={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let $_=(()=>{class s{constructor(u,f,A,S,x,j,q){this.rootComponentType=u,this.urlSerializer=f,this.rootContexts=A,this.location=S,this.config=q,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ba,this.errorHandler=n3,this.malformedUriErrorHandler=tO,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:R2,afterPreactivation:R2},this.urlHandlingStrategy=new oT,this.routeReuseStrategy=new IY,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=x.get(FR),this.console=x.get(Tae);const _r=x.get(k_);this.isNgZoneEnabled=_r instanceof k_&&k_.isInAngularZone(),this.resetConfig(q),this.currentUrlTree=function S2(){return new $R(new Eg([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new CY(x,j,ha=>this.triggerEvent(new lQ(ha)),ha=>this.triggerEvent(new Ene(ha))),this.routerState=gQ(this.currentUrlTree,this.rootComponentType),this.transitions=new pl({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var u;return null===(u=this.location.getState())||void 0===u?void 0:u.\u0275routerPageId}setupNavigations(u){const f=this.events;return u.pipe(JR(A=>0!==A.id),v0(A=>Object.assign(Object.assign({},A),{extractedUrl:this.urlHandlingStrategy.extract(A.rawUrl)})),zT(A=>{let S=!1,x=!1;return Np(A).pipe(Z1(j=>{this.currentNavigation={id:j.id,initialUrl:j.currentRawUrl,extractedUrl:j.extractedUrl,trigger:j.source,extras:j.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),zT(j=>{const q=this.browserUrlTree.toString(),ce=!this.navigated||j.extractedUrl.toString()!==q||q!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||ce)&&this.urlHandlingStrategy.shouldProcessUrl(j.rawUrl))return Xne(j.source)&&(this.browserUrlTree=j.extractedUrl),Np(j).pipe(zT(_r=>{const ha=this.transitions.getValue();return f.next(new YM(_r.id,this.serializeUrl(_r.extractedUrl),_r.source,_r.restoredState)),ha!==this.transitions.getValue()?k1:Promise.resolve(_r)}),function eO(s,a,u,f){return zT(A=>function Oue(s,a,u,f,A){return new Une(s,a,u,f,A).apply()}(s,a,u,A.extractedUrl,f).pipe(v0(S=>Object.assign(Object.assign({},A),{urlAfterRedirects:S}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Z1(_r=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:_r.urlAfterRedirects})}),function Fue(s,a,u,f,A){return q0(S=>function Hne(s,a,u,f,A="emptyOnly",S="legacy"){try{const x=new qne(s,a,u,f,A,S).recognize();return null===x?Gne(new mY):Np(x)}catch(x){return Gne(x)}}(s,a,S.urlAfterRedirects,u(S.urlAfterRedirects),f,A).pipe(v0(x=>Object.assign(Object.assign({},S),{targetSnapshot:x}))))}(this.rootComponentType,this.config,_r=>this.serializeUrl(_r),this.paramsInheritanceStrategy,this.relativeLinkResolution),Z1(_r=>{if("eager"===this.urlUpdateStrategy){if(!_r.extras.skipLocationChange){const pa=this.urlHandlingStrategy.merge(_r.urlAfterRedirects,_r.rawUrl);this.setBrowserUrl(pa,_r)}this.browserUrlTree=_r.urlAfterRedirects}const ha=new hue(_r.id,this.serializeUrl(_r.extractedUrl),this.serializeUrl(_r.urlAfterRedirects),_r.targetSnapshot);f.next(ha)}));if(ce&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:ha,extractedUrl:pa,source:cc,restoredState:ol,extras:wl}=j,Il=new YM(ha,this.serializeUrl(pa),cc,ol);f.next(Il);const Xc=gQ(pa,this.rootComponentType).snapshot;return Np(Object.assign(Object.assign({},j),{targetSnapshot:Xc,urlAfterRedirects:pa,extras:Object.assign(Object.assign({},wl),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=j.rawUrl,j.resolve(null),k1}),SQ(j=>{const{targetSnapshot:q,id:ce,extractedUrl:Ye,rawUrl:_r,extras:{skipLocationChange:ha,replaceUrl:pa}}=j;return this.hooks.beforePreactivation(q,{navigationId:ce,appliedUrlTree:Ye,rawUrlTree:_r,skipLocationChange:!!ha,replaceUrl:!!pa})}),Z1(j=>{const q=new fue(j.id,this.serializeUrl(j.extractedUrl),this.serializeUrl(j.urlAfterRedirects),j.targetSnapshot);this.triggerEvent(q)}),v0(j=>Object.assign(Object.assign({},j),{guards:Nue(j.targetSnapshot,j.currentSnapshot,this.rootContexts)})),function Qne(s,a){return q0(u=>{const{targetSnapshot:f,currentSnapshot:A,guards:{canActivateChecks:S,canDeactivateChecks:x}}=u;return 0===x.length&&0===S.length?Np(Object.assign(Object.assign({},u),{guardsResult:!0})):function xue(s,a,u,f){return Hd(s).pipe(q0(A=>function AY(s,a,u,f,A){const S=a&&a.routeConfig?a.routeConfig.canDeactivate:null;return S&&0!==S.length?Np(S.map(j=>{const q=IQ(j,a,A);let ce;if(function hY(s){return s&&a0(s.canDeactivate)}(q))ce=eT(q.canDeactivate(s,a,u,f));else{if(!a0(q))throw new Error("Invalid CanDeactivate guard");ce=eT(q(s,a,u,f))}return ce.pipe(XT())})).pipe(eR()):Np(!0)}(A.component,A.route,u,a,f)),XT(A=>!0!==A,!0))}(x,f,A,s).pipe(q0(j=>j&&function g0(s){return"boolean"==typeof s}(j)?function Mue(s,a,u,f){return Hd(a).pipe(Y1(A=>C2(function Uue(s,a){return null!==s&&a&&a(new gue(s)),Np(!0)}(A.route.parent,f),function Bue(s,a){return null!==s&&a&&a(new yne(s)),Np(!0)}(A.route,f),function bQ(s,a,u){const f=a[a.length-1],S=a.slice(0,a.length-1).reverse().map(x=>function kue(s){const a=s.routeConfig?s.routeConfig.canActivateChild:null;return a&&0!==a.length?{node:s,guards:a}:null}(x)).filter(x=>null!==x).map(x=>cQ(()=>Np(x.guards.map(q=>{const ce=IQ(q,x.node,u);let Ye;if(function dY(s){return s&&a0(s.canActivateChild)}(ce))Ye=eT(ce.canActivateChild(f,s));else{if(!a0(ce))throw new Error("Invalid CanActivateChild guard");Ye=eT(ce(f,s))}return Ye.pipe(XT())})).pipe(eR())));return Np(S).pipe(eR())}(s,A.path,u),function Vne(s,a,u){const f=a.routeConfig?a.routeConfig.canActivate:null;if(!f||0===f.length)return Np(!0);const A=f.map(S=>cQ(()=>{const x=IQ(S,a,u);let j;if(function vy(s){return s&&a0(s.canActivate)}(x))j=eT(x.canActivate(a,s));else{if(!a0(x))throw new Error("Invalid CanActivate guard");j=eT(x(a,s))}return j.pipe(XT())}));return Np(A).pipe(eR())}(s,A.route,u))),XT(A=>!0!==A,!0))}(f,S,s,a):Np(j)),v0(j=>Object.assign(Object.assign({},u),{guardsResult:j})))})}(this.ngModule.injector,j=>this.triggerEvent(j)),Z1(j=>{if(c0(j.guardsResult)){const ce=nY(`Redirecting to "${this.serializeUrl(j.guardsResult)}"`);throw ce.url=j.guardsResult,ce}const q=new eY(j.id,this.serializeUrl(j.extractedUrl),this.serializeUrl(j.urlAfterRedirects),j.targetSnapshot,!!j.guardsResult);this.triggerEvent(q)}),JR(j=>!!j.guardsResult||(this.restoreHistory(j),this.cancelNavigationTransition(j,""),!1)),SQ(j=>{if(j.guards.canActivateChecks.length)return Np(j).pipe(Z1(q=>{const ce=new mne(q.id,this.serializeUrl(q.extractedUrl),this.serializeUrl(q.urlAfterRedirects),q.targetSnapshot);this.triggerEvent(ce)}),zT(q=>{let ce=!1;return Np(q).pipe(function jue(s,a){return q0(u=>{const{targetSnapshot:f,guards:{canActivateChecks:A}}=u;if(!A.length)return Np(u);let S=0;return Hd(A).pipe(Y1(x=>function Que(s,a,u,f){return function Vue(s,a,u,f){const A=_Y(s);if(0===A.length)return Np({});const S={};return Hd(A).pipe(q0(x=>function Gue(s,a,u,f){const A=IQ(s,a,f);return eT(A.resolve?A.resolve(a,u):A(a,u))}(s[x],a,u,f).pipe(Z1(j=>{S[x]=j}))),bf(1),q0(()=>_Y(S).length===A.length?Np(S):k1))}(s._resolve,s,a,f).pipe(v0(S=>(s._resolvedData=S,s.data=Object.assign(Object.assign({},s.data),f_(s,u).resolve),null)))}(x.route,f,s,a)),Z1(()=>S++),bf(1),q0(x=>S===A.length?Np(u):k1))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Z1({next:()=>ce=!0,complete:()=>{ce||(this.restoreHistory(q),this.cancelNavigationTransition(q,"At least one route resolver didn't emit any value."))}}))}),Z1(q=>{const ce=new pue(q.id,this.serializeUrl(q.extractedUrl),this.serializeUrl(q.urlAfterRedirects),q.targetSnapshot);this.triggerEvent(ce)}))}),SQ(j=>{const{targetSnapshot:q,id:ce,extractedUrl:Ye,rawUrl:_r,extras:{skipLocationChange:ha,replaceUrl:pa}}=j;return this.hooks.afterPreactivation(q,{navigationId:ce,appliedUrlTree:Ye,rawUrlTree:_r,skipLocationChange:!!ha,replaceUrl:!!pa})}),v0(j=>{const q=function Lne(s,a,u){const f=F4(s,a._root,u?u._root:void 0);return new Ql(f,a)}(this.routeReuseStrategy,j.targetSnapshot,j.currentRouterState);return Object.assign(Object.assign({},j),{targetRouterState:q})}),Z1(j=>{this.currentUrlTree=j.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(j.urlAfterRedirects,j.rawUrl),this.routerState=j.targetRouterState,"deferred"===this.urlUpdateStrategy&&(j.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,j),this.browserUrlTree=j.urlAfterRedirects)}),((s,a,u)=>v0(f=>(new tT(a,f.targetRouterState,f.currentRouterState,u).activate(s),f)))(this.rootContexts,this.routeReuseStrategy,j=>this.triggerEvent(j)),Z1({next(){S=!0},complete(){S=!0}}),function lue(s){return zy((a,u)=>{try{a.subscribe(u)}finally{u.add(s)}})}(()=>{var j;S||x||this.cancelNavigationTransition(A,`Navigation ID ${A.id} is not equal to the current navigation id ${this.navigationId}`),(null===(j=this.currentNavigation)||void 0===j?void 0:j.id)===A.id&&(this.currentNavigation=null)}),X1(j=>{if(x=!0,function Eue(s){return s&&s[tY]}(j)){const q=c0(j.url);q||(this.navigated=!0,this.restoreHistory(A,!0));const ce=new Ane(A.id,this.serializeUrl(A.extractedUrl),j.message);f.next(ce),q?setTimeout(()=>{const Ye=this.urlHandlingStrategy.merge(j.url,this.rawUrlTree),_r={skipLocationChange:A.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Xne(A.source)};this.scheduleNavigation(Ye,"imperative",null,_r,{resolve:A.resolve,reject:A.reject,promise:A.promise})},0):A.resolve(!1)}else{this.restoreHistory(A,!0);const q=new due(A.id,this.serializeUrl(A.extractedUrl),j);f.next(q);try{A.resolve(this.errorHandler(j))}catch(ce){A.reject(ce)}}return k1}))}))}resetRootComponentType(u){this.rootComponentType=u,this.routerState.root.component=this.rootComponentType}setTransition(u){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),u))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(u=>{const f="popstate"===u.type?"popstate":"hashchange";"popstate"===f&&setTimeout(()=>{var A;const S={replaceUrl:!0},x=(null===(A=u.state)||void 0===A?void 0:A.navigationId)?u.state:null;if(x){const q=Object.assign({},x);delete q.navigationId,delete q.\u0275routerPageId,0!==Object.keys(q).length&&(S.state=q)}const j=this.parseUrl(u.url);this.scheduleNavigation(j,f,x,S)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(u){this.events.next(u)}resetConfig(u){yQ(u),this.config=u.map(Sh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(u,f={}){const{relativeTo:A,queryParams:S,fragment:x,queryParamsHandling:j,preserveFragment:q}=f,ce=A||this.routerState.root,Ye=q?this.currentUrlTree.fragment:x;let _r=null;switch(j){case"merge":_r=Object.assign(Object.assign({},this.currentUrlTree.queryParams),S);break;case"preserve":_r=this.currentUrlTree.queryParams;break;default:_r=S||null}return null!==_r&&(_r=this.removeEmptyProps(_r)),function xne(s,a,u,f,A){if(0===u.length)return mQ(a.root,a.root,a.root,f,A);const S=function Nh(s){if("string"==typeof s[0]&&1===s.length&&"/"===s[0])return new cY(!0,0,s);let a=0,u=!1;const f=s.reduce((A,S,x)=>{if("object"==typeof S&&null!=S){if(S.outlets){const j={};return h_(S.outlets,(q,ce)=>{j[ce]="string"==typeof q?q.split("/"):q}),[...A,{outlets:j}]}if(S.segmentPath)return[...A,S.segmentPath]}return"string"!=typeof S?[...A,S]:0===x?(S.split("/").forEach((j,q)=>{0==q&&"."===j||(0==q&&""===j?u=!0:".."===j?a++:""!=j&&A.push(j))}),A):[...A,S]},[]);return new cY(u,a,f)}(u);if(S.toRoot())return mQ(a.root,a.root,new Eg([],{}),f,A);const x=function w2(s,a,u){if(s.isAbsolute)return new P0(a.root,!0,0);if(-1===u.snapshot._lastPathIndex){const S=u.snapshot._urlSegment;return new P0(S,S===a.root,0)}const f=$M(s.commands[0])?0:1;return function Cue(s,a,u){let f=s,A=a,S=u;for(;S>A;){if(S-=A,f=f.parent,!f)throw new Error("Invalid number of '../'");A=f.segments.length}return new P0(f,!1,A-S)}(u.snapshot._urlSegment,u.snapshot._lastPathIndex+f,s.numberOfDoubleDots)}(S,a,s),j=x.processChildren?vQ(x.segmentGroup,x.index,S.commands):EQ(x.segmentGroup,x.index,S.commands);return mQ(a.root,x.segmentGroup,j,f,A)}(ce,this.currentUrlTree,u,_r,null!=Ye?Ye:null)}navigateByUrl(u,f={skipLocationChange:!1}){const A=c0(u)?u:this.parseUrl(u),S=this.urlHandlingStrategy.merge(A,this.rawUrlTree);return this.scheduleNavigation(S,"imperative",null,f)}navigate(u,f={skipLocationChange:!1}){return function que(s){for(let a=0;a<s.length;a++){const u=s[a];if(null==u)throw new Error(`The requested path contains ${u} segment at index ${a}`)}}(u),this.navigateByUrl(this.createUrlTree(u,f),f)}serializeUrl(u){return this.urlSerializer.serialize(u)}parseUrl(u){let f;try{f=this.urlSerializer.parse(u)}catch(A){f=this.malformedUriErrorHandler(A,this.urlSerializer,u)}return f}isActive(u,f){let A;if(A=!0===f?Object.assign({},zne):!1===f?Object.assign({},Hue):f,c0(u))return wne(this.currentUrlTree,u,A);const S=this.parseUrl(u);return wne(this.currentUrlTree,S,A)}removeEmptyProps(u){return Object.keys(u).reduce((f,A)=>{const S=u[A];return null!=S&&(f[A]=S),f},{})}processNavigations(){this.navigations.subscribe(u=>{this.navigated=!0,this.lastSuccessfulId=u.id,this.currentPageId=u.targetPageId,this.events.next(new JM(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,u.resolve(!0)},u=>{this.console.warn(`Unhandled Navigation Error: ${u}`)})}scheduleNavigation(u,f,A,S,x){var j,q;if(this.disposed)return Promise.resolve(!1);let ce,Ye,_r;x?(ce=x.resolve,Ye=x.reject,_r=x.promise):_r=new Promise((cc,ol)=>{ce=cc,Ye=ol});const ha=++this.navigationId;let pa;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(A=this.location.getState()),pa=A&&A.\u0275routerPageId?A.\u0275routerPageId:S.replaceUrl||S.skipLocationChange?null!==(j=this.browserPageId)&&void 0!==j?j:0:(null!==(q=this.browserPageId)&&void 0!==q?q:0)+1):pa=0,this.setTransition({id:ha,targetPageId:pa,source:f,restoredState:A,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:u,extras:S,resolve:ce,reject:Ye,promise:_r,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_r.catch(cc=>Promise.reject(cc))}setBrowserUrl(u,f){const A=this.urlSerializer.serialize(u),S=Object.assign(Object.assign({},f.extras.state),this.generateNgRouterState(f.id,f.targetPageId));this.location.isCurrentPathEqualTo(A)||f.extras.replaceUrl?this.location.replaceState(A,"",S):this.location.go(A,"",S)}restoreHistory(u,f=!1){var A,S;if("computed"===this.canceledNavigationResolution){const x=this.currentPageId-u.targetPageId;"popstate"!==u.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(A=this.currentNavigation)||void 0===A?void 0:A.finalUrl)||0===x?this.currentUrlTree===(null===(S=this.currentNavigation)||void 0===S?void 0:S.finalUrl)&&0===x&&(this.resetState(u),this.browserUrlTree=u.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(x)}else"replace"===this.canceledNavigationResolution&&(f&&this.resetState(u),this.resetUrlToCurrentUrlTree())}resetState(u){this.routerState=u.currentRouterState,this.currentUrlTree=u.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,u.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(u,f){const A=new Ane(u.id,this.serializeUrl(u.extractedUrl),f);this.triggerEvent(A),u.resolve(!1)}generateNgRouterState(u,f){return"computed"===this.canceledNavigationResolution?{navigationId:u,\u0275routerPageId:f}:{navigationId:u}}}return s.\u0275fac=function(u){o7()},s.\u0275prov=Hf({token:s,factory:s.\u0275fac}),s})();function Xne(s){return"imperative"!==s}class SY{}class ere{preload(a,u){return Np(null)}}let q4=(()=>{class s{constructor(u,f,A,S){this.router=u,this.injector=A,this.preloadingStrategy=S,this.loader=new CY(A,f,q=>u.triggerEvent(new lQ(q)),q=>u.triggerEvent(new Ene(q)))}setUpPreloading(){this.subscription=this.router.events.pipe(JR(u=>u instanceof JM),Y1(()=>this.preload())).subscribe(()=>{})}preload(){const u=this.injector.get(FR);return this.processRoutes(u,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(u,f){const A=[];for(const S of f)if(S.loadChildren&&!S.canLoad&&S._loadedConfig){const x=S._loadedConfig;A.push(this.processRoutes(x.module,x.routes))}else S.loadChildren&&!S.canLoad?A.push(this.preloadConfig(u,S)):S.children&&A.push(this.processRoutes(u,S.children));return Hd(A).pipe(dO(),v0(S=>{}))}preloadConfig(u,f){return this.preloadingStrategy.preload(f,()=>(f._loadedConfig?Np(f._loadedConfig):this.loader.load(u.injector,f)).pipe(q0(S=>(f._loadedConfig=S,this.processRoutes(S.module,S.routes)))))}}return s.\u0275fac=function(u){return new(u||s)(Mh($_),Mh(v8),Mh(S1),Mh(SY))},s.\u0275prov=Hf({token:s,factory:s.\u0275fac}),s})(),tR=(()=>{class s{constructor(u,f,A={}){this.router=u,this.viewportScroller=f,this.options=A,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},A.scrollPositionRestoration=A.scrollPositionRestoration||"disabled",A.anchorScrolling=A.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(u=>{u instanceof YM?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=u.navigationTrigger,this.restoredId=u.restoredState?u.restoredState.navigationId:0):u instanceof JM&&(this.lastId=u.id,this.scheduleScrollEvent(u,this.router.parseUrl(u.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(u=>{u instanceof _ne&&(u.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(u.position):u.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(u.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(u,f){this.router.triggerEvent(new _ne(u,"popstate"===this.lastSource?this.store[this.restoredId]:null,f))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return s.\u0275fac=function(u){o7()},s.\u0275prov=Hf({token:s,factory:s.\u0275fac}),s})();const O2=new Zp("ROUTER_CONFIGURATION"),RQ=new Zp("ROUTER_FORROOT_GUARD"),tre=[xM,{provide:By,useClass:$T},{provide:$_,useFactory:function Yue(s,a,u,f,A,S,x={},j,q){const ce=new $_(null,s,a,u,f,A,Cne(S));return j&&(ce.urlHandlingStrategy=j),q&&(ce.routeReuseStrategy=q),function ire(s,a){s.errorHandler&&(a.errorHandler=s.errorHandler),s.malformedUriErrorHandler&&(a.malformedUriErrorHandler=s.malformedUriErrorHandler),s.onSameUrlNavigation&&(a.onSameUrlNavigation=s.onSameUrlNavigation),s.paramsInheritanceStrategy&&(a.paramsInheritanceStrategy=s.paramsInheritanceStrategy),s.relativeLinkResolution&&(a.relativeLinkResolution=s.relativeLinkResolution),s.urlUpdateStrategy&&(a.urlUpdateStrategy=s.urlUpdateStrategy),s.canceledNavigationResolution&&(a.canceledNavigationResolution=s.canceledNavigationResolution)}(x,ce),x.enableTracing&&ce.events.subscribe(Ye=>{var _r,ha;null===(_r=console.group)||void 0===_r||_r.call(console,`Router Event: ${Ye.constructor.name}`),console.log(Ye.toString()),console.log(Ye),null===(ha=console.groupEnd)||void 0===ha||ha.call(console)}),ce},deps:[By,e3,xM,S1,v8,bY,O2,[class iT{},new UT],[class t3{},new UT]]},e3,{provide:Vh,useFactory:function ore(s){return s.routerState.root},deps:[$_]},q4,ere,class Wue{preload(a,u){return u().pipe(X1(()=>Np(null)))}},{provide:O2,useValue:{enableTracing:!1}}];function nre(){return new Uee("Router",$_)}let W4=(()=>{class s{constructor(u,f){}static forRoot(u,f){return{ngModule:s,providers:[tre,DQ(u),{provide:RQ,useFactory:Kue,deps:[[$_,new UT,new B]]},{provide:O2,useValue:f||{}},{provide:FN,useFactory:OQ,deps:[y2,[new XP(C8),new UT],O2]},{provide:tR,useFactory:rre,deps:[$_,Fte,O2]},{provide:SY,useExisting:f&&f.preloadingStrategy?f.preloadingStrategy:ere},{provide:Uee,multi:!0,useFactory:nre},[TY,{provide:d4,multi:!0,useFactory:Jue,deps:[TY]},{provide:NQ,useFactory:wY,deps:[TY]},{provide:Ree,multi:!0,useExisting:NQ}]]}}static forChild(u){return{ngModule:s,providers:[DQ(u)]}}}return s.\u0275fac=function(u){return new(u||s)(Mh(RQ,8),Mh($_,8))},s.\u0275mod=E1({type:s}),s.\u0275inj=M1({}),s})();function rre(s,a,u){return u.scrollOffset&&a.setOffset(u.scrollOffset),new tR(s,a,u)}function OQ(s,a,u={}){return u.useHash?new sce(s,a):new cte(s,a)}function Kue(s){return"guarded"}function DQ(s){return[{provide:RV,multi:!0,useValue:s},{provide:bY,multi:!0,useValue:s}]}let TY=(()=>{class s{constructor(u){this.injector=u,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ba}appInitializer(){return this.injector.get(oce,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let f=null;const A=new Promise(j=>f=j),S=this.injector.get($_),x=this.injector.get(O2);return"disabled"===x.initialNavigation?(S.setUpLocationChangeListener(),f(!0)):"enabled"===x.initialNavigation||"enabledBlocking"===x.initialNavigation?(S.hooks.afterPreactivation=()=>this.initNavigation?Np(null):(this.initNavigation=!0,f(!0),this.resultOfPreactivationDone),S.initialNavigation()):f(!0),A})}bootstrapListener(u){const f=this.injector.get(O2),A=this.injector.get(q4),S=this.injector.get(tR),x=this.injector.get($_),j=this.injector.get(f4);u===j.components[0]&&(("enabledNonBlocking"===f.initialNavigation||void 0===f.initialNavigation)&&x.initialNavigation(),A.setUpPreloading(),S.init(),x.resetRootComponentType(j.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return s.\u0275fac=function(u){return new(u||s)(Mh(S1))},s.\u0275prov=Hf({token:s,factory:s.\u0275fac}),s})();function Jue(s){return s.appInitializer.bind(s)}function wY(s){return s.bootstrapListener.bind(s)}const NQ=new Zp("Router Initializer"),Xue=[];let $ue=(()=>{class s{}return s.\u0275fac=function(u){return new(u||s)},s.\u0275mod=E1({type:s}),s.\u0275inj=M1({imports:[[W4.forRoot(Xue)],W4]}),s})();function c1(s,a,u,f,A,S,x){try{var j=s[S](x),q=j.value}catch(ce){return void u(ce)}j.done?a(q):Promise.resolve(q).then(f,A)}function B_(s){return function(){var a=this,u=arguments;return new Promise(function(f,A){var S=s.apply(a,u);function x(q){c1(S,f,A,x,j,"next",q)}function j(q){c1(S,f,A,x,j,"throw",q)}x(void 0)})}}var kQ=o(890),Z_=o.n(kQ),Zue=o(528),RY=o.n(Zue);const u1=["local"],are=["remoteVideo"],OY=["remoteScreen"];let $N=(()=>{class s{constructor(u){this._httpClient=u,this.title="agora-test",this.clientOptions={appId:"d21fd5bea4e4402b870c100d7172619e",channel:"helloAgora",token:"",uid:0},this.screenIsShared=!1,this.videoIsPublished=!1,this.screenMode="motion",this.UpNetworkQuality="",this.DownNetworkQuality="",this.remoteUpNetworkQuality="",this.remoteDownNetworkQuality="",this.connectionState="",this.autoChangeVideoQuality=!0,this.currentQuality=0,this.screenQuality=0,this.canChangeQuality=!0,this.networkProfile={timeToUnlockQuality:6e4,downgradeAllowance:3,historyMaxLength:4,snapshotsConunter:0,local:{upLink:{history:[]},downLink:{history:[]}},remote:{upLink:{history:[]},downLink:{history:[]}},qualityProfiles:[{name:"180p_4",isLocked:!1,lockTimes:0,downgradedTimes:0},{name:"360p_7",isLocked:!1,lockTimes:0,downgradedTimes:0},{name:"480p",isLocked:!1,lockTimes:0,downgradedTimes:0}]},this.screenProfiles=["1080p"],this.localResolution={width:0,height:0},this.remoteResolution={width:0,height:0},this.wbConfig={appIdentifier:"WNvdwAlNEe61yUX5hW-c6g/h4vLmWcAnoOk5Q",region:"us-sv"},this.agoraClient=Z_().createClient({mode:"rtc",codec:"vp8"}),this.screeClient=Z_().createClient({mode:"rtc",codec:"vp8"}),this.rtmClient=RY().createInstance(this.clientOptions.appId),this.initializeQualityHistory(),this.networkMonitoringHandler()}initializeQualityHistory(){this.networkProfile.local.upLink.history=Array(this.networkProfile.historyMaxLength).fill(0),this.networkProfile.local.downLink.history=Array(this.networkProfile.historyMaxLength).fill(0),this.networkProfile.remote.upLink.history=Array(this.networkProfile.historyMaxLength).fill(0),this.networkProfile.remote.downLink.history=Array(this.networkProfile.historyMaxLength).fill(0)}connectionStateHandler(){this.agoraClient.on("connection-state-change",(u,f,A)=>{this.connectionState=`current: ${u}, prev: ${f}, reason: ${A}`,console.log("currentState: ",u),console.log("prevState: ",f),console.log("reason: ",A)})}networkMonitoringHandler(){var u=this;this.agoraClient.on("network-quality",function(){var f=B_(function*(A){var S,x,j,q,ce;1===(console.log("-----------network quality-----------"),console.log(A),A.uplinkNetworkQuality)?(u.networkProfile.local.upLink.history.shift(),u.networkProfile.local.upLink.history.push(!0),u.UpNetworkQuality="excellent"):(u.networkProfile.local.upLink.history.shift(),u.networkProfile.local.upLink.history.push(!1),u.UpNetworkQuality="bad"),1===A.downlinkNetworkQuality?(u.networkProfile.local.downLink.history.shift(),u.networkProfile.local.downLink.history.push(!0),u.DownNetworkQuality="excellent"):(u.networkProfile.local.downLink.history.shift(),u.networkProfile.local.downLink.history.push(!1),u.DownNetworkQuality="bad"),u.localVideoTrack&&(u.localResolution.width=u.localVideoTrack.getMediaStreamTrack().getSettings().width,u.localResolution.height=u.localVideoTrack.getMediaStreamTrack().getSettings().height),console.log("--------- local network history  -----------"),console.log("uplink",u.networkProfile.local.upLink.history),console.log("downlink",u.networkProfile.local.downLink.history);let Ye=u.agoraClient.getRemoteNetworkQuality();if(Ye[null===(S=u.remoteUser)||void 0===S?void 0:S.uid]&&(1===(console.log("--- crazy remote quality -------",Ye,u.remoteUser),Ye[null===(x=u.remoteUser)||void 0===x?void 0:x.uid].uplinkNetworkQuality)?(u.networkProfile.remote.upLink.history.shift(),u.networkProfile.remote.upLink.history.push(!0),u.remoteUpNetworkQuality="excellent"):(u.networkProfile.remote.upLink.history.shift(),u.networkProfile.remote.upLink.history.push(!1),u.remoteUpNetworkQuality="bad"),1===Ye[null===(j=u.remoteUser)||void 0===j?void 0:j.uid].downlinkNetworkQuality?(u.networkProfile.remote.downLink.history.shift(),u.networkProfile.remote.downLink.history.push(!0),u.remoteDownNetworkQuality="excellent"):(u.networkProfile.remote.downLink.history.shift(),u.networkProfile.remote.downLink.history.push(!1),u.remoteDownNetworkQuality="bad"),console.log("--------- remote network history  -----------"),console.log("uplink",u.networkProfile.remote.upLink.history),console.log("downlink",u.networkProfile.remote.downLink.history)),u.remoteVideoTrack&&(u.remoteResolution.width=u.remoteVideoTrack.getMediaStreamTrack().getSettings().width,u.remoteResolution.height=u.remoteVideoTrack.getMediaStreamTrack().getSettings().height),u.localVideoTrack&&(u.networkProfile.snapshotsConunter++,4==u.networkProfile.snapshotsConunter&&u.autoChangeVideoQuality)){if(u.networkProfile.local.upLink.history[0]&&u.networkProfile.local.upLink.history[1]&&u.networkProfile.local.upLink.history[2]&&u.networkProfile.local.upLink.history[3]&&(!Ye[null===(q=u.remoteUser)||void 0===q?void 0:q.uid]||Ye[null===(ce=u.remoteUser)||void 0===ce?void 0:ce.uid]&&u.networkProfile.remote.downLink.history[0]&&u.networkProfile.remote.downLink.history[1]&&u.networkProfile.remote.downLink.history[2]&&u.networkProfile.remote.downLink.history[3]))console.info("------- going to upgrade ---------"),u.currentQuality!=u.networkProfile.qualityProfiles.length-1&&!u.networkProfile.qualityProfiles[u.currentQuality+1].isLocked&&u.changeQuality(1);else if(0!=u.currentQuality){if(u.networkProfile.qualityProfiles[u.currentQuality].downgradedTimes==u.networkProfile.downgradeAllowance){u.networkProfile.qualityProfiles[u.currentQuality].isLocked=!0,u.networkProfile.qualityProfiles[u.currentQuality].lockTimes++;let _r=u.currentQuality;console.info("-------- quality locked --------",_r,u.networkProfile.qualityProfiles),setTimeout(()=>{u.networkProfile.qualityProfiles[_r].isLocked=!1,u.networkProfile.qualityProfiles[_r].downgradedTimes=0,console.info("-------- quality unlocked --------",_r,u.networkProfile.qualityProfiles)},u.networkProfile.timeToUnlockQuality)}console.info("------ going to downgrade -----------"),yield u.changeQuality(-1),u.networkProfile.qualityProfiles[u.currentQuality].downgradedTimes++}u.networkProfile.snapshotsConunter=0}});return function(A){return f.apply(this,arguments)}}())}getNetworkStats(){var u,f,A,S;console.log("------ local Video Stats -------");let x=this.agoraClient.getLocalVideoStats();this.localWatchedQuality={width:x.sendResolutionWidth,height:x.sendResolutionHeight},console.log(x),console.log("------ local Audio stats ---------"),console.log(this.agoraClient.getLocalAudioStats()),console.log("------ Remote Video Stats -------");let j=this.agoraClient.getRemoteVideoStats();this.remoteWatchedQuality={width:null===(f=j[null===(u=this.remoteUser)||void 0===u?void 0:u.uid])||void 0===f?void 0:f.receiveResolutionWidth,height:null===(S=j[null===(A=this.remoteUser)||void 0===A?void 0:A.uid])||void 0===S?void 0:S.receiveResolutionHeight},console.log(j),console.log("------ Remote Audio stats -------"),console.log(this.agoraClient.getRemoteAudioStats()),console.log("------- screen local video stats-------"),console.log(this.screeClient.getLocalVideoStats())}ngOnInit(){var u=this;this.agoraClientSetup(),this.whiteBoardSetup(),setTimeout(()=>{this.agoraRTMSetup()},2e3),window.addEventListener("beforeunload",B_(function*(){u.agoraClient&&(u.agoraClient.unpublish(),yield u.agoraClient.leave()),u.screeClient&&(u.screeClient.unpublish(),yield u.screeClient.leave())}))}agoraClientSetup(){var u=this;this.agoraClient.on("user-joined",f=>{console.log(" ---- doomed user joined -------"),console.log(f),this.remoteUser=f}),this.agoraClient.on("user-published",function(){var f=B_(function*(A,S){var x,j;console.log(A),console.log("mediaType: ",S),yield u.agoraClient.subscribe(A,S),console.log("subscribe success"),"video"==S?(u.remoteVideoTrack=A.videoTrack,null===(x=u.remoteVideoTrack)||void 0===x||x.play(u.remoteVideo.nativeElement)):"audio"==S&&(u.remoteAudioTrack=A.audioTrack,null===(j=u.remoteAudioTrack)||void 0===j||j.play())});return function(A,S){return f.apply(this,arguments)}}()),this.agoraClient.on("user-unpublished",(f,A)=>{}),this.screeClient.on("user-published",function(){var f=B_(function*(A,S){var x;"video"==S&&(console.log("------- screen share publish handler -------"),console.log(A),console.log("mediaType: ",S),yield u.screeClient.subscribe(A,S),u.screenTrack=A.videoTrack,null===(x=u.screenTrack)||void 0===x||x.play(u.remoteScreen.nativeElement),u.lowerVideoQualityToLowestWhenScreenSharing())});return function(A,S){return f.apply(this,arguments)}}()),this.screeClient.on("user-unpublished",function(){var f=B_(function*(A,S){console.log(" -------- screen unshared ---------"),u.autoChangeVideoQuality=!0,u.networkProfile.snapshotsConunter=0});return function(A,S){return f.apply(this,arguments)}}()),this.onConnect()}agoraRTMSetup(){this.rtmChannel=this.rtmClient.createChannel(this.clientOptions.channel),this.rtmClient.on("ConnectionStateChanged",(u,f)=>{console.log(" --------- RTM Connection state changed ---------"),console.log(u,f)}),this.rtmChannel.on("ChannelMessage",function(u,f){console.log("---- new message ------"),console.log(`member: (${f}), message: ${u}`);let A=document.getElementById("msgs-container");A.appendChild(document.createElement("div")).append("user_"+f+" : "+u.text),A.scrollTop=A.scrollHeight}),this.rtmChannel.on("MemberJoined",function(u){console.log("--- new member ------"),console.log(`member: ${u}`)}),this.rtmChannel.on("MemberLeft",function(u){console.log("--- member left ------"),console.log(`member: ${u}`)}),console.log("------ just before login ---------"),console.log(`uid: ${this.clientOptions.uid}`),console.log(`token: ${this.clientOptions.token}`),this._httpClient.get(`${window.location.href}rtm-token/${this.clientOptions.uid}`).subscribe(u=>{this.rtmClient.login({uid:this.clientOptions.uid.toString(),token:u.token}).then(()=>(console.log("------- RTM login success -----------"),this.rtmChannel.join().then(()=>{console.log("------ joined RTM channel successfully -------");let f=0;setInterval(()=>{this.rtmChannel.sendMessage({messageType:"TEXT",text:"hello "+f++})},1e3)}))).catch(f=>{console.error("---------- RTM failed -----------"),console.error(f)})})}whiteBoardSetup(){let u=new WhiteWebSdk(this.wbConfig);this._httpClient.get(`${window.location.href}wb-data`).subscribe(f=>{u.joinRoom({uid:Math.ceil(1e11*Math.random()).toString(),uuid:f.roomId,roomToken:f.roomToken}).then(A=>{console.log("room joined successfully"),A.bindHtmlElement(document.getElementById("whiteboard"))}).catch(A=>{console.log("room joining failed"),console.error(A)})})}onConnect(){this.generatePubToken()}generatePubToken(){this._httpClient.get(`${window.location.href}token/publish/helloAgora`).subscribe({next:u=>{this.clientOptions.token=u.token,this.clientOptions.uid=u.uid,this.agoraClient.join(this.clientOptions.appId,"helloAgora",this.clientOptions.token,this.clientOptions.uid).then(f=>{this.setUpAgoraTracks()}).catch(f=>{console.log("join failed: ",f)})},error:u=>{console.log(u)},complete:()=>{console.log("token generated successfully")}}),this._httpClient.get(`${window.location.href}token/publish/helloAgoraShare`).subscribe({next:u=>{this.screeClient.join(this.clientOptions.appId,"helloAgoraShare",u.token,u.uid).catch(f=>{console.log("share channel join failed"),console.log(f)})},error:u=>{console.log(u)},complete:()=>{console.log("share token generated successfully")}})}setUpAgoraTracks(){return B_(function*(){})()}startOrStopVideo(){var u=this;return B_(function*(){u.videoIsPublished?(u.localVideoTrack.stop(),u.localAudioTrack.stop(),yield u.agoraClient.unpublish([u.localVideoTrack,u.localAudioTrack]),u.localAudioTrack.close(),u.localVideoTrack.close(),u.videoIsPublished=!1):(u.localVideoTrack=yield Z_().createCameraVideoTrack({optimizationMode:"motion",encoderConfig:u.networkProfile.qualityProfiles[u.currentQuality].name,facingMode:"user"}),u.localAudioTrack=yield Z_().createMicrophoneAudioTrack(),u.localVideoTrack.play(u.localVideo.nativeElement),yield u.agoraClient.publish([u.localVideoTrack,u.localAudioTrack]),u.videoIsPublished=!0)})()}changeQuality(u){var f=this;return B_(function*(){if(f.canChangeQuality=!1,1==u){if(f.currentQuality==f.networkProfile.qualityProfiles.length-1)return void(f.canChangeQuality=!0);yield f.localVideoTrack.setEncoderConfiguration(f.networkProfile.qualityProfiles[f.currentQuality+1].name),f.currentQuality++,console.log(`---- qualiy up graded to :${f.networkProfile.qualityProfiles[f.currentQuality]}---- `)}else{if(0==f.currentQuality)return void(f.canChangeQuality=!0);yield f.localVideoTrack.setEncoderConfiguration(f.networkProfile.qualityProfiles[f.currentQuality-1]),f.currentQuality--,console.log(`---- qualiy down graded to :${f.networkProfile.qualityProfiles[f.currentQuality]}---- `)}f.canChangeQuality=!0})()}onClickScreenSharingBtn(){var u=this;return B_(function*(){var f;u.screenIsShared?(u.screeClient.unpublish(u.localScreenTrack),null===(f=u.localScreenTrack)||void 0===f||f.close(),u.screenIsShared=!1,u.autoChangeVideoQuality=!0,u.networkProfile.snapshotsConunter=0):(u.localScreenTrack=yield Z_().createScreenVideoTrack({optimizationMode:u.screenMode,encoderConfig:u.screenProfiles[0]},"disable"),u.localScreenTrack.on("track-ended",()=>{u.onClickScreenSharingBtn()}),u.localScreenTrack.play(u.remoteScreen.nativeElement),u.screeClient.publish(u.localScreenTrack),u.screenIsShared=!0,u.lowerVideoQualityToLowestWhenScreenSharing())})()}lowerVideoQualityToLowestWhenScreenSharing(){var u=this;return B_(function*(){u.autoChangeVideoQuality=!1,u.localVideoTrack&&(yield u.localVideoTrack.setEncoderConfiguration(u.networkProfile.qualityProfiles[0].name),u.currentQuality=0)})()}toggleScreenShaingMode(){var u=this;return B_(function*(){var f,A;"motion"==u.screenMode?(yield null===(f=u.localScreenTrack)||void 0===f?void 0:f.setOptimizationMode("detail"),u.screenMode="detail"):(yield null===(A=u.localScreenTrack)||void 0===A?void 0:A.setOptimizationMode("motion"),u.screenMode="motion")})()}changeScreenQuality(u){var f=this;return B_(function*(){var A,S;if(1==u){if(f.screenQuality==f.screenProfiles.length-1)return;let x=yield Z_().createScreenVideoTrack({optimizationMode:f.screenMode,encoderConfig:f.screenProfiles[f.screenQuality+1]},"disable");x.on("track-ended",()=>{f.onClickScreenSharingBtn()}),yield f.screeClient.unpublish(f.localScreenTrack),null===(A=f.localScreenTrack)||void 0===A||A.close(),f.screeClient.publish(x),x.play(f.remoteScreen.nativeElement),f.localScreenTrack=x,f.screenQuality++}else{if(0==f.screenQuality)return;let x=yield Z_().createScreenVideoTrack({optimizationMode:f.screenMode,encoderConfig:f.screenProfiles[f.screenQuality-1]},"disable");x.on("track-ended",()=>{f.onClickScreenSharingBtn()}),yield f.screeClient.unpublish(f.localScreenTrack),null===(S=f.localScreenTrack)||void 0===S||S.close(),f.screeClient.publish(x),x.play(f.remoteScreen.nativeElement),f.localScreenTrack=x,f.screenQuality--}})()}}return s.\u0275fac=function(u){return new(u||s)(af(_t))},s.\u0275cmp=u_({type:s,selectors:[["app-root"]],viewQuery:function(u,f){if(1&u&&(u8(u1,5),u8(are,5),u8(OY,5)),2&u){let A;OM(A=MN())&&(f.localVideo=A.first),OM(A=MN())&&(f.remoteVideo=A.first),OM(A=MN())&&(f.remoteScreen=A.first)}},decls:43,vars:9,consts:[[2,"margin","1em"],[3,"click"],[1,"local"],["local",""],[1,"remote"],["remoteVideo",""],[1,"screen"],["remoteScreen",""],["id","chat"],["id","msgs-container"],["id","wb-container"],["id","whiteboard"]],template:function(u,f){1&u&&(Ay(0,"div",0)(1,"h1"),H_(2,"Hello Agora"),r_(),Ay(3,"h1"),H_(4,"local"),r_(),Ay(5,"h3"),H_(6),r_(),Ay(7,"h3"),H_(8),r_(),Ay(9,"h2"),H_(10),r_(),Ay(11,"button",1),wN("click",function(){return f.startOrStopVideo()}),H_(12," start / stop "),r_(),QT(13,"br")(14,"br")(15,"div",2,3),Ay(17,"h2"),H_(18,"remote"),r_(),QT(19,"br"),Ay(20,"h3"),H_(21),r_(),Ay(22,"h3"),H_(23),r_(),Ay(24,"h2"),H_(25),r_(),QT(26,"div",4,5),Ay(28,"h2"),H_(29,"shared screen"),r_(),Ay(30,"button",1),wN("click",function(){return f.onClickScreenSharingBtn()}),H_(31),r_(),QT(32,"br")(33,"div",6,7),Ay(35,"div",8)(36,"div",9)(37,"div"),H_(38,"empty"),r_()()(),Ay(39,"div",10)(40,"h1"),H_(41,"whiteboard"),r_(),QT(42,"div",11),r_()()),2&u&&(b1(6),f2("Up Network Quality : ",f.UpNetworkQuality,""),b1(2),f2("Down Network Quality: ",f.DownNetworkQuality,""),b1(2),kN("Resolution: ",f.localResolution.width,"x",f.localResolution.height,""),b1(11),f2("Up Network Quality : ",f.remoteUpNetworkQuality,""),b1(2),f2("Down Network Quality: ",f.remoteDownNetworkQuality,""),b1(2),kN("Resolution: ",f.remoteResolution.width,"x",f.remoteResolution.height,""),b1(6),f2(" ",f.screenIsShared?"stop sharing":"start sharing",""))},styles:[".local[_ngcontent-%COMP%], .remote[_ngcontent-%COMP%]{width:600px;height:400px;border-style:solid;border-color:#000;padding:1em}.screen[_ngcontent-%COMP%]{width:1000px;height:600px;border-style:solid;border-color:#000;padding:1em}.local[_ngcontent-%COMP%]   video[_ngcontent-%COMP%], .remote[_ngcontent-%COMP%]   video[_ngcontent-%COMP%], .screen[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content}button[_ngcontent-%COMP%]{padding:.3em;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;font-size:16px}#wb-container[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;position:fixed;bottom:0;right:0;border-style:solid;border-color:#000;border-width:2px}#wb-container[_ngcontent-%COMP%] > #whiteboard[_ngcontent-%COMP%]{width:300px;height:500px}#chat[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;position:fixed;top:0;right:0;border-style:solid;border-width:2px;border-color:#000;background-color:#ffd876}#chat[_ngcontent-%COMP%] > #msgs-container[_ngcontent-%COMP%]{width:300px;height:120px;overflow-y:scroll}"]}),s})(),DY=(()=>{class s{}return s.\u0275fac=function(u){return new(u||s)},s.\u0275mod=E1({type:s,bootstrap:[$N]}),s.\u0275inj=M1({providers:[],imports:[[jW,$ue,XW]]}),s})();(function Gee(){tW=!1})(),ene().bootstrapModule(DY).catch(s=>console.error(s))},890:function(r,t,o){var l=o(926).default;r.exports=function(){"use strict";var p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},_=function(e){return e&&e.Math==Math&&e},R=_("object"==typeof globalThis&&globalThis)||_("object"==typeof window&&window)||_("object"==typeof self&&self)||_("object"==typeof p&&p)||function(){return this}()||Function("return this")(),M={},P=function(e){try{return!!e()}catch(n){return!0}},F=!P(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),G=!P(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}),we=Function.prototype.call,xe=G?we.bind(we):function(){return we.apply(we,arguments)},_n={},fa={}.propertyIsEnumerable,da=Object.getOwnPropertyDescriptor,Ta=da&&!fa.call({1:2},1);_n.f=Ta?function(e){var n=da(this,e);return!!n&&n.enumerable}:fa;var Da,Ja,rl=function(e,n){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:n}},Nl=G,Vl=Function.prototype,kd=Vl.call,E0=Nl&&Vl.bind.bind(kd,kd),Ha=Nl?function(e){return e&&E0(e)}:function(e){return e&&function(){return kd.apply(e,arguments)}},_u=Ha,ul=_u({}.toString),Rl=_u("".slice),ic=function(e){return Rl(ul(e),8,-1)},tl=P,Sl=ic,kl=R.Object,Fd=Ha("".split),Bl=tl(function(){return!kl("z").propertyIsEnumerable(0)})?function(e){return"String"==Sl(e)?Fd(e,""):kl(e)}:kl,Jp=R.TypeError,Th=function(e){if(null==e)throw Jp("Can't call method on "+e);return e},H0=Bl,ba=Th,p1=function(e){return H0(ba(e))},R0=function(e){return"function"==typeof e},zy=R0,u0=function(e){return"object"==typeof e?null!==e:zy(e)},p3=R,v0=R0,OL=function(e){return v0(e)?e:void 0},eb=function(e,n){return arguments.length<2?OL(p3[e]):p3[e]&&p3[e][n]},TS=Ha({}.isPrototypeOf),lO=eb("navigator","userAgent")||"",wj=lO,qj=R.process,$j=R.Deno,iV=qj&&qj.versions||$j&&$j.version,g3=iV&&iV.v8;g3&&(Ja=(Da=g3.split("."))[0]>0&&Da[0]<4?1:+(Da[0]+Da[1])),!Ja&&wj&&(!(Da=wj.match(/Edge\/(\d+)/))||Da[1]>=74)&&(Da=wj.match(/Chrome\/(\d+)/))&&(Ja=+Da[1]);var DL=Ja,A3=DL,oV=!!Object.getOwnPropertySymbols&&!P(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&A3&&A3<41}),sV=oV&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,az=eb,fR=R0,aV=TS,cV=R.Object,e6=sV?function(e){return"symbol"==typeof e}:function(e){var n=az("Symbol");return fR(n)&&aV(n.prototype,cV(e))},t6=R.String,NL=function(e){try{return t6(e)}catch(n){return"Object"}},uz=R0,lz=NL,dz=R.TypeError,U2=function(e){if(uz(e))return e;throw dz(lz(e)+" is not a function")},n6=U2,AT=function(e,n){var i=e[n];return null==i?void 0:n6(i)},LL=xe,PL=R0,ML=u0,E3=R.TypeError,F2={exports:{}},mT=R,r6=Object.defineProperty,BL=function(e,n){try{r6(mT,e,{value:n,configurable:!0,writable:!0})}catch(i){mT[e]=n}return n},k0="__core-js_shared__",C0=R[k0]||BL(k0,{}),i6=C0;(F2.exports=function(e,n){return i6[e]||(i6[e]=void 0!==n?n:{})})("versions",[]).push({version:"3.20.3",mode:"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"});var uV=Th,o6=R.Object,ET=function(e){return o6(uV(e))},lV=ET,B0=Ha({}.hasOwnProperty),by=Object.hasOwn||function(e,n){return B0(lV(e),n)},q0=Ha,dO=0,k1=Math.random(),L1=q0(1..toString),UL=function(e){return"Symbol("+(void 0===e?"":e)+")_"+L1(++dO+k1,36)},s6=R,v3=by,hO=UL,y3=oV,_3=sV,fO=(0,F2.exports)("wks"),pR=s6.Symbol,a6=pR&&pR.for,pO=_3?pR:pR&&pR.withoutSetter||hO,yc=function(e){if(!v3(fO,e)||!y3&&"string"!=typeof fO[e]){var n="Symbol."+e;fO[e]=y3&&v3(pR,e)?pR[e]:_3&&a6?a6(n):pO(n)}return fO[e]},ml=xe,$e=u0,Qh=e6,Hd=AT,sb=R.TypeError,Dg=yc("toPrimitive"),wS=function(e,n){if(!$e(e)||Qh(e))return e;var i,c=Hd(e,Dg);if(c){if(void 0===n&&(n="default"),i=ml(c,e,n),!$e(i)||Qh(i))return i;throw sb("Can't convert object to primitive value")}return void 0===n&&(n="number"),function(e,n){var i,c;if("string"===n&&PL(i=e.toString)&&!ML(c=LL(i,e))||PL(i=e.valueOf)&&!ML(c=LL(i,e))||"string"!==n&&PL(i=e.toString)&&!ML(c=LL(i,e)))return c;throw E3("Can't convert object to primitive value")}(e,n)},xp=e6,gR=function(e){var n=wS(e,"string");return xp(n)?n:n+""},I3=u0,j2=R.document,Sp=I3(j2)&&I3(j2.createElement),AR=function(e){return Sp?j2.createElement(e):{}},QL=AR,$p=!F&&!P(function(){return 7!=Object.defineProperty(QL("div"),"a",{get:function(){return 7}}).a}),up=xe,U0=_n,C3=rl,gO=p1,P1=gR,Q2=by,U_=$p,V2=Object.getOwnPropertyDescriptor;M.f=F?V2:function(e,n){if(e=gO(e),n=P1(n),U_)try{return V2(e,n)}catch(i){}if(Q2(e,n))return C3(!up(U0.f,e,n),e[n])};var Xy={},VL=F&&P(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),c_=u0,RS=R.String,c6=R.TypeError,Fy=function(e){if(c_(e))return e;throw c6(RS(e)+" is not an object")},dV=$p,G2=Fy,F_=gR,y0=R.TypeError,GL=Object.defineProperty,HL=Object.getOwnPropertyDescriptor;Xy.f=F?VL?function(e,n,i){if(G2(e),n=F_(n),G2(i),"function"==typeof e&&"prototype"===n&&"value"in i&&"writable"in i&&!i.writable){var c=HL(e,n);c&&c.writable&&(e[n]=i.value,i={configurable:"configurable"in i?i.configurable:c.configurable,enumerable:"enumerable"in i?i.enumerable:c.enumerable,writable:!1})}return GL(e,n,i)}:GL:function(e,n,i){if(G2(e),n=F_(n),G2(i),dV)try{return GL(e,n,i)}catch(c){}if("get"in i||"set"in i)throw y0("Accessors not supported");return"value"in i&&(e[n]=i.value),e};var M1=Xy,WL=rl,__=F?function(e,n,i){return M1.f(e,n,WL(1,i))}:function(e,n,i){return e[n]=i,e},db={exports:{}},l6=R0,H2=C0,q2=Ha(Function.toString);l6(H2.inspectSource)||(H2.inspectSource=function(e){return q2(e)});var DS,mR,W2,Of=H2.inspectSource,d6=Of,B1=R.WeakMap,KL=R0(B1)&&/native code/.test(d6(B1)),vT=UL,g1=(0,F2.exports)("keys"),ER=function(e){return g1[e]||(g1[e]=vT(e))},h6={},AO=Ha,S3=u0,fV=__,_v=by,vR=ER,yT=h6,e0="Object already initialized",yR=R.TypeError;if(KL||C0.state){var rS=C0.state||(C0.state=new(0,R.WeakMap)),YL=AO(rS.get),A1=AO(rS.has),m1=AO(rS.set);DS=function(e,n){if(A1(rS,e))throw new yR(e0);return n.facade=e,m1(rS,e,n),n},mR=function(e){return YL(rS,e)||{}},W2=function(e){return A1(rS,e)}}else{var pb=vR("state");yT[pb]=!0,DS=function(e,n){if(_v(e,pb))throw new yR(e0);return n.facade=e,fV(e,pb,n),n},mR=function(e){return _v(e,pb)?e[pb]:{}},W2=function(e){return _v(e,pb)}}var u_={set:DS,get:mR,has:W2,enforce:function(e){return W2(e)?mR(e):DS(e,{})},getterFor:function(e){return function(n){var i;if(!S3(n)||(i=mR(n)).type!==e)throw yR("Incompatible receiver, "+e+" required");return i}}},J2=F,JL=Function.prototype,w3=J2&&Object.getOwnPropertyDescriptor,E1=by(JL,"name"),l_={EXISTS:E1,PROPER:E1&&"something"===function(){}.name,CONFIGURABLE:E1&&(!J2||J2&&w3(JL,"name").configurable)},U1=R,py=R0,Cy=by,Sy=__,NS=BL,_T=Of,$y=l_.CONFIGURABLE,IT=u_.get,XL=u_.enforce,mO=String(String).split("String");(db.exports=function(e,n,i,c){var h,g=!!c&&!!c.unsafe,v=!!c&&!!c.enumerable,m=!!c&&!!c.noTargetGet,C=c&&void 0!==c.name?c.name:n;py(i)&&("Symbol("===String(C).slice(0,7)&&(C="["+String(C).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!Cy(i,"name")||$y&&i.name!==C)&&Sy(i,"name",C),(h=XL(i)).source||(h.source=mO.join("string"==typeof C?C:""))),e!==U1?(g?!m&&e[n]&&(v=!0):delete e[n],v?e[n]=i:Sy(e,n,i)):v?e[n]=i:NS(n,i)})(Function.prototype,"toString",function(){return py(this)&&IT(this).source||_T(this)});var F1={},bT=Math.ceil,Ty=Math.floor,iS=function(e){var n=+e;return n!=n||0===n?0:(n>0?Ty:bT)(n)},I_=iS,Hl=Math.max,Tp=Math.min,S0=function(e,n){var i=I_(e);return i<0?Hl(i+n,0):Tp(i,n)},b_=iS,CT=Math.min,t0=function(e){return e>0?CT(b_(e),9007199254740991):0},ST=t0,l0=function(e){return ST(e.length)},z2=p1,_R=S0,gf=l0,IR=function(e){return function(n,i,c){var h,g=z2(n),v=gf(g),m=_R(c,v);if(e&&i!=i){for(;v>m;)if((h=g[m++])!=h)return!0}else for(;v>m;m++)if((e||m in g)&&g[m]===i)return e||m||0;return!e&&-1}},TT={includes:IR(!0),indexOf:IR(!1)},wT=by,j1=p1,Gd=TT.indexOf,RT=h6,kS=Ha([].push),jy=function(e,n){var i,c=j1(e),h=0,g=[];for(i in c)!wT(RT,i)&&wT(c,i)&&kS(g,i);for(;n.length>h;)wT(c,i=n[h++])&&(~Gd(g,i)||kS(g,i));return g},_0=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],p6=jy,pV=_0.concat("length","prototype");F1.f=Object.getOwnPropertyNames||function(e){return p6(e,pV)};var wy={};wy.f=Object.getOwnPropertySymbols;var F0=eb,X2=F1,EO=wy,OT=Fy,v1=Ha([].concat),g6=F0("Reflect","ownKeys")||function(e){var n=X2.f(OT(e)),i=EO.f;return i?v1(n,i(e)):n},R3=by,A6=g6,m6=M,O3=Xy,Q1=function(e,n,i){for(var c=A6(n),h=O3.f,g=m6.f,v=0;v<c.length;v++){var m=c[v];R3(e,m)||i&&R3(i,m)||h(e,m,g(n,m))}},vO=P,hz=R0,gV=/#|\.prototype\./,$2=function(e,n){var i=mV[AV(e)];return i==V1||i!=EV&&(hz(n)?vO(n):!!n)},AV=$2.normalize=function(e){return String(e).replace(gV,".").toLowerCase()},mV=$2.data={},EV=$2.NATIVE="N",V1=$2.POLYFILL="P",D3=$2,$L=R,E6=M.f,vV=__,N3=db.exports,yO=BL,yV=Q1,_V=D3,C_=function(e,n){var i,c,h,g,v,m=e.target,C=e.global,y=e.stat;if(i=C?$L:y?$L[m]||yO(m,{}):($L[m]||{}).prototype)for(c in n){if(g=n[c],h=e.noTargetGet?(v=E6(i,c))&&v.value:i[c],!_V(C?c:m+(y?".":"#")+c,e.forced)&&void 0!==h){if(typeof g==typeof h)continue;yV(g,h)}(e.sham||h&&h.sham)&&vV(g,"sham",!0),N3(i,c,g,e)}},k3=Function.prototype,LS=k3.apply,_O=k3.call,bR="object"==typeof Reflect&&Reflect.apply||(G?_O.bind(LS):function(){return _O.apply(LS,arguments)}),G1=C_,oy=bR,CR=Ha,H1=P,v6=R.Array,Qy=eb("JSON","stringify"),I0=CR(/./.exec),Y0=CR("".charAt),ZL=CR("".charCodeAt),Z2=CR("".replace),_P=CR(1..toString),T_=/[\uD800-\uDFFF]/g,L3=/^[\uD800-\uDBFF]$/,y1=/^[\uDC00-\uDFFF]$/,Dp=function(e,n,i){var c=Y0(i,n-1),h=Y0(i,n+1);return I0(L3,e)&&!I0(y1,h)||I0(y1,e)&&!I0(L3,c)?"\\u"+_P(ZL(e,0),16):e},J0=H1(function(){return'"\\udf06\\ud834"'!==Qy("\udf06\ud834")||'"\\udead"'!==Qy("\udead")});Qy&&G1({target:"JSON",stat:!0,forced:J0},{stringify:function(e,n,i){for(var c=0,h=arguments.length,g=v6(h);c<h;c++)g[c]=arguments[c];var v=oy(Qy,null,g);return"string"==typeof v?Z2(v,T_,Dp):v}});var zg=function(e){try{return!!e()}catch(n){return!0}},_D=!zg(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}),_f=_D,SP=Function.prototype,z0=SP.call,L0=_f&&SP.bind.bind(z0,z0),O0=_f?function(e){return e&&L0(e)}:function(e){return e&&function(){return z0.apply(e,arguments)}},gy=O0({}.isPrototypeOf),oS=function(e){return e&&e.Math==Math&&e},_h=oS("object"==typeof globalThis&&globalThis)||oS("object"==typeof window&&window)||oS("object"==typeof self&&self)||oS("object"==typeof p&&p)||function(){return this}()||Function("return this")(),IO=Function.prototype,w_=IO.apply,q1=IO.call,bO="object"==typeof Reflect&&Reflect.apply||(_D?q1.bind(w_):function(){return q1.apply(w_,arguments)}),X0=function(e){return"function"==typeof e},Nf={},R_=!zg(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),eN=Function.prototype.call,_E=_D?eN.bind(eN):function(){return eN.apply(eN,arguments)},SR={},tN={}.propertyIsEnumerable,x3=Object.getOwnPropertyDescriptor,CO=x3&&!tN.call({1:2},1);SR.f=CO?function(e){var n=x3(this,e);return!!n&&n.enumerable}:tN;var zc,Mp,NT=function(e,n){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:n}},n0=O0,nN=n0({}.toString),sS=n0("".slice),Zy=function(e){return sS(nN(e),8,-1)},r0=zg,fz=Zy,TP=_h.Object,M3=O0("".split),TR=r0(function(){return!TP("z").propertyIsEnumerable(0)})?function(e){return"String"==fz(e)?M3(e,""):TP(e)}:TP,O_=_h.TypeError,_1=function(e){if(null==e)throw O_("Can't call method on "+e);return e},rN=TR,Eb=_1,Ry=function(e){return rN(Eb(e))},I6=X0,e_=function(e){return"object"==typeof e?null!==e:I6(e)},aS={},RP=aS,kT=_h,OP=X0,wR=function(e){return OP(e)?e:void 0},Oy=function(e,n){return arguments.length<2?wR(RP[e])||wR(kT[e]):RP[e]&&RP[e][n]||kT[e]&&kT[e][n]},cS=Oy("navigator","userAgent")||"",DO=cS,U3=_h.process,kO=_h.Deno,xO=U3&&U3.versions||kO&&kO.version,iN=xO&&xO.v8;iN&&(Mp=(zc=iN.split("."))[0]>0&&zc[0]<4?1:+(zc[0]+zc[1])),!Mp&&DO&&(!(zc=DO.match(/Edge\/(\d+)/))||zc[1]>=74)&&(zc=DO.match(/Chrome\/(\d+)/))&&(Mp=+zc[1]);var PS=Mp,F3=PS,t_=!!Object.getOwnPropertySymbols&&!zg(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&F3&&F3<41}),D0=t_&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Wp=Oy,bV=X0,CV=gy,SV=_h.Object,oN=D0?function(e){return"symbol"==typeof e}:function(e){var n=Wp("Symbol");return bV(n)&&CV(n.prototype,SV(e))},sN=_h.String,xS=function(e){try{return sN(e)}catch(n){return"Object"}},MS=X0,LT=xS,RR=_h.TypeError,_b=function(e){if(MS(e))return e;throw RR(LT(e)+" is not a function")},BO=_b,uS=function(e,n){var i=e[n];return null==i?void 0:BO(i)},OR=_E,j3=X0,Q3=e_,aN=_h.TypeError,BS={exports:{}},FO=_h,C6=Object.defineProperty,PT="__core-js_shared__",DR=_h[PT]||function(e,n){try{C6(FO,e,{value:n,configurable:!0,writable:!0})}catch(i){FO[e]=n}return n}(PT,{}),uN=DR;(BS.exports=function(e,n){return uN[e]||(uN[e]=void 0!==n?n:{})})("versions",[]).push({version:"3.20.3",mode:"pure",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"});var NP=_1,lN=_h.Object,W1=function(e){return lN(NP(e))},V3=W1,jO=O0({}.hasOwnProperty),Dy=Object.hasOwn||function(e,n){return jO(V3(e),n)},xT=O0,LP=0,Ny=Math.random(),pz=xT(1..toString),dN=function(e){return"Symbol("+(void 0===e?"":e)+")_"+pz(++LP+Ny,36)},GO=_h,H3=Dy,hN=dN,PP=t_,MP=D0,MT=(0,BS.exports)("wks"),lS=GO.Symbol,S6=lS&&lS.for,T6=MP?lS:lS&&lS.withoutSetter||hN,$0=function(e){if(!H3(MT,e)||!PP&&"string"!=typeof MT[e]){var n="Symbol."+e;MT[e]=PP&&H3(lS,e)?lS[e]:MP&&S6?S6(n):T6(n)}return MT[e]},w6=_E,q3=e_,R6=oN,TV=uS,wV=_h.TypeError,O6=$0("toPrimitive"),D6=function(e,n){if(!q3(e)||R6(e))return e;var i,c=TV(e,O6);if(c){if(void 0===n&&(n="default"),i=w6(c,e,n),!q3(i)||R6(i))return i;throw wV("Can't convert object to primitive value")}return void 0===n&&(n="number"),function(e,n){var i,c;if("string"===n&&j3(i=e.toString)&&!Q3(c=OR(i,e))||j3(i=e.valueOf)&&!Q3(c=OR(i,e))||"string"!==n&&j3(i=e.toString)&&!Q3(c=OR(i,e)))return c;throw aN("Can't convert object to primitive value")}(e,n)},HO=oN,QP=function(e){var n=D6(e,"string");return HO(n)?n:n+""},VP=e_,NR=_h.document,qO=VP(NR)&&VP(NR.createElement),BT=function(e){return qO?NR.createElement(e):{}},JO=BT,W3=!R_&&!zg(function(){return 7!=Object.defineProperty(JO("div"),"a",{get:function(){return 7}}).a}),US=_E,N6=SR,k6=NT,Zp=Ry,RV=QP,gz=Dy,L6=W3,P6=Object.getOwnPropertyDescriptor;Nf.f=R_?P6:function(e,n){if(e=Zp(e),n=RV(n),L6)try{return P6(e,n)}catch(i){}if(gz(e,n))return k6(!US(N6.f,e,n),e[n])};var Az=zg,mz=X0,Ez=/#|\.prototype\./,D_=function(e,n){var i=ky[vp(e)];return i==pN||i!=dS&&(mz(n)?Az(n):!!n)},vp=D_.normalize=function(e){return String(e).replace(Ez,".").toLowerCase()},ky=D_.data={},dS=D_.NATIVE="N",pN=D_.POLYFILL="P",x6=D_,Y3=_b,Db=_D,N_=O0(O0.bind),FS=function(e,n){return Y3(e),void 0===n?e:Db?N_(e,n):function(){return e.apply(n,arguments)}},Q_={},zO=R_&&zg(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),YP=e_,OV=_h.String,vz=_h.TypeError,I1=function(e){if(YP(e))return e;throw vz(OV(e)+" is not an object")},Pb=W3,jS=I1,DV=QP,z3=_h.TypeError,X3=Object.defineProperty,NV=Object.getOwnPropertyDescriptor;Q_.f=R_?zO?function(e,n,i){if(jS(e),n=DV(n),jS(i),"function"==typeof e&&"prototype"===n&&"value"in i&&"writable"in i&&!i.writable){var c=NV(e,n);c&&c.writable&&(e[n]=i.value,i={configurable:"configurable"in i?i.configurable:c.configurable,enumerable:"enumerable"in i?i.enumerable:c.enumerable,writable:!1})}return X3(e,n,i)}:X3:function(e,n,i){if(jS(e),n=DV(n),jS(i),Pb)try{return X3(e,n,i)}catch(c){}if("get"in i||"set"in i)throw z3("Accessors not supported");return"value"in i&&(e[n]=i.value),e};var F6=Q_,$3=NT,hS=R_?function(e,n,i){return F6.f(e,n,$3(1,i))}:function(e,n,i){return e[n]=i,e},Z3=_h,gN=bO,_B=O0,e2=X0,j6=Nf.f,LV=x6,t2=aS,Q6=FS,n2=hS,r2=Dy,V6=function(e){var n=function(i,c,h){if(this instanceof n){switch(arguments.length){case 0:return new e;case 1:return new e(i);case 2:return new e(i,c)}return new e(i,c,h)}return gN(e,this,arguments)};return n.prototype=e.prototype,n},Ly=function(e,n){var i,c,h,g,v,m,C,y,N=e.target,k=e.global,U=e.stat,V=e.proto,K=k?Z3:U?Z3[N]:(Z3[N]||{}).prototype,$=k?t2:t2[N]||n2(t2,N,{})[N],Z=$.prototype;for(h in n)i=!LV(k?h:N+(U?".":"#")+h,e.forced)&&K&&r2(K,h),v=$[h],i&&(m=e.noTargetGet?(y=j6(K,h))&&y.value:K[h]),g=i&&m?m:n[h],i&&typeof v==typeof g||(C=e.bind&&i?Q6(g,Z3):e.wrap&&i?V6(g):V&&e2(g)?_B(g):g,(e.sham||g&&g.sham||v&&v.sham)&&n2(C,"sham",!0),n2($,h,C),V&&(r2(t2,c=N+"Prototype")||n2(t2,c,{}),n2(t2[c],h,g),e.real&&Z&&!Z[h]&&n2(Z,h,g)))},Mh=Math.ceil,G6=Math.floor,eU=function(e){var n=+e;return n!=n||0===n?0:(n>0?G6:Mh)(n)},tU=eU,AN=Math.min,QS=function(e){return function(e){return e>0?AN(tU(e),9007199254740991):0}(e.length)},xV=_b,XP=W1,UT=TR,w=QS,B=_h.TypeError,H=function(e){return function(n,i,c,h){xV(i);var g=XP(n),v=UT(g),m=w(g),C=e?m-1:0,y=e?-1:1;if(c<2)for(;;){if(C in v){h=v[C],C+=y;break}if(C+=y,e?C<0:m<=C)throw B("Reduce of empty array with no initial value")}for(;e?C>=0:m>C;C+=y)C in v&&(h=i(h,v[C],C,g));return h}},_e={left:H(!1),right:H(!0)},_o=zg,la=function(e,n){var i=[][e];return!!i&&_o(function(){i.call(null,n||function(){throw 1},1)})},xa="process"==Zy(_h.process),hc=_e.left,xc=PS,Yc=xa;Ly({target:"Array",proto:!0,forced:!la("reduce")||!Yc&&xc>79&&xc<83},{reduce:function(e){var n=arguments.length;return hc(this,e,n,n>1?arguments[1]:void 0)}});var ll=aS,Ml=function(e){return ll[e+"Prototype"]},ld=Ml("Array").reduce,Pl=gy,Uh=ld,If=Array.prototype,wp=function(e){var n=e.reduce;return e===If||Pl(If,e)&&n===If.reduce?Uh:n},_A=wp,ef={};ef[yc("toStringTag")]="z";var d0=R,sy="[object z]"===String(ef),o0=R0,d_=ic,$P=yc("toStringTag"),i2=d0.Object,H6="Arguments"==d_(function(){return arguments}()),n_=sy?d_:function(e){var n,i,c;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(h,g){try{return h[g]}catch(v){}}(n=i2(e),$P))?i:H6?d_(n):"Object"==(c=d_(n))&&o0(n.callee)?"Arguments":c},MV=n_,yz=R.String,mN=function(e){if("Symbol"===MV(e))throw TypeError("Cannot convert a Symbol value to a string");return yz(e)},V_=Fy,ZP=function(){var e=V_(this),n="";return e.global&&(n+="g"),e.ignoreCase&&(n+="i"),e.multiline&&(n+="m"),e.dotAll&&(n+="s"),e.unicode&&(n+="u"),e.sticky&&(n+="y"),n},nU=P,BV=R.RegExp,UV=nU(function(){var e=BV("a","y");return e.lastIndex=2,null!=e.exec("abcd")}),_z=UV||nU(function(){return!BV("a","y").sticky}),Iz={BROKEN_CARET:UV||nU(function(){var e=BV("^r","gy");return e.lastIndex=2,null!=e.exec("str")}),MISSED_STICKY:_z,UNSUPPORTED_Y:UV},q6={},sie=jy,bz=_0,jV=Xy,uie=Fy,Cz=p1,rU=Object.keys||function(e){return sie(e,bz)};q6.f=F&&!VL?Object.defineProperties:function(e,n){uie(e);for(var i,c=Cz(n),h=rU(n),g=h.length,v=0;g>v;)jV.f(e,i=h[v++],c[i]);return e};var iU,QV=eb("document","documentElement"),VV=Fy,GV=q6,HV=_0,bhe=h6,_x=QV,qV=AR,WV=ER("IE_PROTO"),KV=function(){},W6=function(e){return"<script>"+e+"<\/script>"},wz=function(e){e.write(W6("")),e.close();var n=e.parentWindow.Object;return e=null,n},K6=function(){try{iU=new ActiveXObject("htmlfile")}catch(c){}var e,n;K6="undefined"!=typeof document?document.domain&&iU?wz(iU):((n=qV("iframe")).style.display="none",_x.appendChild(n),n.src=String("javascript:"),(e=n.contentWindow.document).open(),e.write(W6("document.F=Object")),e.close(),e.F):wz(iU);for(var i=HV.length;i--;)delete K6.prototype[HV[i]];return K6()};bhe[WV]=!0;var e,n,Sx=Object.create||function(e,n){var i;return null!==e?(KV.prototype=VV(e),i=new KV,KV.prototype=null,i[WV]=e):i=K6(),void 0===n?i:GV.f(i,n)},die=R.RegExp,YV=P(function(){var e=die(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}),JV=R.RegExp,zV=P(function(){var e=JV("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}),o2=xe,Y6=Ha,hie=mN,kz=ZP,Lz=Iz,xz=Sx,Mz=u_.get,fie=YV,J6=zV,pie=(0,F2.exports)("native-string-replace",String.prototype.replace),oU=RegExp.prototype.exec,z6=oU,Bz=Y6("".charAt),XV=Y6("".indexOf),Fz=Y6("".replace),Tx=Y6("".slice),Rx=(n=/b*/g,o2(oU,e=/a/,"a"),o2(oU,n,"a"),0!==e.lastIndex||0!==n.lastIndex),$V=Lz.BROKEN_CARET,sU=void 0!==/()??/.exec("")[1];(Rx||sU||$V||fie||J6)&&(z6=function(e){var n,i,c,h,g,v,m,C=this,y=Mz(C),N=hie(e),k=y.raw;if(k)return k.lastIndex=C.lastIndex,n=o2(z6,k,N),C.lastIndex=k.lastIndex,n;var U=y.groups,V=$V&&C.sticky,K=o2(kz,C),$=C.source,Z=0,ye=N;if(V&&(K=Fz(K,"y",""),-1===XV(K,"g")&&(K+="g"),ye=Tx(N,C.lastIndex),C.lastIndex>0&&(!C.multiline||C.multiline&&"\n"!==Bz(N,C.lastIndex-1))&&($="(?: "+$+")",ye=" "+ye,Z++),i=new RegExp("^(?:"+$+")",K)),sU&&(i=new RegExp("^"+$+"$(?!\\s)",K)),Rx&&(c=C.lastIndex),h=o2(oU,V?i:C,ye),V?h?(h.input=Tx(h.input,Z),h[0]=Tx(h[0],Z),h.index=C.lastIndex,C.lastIndex+=h[0].length):C.lastIndex=0:Rx&&h&&(C.lastIndex=C.global?h.index+h[0].length:c),sU&&h&&h.length>1&&o2(pie,h[0],i,function(){for(g=1;g<arguments.length-2;g++)void 0===arguments[g]&&(h[g]=void 0)}),h&&U)for(h.groups=v=xz(null),g=0;g<U.length;g++)v[(m=U[g])[0]]=h[m[1]];return h});var Ox=z6;C_({target:"RegExp",proto:!0,forced:/./.exec!==Ox},{exec:Ox});var ZV=Sx,aU=Xy,e9=yc("unscopables"),X6=Array.prototype;null==X6[e9]&&aU.f(X6,e9,{configurable:!0,value:ZV(null)});var vN,jz,t9,yN={},$6=!P(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),n9=R,_N=by,gie=R0,Aie=ET,Che=$6,Gz=ER("IE_PROTO"),Nx=n9.Object,r9=Nx.prototype,cU=Che?Nx.getPrototypeOf:function(e){var n=Aie(e);if(_N(n,Gz))return n[Gz];var i=n.constructor;return gie(i)&&n instanceof i?i.prototype:n instanceof Nx?r9:null},Hz=P,qz=R0,i9=cU,mie=db.exports,o9=yc("iterator"),Kz=!1;[].keys&&("next"in(t9=[].keys())?(jz=i9(i9(t9)))!==Object.prototype&&(vN=jz):Kz=!0),(null==vN||Hz(function(){var e={};return vN[o9].call(e)!==e}))&&(vN={}),qz(vN[o9])||mie(vN,o9,function(){return this});var s9={IteratorPrototype:vN,BUGGY_SAFARI_ITERATORS:Kz},Eie=Xy.f,s2=by,Lx=yc("toStringTag"),uU=function(e,n,i){e&&!i&&(e=e.prototype),e&&!s2(e,Lx)&&Eie(e,Lx,{configurable:!0,value:n})},She=s9.IteratorPrototype,The=Sx,whe=rl,Rhe=uU,Ohe=yN,Jz=function(){return this},vie=R0,yie=R.String,_ie=R.TypeError,Dhe=Ha,Iie=Fy,a2=Object.setPrototypeOf||("__proto__"in{}?function(){var e,n=!1,i={};try{(e=Dhe(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(i,[]),n=i instanceof Array}catch(c){}return function(c,h){return Iie(c),function(e){if("object"==typeof e||vie(e))return e;throw _ie("Can't set "+yie(e)+" as a prototype")}(h),n?e(c,h):c.__proto__=h,c}}():void 0),FT=C_,lU=xe,eX=R0,bie=cU,Cie=a2,Nhe=uU,c9=__,dU=db.exports,u9=yN,khe=l_.PROPER,Lhe=l_.CONFIGURABLE,l9=s9.IteratorPrototype,e5=s9.BUGGY_SAFARI_ITERATORS,hU=yc("iterator"),fU="values",d9="entries",t5=function(){return this},Sie=p1,pU=function(e){X6[e9][e]=!0},rX=yN,Tie=Xy.f,h9=F,f9="Array Iterator",Rie=u_.set,Oie=u_.getterFor(f9),Die=function(e,n,i,c,h,g,v){!function(e,n,i,c){var h=n+" Iterator";e.prototype=The(She,{next:whe(+!c,i)}),Rhe(e,h,!1),Ohe[h]=Jz}(i,n,c);var m,C,y,N=function(ye){if(ye===h&&$)return $;if(!e5&&ye in V)return V[ye];switch(ye){case"keys":case fU:case d9:return function(){return new i(this,ye)}}return function(){return new i(this)}},k=n+" Iterator",U=!1,V=e.prototype,K=V[hU]||V["@@iterator"]||h&&V[h],$=!e5&&K||N(h),Z="Array"==n&&V.entries||K;if(Z&&(m=bie(Z.call(new e)))!==Object.prototype&&m.next&&(bie(m)!==l9&&(Cie?Cie(m,l9):eX(m[hU])||dU(m,hU,t5)),Nhe(m,k,!0)),khe&&h==fU&&K&&K.name!==fU&&(Lhe?c9(V,"name",fU):(U=!0,$=function(){return lU(K,this)})),h)if(C={values:N(fU),keys:g?$:N("keys"),entries:N(d9)},v)for(y in C)(e5||U||!(y in V))&&dU(V,y,C[y]);else FT({target:n,proto:!0,forced:e5||U},C);return V[hU]!==$&&dU(V,hU,$,{name:h}),u9[n]=$,C}(Array,"Array",function(e,n){Rie(this,{type:f9,target:Sie(e),index:0,kind:n})},function(){var e=Oie(this),n=e.target,i=e.kind,c=e.index++;return!n||c>=n.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==i?{value:c,done:!1}:"values"==i?{value:n[c],done:!1}:{value:[c,n[c]],done:!1}},"values"),iX=rX.Arguments=rX.Array;if(pU("keys"),pU("values"),pU("entries"),h9&&"values"!==iX.name)try{Tie(iX,"name",{value:"values"})}catch(e){}var p9=AR("span").classList,Nie=p9&&p9.constructor&&p9.constructor.prototype,Px=R,n5={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},kie=Nie===Object.prototype?void 0:Nie,gU=Die,AU=__,oX=yc,g9=oX("iterator"),Mx=oX("toStringTag"),A9=gU.values,sX=function(e,n){if(e){if(e[g9]!==A9)try{AU(e,g9,A9)}catch(c){e[g9]=A9}if(e[Mx]||AU(e,Mx,n),n5[n])for(var i in gU)if(e[i]!==gU[i])try{AU(e,i,gU[i])}catch(c){e[i]=gU[i]}}};for(var m9 in n5)sX(Px[m9]&&Px[m9].prototype,m9);sX(kie,"DOMTokenList");var Lie=R0,Pie=u0,aX=a2,r5=function(e,n,i){var c,h;return aX&&Lie(c=n.constructor)&&c!==i&&Pie(h=c.prototype)&&h!==i.prototype&&aX(e,h),e},xie=mN,i5=function(e,n){return void 0===e?arguments.length<2?"":n:xie(e)},Mie=u0,Ux=__,jT=Ha("".replace),xhe=String(Error("zxcasd").stack),Bie=/\n\s*at [^:]*:[^\n]*/,cX=Bie.test(xhe),uX=function(e,n){if(cX&&"string"==typeof e)for(;n--;)e=jT(e,Bie,"");return e},lX=rl,Mhe=!P(function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",lX(1,7)),7!==e.stack)}),E9=eb,Uie=by,o5=__,Fie=TS,dX=a2,fS=Q1,jie=r5,hX=i5,Qie=function(e,n){Mie(n)&&"cause"in n&&Ux(e,"cause",n.cause)},Vie=uX,Gie=Mhe,fX=C_,VS=bR,pX=function(e,n,i,c){var h=c?2:1,g=e.split("."),v=g[g.length-1],m=E9.apply(null,g);if(m){var C=m.prototype;if(Uie(C,"cause")&&delete C.cause,!i)return m;var y=E9("Error"),N=n(function(k,U){var V=hX(c?U:k,void 0),K=c?new m(k):new m;return void 0!==V&&o5(K,"message",V),Gie&&o5(K,"stack",Vie(K.stack,2)),this&&Fie(C,this)&&jie(K,this,N),arguments.length>h&&Qie(K,arguments[h]),K});N.prototype=C,"Error"!==v&&(dX?dX(N,y):fS(N,y,{name:!0})),fS(N,m);try{C.name!==v&&o5(C,"name",v),C.constructor=N}catch(k){}return N}},gX=R.WebAssembly,Ap=7!==Error("e",{cause:7}).cause,b1=function(e,n){var i={};i[e]=pX(e,n,Ap),fX({global:!0,forced:Ap},i)},s5=function(e,n){if(gX&&gX[e]){var i={};i[e]=pX("WebAssembly."+e,n,Ap),fX({target:"WebAssembly",stat:!0,forced:Ap},i)}};b1("Error",function(e){return function(n){return VS(e,this,arguments)}}),b1("EvalError",function(e){return function(n){return VS(e,this,arguments)}}),b1("RangeError",function(e){return function(n){return VS(e,this,arguments)}}),b1("ReferenceError",function(e){return function(n){return VS(e,this,arguments)}}),b1("SyntaxError",function(e){return function(n){return VS(e,this,arguments)}}),b1("TypeError",function(e){return function(n){return VS(e,this,arguments)}}),b1("URIError",function(e){return function(n){return VS(e,this,arguments)}}),s5("CompileError",function(e){return function(n){return VS(e,this,arguments)}}),s5("LinkError",function(e){return function(n){return VS(e,this,arguments)}}),s5("RuntimeError",function(e){return function(n){return VS(e,this,arguments)}});let v9=!0,mU=!0;function jb(e,n,i){const c=e.match(n);return c&&c.length>=i&&parseInt(c[i],10)}function IN(e,n,i){if(!e.RTCPeerConnection)return;const c=e.RTCPeerConnection.prototype,h=c.addEventListener;c.addEventListener=function(v,m){if(v!==n)return h.apply(this,arguments);const C=y=>{const N=i(y);N&&(m.handleEvent?m.handleEvent(N):m(N))};return this._eventMap=this._eventMap||{},this._eventMap[n]||(this._eventMap[n]=new Map),this._eventMap[n].set(m,C),h.apply(this,[v,C])};const g=c.removeEventListener;c.removeEventListener=function(v,m){if(v!==n||!this._eventMap||!this._eventMap[n])return g.apply(this,arguments);if(!this._eventMap[n].has(m))return g.apply(this,arguments);const C=this._eventMap[n].get(m);return this._eventMap[n].delete(m),0===this._eventMap[n].size&&delete this._eventMap[n],0===Object.keys(this._eventMap).length&&delete this._eventMap,g.apply(this,[v,C])},Object.defineProperty(c,"on"+n,{get(){return this["_on"+n]},set(v){this["_on"+n]&&(this.removeEventListener(n,this["_on"+n]),delete this["_on"+n]),v&&this.addEventListener(n,this["_on"+n]=v)},enumerable:!0,configurable:!0})}function qie(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(v9=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function y9(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(mU=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function GS(){if("object"==typeof window){if(v9)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function Qx(e,n){mU&&console.warn(e+" is deprecated, please use "+n+" instead.")}function AX(e){const n={browser:null,version:null};if(void 0===e||!e.navigator)return n.browser="Not a browser.",n;const{navigator:i}=e;if(i.mozGetUserMedia)n.browser="firefox",n.version=jb(i.userAgent,/Firefox\/(\d+)\./,1);else if(i.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)n.browser="chrome",n.version=jb(i.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(i.mediaDevices&&i.userAgent.match(/Edge\/(\d+).(\d+)$/))n.browser="edge",n.version=jb(i.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!i.userAgent.match(/AppleWebKit\/(\d+)\./))return n.browser="Not a supported browser.",n;n.browser="safari",n.version=jb(i.userAgent,/AppleWebKit\/(\d+)\./,1),n.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return n}function a5(e){return"[object Object]"===Object.prototype.toString.call(e)}function Wie(e){var n;return a5(e)?_A(n=Object.keys(e)).call(n,function(i,c){const h=a5(e[c]),g=h?Wie(e[c]):e[c],v=h&&!Object.keys(g).length;return void 0===g||v?i:Object.assign(i,{[c]:g})},{}):e}function _9(e,n,i){const c=i?"outbound-rtp":"inbound-rtp",h=new Map;if(null===n)return h;const g=[];return e.forEach(v=>{"track"===v.type&&v.trackIdentifier===n.id&&g.push(v)}),g.forEach(v=>{e.forEach(m=>{m.type===c&&m.trackId===v.id&&function C(y,N,k){N&&!k.has(N.id)&&(k.set(N.id,N),Object.keys(N).forEach(U=>{U.endsWith("Id")?C(y,y.get(N[U]),k):U.endsWith("Ids")&&N[U].forEach(V=>{C(y,y.get(V),k)})}))}(e,m,h)})}),h}var c5=dN,EU=(0,BS.exports)("keys"),Vx=function(e){return EU[e]||(EU[e]=c5(e))},I9=!zg(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),b9=_h,Uhe=Dy,Kie=X0,Yie=W1,Jie=I9,mX=Vx("IE_PROTO"),u5=b9.Object,Fhe=u5.prototype,C9=Jie?u5.getPrototypeOf:function(e){var n=Yie(e);if(Uhe(n,mX))return n[mX];var i=n.constructor;return Kie(i)&&n instanceof i?i.prototype:n instanceof u5?Fhe:null},EX=X0,vX=_h.String,Xie=_h.TypeError,S9=O0,jhe=I1,Vhe=Object.setPrototypeOf||("__proto__"in{}?function(){var e,n=!1,i={};try{(e=S9(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(i,[]),n=i instanceof Array}catch(c){}return function(c,h){return jhe(c),function(e){if("object"==typeof e||EX(e))return e;throw Xie("Can't set "+vX(e)+" as a prototype")}(h),n?e(c,h):c.__proto__=h,c}}():void 0),T9={},Ghe=eU,Hhe=Math.max,qhe=Math.min,yX=function(e,n){var i=Ghe(e);return i<0?Hhe(i+n,0):qhe(i,n)},Whe=Ry,Khe=yX,c2=QS,l5=function(e){return function(n,i,c){var h,g=Whe(n),v=c2(g),m=Khe(c,v);if(e&&i!=i){for(;v>m;)if((h=g[m++])!=h)return!0}else for(;v>m;m++)if((e||m in g)&&g[m]===i)return e||m||0;return!e&&-1}},$ie={includes:l5(!0),indexOf:l5(!1)},vU={},yU=Dy,_X=Ry,w9=$ie.indexOf,Zie=vU,kR=O0([].push),R9=function(e,n){var i,c=_X(e),h=0,g=[];for(i in c)!yU(Zie,i)&&yU(c,i)&&kR(g,i);for(;n.length>h;)yU(c,i=n[h++])&&(~w9(g,i)||kR(g,i));return g},O9=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],D9=R9,eoe=O9.concat("length","prototype");T9.f=Object.getOwnPropertyNames||function(e){return D9(e,eoe)};var _U={};_U.f=Object.getOwnPropertySymbols;var toe=Oy,noe=T9,IU=_U,Wx=I1,N9=O0([].concat),Yx=toe("Reflect","ownKeys")||function(e){var n=noe.f(Wx(e)),i=IU.f;return i?N9(n,i(e)):n},Xx=Dy,$x=Yx,roe=Nf,IX=Q_,bU={},k9=R9,L9=O9,CU=Object.keys||function(e){return k9(e,L9)},bX=Q_,Yhe=I1,CX=Ry,SX=CU;bU.f=R_&&!zO?Object.defineProperties:function(e,n){Yhe(e);for(var i,c=CX(n),h=SX(n),g=h.length,v=0;g>v;)bX.f(e,i=h[v++],c[i]);return e};var h5,P9=Oy("document","documentElement"),ooe=I1,soe=bU,C1=O9,aoe=vU,coe=P9,Jhe=BT,uoe=Vx("IE_PROTO"),f5=function(){},loe=function(e){return"<script>"+e+"<\/script>"},TX=function(e){e.write(loe("")),e.close();var n=e.parentWindow.Object;return e=null,n},Zx=function(){try{h5=new ActiveXObject("htmlfile")}catch(c){}var e,n;Zx="undefined"!=typeof document?document.domain&&h5?TX(h5):((n=Jhe("iframe")).style.display="none",coe.appendChild(n),n.src=String("javascript:"),(e=n.contentWindow.document).open(),e.write(loe("document.F=Object")),e.close(),e.F):TX(h5);for(var i=C1.length;i--;)delete Zx.prototype[C1[i]];return Zx()};aoe[uoe]=!0;var eM=Object.create||function(e,n){var i;return null!==e?(f5.prototype=ooe(e),i=new f5,f5.prototype=null,i[uoe]=e):i=Zx(),void 0===n?i:soe.f(i,n)},doe=O0("".replace),hoe=String(Error("zxcasd").stack),wX=/\n\s*at [^:]*:[^\n]*/,RX=wX.test(hoe),foe=e_,OX=hS,tM={},poe=tM,DX=$0("iterator"),NX=Array.prototype,kX=function(e){return void 0!==e&&(poe.Array===e||NX[DX]===e)},HS={};HS[$0("toStringTag")]="z";var SU="[object z]"===String(HS),goe=_h,Aoe=SU,zhe=X0,TU=Zy,moe=$0("toStringTag"),Eoe=goe.Object,voe="Arguments"==TU(function(){return arguments}()),qS=Aoe?TU:function(e){var n,i,c;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(h,g){try{return h[g]}catch(v){}}(n=Eoe(e),moe))?i:voe?TU(n):"Object"==(c=TU(n))&&zhe(n.callee)?"Arguments":c},yoe=qS,LX=uS,p5=tM,x9=$0("iterator"),g5=function(e){if(null!=e)return LX(e,x9)||LX(e,"@@iterator")||p5[yoe(e)]},M9=_E,B9=_b,PX=I1,Xhe=xS,$he=g5,U9=_h.TypeError,xX=function(e,n){var i=arguments.length<2?$he(e):n;if(B9(i))return PX(M9(i,e));throw U9(Xhe(e)+" is not iterable")},_oe=_E,F9=I1,MX=uS,j9=function(e,n,i){var c,h;F9(e);try{if(!(c=MX(e,"return"))){if("throw"===n)throw i;return i}c=_oe(c,e)}catch(g){h=!0,c=g}if("throw"===n)throw i;if(h)throw c;return F9(c),i},BX=FS,UX=_E,LR=I1,A5=xS,Ioe=kX,boe=QS,Coe=gy,Q9=xX,FX=g5,m5=j9,wU=_h.TypeError,E5=function(e,n){this.stopped=e,this.result=n},v5=E5.prototype,RU=function(e,n,i){var c,h,g,v,m,C,y,k=!(!i||!i.AS_ENTRIES),U=!(!i||!i.IS_ITERATOR),V=!(!i||!i.INTERRUPTED),K=BX(n,i&&i.that),$=function(ye){return c&&m5(c,"normal",ye),new E5(!0,ye)},Z=function(ye){return k?(LR(ye),V?K(ye[0],ye[1],$):K(ye[0],ye[1])):V?K(ye,$):K(ye)};if(U)c=e;else{if(!(h=FX(e)))throw wU(A5(e)+" is not iterable");if(Ioe(h)){for(g=0,v=boe(e);v>g;g++)if((m=Z(e[g]))&&Coe(v5,m))return m;return new E5(!1)}c=Q9(e,h)}for(C=c.next;!(y=UX(C,c)).done;){try{m=Z(y.value)}catch(ye){m5(c,"throw",ye)}if("object"==typeof m&&m&&Coe(v5,m))return m}return new E5(!1)},jX=qS,QX=_h.String,u2=function(e){if("Symbol"===jX(e))throw TypeError("Cannot convert a Symbol value to a string");return QX(e)},V9=u2,Soe=NT,Toe=!zg(function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",Soe(1,7)),7!==e.stack)}),VX=Ly,nM=_h,GX=gy,woe=C9,y5=Vhe,HX=eM,_5=hS,G9=NT,Roe=function(e,n){if(RX&&"string"==typeof e)for(;n--;)e=doe(e,wX,"");return e},S1=function(e,n){foe(n)&&"cause"in n&&OX(e,"cause",n.cause)},H9=RU,qX=function(e,n){return void 0===e?arguments.length<2?"":n:V9(e)},WX=Toe,KX=$0("toStringTag"),OU=nM.Error,Ooe=[].push,DU=function(e,n){var i,c=arguments.length>2?arguments[2]:void 0,h=GX(q9,this);y5?i=y5(new OU,h?woe(this):q9):(i=h?this:HX(q9),_5(i,KX,"Error")),void 0!==n&&_5(i,"message",qX(n)),WX&&_5(i,"stack",Roe(i.stack,1)),S1(i,c);var g=[];return H9(e,Ooe,{that:g}),_5(i,"errors",g),i};y5?y5(DU,OU):function(e,n,i){for(var c=$x(n),h=IX.f,g=roe.f,v=0;v<c.length;v++){var m=c[v];Xx(e,m)||i&&Xx(i,m)||h(e,m,g(n,m))}}(DU,OU,{name:!0});var q9=DU.prototype=HX(OU.prototype,{constructor:G9(1,DU),message:G9(1,""),name:G9(1,"AggregateError")});VX({global:!0},{AggregateError:DU});var Doe=X0,I5=DR,Zhe=O0(Function.toString);Doe(I5.inspectSource)||(I5.inspectSource=function(e){return Zhe(e)});var NU,kU,b5,YX=I5.inspectSource,W9=YX,JX=_h.WeakMap,zX=X0(JX)&&/native code/.test(W9(JX)),XX=O0,WS=e_,tfe=hS,$X=Dy,ZX=Vx,e$=vU,t$="Object already initialized",n$=_h.TypeError;if(zX||DR.state){var l2=DR.state||(DR.state=new(0,_h.WeakMap)),Noe=XX(l2.get),S5=XX(l2.has),koe=XX(l2.set);NU=function(e,n){if(S5(l2,e))throw new n$(t$);return n.facade=e,koe(l2,e,n),n},kU=function(e){return Noe(l2,e)||{}},b5=function(e){return S5(l2,e)}}else{var iM=ZX("state");e$[iM]=!0,NU=function(e,n){if($X(e,iM))throw new n$(t$);return n.facade=e,tfe(e,iM,n),n},kU=function(e){return $X(e,iM)?e[iM]:{}},b5=function(e){return $X(e,iM)}}var bN,i$,o$,oM={set:NU,get:kU,has:b5,enforce:function(e){return b5(e)?kU(e):NU(e,{})},getterFor:function(e){return function(n){var i;if(!WS(n)||(i=kU(n)).type!==e)throw n$("Incompatible receiver, "+e+" required");return i}}},sM=R_,s$=Function.prototype,LU=sM&&Object.getOwnPropertyDescriptor,Y9=Dy(s$,"name"),a$={EXISTS:Y9,PROPER:Y9&&"something"===function(){}.name,CONFIGURABLE:Y9&&(!sM||sM&&LU(s$,"name").configurable)},J9=hS,Vb=function(e,n,i,c){c&&c.enumerable?e[n]=i:J9(e,n,i)},PU=zg,G_=X0,CN=eM,xU=C9,pS=Vb,MU=$0("iterator"),SN=!1;[].keys&&("next"in(o$=[].keys())?(i$=xU(xU(o$)))!==Object.prototype&&(bN=i$):SN=!0);var cM=null==bN||PU(function(){var e={};return bN[MU].call(e)!==e});G_((bN=cM?{}:CN(bN))[MU])||pS(bN,MU,function(){return this});var TN={IteratorPrototype:bN,BUGGY_SAFARI_ITERATORS:SN},uM=qS,dM=SU,hM=Q_.f,fM=hS,pM=Dy,c$=SU?{}.toString:function(){return"[object "+uM(this)+"]"},z9=$0("toStringTag"),d2=function(e,n,i,c){if(e){var h=i?e:e.prototype;pM(h,z9)||hM(h,z9,{configurable:!0,value:n}),c&&!dM&&fM(h,"toString",c$)}},u$=TN.IteratorPrototype,l$=eM,d$=NT,h$=d2,f$=tM,p$=function(){return this},g$=function(e,n,i,c){var h=n+" Iterator";return e.prototype=l$(u$,{next:d$(+!c,i)}),h$(e,h,!1,!0),f$[h]=p$,e},Loe=Ly,Poe=_E,xoe=g$,A$=C9,Moe=d2,m$=Vb,X9=tM,Boe=a$.PROPER,BU=TN.BUGGY_SAFARI_ITERATORS,$9=$0("iterator"),Z9="values",v$="entries",e7=function(){return this},T5=function(e,n,i,c,h,g,v){xoe(i,n,c);var m,C,y,N=function(ye){if(ye===h&&$)return $;if(!BU&&ye in V)return V[ye];switch(ye){case"keys":case Z9:case v$:return function(){return new i(this,ye)}}return function(){return new i(this)}},k=n+" Iterator",U=!1,V=e.prototype,K=V[$9]||V["@@iterator"]||h&&V[h],$=!BU&&K||N(h),Z="Array"==n&&V.entries||K;if(Z&&(m=A$(Z.call(new e)))!==Object.prototype&&m.next&&(Moe(m,k,!0,!0),X9[k]=e7),Boe&&h==Z9&&K&&K.name!==Z9&&(U=!0,$=function(){return Poe(K,this)}),h)if(C={values:N(Z9),keys:g?$:N("keys"),entries:N(v$)},v)for(y in C)(BU||U||!(y in V))&&m$(V,y,C[y]);else Loe({target:n,proto:!0,forced:BU||U},C);return v&&V[$9]!==$&&m$(V,$9,$,{name:h}),X9[n]=$,C},Uoe=Ry,Foe=tM,nfe=T5,y$="Array Iterator",_$=oM.set,rfe=oM.getterFor(y$);nfe(Array,"Array",function(e,n){_$(this,{type:y$,target:Uoe(e),index:0,kind:n})},function(){var e=rfe(this),n=e.target,i=e.kind,c=e.index++;return!n||c>=n.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==i?{value:c,done:!1}:"values"==i?{value:n[c],done:!1}:{value:[c,n[c]],done:!1}},"values"),Foe.Arguments=Foe.Array;var I$=_h.Promise,gM=Vb,b$=function(e,n,i){for(var c in n)i&&i.unsafe&&e[c]?e[c]=n[c]:gM(e,c,n[c],i);return e},C$=Oy,Qoe=Q_,S$=R_,UU=$0("species"),Voe=gy,T$=_h.TypeError,t7=function(e,n){if(Voe(n,e))return e;throw T$("Incorrect invocation")},w$=$0("iterator"),R$=!1;try{var Goe=0,O$={next:function(){return{done:!!Goe++}},return:function(){R$=!0}};O$[w$]=function(){return this},Array.from(O$,function(){throw 2})}catch(e){}var D$=O0,Hoe=zg,n7=X0,N$=qS,r7=YX,qoe=function(){},i7=[],k$=Oy("Reflect","construct"),L$=/^\s*(?:class|function)\b/,af=D$(L$.exec),o7=!L$.exec(qoe),AM=function(e){if(!n7(e))return!1;try{return k$(qoe,i7,e),!0}catch(n){return!1}},w5=function(e){if(!n7(e))return!1;switch(N$(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return o7||!!af(L$,r7(e))}catch(n){return!0}};w5.sham=!0;var FU,Ay,r_,QT,s7=!k$||Hoe(function(){var e;return AM(AM.call)||!AM(Object)||!AM(function(){e=!0})||e})?w5:AM,Woe=s7,a7=xS,c7=_h.TypeError,u7=I1,R5=$0("species"),l7=function(e,n){var i,c=u7(e).constructor;return void 0===c||null==(i=u7(c)[R5])?n:function(e){if(Woe(e))return e;throw c7(a7(e)+" is not a constructor")}(i)},O5=O0([].slice),wN=/(?:ipad|iphone|ipod).*applewebkit/i.test(cS),T1=_h,Yoe=bO,P$=FS,d7=X0,h7=Dy,Joe=zg,x$=P9,zoe=O5,M$=BT,B$=wN,f7=xa,D5=T1.setImmediate,N5=T1.clearImmediate,U$=T1.process,k5=T1.Dispatch,F$=T1.Function,p7=T1.MessageChannel,j$=T1.String,L5=0,P5={};try{FU=T1.location}catch(e){}var g7=function(e){if(h7(P5,e)){var n=P5[e];delete P5[e],n()}},x5=function(e){return function(){g7(e)}},Q$=function(e){g7(e.data)},Vy=function(e){T1.postMessage(j$(e),FU.protocol+"//"+FU.host)};D5&&N5||(D5=function(e){var n=zoe(arguments,1);return P5[++L5]=function(){Yoe(d7(e)?e:F$(e),void 0,n)},Ay(L5),L5},N5=function(e){delete P5[e]},f7?Ay=function(e){U$.nextTick(x5(e))}:k5&&k5.now?Ay=function(e){k5.now(x5(e))}:p7&&!B$?(QT=(r_=new p7).port2,r_.port1.onmessage=Q$,Ay=P$(QT.postMessage,QT)):T1.addEventListener&&d7(T1.postMessage)&&!T1.importScripts&&FU&&"file:"!==FU.protocol&&!Joe(Vy)?(Ay=Vy,T1.addEventListener("message",Q$,!1)):Ay="onreadystatechange"in M$("script")?function(e){x$.appendChild(M$("script")).onreadystatechange=function(){x$.removeChild(this),g7(e)}}:function(e){setTimeout(x5(e),0)});var mM,RN,jU,ON,A7,M5,B5,DN,V$={set:D5,clear:N5},$oe=_h,G$=/ipad|iphone|ipod/i.test(cS)&&void 0!==$oe.Pebble,Zoe=/web0s(?!.*chrome)/i.test(cS),h2=_h,ese=FS,U5=V$.set,VT=wN,tse=G$,nse=Zoe,gS=xa,AS=h2.MutationObserver||h2.WebKitMutationObserver,mS=h2.document,m7=h2.process,QU=h2.Promise,q$=(0,Nf.f)(h2,"queueMicrotask"),W$=q$&&q$.value;W$||(mM=function(){var e,n;for(gS&&(e=m7.domain)&&e.exit();RN;){n=RN.fn,RN=RN.next;try{n()}catch(i){throw RN?ON():jU=void 0,i}}jU=void 0,e&&e.enter()},VT||gS||nse||!AS||!mS?!tse&&QU&&QU.resolve?((B5=QU.resolve(void 0)).constructor=QU,DN=ese(B5.then,B5),ON=function(){DN(mM)}):gS?ON=function(){m7.nextTick(mM)}:(U5=ese(U5,h2),ON=function(){U5(mM)}):(A7=!0,M5=mS.createTextNode(""),new AS(mM).observe(M5,{characterData:!0}),ON=function(){M5.data=A7=!A7}));var rse=W$||function(e){var n={fn:e,next:void 0};jU&&(jU.next=n),RN||(RN=n,ON()),jU=n},EM={},F5=_b,VU=function(e){var n,i;this.promise=new e(function(c,h){if(void 0!==n||void 0!==i)throw TypeError("Bad Promise constructor");n=c,i=h}),this.resolve=F5(n),this.reject=F5(i)};EM.f=function(e){return new VU(e)};var ise=I1,K$=e_,ose=EM,E7=function(e,n){if(ise(e),K$(n)&&n.constructor===e)return n;var i=ose.f(e);return(0,i.resolve)(n),i.promise},Y$=_h,NN=function(e){try{return{error:!1,value:e()}}catch(n){return{error:!0,value:n}}},J$=function(){this.head=null,this.tail=null};J$.prototype={add:function(e){var n={item:e,next:null};this.head?this.tail.next=n:this.head=n,this.tail=n},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var j5,H_,Q5,f2="object"==typeof window,kN=Ly,GT=_h,z$=Oy,PR=_E,V5=I$,X$=b$,$$=d2,v7=_b,G5=X0,sse=e_,ase=t7,cse=YX,eZ=RU,lse=l7,tZ=V$.set,y7=rse,dse=E7,nZ=EM,_7=NN,fse=J$,I7=oM,pse=x6,gse=f2,GU=xa,b7=PS,rZ=$0("species"),KS="Promise",C7=I7.getterFor(KS),iZ=I7.set,oZ=I7.getterFor(KS),YS=V5,HU=V5&&V5.prototype,S7=GT.TypeError,xR=GT.document,T7=GT.process,vM=nZ.f,yM=vM,ife=!!(xR&&xR.createEvent&&GT.dispatchEvent),q_=G5(GT.PromiseRejectionEvent),Ase="unhandledrejection",qU=pse(KS,function(){var e=cse(YS),n=e!==String(YS);if(!n&&66===b7||!HU.finally)return!0;if(b7>=51&&/native code/.test(e))return!1;var i=new YS(function(h){h(1)}),c=function(h){h(function(){},function(){})};return(i.constructor={})[rZ]=c,!(i.then(function(){})instanceof c)||!n&&gse&&!q_}),aZ=qU||!function(e,n){if(!n&&!R$)return!1;var i=!1;try{var c={};c[w$]=function(){return{next:function(){return{done:i=!0}}}},e(c)}catch(h){}return i}(function(e){YS.all(e).catch(function(){})}),mse=function(e){var n;return!(!sse(e)||!G5(n=e.then))&&n},nd=function(e,n){var i,c,h,g=n.value,v=1==n.state,m=v?e.ok:e.fail,C=e.resolve,y=e.reject,N=e.domain;try{m?(v||(2===n.rejection&&vse(n),n.rejection=1),!0===m?i=g:(N&&N.enter(),i=m(g),N&&(N.exit(),h=!0)),i===e.promise?y(S7("Promise-chain cycle")):(c=mse(i))?PR(c,i,C,y):C(i)):y(g)}catch(k){N&&!h&&N.exit(),y(k)}},cZ=function(e,n){e.notified||(e.notified=!0,y7(function(){for(var i,c=e.reactions;i=c.get();)nd(i,e);e.notified=!1,n&&!e.rejection&&Ese(e)}))},uZ=function(e,n,i){var c,h;ife?((c=xR.createEvent("Event")).promise=n,c.reason=i,c.initEvent(e,!1,!0),GT.dispatchEvent(c)):c={promise:n,reason:i},!q_&&(h=GT["on"+e])?h(c):e===Ase&&function(e,n){var i=Y$.console;i&&i.error&&(1==arguments.length?i.error(e):i.error(e,n))}("Unhandled promise rejection",i)},Ese=function(e){PR(tZ,GT,function(){var n,i=e.facade,c=e.value;if(WU(e)&&(n=_7(function(){GU?T7.emit("unhandledRejection",c,i):uZ(Ase,i,c)}),e.rejection=GU||WU(e)?2:1,n.error))throw n.value})},WU=function(e){return 1!==e.rejection&&!e.parent},vse=function(e){PR(tZ,GT,function(){var n=e.facade;GU?T7.emit("rejectionHandled",n):uZ("rejectionhandled",n,e.value)})},MR=function(e,n,i){return function(c){e(n,c,i)}},BR=function(e,n,i){e.done||(e.done=!0,i&&(e=i),e.value=n,e.state=2,cZ(e,!0))},ay=function(e,n,i){if(!e.done){e.done=!0,i&&(e=i);try{if(e.facade===n)throw S7("Promise can't be resolved itself");var c=mse(n);c?y7(function(){var h={done:!1};try{PR(c,n,MR(ay,h,e),MR(BR,h,e))}catch(g){BR(h,g,e)}}):(e.value=n,e.state=1,cZ(e,!1))}catch(h){BR({done:!1},h,e)}}};qU&&(HU=(YS=function(e){ase(this,HU),v7(e),PR(j5,this);var n=C7(this);try{e(MR(ay,n),MR(BR,n))}catch(i){BR(n,i)}}).prototype,(j5=function(e){iZ(this,{type:KS,done:!1,notified:!1,parent:!1,reactions:new fse,rejection:!1,state:0,value:void 0})}).prototype=X$(HU,{then:function(e,n){var i=oZ(this),c=vM(lse(this,YS));return i.parent=!0,c.ok=!G5(e)||e,c.fail=G5(n)&&n,c.domain=GU?T7.domain:void 0,0==i.state?i.reactions.add(c):y7(function(){nd(c,i)}),c.promise},catch:function(e){return this.then(void 0,e)}}),H_=function(){var e=new j5,n=C7(e);this.promise=e,this.resolve=MR(ay,n),this.reject=MR(BR,n)},nZ.f=vM=function(e){return e===YS||e===Q5?new H_(e):yM(e)}),kN({global:!0,wrap:!0,forced:qU},{Promise:YS}),$$(YS,KS,!1,!0),function(e){var n=C$(e);S$&&n&&!n[UU]&&(0,Qoe.f)(n,UU,{configurable:!0,get:function(){return this}})}(KS),Q5=z$(KS),kN({target:KS,stat:!0,forced:qU},{reject:function(e){var n=vM(this);return PR(n.reject,void 0,e),n.promise}}),kN({target:KS,stat:!0,forced:!0},{resolve:function(e){return dse(this===Q5?YS:this,e)}}),kN({target:KS,stat:!0,forced:aZ},{all:function(e){var n=this,i=vM(n),c=i.resolve,h=i.reject,g=_7(function(){var v=v7(n.resolve),m=[],C=0,y=1;eZ(e,function(N){var k=C++,U=!1;y++,PR(v,n,N).then(function(V){U||(U=!0,m[k]=V,--y||c(m))},h)}),--y||c(m)});return g.error&&h(g.value),i.promise},race:function(e){var n=this,i=vM(n),c=i.reject,h=_7(function(){var g=v7(n.resolve);eZ(e,function(v){PR(g,n,v).then(i.resolve,c)})});return h.error&&c(h.value),i.promise}});var ofe=_E,lZ=_b,yse=EM,_se=NN,dZ=RU;Ly({target:"Promise",stat:!0},{allSettled:function(e){var n=this,i=yse.f(n),c=i.resolve,h=i.reject,g=_se(function(){var v=lZ(n.resolve),m=[],C=0,y=1;dZ(e,function(N){var k=C++,U=!1;y++,ofe(v,n,N).then(function(V){U||(U=!0,m[k]={status:"fulfilled",value:V},--y||c(m))},function(V){U||(U=!0,m[k]={status:"rejected",reason:V},--y||c(m))})}),--y||c(m)});return g.error&&h(g.value),i.promise}});var hZ=_b,fZ=Oy,pZ=_E,Ise=EM,bse=NN,Cse=RU,_M="No one promise resolved";Ly({target:"Promise",stat:!0},{any:function(e){var n=this,i=fZ("AggregateError"),c=Ise.f(n),h=c.resolve,g=c.reject,v=bse(function(){var m=hZ(n.resolve),C=[],y=0,N=1,k=!1;Cse(e,function(U){var V=y++,K=!1;N++,pZ(m,n,U).then(function($){K||k||(k=!0,h($))},function($){K||k||(K=!0,C[V]=$,--N||g(new i(C,_M)))})}),--N||g(new i(C,_M))});return v.error&&g(v.value),c.promise}});var gZ=I$,Sse=Oy,Tse=X0,H5=l7,w7=E7;Ly({target:"Promise",proto:!0,real:!0,forced:!!gZ&&zg(function(){gZ.prototype.finally.call({then:function(){}},function(){})})},{finally:function(e){var n=H5(this,Sse("Promise")),i=Tse(e);return this.then(i?function(c){return w7(n,e()).then(function(){return c})}:e,i?function(c){return w7(n,e()).then(function(){throw c})}:e)}});var q5=O0,AZ=eU,wse=u2,KU=_1,YU=q5("".charAt),mZ=q5("".charCodeAt),Rse=q5("".slice),EZ=function(e){return function(n,i){var c,h,g=wse(KU(n)),v=AZ(i),m=g.length;return v<0||v>=m?e?"":void 0:(c=mZ(g,v))<55296||c>56319||v+1===m||(h=mZ(g,v+1))<56320||h>57343?e?YU(g,v):c:e?Rse(g,v,v+2):h-56320+(c-55296<<10)+65536}},R7={codeAt:EZ(!1),charAt:EZ(!0)},vZ=R7.charAt,yZ=u2,IZ=T5,bZ="String Iterator",Ose=oM.set,sfe=oM.getterFor(bZ);IZ(String,"String",function(e){Ose(this,{type:bZ,string:yZ(e),index:0})},function(){var e,n=sfe(this),i=n.string,c=n.index;return c>=i.length?{value:void 0,done:!0}:(e=vZ(i,c),n.index+=e.length,{value:e,done:!1})});var afe=aS.Promise,ufe=_h,CZ=qS,W5=hS,SZ=tM,TZ=$0("toStringTag");for(var K5 in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var IM=ufe[K5],O7=IM&&IM.prototype;O7&&CZ(O7)!==TZ&&W5(O7,TZ,K5),SZ[K5]=SZ.Array}var wZ=afe,_l=wZ,Y5="process"==ic(R.process),Dse=Y5,RZ=TS,Nse=R.TypeError,JU=function(e,n){if(RZ(n,e))return e;throw Nse("Incorrect invocation")},bM=F,OZ=Fy,Lse=Sx,D7=i5,J5=Error.prototype.toString,DZ=P(function(){if(bM){var e=Lse(Object.defineProperty({},"name",{get:function(){return this===e}}));if("true"!==J5.call(e))return!0}return"2: 1"!==J5.call({message:1,name:2})||"Error"!==J5.call({})})?function(){var e=OZ(this),n=D7(e.name,"Error"),i=D7(e.message);return n?i?n+": "+i:n:i}:J5,NZ={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}},N7=C_,zU=eb,z5=P,xse=Sx,k7=rl,XU=Xy.f,L7=q6.f,Mse=db.exports,$U=by,Bse=JU,Use=Fy,kZ=DZ,LZ=i5,CM=NZ,Fse=uX,PZ=u_,P7=F,LN="DOMException",X5=zU("Error"),UR=zU(LN)||function(){try{(new(zU("MessageChannel")||function(e){try{if(Dse)return Function('return require("'+e+'")')()}catch(n){}}("worker_threads").MessageChannel)).port1.postMessage(new WeakMap)}catch(e){if("DATA_CLONE_ERR"==e.name&&25==e.code)return e.constructor}}(),BZ=X5.prototype,jse=PZ.set,Qse=PZ.getterFor(LN),x7="stack"in X5(LN),$5=function(e){return $U(CM,e)&&CM[e].m?CM[e].c:0},Z5=function(){Bse(this,ZU);var e=arguments.length,n=LZ(e<1?void 0:arguments[0]),i=LZ(e<2?void 0:arguments[1],"Error"),c=$5(i);if(jse(this,{type:LN,name:i,message:n,code:c}),P7||(this.name=i,this.message=n,this.code=c),x7){var h=X5(n);h.name=LN,XU(this,"stack",k7(1,Fse(h.stack,1)))}},ZU=Z5.prototype=xse(BZ),UZ=function(e){return{enumerable:!0,configurable:!0,get:e}},M7=function(e){return UZ(function(){return Qse(this)[e]})};P7&&L7(ZU,{name:M7("name"),message:M7("message"),code:M7("code")}),XU(ZU,"constructor",k7(1,Z5));var PN=z5(function(){return!(new UR instanceof X5)}),Vse=PN||z5(function(){return BZ.toString!==kZ||"2: 1"!==String(new UR(1,2))}),Gse=PN||z5(function(){return 25!==new UR(1,"DataCloneError").code});N7({global:!0,forced:PN},{DOMException:PN?Z5:UR});var e4=zU(LN),t4=e4.prototype;for(var FZ in Vse&&UR===e4&&Mse(t4,"toString",kZ),Gse&&P7&&UR===e4&&XU(t4,"code",UZ(function(){return $5(Use(this).name)})),CM)if($U(CM,FZ)){var B7=CM[FZ],U7=B7.s,jZ=k7(6,B7.c);$U(e4,U7)||XU(e4,U7,jZ),$U(t4,U7)||XU(t4,U7,jZ)}var n4=C_,F7=eb,p2=rl,HT=Xy.f,QZ=by,lfe=JU,VZ=r5,r4=i5,j7=NZ,Hse=uX,e8="DOMException",i4=F7("Error"),t8=F7(e8),o4=function(){lfe(this,n8);var e=arguments.length,n=r4(e<1?void 0:arguments[0]),i=r4(e<2?void 0:arguments[1],"Error"),c=new t8(n,i),h=i4(n);return h.name=e8,HT(c,"stack",p2(1,Hse(h.stack,1))),VZ(c,this,o4),c},n8=o4.prototype=t8.prototype,s4="stack"in i4(e8),qse="stack"in new t8(1,2),Q7=s4&&!qse;n4({global:!0,forced:Q7},{DOMException:Q7?o4:t8});var SM=F7(e8),GZ=SM.prototype;if(GZ.constructor!==SM)for(var HZ in HT(GZ,"constructor",p2(1,SM)),j7)if(QZ(j7,HZ)){var r8=j7[HZ],qZ=r8.s;QZ(SM,qZ)||HT(SM,qZ,p2(6,r8.c))}var Wse="DOMException";uU(eb(Wse),Wse);var WZ=Ha,KZ=db.exports,FR=Ox,V7=P,xN=yc,dfe=__,YZ=xN("species"),G7=RegExp.prototype,JZ=Ha,zZ=iS,hfe=mN,XZ=Th,H7=JZ("".charAt),$Z=JZ("".charCodeAt),Kse=JZ("".slice),ZZ=function(e){return function(n,i){var c,h,g=hfe(XZ(n)),v=zZ(i),m=g.length;return v<0||v>=m?e?"":void 0:(c=$Z(g,v))<55296||c>56319||v+1===m||(h=$Z(g,v+1))<56320||h>57343?e?H7(g,v):c:e?Kse(g,v,v+2):h-56320+(c-55296<<10)+65536}},Yse=(ZZ(!1),ZZ(!0)),q7=Ha,Jse=ET,zse=Math.floor,W7=q7("".charAt),Xse=q7("".replace),K7=q7("".slice),a4=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,eee=/\$([$&'`]|\d{1,2})/g,Y7=xe,tee=Fy,nee=R0,ree=ic,$se=Ox,Zse=R.TypeError,eae=bR,iee=xe,i8=Ha,nae=P,c4=Fy,rae=R0,J7=iS,Kb=t0,TM=mN,z7=Th,jR=function(e,n,i){return n+(i?Yse(e,n).length:1)},iae=AT,oae=function(e,n,i,c,h,g){var v=i+e.length,m=c.length,C=eee;return void 0!==h&&(h=Jse(h),C=a4),Xse(g,C,function(y,N){var k;switch(W7(N,0)){case"$":return"$";case"&":return e;case"`":return K7(n,0,i);case"'":return K7(n,v);case"<":k=h[K7(N,1,-1)];break;default:var U=+N;if(0===U)return y;if(U>m){var V=zse(U/10);return 0===V?y:V<=m?void 0===c[V-1]?W7(N,1):c[V-1]+W7(N,1):y}k=c[U-1]}return void 0===k?"":k})},sae=function(e,n){var i=e.exec;if(nee(i)){var c=Y7(i,e,n);return null!==c&&tee(c),c}if("RegExp"===ree(e))return Y7($se,e,n);throw Zse("RegExp#exec called on incompatible receiver")},wM=yc("replace"),JS=Math.max,aae=Math.min,cae=i8([].concat),o8=i8([].push),X7=i8("".indexOf),s8=i8("".slice),oee="$0"==="a".replace(/./,"$0"),see=!!/./[wM]&&""===/./[wM]("a","$0");!function(e,n,i,c){var h=xN(e),g=!V7(function(){var y={};return y[h]=function(){return 7},7!=""[e](y)}),v=g&&!V7(function(){var y=!1,N=/a/;return"split"===e&&((N={}).constructor={},N.constructor[YZ]=function(){return N},N.flags="",N[h]=/./[h]),N.exec=function(){return y=!0,null},N[h](""),!y});if(!g||!v||i){var m=WZ(/./[h]),C=n(h,""[e],function(y,N,k,U,V){var K=WZ(y),$=N.exec;return $===FR||$===G7.exec?g&&!V?{done:!0,value:m(N,k,U)}:{done:!0,value:K(k,N,U)}:{done:!1}});KZ(String.prototype,e,C[0]),KZ(G7,h,C[1])}c&&dfe(G7[h],"sham",!0)}("replace",function(e,n,i){var c=see?"$":"$0";return[function(h,g){var v=z7(this),m=null==h?void 0:iae(h,wM);return m?iee(m,h,v,g):iee(n,TM(v),h,g)},function(h,g){var v=c4(this),m=TM(h);if("string"==typeof g&&-1===X7(g,c)&&-1===X7(g,"$<")){var C=i(n,v,m,g);if(C.done)return C.value}var y=rae(g);y||(g=TM(g));var N=v.global;if(N){var k=v.unicode;v.lastIndex=0}for(var U=[];;){var V=sae(v,m);if(null===V||(o8(U,V),!N))break;""===TM(V[0])&&(v.lastIndex=jR(m,Kb(v.lastIndex),k))}for(var K,$="",Z=0,ye=0;ye<U.length;ye++){for(var be=TM((V=U[ye])[0]),_s=JS(aae(J7(V.index),m.length),0),ua=[],ma=1;ma<V.length;ma++)o8(ua,void 0===(K=V[ma])?K:String(K));var pc=V.groups;if(y){var qa=cae([be],ua,_s,m);void 0!==pc&&o8(qa,pc);var Ua=TM(eae(g,void 0,qa))}else Ua=oae(be,m,_s,ua,pc,g);_s>=Z&&($+=s8(m,Z,_s)+Ua,Z=_s+be.length)}return $+s8(m,Z)}]},!!nae(function(){var e=/./;return e.exec=function(){var n=[];return n.groups={a:"7"},n},"7"!=="".replace(e,"$<a>")})||!oee||see);var uae=u0,ffe=ic,$7=yc("match"),Z7=eb,aee=Xy,_G=F,a8=yc("species"),c8=function(e){var n=Z7(e);_G&&n&&!n[a8]&&(0,aee.f)(n,a8,{configurable:!0,get:function(){return this}})},lae=F,_H=R,RM=Ha,cee=D3,eq=r5,OM=__,u8=Xy.f,tq=F1.f,MN=TS,nq=mN,uee=ZP,lee=Iz,dee=db.exports,hae=P,Jb=by,DM=u_.enforce,fae=c8,hee=YV,pae=zV,u4=yc("match"),QR=_H.RegExp,g2=QR.prototype,gae=_H.SyntaxError,fee=RM(uee),Aae=RM(g2.exec),l8=RM("".charAt),d8=RM("".replace),rq=RM("".indexOf),pee=RM("".slice),h8=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,VR=/a/g,gee=/a/g,Aee=new QR(VR)!==VR,mee=lee.MISSED_STICKY,Eee=lee.UNSUPPORTED_Y;if(cee("RegExp",lae&&(!Aee||mee||hee||pae||hae(function(){return gee[u4]=!1,QR(VR)!=VR||QR(gee)==gee||"/a/i"!=QR(VR,"i")})))){for(var GR=function(e,n){var i,c,h,g,v,m,C=MN(g2,this),y=function(e){var n;return uae(e)&&(void 0!==(n=e[$7])?!!n:"RegExp"==ffe(e))}(e),N=void 0===n,k=[],U=e;if(!C&&y&&N&&e.constructor===GR)return e;if((y||MN(g2,e))&&(e=e.source,N&&(n="flags"in U?U.flags:fee(U))),e=void 0===e?"":nq(e),n=void 0===n?"":nq(n),U=e,hee&&"dotAll"in VR&&(c=!!n&&rq(n,"s")>-1)&&(n=d8(n,/s/g,"")),i=n,mee&&"sticky"in VR&&(h=!!n&&rq(n,"y")>-1)&&Eee&&(n=d8(n,/y/g,"")),pae&&(e=(g=function(V){for(var K,$=V.length,Z=0,ye="",be=[],_s={},ua=!1,ma=!1,pc=0,qa="";Z<=$;Z++){if("\\"===(K=l8(V,Z)))K+=l8(V,++Z);else if("]"===K)ua=!1;else if(!ua)switch(!0){case"["===K:ua=!0;break;case"("===K:Aae(h8,pee(V,Z+1))&&(Z+=2,ma=!0),ye+=K,pc++;continue;case">"===K&&ma:if(""===qa||Jb(_s,qa))throw new gae("Invalid capture group name");_s[qa]=!0,be[be.length]=[qa,pc],ma=!1,qa="";continue}ma?qa+=K:ye+=K}return[ye,be]}(e))[0],k=g[1]),v=eq(QR(e,n),C?this:g2,GR),(c||h||k.length)&&(m=DM(v),c&&(m.dotAll=!0,m.raw=GR(function(V){for(var K,$=V.length,Z=0,ye="",be=!1;Z<=$;Z++)"\\"!==(K=l8(V,Z))?be||"."!==K?("["===K?be=!0:"]"===K&&(be=!1),ye+=K):ye+="[\\s\\S]":ye+=K+l8(V,++Z);return ye}(e),i)),h&&(m.sticky=!0),k.length&&(m.groups=k)),e!==U)try{OM(v,"source",""===U?"(?:)":U)}catch(V){}return v},mae=function(e){e in GR||u8(GR,e,{configurable:!0,get:function(){return QR[e]},set:function(n){QR[e]=n}})},p8=tq(QR),g8=0;p8.length>g8;)mae(p8[g8++]);g2.constructor=GR,GR.prototype=g2,dee(_H,"RegExp",GR)}fae("RegExp");var vee=ic,yae=u_.get,iq=RegExp.prototype,_ee=R.TypeError;F&&YV&&(0,Xy.f)(iq,"dotAll",{configurable:!0,get:function(){if(this!==iq){if("RegExp"===vee(this))return!!yae(this).dotAll;throw _ee("Incompatible receiver, RegExp required")}}});const Iee=GS;function bee(e,n){const i=e&&e.navigator;if(!i.mediaDevices)return;const c=function(v){if("object"!=typeof v||v.mandatory||v.optional)return v;const m={};return Object.keys(v).forEach(C=>{if("require"===C||"advanced"===C||"mediaSource"===C)return;const y="object"==typeof v[C]?v[C]:{ideal:v[C]};void 0!==y.exact&&"number"==typeof y.exact&&(y.min=y.max=y.exact);const N=function(k,U){return k?k+U.charAt(0).toUpperCase()+U.slice(1):"deviceId"===U?"sourceId":U};if(void 0!==y.ideal){m.optional=m.optional||[];let k={};"number"==typeof y.ideal?(k[N("min",C)]=y.ideal,m.optional.push(k),k={},k[N("max",C)]=y.ideal,m.optional.push(k)):(k[N("",C)]=y.ideal,m.optional.push(k))}void 0!==y.exact&&"number"!=typeof y.exact?(m.mandatory=m.mandatory||{},m.mandatory[N("",C)]=y.exact):["min","max"].forEach(k=>{void 0!==y[k]&&(m.mandatory=m.mandatory||{},m.mandatory[N(k,C)]=y[k])})}),v.advanced&&(m.optional=(m.optional||[]).concat(v.advanced)),m},h=function(v,m){if(n.version>=61)return m(v);if((v=JSON.parse(JSON.stringify(v)))&&"object"==typeof v.audio){const C=function(y,N,k){N in y&&!(k in y)&&(y[k]=y[N],delete y[N])};C((v=JSON.parse(JSON.stringify(v))).audio,"autoGainControl","googAutoGainControl"),C(v.audio,"noiseSuppression","googNoiseSuppression"),v.audio=c(v.audio)}if(v&&"object"==typeof v.video){let C=v.video.facingMode;C=C&&("object"==typeof C?C:{ideal:C});const y=n.version<66;if(C&&("user"===C.exact||"environment"===C.exact||"user"===C.ideal||"environment"===C.ideal)&&(!i.mediaDevices.getSupportedConstraints||!i.mediaDevices.getSupportedConstraints().facingMode||y)){let N;if(delete v.video.facingMode,"environment"===C.exact||"environment"===C.ideal?N=["back","rear"]:"user"!==C.exact&&"user"!==C.ideal||(N=["front"]),N)return i.mediaDevices.enumerateDevices().then(k=>{let U=(k=k.filter(V=>"videoinput"===V.kind)).find(V=>N.some(K=>V.label.toLowerCase().includes(K)));return!U&&k.length&&N.includes("back")&&(U=k[k.length-1]),U&&(v.video.deviceId=C.exact?{exact:U.deviceId}:{ideal:U.deviceId}),v.video=c(v.video),Iee("chrome: "+JSON.stringify(v)),m(v)})}v.video=c(v.video)}return Iee("chrome: "+JSON.stringify(v)),m(v)},g=function(v){return n.version>=64?v:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[v.name]||v.name,message:v.message,constraint:v.constraint||v.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(i.getUserMedia=function(v,m,C){h(v,y=>{i.webkitGetUserMedia(y,m,N=>{C&&C(g(N))})})}.bind(i),i.mediaDevices.getUserMedia){const v=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(m){return h(m,C=>v(C).then(y=>{if(C.audio&&!y.getAudioTracks().length||C.video&&!y.getVideoTracks().length)throw y.getTracks().forEach(N=>{N.stop()}),new DOMException("","NotFoundError");return y},y=>_l.reject(g(y))))}}}function oq(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Cee(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(i){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=i)},enumerable:!0,configurable:!0});const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=i=>{i.stream.addEventListener("addtrack",c=>{let h;h=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(v=>v.track&&v.track.id===c.track.id):{track:c.track};const g=new Event("track");g.track=c.track,g.receiver=h,g.transceiver={receiver:h},g.streams=[i.stream],this.dispatchEvent(g)}),i.stream.getTracks().forEach(c=>{let h;h=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(v=>v.track&&v.track.id===c.id):{track:c};const g=new Event("track");g.track=c,g.receiver=h,g.transceiver={receiver:h},g.streams=[i.stream],this.dispatchEvent(g)})},this.addEventListener("addstream",this._ontrackpoly)),n.apply(this,arguments)}}else IN(e,"track",n=>(n.transceiver||Object.defineProperty(n,"transceiver",{value:{receiver:n.receiver}}),n))}function sq(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const n=function(h,g){return{track:g,get dtmf(){return void 0===this._dtmf&&(this._dtmf="audio"===g.kind?h.createDTMFSender(g):null),this._dtmf},_pc:h}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const h=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(v,m){let C=h.apply(this,arguments);return C||(C=n(this,v),this._senders.push(C)),C};const g=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(v){g.apply(this,arguments);const m=this._senders.indexOf(v);-1!==m&&this._senders.splice(m,1)}}const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(h){this._senders=this._senders||[],i.apply(this,[h]),h.getTracks().forEach(g=>{this._senders.push(n(this,g))})};const c=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(h){this._senders=this._senders||[],c.apply(this,[h]),h.getTracks().forEach(g=>{const v=this._senders.find(m=>m.track===g);v&&this._senders.splice(this._senders.indexOf(v),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const i=n.apply(this,[]);return i.forEach(c=>c._pc=this),i},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&(this._dtmf="audio"===this.track.kind?this._pc.createDTMFSender(this.track):null),this._dtmf}})}}function aq(e){if(!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[i,c,h]=arguments;if(arguments.length>0&&"function"==typeof i)return n.apply(this,arguments);if(0===n.length&&(0===arguments.length||"function"!=typeof i))return n.apply(this,[]);const g=function(m){const C={};return m.result().forEach(y=>{const N={id:y.id,timestamp:y.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[y.type]||y.type};y.names().forEach(k=>{N[k]=y.stat(k)}),C[N.id]=N}),C},v=function(m){return new Map(Object.keys(m).map(C=>[C,m[C]]))};return arguments.length>=2?n.apply(this,[function(C){c(v(g(C)))},i]):new _l((m,C)=>{n.apply(this,[function(y){m(v(g(y)))},C])}).then(c,h)}}function cq(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const i=e.RTCPeerConnection.prototype.getSenders;i&&(e.RTCPeerConnection.prototype.getSenders=function(){const h=i.apply(this,[]);return h.forEach(g=>g._pc=this),h});const c=e.RTCPeerConnection.prototype.addTrack;c&&(e.RTCPeerConnection.prototype.addTrack=function(){const h=c.apply(this,arguments);return h._pc=this,h}),e.RTCRtpSender.prototype.getStats=function(){const h=this;return this._pc.getStats().then(g=>_9(g,h.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const i=e.RTCPeerConnection.prototype.getReceivers;i&&(e.RTCPeerConnection.prototype.getReceivers=function(){const c=i.apply(this,[]);return c.forEach(h=>h._pc=this),c}),IN(e,"track",c=>(c.receiver._pc=c.srcElement,c)),e.RTCRtpReceiver.prototype.getStats=function(){const c=this;return this._pc.getStats().then(h=>_9(h,c.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const i=arguments[0];let c,h,g;return this.getSenders().forEach(v=>{v.track===i&&(c?g=!0:c=v)}),this.getReceivers().forEach(v=>(v.track===i&&(h?g=!0:h=v),v.track===i)),g||c&&h?_l.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):c?c.getStats():h?h.getStats():_l.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return n.apply(this,arguments)}}function uq(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(g=>this._shimmedLocalStreams[g][0])};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(g,v){if(!v)return n.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const m=n.apply(this,arguments);return this._shimmedLocalStreams[v.id]?-1===this._shimmedLocalStreams[v.id].indexOf(m)&&this._shimmedLocalStreams[v.id].push(m):this._shimmedLocalStreams[v.id]=[v,m],m};const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(g){this._shimmedLocalStreams=this._shimmedLocalStreams||{},g.getTracks().forEach(C=>{if(this.getSenders().find(y=>y.track===C))throw new DOMException("Track already exists.","InvalidAccessError")});const v=this.getSenders();i.apply(this,arguments);const m=this.getSenders().filter(C=>-1===v.indexOf(C));this._shimmedLocalStreams[g.id]=[g].concat(m)};const c=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(g){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[g.id],c.apply(this,arguments)};const h=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(g){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},g&&Object.keys(this._shimmedLocalStreams).forEach(v=>{const m=this._shimmedLocalStreams[v].indexOf(g);-1!==m&&this._shimmedLocalStreams[v].splice(m,1),1===this._shimmedLocalStreams[v].length&&delete this._shimmedLocalStreams[v]}),h.apply(this,arguments)}}function See(e,n){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&n.version>=65)return uq(e);const i=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const y=i.apply(this);return this._reverseStreams=this._reverseStreams||{},y.map(N=>this._reverseStreams[N.id])};const c=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(y){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},y.getTracks().forEach(N=>{if(this.getSenders().find(k=>k.track===N))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[y.id]){const N=new e.MediaStream(y.getTracks());this._streams[y.id]=N,this._reverseStreams[N.id]=y,y=N}c.apply(this,[y])};const h=e.RTCPeerConnection.prototype.removeStream;function g(y,N){let k=N.sdp;return Object.keys(y._reverseStreams||[]).forEach(U=>{const V=y._reverseStreams[U];k=k.replace(new RegExp(y._streams[V.id].id,"g"),V.id)}),new RTCSessionDescription({type:N.type,sdp:k})}function v(y,N){let k=N.sdp;return Object.keys(y._reverseStreams||[]).forEach(U=>{const V=y._reverseStreams[U],K=y._streams[V.id];k=k.replace(new RegExp(V.id,"g"),K.id)}),new RTCSessionDescription({type:N.type,sdp:k})}e.RTCPeerConnection.prototype.removeStream=function(y){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},h.apply(this,[this._streams[y.id]||y]),delete this._reverseStreams[this._streams[y.id]?this._streams[y.id].id:y.id],delete this._streams[y.id]},e.RTCPeerConnection.prototype.addTrack=function(y,N){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const k=[].slice.call(arguments,1);if(1!==k.length||!k[0].getTracks().find(K=>K===y))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(K=>K.track===y))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const V=this._streams[N.id];if(V)V.addTrack(y),_l.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const K=new e.MediaStream([y]);this._streams[N.id]=K,this._reverseStreams[K.id]=N,this.addStream(K)}return this.getSenders().find(K=>K.track===y)},["createOffer","createAnswer"].forEach(function(y){const N=e.RTCPeerConnection.prototype[y],k={[y](){const U=arguments;return arguments.length&&"function"==typeof arguments[0]?N.apply(this,[V=>{const K=g(this,V);U[0].apply(null,[K])},V=>{U[1]&&U[1].apply(null,V)},arguments[2]]):N.apply(this,arguments).then(V=>g(this,V))}};e.RTCPeerConnection.prototype[y]=k[y]});const m=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=v(this,arguments[0]),m.apply(this,arguments)):m.apply(this,arguments)};const C=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const y=C.get.apply(this);return""===y.type?y:g(this,y)}}),e.RTCPeerConnection.prototype.removeTrack=function(y){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!y._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(y._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let N;this._streams=this._streams||{},Object.keys(this._streams).forEach(k=>{this._streams[k].getTracks().find(U=>y.track===U)&&(N=this._streams[k])}),N&&(1===N.getTracks().length?this.removeStream(this._reverseStreams[N.id]):N.removeTrack(y.track),this.dispatchEvent(new Event("negotiationneeded")))}}function lq(e,n){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&n.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const c=e.RTCPeerConnection.prototype[i],h={[i](){return arguments[0]=new("addIceCandidate"===i?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),c.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=h[i]})}function _ae(e,n){IN(e,"negotiationneeded",i=>{const c=i.target;if(!(n.version<72||c.getConfiguration&&"plan-b"===c.getConfiguration().sdpSemantics)||"stable"===c.signalingState)return i})}var dq=Object.freeze({__proto__:null,shimMediaStream:oq,shimOnTrack:Cee,shimGetSendersWithDtmf:sq,shimGetStats:aq,shimSenderReceiverGetStats:cq,shimAddTrackRemoveTrackWithNative:uq,shimAddTrackRemoveTrack:See,shimPeerConnection:lq,fixNegotiationNeeded:_ae,shimGetUserMedia:bee,shimGetDisplayMedia:function(e,n){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof n?e.navigator.mediaDevices.getDisplayMedia=function(i){return n(i).then(c=>{const h=i.video&&i.video.width,g=i.video&&i.video.height;return i.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:c,maxFrameRate:i.video&&i.video.frameRate||3}},h&&(i.video.mandatory.maxWidth=h),g&&(i.video.mandatory.maxHeight=g),e.navigator.mediaDevices.getUserMedia(i)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}}),Iae={exports:{}};!function(e){var n={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};n.localCName=n.generateIdentifier(),n.splitLines=function(i){return i.trim().split("\n").map(function(c){return c.trim()})},n.splitSections=function(i){return i.split("\nm=").map(function(c,h){return(h>0?"m="+c:c).trim()+"\r\n"})},n.getDescription=function(i){var c=n.splitSections(i);return c&&c[0]},n.getMediaSections=function(i){var c=n.splitSections(i);return c.shift(),c},n.matchPrefix=function(i,c){return n.splitLines(i).filter(function(h){return 0===h.indexOf(c)})},n.parseCandidate=function(i){for(var c,h={foundation:(c=0===i.indexOf("a=candidate:")?i.substring(12).split(" "):i.substring(10).split(" "))[0],component:parseInt(c[1],10),protocol:c[2].toLowerCase(),priority:parseInt(c[3],10),ip:c[4],address:c[4],port:parseInt(c[5],10),type:c[7]},g=8;g<c.length;g+=2)switch(c[g]){case"raddr":h.relatedAddress=c[g+1];break;case"rport":h.relatedPort=parseInt(c[g+1],10);break;case"tcptype":h.tcpType=c[g+1];break;case"ufrag":h.ufrag=c[g+1],h.usernameFragment=c[g+1];break;default:h[c[g]]=c[g+1]}return h},n.writeCandidate=function(i){var c=[];c.push(i.foundation),c.push(i.component),c.push(i.protocol.toUpperCase()),c.push(i.priority),c.push(i.address||i.ip),c.push(i.port);var h=i.type;return c.push("typ"),c.push(h),"host"!==h&&i.relatedAddress&&i.relatedPort&&(c.push("raddr"),c.push(i.relatedAddress),c.push("rport"),c.push(i.relatedPort)),i.tcpType&&"tcp"===i.protocol.toLowerCase()&&(c.push("tcptype"),c.push(i.tcpType)),(i.usernameFragment||i.ufrag)&&(c.push("ufrag"),c.push(i.usernameFragment||i.ufrag)),"candidate:"+c.join(" ")},n.parseIceOptions=function(i){return i.substr(14).split(" ")},n.parseRtpMap=function(i){var c=i.substr(9).split(" "),h={payloadType:parseInt(c.shift(),10)};return c=c[0].split("/"),h.name=c[0],h.clockRate=parseInt(c[1],10),h.channels=3===c.length?parseInt(c[2],10):1,h.numChannels=h.channels,h},n.writeRtpMap=function(i){var c=i.payloadType;void 0!==i.preferredPayloadType&&(c=i.preferredPayloadType);var h=i.channels||i.numChannels||1;return"a=rtpmap:"+c+" "+i.name+"/"+i.clockRate+(1!==h?"/"+h:"")+"\r\n"},n.parseExtmap=function(i){var c=i.substr(9).split(" ");return{id:parseInt(c[0],10),direction:c[0].indexOf("/")>0?c[0].split("/")[1]:"sendrecv",uri:c[1]}},n.writeExtmap=function(i){return"a=extmap:"+(i.id||i.preferredId)+(i.direction&&"sendrecv"!==i.direction?"/"+i.direction:"")+" "+i.uri+"\r\n"},n.parseFmtp=function(i){for(var c,h={},g=i.substr(i.indexOf(" ")+1).split(";"),v=0;v<g.length;v++)h[(c=g[v].trim().split("="))[0].trim()]=c[1];return h},n.writeFmtp=function(i){var c="",h=i.payloadType;if(void 0!==i.preferredPayloadType&&(h=i.preferredPayloadType),i.parameters&&Object.keys(i.parameters).length){var g=[];Object.keys(i.parameters).forEach(function(v){g.push(i.parameters[v]?v+"="+i.parameters[v]:v)}),c+="a=fmtp:"+h+" "+g.join(";")+"\r\n"}return c},n.parseRtcpFb=function(i){var c=i.substr(i.indexOf(" ")+1).split(" ");return{type:c.shift(),parameter:c.join(" ")}},n.writeRtcpFb=function(i){var c="",h=i.payloadType;return void 0!==i.preferredPayloadType&&(h=i.preferredPayloadType),i.rtcpFeedback&&i.rtcpFeedback.length&&i.rtcpFeedback.forEach(function(g){c+="a=rtcp-fb:"+h+" "+g.type+(g.parameter&&g.parameter.length?" "+g.parameter:"")+"\r\n"}),c},n.parseSsrcMedia=function(i){var c=i.indexOf(" "),h={ssrc:parseInt(i.substr(7,c-7),10)},g=i.indexOf(":",c);return g>-1?(h.attribute=i.substr(c+1,g-c-1),h.value=i.substr(g+1)):h.attribute=i.substr(c+1),h},n.parseSsrcGroup=function(i){var c=i.substr(13).split(" ");return{semantics:c.shift(),ssrcs:c.map(function(h){return parseInt(h,10)})}},n.getMid=function(i){var c=n.matchPrefix(i,"a=mid:")[0];if(c)return c.substr(6)},n.parseFingerprint=function(i){var c=i.substr(14).split(" ");return{algorithm:c[0].toLowerCase(),value:c[1]}},n.getDtlsParameters=function(i,c){return{role:"auto",fingerprints:n.matchPrefix(i+c,"a=fingerprint:").map(n.parseFingerprint)}},n.writeDtlsParameters=function(i,c){var h="a=setup:"+c+"\r\n";return i.fingerprints.forEach(function(g){h+="a=fingerprint:"+g.algorithm+" "+g.value+"\r\n"}),h},n.getIceParameters=function(i,c){var h=n.splitLines(i);return{usernameFragment:(h=h.concat(n.splitLines(c))).filter(function(g){return 0===g.indexOf("a=ice-ufrag:")})[0].substr(12),password:h.filter(function(g){return 0===g.indexOf("a=ice-pwd:")})[0].substr(10)}},n.writeIceParameters=function(i){return"a=ice-ufrag:"+i.usernameFragment+"\r\na=ice-pwd:"+i.password+"\r\n"},n.parseRtpParameters=function(i){for(var c={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},h=n.splitLines(i)[0].split(" "),g=3;g<h.length;g++){var v=h[g],m=n.matchPrefix(i,"a=rtpmap:"+v+" ")[0];if(m){var C=n.parseRtpMap(m),y=n.matchPrefix(i,"a=fmtp:"+v+" ");switch(C.parameters=y.length?n.parseFmtp(y[0]):{},C.rtcpFeedback=n.matchPrefix(i,"a=rtcp-fb:"+v+" ").map(n.parseRtcpFb),c.codecs.push(C),C.name.toUpperCase()){case"RED":case"ULPFEC":c.fecMechanisms.push(C.name.toUpperCase())}}}return n.matchPrefix(i,"a=extmap:").forEach(function(N){c.headerExtensions.push(n.parseExtmap(N))}),c},n.writeRtpDescription=function(i,c){var h="";h+="m="+i+" ",h+=c.codecs.length>0?"9":"0",h+=" UDP/TLS/RTP/SAVPF ",h+=c.codecs.map(function(v){return void 0!==v.preferredPayloadType?v.preferredPayloadType:v.payloadType}).join(" ")+"\r\n",h+="c=IN IP4 0.0.0.0\r\n",h+="a=rtcp:9 IN IP4 0.0.0.0\r\n",c.codecs.forEach(function(v){h+=n.writeRtpMap(v),h+=n.writeFmtp(v),h+=n.writeRtcpFb(v)});var g=0;return c.codecs.forEach(function(v){v.maxptime>g&&(g=v.maxptime)}),g>0&&(h+="a=maxptime:"+g+"\r\n"),h+="a=rtcp-mux\r\n",c.headerExtensions&&c.headerExtensions.forEach(function(v){h+=n.writeExtmap(v)}),h},n.parseRtpEncodingParameters=function(i){var c,h=[],g=n.parseRtpParameters(i),v=-1!==g.fecMechanisms.indexOf("RED"),m=-1!==g.fecMechanisms.indexOf("ULPFEC"),C=n.matchPrefix(i,"a=ssrc:").map(function(U){return n.parseSsrcMedia(U)}).filter(function(U){return"cname"===U.attribute}),y=C.length>0&&C[0].ssrc,N=n.matchPrefix(i,"a=ssrc-group:FID").map(function(U){return U.substr(17).split(" ").map(function(V){return parseInt(V,10)})});N.length>0&&N[0].length>1&&N[0][0]===y&&(c=N[0][1]),g.codecs.forEach(function(U){if("RTX"===U.name.toUpperCase()&&U.parameters.apt){var V={ssrc:y,codecPayloadType:parseInt(U.parameters.apt,10)};y&&c&&(V.rtx={ssrc:c}),h.push(V),v&&((V=JSON.parse(JSON.stringify(V))).fec={ssrc:y,mechanism:m?"red+ulpfec":"red"},h.push(V))}}),0===h.length&&y&&h.push({ssrc:y});var k=n.matchPrefix(i,"b=");return k.length&&(k=0===k[0].indexOf("b=TIAS:")?parseInt(k[0].substr(7),10):0===k[0].indexOf("b=AS:")?1e3*parseInt(k[0].substr(5),10)*.95-16e3:void 0,h.forEach(function(U){U.maxBitrate=k})),h},n.parseRtcpParameters=function(i){var c={},h=n.matchPrefix(i,"a=ssrc:").map(function(m){return n.parseSsrcMedia(m)}).filter(function(m){return"cname"===m.attribute})[0];h&&(c.cname=h.value,c.ssrc=h.ssrc);var g=n.matchPrefix(i,"a=rtcp-rsize");c.reducedSize=g.length>0,c.compound=0===g.length;var v=n.matchPrefix(i,"a=rtcp-mux");return c.mux=v.length>0,c},n.parseMsid=function(i){var c,h=n.matchPrefix(i,"a=msid:");if(1===h.length)return{stream:(c=h[0].substr(7).split(" "))[0],track:c[1]};var g=n.matchPrefix(i,"a=ssrc:").map(function(v){return n.parseSsrcMedia(v)}).filter(function(v){return"msid"===v.attribute});return g.length>0?{stream:(c=g[0].value.split(" "))[0],track:c[1]}:void 0},n.generateSessionId=function(){return Math.random().toString().substr(2,21)},n.writeSessionBoilerplate=function(i,c,h){var g=void 0!==c?c:2;return"v=0\r\no="+(h||"thisisadapterortc")+" "+(i||n.generateSessionId())+" "+g+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},n.writeMediaSection=function(i,c,h,g){var v=n.writeRtpDescription(i.kind,c);if(v+=n.writeIceParameters(i.iceGatherer.getLocalParameters()),v+=n.writeDtlsParameters(i.dtlsTransport.getLocalParameters(),"offer"===h?"actpass":"active"),v+="a=mid:"+i.mid+"\r\n",v+=i.direction?"a="+i.direction+"\r\n":i.rtpSender&&i.rtpReceiver?"a=sendrecv\r\n":i.rtpSender?"a=sendonly\r\n":i.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",i.rtpSender){var m="msid:"+g.id+" "+i.rtpSender.track.id+"\r\n";v+="a="+m,v+="a=ssrc:"+i.sendEncodingParameters[0].ssrc+" "+m,i.sendEncodingParameters[0].rtx&&(v+="a=ssrc:"+i.sendEncodingParameters[0].rtx.ssrc+" "+m,v+="a=ssrc-group:FID "+i.sendEncodingParameters[0].ssrc+" "+i.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return v+="a=ssrc:"+i.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",i.rtpSender&&i.sendEncodingParameters[0].rtx&&(v+="a=ssrc:"+i.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),v},n.getDirection=function(i,c){for(var h=n.splitLines(i),g=0;g<h.length;g++)switch(h[g]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return h[g].substr(2)}return c?n.getDirection(c):"sendrecv"},n.getKind=function(i){return n.splitLines(i)[0].split(" ")[0].substr(2)},n.isRejected=function(i){return"0"===i.split(" ",2)[1]},n.parseMLine=function(i){var c=n.splitLines(i)[0].substr(2).split(" ");return{kind:c[0],port:parseInt(c[1],10),protocol:c[2],fmt:c.slice(3).join(" ")}},n.parseOLine=function(i){var c=n.matchPrefix(i,"o=")[0].substr(2).split(" ");return{username:c[0],sessionId:c[1],sessionVersion:parseInt(c[2],10),netType:c[3],addressType:c[4],address:c[5]}},n.isValidSDP=function(i){if("string"!=typeof i||0===i.length)return!1;for(var c=n.splitLines(i),h=0;h<c.length;h++)if(c[h].length<2||"="!==c[h].charAt(1))return!1;return!0},e.exports=n}(Iae);var Jf=Iae.exports;function bae(e,n,i,c,h){var g=Jf.writeRtpDescription(e.kind,n);if(g+=Jf.writeIceParameters(e.iceGatherer.getLocalParameters()),g+=Jf.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===i?"actpass":h||"active"),g+="a=mid:"+e.mid+"\r\n",g+=e.rtpSender&&e.rtpReceiver?"a=sendrecv\r\n":e.rtpSender?"a=sendonly\r\n":e.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",e.rtpSender){var v=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=v;var m="msid:"+(c?c.id:"-")+" "+v+"\r\n";g+="a="+m,g+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+m,e.sendEncodingParameters[0].rtx&&(g+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+m,g+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return g+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+Jf.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(g+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+Jf.localCName+"\r\n"),g}function hq(e,n){var i={codecs:[],headerExtensions:[],fecMechanisms:[]},c=function(g,v){g=parseInt(g,10);for(var m=0;m<v.length;m++)if(v[m].payloadType===g||v[m].preferredPayloadType===g)return v[m]},h=function(g,v,m,C){var y=c(g.parameters.apt,m),N=c(v.parameters.apt,C);return y&&N&&y.name.toLowerCase()===N.name.toLowerCase()};return e.codecs.forEach(function(g){for(var v=0;v<n.codecs.length;v++){var m=n.codecs[v];if(g.name.toLowerCase()===m.name.toLowerCase()&&g.clockRate===m.clockRate){if("rtx"===g.name.toLowerCase()&&g.parameters&&m.parameters.apt&&!h(g,m,e.codecs,n.codecs))continue;(m=JSON.parse(JSON.stringify(m))).numChannels=Math.min(g.numChannels,m.numChannels),i.codecs.push(m),m.rtcpFeedback=m.rtcpFeedback.filter(function(C){for(var y=0;y<g.rtcpFeedback.length;y++)if(g.rtcpFeedback[y].type===C.type&&g.rtcpFeedback[y].parameter===C.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(g){for(var v=0;v<n.headerExtensions.length;v++){var m=n.headerExtensions[v];if(g.uri===m.uri){i.headerExtensions.push(m);break}}}),i}function Cae(e,n,i){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[n][e].indexOf(i)}function Tee(e,n){var i=e.getRemoteCandidates().find(function(c){return n.foundation===c.foundation&&n.ip===c.ip&&n.port===c.port&&n.priority===c.priority&&n.protocol===c.protocol&&n.type===c.type});return i||e.addRemoteCandidate(n),!i}function e1(e,n){var i=new Error(n);return i.name=e,i.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],i}function l4(e){const n=e&&e.navigator,i=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(c){return i(c).catch(h=>{return _l.reject({name:{PermissionDeniedError:"NotAllowedError"}[(g=h).name]||g.name,message:g.message,constraint:g.constraint,toString(){return this.name}});var g})}}function Sae(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function d4(e,n){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(c){return c}),e.RTCSessionDescription||(e.RTCSessionDescription=function(c){return c}),n.version<15025)){const c=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(h){c.set.call(this,h);const g=new Event("enabled");g.enabled=h,this.dispatchEvent(g)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const i=function(e,n){function i(v,m){m.addTrack(v),m.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:v}))}function c(v,m,C,y){var N=new Event("track");N.track=m,N.receiver=C,N.transceiver={receiver:C},N.streams=y,e.setTimeout(function(){v._dispatchEvent("track",N)})}var h=function(v){var N,k,U,m=this,C=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(N){m[N]=C[N].bind(C)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",v=JSON.parse(JSON.stringify(v||{})),this.usingBundle="max-bundle"===v.bundlePolicy,"negotiate"===v.rtcpMuxPolicy)throw e1("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(v.rtcpMuxPolicy||(v.rtcpMuxPolicy="require"),v.iceTransportPolicy){case"all":case"relay":break;default:v.iceTransportPolicy="all"}switch(v.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:v.bundlePolicy="balanced"}if(v.iceServers=(N=v.iceServers||[],k=n,U=!1,(N=JSON.parse(JSON.stringify(N))).filter(function(V){if(V&&(V.urls||V.url)){var K=V.urls||V.url;V.url&&!V.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var $="string"==typeof K;return $&&(K=[K]),K=K.filter(function(Z){return 0!==Z.indexOf("turn:")||-1===Z.indexOf("transport=udp")||-1!==Z.indexOf("turn:[")||U?0===Z.indexOf("stun:")&&k>=14393&&-1===Z.indexOf("?transport=udp"):(U=!0,!0)}),delete V.url,V.urls=$?K[0]:K,!!K.length}})),this._iceGatherers=[],v.iceCandidatePoolSize)for(var y=v.iceCandidatePoolSize;y>0;y--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:v.iceServers,gatherPolicy:v.iceTransportPolicy}));else v.iceCandidatePoolSize=0;this._config=v,this.transceivers=[],this._sdpSessionId=Jf.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(h.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(h.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),h.prototype.onicecandidate=null,h.prototype.onaddstream=null,h.prototype.ontrack=null,h.prototype.onremovestream=null,h.prototype.onsignalingstatechange=null,h.prototype.oniceconnectionstatechange=null,h.prototype.onconnectionstatechange=null,h.prototype.onicegatheringstatechange=null,h.prototype.onnegotiationneeded=null,h.prototype.ondatachannel=null,h.prototype._dispatchEvent=function(v,m){this._isClosed||(this.dispatchEvent(m),"function"==typeof this["on"+v]&&this["on"+v](m))},h.prototype._emitGatheringStateChange=function(){var v=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",v)},h.prototype.getConfiguration=function(){return this._config},h.prototype.getLocalStreams=function(){return this.localStreams},h.prototype.getRemoteStreams=function(){return this.remoteStreams},h.prototype._createTransceiver=function(v,m){var y={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:v,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&this.transceivers.length>0)y.iceTransport=this.transceivers[0].iceTransport,y.dtlsTransport=this.transceivers[0].dtlsTransport;else{var N=this._createIceAndDtlsTransports();y.iceTransport=N.iceTransport,y.dtlsTransport=N.dtlsTransport}return m||this.transceivers.push(y),y},h.prototype.addTrack=function(v,m){if(this._isClosed)throw e1("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var C;if(this.transceivers.find(function(N){return N.track===v}))throw e1("InvalidAccessError","Track already exists.");for(var y=0;y<this.transceivers.length;y++)this.transceivers[y].track||this.transceivers[y].kind!==v.kind||(C=this.transceivers[y]);return C||(C=this._createTransceiver(v.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(m)&&this.localStreams.push(m),C.track=v,C.stream=m,C.rtpSender=new e.RTCRtpSender(v,C.dtlsTransport),C.rtpSender},h.prototype.addStream=function(v){var m=this;if(n>=15025)v.getTracks().forEach(function(y){m.addTrack(y,v)});else{var C=v.clone();v.getTracks().forEach(function(y,N){var k=C.getTracks()[N];y.addEventListener("enabled",function(U){k.enabled=U.enabled})}),C.getTracks().forEach(function(y){m.addTrack(y,C)})}},h.prototype.removeTrack=function(v){if(this._isClosed)throw e1("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(v instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var m=this.transceivers.find(function(y){return y.rtpSender===v});if(!m)throw e1("InvalidAccessError","Sender was not created by this connection.");var C=m.stream;m.rtpSender.stop(),m.rtpSender=null,m.track=null,m.stream=null,-1===this.transceivers.map(function(y){return y.stream}).indexOf(C)&&this.localStreams.indexOf(C)>-1&&this.localStreams.splice(this.localStreams.indexOf(C),1),this._maybeFireNegotiationNeeded()},h.prototype.removeStream=function(v){var m=this;v.getTracks().forEach(function(C){var y=m.getSenders().find(function(N){return N.track===C});y&&m.removeTrack(y)})},h.prototype.getSenders=function(){return this.transceivers.filter(function(v){return!!v.rtpSender}).map(function(v){return v.rtpSender})},h.prototype.getReceivers=function(){return this.transceivers.filter(function(v){return!!v.rtpReceiver}).map(function(v){return v.rtpReceiver})},h.prototype._createIceGatherer=function(v,m){var C=this;if(m&&v>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var y=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(y,"state",{value:"new",writable:!0}),this.transceivers[v].bufferedCandidateEvents=[],this.transceivers[v].bufferCandidates=function(N){var k=!N.candidate||0===Object.keys(N.candidate).length;y.state=k?"completed":"gathering",null!==C.transceivers[v].bufferedCandidateEvents&&C.transceivers[v].bufferedCandidateEvents.push(N)},y.addEventListener("localcandidate",this.transceivers[v].bufferCandidates),y},h.prototype._gather=function(v,m){var C=this,y=this.transceivers[m].iceGatherer;if(!y.onlocalcandidate){var N=this.transceivers[m].bufferedCandidateEvents;this.transceivers[m].bufferedCandidateEvents=null,y.removeEventListener("localcandidate",this.transceivers[m].bufferCandidates),y.onlocalcandidate=function(k){if(!(C.usingBundle&&m>0)){var U=new Event("icecandidate");U.candidate={sdpMid:v,sdpMLineIndex:m};var V=k.candidate,K=!V||0===Object.keys(V).length;if(K)"new"!==y.state&&"gathering"!==y.state||(y.state="completed");else{"new"===y.state&&(y.state="gathering"),V.component=1,V.ufrag=y.getLocalParameters().usernameFragment;var $=Jf.writeCandidate(V);U.candidate=Object.assign(U.candidate,Jf.parseCandidate($)),U.candidate.candidate=$,U.candidate.toJSON=function(){return{candidate:U.candidate.candidate,sdpMid:U.candidate.sdpMid,sdpMLineIndex:U.candidate.sdpMLineIndex,usernameFragment:U.candidate.usernameFragment}}}var Z=Jf.getMediaSections(C._localDescription.sdp);Z[U.candidate.sdpMLineIndex]+=K?"a=end-of-candidates\r\n":"a="+U.candidate.candidate+"\r\n",C._localDescription.sdp=Jf.getDescription(C._localDescription.sdp)+Z.join("");var ye=C.transceivers.every(function(be){return be.iceGatherer&&"completed"===be.iceGatherer.state});"gathering"!==C.iceGatheringState&&(C.iceGatheringState="gathering",C._emitGatheringStateChange()),K||C._dispatchEvent("icecandidate",U),ye&&(C._dispatchEvent("icecandidate",new Event("icecandidate")),C.iceGatheringState="complete",C._emitGatheringStateChange())}},e.setTimeout(function(){N.forEach(function(k){y.onlocalcandidate(k)})},0)}},h.prototype._createIceAndDtlsTransports=function(){var v=this,m=new e.RTCIceTransport(null);m.onicestatechange=function(){v._updateIceConnectionState(),v._updateConnectionState()};var C=new e.RTCDtlsTransport(m);return C.ondtlsstatechange=function(){v._updateConnectionState()},C.onerror=function(){Object.defineProperty(C,"state",{value:"failed",writable:!0}),v._updateConnectionState()},{iceTransport:m,dtlsTransport:C}},h.prototype._disposeIceAndDtlsTransports=function(v){var m=this.transceivers[v].iceGatherer;m&&(delete m.onlocalcandidate,delete this.transceivers[v].iceGatherer);var C=this.transceivers[v].iceTransport;C&&(delete C.onicestatechange,delete this.transceivers[v].iceTransport);var y=this.transceivers[v].dtlsTransport;y&&(delete y.ondtlsstatechange,delete y.onerror,delete this.transceivers[v].dtlsTransport)},h.prototype._transceive=function(v,m,C){var y=hq(v.localCapabilities,v.remoteCapabilities);m&&v.rtpSender&&(y.encodings=v.sendEncodingParameters,y.rtcp={cname:Jf.localCName,compound:v.rtcpParameters.compound},v.recvEncodingParameters.length&&(y.rtcp.ssrc=v.recvEncodingParameters[0].ssrc),v.rtpSender.send(y)),C&&v.rtpReceiver&&y.codecs.length>0&&("video"===v.kind&&v.recvEncodingParameters&&n<15019&&v.recvEncodingParameters.forEach(function(N){delete N.rtx}),y.encodings=v.recvEncodingParameters.length?v.recvEncodingParameters:[{}],y.rtcp={compound:v.rtcpParameters.compound},v.rtcpParameters.cname&&(y.rtcp.cname=v.rtcpParameters.cname),v.sendEncodingParameters.length&&(y.rtcp.ssrc=v.sendEncodingParameters[0].ssrc),v.rtpReceiver.receive(y))},h.prototype.setLocalDescription=function(v){var m,C,y=this;if(-1===["offer","answer"].indexOf(v.type))return Promise.reject(e1("TypeError",'Unsupported type "'+v.type+'"'));if(!Cae("setLocalDescription",v.type,y.signalingState)||y._isClosed)return Promise.reject(e1("InvalidStateError","Can not set local "+v.type+" in state "+y.signalingState));if("offer"===v.type)m=Jf.splitSections(v.sdp),C=m.shift(),m.forEach(function(k,U){var V=Jf.parseRtpParameters(k);y.transceivers[U].localCapabilities=V}),y.transceivers.forEach(function(k,U){y._gather(k.mid,U)});else if("answer"===v.type){m=Jf.splitSections(y._remoteDescription.sdp),C=m.shift();var N=Jf.matchPrefix(C,"a=ice-lite").length>0;m.forEach(function(k,U){var V=y.transceivers[U],K=V.iceGatherer,$=V.iceTransport,Z=V.dtlsTransport,ye=V.localCapabilities,be=V.remoteCapabilities;if(!(Jf.isRejected(k)&&0===Jf.matchPrefix(k,"a=bundle-only").length||V.rejected)){var _s=Jf.getIceParameters(k,C),ua=Jf.getDtlsParameters(k,C);N&&(ua.role="server"),y.usingBundle&&0!==U||(y._gather(V.mid,U),"new"===$.state&&$.start(K,_s,N?"controlling":"controlled"),"new"===Z.state&&Z.start(ua));var ma=hq(ye,be);y._transceive(V,ma.codecs.length>0,!1)}})}return y._localDescription={type:v.type,sdp:v.sdp},y._updateSignalingState("offer"===v.type?"have-local-offer":"stable"),Promise.resolve()},h.prototype.setRemoteDescription=function(v){var m=this;if(-1===["offer","answer"].indexOf(v.type))return Promise.reject(e1("TypeError",'Unsupported type "'+v.type+'"'));if(!Cae("setRemoteDescription",v.type,m.signalingState)||m._isClosed)return Promise.reject(e1("InvalidStateError","Can not set remote "+v.type+" in state "+m.signalingState));var C={};m.remoteStreams.forEach(function($){C[$.id]=$});var y=[],N=Jf.splitSections(v.sdp),k=N.shift(),U=Jf.matchPrefix(k,"a=ice-lite").length>0,V=Jf.matchPrefix(k,"a=group:BUNDLE ").length>0;m.usingBundle=V;var K=Jf.matchPrefix(k,"a=ice-options:")[0];return m.canTrickleIceCandidates=!!K&&K.substr(14).split(" ").indexOf("trickle")>=0,N.forEach(function($,Z){var ye=Jf.splitLines($),be=Jf.getKind($),_s=Jf.isRejected($)&&0===Jf.matchPrefix($,"a=bundle-only").length,ua=ye[0].substr(2).split(" ")[2],ma=Jf.getDirection($,k),pc=Jf.parseMsid($),qa=Jf.getMid($)||Jf.generateIdentifier();if(_s||"application"===be&&("DTLS/SCTP"===ua||"UDP/DTLS/SCTP"===ua))m.transceivers[Z]={mid:qa,kind:be,protocol:ua,rejected:!0};else{var Ua,nl,Wc,El,Dl,Kl,sl,_a,Qa;!_s&&m.transceivers[Z]&&m.transceivers[Z].rejected&&(m.transceivers[Z]=m._createTransceiver(be,!0));var ca,Aa,Ya=Jf.parseRtpParameters($);_s||(ca=Jf.getIceParameters($,k),(Aa=Jf.getDtlsParameters($,k)).role="client"),sl=Jf.parseRtpEncodingParameters($);var Zc=Jf.parseRtcpParameters($),Ol=Jf.matchPrefix($,"a=end-of-candidates",k).length>0,_c=Jf.matchPrefix($,"a=candidate:").map(function(aa){return Jf.parseCandidate(aa)}).filter(function(aa){return 1===aa.component});if(("offer"===v.type||"answer"===v.type)&&!_s&&V&&Z>0&&m.transceivers[Z]&&(m._disposeIceAndDtlsTransports(Z),m.transceivers[Z].iceGatherer=m.transceivers[0].iceGatherer,m.transceivers[Z].iceTransport=m.transceivers[0].iceTransport,m.transceivers[Z].dtlsTransport=m.transceivers[0].dtlsTransport,m.transceivers[Z].rtpSender&&m.transceivers[Z].rtpSender.setTransport(m.transceivers[0].dtlsTransport),m.transceivers[Z].rtpReceiver&&m.transceivers[Z].rtpReceiver.setTransport(m.transceivers[0].dtlsTransport)),"offer"!==v.type||_s)"answer"===v.type&&!_s&&(nl=(Ua=m.transceivers[Z]).iceGatherer,Wc=Ua.iceTransport,El=Ua.dtlsTransport,Dl=Ua.rtpReceiver,Kl=Ua.sendEncodingParameters,_a=Ua.localCapabilities,m.transceivers[Z].recvEncodingParameters=sl,m.transceivers[Z].remoteCapabilities=Ya,m.transceivers[Z].rtcpParameters=Zc,_c.length&&"new"===Wc.state&&(!U&&!Ol||V&&0!==Z?_c.forEach(function(aa){Tee(Ua.iceTransport,aa)}):Wc.setRemoteCandidates(_c)),V&&0!==Z||("new"===Wc.state&&Wc.start(nl,ca,"controlling"),"new"===El.state&&El.start(Aa)),!hq(Ua.localCapabilities,Ua.remoteCapabilities).codecs.filter(function(aa){return"rtx"===aa.name.toLowerCase()}).length&&Ua.sendEncodingParameters[0].rtx&&delete Ua.sendEncodingParameters[0].rtx,m._transceive(Ua,"sendrecv"===ma||"recvonly"===ma,"sendrecv"===ma||"sendonly"===ma),!Dl||"sendrecv"!==ma&&"sendonly"!==ma?delete Ua.rtpReceiver:(Qa=Dl.track,pc?(C[pc.stream]||(C[pc.stream]=new e.MediaStream),i(Qa,C[pc.stream]),y.push([Qa,Dl,C[pc.stream]])):(C.default||(C.default=new e.MediaStream),i(Qa,C.default),y.push([Qa,Dl,C.default]))));else{(Ua=m.transceivers[Z]||m._createTransceiver(be)).mid=qa,Ua.iceGatherer||(Ua.iceGatherer=m._createIceGatherer(Z,V)),_c.length&&"new"===Ua.iceTransport.state&&(!Ol||V&&0!==Z?_c.forEach(function(aa){Tee(Ua.iceTransport,aa)}):Ua.iceTransport.setRemoteCandidates(_c)),_a=e.RTCRtpReceiver.getCapabilities(be),n<15019&&(_a.codecs=_a.codecs.filter(function(aa){return"rtx"!==aa.name})),Kl=Ua.sendEncodingParameters||[{ssrc:1001*(2*Z+2)}];var J,Ze=!1;"sendrecv"===ma||"sendonly"===ma?(Ze=!Ua.rtpReceiver,Dl=Ua.rtpReceiver||new e.RTCRtpReceiver(Ua.dtlsTransport,be),Ze&&(Qa=Dl.track,pc&&"-"===pc.stream||(pc?(C[pc.stream]||(C[pc.stream]=new e.MediaStream,Object.defineProperty(C[pc.stream],"id",{get:function(){return pc.stream}})),Object.defineProperty(Qa,"id",{get:function(){return pc.track}}),J=C[pc.stream]):(C.default||(C.default=new e.MediaStream),J=C.default)),J&&(i(Qa,J),Ua.associatedRemoteMediaStreams.push(J)),y.push([Qa,Dl,J]))):Ua.rtpReceiver&&Ua.rtpReceiver.track&&(Ua.associatedRemoteMediaStreams.forEach(function(aa){var vl,Oh,Xa=aa.getTracks().find(function(vl){return vl.id===Ua.rtpReceiver.track.id});Xa&&((Oh=aa).removeTrack(vl=Xa),Oh.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:vl})))}),Ua.associatedRemoteMediaStreams=[]),Ua.localCapabilities=_a,Ua.remoteCapabilities=Ya,Ua.rtpReceiver=Dl,Ua.rtcpParameters=Zc,Ua.sendEncodingParameters=Kl,Ua.recvEncodingParameters=sl,m._transceive(m.transceivers[Z],!1,Ze)}}}),void 0===m._dtlsRole&&(m._dtlsRole="offer"===v.type?"active":"passive"),m._remoteDescription={type:v.type,sdp:v.sdp},m._updateSignalingState("offer"===v.type?"have-remote-offer":"stable"),Object.keys(C).forEach(function($){var Z=C[$];if(Z.getTracks().length){if(-1===m.remoteStreams.indexOf(Z)){m.remoteStreams.push(Z);var ye=new Event("addstream");ye.stream=Z,e.setTimeout(function(){m._dispatchEvent("addstream",ye)})}y.forEach(function(be){Z.id===be[2].id&&c(m,be[0],be[1],[Z])})}}),y.forEach(function($){$[2]||c(m,$[0],$[1],[])}),e.setTimeout(function(){m&&m.transceivers&&m.transceivers.forEach(function($){$.iceTransport&&"new"===$.iceTransport.state&&$.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),$.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},h.prototype.close=function(){this.transceivers.forEach(function(v){v.iceTransport&&v.iceTransport.stop(),v.dtlsTransport&&v.dtlsTransport.stop(),v.rtpSender&&v.rtpSender.stop(),v.rtpReceiver&&v.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},h.prototype._updateSignalingState=function(v){this.signalingState=v;var m=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",m)},h.prototype._maybeFireNegotiationNeeded=function(){var v=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout(function(){if(v.needNegotiation){v.needNegotiation=!1;var m=new Event("negotiationneeded");v._dispatchEvent("negotiationneeded",m)}},0))},h.prototype._updateIceConnectionState=function(){var v,m={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(y){y.iceTransport&&!y.rejected&&m[y.iceTransport.state]++}),v="new",m.failed>0?v="failed":m.checking>0?v="checking":m.disconnected>0?v="disconnected":m.new>0?v="new":m.connected>0?v="connected":m.completed>0&&(v="completed"),v!==this.iceConnectionState){this.iceConnectionState=v;var C=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",C)}},h.prototype._updateConnectionState=function(){var v,m={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(y){y.iceTransport&&y.dtlsTransport&&!y.rejected&&(m[y.iceTransport.state]++,m[y.dtlsTransport.state]++)}),m.connected+=m.completed,v="new",m.failed>0?v="failed":m.connecting>0?v="connecting":m.disconnected>0?v="disconnected":m.new>0?v="new":m.connected>0&&(v="connected"),v!==this.connectionState){this.connectionState=v;var C=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",C)}},h.prototype.createOffer=function(){var v=this;if(v._isClosed)return Promise.reject(e1("InvalidStateError","Can not call createOffer after close"));var m=v.transceivers.filter(function(U){return"audio"===U.kind}).length,C=v.transceivers.filter(function(U){return"video"===U.kind}).length,y=arguments[0];if(y){if(y.mandatory||y.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==y.offerToReceiveAudio&&(m=!0===y.offerToReceiveAudio?1:!1===y.offerToReceiveAudio?0:y.offerToReceiveAudio),void 0!==y.offerToReceiveVideo&&(C=!0===y.offerToReceiveVideo?1:!1===y.offerToReceiveVideo?0:y.offerToReceiveVideo)}for(v.transceivers.forEach(function(U){"audio"===U.kind?--m<0&&(U.wantReceive=!1):"video"===U.kind&&--C<0&&(U.wantReceive=!1)});m>0||C>0;)m>0&&(v._createTransceiver("audio"),m--),C>0&&(v._createTransceiver("video"),C--);var N=Jf.writeSessionBoilerplate(v._sdpSessionId,v._sdpSessionVersion++);v.transceivers.forEach(function(U,V){var K=U.track,$=U.kind,Z=U.mid||Jf.generateIdentifier();U.mid=Z,U.iceGatherer||(U.iceGatherer=v._createIceGatherer(V,v.usingBundle));var ye=e.RTCRtpSender.getCapabilities($);n<15019&&(ye.codecs=ye.codecs.filter(function(_s){return"rtx"!==_s.name})),ye.codecs.forEach(function(_s){"H264"===_s.name&&void 0===_s.parameters["level-asymmetry-allowed"]&&(_s.parameters["level-asymmetry-allowed"]="1"),U.remoteCapabilities&&U.remoteCapabilities.codecs&&U.remoteCapabilities.codecs.forEach(function(ua){_s.name.toLowerCase()===ua.name.toLowerCase()&&_s.clockRate===ua.clockRate&&(_s.preferredPayloadType=ua.payloadType)})}),ye.headerExtensions.forEach(function(_s){(U.remoteCapabilities&&U.remoteCapabilities.headerExtensions||[]).forEach(function(ua){_s.uri===ua.uri&&(_s.id=ua.id)})});var be=U.sendEncodingParameters||[{ssrc:1001*(2*V+1)}];K&&n>=15019&&"video"===$&&!be[0].rtx&&(be[0].rtx={ssrc:be[0].ssrc+1}),U.wantReceive&&(U.rtpReceiver=new e.RTCRtpReceiver(U.dtlsTransport,$)),U.localCapabilities=ye,U.sendEncodingParameters=be}),"max-compat"!==v._config.bundlePolicy&&(N+="a=group:BUNDLE "+v.transceivers.map(function(U){return U.mid}).join(" ")+"\r\n"),N+="a=ice-options:trickle\r\n",v.transceivers.forEach(function(U,V){N+=bae(U,U.localCapabilities,"offer",U.stream,v._dtlsRole),N+="a=rtcp-rsize\r\n",!U.iceGatherer||"new"===v.iceGatheringState||0!==V&&v.usingBundle||(U.iceGatherer.getLocalCandidates().forEach(function(K){K.component=1,N+="a="+Jf.writeCandidate(K)+"\r\n"}),"completed"===U.iceGatherer.state&&(N+="a=end-of-candidates\r\n"))});var k=new e.RTCSessionDescription({type:"offer",sdp:N});return Promise.resolve(k)},h.prototype.createAnswer=function(){var v=this;if(v._isClosed)return Promise.reject(e1("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==v.signalingState&&"have-local-pranswer"!==v.signalingState)return Promise.reject(e1("InvalidStateError","Can not call createAnswer in signalingState "+v.signalingState));var m=Jf.writeSessionBoilerplate(v._sdpSessionId,v._sdpSessionVersion++);v.usingBundle&&(m+="a=group:BUNDLE "+v.transceivers.map(function(N){return N.mid}).join(" ")+"\r\n"),m+="a=ice-options:trickle\r\n";var C=Jf.getMediaSections(v._remoteDescription.sdp).length;v.transceivers.forEach(function(N,k){if(!(k+1>C)){if(N.rejected)return"application"===N.kind?m+="DTLS/SCTP"===N.protocol?"m=application 0 DTLS/SCTP 5000\r\n":"m=application 0 "+N.protocol+" webrtc-datachannel\r\n":"audio"===N.kind?m+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===N.kind&&(m+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(m+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+N.mid+"\r\n");var U;N.stream&&("audio"===N.kind?U=N.stream.getAudioTracks()[0]:"video"===N.kind&&(U=N.stream.getVideoTracks()[0]),U&&n>=15019&&"video"===N.kind&&!N.sendEncodingParameters[0].rtx&&(N.sendEncodingParameters[0].rtx={ssrc:N.sendEncodingParameters[0].ssrc+1}));var V=hq(N.localCapabilities,N.remoteCapabilities);!V.codecs.filter(function(K){return"rtx"===K.name.toLowerCase()}).length&&N.sendEncodingParameters[0].rtx&&delete N.sendEncodingParameters[0].rtx,m+=bae(N,V,"answer",N.stream,v._dtlsRole),N.rtcpParameters&&N.rtcpParameters.reducedSize&&(m+="a=rtcp-rsize\r\n")}});var y=new e.RTCSessionDescription({type:"answer",sdp:m});return Promise.resolve(y)},h.prototype.addIceCandidate=function(v){var m,C=this;return v&&void 0===v.sdpMLineIndex&&!v.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(y,N){if(!C._remoteDescription)return N(e1("InvalidStateError","Can not add ICE candidate without a remote description"));if(v&&""!==v.candidate){var k=v.sdpMLineIndex;if(v.sdpMid)for(var U=0;U<C.transceivers.length;U++)if(C.transceivers[U].mid===v.sdpMid){k=U;break}var V=C.transceivers[k];if(!V)return N(e1("OperationError","Can not add ICE candidate"));if(V.rejected)return y();var K=Object.keys(v.candidate).length>0?Jf.parseCandidate(v.candidate):{};if("tcp"===K.protocol&&(0===K.port||9===K.port)||K.component&&1!==K.component)return y();if((0===k||k>0&&V.iceTransport!==C.transceivers[0].iceTransport)&&!Tee(V.iceTransport,K))return N(e1("OperationError","Can not add ICE candidate"));var $=v.candidate.trim();0===$.indexOf("a=")&&($=$.substr(2)),(m=Jf.getMediaSections(C._remoteDescription.sdp))[k]+="a="+(K.type?$:"end-of-candidates")+"\r\n",C._remoteDescription.sdp=Jf.getDescription(C._remoteDescription.sdp)+m.join("")}else for(var Z=0;Z<C.transceivers.length&&(C.transceivers[Z].rejected||(C.transceivers[Z].iceTransport.addRemoteCandidate({}),(m=Jf.getMediaSections(C._remoteDescription.sdp))[Z]+="a=end-of-candidates\r\n",C._remoteDescription.sdp=Jf.getDescription(C._remoteDescription.sdp)+m.join(""),!C.usingBundle));Z++);y()})},h.prototype.getStats=function(v){if(v&&v instanceof e.MediaStreamTrack){var m=null;if(this.transceivers.forEach(function(y){y.rtpSender&&y.rtpSender.track===v?m=y.rtpSender:y.rtpReceiver&&y.rtpReceiver.track===v&&(m=y.rtpReceiver)}),!m)throw e1("InvalidAccessError","Invalid selector.");return m.getStats()}var C=[];return this.transceivers.forEach(function(y){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(N){y[N]&&C.push(y[N].getStats())})}),Promise.all(C).then(function(y){var N=new Map;return y.forEach(function(k){k.forEach(function(U){N.set(U.id,U)})}),N})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(v){var m=e[v];if(m&&m.prototype&&m.prototype.getStats){var C=m.prototype.getStats;m.prototype.getStats=function(){return C.apply(this).then(function(y){var N=new Map;return Object.keys(y).forEach(function(k){var U;y[k].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(U=y[k]).type]||U.type,N.set(k,y[k])}),N})}}});var g=["createOffer","createAnswer"];return g.forEach(function(v){var m=h.prototype[v];h.prototype[v]=function(){var C=arguments;return"function"==typeof C[0]||"function"==typeof C[1]?m.apply(this,[arguments[2]]).then(function(y){"function"==typeof C[0]&&C[0].apply(null,[y])},function(y){"function"==typeof C[1]&&C[1].apply(null,[y])}):m.apply(this,arguments)}}),(g=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(v){var m=h.prototype[v];h.prototype[v]=function(){var C=arguments;return"function"==typeof C[1]||"function"==typeof C[2]?m.apply(this,arguments).then(function(){"function"==typeof C[1]&&C[1].apply(null)},function(y){"function"==typeof C[2]&&C[2].apply(null,[y])}):m.apply(this,arguments)}}),["getStats"].forEach(function(v){var m=h.prototype[v];h.prototype[v]=function(){var C=arguments;return"function"==typeof C[1]?m.apply(this,arguments).then(function(){"function"==typeof C[1]&&C[1].apply(null)}):m.apply(this,arguments)}}),h}(e,n.version);e.RTCPeerConnection=function(c){return c&&c.iceServers&&(c.iceServers=function(h,g){let v=!1;return(h=JSON.parse(JSON.stringify(h))).filter(m=>{if(m&&(m.urls||m.url)){let C=m.urls||m.url;m.url&&!m.urls&&Qx("RTCIceServer.url","RTCIceServer.urls");const y="string"==typeof C;return y&&(C=[C]),C=C.filter(N=>{if(0===N.indexOf("stun:"))return!1;const k=N.startsWith("turn")&&!N.startsWith("turn:[")&&N.includes("transport=udp");return k&&!v?(v=!0,!0):k&&!v}),delete m.url,m.urls=y?C[0]:C,!!C.length}})}(c.iceServers),GS("ICE servers after filtering:",c.iceServers)),new i(c)},e.RTCPeerConnection.prototype=i.prototype}function A8(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}var NM=Object.freeze({__proto__:null,shimPeerConnection:d4,shimReplaceTrack:A8,shimGetUserMedia:l4,shimGetDisplayMedia:Sae}),fq=R.Promise,Afe=db.exports,m8=function(e,n,i){for(var c in n)Afe(e,c,n[c],i);return e},wee=U2,pq=G,Ree=Ha(Ha.bind),E8=function(e,n){return wee(e),void 0===n?e:pq?Ree(e,n):function(){return e.apply(n,arguments)}},Tae=yN,wae=yc("iterator"),A2=Array.prototype,Oee=function(e){return void 0!==e&&(Tae.Array===e||A2[wae]===e)},mfe=n_,Rae=AT,Efe=yN,Oae=yc("iterator"),v8=function(e){if(null!=e)return Rae(e,Oae)||Rae(e,"@@iterator")||Efe[mfe(e)]},Dae=xe,vfe=U2,Nae=Fy,gq=NL,kae=v8,k_=R.TypeError,Dee=function(e,n){var i=arguments.length<2?kae(e):n;if(vfe(i))return Nae(Dae(i,e));throw k_(gq(e)+" is not iterable")},mq=xe,Nee=Fy,Lae=AT,vq=E8,kee=xe,Lee=Fy,Pae=NL,_q=Oee,xae=l0,Pee=TS,Mae=Dee,bq=v8,m2=function(e,n,i){var c,h;Nee(e);try{if(!(c=Lae(e,"return"))){if("throw"===n)throw i;return i}c=mq(c,e)}catch(g){h=!0,c=g}if("throw"===n)throw i;if(h)throw c;return Nee(c),i},xee=R.TypeError,h4=function(e,n){this.stopped=e,this.result=n},Mee=h4.prototype,Bae=yc("iterator"),Bee=!1;try{var Uee=0,Fee={next:function(){return{done:!!Uee++}},return:function(){Bee=!0}};Fee[Bae]=function(){return this},Array.from(Fee,function(){throw 2})}catch(e){}var kq=function(e,n){if(!n&&!Bee)return!1;var i=!1;try{var c={};c[Bae]=function(){return{next:function(){return{done:i=!0}}}},e(c)}catch(h){}return i},Uae=Ha,Fae=P,jae=R0,jq=n_,jee=Of,Qee=function(){},Qae=[],qq=eb("Reflect","construct"),f4=/^\s*(?:class|function)\b/,eW=Uae(f4.exec),Vee=!f4.exec(Qee),p4=function(e){if(!jae(e))return!1;try{return qq(Qee,Qae,e),!0}catch(n){return!1}},tW=function(e){if(!jae(e))return!1;switch(jq(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Vee||!!eW(f4,jee(e))}catch(n){return!0}};tW.sham=!0;var kM,g4,Gee,Hee,Vae=!qq||Fae(function(){var e;return p4(p4.call)||!p4(Object)||!p4(function(){e=!0})||e})?tW:p4,qee=Vae,nW=NL,Gae=R.TypeError,Wee=function(e){if(qee(e))return e;throw Gae(nW(e)+" is not a constructor")},Hae=Fy,yfe=Wee,_fe=yc("species"),Kee=function(e,n){var i,c=Hae(e).constructor;return void 0===c||null==(i=Hae(c)[_fe])?n:yfe(i)},Ife=Ha([].slice),Yee=/(?:ipad|iphone|ipod).*applewebkit/i.test(lO),W_=R,qae=bR,Wae=E8,rW=R0,BN=by,Jee=P,y8=QV,iW=Ife,zee=AR,oW=Yee,sW=Y5,LM=W_.setImmediate,Xee=W_.clearImmediate,bfe=W_.process,$ee=W_.Dispatch,Cfe=W_.Function,aW=W_.MessageChannel,Kae=W_.String,cW=0,A4={};try{kM=W_.location}catch(e){}var _8=function(e){if(BN(A4,e)){var n=A4[e];delete A4[e],n()}},I8=function(e){return function(){_8(e)}},uW=function(e){_8(e.data)},Zee=function(e){W_.postMessage(Kae(e),kM.protocol+"//"+kM.host)};LM&&Xee||(LM=function(e){var n=iW(arguments,1);return A4[++cW]=function(){qae(rW(e)?e:Cfe(e),void 0,n)},g4(cW),cW},Xee=function(e){delete A4[e]},sW?g4=function(e){bfe.nextTick(I8(e))}:$ee&&$ee.now?g4=function(e){$ee.now(I8(e))}:aW&&!oW?(Hee=(Gee=new aW).port2,Gee.port1.onmessage=uW,g4=Wae(Hee.postMessage,Hee)):W_.addEventListener&&rW(W_.postMessage)&&!W_.importScripts&&kM&&"file:"!==kM.protocol&&!Jee(Zee)?(g4=Zee,W_.addEventListener("message",uW,!1)):g4="onreadystatechange"in zee("script")?function(e){y8.appendChild(zee("script")).onreadystatechange=function(){y8.removeChild(this),_8(e)}}:function(e){setTimeout(I8(e),0)});var m4,E2,v2,E4,b8,UN,lW,ete,Jae={set:LM,clear:Xee},Sfe=R,zae=/ipad|iphone|ipod/i.test(lO)&&void 0!==Sfe.Pebble,Xae=/web0s(?!.*chrome)/i.test(lO),PM=R,$ae=E8,tte=Jae.set,wfe=Yee,Zae=zae,Rfe=Xae,nte=Y5,ece=PM.MutationObserver||PM.WebKitMutationObserver,tce=PM.document,v4=PM.process,zS=PM.Promise,nce=(0,M.f)(PM,"queueMicrotask"),rte=nce&&nce.value;rte||(m4=function(){var e,n;for(nte&&(e=v4.domain)&&e.exit();E2;){n=E2.fn,E2=E2.next;try{n()}catch(i){throw E2?E4():v2=void 0,i}}v2=void 0,e&&e.enter()},wfe||nte||Rfe||!ece||!tce?!Zae&&zS&&zS.resolve?((lW=zS.resolve(void 0)).constructor=zS,ete=$ae(lW.then,lW),E4=function(){ete(m4)}):nte?E4=function(){v4.nextTick(m4)}:(tte=$ae(tte,PM),E4=function(){tte(m4)}):(b8=!0,UN=tce.createTextNode(""),new ece(m4).observe(UN,{characterData:!0}),E4=function(){UN.data=b8=!b8}));var rce=rte||function(e){var n={fn:e,next:void 0};v2&&(v2.next=n),E2||(E2=n,E4()),v2=n},t1={},y2=U2,ice=function(e){var n,i;this.promise=new e(function(c,h){if(void 0!==n||void 0!==i)throw TypeError("Bad Promise constructor");n=c,i=h}),this.resolve=y2(n),this.reject=y2(i)};t1.f=function(e){return new ice(e)};var oce=Fy,ite=u0,ote=t1,ste=function(e,n){if(oce(e),ite(n)&&n.constructor===e)return n;var i=ote.f(e);return(0,i.resolve)(n),i.promise},dW=R,hW=function(){this.head=null,this.tail=null};hW.prototype={add:function(e){var n={item:e,next:null};this.head?this.tail.next=n:this.head=n,this.tail=n},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var XS,FN,ate,C8,sce="object"==typeof window,xM=C_,HR=R,ace=eb,qT=xe,y4=fq,n1=db.exports,Gy=m8,my=a2,Bg=uU,hy=c8,df=U2,S8=R0,cce=u0,uce=JU,lce=Of,ute=function(e,n,i){var c,h,g,v,m,C,y,k=!(!i||!i.AS_ENTRIES),U=!(!i||!i.IS_ITERATOR),V=!(!i||!i.INTERRUPTED),K=vq(n,i&&i.that),$=function(ye){return c&&m2(c,"normal",ye),new h4(!0,ye)},Z=function(ye){return k?(Lee(ye),V?K(ye[0],ye[1],$):K(ye[0],ye[1])):V?K(ye,$):K(ye)};if(U)c=e;else{if(!(h=bq(e)))throw xee(Pae(e)+" is not iterable");if(_q(h)){for(g=0,v=xae(e);v>g;g++)if((m=Z(e[g]))&&Pee(Mee,m))return m;return new h4(!1)}c=Mae(e,h)}for(C=c.next;!(y=kee(C,c)).done;){try{m=Z(y.value)}catch(ye){m2(c,"throw",ye)}if("object"==typeof m&&m&&Pee(Mee,m))return m}return new h4(!1)},dce=kq,Ofe=Kee,hce=Jae.set,MM=rce,T8=ste,K1=t1,_4=function(e){try{return{error:!1,value:e()}}catch(n){return{error:!0,value:n}}},Dfe=hW,lte=u_,Nfe=D3,fce=sce,R8=Y5,fW=DL,pce=yc("species"),WT="Promise",gce=lte.getterFor(WT),ES=lte.set,pW=lte.getterFor(WT),jN=y4&&y4.prototype,KT=y4,I4=jN,dte=HR.TypeError,QN=HR.document,gW=HR.process,cy=K1.f,Kf=cy,Bp=!!(QN&&QN.createEvent&&HR.dispatchEvent),hte=S8(HR.PromiseRejectionEvent),b4="unhandledrejection",YT=!1,_2=Nfe(WT,function(){var e=lce(KT),n=e!==String(KT);if(!n&&66===fW)return!0;if(fW>=51&&/native code/.test(e))return!1;var i=new KT(function(h){h(1)}),c=function(h){h(function(){},function(){})};return(i.constructor={})[pce]=c,!(YT=i.then(function(){})instanceof c)||!n&&fce&&!hte}),$S=_2||!dce(function(e){KT.all(e).catch(function(){})}),fte=function(e){var n;return!(!cce(e)||!S8(n=e.then))&&n},xy=function(e,n){var i,c,h,g=n.value,v=1==n.state,m=v?e.ok:e.fail,C=e.resolve,y=e.reject,N=e.domain;try{m?(v||(2===n.rejection&&mce(n),n.rejection=1),!0===m?i=g:(N&&N.enter(),i=m(g),N&&(N.exit(),h=!0)),i===e.promise?y(dte("Promise-chain cycle")):(c=fte(i))?qT(c,i,C,y):C(i)):y(g)}catch(k){N&&!h&&N.exit(),y(k)}},pte=function(e,n){e.notified||(e.notified=!0,MM(function(){for(var i,c=e.reactions;i=c.get();)xy(i,e);e.notified=!1,n&&!e.rejection&&Ace(e)}))},j0=function(e,n,i){var c,h;Bp?((c=QN.createEvent("Event")).promise=n,c.reason=i,c.initEvent(e,!1,!0),HR.dispatchEvent(c)):c={promise:n,reason:i},!hte&&(h=HR["on"+e])?h(c):e===b4&&function(e,n){var i=dW.console;i&&i.error&&(1==arguments.length?i.error(e):i.error(e,n))}("Unhandled promise rejection",i)},Ace=function(e){qT(hce,HR,function(){var n,i=e.facade,c=e.value;if(C4(e)&&(n=_4(function(){R8?gW.emit("unhandledRejection",c,i):j0(b4,i,c)}),e.rejection=R8||C4(e)?2:1,n.error))throw n.value})},C4=function(e){return 1!==e.rejection&&!e.parent},mce=function(e){qT(hce,HR,function(){var n=e.facade;R8?gW.emit("rejectionHandled",n):j0("rejectionhandled",n,e.value)})},qR=function(e,n,i){return function(c){e(n,c,i)}},BM=function(e,n,i){e.done||(e.done=!0,i&&(e=i),e.value=n,e.state=2,pte(e,!0))},O8=function(e,n,i){if(!e.done){e.done=!0,i&&(e=i);try{if(e.facade===n)throw dte("Promise can't be resolved itself");var c=fte(n);c?MM(function(){var h={done:!1};try{qT(c,n,qR(O8,h,e),qR(BM,h,e))}catch(g){BM(h,g,e)}}):(e.value=n,e.state=1,pte(e,!1))}catch(h){BM({done:!1},h,e)}}};if(_2&&(I4=(KT=function(e){uce(this,I4),df(e),qT(XS,this);var n=gce(this);try{e(qR(O8,n),qR(BM,n))}catch(i){BM(n,i)}}).prototype,(XS=function(e){ES(this,{type:WT,done:!1,notified:!1,parent:!1,reactions:new Dfe,rejection:!1,state:0,value:void 0})}).prototype=Gy(I4,{then:function(e,n){var i=pW(this),c=cy(Ofe(this,KT));return i.parent=!0,c.ok=!S8(e)||e,c.fail=S8(n)&&n,c.domain=R8?gW.domain:void 0,0==i.state?i.reactions.add(c):MM(function(){xy(c,i)}),c.promise},catch:function(e){return this.then(void 0,e)}}),FN=function(){var e=new XS,n=gce(e);this.promise=e,this.resolve=qR(O8,n),this.reject=qR(BM,n)},K1.f=cy=function(e){return e===KT||e===ate?new FN(e):Kf(e)},S8(y4)&&jN!==Object.prototype)){C8=jN.then,YT||(n1(jN,"then",function(e,n){var i=this;return new KT(function(c,h){qT(C8,i,c,h)}).then(e,n)},{unsafe:!0}),n1(jN,"catch",I4.catch,{unsafe:!0}));try{delete jN.constructor}catch(e){}my&&my(jN,I4)}xM({global:!0,wrap:!0,forced:_2},{Promise:KT}),Bg(KT,WT,!1),hy(WT),ate=ace(WT),xM({target:WT,stat:!0,forced:_2},{reject:function(e){var n=cy(this);return qT(n.reject,void 0,e),n.promise}}),xM({target:WT,stat:!0,forced:_2},{resolve:function(e){return T8(this,e)}}),xM({target:WT,stat:!0,forced:$S},{all:function(e){var n=this,i=cy(n),c=i.resolve,h=i.reject,g=_4(function(){var v=df(n.resolve),m=[],C=0,y=1;ute(e,function(N){var k=C++,U=!1;y++,qT(v,n,N).then(function(V){U||(U=!0,m[k]=V,--y||c(m))},h)}),--y||c(m)});return g.error&&h(g.value),i.promise},race:function(e){var n=this,i=cy(n),c=i.reject,h=_4(function(){var g=df(n.resolve);ute(e,function(v){qT(g,n,v).then(i.resolve,c)})});return h.error&&c(h.value),i.promise}});var I2=fq,gte=eb,EW=R0,Ece=Kee,Ate=ste,vce=db.exports;if(C_({target:"Promise",proto:!0,real:!0,forced:!!I2&&P(function(){I2.prototype.finally.call({then:function(){}},function(){})})},{finally:function(e){var n=Ece(this,gte("Promise")),i=EW(e);return this.then(i?function(c){return Ate(n,e()).then(function(){return c})}:e,i?function(c){return Ate(n,e()).then(function(){throw c})}:e)}}),EW(I2)){var mte=gte("Promise").prototype.finally;I2.prototype.finally!==mte&&vce(I2.prototype,"finally",mte,{unsafe:!0})}function vW(e,n){const i=e&&e.navigator,c=e&&e.MediaStreamTrack;if(i.getUserMedia=function(h,g,v){Qx("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(h).then(g,v)},!(n.version>55&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){const h=function(v,m,C){m in v&&!(C in v)&&(v[C]=v[m],delete v[m])},g=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(v){return"object"==typeof v&&"object"==typeof v.audio&&(v=JSON.parse(JSON.stringify(v)),h(v.audio,"autoGainControl","mozAutoGainControl"),h(v.audio,"noiseSuppression","mozNoiseSuppression")),g(v)},c&&c.prototype.getSettings){const v=c.prototype.getSettings;c.prototype.getSettings=function(){const m=v.apply(this,arguments);return h(m,"mozAutoGainControl","autoGainControl"),h(m,"mozNoiseSuppression","noiseSuppression"),m}}if(c&&c.prototype.applyConstraints){const v=c.prototype.applyConstraints;c.prototype.applyConstraints=function(m){return"audio"===this.kind&&"object"==typeof m&&(m=JSON.parse(JSON.stringify(m)),h(m,"autoGainControl","mozAutoGainControl"),h(m,"noiseSuppression","mozNoiseSuppression")),v.apply(this,[m])}}}}function Ete(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function D8(e,n){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),n.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(h){const g=e.RTCPeerConnection.prototype[h],v={[h](){return arguments[0]=new("addIceCandidate"===h?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),g.apply(this,arguments)}};e.RTCPeerConnection.prototype[h]=v[h]});const i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},c=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[h,g,v]=arguments;return c.apply(this,[h||null]).then(m=>{if(n.version<53&&!g)try{m.forEach(C=>{C.type=i[C.type]||C.type})}catch(C){if("TypeError"!==C.name)throw C;m.forEach((y,N)=>{m.set(N,Object.assign({},y,{type:i[y.type]||y.type}))})}return m}).then(g,v)}}function S4(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const c=n.apply(this,[]);return c.forEach(h=>h._pc=this),c});const i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){const c=i.apply(this,arguments);return c._pc=this,c}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):_l.resolve(new Map)}}function UM(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(c=>c._pc=this),i}),IN(e,"track",i=>(i.receiver._pc=i.srcElement,i)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function vte(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(n){Qx("removeStream","removeTrack"),this.getSenders().forEach(i=>{i.track&&n.getTracks().includes(i.track)&&this.removeTrack(i)})})}function yte(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function N8(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype.addTransceiver;n&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const i=arguments[1],c=i&&"sendEncodings"in i;c&&i.sendEncodings.forEach(g=>{if("rid"in g&&!/^[a-z0-9]{0,16}$/i.test(g.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in g&&!(parseFloat(g.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in g&&!(parseFloat(g.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const h=n.apply(this,arguments);if(c){const{sender:g}=h,v=g.getParameters();(!("encodings"in v)||1===v.encodings.length&&0===Object.keys(v.encodings[0]).length)&&(v.encodings=i.sendEncodings,g.sendEncodings=i.sendEncodings,this.setParametersPromises.push(g.setParameters(v).then(()=>{delete g.sendEncodings}).catch(()=>{delete g.sendEncodings})))}return h})}function yW(e){if("object"!=typeof e||!e.RTCRtpSender)return;const n=e.RTCRtpSender.prototype.getParameters;n&&(e.RTCRtpSender.prototype.getParameters=function(){const i=n.apply(this,arguments);return"encodings"in i||(i.encodings=[].concat(this.sendEncodings||[{}])),i})}function _te(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?_l.all(this.setParametersPromises).then(()=>n.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):n.apply(this,arguments)}}function k8(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?_l.all(this.setParametersPromises).then(()=>n.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):n.apply(this,arguments)}}var Ite=Object.freeze({__proto__:null,shimOnTrack:Ete,shimPeerConnection:D8,shimSenderGetStats:S4,shimReceiverGetStats:UM,shimRemoveStream:vte,shimRTCDataChannel:yte,shimAddTransceiver:N8,shimGetParameters:yW,shimCreateOffer:_te,shimCreateAnswer:k8,shimGetUserMedia:vW,shimGetDisplayMedia:function(e,n){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(i){if(!i||!i.video){const c=new DOMException("getDisplayMedia without video constraints is undefined");return c.name="NotFoundError",c.code=8,_l.reject(c)}return!0===i.video?i.video={mediaSource:n}:i.video.mediaSource=n,e.navigator.mediaDevices.getUserMedia(i)})}});function bte(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(i){this._localStreams||(this._localStreams=[]),this._localStreams.includes(i)||this._localStreams.push(i),i.getAudioTracks().forEach(c=>n.call(this,c,i)),i.getVideoTracks().forEach(c=>n.call(this,c,i))},e.RTCPeerConnection.prototype.addTrack=function(i){for(var c=arguments.length,h=new Array(c>1?c-1:0),g=1;g<c;g++)h[g-1]=arguments[g];return h&&h.forEach(v=>{this._localStreams?this._localStreams.includes(v)||this._localStreams.push(v):this._localStreams=[v]}),n.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const i=this._localStreams.indexOf(n);if(-1===i)return;this._localStreams.splice(i,1);const c=n.getTracks();this.getSenders().forEach(h=>{c.includes(h.track)&&this.removeTrack(h)})})}}function Cte(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(i){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=i),this.addEventListener("track",this._onaddstreampoly=c=>{c.streams.forEach(h=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(h))return;this._remoteStreams.push(h);const g=new Event("addstream");g.stream=h,this.dispatchEvent(g)})})}});const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const i=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(c){c.streams.forEach(h=>{if(i._remoteStreams||(i._remoteStreams=[]),i._remoteStreams.indexOf(h)>=0)return;i._remoteStreams.push(h);const g=new Event("addstream");g.stream=h,i.dispatchEvent(g)})}),n.apply(i,arguments)}}}function L8(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype,i=n.createOffer,c=n.createAnswer,h=n.setLocalDescription,g=n.setRemoteDescription,v=n.addIceCandidate;n.createOffer=function(C,y){const k=i.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return y?(k.then(C,y),_l.resolve()):k},n.createAnswer=function(C,y){const k=c.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return y?(k.then(C,y),_l.resolve()):k};let m=function(C,y,N){const k=h.apply(this,[C]);return N?(k.then(y,N),_l.resolve()):k};n.setLocalDescription=m,m=function(C,y,N){const k=g.apply(this,[C]);return N?(k.then(y,N),_l.resolve()):k},n.setRemoteDescription=m,m=function(C,y,N){const k=v.apply(this,[C]);return N?(k.then(y,N),_l.resolve()):k},n.addIceCandidate=m}function Ste(e){const n=e&&e.navigator;if(n.mediaDevices&&n.mediaDevices.getUserMedia){const i=n.mediaDevices,c=i.getUserMedia.bind(i);n.mediaDevices.getUserMedia=h=>c(Tte(h))}!n.getUserMedia&&n.mediaDevices&&n.mediaDevices.getUserMedia&&(n.getUserMedia=function(i,c,h){n.mediaDevices.getUserMedia(i).then(c,h)}.bind(n))}function Tte(e){return e&&void 0!==e.video?Object.assign({},e,{video:Wie(e.video)}):e}function wte(e){if(!e.RTCPeerConnection)return;const n=e.RTCPeerConnection;e.RTCPeerConnection=function(i,c){if(i&&i.iceServers){const h=[];for(let g=0;g<i.iceServers.length;g++){let v=i.iceServers[g];!v.hasOwnProperty("urls")&&v.hasOwnProperty("url")?(Qx("RTCIceServer.url","RTCIceServer.urls"),v=JSON.parse(JSON.stringify(v)),v.urls=v.url,delete v.url,h.push(v)):h.push(i.iceServers[g])}i.iceServers=h}return new n(i,c)},e.RTCPeerConnection.prototype=n.prototype,"generateCertificate"in n&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>n.generateCertificate})}function P8(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function x8(e){const n=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(i){if(i){void 0!==i.offerToReceiveAudio&&(i.offerToReceiveAudio=!!i.offerToReceiveAudio);const c=this.getTransceivers().find(g=>"audio"===g.receiver.track.kind);!1===i.offerToReceiveAudio&&c?"sendrecv"===c.direction?c.setDirection?c.setDirection("sendonly"):c.direction="sendonly":"recvonly"===c.direction&&(c.setDirection?c.setDirection("inactive"):c.direction="inactive"):!0!==i.offerToReceiveAudio||c||this.addTransceiver("audio"),void 0!==i.offerToReceiveVideo&&(i.offerToReceiveVideo=!!i.offerToReceiveVideo);const h=this.getTransceivers().find(g=>"video"===g.receiver.track.kind);!1===i.offerToReceiveVideo&&h?"sendrecv"===h.direction?h.setDirection?h.setDirection("sendonly"):h.direction="sendonly":"recvonly"===h.direction&&(h.setDirection?h.setDirection("inactive"):h.direction="inactive"):!0!==i.offerToReceiveVideo||h||this.addTransceiver("video")}return n.apply(this,arguments)}}function _W(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var Rte=Object.freeze({__proto__:null,shimLocalStreamsAPI:bte,shimRemoteStreamsAPI:Cte,shimCallbacksAPI:L8,shimGetUserMedia:Ste,shimConstraints:Tte,shimRTCIceServerUrls:wte,shimTrackEventTransceiver:P8,shimCreateOfferLegacy:x8,shimAudioContext:_W}),Ote=_1,yce=u2,Dte=O0("".replace),M8="[\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]",_ce=RegExp("^"+M8+M8+"*"),Nte=RegExp(M8+M8+"*$"),kte=function(e){return function(n){var i=yce(Ote(n));return 1&e&&(i=Dte(i,_ce,"")),2&e&&(i=Dte(i,Nte,"")),i}},Ice={start:kte(1),end:kte(2),trim:kte(3)},bce=a$.PROPER,Lte=zg,B8="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",IW=Ice.trim;Ly({target:"String",proto:!0,forced:function(e){return Lte(function(){return!!B8[e]()||"\u200b\x85\u180e"!=="\u200b\x85\u180e"[e]()||bce&&B8[e].name!==e})}("trim")},{trim:function(){return IW(this)}});var Cce=Ml("String").trim,Sce=gy,Lfe=Cce,U8=String.prototype,WR=function(e){var n=e.trim;return"string"==typeof e||e===U8||Sce(U8,e)&&n===U8.trim?Lfe:n},Tce=xe;C_({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return Tce(URL.prototype.toString,this)}});var Pte={exports:{}};!function(e){var n={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};n.localCName=n.generateIdentifier(),n.splitLines=function(i){return WR(i).call(i).split("\n").map(function(c){return WR(c).call(c)})},n.splitSections=function(i){return i.split("\nm=").map(function(c,h){var g;return WR(g=h>0?"m="+c:c).call(g)+"\r\n"})},n.getDescription=function(i){var c=n.splitSections(i);return c&&c[0]},n.getMediaSections=function(i){var c=n.splitSections(i);return c.shift(),c},n.matchPrefix=function(i,c){return n.splitLines(i).filter(function(h){return 0===h.indexOf(c)})},n.parseCandidate=function(i){for(var c,h={foundation:(c=0===i.indexOf("a=candidate:")?i.substring(12).split(" "):i.substring(10).split(" "))[0],component:parseInt(c[1],10),protocol:c[2].toLowerCase(),priority:parseInt(c[3],10),ip:c[4],address:c[4],port:parseInt(c[5],10),type:c[7]},g=8;g<c.length;g+=2)switch(c[g]){case"raddr":h.relatedAddress=c[g+1];break;case"rport":h.relatedPort=parseInt(c[g+1],10);break;case"tcptype":h.tcpType=c[g+1];break;case"ufrag":h.ufrag=c[g+1],h.usernameFragment=c[g+1];break;default:h[c[g]]=c[g+1]}return h},n.writeCandidate=function(i){var c=[];c.push(i.foundation),c.push(i.component),c.push(i.protocol.toUpperCase()),c.push(i.priority),c.push(i.address||i.ip),c.push(i.port);var h=i.type;return c.push("typ"),c.push(h),"host"!==h&&i.relatedAddress&&i.relatedPort&&(c.push("raddr"),c.push(i.relatedAddress),c.push("rport"),c.push(i.relatedPort)),i.tcpType&&"tcp"===i.protocol.toLowerCase()&&(c.push("tcptype"),c.push(i.tcpType)),(i.usernameFragment||i.ufrag)&&(c.push("ufrag"),c.push(i.usernameFragment||i.ufrag)),"candidate:"+c.join(" ")},n.parseIceOptions=function(i){return i.substr(14).split(" ")},n.parseRtpMap=function(i){var c=i.substr(9).split(" "),h={payloadType:parseInt(c.shift(),10)};return c=c[0].split("/"),h.name=c[0],h.clockRate=parseInt(c[1],10),h.channels=3===c.length?parseInt(c[2],10):1,h.numChannels=h.channels,h},n.writeRtpMap=function(i){var c=i.payloadType;void 0!==i.preferredPayloadType&&(c=i.preferredPayloadType);var h=i.channels||i.numChannels||1;return"a=rtpmap:"+c+" "+i.name+"/"+i.clockRate+(1!==h?"/"+h:"")+"\r\n"},n.parseExtmap=function(i){var c=i.substr(9).split(" ");return{id:parseInt(c[0],10),direction:c[0].indexOf("/")>0?c[0].split("/")[1]:"sendrecv",uri:c[1]}},n.writeExtmap=function(i){return"a=extmap:"+(i.id||i.preferredId)+(i.direction&&"sendrecv"!==i.direction?"/"+i.direction:"")+" "+i.uri+"\r\n"},n.parseFmtp=function(i){for(var c,h={},g=i.substr(i.indexOf(" ")+1).split(";"),v=0;v<g.length;v++){var m,C;c=WR(m=g[v]).call(m).split("="),h[WR(C=c[0]).call(C)]=c[1]}return h},n.writeFmtp=function(i){var c="",h=i.payloadType;if(void 0!==i.preferredPayloadType&&(h=i.preferredPayloadType),i.parameters&&Object.keys(i.parameters).length){var g=[];Object.keys(i.parameters).forEach(function(v){g.push(i.parameters[v]?v+"="+i.parameters[v]:v)}),c+="a=fmtp:"+h+" "+g.join(";")+"\r\n"}return c},n.parseRtcpFb=function(i){var c=i.substr(i.indexOf(" ")+1).split(" ");return{type:c.shift(),parameter:c.join(" ")}},n.writeRtcpFb=function(i){var c="",h=i.payloadType;return void 0!==i.preferredPayloadType&&(h=i.preferredPayloadType),i.rtcpFeedback&&i.rtcpFeedback.length&&i.rtcpFeedback.forEach(function(g){c+="a=rtcp-fb:"+h+" "+g.type+(g.parameter&&g.parameter.length?" "+g.parameter:"")+"\r\n"}),c},n.parseSsrcMedia=function(i){var c=i.indexOf(" "),h={ssrc:parseInt(i.substr(7,c-7),10)},g=i.indexOf(":",c);return g>-1?(h.attribute=i.substr(c+1,g-c-1),h.value=i.substr(g+1)):h.attribute=i.substr(c+1),h},n.parseSsrcGroup=function(i){var c=i.substr(13).split(" ");return{semantics:c.shift(),ssrcs:c.map(function(h){return parseInt(h,10)})}},n.getMid=function(i){var c=n.matchPrefix(i,"a=mid:")[0];if(c)return c.substr(6)},n.parseFingerprint=function(i){var c=i.substr(14).split(" ");return{algorithm:c[0].toLowerCase(),value:c[1]}},n.getDtlsParameters=function(i,c){return{role:"auto",fingerprints:n.matchPrefix(i+c,"a=fingerprint:").map(n.parseFingerprint)}},n.writeDtlsParameters=function(i,c){var h="a=setup:"+c+"\r\n";return i.fingerprints.forEach(function(g){h+="a=fingerprint:"+g.algorithm+" "+g.value+"\r\n"}),h},n.parseCryptoLine=function(i){var c=i.substr(9).split(" ");return{tag:parseInt(c[0],10),cryptoSuite:c[1],keyParams:c[2],sessionParams:c.slice(3)}},n.writeCryptoLine=function(i){return"a=crypto:"+i.tag+" "+i.cryptoSuite+" "+("object"==typeof i.keyParams?n.writeCryptoKeyParams(i.keyParams):i.keyParams)+(i.sessionParams?" "+i.sessionParams.join(" "):"")+"\r\n"},n.parseCryptoKeyParams=function(i){if(0!==i.indexOf("inline:"))return null;var c=i.substr(7).split("|");return{keyMethod:"inline",keySalt:c[0],lifeTime:c[1],mkiValue:c[2]?c[2].split(":")[0]:void 0,mkiLength:c[2]?c[2].split(":")[1]:void 0}},n.writeCryptoKeyParams=function(i){return i.keyMethod+":"+i.keySalt+(i.lifeTime?"|"+i.lifeTime:"")+(i.mkiValue&&i.mkiLength?"|"+i.mkiValue+":"+i.mkiLength:"")},n.getCryptoParameters=function(i,c){return n.matchPrefix(i+c,"a=crypto:").map(n.parseCryptoLine)},n.getIceParameters=function(i,c){var h=n.matchPrefix(i+c,"a=ice-ufrag:")[0],g=n.matchPrefix(i+c,"a=ice-pwd:")[0];return h&&g?{usernameFragment:h.substr(12),password:g.substr(10)}:null},n.writeIceParameters=function(i){return"a=ice-ufrag:"+i.usernameFragment+"\r\na=ice-pwd:"+i.password+"\r\n"},n.parseRtpParameters=function(i){for(var c={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},h=n.splitLines(i)[0].split(" "),g=3;g<h.length;g++){var v=h[g],m=n.matchPrefix(i,"a=rtpmap:"+v+" ")[0];if(m){var C=n.parseRtpMap(m),y=n.matchPrefix(i,"a=fmtp:"+v+" ");switch(C.parameters=y.length?n.parseFmtp(y[0]):{},C.rtcpFeedback=n.matchPrefix(i,"a=rtcp-fb:"+v+" ").map(n.parseRtcpFb),c.codecs.push(C),C.name.toUpperCase()){case"RED":case"ULPFEC":c.fecMechanisms.push(C.name.toUpperCase())}}}return n.matchPrefix(i,"a=extmap:").forEach(function(N){c.headerExtensions.push(n.parseExtmap(N))}),c},n.writeRtpDescription=function(i,c){var h="";h+="m="+i+" ",h+=c.codecs.length>0?"9":"0",h+=" UDP/TLS/RTP/SAVPF ",h+=c.codecs.map(function(v){return void 0!==v.preferredPayloadType?v.preferredPayloadType:v.payloadType}).join(" ")+"\r\n",h+="c=IN IP4 0.0.0.0\r\n",h+="a=rtcp:9 IN IP4 0.0.0.0\r\n",c.codecs.forEach(function(v){h+=n.writeRtpMap(v),h+=n.writeFmtp(v),h+=n.writeRtcpFb(v)});var g=0;return c.codecs.forEach(function(v){v.maxptime>g&&(g=v.maxptime)}),g>0&&(h+="a=maxptime:"+g+"\r\n"),h+="a=rtcp-mux\r\n",c.headerExtensions&&c.headerExtensions.forEach(function(v){h+=n.writeExtmap(v)}),h},n.parseRtpEncodingParameters=function(i){var c,h=[],g=n.parseRtpParameters(i),v=-1!==g.fecMechanisms.indexOf("RED"),m=-1!==g.fecMechanisms.indexOf("ULPFEC"),C=n.matchPrefix(i,"a=ssrc:").map(function(U){return n.parseSsrcMedia(U)}).filter(function(U){return"cname"===U.attribute}),y=C.length>0&&C[0].ssrc,N=n.matchPrefix(i,"a=ssrc-group:FID").map(function(U){return U.substr(17).split(" ").map(function(V){return parseInt(V,10)})});N.length>0&&N[0].length>1&&N[0][0]===y&&(c=N[0][1]),g.codecs.forEach(function(U){if("RTX"===U.name.toUpperCase()&&U.parameters.apt){var V={ssrc:y,codecPayloadType:parseInt(U.parameters.apt,10)};y&&c&&(V.rtx={ssrc:c}),h.push(V),v&&((V=JSON.parse(JSON.stringify(V))).fec={ssrc:y,mechanism:m?"red+ulpfec":"red"},h.push(V))}}),0===h.length&&y&&h.push({ssrc:y});var k=n.matchPrefix(i,"b=");return k.length&&(k=0===k[0].indexOf("b=TIAS:")?parseInt(k[0].substr(7),10):0===k[0].indexOf("b=AS:")?1e3*parseInt(k[0].substr(5),10)*.95-16e3:void 0,h.forEach(function(U){U.maxBitrate=k})),h},n.parseRtcpParameters=function(i){var c={},h=n.matchPrefix(i,"a=ssrc:").map(function(m){return n.parseSsrcMedia(m)}).filter(function(m){return"cname"===m.attribute})[0];h&&(c.cname=h.value,c.ssrc=h.ssrc);var g=n.matchPrefix(i,"a=rtcp-rsize");c.reducedSize=g.length>0,c.compound=0===g.length;var v=n.matchPrefix(i,"a=rtcp-mux");return c.mux=v.length>0,c},n.parseMsid=function(i){var c,h=n.matchPrefix(i,"a=msid:");if(1===h.length)return{stream:(c=h[0].substr(7).split(" "))[0],track:c[1]};var g=n.matchPrefix(i,"a=ssrc:").map(function(v){return n.parseSsrcMedia(v)}).filter(function(v){return"msid"===v.attribute});return g.length>0?{stream:(c=g[0].value.split(" "))[0],track:c[1]}:void 0},n.parseSctpDescription=function(i){var c,h=n.parseMLine(i),g=n.matchPrefix(i,"a=max-message-size:");g.length>0&&(c=parseInt(g[0].substr(19),10)),isNaN(c)&&(c=65536);var v=n.matchPrefix(i,"a=sctp-port:");if(v.length>0)return{port:parseInt(v[0].substr(12),10),protocol:h.fmt,maxMessageSize:c};if(n.matchPrefix(i,"a=sctpmap:").length>0){var m=n.matchPrefix(i,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(m[0],10),protocol:m[1],maxMessageSize:c}}},n.writeSctpDescription=function(i,c){var h=[];return h="DTLS/SCTP"!==i.protocol?["m="+i.kind+" 9 "+i.protocol+" "+c.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+c.port+"\r\n"]:["m="+i.kind+" 9 "+i.protocol+" "+c.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+c.port+" "+c.protocol+" 65535\r\n"],void 0!==c.maxMessageSize&&h.push("a=max-message-size:"+c.maxMessageSize+"\r\n"),h.join("")},n.generateSessionId=function(){return Math.random().toString().substr(2,21)},n.writeSessionBoilerplate=function(i,c,h){var g=void 0!==c?c:2;return"v=0\r\no="+(h||"thisisadapterortc")+" "+(i||n.generateSessionId())+" "+g+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},n.writeMediaSection=function(i,c,h,g){var v=n.writeRtpDescription(i.kind,c);if(v+=n.writeIceParameters(i.iceGatherer.getLocalParameters()),v+=n.writeDtlsParameters(i.dtlsTransport.getLocalParameters(),"offer"===h?"actpass":"active"),v+="a=mid:"+i.mid+"\r\n",v+=i.direction?"a="+i.direction+"\r\n":i.rtpSender&&i.rtpReceiver?"a=sendrecv\r\n":i.rtpSender?"a=sendonly\r\n":i.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",i.rtpSender){var m="msid:"+g.id+" "+i.rtpSender.track.id+"\r\n";v+="a="+m,v+="a=ssrc:"+i.sendEncodingParameters[0].ssrc+" "+m,i.sendEncodingParameters[0].rtx&&(v+="a=ssrc:"+i.sendEncodingParameters[0].rtx.ssrc+" "+m,v+="a=ssrc-group:FID "+i.sendEncodingParameters[0].ssrc+" "+i.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return v+="a=ssrc:"+i.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",i.rtpSender&&i.sendEncodingParameters[0].rtx&&(v+="a=ssrc:"+i.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),v},n.getDirection=function(i,c){for(var h=n.splitLines(i),g=0;g<h.length;g++)switch(h[g]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return h[g].substr(2)}return c?n.getDirection(c):"sendrecv"},n.getKind=function(i){return n.splitLines(i)[0].split(" ")[0].substr(2)},n.isRejected=function(i){return"0"===i.split(" ",2)[1]},n.parseMLine=function(i){var c=n.splitLines(i)[0].substr(2).split(" ");return{kind:c[0],port:parseInt(c[1],10),protocol:c[2],fmt:c.slice(3).join(" ")}},n.parseOLine=function(i){var c=n.matchPrefix(i,"o=")[0].substr(2).split(" ");return{username:c[0],sessionId:c[1],sessionVersion:parseInt(c[2],10),netType:c[3],addressType:c[4],address:c[5]}},n.isValidSDP=function(i){if("string"!=typeof i||0===i.length)return!1;for(var c=n.splitLines(i),h=0;h<c.length;h++)if(c[h].length<2||"="!==c[h].charAt(1))return!1;return!0},e.exports=n}(Pte);var bW=Pte.exports;function w1(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const n=e.RTCIceCandidate;e.RTCIceCandidate=function(i){if("object"==typeof i&&i.candidate&&0===i.candidate.indexOf("a=")&&((i=JSON.parse(JSON.stringify(i))).candidate=i.candidate.substr(2)),i.candidate&&i.candidate.length){const c=new n(i),h=bW.parseCandidate(i.candidate),g=Object.assign(c,h);return g.toJSON=function(){return{candidate:g.candidate,sdpMid:g.sdpMid,sdpMLineIndex:g.sdpMLineIndex,usernameFragment:g.usernameFragment}},g}return new n(i)},e.RTCIceCandidate.prototype=n.prototype,IN(e,"icecandidate",i=>(i.candidate&&Object.defineProperty(i,"candidate",{value:new e.RTCIceCandidate(i.candidate),writable:"false"}),i))}function T4(e,n){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const i=function(m){if(!m||!m.sdp)return!1;const C=bW.splitSections(m.sdp);return C.shift(),C.some(y=>{const N=bW.parseMLine(y);return N&&"application"===N.kind&&-1!==N.protocol.indexOf("SCTP")})},c=function(m){const C=m.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===C||C.length<2)return-1;const y=parseInt(C[1],10);return y!=y?-1:y},h=function(m){let C=65536;return"firefox"===n.browser&&(C=n.version<57?-1===m?16384:2147483637:n.version<60?57===n.version?65535:65536:2147483637),C},g=function(m,C){let y=65536;"firefox"===n.browser&&57===n.version&&(y=65535);const N=bW.matchPrefix(m.sdp,"a=max-message-size:");return N.length>0?y=parseInt(N[0].substr(19),10):"firefox"===n.browser&&-1!==C&&(y=2147483637),y},v=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===n.browser&&n.version>=76){const{sdpSemantics:m}=this.getConfiguration();"plan-b"===m&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(i(arguments[0])){const m=c(arguments[0]),C=h(m),y=g(arguments[0],m);let N;N=0===C&&0===y?Number.POSITIVE_INFINITY:0===C||0===y?Math.max(C,y):Math.min(C,y);const k={};Object.defineProperty(k,"maxMessageSize",{get:()=>N}),this._sctp=k}return v.apply(this,arguments)}}function w4(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function n(c,h){const g=c.send;c.send=function(){const v=arguments[0];if("open"===c.readyState&&h.sctp&&(v.length||v.size||v.byteLength)>h.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+h.sctp.maxMessageSize+" bytes)");return g.apply(c,arguments)}}const i=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const c=i.apply(this,arguments);return n(c,this),c},IN(e,"datachannel",c=>(n(c.channel,c.target),c))}function CW(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype;Object.defineProperty(n,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(n,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(i){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),i&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=i)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(i=>{const c=n[i];n[i]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=h=>{const g=h.target;if(g._lastConnectionState!==g.connectionState){g._lastConnectionState=g.connectionState;const v=new Event("connectionstatechange",h);g.dispatchEvent(v)}return h},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),c.apply(this,arguments)}})}function SW(e,n){if(!e.RTCPeerConnection||"chrome"===n.browser&&n.version>=71||"safari"===n.browser&&n.version>=605)return;const i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(c){if(c&&c.sdp&&-1!==c.sdp.indexOf("\na=extmap-allow-mixed")){const h=c.sdp.split("\n").filter(g=>"a=extmap-allow-mixed"!==WR(g).call(g)).join("\n");e.RTCSessionDescription&&c instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:c.type,sdp:h}):c.sdp=h}return i.apply(this,arguments)}}function F8(e,n){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const i=e.RTCPeerConnection.prototype.addIceCandidate;i&&0!==i.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===n.browser&&n.version<78||"firefox"===n.browser&&n.version<68||"safari"===n.browser)&&arguments[0]&&""===arguments[0].candidate?_l.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),_l.resolve())})}var wce=Object.freeze({__proto__:null,shimRTCIceCandidate:w1,shimMaxMessageSize:T4,shimSendThrowTypeError:w4,shimConnectionState:CW,removeExtmapAllowMixed:SW,shimAddIceCandidateNullOrEmpty:F8});let My,Kp;(function(){let{window:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};const i=GS,c=AX(e),h={browserDetails:c,commonShim:wce,extractVersion:jb,disableLog:qie,disableWarnings:y9};switch(c.browser){case"chrome":if(!dq||!lq||!n.shimChrome)return i("Chrome shim is not included in this adapter release."),h;if(null===c.version)return i("Chrome shim can not determine version, not shimming."),h;i("adapter.js shimming chrome."),h.browserShim=dq,F8(e,c),bee(e,c),oq(e),lq(e,c),Cee(e),See(e,c),sq(e),aq(e),cq(e),_ae(e,c),w1(e),CW(e),T4(e,c),w4(e),SW(e,c);break;case"firefox":if(!Ite||!D8||!n.shimFirefox)return i("Firefox shim is not included in this adapter release."),h;i("adapter.js shimming firefox."),h.browserShim=Ite,F8(e,c),vW(e,c),D8(e,c),Ete(e),vte(e),S4(e),UM(e),yte(e),N8(e),yW(e),_te(e),k8(e),w1(e),CW(e),T4(e,c),w4(e);break;case"edge":if(!NM||!d4||!n.shimEdge)return i("MS edge shim is not included in this adapter release."),h;i("adapter.js shimming edge."),h.browserShim=NM,l4(e),Sae(e),d4(e,c),A8(e),T4(e,c),w4(e);break;case"safari":if(!Rte||!n.shimSafari)return i("Safari shim is not included in this adapter release."),h;i("adapter.js shimming safari."),h.browserShim=Rte,F8(e,c),wte(e),x8(e),L8(e),bte(e),Cte(e),P8(e),Ste(e),_W(e),w1(e),T4(e,c),w4(e),SW(e,c);break;default:i("Unsupported browser!")}})({window:"undefined"==typeof window?void 0:window}),function(e){e.WIN_10="Windows 10",e.WIN_81="Windows 8.1",e.WIN_8="Windows 8",e.WIN_7="Windows 7",e.WIN_VISTA="Windows Vista",e.WIN_SERVER_2003="Windows Server 2003",e.WIN_XP="Windows XP",e.WIN_2000="Windows 2000",e.ANDROID="Android",e.OPEN_BSD="Open BSD",e.SUN_OS="Sun OS",e.LINUX="Linux",e.IOS="iOS",e.MAC_OS="Mac OS",e.QNX="QNX",e.UNIX="UNIX",e.BEOS="BeOS",e.OS_2="OS/2",e.SEARCH_BOT="Search Bot"}(My||(My={})),function(e){e.CHROME="Chrome",e.SAFARI="Safari",e.EDGE="Edge",e.FIREFOX="Firefox",e.OPERA="OPR",e.QQ="QQBrowser",e.WECHAT="MicroMessenger"}(Kp||(Kp={}));var TW={exports:{}};!function(e,n){!function(i,c){var h="function",g="undefined",v="object",m="string",C="model",y="name",N="type",k="vendor",U="version",V="architecture",K="console",$="mobile",Z="tablet",ye="smarttv",be="wearable",_s="embedded",ua="Amazon",qa="BlackBerry",nl="Google",Dl="Microsoft",Kl="Motorola",_a="Samsung",ca="Sony",Aa="Xiaomi",Ya="Zebra",Zc="Facebook",Ol=function(cf){for(var Vp={},_d=0;_d<cf.length;_d++)Vp[cf[_d].toUpperCase()]=cf[_d];return Vp},_c=function(cf,Vp){return typeof cf===m&&-1!==J(Vp).indexOf(J(cf))},J=function(cf){return cf.toLowerCase()},Ze=function(cf,Vp){if(typeof cf===m)return cf=cf.replace(/^\s\s*/,"").replace(/\s\s*$/,""),typeof Vp===g?cf:cf.substring(0,350)},aa=function(cf,Vp){for(var _d,Gp,Lh,Op,Uy,M0,ry=0;ry<Vp.length&&!Uy;){var _j=Vp[ry],Ma=Vp[ry+1];for(_d=Gp=0;_d<_j.length&&!Uy;)if(Uy=_j[_d++].exec(cf))for(Lh=0;Lh<Ma.length;Lh++)M0=Uy[++Gp],typeof(Op=Ma[Lh])===v&&Op.length>0?2===Op.length?this[Op[0]]=typeof Op[1]==h?Op[1].call(this,M0):Op[1]:3===Op.length?this[Op[0]]=typeof Op[1]!==h||Op[1].exec&&Op[1].test?M0?M0.replace(Op[1],Op[2]):c:M0?Op[1].call(this,M0,Op[2]):c:4===Op.length&&(this[Op[0]]=M0?Op[3].call(this,M0.replace(Op[1],Op[2])):c):this[Op]=M0||c;ry+=2}},Xa=function(cf,Vp){for(var _d in Vp)if(typeof Vp[_d]===v&&Vp[_d].length>0){for(var Gp=0;Gp<Vp[_d].length;Gp++)if(_c(Vp[_d][Gp],cf))return"?"===_d?c:_d}else if(_c(Vp[_d],cf))return"?"===_d?c:_d;return cf},vl={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Oh={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[U,[y,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[U,[y,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[y,U],[/opios[\/ ]+([\w\.]+)/i],[U,[y,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[U,[y,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[y,U],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[U,[y,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[U,[y,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[U,[y,"WeChat"]],[/konqueror\/([\w\.]+)/i],[U,[y,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[U,[y,"IE"]],[/yabrowser\/([\w\.]+)/i],[U,[y,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[y,/(.+)/,"$1 Secure Browser"],U],[/\bfocus\/([\w\.]+)/i],[U,[y,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[U,[y,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[U,[y,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[U,[y,"Dolphin"]],[/coast\/([\w\.]+)/i],[U,[y,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[U,[y,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[U,[y,"Firefox"]],[/\bqihu|(qi?ho?o?|360)browser/i],[[y,"360 Browser"]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[y,/(.+)/,"$1 Browser"],U],[/(comodo_dragon)\/([\w\.]+)/i],[[y,/_/g," "],U],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[y,U],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[y],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[y,Zc],U],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[y,U],[/\bgsa\/([\w\.]+) .*safari\//i],[U,[y,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[U,[y,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[y,"Chrome WebView"],U],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[U,[y,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[y,U],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[U,[y,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[U,y],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[y,[U,Xa,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[y,U],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[y,"Netscape"],U],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[U,[y,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[y,U]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[V,"amd64"]],[/(ia32(?=;))/i],[[V,J]],[/((?:i[346]|x)86)[;\)]/i],[[V,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[V,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[V,"armhf"]],[/windows (ce|mobile); ppc;/i],[[V,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[V,/ower/,"",J]],[/(sun4\w)[;\)]/i],[[V,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[V,J]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[C,[k,_a],[N,Z]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[C,[k,_a],[N,$]],[/\((ip(?:hone|od)[\w ]*);/i],[C,[k,"Apple"],[N,$]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[C,[k,"Apple"],[N,Z]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[C,[k,"Huawei"],[N,Z]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[C,[k,"Huawei"],[N,$]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[C,/_/g," "],[k,Aa],[N,$]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[C,/_/g," "],[k,Aa],[N,Z]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[C,[k,"OPPO"],[N,$]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[C,[k,"Vivo"],[N,$]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[C,[k,"Realme"],[N,$]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[C,[k,Kl],[N,$]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[C,[k,Kl],[N,Z]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[C,[k,"LG"],[N,Z]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[C,[k,"LG"],[N,$]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[C,[k,"Lenovo"],[N,Z]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[C,/_/g," "],[k,"Nokia"],[N,$]],[/(pixel c)\b/i],[C,[k,nl],[N,Z]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[C,[k,nl],[N,$]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[C,[k,ca],[N,$]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[C,"Xperia Tablet"],[k,ca],[N,Z]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[C,[k,"OnePlus"],[N,$]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[C,[k,ua],[N,Z]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[C,/(.+)/g,"Fire Phone $1"],[k,ua],[N,$]],[/(playbook);[-\w\),; ]+(rim)/i],[C,k,[N,Z]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[C,[k,qa],[N,$]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[C,[k,"ASUS"],[N,Z]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[C,[k,"ASUS"],[N,$]],[/(nexus 9)/i],[C,[k,"HTC"],[N,Z]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[k,[C,/_/g," "],[N,$]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[C,[k,"Acer"],[N,Z]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[C,[k,"Meizu"],[N,$]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[C,[k,"Sharp"],[N,$]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[k,C,[N,$]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[k,C,[N,Z]],[/(surface duo)/i],[C,[k,Dl],[N,Z]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[C,[k,"Fairphone"],[N,$]],[/(u304aa)/i],[C,[k,"AT&T"],[N,$]],[/\bsie-(\w*)/i],[C,[k,"Siemens"],[N,$]],[/\b(rct\w+) b/i],[C,[k,"RCA"],[N,Z]],[/\b(venue[\d ]{2,7}) b/i],[C,[k,"Dell"],[N,Z]],[/\b(q(?:mv|ta)\w+) b/i],[C,[k,"Verizon"],[N,Z]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[C,[k,"Barnes & Noble"],[N,Z]],[/\b(tm\d{3}\w+) b/i],[C,[k,"NuVision"],[N,Z]],[/\b(k88) b/i],[C,[k,"ZTE"],[N,Z]],[/\b(nx\d{3}j) b/i],[C,[k,"ZTE"],[N,$]],[/\b(gen\d{3}) b.+49h/i],[C,[k,"Swiss"],[N,$]],[/\b(zur\d{3}) b/i],[C,[k,"Swiss"],[N,Z]],[/\b((zeki)?tb.*\b) b/i],[C,[k,"Zeki"],[N,Z]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[k,"Dragon Touch"],C,[N,Z]],[/\b(ns-?\w{0,9}) b/i],[C,[k,"Insignia"],[N,Z]],[/\b((nxa|next)-?\w{0,9}) b/i],[C,[k,"NextBook"],[N,Z]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[k,"Voice"],C,[N,$]],[/\b(lvtel\-)?(v1[12]) b/i],[[k,"LvTel"],C,[N,$]],[/\b(ph-1) /i],[C,[k,"Essential"],[N,$]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[C,[k,"Envizen"],[N,Z]],[/\b(trio[-\w\. ]+) b/i],[C,[k,"MachSpeed"],[N,Z]],[/\btu_(1491) b/i],[C,[k,"Rotor"],[N,Z]],[/(shield[\w ]+) b/i],[C,[k,"Nvidia"],[N,Z]],[/(sprint) (\w+)/i],[k,C,[N,$]],[/(kin\.[onetw]{3})/i],[[C,/\./g," "],[k,Dl],[N,$]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[C,[k,Ya],[N,Z]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[C,[k,Ya],[N,$]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[k,C,[N,K]],[/droid.+; (shield) bui/i],[C,[k,"Nvidia"],[N,K]],[/(playstation [345portablevi]+)/i],[C,[k,ca],[N,K]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[C,[k,Dl],[N,K]],[/smart-tv.+(samsung)/i],[k,[N,ye]],[/hbbtv.+maple;(\d+)/i],[[C,/^/,"SmartTV"],[k,_a],[N,ye]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[k,"LG"],[N,ye]],[/(apple) ?tv/i],[k,[C,"Apple TV"],[N,ye]],[/crkey/i],[[C,"Chromecast"],[k,nl],[N,ye]],[/droid.+aft(\w)( bui|\))/i],[C,[k,ua],[N,ye]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[C,[k,"Sharp"],[N,ye]],[/(bravia[\w ]+)( bui|\))/i],[C,[k,ca],[N,ye]],[/(mitv-\w{5}) bui/i],[C,[k,Aa],[N,ye]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[k,Ze],[C,Ze],[N,ye]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[N,ye]],[/((pebble))app/i],[k,C,[N,be]],[/droid.+; (glass) \d/i],[C,[k,nl],[N,be]],[/droid.+; (wt63?0{2,3})\)/i],[C,[k,Ya],[N,be]],[/(quest( 2)?)/i],[C,[k,Zc],[N,be]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[k,[N,_s]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[C,[N,$]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[C,[N,Z]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[N,Z]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[N,$]],[/(android[-\w\. ]{0,9});.+buil/i],[C,[k,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[U,[y,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[U,[y,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[y,U],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[U,y]],os:[[/microsoft (windows) (vista|xp)/i],[y,U],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[y,[U,Xa,vl]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[y,"Windows"],[U,Xa,vl]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[U,/_/g,"."],[y,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[y,"Mac OS"],[U,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[U,y],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[y,U],[/\(bb(10);/i],[U,[y,qa]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[U,[y,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[U,[y,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[U,[y,"webOS"]],[/crkey\/([\d\.]+)/i],[U,[y,"Chromecast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[y,"Chromium OS"],U],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[y,U],[/(sunos) ?([\w\.\d]*)/i],[[y,"Solaris"],U],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[y,U]]},ff=function(cf,Vp){if(typeof cf===v&&(Vp=cf,cf=c),!(this instanceof ff))return new ff(cf,Vp).getResult();var _d=cf||(typeof i!==g&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),Gp=Vp?function(Lh,Op){var Uy={};for(var M0 in Lh)Uy[M0]=Op[M0]&&Op[M0].length%2==0?Op[M0].concat(Lh[M0]):Lh[M0];return Uy}(Oh,Vp):Oh;return this.getBrowser=function(){var Op,Lh={};return Lh.name=c,Lh.version=c,aa.call(Lh,_d,Gp.browser),Lh.major=typeof(Op=Lh.version)===m?Op.replace(/[^\d\.]/g,"").split(".")[0]:c,Lh},this.getCPU=function(){var Lh={};return Lh.architecture=c,aa.call(Lh,_d,Gp.cpu),Lh},this.getDevice=function(){var Lh={};return Lh.vendor=c,Lh.model=c,Lh.type=c,aa.call(Lh,_d,Gp.device),Lh},this.getEngine=function(){var Lh={};return Lh.name=c,Lh.version=c,aa.call(Lh,_d,Gp.engine),Lh},this.getOS=function(){var Lh={};return Lh.name=c,Lh.version=c,aa.call(Lh,_d,Gp.os),Lh},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return _d},this.setUA=function(Lh){return _d=typeof Lh===m&&Lh.length>350?Ze(Lh,350):Lh,this},this.setUA(_d),this};ff.VERSION="0.7.32",ff.BROWSER=Ol([y,U,"major"]),ff.CPU=Ol([V]),ff.DEVICE=Ol([C,k,N,K,$,ye,Z,be,_s]),ff.ENGINE=ff.OS=Ol([y,U]),e.exports&&(n=e.exports=ff),n.UAParser=ff;var Rh=typeof i!==g&&(i.jQuery||i.Zepto);if(Rh&&!Rh.ua){var Cg=new ff;Rh.ua=Cg.getResult(),Rh.ua.get=function(){return Cg.getUA()},Rh.ua.set=function(cf){Cg.setUA(cf);var Vp=Cg.getResult();for(var _d in Vp)Rh.ua[_d]=Vp[_d]}}}("object"==typeof window?window:p)}(TW,TW.exports);const wW=new TW.exports;let KR=wW.getResult();function Yp(e){return e&&wW.setUA(e),KR=wW.getResult(),{name:Rce(KR),version:Oce(KR),os:Dce(KR),osVersion:KR.os.version}}function Rce(e){if("Blink"===e.engine.name&&"WeChat"!==e.browser.name)return Kp.CHROME;switch(e.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return Kp.CHROME;case"Safari":case"Mobile Safari":return Kp.SAFARI;case"Edge":return Kp.EDGE;case"Firefox":return Kp.FIREFOX;case"QQBrowser":return Kp.QQ;case"Opera":return Kp.OPERA;case"WeChat":return Kp.WECHAT;default:return e.browser.name||""}}function Oce(e){let n;return n="Blink"===e.engine.name?e.engine.version||"":e.browser.version||"",n.split(".")[0]}function Dce(e){return"Windows"===e.os.name?e.os.version?e.os.name+" "+e.os.version:e.os.name:e.os.name||""}function xte(){return Yp().os}function j8(){const e=Yp();return!!("WebKit"===KR.engine.name&&e.os===My.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&e.name!==Kp.SAFARI||P_()&&e.name!==Kp.SAFARI)}function RW(){return Yp().name===Kp.CHROME}function L_(){return Yp().name===Kp.SAFARI}function h0(){return Yp().name===Kp.FIREFOX}function P_(){return Yp().os===My.IOS}function Q8(){const e=Yp();return!(e.name!==Kp.CHROME||!e.osVersion)&&Number(e.version)<=90}function OW(){const e=Yp();if(e.os!==My.IOS||!e.osVersion)return!1;const n=e.osVersion.split(".");return Number(n[0])<14||14===Number(n[0])&&Number(n[1])<=6}function FM(){const e=Yp();if(e.os!==My.IOS||!e.osVersion)return!1;const n=e.osVersion.split(".");return 15===Number(n[0])}function DW(){const e=Yp();if(e.os!==My.IOS||!e.osVersion)return!1;const n=e.osVersion.split(".");return 15===Number(n[0])&&0===Number(n[1])}function Bte(){const e=Yp();if(e.os!==My.IOS||!e.osVersion)return!1;const n=e.osVersion.split(".");return 15===Number(n[0])&&Number(n[1])>=1}function NW(){const e=Yp();if(e.os!==My.IOS||!e.osVersion)return!1;const n=e.osVersion.split(".");return 15===Number(n[0])&&Number(n[1])>=2}function YR(){return L_()&&navigator.maxTouchPoints>0}function kce(){return Yp().name===Kp.WECHAT}function Lce(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function jM(){const e=Yp();return e.name!==Kp.EDGE&&e.name!==Kp.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function Ute(){return Yp().os===My.ANDROID}function V8(){const e=Yp();return"Android"===e.os&&("Chrome"===e.name||e.name===Kp.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}var Fte={exports:{}},Qte=Q_.f;Ly({target:"Object",stat:!0,forced:Object.defineProperty!==Qte,sham:!R_},{defineProperty:Qte});var xce=aS.Object,Vte=Fte.exports=function(e,n,i){return xce.defineProperty(e,n,i)};xce.defineProperty.sham&&(Vte.sham=!0);var Gte=Fte.exports;function Y(e,n,i){return n in e?Gte(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}var VN,kW={exports:{}},R4=function(e,n){return function(){for(var i=new Array(arguments.length),c=0;c<i.length;c++)i[c]=arguments[c];return e.apply(n,i)}},Mce=R4,G8=Object.prototype.toString,LW=(VN=Object.create(null),function(e){var n=G8.call(e);return VN[n]||(VN[n]=n.slice(8,-1).toLowerCase())});function GN(e){return e=e.toLowerCase(),function(n){return LW(n)===e}}function O4(e){return Array.isArray(e)}function H8(e){return void 0===e}var D4=GN("ArrayBuffer");function N4(e){return null!==e&&"object"==typeof e}function k4(e){if("object"!==LW(e))return!1;var n=Object.getPrototypeOf(e);return null===n||n===Object.prototype}var Hte=GN("Date"),L4=GN("File"),qte=GN("Blob"),PW=GN("FileList");function P4(e){return"[object Function]"===G8.call(e)}var Wte=GN("URLSearchParams");function q8(e,n){if(null!=e)if("object"!=typeof e&&(e=[e]),O4(e))for(var i=0,c=e.length;i<c;i++)n.call(null,e[i],i,e);else for(var h in e)Object.prototype.hasOwnProperty.call(e,h)&&n.call(null,e[h],h,e)}var Bce=function(e){return function(n){return e&&n instanceof e}}("undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array)),x_={isArray:O4,isArrayBuffer:D4,isBuffer:function(e){return null!==e&&!H8(e)&&null!==e.constructor&&!H8(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var n="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||G8.call(e)===n||P4(e.toString)&&e.toString()===n)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&D4(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:N4,isPlainObject:k4,isUndefined:H8,isDate:Hte,isFile:L4,isBlob:qte,isFunction:P4,isStream:function(e){return N4(e)&&P4(e.pipe)},isURLSearchParams:Wte,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:q8,merge:function e(){var n={};function i(g,v){n[v]=k4(n[v])&&k4(g)?e(n[v],g):k4(g)?e({},g):O4(g)?g.slice():g}for(var c=0,h=arguments.length;c<h;c++)q8(arguments[c],i);return n},extend:function(e,n,i){return q8(n,function(c,h){e[h]=i&&"function"==typeof c?Mce(c,i):c}),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,n,i,c){e.prototype=Object.create(n.prototype,c),e.prototype.constructor=e,i&&Object.assign(e.prototype,i)},toFlatObject:function(e,n,i){var c,h,g,v={};n=n||{};do{for(h=(c=Object.getOwnPropertyNames(e)).length;h-- >0;)v[g=c[h]]||(n[g]=e[g],v[g]=!0);e=Object.getPrototypeOf(e)}while(e&&(!i||i(e,n))&&e!==Object.prototype);return n},kindOf:LW,kindOfTest:GN,endsWith:function(e,n,i){e=String(e),(void 0===i||i>e.length)&&(i=e.length);var c=e.indexOf(n,i-=n.length);return-1!==c&&c===i},toArray:function(e){if(!e)return null;var n=e.length;if(H8(n))return null;for(var i=new Array(n);n-- >0;)i[n]=e[n];return i},isTypedArray:Bce,isFileList:PW},QM=x_;function Kte(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var x4=function(e,n,i){if(!n)return e;var c;if(i)c=i(n);else if(QM.isURLSearchParams(n))c=n.toString();else{var h=[];QM.forEach(n,function(v,m){null!=v&&(QM.isArray(v)?m+="[]":v=[v],QM.forEach(v,function(C){QM.isDate(C)?C=C.toISOString():QM.isObject(C)&&(C=JSON.stringify(C)),h.push(Kte(m)+"="+Kte(C))}))}),c=h.join("&")}if(c){var g=e.indexOf("#");-1!==g&&(e=e.slice(0,g)),e+=(-1===e.indexOf("?")?"?":"&")+c}return e},Yte=x_;function xW(){this.handlers=[]}xW.prototype.use=function(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1},xW.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},xW.prototype.forEach=function(e){Yte.forEach(this.handlers,function(n){null!==n&&e(n)})};var MW=xW,BW=x_,Jte=x_;function HN(e,n,i,c,h){Error.call(this),this.message=e,this.name="AxiosError",n&&(this.code=n),i&&(this.config=i),c&&(this.request=c),h&&(this.response=h)}Jte.inherits(HN,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var zte=HN.prototype,Xte={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(e){Xte[e]={value:e}}),Object.defineProperties(HN,Xte),Object.defineProperty(zte,"isAxiosError",{value:!0}),HN.from=function(e,n,i,c,h,g){var v=Object.create(zte);return Jte.toFlatObject(e,v,function(m){return m!==Error.prototype}),HN.call(v,e.message,n,i,c,h),v.name=e.name,g&&Object.assign(v,g),v};var VM=HN,UW={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ZS=x_,$te=function(e,n){n=n||new FormData;var i=[];function c(h){return null===h?"":ZS.isDate(h)?h.toISOString():ZS.isArrayBuffer(h)||ZS.isTypedArray(h)?"function"==typeof Blob?new Blob([h]):Buffer.from(h):h}return function h(g,v){if(ZS.isPlainObject(g)||ZS.isArray(g)){if(-1!==i.indexOf(g))throw Error("Circular reference detected in "+v);i.push(g),ZS.forEach(g,function(m,C){if(!ZS.isUndefined(m)){var y,N=v?v+"."+C:C;if(m&&!v&&"object"==typeof m)if(ZS.endsWith(C,"{}"))m=JSON.stringify(m);else if(ZS.endsWith(C,"[]")&&(y=ZS.toArray(m)))return void y.forEach(function(k){!ZS.isUndefined(k)&&n.append(N,c(k))});h(m,N)}}),i.pop()}else n.append(v,c(g))}(e),n},W8=VM,K8=x_,Uce=K8.isStandardBrowserEnv()?{write:function(e,n,i,c,h,g){var v=[];v.push(e+"="+encodeURIComponent(n)),K8.isNumber(i)&&v.push("expires="+new Date(i).toGMTString()),K8.isString(c)&&v.push("path="+c),K8.isString(h)&&v.push("domain="+h),!0===g&&v.push("secure"),document.cookie=v.join("; ")},read:function(e){var n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},Zte=function(e,n){return e&&!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(n)?function(e,n){return n?e.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):e}(e,n):n},FW=x_,Pfe=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],ene=x_,Qce=ene.isStandardBrowserEnv()?function(){var e,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function c(h){var g=h;return n&&(i.setAttribute("href",g),g=i.href),i.setAttribute("href",g),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return e=c(window.location.href),function(h){var g=ene.isString(h)?c(h):h;return g.protocol===e.protocol&&g.host===e.host}}():function(){return!0},jW=VM;function Vce(e){jW.call(this,null==e?"canceled":e,jW.ERR_CANCELED),this.name="CanceledError"}x_.inherits(Vce,jW,{__CANCEL__:!0});var Y8=Vce,J8=x_,Gce=Uce,Hce=x4,qce=Zte,Bfe=Qce,tne=UW,K_=VM,Wce=Y8,i_=x_,Yce=function(e,n){BW.forEach(e,function(i,c){c!==n&&c.toUpperCase()===n.toUpperCase()&&(e[n]=i,delete e[c])})},Jce=VM,Ufe=$te,zce={"Content-Type":"application/x-www-form-urlencoded"};function Xce(e,n){!i_.isUndefined(e)&&i_.isUndefined(e["Content-Type"])&&(e["Content-Type"]=n)}var nne,VW={transitional:UW,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(nne=function(e){return new Promise(function(n,i){var c,h=e.data,g=e.headers,v=e.responseType;function m(){e.cancelToken&&e.cancelToken.unsubscribe(c),e.signal&&e.signal.removeEventListener("abort",c)}J8.isFormData(h)&&J8.isStandardBrowserEnv()&&delete g["Content-Type"];var C=new XMLHttpRequest;if(e.auth){var y=e.auth.username||"",N=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";g.Authorization="Basic "+btoa(y+":"+N)}var k=qce(e.baseURL,e.url);function U(){if(C){var $="getAllResponseHeaders"in C?function(e){var n,i,c,h={};return e&&FW.forEach(e.split("\n"),function(g){if(c=g.indexOf(":"),n=FW.trim(g.substr(0,c)).toLowerCase(),i=FW.trim(g.substr(c+1)),n){if(h[n]&&Pfe.indexOf(n)>=0)return;h[n]="set-cookie"===n?(h[n]?h[n]:[]).concat([i]):h[n]?h[n]+", "+i:i}}),h}(C.getAllResponseHeaders()):null;(function(e,n,i){var c=i.config.validateStatus;i.status&&c&&!c(i.status)?n(new W8("Request failed with status code "+i.status,[W8.ERR_BAD_REQUEST,W8.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i)):e(i)})(function(ye){n(ye),m()},function(ye){i(ye),m()},{data:v&&"text"!==v&&"json"!==v?C.response:C.responseText,status:C.status,statusText:C.statusText,headers:$,config:e,request:C}),C=null}}if(C.open(e.method.toUpperCase(),Hce(k,e.params,e.paramsSerializer),!0),C.timeout=e.timeout,"onloadend"in C?C.onloadend=U:C.onreadystatechange=function(){C&&4===C.readyState&&(0!==C.status||C.responseURL&&0===C.responseURL.indexOf("file:"))&&setTimeout(U)},C.onabort=function(){C&&(i(new K_("Request aborted",K_.ECONNABORTED,e,C)),C=null)},C.onerror=function(){i(new K_("Network Error",K_.ERR_NETWORK,e,C,C)),C=null},C.ontimeout=function(){var $=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";e.timeoutErrorMessage&&($=e.timeoutErrorMessage),i(new K_($,(e.transitional||tne).clarifyTimeoutError?K_.ETIMEDOUT:K_.ECONNABORTED,e,C)),C=null},J8.isStandardBrowserEnv()){var V=(e.withCredentials||Bfe(k))&&e.xsrfCookieName?Gce.read(e.xsrfCookieName):void 0;V&&(g[e.xsrfHeaderName]=V)}"setRequestHeader"in C&&J8.forEach(g,function($,Z){void 0===h&&"content-type"===Z.toLowerCase()?delete g[Z]:C.setRequestHeader(Z,$)}),J8.isUndefined(e.withCredentials)||(C.withCredentials=!!e.withCredentials),v&&"json"!==v&&(C.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&C.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&C.upload&&C.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(c=function($){C&&(i(!$||$&&$.type?new Wce:$),C.abort(),C=null)},e.cancelToken&&e.cancelToken.subscribe(c),e.signal&&(e.signal.aborted?c():e.signal.addEventListener("abort",c))),h||(h=null);var K=function(e){var n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}(k);K&&-1===["http","https","file"].indexOf(K)?i(new K_("Unsupported protocol "+K+":",K_.ERR_BAD_REQUEST,e)):C.send(h)})}),nne),transformRequest:[function(e,n){if(Yce(n,"Accept"),Yce(n,"Content-Type"),i_.isFormData(e)||i_.isArrayBuffer(e)||i_.isBuffer(e)||i_.isStream(e)||i_.isFile(e)||i_.isBlob(e))return e;if(i_.isArrayBufferView(e))return e.buffer;if(i_.isURLSearchParams(e))return Xce(n,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var i,c=i_.isObject(e),h=n&&n["Content-Type"];if((i=i_.isFileList(e))||c&&"multipart/form-data"===h){var g=this.env&&this.env.FormData;return Ufe(i?{"files[]":e}:e,g&&new g)}return c||"application/json"===h?(Xce(n,"application/json"),function(v,m,C){if(i_.isString(v))try{return(0,JSON.parse)(v),i_.trim(v)}catch(y){if("SyntaxError"!==y.name)throw y}return(0,JSON.stringify)(v)}(e)):e}],transformResponse:[function(e){var n=this.transitional||VW.transitional,h=!(n&&n.silentJSONParsing)&&"json"===this.responseType;if(h||n&&n.forcedJSONParsing&&i_.isString(e)&&e.length)try{return JSON.parse(e)}catch(g){if(h)throw"SyntaxError"===g.name?Jce.from(g,Jce.ERR_BAD_RESPONSE,this,null,this.response):g}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:null},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i_.forEach(["delete","get","head"],function(e){VW.headers[e]={}}),i_.forEach(["post","put","patch"],function(e){VW.headers[e]=i_.merge(zce)});var rne=VW,Ffe=x_,$ce=rne,Zce=function(e){return!(!e||!e.__CANCEL__)},eue=x_,ine=function(e,n,i){var c=this||$ce;return Ffe.forEach(i,function(h){e=h.call(c,e,n)}),e},jfe=Zce,Qfe=rne,Vfe=Y8;function one(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Vfe}var vS=x_,sne=function(e,n){n=n||{};var i={};function c(y,N){return vS.isPlainObject(y)&&vS.isPlainObject(N)?vS.merge(y,N):vS.isPlainObject(N)?vS.merge({},N):vS.isArray(N)?N.slice():N}function h(y){return vS.isUndefined(n[y])?vS.isUndefined(e[y])?void 0:c(void 0,e[y]):c(e[y],n[y])}function g(y){if(!vS.isUndefined(n[y]))return c(void 0,n[y])}function v(y){return vS.isUndefined(n[y])?vS.isUndefined(e[y])?void 0:c(void 0,e[y]):c(void 0,n[y])}function m(y){return y in n?c(e[y],n[y]):y in e?c(void 0,e[y]):void 0}var C={url:g,method:g,data:g,baseURL:v,transformRequest:v,transformResponse:v,paramsSerializer:v,timeout:v,timeoutMessage:v,withCredentials:v,adapter:v,responseType:v,xsrfCookieName:v,xsrfHeaderName:v,onUploadProgress:v,onDownloadProgress:v,decompress:v,maxContentLength:v,maxBodyLength:v,beforeRedirect:v,transport:v,httpAgent:v,httpsAgent:v,cancelToken:v,socketPath:v,responseEncoding:v,validateStatus:m};return vS.forEach(Object.keys(e).concat(Object.keys(n)),function(y){var N=C[y]||h,k=N(y);vS.isUndefined(k)&&N!==m||(i[y]=k)}),i},Y1=VM,JR={};["object","boolean","number","function","string","symbol"].forEach(function(e,n){JR[e]=function(i){return typeof i===e||"a"+(n<1?"n ":" ")+e}});var GW={};JR.transitional=function(e,n,i){function c(h,g){return"[Axios v0.27.2] Transitional option '"+h+"'"+g+(i?". "+i:"")}return function(h,g,v){if(!1===e)throw new Y1(c(g," has been removed"+(n?" in "+n:"")),Y1.ERR_DEPRECATED);return n&&!GW[g]&&(GW[g]=!0,console.warn(c(g," has been deprecated since v"+n+" and will be removed in the near future"))),!e||e(h,g,v)}};var HW=x_,zR=x4,ane=MW,cne=function(e){return one(e),e.headers=e.headers||{},e.data=ine.call(e,e.data,e.headers,e.transformRequest),e.headers=eue.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),eue.forEach(["delete","get","head","post","put","patch","common"],function(n){delete e.headers[n]}),(e.adapter||Qfe.adapter)(e).then(function(n){return one(e),n.data=ine.call(e,n.data,n.headers,e.transformResponse),n},function(n){return jfe(n)||(one(e),n&&n.response&&(n.response.data=ine.call(e,n.response.data,n.response.headers,e.transformResponse))),Promise.reject(n)})},z8=sne,nue=Zte,qW={assertOptions:function(e,n,i){if("object"!=typeof e)throw new Y1("options must be an object",Y1.ERR_BAD_OPTION_VALUE);for(var c=Object.keys(e),h=c.length;h-- >0;){var g=c[h],v=n[g];if(v){var m=e[g],C=void 0===m||v(m,g,e);if(!0!==C)throw new Y1("option "+g+" must be "+C,Y1.ERR_BAD_OPTION_VALUE)}else if(!0!==i)throw new Y1("Unknown option "+g,Y1.ERR_BAD_OPTION)}},validators:JR},qN=qW.validators;function J1(e){this.defaults=e,this.interceptors={request:new ane,response:new ane}}J1.prototype.request=function(e,n){"string"==typeof e?(n=n||{}).url=e:n=e||{},n.method=(n=z8(this.defaults,n)).method?n.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var i=n.transitional;void 0!==i&&qW.assertOptions(i,{silentJSONParsing:qN.transitional(qN.boolean),forcedJSONParsing:qN.transitional(qN.boolean),clarifyTimeoutError:qN.transitional(qN.boolean)},!1);var c=[],h=!0;this.interceptors.request.forEach(function(k){"function"==typeof k.runWhen&&!1===k.runWhen(n)||(h=h&&k.synchronous,c.unshift(k.fulfilled,k.rejected))});var g,v=[];if(this.interceptors.response.forEach(function(k){v.push(k.fulfilled,k.rejected)}),!h){var m=[cne,void 0];for(Array.prototype.unshift.apply(m,c),m=m.concat(v),g=Promise.resolve(n);m.length;)g=g.then(m.shift(),m.shift());return g}for(var C=n;c.length;){var y=c.shift(),N=c.shift();try{C=y(C)}catch(k){N(k);break}}try{g=cne(C)}catch(k){return Promise.reject(k)}for(;v.length;)g=g.then(v.shift(),v.shift());return g},J1.prototype.getUri=function(e){e=z8(this.defaults,e);var n=nue(e.baseURL,e.url);return zR(n,e.params,e.paramsSerializer)},HW.forEach(["delete","get","head","options"],function(e){J1.prototype[e]=function(n,i){return this.request(z8(i||{},{method:e,url:n,data:(i||{}).data}))}}),HW.forEach(["post","put","patch"],function(e){function n(i){return function(c,h,g){return this.request(z8(g||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:c,data:h}))}}J1.prototype[e]=n(),J1.prototype[e+"Form"]=n(!0)});var Gfe=J1,rue=Y8;function GM(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(c){n=c});var i=this;this.promise.then(function(c){if(i._listeners){var h,g=i._listeners.length;for(h=0;h<g;h++)i._listeners[h](c);i._listeners=null}}),this.promise.then=function(c){var h,g=new Promise(function(v){i.subscribe(v),h=v}).then(c);return g.cancel=function(){i.unsubscribe(h)},g},e(function(c){i.reason||(i.reason=new rue(c),n(i.reason))})}GM.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},GM.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},GM.prototype.unsubscribe=function(e){if(this._listeners){var n=this._listeners.indexOf(e);-1!==n&&this._listeners.splice(n,1)}},GM.source=function(){var e;return{token:new GM(function(n){e=n}),cancel:e}};var une=GM,lne=x_,WW=x_,iue=R4,b2=Gfe,Hy=sne,Y_=function e(n){var i=new b2(n),c=iue(b2.prototype.request,i);return WW.extend(c,b2.prototype,i),WW.extend(c,i),c.create=function(h){return e(Hy(n,h))},c}(rne);Y_.Axios=b2,Y_.CanceledError=Y8,Y_.CancelToken=une,Y_.isCancel=Zce,Y_.VERSION="0.27.2",Y_.toFormData=$te,Y_.AxiosError=VM,Y_.Cancel=Y_.CanceledError,Y_.all=function(e){return Promise.all(e)},Y_.spread=function(e){return function(n){return e.apply(null,n)}},Y_.isAxiosError=function(e){return lne.isObject(e)&&!0===e.isAxiosError},kW.exports=Y_,kW.exports.default=Y_;var r1=kW.exports;class X8{constructor(n){Y(this,"logger",void 0),Y(this,"prefixLists",[]),this.logger=n}debug(){for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];this.logger.debug(...this.prefixLists,...i)}info(){for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];this.logger.info(...this.prefixLists,...i)}warning(){for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];this.logger.warning(...this.prefixLists,...i)}error(){for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];this.logger.error(...this.prefixLists,...i)}prefix(n){return this.prefixLists.push(n),this}popPrefix(){return this.prefixLists.pop(),this}}class f0{constructor(){Y(this,"_events",{}),Y(this,"addListener",this.on)}getListeners(n){return this._events[n]?this._events[n].map(i=>i.listener):[]}on(n,i){this._events[n]||(this._events[n]=[]);const c=this._events[n];-1===this._indexOfListener(c,i)&&c.push({listener:i,once:!1})}once(n,i){this._events[n]||(this._events[n]=[]);const c=this._events[n];-1===this._indexOfListener(c,i)&&c.push({listener:i,once:!0})}off(n,i){if(!this._events[n])return;const c=this._events[n],h=this._indexOfListener(c,i);-1!==h&&c.splice(h,1),0===this._events[n].length&&delete this._events[n]}removeAllListeners(n){n?delete this._events[n]:this._events={}}emit(n){this._events[n]||(this._events[n]=[]);const i=this._events[n].map(v=>v);for(var c=arguments.length,h=new Array(c>1?c-1:0),g=1;g<c;g++)h[g-1]=arguments[g];for(let v=0;v<i.length;v+=1){const m=i[v];m.once&&this.off(n,m.listener),m.listener.apply(this,h||[])}}_indexOfListener(n,i){let c=n.length;for(;c--;)if(n[c].listener===i)return c;return-1}}const HM=new class extends f0{reportLogUploadError(e){this.emit("REPORT_LOG_UPLOAD",e)}};let _t;!function(e){e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_READABLE="NOT_READABLE",e.NOT_SUPPORTED="NOT_SUPPORTED",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORTED="OPERATION_ABORTED",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",e.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",e.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",e.UID_CONFLICT="UID_CONFLICT",e.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",e.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",e.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",e.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",e.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",e.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",e.INVALID_PLUGIN="INVALID_PLUGIN",e.DISCONNECT_P2P="DISCONNECT_P2P",e.INIT_WEBSOCKET_TIMEOUT="INIT_WEBSOCKET_TIMEOUT",e.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",e.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED",e.INIT_DATACHANNEL_TIMEOUT="INIT_DATACHANNEL_TIMEOUT",e.DATACHANNEL_CONNECTION_TIMEOUT="DATACHANNEL_CONNECTION_TIMEOUT"}(_t||(_t={}));class ea extends Error{constructor(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=arguments.length>2?arguments[2]:void 0;super(i),Y(this,"code",void 0),Y(this,"message",void 0),Y(this,"data",void 0),Y(this,"name","AgoraRTCException"),this.code=n,this.message="AgoraRTCError ".concat(this.code,": ").concat(i),this.data=c}toString(){return this.data?"data: ".concat(JSON.stringify(this.data),"\n").concat(this.stack):"".concat(this.stack)}print(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error";return"error"===n&&de.error(this.toString()),"warning"===n&&de.warning(this.toString()),this}throw(){throw this.print(),this}}const W0={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function KW(e,n){const i=Math.floor(n.timeout*Math.pow(n.timeoutFactor,e));return Math.min(n.maxRetryTimeout,i)}function JT(e,n,i,c){const h=Object.assign({},W0,c);let g=h.timeout;const v=function(){var y=l(function*(){var N;yield(N=g,new _l(k=>{window.setTimeout(k,N)})),g*=h.timeoutFactor,g=Math.min(h.maxRetryTimeout,g)});return function(){return y.apply(this,arguments)}}();let m=!1;const C=new _l(function(){var y=l(function*(N,k){n=n||(()=>!1),i=i||(()=>!0);for(let U=0;U<h.maxRetryCount;U+=1){if(m)return k(new ea(_t.OPERATION_ABORTED));try{const V=yield e();if(!n(V,U)||U+1===h.maxRetryCount)return N(V);yield v()}catch(V){if(!i(V,U)||U+1===h.maxRetryCount)return k(V);yield v()}}});return function(N,k){return y.apply(this,arguments)}}());return C.cancel=()=>m=!0,C}function dne(){const e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}function oue(){const e=new Date,n=/((\d+:){2}\d+)/.exec((new Date).toUTCString());return n?(null==n?void 0:n[0])+":"+e.getUTCMilliseconds():e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}const yS={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},YW=Date.now(),$8=e=>{for(const n in yS)if(Object.prototype.hasOwnProperty.call(yS,n)&&yS[n]===e)return n;return"DEFAULT"},de=new class{constructor(){Y(this,"proxyServerURL",void 0),Y(this,"logLevel",yS.DEBUG),Y(this,"uploadState","collecting"),Y(this,"uploadLogWaitingList",[]),Y(this,"uploadLogUploadingList",[]),Y(this,"uploadErrorCount",0),Y(this,"currentLogID",0),Y(this,"url",void 0),Y(this,"extLog",(e,n)=>{this.appendLogToWaitingList(e,...n)})}debug(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const c=[yS.DEBUG].concat(n);this.log.apply(this,c)}info(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const c=[yS.INFO].concat(n);this.log.apply(this,c)}warning(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const c=[yS.WARNING].concat(n);this.log.apply(this,c)}error(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const c=[yS.ERROR].concat(n);this.log.apply(this,c)}upload(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const c=[yS.DEBUG].concat(n);this.uploadLog.apply(this,c)}setLogLevel(e){e=Math.min(Math.max(0,e),4),this.logLevel=e}enableLogUpload(){Ag("UPLOAD_LOG",!0)}disableLogUpload(){Ag("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(e){this.proxyServerURL=e}prefix(e){return new X8(this).prefix(e)}log(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(Date.now()-YW<100)return void setTimeout(()=>{this.log(...n)},Date.now()-YW);const c=Math.max(0,Math.min(4,n[0]));if(n[0]=dne()+" Agora-SDK [".concat($8(c),"]:"),this.appendLogToWaitingList(c,...n),c<this.logLevel)return;const h=dne()+" %cAgora-SDK [".concat($8(c),"]:");let g=[];if(!ya("USE_NEW_LOG"))switch(c){case yS.DEBUG:g=[h,"color: #64B5F6;"].concat(n.slice(1)),console.log.apply(console,g);break;case yS.INFO:g=[h,"color: #1E88E5; font-weight: bold;"].concat(n.slice(1)),console.log.apply(console,g);break;case yS.WARNING:g=[h,"color: #FB8C00; font-weight: bold;"].concat(n.slice(1)),console.warn.apply(console,g);break;case yS.ERROR:g=[h,"color: #B00020; font-weight: bold;"].concat(n.slice(1)),console.error.apply(console,g)}}uploadLog(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(Date.now()-YW<100)return void setTimeout(()=>{this.uploadLog(...n)},Date.now()-YW);const c=Math.max(0,Math.min(4,n[0]));n[0]=dne()+" Agora-SDK [".concat($8(c),"]:"),this.appendLogToWaitingList(c,...n)}appendLogToWaitingList(e){if(!ya("UPLOAD_LOG"))return;for(var n=arguments.length,i=new Array(n>1?n-1:0),c=1;c<n;c++)i[c-1]=arguments[c];Array.isArray(i[0])?i[0][0]=oue()+" Agora-SDK [".concat($8(e),"]:"):i[0]=oue()+" Agora-SDK [".concat($8(e),"]:");let h="";i.forEach(g=>{"object"==typeof g&&(g=JSON.stringify(g)),h+="".concat(g," ")}),this.uploadLogWaitingList.push({payload_str:h,log_level:e,log_item_id:this.currentLogID++}),"uploading"===this.uploadState&&0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}uploadLogs(){var e=this;return l(function*(){const n=e.uploadLogUploadingList,i={sdk_version:o1,process_id:ya("PROCESS_ID"),payload:JSON.stringify(n)};return JT(l(function*(){const c=yield r1.post(e.url||(e.proxyServerURL?"https://".concat(e.proxyServerURL,"/ls/?h=").concat(ya("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(ya("LOG_UPLOAD_SERVER"),"/upload/v1")),i,{responseType:"text"});if("OK"!==c.data){const h=new Error("unexpected upload log response");throw h.response=c,h}}),()=>(e.uploadLogUploadingList=[],!1),c=>(HM.reportLogUploadError(c.response?{status:c.response.status,data:c.response.data,headers:c.response.headers,message:c.message}:c.request?{status:c.request.status,message:c.message}:{status:-1,message:c.message}),!0),{timeout:ya("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:ya("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})})()}uploadLogInterval(){0===this.uploadLogUploadingList.length&&0===this.uploadLogWaitingList.length||(0===this.uploadLogUploadingList.length&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,ya("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then(()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout(()=>this.uploadLogInterval(),ya("UPLOAD_LOG_INTERVAL"))}).catch(e=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout(()=>this.uploadLogInterval(),ya("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout(()=>this.uploadLogInterval(),ya("UPLOAD_LOG_RETRY_INTERVAL_V1"))}))}},JW={debug:console.log,info:console.log,warning:console.warn,error:console.error},Z8={debug:"color: #64B5F6;",info:"color: #1E88E5; font-weight: bold;",warning:"color: #FB8C00; font-weight: bold;",error:"color: #B00020; font-weight: bold;"},sue={debug:0,info:1,warning:2,error:3},M4=[];let B4,eQ=0,zW=0,hne=!1;function qM(){const e=new Date;return[e.getTime(),e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()]}function tQ(e){if(!ya("UPLOAD_LOG"))return;let n;switch(e.type){case Xp.MISC:n=[e.timestamp,e.level,e.type,e.module,e.instanceId,[e.msg]];break;case Xp.INTERNAL_EVENT:case Xp.PUBLIC_EVENT:case Xp.WEB_EVENT:n=[e.timestamp,e.level,e.type,e.module,e.instanceId,[e.event,e.msg]];break;case Xp.INTERNAL_API:case Xp.PUBLIC_API:case Xp.WEB_API:n=[e.timestamp,e.level,e.type,e.module,e.instanceId,[e.api,e.args,e.result]]}M4.push(n)}function aue(e,n){const[i,c]=qM(),h="warning",g="".concat(c," %cAgora-SDK [").concat(h,"] [INTERNAL API]:"),v={[Xp.WEB_API]:"logWebAPI",[Xp.PUBLIC_API]:"logPublicAPI",[Xp.INTERNAL_API]:"logInternalAPI",[Xp.WEB_EVENT]:"logWebEvent",[Xp.PUBLIC_EVENT]:"logPublicEvent",[Xp.INTERNAL_EVENT]:"logInternalEvent",[Xp.MISC]:"logMisc"}[e],m=[g,Z8.warning,"Log.".concat(v),n];ya("USE_NEW_LOG")&&(nQ(h)&&JW.warning.apply(console,m),tQ({timestamp:i,level:h,module:"Log",instanceId:void 0,type:Xp.INTERNAL_API,api:v,args:void 0,result:n.toString()}))}function fne(e){if(Array.isArray(e)){let[c,h]=e;return c||(c="Global"),{module:c,instanceId:h}}let n,i;if("string"!=typeof e.__moduleName)throw new Error("Cannot get __moduleName from log instance.");n=e.__moduleName;try{i=e.__instanceId}catch(c){throw new Error("Cannot get __instanceId from log instance.")}return{module:n,instanceId:i}}function nQ(e){return sue[e]>=zW}function XW(e,n,i,c,h,g){if(e===Xp.PUBLIC_API||e===Xp.WEB_API||e===Xp.INTERNAL_API)try{const{module:v,instanceId:m}=fne(i);h=h&&JSON.stringify(h),g=g instanceof Error?g.toString():g&&JSON.stringify(g);const[C,y]=qM(),N=["".concat(y," %cAgora-SDK [").concat(n,"] [").concat({[Xp.PUBLIC_API]:"PUBLIC API",[Xp.WEB_API]:"WEB API",[Xp.INTERNAL_API]:"INTERNAL API"}[e],"]:"),Z8[n],"".concat(v).concat(m?"<".concat(m,">"):"",".").concat(c),h,g];ya("USE_NEW_LOG")&&(nQ(n)&&JW[n].apply(console,N),tQ({timestamp:C,level:n,module:v,instanceId:m,type:e,api:c,args:h,result:g}))}catch(v){aue(e,v)}}function pne(e,n,i,c,h){if(e===Xp.WEB_EVENT||e===Xp.INTERNAL_EVENT||e===Xp.PUBLIC_EVENT)try{const{module:g,instanceId:v}=fne(i);"string"!=typeof h&&(h=h instanceof Error?h.toString():JSON.stringify(h));const[m,C]=qM(),y=["".concat(C," %cAgora-SDK [").concat(n,"] [").concat({[Xp.WEB_EVENT]:"WEB EVENT",[Xp.PUBLIC_EVENT]:"PUBLIC EVENT",[Xp.INTERNAL_EVENT]:"INTERNAL EVENT"}[e],"]:"),Z8[n],"".concat(g).concat(v?"<".concat(v,">"):"",".on(").concat(c,")"),h||""];ya("USE_NEW_LOG")&&(nQ(n)&&JW[n].apply(console,y),tQ({timestamp:m,level:n,module:g,instanceId:v,type:e,event:c,msg:h}))}catch(g){aue(e,g)}}function rQ(e){B4=e}function pl(e,n,i){try{const{module:c,instanceId:h}=fne(n),[g,v]=qM(),m=["".concat(v," %cAgora-SDK [").concat(e,"] [MISC]:"),Z8[e],"".concat(c).concat(h?"<".concat(h,">"):""),'"'.concat(i,'"')];ya("USE_NEW_LOG")&&(nQ(e)&&JW[e].apply(console,m),tQ({timestamp:g,level:e,module:c,instanceId:h,type:Xp.MISC,msg:i}))}catch(c){Gc("warning",["log"],"logMisc",void 0,c)}}function p0(e,n,i,c){pne(Xp.INTERNAL_EVENT,e,n,i,c)}function z1(e,n,i,c){pne(Xp.PUBLIC_EVENT,e,n,i,c)}function i1(e,n,i,c){pne(Xp.WEB_EVENT,e,n,i,c)}function Gc(e,n,i,c,h){XW(Xp.INTERNAL_API,e,n,i,c,h)}function WM(e,n,i,c,h){XW(Xp.WEB_API,e,n,i,c,h)}function Jl(e,n,i,c,h){XW(Xp.PUBLIC_API,e,n,i,c,h)}function uy(e,n){return function(i){return class extends i{get __moduleName(){return e}get __instanceId(){if(n){if("function"==typeof this[n])return this[n]();{const c=n.split(".");return c.length>0?_A(c).call(c,(h,g)=>{try{return h&&h[g]}catch(v){return}},this):this[n]}}}}}}function iQ(e){return $W.apply(this,arguments)}function $W(){return $W=l(function*(e){if(!e&&hne)return;if(hne=!0,!ya("UPLOAD_LOG"))return void setTimeout(()=>iQ(!0),ya("UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF"));if(0===M4.length)return void setTimeout(()=>iQ(!0),ya("UPLOAD_LOG_INTERVAL"));const n=M4.slice(0,ya("UPLOAD_LOG_LENGTH_EACH_TIME")),i={sdk_version:o1,log_version:ya("LOG_VERSION"),process_id:ya("PROCESS_ID"),index:eQ,logs:JSON.stringify(n)};yield JT(l(function*(){const c=yield r1.post(B4?"https://".concat(B4,"/ls/?h=").concat(ya("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(ya("LOG_UPLOAD_SERVER"),"/upload/v1"),i,{responseType:"text"});if("OK"!==c.data)throw new Error("Log service response error ".concat(c.data));return c}),void 0,void 0,{timeout:ya("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:ya("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")}),M4.splice(0,ya("UPLOAD_LOG_LENGTH_EACH_TIME")),eQ+=n.length,setTimeout(()=>iQ(!0),ya("UPLOAD_LOG_INTERVAL"))}),$W.apply(this,arguments)}const oQ="v4.15.1-0-g31e59714-dirty(12/2/2022, 5:43:26 PM)",o1=function(e){if(e.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return e;const n=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(n&&n[1]&&n[2]){const h=n[2];return"".concat(n[1],".").concat(h)}const i=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(i&&i[1]&&i[2]){const h=i[2];return"".concat(i[1],".").concat(100*(Number(h)+1))}return"4.0.0.999"}("4.15.1"),ZW=function(){try{return!0===JSON.parse("true")}catch(e){return!0}}(),s1=function(){const e="us".concat("erna","me"),n="pa".concat("sswo","rd"),i=["t","s","t"];i.splice(1,0,"e");const c=i.join(""),h=[];for(let m=0;m<6;m++)h.push("1");const g=h.join(""),v={};return v[e]=c,v[n]=g,Object.assign(v,{turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=s1;const sQ={"90p":bf(160,90),"90p_1":bf(160,90),"120p":bf(160,120,15,30,65),"120p_1":bf(160,120,15,30,65),"120p_3":bf(120,120,15,30,50),"120p_4":bf(212,120),"180p":bf(320,180,15,30,140),"180p_1":bf(320,180,15,30,140),"180p_3":bf(180,180,15,30,100),"180p_4":bf(240,180,15,30,120),"240p":bf(320,240,15,40,200),"240p_1":bf(320,240,15,40,200),"240p_3":bf(240,240,15,40,140),"240p_4":bf(424,240,15,40,220),"360p":bf(640,360,15,80,400),"360p_1":bf(640,360,15,80,400),"360p_3":bf(360,360,15,80,260),"360p_4":bf(640,360,30,80,600),"360p_6":bf(360,360,30,80,400),"360p_7":bf(480,360,15,80,320),"360p_8":bf(480,360,30,80,490),"360p_9":bf(640,360,15,80,800),"360p_10":bf(640,360,24,80,800),"360p_11":bf(640,360,24,80,1e3),"480p":bf(640,480,15,100,500),"480p_1":bf(640,480,15,100,500),"480p_2":bf(640,480,30,100,1e3),"480p_3":bf(480,480,15,100,400),"480p_4":bf(640,480,30,100,750),"480p_6":bf(480,480,30,100,600),"480p_8":bf(848,480,15,100,610),"480p_9":bf(848,480,30,100,930),"480p_10":bf(640,480,10,100,400),"720p":bf(1280,720,15,120,1130),"720p_1":bf(1280,720,15,120,1130),"720p_2":bf(1280,720,30,120,2e3),"720p_3":bf(1280,720,30,120,1710),"720p_5":bf(960,720,15,120,910),"720p_6":bf(960,720,30,120,1380),"1080p":bf(1920,1080,15,120,2080),"1080p_1":bf(1920,1080,15,120,2080),"1080p_2":bf(1920,1080,30,120,3e3),"1080p_3":bf(1920,1080,30,120,3150),"1080p_5":bf(1920,1080,60,120,4780),"1440p":bf(2560,1440,30,120,4850),"1440p_1":bf(2560,1440,30,120,4850),"1440p_2":bf(2560,1440,60,120,7350),"4k":bf(3840,2160,30,120,8910),"4k_1":bf(3840,2160,30,120,8910),"4k_3":bf(3840,2160,60,120,13500)},aQ={"480p":$1(640,480,5),"480p_1":$1(640,480,5),"480p_2":$1(640,480,30),"480p_3":$1(640,480,15),"720p":$1(1280,720,5),"720p_1":$1(1280,720,5),"720p_2":$1(1280,720,30),"720p_3":$1(1280,720,15),"1080p":$1(1920,1080,5),"1080p_1":$1(1920,1080,5),"1080p_2":$1(1920,1080,30),"1080p_3":$1(1920,1080,15)},cue={"1SL1TL":_K(1,1),"3SL3TL":_K(3,3),"2SL3TL":_K(2,3)};function C2(e){return"string"==typeof e?Object.assign({},sQ[e]):e}function cQ(e){return"string"==typeof e?Object.assign({},aQ[e]):e}function U4(e){return"string"==typeof e?Object.assign({},cue[e]):e}const uue={speech_low_quality:X1(16e3,!1),speech_standard:X1(32e3,!1,18),music_standard:X1(48e3,!1),standard_stereo:X1(48e3,!0,56),high_quality:X1(48e3,!1,128),high_quality_stereo:X1(48e3,!0,192)};function zT(e){return"string"==typeof e?Object.assign({},uue[e]):e}function Ag(e,n,i){Object.keys(J_).includes(e)&&(!i&&Object.keys(uQ).includes(e)||(J_[e]=n))}function ya(e){return J_[e]}const J_={PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",ENABLE_EVENT_REPORT:!0,GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],SUBSCRIBE_TCC:!0,PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,USE_RTX:!1,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION:2e3,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:["agora.io","sd-rtn.com"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!0,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,ENABLE_USER_LICENSE_CHECK:!0,SIGNAL_CHANNEL:0,TRANSMITTER_INITIAL_RTT:30,TRANSMITTER_INITIAL_RTO:30,TRANSMITTER_MAX_BATCH_ACK_COUNT:2,TRANSMITTER_MAX_RTO:500,DATACHANNEL_COMPRESS:!0,FINGERPRINT:null,DC_JOIN_WITH_FAILBACK:5e3,DISABLE_WEBAUDIO:!1,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,SPATIALIZER_PARAMETERS:{}},uQ={};function X1(e,n,i){return{sampleRate:e,stereo:n,bitrate:i}}function bf(e,n,i,c,h){return{width:e,height:n,frameRate:i,bitrateMin:c,bitrateMax:h}}function $1(e,n,i,c,h){return{width:{max:e},height:{max:n},frameRate:i,bitrateMin:c,bitrateMax:h}}function _K(e,n){return{numSpatialLayers:e,numTemporalLayers:n}}ZW||(J_.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],J_.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],J_.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],J_.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],J_.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],J_.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],J_.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",J_.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",J_.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",J_.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",J_.AREAS=["NORTH_AMERICA","OVERSEA"]);const gne=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],KM=[],XT=[];var Z1=QP,lue=Q_,XR=NT,YM=function(e,n,i){var c=Z1(n);c in e?lue.f(e,c,XR(0,i)):e[c]=i},JM=yX,Ane=QS,due=YM,hue=_h.Array,fue=Math.max,eY=function(e,n,i){for(var c=Ane(e),h=JM(n,c),g=JM(void 0===i?c:i,c),v=hue(fue(g-h,0)),m=0;h<g;h++,m++)due(v,m,e[h]);return v.length=m,v},mne=eY,pue=Math.floor,lQ=function(e,n){var i=e.length,c=pue(i/2);return i<8?Ene(e,n):gue(e,lQ(mne(e,0,c),n),lQ(mne(e,c),n),n)},Ene=function(e,n){for(var i,c,h=e.length,g=1;g<h;){for(c=g,i=e[g];c&&n(e[c-1],i)>0;)e[c]=e[--c];c!==g++&&(e[c]=i)}return e},gue=function(e,n,i,c){for(var h=n.length,g=i.length,v=0,m=0;v<h||m<g;)e[v+m]=v<h&&m<g?c(n[v],i[m])<=0?n[v++]:i[m++]:v<h?n[v++]:i[m++];return e},vne=lQ,yne=cS.match(/firefox\/(\d+)/i),Aue=!!yne&&+yne[1],_ne=/MSIE|Trident/.test(cS),zp=cS.match(/AppleWebKit\/(\d+)\./),zM=Ly,tY=O0,nY=_b,Eue=W1,vue=QS,Ine=u2,_S=zg,bne=vne,Cne=la,rY=Aue,Hfe=_ne,h_=PS,eT=!!zp&&+zp[1],S2=[],Sne=tY(S2.sort),Tne=tY(S2.push),wne=_S(function(){S2.sort(void 0)}),yue=_S(function(){S2.sort(null)}),Rne=Cne("sort"),One=!_S(function(){if(h_)return h_<70;if(!(rY&&rY>3)){if(Hfe)return!0;if(eT)return eT<603;var e,n,i,c,h="";for(e=65;e<76;e++){switch(n=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:i=3;break;case 68:case 71:i=4;break;default:i=2}for(c=0;c<47;c++)S2.push({k:n+c,v:i})}for(S2.sort(function(g,v){return v.v-g.v}),c=0;c<S2.length;c++)n=S2[c].k.charAt(0),h.charAt(h.length-1)!==n&&(h+=n);return"DGBEFHACIJK"!==h}});zM({target:"Array",proto:!0,forced:wne||!yue||!Rne||!One},{sort:function(e){void 0!==e&&nY(e);var n=Eue(this);if(One)return void 0===e?Sne(n):Sne(n,e);var i,c,h=[],g=vue(n);for(c=0;c<g;c++)c in n&&Tne(h,n[c]);for(bne(h,function(v){return function(m,C){return void 0===C?-1:void 0===m?1:void 0!==v?+v(m,C)||0:Ine(m)>Ine(C)?1:-1}}(e)),i=h.length,c=0;c<i;)n[c]=h[c++];for(;c<g;)delete n[c++];return n}});var Dne=Ml("Array").sort,Nne=gy,dQ=Dne,$R=Array.prototype,Eg=function(e){var n=e.sort;return e===$R||Nne($R,e)&&n===$R.sort?dQ:n};function ZR(e,n){if("boolean"!=typeof e)throw new ea(_t.INVALID_PARAMS,"Invalid ".concat(n,": The value is of the boolean type."))}function qy(e,n,i){if(!i.includes(e))throw new ea(_t.INVALID_PARAMS,"".concat(n," can only be set as ").concat(JSON.stringify(i)))}function yp(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;if(e<i||e>c||(!(arguments.length>4&&void 0!==arguments[4])||arguments[4])&&!hQ(e))throw new ea(_t.INVALID_PARAMS,"invalid ".concat(n,": the value range is [").concat(i,", ").concat(c,"]. integer only"))}function iY(e,n){if("number"!=typeof e){if(!(e.min||e.max||e.ideal||e.exact))throw new ea(_t.INVALID_PARAMS,"".concat(n," is not a valid ConstrainLong"));void 0!==e.min&&yp(e.min,"".concat(n,".min"),0,1/0),void 0!==e.max&&yp(e.max,"".concat(n,".max"),1,1/0),void 0!==e.exact&&yp(e.exact,"".concat(n,".exact"),1,1/0),void 0!==e.ideal&&yp(e.ideal,"".concat(n,".ideal"),1,1/0)}else yp(e,n,1,1/0)}function By(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255,h=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(null==e)throw new ea(_t.INVALID_PARAMS,"".concat(n||"param"," cannot be empty"));if(!sY(e,i,c,h))throw new ea(_t.INVALID_PARAMS,"Invalid ".concat(n||"string param",": Length of the string: [").concat(i,",").concat(c,"].").concat(h?" ASCII characters only.":""))}function $T(e,n){if(!Array.isArray(e))throw new ea(_t.INVALID_PARAMS,"".concat(n," should be an array"))}function oY(e){if("string"!=typeof e||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(e))throw de.error("Invalid Channel Name ".concat(e)),new ea(_t.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function XM(e){if(!("number"==typeof(n=e)&&Math.floor(n)===n&&0<=n&&n<=4294967295||sY(e,1,255)))throw de.error("Invalid UID ".concat(e," ").concat(typeof e)),new ea(_t.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");var n;"string"==typeof e&&de.warning("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}function Fg(e){return null==e}function sY(e){return"string"==typeof e&&e.length<=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:255)&&e.length>=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)&&(!(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])||_ue(e))}function hQ(e){return"number"==typeof e&&e%1==0}function _ue(e){if("string"!=typeof e)return!1;for(let n=0;n<e.length;n+=1){const i=e.charCodeAt(n);if(i<0||i>255)return!1}return!0}let fQ,Xp,Wy;(function(e){e.FREE="free",e.UPLOADING="uploading"})(fQ||(fQ={})),function(e){e[e.MISC=0]="MISC",e[e.INTERNAL_EVENT=1]="INTERNAL_EVENT",e[e.PUBLIC_EVENT=2]="PUBLIC_EVENT",e[e.WEB_EVENT=3]="WEB_EVENT",e[e.INTERNAL_API=4]="INTERNAL_API",e[e.WEB_API=5]="WEB_API",e[e.PUBLIC_API=6]="PUBLIC_API"}(Xp||(Xp={})),function(e){e.NONE="none",e.INIT="init",e.CANPLAY="canplay",e.PLAYING="playing",e.PAUSED="paused",e.SUSPEND="suspend",e.STALLED="stalled",e.WAITING="waiting",e.ERROR="error",e.DESTROYED="destroyed",e.ABORT="abort",e.ENDED="ended",e.EMPTIED="emptied",e.LOADEDDATA="loadeddata"}(Wy||(Wy={}));const pQ={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};function Iue(e){return By(e.reportId,"params.reportId",0,100,!1),By(e.category,"params.category",0,100,!1),By(e.event,"params.event",0,100,!1),By(e.label,"params.label",0,100,!1),yp(e.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}const bue={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};let Ky,s0,kne,aY,zl,Gl,WN,ZT,T2,KN,Ey,Z0,Ql,gQ,Rp,Vh,f_,Up,Ll,ql,p_,Kh,AQ,g_;function Lne(e){return yp(e.timeout,"config.timeout",0,1e5),yp(e.timeoutFactor,"config.timeoutFactor",0,100,!1),yp(e.maxRetryCount,"config.maxRetryConfig",0,1/0),yp(e.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}function F4(e){return qy(e.codec,"config.codec",["vp8","vp9","av1","h264"]),qy(e.mode,"config.mode",["rtc","live"]),void 0!==e.audioCodec&&qy(e.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),void 0!==e.proxyServer&&By(e.proxyServer,"config.proxyServer",1,1e4),void 0!==e.turnServer&&Pne(e.turnServer),void 0!==e.httpRetryConfig&&Lne(e.httpRetryConfig),void 0!==e.websocketRetryConfig&&Lne(e.websocketRetryConfig),!0}function j4(e){if(!Array.isArray(e)||e.length<1)return!1;try{e.forEach(n=>{if(!n.urls)throw Error()})}catch(n){return!1}return!0}function Pne(e){return By(e.turnServerURL,"turnServerURL"),By(e.username,"username"),By(e.password,"password"),e.udpport&&yp(e.udpport,"udpport",1,99999,!0),e.forceturn&&ZR(e.forceturn,"forceturn"),e.security&&ZR(e.security,"security"),e.tcpport&&yp(e.tcpport,"tcpport",1,99999,!0),!0}function xne(e){return void 0!==e.level&&qy(e.level,"level",[1,2,3]),!0}(function(e){e.PUBLISH="publish",e.SUBSCRIBE="subscribe",e.WS_COMPRESSOR_INIT="ws_compressor_init",e.SESSION_INIT="session_init",e.JOIN_CHOOSE_SERVER="join_choose_server",e.REQ_USER_ACCOUNT="req_user_account",e.JOIN_GATEWAY="join_gateway",e.REJOIN_GATEWAY="rejoin_gateway",e.STREAM_SWITCH="stream_switch",e.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",e.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",e.FIRST_VIDEO_RECEIVED="first_video_received",e.FIRST_AUDIO_RECEIVED="first_audio_received",e.FIRST_VIDEO_DECODE="first_video_decode",e.FIRST_AUDIO_DECODE="first_audio_decode",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_UPDATE_STREAM="on_update_stream",e.ON_REMOVE_STREAM="on_remove_stream",e.USER_ANALYTICS="req_user_analytics"})(Ky||(Ky={})),function(e){e.SESSION="io.agora.pb.Wrtc.Session",e.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",e.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",e.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",e.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",e.PUBLISH="io.agora.pb.Wrtc.Publish",e.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",e.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",e.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",e.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",e.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",e.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",e.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",e.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",e.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",e.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",e.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",e.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",e.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",e.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",e.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",e.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",e.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",e.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",e.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",e.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",e.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",e.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",e.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",e.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed"}(s0||(s0={})),function(e){e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}(kne||(kne={})),function(e){e[e.SESSION=26]="SESSION",e[e.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",e[e.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",e[e.JOIN_GATEWAY=28]="JOIN_GATEWAY",e[e.PUBLISH=30]="PUBLISH",e[e.SUBSCRIBE=29]="SUBSCRIBE",e[e.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",e[e.STREAM_SWITCH=32]="STREAM_SWITCH",e[e.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",e[e.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",e[e.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",e[e.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",e[e.API_INVOKE=41]="API_INVOKE",e[e.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",e[e.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",e[e.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",e[e.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",e[e.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",e[e.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",e[e.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",e[e.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",e[e.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",e[e.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",e[e.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",e[e.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",e[e.USER_ANALYTICS=1e4]="USER_ANALYTICS",e[e.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED"}(aY||(aY={})),function(e){e.CREATE_CLIENT="createClient",e.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",e.SET_AREA="setArea",e.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",e.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",e.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",e.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",e.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",e.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",e.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",e.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",e.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",e.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",e.START_PROXY_SERVER="Client.startProxyServer",e.STOP_PROXY_SERVER="Client.stopProxyServer",e.SET_PROXY_SERVER="Client.setProxyServer",e.SET_TURN_SERVER="Client.setTurnServer",e.SET_CLIENT_ROLE="Client.setClientRole",e.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",e.ENABLE_DUAL_STREAM="Client.enableDualStream",e.DISABLE_DUAL_STREAM="Client.disableDualStream",e.JOIN="Client.join",e.LEAVE="Client.leave",e.PUBLISH="Client.publish",e.UNPUBLISH="Client.unpublish",e.SUBSCRIBE="Client.subscribe",e.MASS_SUBSCRIBE="Client.massSubscribe",e.MASS_UNSUBSCRIBE="Client.massUnsubscribe",e.UNSUBSCRIBE="Client.unsubscribe",e.RENEW_TOKEN="Client.renewToken",e.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",e.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",e.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",e.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",e.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",e.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",e.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",e.DATACHANNEL_FAILBACK="Client._datachannelFailback",e.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",e.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",e.START_LIVE_STREAMING="Client.startLiveStreaming",e.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",e.STOP_LIVE_STREAMING="Client.stopLiveStreaming",e.ADD_INJECT_STREAM_URL="Client.addInjectStreamUrl",e.REMOVE_INJECT_STREAM_URL="Client.removeInjectStreamUrl",e.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",e.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",e.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",e.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",e.SET_CONFIG_DISTRIBUTE="_configDistribute",e.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",e.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",e.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",e.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",e.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",e.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",e.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",e.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",e.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",e.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",e.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",e.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",e.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",e.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",e.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",e.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",e.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",e.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",e.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",e.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",e.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",e.STREAM_TYPE_CHANGE="streamTypeChange",e.CONNECTION_STATE_CHANGE="connectionStateChange",e.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage"}(zl||(zl={})),function(e){e.TRACER="tracer"}(Gl||(Gl={})),function(e){e.IDLE="IDLE",e.INITING="INITING",e.INITEND="INITEND"}(WN||(WN={})),function(e){e.STATE_CHANGE="state_change",e.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",e.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",e.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(ZT||(ZT={})),function(e){e[e.ACCESS_POINT=101]="ACCESS_POINT",e[e.UNILBS=201]="UNILBS",e[e.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR"}(T2||(T2={})),function(e){e[e.IIIEGAL_APPID=1]="IIIEGAL_APPID",e[e.IIIEGAL_UID=2]="IIIEGAL_UID",e[e.INTERNAL_ERROR=3]="INTERNAL_ERROR"}(KN||(KN={})),function(e){e[e.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",e[e.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",e[e.INTERNAL_ERROR=8]="INTERNAL_ERROR",e[e.NO_AUTHORIZED=9]="NO_AUTHORIZED",e[e.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",e[e.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",e[e.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",e[e.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",e[e.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",e[e.USER_OVERLOAD=16]="USER_OVERLOAD",e[e.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",e[e.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND"}(Ey||(Ey={})),function(e){e[e.NO_FLAG_SET=100]="NO_FLAG_SET",e[e.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",e[e.INVALID_FALG_SET=102]="INVALID_FALG_SET",e[e.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",e[e.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",e[e.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",e[e.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",e[e.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",e[e.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",e[e.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",e[e.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",e[e.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",e[e.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",e[e.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",e[e.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",e[e.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",e[e.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",e[e.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",e[e.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV"}(Z0||(Z0={})),function(e){e[e.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",e[e.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",e[e.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",e[e.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",e[e.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",e[e.K_TICKET_INVALID=7]="K_TICKET_INVALID",e[e.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",e[e.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",e[e.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",e[e.K_UID_BANNED=14]="K_UID_BANNED",e[e.K_IP_BANNED=15]="K_IP_BANNED",e[e.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",e[e.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",e[e.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",e[e.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",e[e.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",e[e.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",e[e.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",e[e.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",e[e.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",e[e.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",e[e.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",e[e.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",e[e.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",e[e.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",e[e.ERR_INVALID_UID=117]="ERR_INVALID_UID",e[e.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",e[e.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",e[e.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",e[e.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",e[e.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",e[e.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",e[e.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",e[e.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",e[e.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",e[e.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",e[e.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",e[e.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",e[e.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",e[e.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",e[e.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",e[e.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",e[e.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",e[e.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",e[e.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",e[e.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",e[e.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",e[e.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",e[e.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",e[e.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",e[e.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",e[e.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",e[e.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",e[e.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",e[e.ERR_LICENSE_MISSING=32769]="ERR_LICENSE_MISSING",e[e.ERR_LICENSE_EXPIRED=32771]="ERR_LICENSE_EXPIRED",e[e.ERR_LICENSE_MINUTES_EXCEEDED=32773]="ERR_LICENSE_MINUTES_EXCEEDED",e[e.ERR_LICENSE_PERIOD_INVALID=32774]="ERR_LICENSE_PERIOD_INVALID",e[e.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]="ERR_LICENSE_MULTIPLE_SDK_SERVICE",e[e.ERR_LICENSE_ILLEGAL=32783]="ERR_LICENSE_ILLEGAL",e[e.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",e[e.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",e[e.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY"}(Ql||(Ql={})),function(e){e[e.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",e[e.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",e[e.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY"}(gQ||(gQ={})),function(e){e.LEAVE="LEAVE",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.UID_BANNED="UID_BANNED",e.IP_BANNED="IP_BANNED",e.CHANNEL_BANNED="CHANNEL_BANNED",e.FALLBACK="FALLBACK",e.LICENSE_MISSING="LICENSE_MISSING",e.LICENSE_EXPIRED="LICENSE_EXPIRED",e.LICENSE_MINUTES_EXCEEDED="LICENSE_MINUTES_EXCEEDED",e.LICENSE_PERIOD_INVALID="LICENSE_PERIOD_INVALID",e.LICENSE_MULTIPLE_SDK_SERVICE="LICENSE_MULTIPLE_SDK_SERVICE",e.LICENSE_ILLEGAL="LICENSE_ILLEGAL"}(Rp||(Rp={})),function(e){e.CONNECTION_STATE_CHANGE="connection-state-change",e.MEDIA_RECONNECT_START="media-reconnect-start",e.MEDIA_RECONNECT_END="media-reconnect-end",e.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",e.USER_JOINED="user-joined",e.USER_LEAVED="user-left",e.USER_PUBLISHED="user-published",e.USER_UNPUBLISHED="user-unpublished",e.USER_INFO_UPDATED="user-info-updated",e.CLIENT_BANNED="client-banned",e.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",e.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",e.VOLUME_INDICATOR="volume-indicator",e.CRYPT_ERROR="crypt-error",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGED="stream-type-changed",e.STREAM_FALLBACK="stream-fallback",e.RECEIVE_METADATA="receive-metadata",e.STREAM_MESSAGE="stream-message",e.LIVE_STREAMING_ERROR="live-streaming-error",e.LIVE_STREAMING_WARNING="live-streaming-warning",e.INJECT_STREAM_STATUS="stream-inject-status",e.EXCEPTION="exception",e.ERROR="error",e.P2P_LOST="p2p_lost",e.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",e.CHANNEL_FALLBACK_TO_WEBSOCKET="channel-fallback-to-websocket",e.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",e.PUBLISHED_USER_LIST="published-user-list",e.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",e.CONTENT_INSPECT_ERROR="content-inspect-error",e.CONTENT_INSPECT_RESULT="content-inspect-result"}(Vh||(Vh={})),function(e){e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE",e.P2P_FAILED="P2P_FAILED",e.FALLBACK="FALLBACK"}(f_||(f_={})),function(e){e.CONNECTING="connecting",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.CLOSED="closed"}(Up||(Up={})),function(e){e.WS_CONNECTED="ws_connected",e.WS_RECONNECTING="ws_reconnecting",e.WS_CLOSED="ws_closed",e.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",e.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",e.ON_BINARY_DATA="on_binary_data",e.REQUEST_RECOVER="request_recover",e.REQUEST_JOIN_INFO="request_join_info",e.REQUEST_REJOIN_INFO="req_rejoin_info",e.IS_P2P_DISCONNECTED="is_p2p_dis",e.DISCONNECT_P2P="dis_p2p",e.ABORT_P2P_EXECUTION="abort_p2p_execution",e.NEED_RENEW_SESSION="need-sid",e.REPORT_JOIN_GATEWAY="report_join_gateway",e.REQUEST_TIMEOUT="request_timeout",e.REQUEST_SUCCESS="request_success",e.JOIN_RESPONSE="join_response",e.DATACHANNEL_PRECONNECT="datachannel_preconnect",e.DATACHANNEL_CONNECTING="datachannel_connecting",e.DATACHANNEL_FAILBACK="datachannel_failback"}(Ll||(Ll={})),function(e){e.PING="ping",e.PING_BACK="ping_back",e.JOIN="join_v3",e.REJOIN="rejoin_v3",e.LEAVE="leave",e.SET_CLIENT_ROLE="set_client_role",e.PUBLISH="publish",e.UNPUBLISH="unpublish",e.SUBSCRIBE="subscribe",e.SUBSCRIBE_STREAMS="subscribe_streams",e.UNSUBSCRIBE="unsubscribe",e.UNSUBSCRIBE_STREAMS="unsubscribe_streams",e.SUBSCRIBE_CHANGE="subscribe_change",e.TRAFFIC_STATS="traffic_stats",e.RENEW_TOKEN="renew_token",e.SWITCH_VIDEO_STREAM="switch_video_stream",e.DEFAULT_VIDEO_STREAM="default_video_stream",e.SET_FALLBACK_OPTION="set_fallback_option",e.GATEWAY_INFO="gateway_info",e.CONTROL="control",e.SEND_METADATA="send_metadata",e.DATA_STREAM="data_stream",e.PICK_SVC_LAYER="pick_svc_layer",e.RESTART_ICE="restart_ice",e.CONNECT_PC="connect_pc",e.SET_VIDEO_PROFILE="set_video_profile",e.SET_PARAMETER="set_parameter"}(ql||(ql={})),function(e){e.PUBLISH_STATS="publish_stats",e.PUBLISH_RELATED_STATS="publish_related_stats",e.SUBSCRIBE_STATS="subscribe_stats",e.SUBSCRIBE_RELATED_STATS="subscribe_related_stats",e.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",e.DENOISER_STATS="denoiser_stats",e.TRANSPORT_STATS="transport_stats",e.EXTENSION_USAGE_STATS="extension_usage_stats"}(p_||(p_={})),function(e){e.ON_USER_ONLINE="on_user_online",e.ON_USER_OFFLINE="on_user_offline",e.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",e.ON_PUBLISH_STREAM="on_publish_stream",e.ON_UPLINK_STATS="on_uplink_stats",e.ON_P2P_LOST="on_p2p_lost",e.ON_REMOVE_STREAM="on_remove_stream",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",e.ON_USER_BANNED="on_user_banned",e.ON_USER_LICENSE_BANNED="on_user_license_banned",e.ON_NOTIFICATION="on_notification",e.ON_CRYPT_ERROR="on_crypt_error",e.MUTE_AUDIO="mute_audio",e.MUTE_VIDEO="mute_video",e.UNMUTE_AUDIO="unmute_audio",e.UNMUTE_VIDEO="unmute_video",e.ON_P2P_OK="on_p2p_ok",e.RECEIVE_METADATA="receive_metadata",e.ON_DATA_STREAM="on_data_stream",e.ENABLE_LOCAL_VIDEO="enable_local_video",e.DISABLE_LOCAL_VIDEO="disable_local_video",e.ENABLE_LOCAL_AUDIO="enable_local_audio",e.DISABLE_LOCAL_AUDIO="disable_local_audio",e.ON_PUBLISHED_USER_LIST="on_published_user_list"}(Kh||(Kh={})),function(e){e.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",e.NEED_ANSWER="NEED_ANSWER",e.NEED_RENEGOTIATE="NEED_RENEGOTIATE",e.P2P_LOST="P2P_LOST",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NEED_UNPUB="NEED_UNPUB",e.NEED_UNSUB="NEED_UNSUB",e.NEED_UPLOAD="NEED_UPLOAD",e.NEED_CONTROL="NEED_CONTROL",e.START_RECONNECT="START_RECONNECT",e.END_RECONNECT="END_RECONNECT",e.NEED_SIGNAL_RTT="NEED_SIGNAL_RTT"}(AQ||(AQ={})),function(e){e.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",e.RECEIVE_TRACK_BUFFER="receive_track_buffer",e.ON_AUDIO_BUFFER="on_audio_buffer",e.UPDATE_SOURCE="update_source"}(g_||(g_={}));const $M={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,currentPacketLossRate:0},YN={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},mQ={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},Mne={uplinkNetworkQuality:0,downlinkNetworkQuality:0},cY={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};let Nh,P0,w2;(function(e){e.CONNECTED="websocket:connected",e.RECONNECTING="websocket:reconnecting",e.WILL_RECONNECT="websocket:will_reconnect",e.CLOSED="websocket:closed",e.FAILED="websocket:failed",e.ON_MESSAGE="websocket:on_message",e.REQUEST_NEW_URLS="websocket:request_new_urls",e.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",e.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="websocket:on_token_privilege_did_expire"})(Nh||(Nh={})),function(e){e.TRANSCODE="mix_streaming",e.RAW="raw_streaming",e.INJECT="inject_streaming"}(P0||(P0={})),function(e){e[e.INJECT_STREAM_STATUS_START_SUCCESS=0]="INJECT_STREAM_STATUS_START_SUCCESS",e[e.INJECT_STREAM_STATUS_START_ALREADY_EXISTS=1]="INJECT_STREAM_STATUS_START_ALREADY_EXISTS",e[e.INJECT_STREAM_STATUS_START_UNAUTHORIZED=2]="INJECT_STREAM_STATUS_START_UNAUTHORIZED",e[e.INJECT_STREAM_STATUS_START_TIMEOUT=3]="INJECT_STREAM_STATUS_START_TIMEOUT",e[e.INJECT_STREAM_STATUS_START_FAILED=4]="INJECT_STREAM_STATUS_START_FAILED",e[e.INJECT_STREAM_STATUS_STOP_SUCCESS=5]="INJECT_STREAM_STATUS_STOP_SUCCESS",e[e.INJECT_STREAM_STATUS_STOP_NOT_FOUND=6]="INJECT_STREAM_STATUS_STOP_NOT_FOUND",e[e.INJECT_STREAM_STATUS_STOP_UNAUTHORIZED=7]="INJECT_STREAM_STATUS_STOP_UNAUTHORIZED",e[e.INJECT_STREAM_STATUS_STOP_TIMEOUT=8]="INJECT_STREAM_STATUS_STOP_TIMEOUT",e[e.INJECT_STREAM_STATUS_STOP_FAILED=9]="INJECT_STREAM_STATUS_STOP_FAILED",e[e.INJECT_STREAM_STATUS_BROKEN=10]="INJECT_STREAM_STATUS_BROKEN"}(w2||(w2={}));const Cue={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},uY={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function EQ(e,n){By(e.url,"".concat(n,".url"),1,1e3,!1),Fg(e.x)||yp(e.x,"".concat(n,".x"),0,1e4),Fg(e.y)||yp(e.y,"".concat(n,".y"),0,1e4),Fg(e.width)||yp(e.width,"".concat(n,".width"),0,1e4),Fg(e.height)||yp(e.height,"".concat(n,".height"),0,1e4),Fg(e.zOrder)||yp(e.zOrder,"".concat(n,".zOrder"),0,255),Fg(e.alpha)||yp(e.alpha,"".concat(n,".alpha"),0,1,!1)}const vQ={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},Sue={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30};let R1,ZM,T0,lY,A_,tT,M_,_w,a0,g0,c0,md,vy,dY,hY,IS,eR,_p;function e3(e){if(!e.channelName)throw new ea(_t.INVALID_PARAMS,"invalid channelName in info");if(!e.uid||"number"!=typeof e.uid)throw new ea(_t.INVALID_PARAMS,"invalid uid in info, uid must be a number");return e.token&&By(e.token,"info.token",1,2047),XM(e.uid),oY(e.channelName),!0}function fY(e){return qy(e,"mediaSource",["screen","window","application"]),!0}(function(e){e.WARNING="@live_uap-warning",e.ERROR="@line_uap-error",e.PUBLISH_STREAM_STATUS="@live_uap-publish-status",e.INJECT_STREAM_STATUS="@live_uap-inject-status",e.WORKER_STATUS="@live_uap-worker-status",e.REQUEST_NEW_ADDRESS="@live_uap-request-address"})(R1||(R1={})),function(e){e.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(ZM||(ZM={})),function(e){e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",e[e.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(T0||(T0={})),function(e){e.CONNECT_FAILED="connect failed",e.CONNECT_TIMEOUT="connect timeout",e.WS_DISCONNECTED="websocket disconnected",e.REQUEST_TIMEOUT="request timeout",e.REQUEST_FAILED="request failed",e.WAIT_STATUS_TIMEOUT="wait status timeout",e.WAIT_STATUS_ERROR="wait status error",e.BAD_STATE="bad state",e.WS_ABORT="ws abort",e.AP_REQUEST_TIMEOUT="AP request timeout",e.AP_JSON_PARSE_ERROR="AP json parse error",e.AP_REQUEST_ERROR="AP request error",e.AP_REQUEST_ABORT="AP request abort"}(lY||(lY={})),function(e){e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile"}(A_||(A_={})),function(e){e.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",e.NETWORK_CONNECTED="NETWORK_CONNECTED",e.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",e.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",e.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",e.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",e.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",e.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",e.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(tT||(tT={})),function(e){e.RELAY_STATE_IDLE="RELAY_STATE_IDLE",e.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",e.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",e.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE"}(M_||(M_={})),function(e){e.RELAY_OK="RELAY_OK",e.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",e.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",e.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED"}(_w||(_w={})),function(e){e.High="high",e.Low="low",e.Audio="audio",e.Screen="screen",e.ScreenLow="screen_low"}(a0||(a0={})),function(e){e.DISCONNECT="disconnect",e.CONNECTION_STATE_CHANGE="connection-state-change",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGE="stream-type-change",e.IS_P2P_DISCONNECTED="is-p2p-dis",e.DISCONNECT_P2P="dis-p2p",e.REQUEST_NEW_GATEWAY_LIST="req-gate-url",e.NEED_RENEW_SESSION="need-sid",e.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",e.JOIN_RESPONSE="join-response",e.REQUEST_DC_CONNECTION_PARAMS="request-dc-connection-params",e.RESET_CONNECTION_EVENTS="reset-connection-events",e.DATACHANNEL_PRECONNECT="datachannel_preconnect",e.DATACHANNEL_FAILBACK="datachannel_failback"}(g0||(g0={})),function(e){e[e.Nothing=0]="Nothing",e[e.Audio=1]="Audio",e[e.LwoVideo=2]="LwoVideo",e[e.Video=4]="Video",e[e.Data=8]="Data"}(c0||(c0={})),function(e){e.NEED_RENEGOTIATE="@need_renegotiate",e.NEED_REPLACE_TRACK="@need_replace_track",e.NEED_CLOSE="@need_close",e.NEED_ENABLE_TRACK="@need_enable_track",e.NEED_DISABLE_TRACK="@need_disable_track",e.NEED_SESSION_ID="@need_sid",e.SET_OPTIMIZATION_MODE="@set_optimization_mode",e.GET_STATS="@get_stats",e.GET_LOW_VIDEO_TRACK="@get_low_video_track",e.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",e.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",e.NEED_MUTE_TRACK="@need_mute_track",e.NEED_UNMUTE_TRACK="@need_unmute_track"}(md||(md={})),function(e){e.SCREEN_TRACK="screen_track",e.LOW_STREAM="low_stream"}(vy||(vy={})),function(e){e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM"}(dY||(dY={})),function(e){e[e.DISABLE=0]="DISABLE",e[e.LOW_STREAM=1]="LOW_STREAM",e[e.AUDIO_ONLY=2]="AUDIO_ONLY"}(hY||(hY={})),function(e){e.SOURCE_STATE_CHANGE="source-state-change",e.TRACK_ENDED="track-ended",e.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.CLOSED="closed"}(IS||(IS={})),function(e){e.FIRST_FRAME_DECODED="first-frame-decoded",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status"}(eR||(eR={})),function(e){e.CHINA="CHINA",e.ASIA="ASIA",e.NORTH_AMERICA="NORTH_AMERICA",e.EUROPE="EUROPE",e.JAPAN="JAPAN",e.INDIA="INDIA",e.KOREA="KOREA",e.HKMC="HKMC",e.US="US",e.OCEANIA="OCEANIA",e.SOUTH_AMERICA="SOUTH_AMERICA",e.AFRICA="AFRICA",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL"}(_p||(_p={}));const Tue=[_p.AFRICA,_p.ASIA,_p.CHINA,_p.EUROPE,_p.GLOBAL,_p.INDIA,_p.JAPAN,_p.NORTH_AMERICA,_p.OCEANIA,_p.OVERSEA,_p.SOUTH_AMERICA];let ly;!function(e){e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.KOREA="KR",e.HKMC="HK",e.US="US",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL"}(ly||(ly={}));const yQ={CHINA:{},ASIA:{CODE:ly.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:ly.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:ly.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:ly.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","\tuap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:ly.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:ly.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:ly.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:ly.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:ly.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:ly.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:ly.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:ly.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:ly.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]}};let Q4,Bne,Sh,yl,z_,Pf,yy,nT,Yy,X_,O1,a1,w0,rT,b0;ZW&&(yQ.CHINA={CODE:ly.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),function(e){e.UPDATE_BITRATE_LIMIT="update_bitrate_limit"}(Q4||(Q4={}));class JN extends f0{constructor(n,i){super(),Y(this,"onICEConnectionStateChange",void 0),Y(this,"onConnectionStateChange",void 0),Y(this,"onDTLSTransportStateChange",void 0),Y(this,"onDTLSTransportError",void 0),Y(this,"onICETransportStateChange",void 0),Y(this,"onFirstAudioReceived",void 0),Y(this,"onFirstVideoReceived",void 0),Y(this,"onFirstAudioDecoded",void 0),Y(this,"onFirstVideoDecoded",void 0),Y(this,"onFirstVideoDecodedTimeout",void 0),Y(this,"onSelectedLocalCandidateChanged",void 0),Y(this,"onSelectedRemoteCandidateChanged",void 0)}}(function(e){e.SEND="sendonly",e.RECV="recvonly",e.SENDRECV="sendrecv",e.INACTIVE="inactive"})(Bne||(Bne={})),function(e){e.VIDEO="video",e.AUDIO="audio"}(Sh||(Sh={})),function(e){e.LocalVideoTrack="videoTrack",e.LocalAudioTrack="audioTrack",e.LocalVideoLowTrack="videoLowTrack"}(yl||(yl={})),function(e){e.New="new",e.Connected="connected",e.Reconnecting="reconnecting",e.Disconnected="disconnected"}(z_||(z_={})),function(e){e.StateChange="stateChange",e.IceConnectionStateChange="iceConnectionStateChange",e.RequestMuteLocal="requestMuteLocal",e.RequestUnmuteLocal="requestUnmuteLocal",e.RequestRePublish="requestRePublish",e.RequestReSubscribe="requestReSubscribe",e.RequestUploadStats="requestUploadStats",e.MediaReconnectStart="MediaReconnectStart",e.MediaReconnectEnd="MediaReconnectEnd",e.NeedSignalRTT="NeedSignalRTT",e.RequestRestartICE="RequestRestartIce",e.PeerConnectionStateChange="PeerConnectionStateChange",e.RequestReconnect="RequestReconnect",e.RequestReconnectPC="RequestReconnectPC",e.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",e.P2PLost="P2PLost",e.UpdateVideoEncoder="UpdateVideoEncoder",e.ConnectionTypeChange="ConnectionTypeChange",e.RequestLowStreamParameter="RequestLowStreamParameter",e.QueryClientConnectionState="QueryClientConnectionState"}(Pf||(Pf={})),function(e){e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(yy||(yy={})),function(e){e.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(nT||(nT={})),function(e){e.ON_TRACK="on_track",e.ON_NODE="on_node"}(Yy||(Yy={})),function(e){e.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",e.REQUEST_CONSTRAINTS="request_constraints"}(X_||(X_={})),function(e){e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED"}(O1||(O1={})),function(e){e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED"}(a1||(a1={})),function(e){e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(w0||(w0={})),function(e){e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE",e.P2P_FAILED="P2P_FAILED",e.FALLBACK="FALLBACK"}(rT||(rT={})),function(e){e.CONNECTED="transmitter:connected",e.RECONNECTING="transmitter:reconnecting",e.WILL_RECONNECT="transmitter:will_reconnect",e.CLOSED="transmitter:closed",e.FAILED="transmitter:failed",e.ON_MESSAGE="transmitter:on_message",e.REQUEST_NEW_URLS="transmitter:request_new_urls",e.RECONNECT_WAITTING_FINISH="transmitter:reconnect_waitting_finish",e.RECONNECT_CREATE_CONNECTION="transmitter:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="transmitter:on_token_privilege_did_expire",e.TO_CONNECT_DATACHANNEL="transmitter:to_connect_datachannel",e.FAILBACK="transmitter:failback"}(b0||(b0={}));const o_={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1};function dy(){return o_}var pY="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,wue=iS,Rue=t0,Oue=R.RangeError,Une=function(e){if(void 0===e)return 0;var n=wue(e),i=Rue(n);if(n!==i)throw Oue("Wrong length or index");return i},Due=R.Array,gY=Math.abs,eO=Math.pow,Fne=Math.floor,_Q=Math.log,Nue=Math.LN2,IQ=ET,jne=S0,V4=l0,Lue=gR,Pue=Xy,G4=rl,Qne=S0,xue=l0,Mue=function(e,n,i){var c=Lue(n);c in e?Pue.f(e,c,G4(0,i)):e[c]=i},Bue=R.Array,Uue=Math.max,Vne=function(e,n,i){for(var c=xue(e),h=Qne(n,c),g=Qne(void 0===i?c:i,c),v=Bue(Uue(g-h,0)),m=0;h<g;h++,m++)Mue(v,m,e[h]);return v.length=m,v},AY=Ha,mY=F,Gne=pY,qne=__,Wne=m8,EY=P,CQ=JU,Kne=iS,qfe=t0,H4=Une,vY_pack=function(e,n,i){var c,h,g,v=Due(i),m=8*i-n-1,C=(1<<m)-1,y=C>>1,N=23===n?eO(2,-24)-eO(2,-77):0,k=e<0||0===e&&1/e<0?1:0,U=0;for((e=gY(e))!=e||e===1/0?(h=e!=e?1:0,c=C):(c=Fne(_Q(e)/Nue),e*(g=eO(2,-c))<1&&(c--,g*=2),(e+=c+y>=1?N/g:N*eO(2,1-y))*g>=2&&(c++,g/=2),c+y>=C?(h=0,c=C):c+y>=1?(h=(e*g-1)*eO(2,n),c+=y):(h=e*eO(2,y-1)*eO(2,n),c=0));n>=8;)v[U++]=255&h,h/=256,n-=8;for(c=c<<n|h,m+=n;m>0;)v[U++]=255&c,c/=256,m-=8;return v[--U]|=128*k,v},vY_unpack=function(e,n){var i,c=e.length,h=8*c-n-1,g=(1<<h)-1,v=g>>1,m=h-7,C=c-1,y=e[C--],N=127&y;for(y>>=7;m>0;)N=256*N+e[C--],m-=8;for(i=N&(1<<-m)-1,N>>=-m,m+=n;m>0;)i=256*i+e[C--],m-=8;if(0===N)N=1-v;else{if(N===g)return i?NaN:y?-1/0:1/0;i+=eO(2,n),N-=v}return(y?-1:1)*i*eO(2,N-n)},Yne=cU,yY=a2,Fue=F1.f,jue=Xy.f,Vue=Vne,_Y=uU,Gue=l_.PROPER,SQ=l_.CONFIGURABLE,t3=u_.get,Jne=u_.set,IY="ArrayBuffer",CY="Wrong index",iT=R.ArrayBuffer,oT=iT,n3=oT&&oT.prototype,tO=R.DataView,R2=tO&&tO.prototype,zne=Object.prototype,Hue=R.Array,$_=R.RangeError,que=AY(function(e){for(var n=IQ(this),i=V4(n),c=arguments.length,h=jne(c>1?arguments[1]:void 0,i),g=c>2?arguments[2]:void 0,v=void 0===g?i:jne(g,i);v>h;)n[h++]=e;return n}),Xne=AY([].reverse),TQ=vY_pack,wQ=vY_unpack,zN=function(e){return[255&e]},$ne=function(e){return[255&e,e>>8&255]},Zne=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},SY=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},Wue=function(e){return TQ(e,23,4)},ere=function(e){return TQ(e,52,8)},q4=function(e,n){jue(e.prototype,n,{get:function(){return t3(this)[n]}})},tR=function(e,n,i,c){var h=H4(i),g=t3(e);if(h+n>g.byteLength)throw $_(CY);var v=t3(g.buffer).bytes,m=h+g.byteOffset,C=Vue(v,m,m+n);return c?C:Xne(C)},XN=function(e,n,i,c,h,g){var v=H4(i),m=t3(e);if(v+n>m.byteLength)throw $_(CY);for(var C=t3(m.buffer).bytes,y=v+m.byteOffset,N=c(+h),k=0;k<n;k++)C[y+k]=N[g?k:n-k-1]};if(Gne){var O2=Gue&&iT.name!==IY;if(EY(function(){iT(1)})&&EY(function(){new iT(-1)})&&!EY(function(){return new iT,new iT(1.5),new iT(NaN),O2&&!SQ}))O2&&SQ&&qne(iT,"name",IY);else{(oT=function(e){return CQ(this,n3),new iT(H4(e))}).prototype=n3;for(var RQ,tre=Fue(iT),nre=0;tre.length>nre;)(RQ=tre[nre++])in oT||qne(oT,RQ,iT[RQ]);n3.constructor=oT}yY&&Yne(R2)!==zne&&yY(R2,zne);var W4=new tO(new oT(2)),rre=AY(R2.setInt8);W4.setInt8(0,2147483648),W4.setInt8(1,2147483649),!W4.getInt8(0)&&W4.getInt8(1)||Wne(R2,{setInt8:function(e,n){rre(this,e,n<<24>>24)},setUint8:function(e,n){rre(this,e,n<<24>>24)}},{unsafe:!0})}else n3=(oT=function(e){CQ(this,n3);var n=H4(e);Jne(this,{bytes:que(Hue(n),0),byteLength:n}),mY||(this.byteLength=n)}).prototype,R2=(tO=function(e,n,i){CQ(this,R2),CQ(e,n3);var c=t3(e).byteLength,h=Kne(n);if(h<0||h>c)throw $_("Wrong offset");if(h+(i=void 0===i?c-h:qfe(i))>c)throw $_("Wrong length");Jne(this,{buffer:e,byteLength:i,byteOffset:h}),mY||(this.buffer=e,this.byteLength=i,this.byteOffset=h)}).prototype,mY&&(q4(oT,"byteLength"),q4(tO,"buffer"),q4(tO,"byteLength"),q4(tO,"byteOffset")),Wne(R2,{getInt8:function(e){return tR(this,1,e)[0]<<24>>24},getUint8:function(e){return tR(this,1,e)[0]},getInt16:function(e){var n=tR(this,2,e,arguments.length>1?arguments[1]:void 0);return(n[1]<<8|n[0])<<16>>16},getUint16:function(e){var n=tR(this,2,e,arguments.length>1?arguments[1]:void 0);return n[1]<<8|n[0]},getInt32:function(e){return SY(tR(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return SY(tR(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return wQ(tR(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return wQ(tR(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,n){XN(this,1,e,zN,n)},setUint8:function(e,n){XN(this,1,e,zN,n)},setInt16:function(e,n){XN(this,2,e,$ne,n,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,n){XN(this,2,e,$ne,n,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,n){XN(this,4,e,Zne,n,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,n){XN(this,4,e,Zne,n,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,n){XN(this,4,e,Wue,n,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,n){XN(this,8,e,ere,n,arguments.length>2?arguments[2]:void 0)}});_Y(oT,IY),_Y(tO,"DataView");var OQ={ArrayBuffer:oT,DataView:tO},Kue=C_,DQ=Ha,Yue=P,ire=Fy,ore=S0,TY=t0,Jue=Kee,wY=OQ.ArrayBuffer,NQ=OQ.DataView,sre=NQ.prototype,zue=DQ(wY.prototype.slice),Xue=DQ(sre.getUint8),$ue=DQ(sre.setUint8);Kue({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:Yue(function(){return!new wY(2).slice(1,void 0).byteLength})},{slice:function(e,n){if(zue&&void 0===n)return zue(ire(this),e);for(var i=ire(this).byteLength,c=ore(e,i),h=ore(void 0===n?i:n,i),g=new(Jue(this,wY))(TY(h-c)),v=new NQ(this),m=new NQ(g),C=0;c<h;)$ue(m,C++,Xue(v,c++));return g}});var c1,B_,kQ,Z_={exports:{}},Zue=pY,RY=F,u1=R,are=R0,OY=u0,$N=by,DY=n_,Wfe=NL,s=__,a=db.exports,u=Xy.f,f=TS,A=cU,S=a2,x=yc,j=UL,q=u1.Int8Array,ce=q&&q.prototype,Ye=u1.Uint8ClampedArray,_r=Ye&&Ye.prototype,ha=q&&A(q),pa=ce&&A(ce),cc=Object.prototype,ol=u1.TypeError,wl=x("toStringTag"),Il=j("TYPED_ARRAY_TAG"),Xc=j("TYPED_ARRAY_CONSTRUCTOR"),Ed=Zue&&!!S&&"Opera"!==DY(u1.opera),Ip=!1,Fp={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},l1={BigInt64Array:8,BigUint64Array:8},D2=function(e){if(!OY(e))return!1;var n=DY(e);return $N(Fp,n)||$N(l1,n)};for(c1 in Fp)(kQ=(B_=u1[c1])&&B_.prototype)?s(kQ,Xc,B_):Ed=!1;for(c1 in l1)(kQ=(B_=u1[c1])&&B_.prototype)&&s(kQ,Xc,B_);if((!Ed||!are(ha)||ha===Function.prototype)&&(ha=function(){throw ol("Incorrect invocation")},Ed))for(c1 in Fp)u1[c1]&&S(u1[c1],ha);if((!Ed||!pa||pa===cc)&&(pa=ha.prototype,Ed))for(c1 in Fp)u1[c1]&&S(u1[c1].prototype,pa);if(Ed&&A(_r)!==pa&&S(_r,pa),RY&&!$N(pa,wl))for(c1 in Ip=!0,u(pa,wl,{get:function(){return OY(this)?this[Il]:void 0}}),Fp)u1[c1]&&s(u1[c1],Il,c1);var nO={NATIVE_ARRAY_BUFFER_VIEWS:Ed,TYPED_ARRAY_CONSTRUCTOR:Xc,TYPED_ARRAY_TAG:Ip&&Il,aTypedArray:function(e){if(D2(e))return e;throw ol("Target is not a typed array")},aTypedArrayConstructor:function(e){if(are(e)&&(!S||f(ha,e)))return e;throw ol(Wfe(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,n,i,c){if(RY){if(i)for(var h in Fp){var g=u1[h];if(g&&$N(g.prototype,e))try{delete g.prototype[e]}catch(v){try{g.prototype[e]=n}catch(m){}}}pa[e]&&!i||a(pa,e,i?n:Ed&&ce[e]||n,c)}},exportTypedArrayStaticMethod:function(e,n,i){var c,h;if(RY){if(S){if(i)for(c in Fp)if((h=u1[c])&&$N(h,e))try{delete h[e]}catch(g){}if(ha[e]&&!i)return;try{return a(ha,e,i?n:Ed&&ha[e]||n)}catch(g){}}for(c in Fp)!(h=u1[c])||h[e]&&!i||a(h,e,n)}},isView:function(e){if(!OY(e))return!1;var n=DY(e);return"DataView"===n||$N(Fp,n)||$N(l1,n)},isTypedArray:D2,TypedArray:ha,TypedArrayPrototype:pa},K4=P,NY=kq,LY=R.ArrayBuffer,rO=R.Int8Array,PY=!nO.NATIVE_ARRAY_BUFFER_VIEWS||!K4(function(){rO(1)})||!K4(function(){new rO(-1)})||!NY(function(e){new rO,new rO(null),new rO(1.5),new rO(e)},!0)||K4(function(){return 1!==new rO(new LY(2),1,void 0).length}),xY=u0,u0e=Math.floor,l0e=Number.isInteger||function(e){return!xY(e)&&isFinite(e)&&u0e(e)===e},d0e=iS,h0e=R.RangeError,p0e=R.RangeError,Kfe=function(e,n){var i=function(e){var n=d0e(e);if(n<0)throw h0e("The argument can't be less than 0");return n}(e);if(i%n)throw p0e("Wrong offset");return i},g0e=E8,A0e=xe,m0e=Wee,E0e=ET,v0e=l0,y0e=Dee,_0e=v8,I0e=Oee,b0e=nO.aTypedArrayConstructor,C0e=ic,S0e=R,Yfe=Array.isArray||function(e){return"Array"==C0e(e)},T0e=Vae,w0e=u0,R0e=yc("species"),Jfe=S0e.Array,D0e=E8,N0e=Bl,k0e=ET,L0e=l0,P0e=function(e,n){return new(function(e){var n;return Yfe(e)&&(T0e(n=e.constructor)&&(n===Jfe||Yfe(n.prototype))||w0e(n)&&null===(n=n[R0e]))&&(n=void 0),void 0===n?Jfe:n}(e))(0===n?0:n)},zfe=Ha([].push),r3=function(e){var n=1==e,i=2==e,c=3==e,h=4==e,g=6==e,v=7==e,m=5==e||g;return function(C,y,N,k){for(var U,V,K=k0e(C),$=N0e(K),Z=D0e(y,N),ye=L0e($),be=0,_s=k||P0e,ua=n?_s(C,ye):i||v?_s(C,0):void 0;ye>be;be++)if((m||be in $)&&(V=Z(U=$[be],be,K),e))if(n)ua[be]=V;else if(V)switch(e){case 3:return!0;case 5:return U;case 6:return be;case 2:zfe(ua,U)}else switch(e){case 4:return!1;case 7:zfe(ua,U)}return g?-1:c||h?h:ua}},x0e={forEach:r3(0),map:r3(1),filter:r3(2),some:r3(3),every:r3(4),find:r3(5),findIndex:r3(6),filterReject:r3(7)},Xfe=C_,$fe=R,Zfe=xe,B0e=PY,tpe=JU,U0e=rl,PQ=__,F0e=l0e,j0e=t0,npe=Une,ele=Kfe,rpe=gR,MY=by,Q0e=n_,tle=u0,V0e=e6,G0e=Sx,H0e=TS,cre=a2,q0e=F1.f,ipe=function(e){var n,i,c,h,g,v,m=m0e(this),C=E0e(e),y=arguments.length,N=y>1?arguments[1]:void 0,k=void 0!==N,U=_0e(C);if(U&&!I0e(U))for(v=(g=y0e(C,U)).next,C=[];!(h=A0e(v,g)).done;)C.push(h.value);for(k&&y>2&&(N=g0e(N,arguments[2])),i=v0e(C),c=new(b0e(m))(i),n=0;i>n;n++)c[n]=k?N(C[n],n):C[n];return c},W0e=x0e.forEach,K0e=c8,ope=Xy,Y0e=r5,nle=u_.get,J0e=u_.set,rle=ope.f,z0e=M.f,X0e=Math.round,ile=$fe.RangeError,ape=OQ.ArrayBuffer,$0e=ape.prototype,Z0e=OQ.DataView,ure=nO.NATIVE_ARRAY_BUFFER_VIEWS,eye=nO.TYPED_ARRAY_CONSTRUCTOR,cpe=nO.TYPED_ARRAY_TAG,upe=nO.TypedArray,BY=nO.TypedArrayPrototype,tye=nO.aTypedArrayConstructor,ole=nO.isTypedArray,lre="BYTES_PER_ELEMENT",sle="Wrong length",lpe=function(e,n){tye(e);for(var i=0,c=n.length,h=new e(c);c>i;)h[i]=n[i++];return h},dre=function(e,n){rle(e,n,{get:function(){return nle(this)[n]}})},dpe=function(e){var n;return H0e($0e,e)||"ArrayBuffer"==(n=Q0e(e))||"SharedArrayBuffer"==n},hpe=function(e,n){return ole(e)&&!V0e(n)&&n in e&&F0e(+n)&&n>=0},fpe=function(e,n){return n=rpe(n),hpe(e,n)?U0e(2,e[n]):z0e(e,n)},ppe=function(e,n,i){return n=rpe(n),!(hpe(e,n)&&tle(i)&&MY(i,"value"))||MY(i,"get")||MY(i,"set")||i.configurable||MY(i,"writable")&&!i.writable||MY(i,"enumerable")&&!i.enumerable?rle(e,n,i):(e[n]=i.value,e)};F?(ure||(M.f=fpe,ope.f=ppe,dre(BY,"buffer"),dre(BY,"byteOffset"),dre(BY,"byteLength"),dre(BY,"length")),Xfe({target:"Object",stat:!0,forced:!ure},{getOwnPropertyDescriptor:fpe,defineProperty:ppe}),Z_.exports=function(e,n,i){var c=e.match(/\d+$/)[0]/8,h=e+(i?"Clamped":"")+"Array",g="get"+e,v="set"+e,m=$fe[h],C=m,y=C&&C.prototype,N={},k=function(U,V){rle(U,V,{get:function(){return $=V,(Z=nle(this)).view[g]($*c+Z.byteOffset,!0);var $,Z},set:function(K){return Z=V,ye=K,be=nle(this),i&&(ye=(ye=X0e(ye))<0?0:ye>255?255:255&ye),void be.view[v](Z*c+be.byteOffset,ye,!0);var Z,ye,be},enumerable:!0})};ure?B0e&&(C=n(function(U,V,K,$){return tpe(U,y),Y0e(tle(V)?dpe(V)?void 0!==$?new m(V,ele(K,c),$):void 0!==K?new m(V,ele(K,c)):new m(V):ole(V)?lpe(C,V):Zfe(ipe,C,V):new m(npe(V)),U,C)}),cre&&cre(C,upe),W0e(q0e(m),function(U){U in C||PQ(C,U,m[U])}),C.prototype=y):(C=n(function(U,V,K,$){tpe(U,y);var Z,ye,be,_s=0,ua=0;if(tle(V)){if(!dpe(V))return ole(V)?lpe(C,V):Zfe(ipe,C,V);Z=V,ua=ele(K,c);var ma=V.byteLength;if(void 0===$){if(ma%c||(ye=ma-ua)<0)throw ile(sle)}else if((ye=j0e($)*c)+ua>ma)throw ile(sle);be=ye/c}else be=npe(V),Z=new ape(ye=be*c);for(J0e(U,{buffer:Z,byteOffset:ua,byteLength:ye,length:be,view:new Z0e(Z)});_s<be;)k(U,_s++)}),cre&&cre(C,upe),y=C.prototype=G0e(BY)),y.constructor!==C&&PQ(y,"constructor",C),PQ(y,eye,C),cpe&&PQ(y,cpe,h),N[h]=C,Xfe({global:!0,forced:C!=m,sham:!ure},N),lre in C||PQ(C,lre,c),lre in y||PQ(y,lre,c),K0e(h)}):Z_.exports=function(){},(0,Z_.exports)("Uint8",function(e){return function(n,i,c){return e(this,n,i,c)}});var nye=l0,rye=iS,iye=nO.aTypedArray;(0,nO.exportTypedArrayMethod)("at",function(e){var n=iye(this),i=nye(n),c=rye(e),h=c>=0?c:i+c;return h<0||h>=i?void 0:n[h]});var Ape=xe,ale=nO,oye=l0,sye=Kfe,aye=ET,mpe=P,cye=R.RangeError,cle=R.Int8Array,Epe=cle&&cle.prototype,vpe=Epe&&Epe.set,uye=ale.aTypedArray,lye=ale.exportTypedArrayMethod,ule=!mpe(function(){var e=new Uint8ClampedArray(2);return Ape(vpe,e,{length:1,0:3},1),3!==e[1]}),dye=ule&&ale.NATIVE_ARRAY_BUFFER_VIEWS&&mpe(function(){var e=new cle(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]});lye("set",function(e){uye(this);var n=sye(arguments.length>1?arguments[1]:void 0,1),i=aye(e);if(ule)return Ape(vpe,this,i,n);var c=this.length,h=oye(i),g=0;if(h+n>c)throw cye("Wrong length");for(;g<h;)this[n+g]=i[g++]},!ule||dye);var ype=Vne,hye=Math.floor,lle=function(e,n){var i=e.length,c=hye(i/2);return i<8?fye(e,n):pye(e,lle(ype(e,0,c),n),lle(ype(e,c),n),n)},fye=function(e,n){for(var i,c,h=e.length,g=1;g<h;){for(c=g,i=e[g];c&&n(e[c-1],i)>0;)e[c]=e[--c];c!==g++&&(e[c]=i)}return e},pye=function(e,n,i,c){for(var h=n.length,g=i.length,v=0,m=0;v<h||m<g;)e[v+m]=v<h&&m<g?c(n[v],i[m])<=0?n[v++]:i[m++]:v<h?n[v++]:i[m++];return e},gye=lle,_pe=lO.match(/firefox\/(\d+)/i),Aye=!!_pe&&+_pe[1],mye=/MSIE|Trident/.test(lO),Ipe=lO.match(/AppleWebKit\/(\d+)\./),dle=P,yye=U2,_ye=gye,Spe=Aye,Iye=mye,Tpe=DL,wpe=!!Ipe&&+Ipe[1],bye=R.Array,Cye=nO.aTypedArray,Sye=nO.exportTypedArrayMethod,UY=R.Uint16Array,xQ=UY&&Ha(UY.prototype.sort),Tye=!(!xQ||dle(function(){xQ(new UY(2),null)})&&dle(function(){xQ(new UY(2),{})})),Rpe=!!xQ&&!dle(function(){if(Tpe)return Tpe<74;if(Spe)return Spe<67;if(Iye)return!0;if(wpe)return wpe<602;var e,n,i=new UY(516),c=bye(516);for(e=0;e<516;e++)n=e%4,i[e]=515-e,c[e]=e-2*n+3;for(xQ(i,function(h,g){return(h/4|0)-(g/4|0)}),e=0;e<516;e++)if(i[e]!==c[e])return!0});Sye("sort",function(e){return void 0!==e&&yye(e),Rpe?xQ(this,e):_ye(Cye(this),function(n){return function(i,c){return void 0!==n?+n(i,c)||0:c!=c?-1:i!=i?1:0===i&&0===c?1/i>0&&1/c<0?1:-1:i>c}}(e))},!Rpe||Tye);var wye=c8,Ope=OQ.ArrayBuffer;let _y;C_({global:!0,forced:R.ArrayBuffer!==Ope},{ArrayBuffer:Ope}),wye("ArrayBuffer"),function(e){e[e.CHOOSE_SERVER=11]="CHOOSE_SERVER",e[e.CLOUD_PROXY=18]="CLOUD_PROXY",e[e.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",e[e.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK"}(_y||(_y={}));var Oye=Zy,FY=Array.isArray||function(e){return"Array"==Oye(e)},Dye=_h,Dpe=FY,Nye=s7,kye=e_,Lye=$0("species"),Npe=Dye.Array,kpe=function(e,n){return new(function(e){var n;return Dpe(e)&&(Nye(n=e.constructor)&&(n===Npe||Dpe(n.prototype))||kye(n)&&null===(n=n[Lye]))&&(n=void 0),void 0===n?Npe:n}(e))(0===n?0:n)},xye=FS,Mye=TR,Bye=W1,Uye=QS,Fye=kpe,Lpe=O0([].push),i3=function(e){var n=1==e,i=2==e,c=3==e,h=4==e,g=6==e,v=7==e,m=5==e||g;return function(C,y,N,k){for(var U,V,K=Bye(C),$=Mye(K),Z=xye(y,N),ye=Uye($),be=0,_s=k||Fye,ua=n?_s(C,ye):i||v?_s(C,0):void 0;ye>be;be++)if((m||be in $)&&(V=Z(U=$[be],be,K),e))if(n)ua[be]=V;else if(V)switch(e){case 3:return!0;case 5:return U;case 6:return be;case 2:Lpe(ua,U)}else switch(e){case 4:return!1;case 7:Lpe(ua,U)}return g?-1:c||h?h:ua}},Ppe={forEach:i3(0),map:i3(1),filter:i3(2),some:i3(3),every:i3(4),find:i3(5),findIndex:i3(6),filterReject:i3(7)},jye=Ppe.forEach,xpe=la("forEach")?[].forEach:function(e){return jye(this,e,arguments.length>1?arguments[1]:void 0)};Ly({target:"Array",proto:!0,forced:[].forEach!=xpe},{forEach:xpe});var Qye=Ml("Array").forEach,Vye=qS,Gye=Dy,Hye=gy,qye=Qye,hle=Array.prototype,Wye={DOMTokenList:!0,NodeList:!0},Yye=W1,Mpe=CU;Ly({target:"Object",stat:!0,forced:zg(function(){Mpe(1)})},{keys:function(e){return Mpe(Yye(e))}});var Jye=aS.Object.keys,zye=wp,Xye=Ly,$ye=FY,Zye=O0([].reverse),Bpe=[1,2];Xye({target:"Array",proto:!0,forced:String(Bpe)===String(Bpe.reverse())},{reverse:function(){return $ye(this)&&(this.length=this.length),Zye(this)}});var e_e=Ml("Array").reverse,t_e=gy,n_e=e_e,fle=Array.prototype,i_e=zg,o_e=PS,s_e=$0("species"),Upe=function(e){return o_e>=51||!i_e(function(){var n=[];return(n.constructor={})[s_e]=function(){return{foo:1}},1!==n[e](Boolean).foo})},a_e=Ly,c_e=_h,Fpe=FY,u_e=s7,l_e=e_,jpe=yX,d_e=QS,h_e=Ry,f_e=YM,p_e=$0,g_e=O5,A_e=Upe("slice"),m_e=p_e("species"),ple=c_e.Array,E_e=Math.max;a_e({target:"Array",proto:!0,forced:!A_e},{slice:function(e,n){var i,c,h,g=h_e(this),v=d_e(g),m=jpe(e,v),C=jpe(void 0===n?v:n,v);if(Fpe(g)&&((u_e(i=g.constructor)&&(i===ple||Fpe(i.prototype))||l_e(i)&&null===(i=i[m_e]))&&(i=void 0),i===ple||void 0===i))return g_e(g,m,C);for(c=new(void 0===i?ple:i)(E_e(C-m,0)),h=0;m<C;m++,h++)m in g&&f_e(c,h,g[m]);return c.length=h,c}});var v_e=Ml("Array").slice,y_e=gy,__e=v_e,gle=Array.prototype;function Cl(e,n,i,c,h){var g,v,m,C={};return function(e){var n=e.forEach;return e===hle||Hye(hle,e)&&n===hle.forEach||Gye(Wye,Vye(e))?qye:n}(g=Jye(c)).call(g,function(y){C[y]=c[y]}),C.enumerable=!!C.enumerable,C.configurable=!!C.configurable,("value"in C||C.initializer)&&(C.writable=!0),C=zye(v=function(e){var n=e.reverse;return e===fle||t_e(fle,e)&&n===fle.reverse?n_e:n}(m=function(e){var n=e.slice;return e===gle||y_e(gle,e)&&n===gle.slice?__e:n}(i).call(i)).call(m)).call(v,function(y,N){return N(e,n,y)||y},C),h&&void 0!==C.initializer&&(C.value=C.initializer?C.initializer.call(h):void 0,C.initializer=void 0),void 0===C.initializer&&(Gte(e,n,C),C=null),C}var b_e=Ml("Array").keys,C_e=qS,S_e=Dy,T_e=gy,w_e=b_e,Ale=Array.prototype,R_e={DOMTokenList:!0,NodeList:!0},J4=function(e){var n=e.keys;return e===Ale||T_e(Ale,e)&&n===Ale.keys||S_e(R_e,C_e(e))?w_e:n};function Qpe(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);n&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),i.push.apply(i,c)}return i}function Vpe(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Qpe(Object(i),!0).forEach(function(c){Y(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Qpe(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}let hre=0,mle=0;function iO(e,n,i,c){return new _l((h,g)=>{n.timeout=n.timeout||ya("HTTP_CONNECT_TIMEOUT"),n.responseType=n.responseType||"json",n.data&&!i?(n.data=JSON.stringify(n.data),hre+=jQ(n.data)):i&&(n.data.size?hre+=n.data.size:n.data instanceof FormData?hre+=function(v){let m=0;return/DingTalk/i.test(navigator.userAgent)&&v.realFormData&&(v=v.realFormData),v.forEach(C=>{m+="string"==typeof C?jQ(C):C.size}),m+138}(n.data):hre+=jQ(JSON.stringify(n.data))),n.headers=n.headers||{},n.headers["Content-Type"]=n.headers["Content-Type"]||"application/json",n.method="POST",n.url=e,r1.request(n).then(v=>{"string"==typeof v.data?mle+=jQ(v.data):v.data instanceof ArrayBuffer||v.data instanceof Uint8Array?mle+=v.data.byteLength:mle+=jQ(JSON.stringify(v.data)),c&&h({data:v.data,headers:v.headers}),h(v.data)}).catch(v=>{r1.isCancel(v)?g(new ea(_t.OPERATION_ABORTED,"cancel token canceled")):g("ECONNABORTED"===v.code?new ea(_t.NETWORK_TIMEOUT,v.message):v.response?new ea(_t.NETWORK_RESPONSE_ERROR,v.response.status):new ea(_t.NETWORK_ERROR,v.message))})})}function O_e(e,n){return Ele.apply(this,arguments)}function Ele(){return Ele=l(function*(e,n){const i=new Blob([n.data],{type:"buffer"});return yield iO(e,Vpe(Vpe({},n),{},{data:i,headers:{"Content-Type":"application/octet-stream"}}),!0)}),Ele.apply(this,arguments)}const ey=new class extends f0{set networkState(e){de.info("[".concat(this._moduleName,"]")+"network state changed, "+this._networkState+" -> "+e),this.emit(nT.NETWORK_STATE_CHANGE,e,this._networkState),e===yy.ONLINE?this.emit(nT.ONLINE):e===yy.OFFLINE&&(this.onlineWaiter=new _l(n=>{this.once(nT.ONLINE,()=>{this.onlineWaiter=void 0,n(yy.ONLINE)})}),this.emit(nT.OFFLINE)),this._networkState=e}get networkState(){return this._networkState}constructor(){super(),Y(this,"_moduleName","network-indicator"),Y(this,"_networkState",yy.ONLINE),Y(this,"onlineWaiter",void 0),window.addEventListener("online",()=>{this.networkState=yy.ONLINE}),window.addEventListener("offline",()=>{this.networkState=yy.OFFLINE})}};let vle=!1;const bS=new class extends f0{constructor(){super(...arguments),Y(this,"onAutoplayFailed",void 0),Y(this,"onAudioAutoplayFailed",void 0)}};function Gpe(){if(Yp(),!vle){const e=n=>{n.preventDefault(),vle=!1,V8()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};vle=!0,V8()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),de.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),bS.onAutoplayFailed?bS.onAutoplayFailed():de.warning(bS.onAudioAutoplayFailed?"AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.\n\n  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .":"We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.\n\n  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.\n\n  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."),bS.emit("autoplay-failed")}}function yle(e){return(new TextEncoder).encode(e)}const Hpe=function(e,n){const i=new Uint8Array(e.byteLength+n.byteLength);return i.set(new Uint8Array(e),0),i.set(new Uint8Array(n),e.byteLength),i},D_e=function(){var e=l(function*(n){return function(i,c){let h="";return new Uint8Array(i).forEach(g=>{h+=g.toString(16).padStart(2,"0")}),h}(yield crypto.subtle.digest("SHA-256",yle(n)))});return function(i){return e.apply(this,arguments)}}();var qpe;function Wpe(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);n&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),i.push.apply(i,c)}return i}function Xh(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Wpe(Object(i),!0).forEach(function(c){Y(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Wpe(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}function z4(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{report:qc};return function(n,i,c){const h=n[i];if("function"==typeof h){const g="AgoraRTCClient"===n.constructor.name?"Client":n.constructor.name;c.value=function(){for(var v=arguments.length,m=new Array(v),C=0;C<v;C++)m[C]=arguments[C];const y=e.report.reportApiInvoke(this._sessionId||null,{name:"".concat(g,".").concat(i),options:m,tag:Gl.TRACER,reportResult:e.reportResult});try{const N=h.apply(this,m);return y.onSuccess(e.reportResult&&N),N}catch(N){throw y.onError(N),N}}}return c}}function oO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{report:qc};return function(n,i,c){const h=c.value;if("function"==typeof h){let g;g=e.className?e.className:"AgoraRTCClient"===n.constructor.name?"Client":n.constructor.name,c.value=l(function*(){let v;for(var m=arguments.length,C=new Array(m),y=0;y<m;y++)C[y]=arguments[y];try{C.length>0&&(JSON.stringify(C),v=C)}catch(k){de.warning("arguments for method ".concat(g,".").concat(i," not serializable from apiInvoke.")),v=[]}const N=(e.report||qc).reportApiInvoke(this._sessionId||null,{name:"".concat(g,".").concat(i),options:v,tag:Gl.TRACER});try{const k=yield h.apply(this,C);return N.onSuccess(),k}catch(k){throw N.onError(k),k}})}return c}}const qc=new(uy("AgoraRTCEventReport")(qpe=class{constructor(){var e=this;Y(this,"baseInfoMap",new Map),Y(this,"proxyServer",void 0),Y(this,"clientList",KM),Y(this,"eventUploadTimer",void 0),Y(this,"setSessionIdTimer",void 0),Y(this,"url",void 0),Y(this,"backupUrl",void 0),Y(this,"_appId",void 0),Y(this,"keyEventUploadPendingItems",[]),Y(this,"normalEventUploadPendingItems",[]),Y(this,"apiInvokeUploadPendingItems",[]),Y(this,"apiInvokeCount",0),Y(this,"ltsList",[]),Y(this,"lastSendNormalEventTime",Date.now()),Y(this,"customReportCounterTimer",void 0),Y(this,"customReportCount",0),Y(this,"extApiInvoke",function(){var n=l(function*(i){for(const c of i){const h=Xh(Xh({},c),{},{sid:null,invokeId:++e.apiInvokeCount,tag:Gl.TRACER});e.sendApiInvoke(h)}});return function(i){return n.apply(this,arguments)}}()),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),ya("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),ya("EVENT_REPORT_SEND_INTERVAL"))}adjustSessionStartTime(e){if(!this.baseInfoMap.has(e)&&!this.baseInfoMap.get(e))return de.error("adjust session ".concat(e," start time, sid is not exist or info is undefined")),void Gc("error",this,"adjustSessionStartTime","adjust session ".concat(e," start time, sid is not exist or info is undefined"));const n=this.baseInfoMap.get(e),i=Date.now(),c=n.startTime;n.startTime=i,de.debug("rewrite session ".concat(e," startTime: ").concat(i," , ").concat(i-c,"ms")),Gc("debug",this,"adjustSessionStartTime",void 0,"rewrite session ".concat(e," startTime: ").concat(i," , ").concat(i-c,"ms")),this.baseInfoMap.set(e,n)}setAppId(e){this._appId=e}reportApiInvoke(e,n,i){n.timeout=n.timeout||6e4,n.reportResult=void 0===n.reportResult||n.reportResult;const c=Date.now();this.apiInvokeCount+=1;const h=this.apiInvokeCount,g=()=>({tag:n.tag,invokeId:h,sid:e,name:n.name,apiInvokeTime:c,options:n.options,states:n.states||null}),v=!!ya("SHOW_REPORT_INVOKER_LOG");v&&de.info("".concat(n.name," start"),n.options);let m=!1;s_(n.timeout).then(()=>{m||(this.sendApiInvoke(Xh(Xh({},g()),{},{error:_t.API_INVOKE_TIMEOUT,success:!1})),de.debug("".concat(n.name," timeout")))});const C=new ea(_t.UNEXPECTED_ERROR,"".concat(n.name,": this api invoke is end"));return{onSuccess:y=>{const N=()=>{if(m)throw C;return m=!0,this.sendApiInvoke(Xh(Xh({},g()),{},{success:!0},n.reportResult&&{result:y})),v&&de.info("".concat(n.name," onSuccess")),y};return i?Xge(N,n.name+"Success",i,()=>m=!0):N()},onError:y=>{const N=()=>{if(m)throw y;m=!0,this.sendApiInvoke(Xh(Xh({},g()),{},{success:!1,error:y})),v&&de.info("".concat(n.name," onFailure"),y.toString())};return i?Xge(N,n.name+"Error",i,()=>m=!0):N()}}}sessionInit(e,n){if(this.baseInfoMap.has(e))return;const i=Date.now(),c=this.createBaseInfo(e,i);c.cname=n.cname;const h=Object.assign({},{willUploadConsoleLog:ya("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:ZW?"global":"oversea",areas:ya("AREAS")&&ya("AREAS").join(",")},n.extend),g=Date.now(),v=Xh(Xh({},c),{},{eventType:Ky.SESSION_INIT,appid:n.appid,browser:navigator.userAgent,build:oQ,lts:g,elapse:g-i,extend:JSON.stringify(h),mode:n.mode,process:ya("PROCESS_ID"),appType:ya("APP_TYPE"),success:!0,version:o1});this.send({type:s0.SESSION,data:v},!0)}joinChooseServer(e,n){const i=this.baseInfoMap.get(e);if(!i)return;const c=i.info,h=Date.now(),g=Xh(Xh({},c),{},{eventType:Ky.JOIN_CHOOSE_SERVER,lts:h,eventElapse:h-n.lts,chooseServerAddr:n.csAddr,errorCode:n.ec,elapse:h-i.startTime,success:n.succ,chooseServerAddrList:JSON.stringify(n.serverList),uid:n.uid?parseInt(n.uid):null,cid:n.cid?parseInt(n.cid):null,chooseServerIp:n.csIp||"",opid:n.opid,unilbsServerIds:n.unilbsServerIds,extend:n.extend||void 0,isHttp3:n.isHttp3});this.send({type:s0.JOIN_CHOOSE_SERVER,data:g},!0)}reqUserAccount(e,n){const i=this.baseInfoMap.get(e);if(!i)return;const c=i.info,h=Date.now(),g=Xh(Xh({},c),{},{eventType:Ky.REQ_USER_ACCOUNT,lts:h,success:n.success,serverAddress:n.serverAddr,stringUid:n.stringUid,uid:n.uid,errorCode:n.errorCode,elapse:h-i.startTime,eventElapse:h-n.lts,extend:JSON.stringify(n.extend)});this.send({type:s0.REQ_USER_ACCOUNT,data:g},!0)}joinGateway(e,n){const i=this.baseInfoMap.get(e);if(!i)return;const c=i.info;n.vid&&(c.vid=n.vid),c.uid=n.uid,c.cid=n.cid;const h=Date.now(),{firstSuccess:g,avoidJoinStartTime:v,isProxy:m,addr:C}=n,y=h-(g&&v?v:i.startTime),N=Xh(Xh({},c),{},{eventType:Ky.JOIN_GATEWAY,lts:h,gatewayAddr:n.addr,success:n.succ,errorCode:n.ec,elapse:y,eventElapse:h-n.lts,firstSuccess:g,signalChannel:n.signalChannel}),k=N.success?1:0;if(n.succ&&(i.lastJoinSuccessTime=h),g)this.send({type:s0.JOIN_GATEWAY,data:N},!0);else{let U;if(C)if(m){const K=C.match(/h=(\d{1,3}-){3}\d{1,3}/g),$=C.match(/p=[0-9]{1,6}/g);U={isSuccess:k,gatewayIp:K&&K.length?K[0].split("=")[1].replace(/-/g,"."):"",port:$&&$.length?$[0].split("=")[1]:"",isProxy:m?1:0}}else{const K=C.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),$=C.match(/:[0-9]{1,6}/g);U={isSuccess:k,gatewayIp:K&&K.length?K[0].split("//")[1].replace(/-/g,"."):"",port:$&&$.length?$[0].split(":")[1]:"",isProxy:m?1:0}}else U={isSuccess:k,gatewayIp:"",port:"",isProxy:m?1:0};delete N.success,delete N.eventType,delete N.firstSuccess,N.vid=Number(N.vid);const V=Object.assign({},N,U,{eventType:Ky.REJOIN_GATEWAY});this.send({type:s0.RE_JOIN_GATEWAY,data:V},!0)}}joinChannelTimeout(e,n){const i=this.baseInfoMap.get(e);if(!i)return;const c=Date.now(),h=Xh(Xh({},i.info),{},{lts:c,timeout:n,elapse:c-i.startTime});this.send({type:s0.JOIN_CHANNEL_TIMEOUT,data:h},!0)}publish(e,n){const i=this.baseInfoMap.get(e);if(!i)return;const c=i.info,h=Date.now(),g=Xh(Xh({},c),{},{eventType:Ky.PUBLISH,lts:h,eventElapse:n.eventElapse,elapse:h-i.startTime,success:n.succ,errorCode:n.ec,videoName:n.videoName,audioName:n.audioName,screenName:n.screenName,screenshare:n.screenshare,audio:n.audio,video:n.video,p2pid:n.p2pid,publishRequestid:n.publishRequestid});this.send({type:s0.PUBLISH,data:g},!0)}subscribe(e,n,i){const c=this.baseInfoMap.get(e);if(!c)return;const h=c.info,g=Date.now(),v=Xh(Xh({},h),{},{eventType:Ky.SUBSCRIBE,lts:g,eventElapse:n.eventElapse,elapse:g-c.startTime,success:n.succ,errorCode:n.ec,video:n.video,audio:n.audio,subscribeRequestid:n.subscribeRequestid,p2pid:n.p2pid},i&&{extend:JSON.stringify({isMassSubscribe:!0})});"string"==typeof n.peerid?v.peerSuid=n.peerid:v.peer=n.peerid,this.send({type:s0.SUBSCRIBE,data:v},!0)}wsCompressorInit(e){var n;const i=[...J4(n=this.baseInfoMap).call(n)],h=this.baseInfoMap.get(i.length?i[0]:"UnableToGetSid");if(!h)return;const g=h.info,v=Date.now(),m=Xh(Xh({},g),{},{eventType:Ky.WS_COMPRESSOR_INIT,lts:v,eventElapse:e.eventElapse,elapse:v-h.startTime,status:e.status?1:2});this.send({type:s0.WS_COMPRESSOR_INIT,data:m},!0)}firstRemoteVideoDecode(e,n,i,c){const h=this.baseInfoMap.get(e);if(!h)return;const g=h.info,v=Date.now(),m=Xh(Xh(Xh({},g),c),{},{elapse:v-h.startTime,eventType:n,lts:v,firstDecodeFrame:Math.max(v-h.startTime,0),apEnd:Math.max(c.apEnd-h.startTime,0),apStart:Math.max(c.apStart-h.startTime,0),joinGwEnd:Math.max(c.joinGwEnd-h.startTime,0),joinGwStart:Math.max(c.joinGwStart-h.startTime,0),pcEnd:Math.max(c.pcEnd-h.startTime,0),pcStart:Math.max(c.pcStart-h.startTime,0),subscriberEnd:Math.max(c.subscriberEnd-h.startTime,0),subscriberStart:Math.max(c.subscriberStart-h.startTime,0),videoAddNotify:Math.max(c.videoAddNotify-h.startTime,0)});this.send({type:i,data:m},!0)}firstRemoteFrame(e,n,i,c){const h=this.baseInfoMap.get(e);if(!h)return;const g=h.info,v=Date.now(),m=Xh(Xh(Xh({},g),c),{},{elapse:v-h.startTime,eventType:n,lts:v});this.send({type:i,data:m},!0)}onGatewayStream(e,n,i,c){const h=this.baseInfoMap.get(e);if(!h)return;const g=h.info,v=Date.now(),m=Xh(Xh(Xh({},g),c),{},{eventType:n,lts:v});this.send({type:i,data:m},!0)}streamSwitch(e,n){const i=this.baseInfoMap.get(e);if(!i)return;const c=i.info,h=Date.now(),g=Xh(Xh({},c),{},{eventType:Ky.STREAM_SWITCH,lts:h,isDual:n.isdual,elapse:h-i.startTime,success:n.succ});this.send({type:s0.STREAM_SWITCH,data:g},!0)}requestProxyAppCenter(e,n){const i=this.baseInfoMap.get(e);if(!i)return;const c=i.info,h=Date.now(),g=Xh(Xh({},c),{},{eventType:Ky.REQUEST_PROXY_APPCENTER,lts:h,eventElapse:h-n.lts,elapse:h-i.startTime,APAddr:n.APAddr,workerManagerList:n.workerManagerList,response:n.response,errorCode:n.ec,success:n.succ});this.send({type:s0.REQUEST_PROXY_APPCENTER,data:g},!0)}requestProxyWorkerManager(e,n){const i=this.baseInfoMap.get(e);if(!i)return;const c=i.info,h=Date.now(),g=Xh(Xh({},c),{},{eventType:Ky.REQUEST_PROXY_WORKER_MANAGER,lts:h,eventElapse:h-n.lts,elapse:h-i.startTime,workerManagerAddr:n.workerManagerAddr,response:n.response,errorCode:n.ec,success:n.succ});this.send({type:s0.REQUEST_PROXY_WORKER_MANAGER,data:g},!0)}setProxyServer(e){this.proxyServer=e,de.debug(e?"reportProxyServerurl: ".concat(e):"disable reportProxyServerurl: ".concat(e)),Gc("debug",this,"setProxyServer",e)}peerPublishStatus(e,n){const i=this.baseInfoMap.get(e);if(!i)return;const c=i.info,h=Date.now(),g=Xh(Xh({},c),{},{subscribeElapse:n.subscribeElapse,peer:n.peer,peerPublishDuration:Math.max(n.audioPublishDuration,n.videoPublishDuration),audiotag:n.audioPublishDuration>0?1:-1,videotag:n.videoPublishDuration>0?1:-1,lts:h,elapse:h-i.startTime,joinChannelSuccessElapse:h-(i.lastJoinSuccessTime||h),peerPublishDurationVideo:n.videoPublishDuration,peerPublishDurationAudio:n.audioPublishDuration});this.send({type:s0.PEER_PUBLISH_STATUS,data:g},!0)}workerEvent(e,n){const i=this.baseInfoMap.get(e);if(!i)return;const c=i.info,h=Date.now();(function(g,v,m){const C=g[v];if(!C||"string"!=typeof C)return[g];g[v]="";const y=jQ(JSON.stringify(g));let N=0;const k=[];let U=0;for(let V=0;V<C.length;V++)U+=C.charCodeAt(V)<=127?1:3,U<=1300-y||(k[k.length]=_F(_F({},g),{},{[v]:C.substring(N,V)}),N=V,U=C.charCodeAt(V)<=127?1:3);return N!==C.length-1&&(k[k.length]=_F(_F({},g),{},{[v]:C.substring(N)})),k})(Xh(Xh(Xh({},c),n),{},{elapse:h-i.startTime,lts:h,productType:"WebRTC"}),"payload").forEach(g=>this.send({type:s0.WORKER_EVENT,data:g},!0))}apworkerEvent(e,n){const i=this.baseInfoMap.get(e);if(!i)return;const c=i.info,h=Date.now(),g=Xh(Xh(Xh({},c),n),{},{elapse:h-i.startTime,lts:h});this.send({type:s0.AP_WORKER_EVENT,data:g},!0)}joinWebProxyAP(e,n){const i=this.baseInfoMap.get(e);if(!i)return;const c=i.info,h=Date.now(),g=Xh(Xh(Xh({},c),n),{},{elapse:h-i.startTime,lts:h,extend:n.extend||void 0});this.send({type:s0.JOIN_WEB_PROXY_AP,data:g},!0)}WebSocketQuit(e,n){const i=this.baseInfoMap.get(e);if(!i)return;const c=i.info,h=Date.now(),g=Xh(Xh(Xh({},c),n),{},{elapse:h-i.startTime,lts:h});this.send({type:s0.WEBSOCKET_QUIT,data:g},!0)}sendCustomReportMessage(e,n){var i=this;return l(function*(){if(i.customReportCount+=n.length,i.customReportCount>ya("CUSTOM_REPORT_LIMIT"))throw new ea(_t.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);i.customReportCounterTimer||(i.customReportCounterTimer=window.setInterval(()=>{i.customReportCount=0},5e3));const c=n.map(h=>({type:s0.USER_ANALYTICS,data:Xh({sid:e},h)}));try{ya("NEW_REPORT_SERVER")?yield i.postDataToStatsCollector2(c):yield i.postDataToStatsCollector(c)}catch(h){throw de.error("send custom report message failed",h.toString()),new ea(_t.CUSTOM_REPORT_SEND_FAILED,h.message)}})()}autoplayFailed(e,n,i,c){if(!e)return;const h=this.baseInfoMap.get(e);if(!h)return;const g=h.info,v=Date.now(),m=Xh(Xh({},g),{},{vid:void 0===g.vid?0:Number(g.vid),lts:v,elapse:v-h.startTime,cbRegistered:bS.onAutoplayFailed||bS.onAudioAutoplayFailed?1:-1,errorMsg:i,mediaType:n,trackId:c,extend:void 0});this.send({type:s0.AUTOPLAY_FAILED,data:m},!0)}sendApiInvoke(e){const n=ya("NOT_REPORT_EVENT");if(e.tag&&n.includes&&n.includes(e.tag))return!1;if(null===e.sid)return this.apiInvokeUploadPendingItems.push(e),!1;const i=this.baseInfoMap.get(e.sid);if(!i)return this.apiInvokeUploadPendingItems.push(e),!1;const{cname:c,uid:h,cid:g}=i.info;let v;if(e.lts=e.lts||Date.now(),e.error)if(e.error instanceof ea){const{code:C,message:y}=e.error;v=C||y||e.error.toString()}else v=e.error.toString();const m={invokeId:e.invokeId,sid:e.sid,cname:c,cid:g,uid:h,lts:e.lts,success:e.success,elapse:e.lts-i.startTime,execElapse:e.lts-e.apiInvokeTime,apiName:e.name,options:e.options?JSON.stringify(e.options):void 0,execStates:e.states?JSON.stringify(e.states):void 0,execResult:e.result?JSON.stringify(e.result):void 0,errorCode:e.error?v:void 0,errorMsg:e.error?JSON.stringify(e.error):void 0};return this.send({type:s0.API_INVOKE,data:m},!1),!0}appendSessionId(){this.clientList.forEach(e=>{if(e._sessionId){const n=this.apiInvokeUploadPendingItems.length;for(let i=0;i<n;i++){const c=this.apiInvokeUploadPendingItems.shift();c&&(c.sid=e._sessionId,this.sendApiInvoke(Object.assign({},c)))}}})}send(e,n){if(n)return this.keyEventUploadPendingItems.push(e),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(e),this.normalEventUploadPendingItems.length>ya("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(e,n){const i=[],c=[];for(;e.length;){const g=e.shift();i.length<20?i.push(g):c.push(g)}e.push(...c);for(const g of[...i]){var h;-1!==this.ltsList.indexOf(g.data.lts)?(g.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(g.data.lts)):(this.ltsList.push(g.data.lts),Eg(h=this.ltsList).call(h,(v,m)=>v-m))}return n||(this.lastSendNormalEventTime=Date.now()),ya("ENABLE_EVENT_REPORT")&&i.length&&(ya("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(i):this.postDataToStatsCollector(i)).catch((g=>v=>{ya("EVENT_REPORT_RETRY")&&(n?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(g):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(g),this.normalEventUploadPendingItems.length>ya("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-ya("NORMAL_EVENT_QUEUE_CAPACITY")),de.warning("report: drop normal events"))))})(i)),e}postDataToStatsCollector2(e){var n=this;return l(function*(){ey.networkState===yy.OFFLINE&&(yield _l.race([ey.onlineWaiter,s_(2*W0.maxRetryTimeout)]));const i=g=>{let v=new Uint8Array;return g.forEach(m=>{const C=yle(JSON.stringify(m.data)),y=new ArrayBuffer(5),N=(U=>{let V=0;return Object.entries(s0).forEach(K=>{let[$,Z]=K;Z===U.type&&(V=aY[$])}),V})(m),k=new DataView(y);k.setUint16(0,C.byteLength,!0),k.setUint8(2,255&N),k.setUint8(3,N>>>8&255),k.setUint8(4,N>>>16&255),v=Hpe(v,new Uint8Array(y)),v=Hpe(v,C)}),v},c="event";let h=n.proxyServer?"https://".concat(n.proxyServer,"/rs/?h=").concat(ya("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(c):"https://".concat(ya("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(c);for(let g=0;g<2;g+=1){1===g&&(h=n.proxyServer?"https://".concat(n.proxyServer,"/rs/?h=").concat(ya("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(c):"https://".concat(ya("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(c));try{yield iO(h,{timeout:1e4,data:i(e),headers:Xh(Xh({token:"32f24ab2ddb74f508aa9286c356cec84",biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false"},n._appId&&{appid:n._appId}),{},{"Content-Type":"application/octet-stream"})},!0)}catch(v){if(1===g)throw v;continue}return}})()}postDataToStatsCollector(e){var n=arguments,i=this;return l(function*(){let c=n.length>1&&void 0!==n[1]&&n[1];const h={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:e.map(m=>JSON.stringify(m)),vid:(m=>{const C=m&&m.data.sid&&i.baseInfoMap.get(m.data.sid);return C&&C.info.vid&&+C.info.vid||0})(e[0])};ey.networkState===yy.OFFLINE&&(yield _l.race([ey.onlineWaiter,s_(2*W0.maxRetryTimeout)]));const g=c?"/events/proto-raws":"/events/messages";let v=i.url||(i.proxyServer?"https://".concat(i.proxyServer,"/rs/?h=").concat(ya("EVENT_REPORT_DOMAIN"),"&p=").concat(ya("STATS_COLLECTOR_PORT"),"&d=").concat(g):"https://".concat(ya("EVENT_REPORT_DOMAIN"),":").concat(ya("STATS_COLLECTOR_PORT")).concat(g));for(let m=0;m<2;m+=1){1===m&&(v=i.backupUrl||(i.proxyServer?"https://".concat(i.proxyServer,"/rs/?h=").concat(ya("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(ya("STATS_COLLECTOR_PORT"),"&d=").concat(g):"https://".concat(ya("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(ya("STATS_COLLECTOR_PORT")).concat(g)));try{c?yield O_e(v,{timeout:1e4,data:h}):yield iO(v,{timeout:1e4,data:h})}catch(C){if(1===m)throw C;continue}return}})()}createBaseInfo(e,n){const i=Object.assign({},bue);return i.sid=e,this.baseInfoMap.set(e,{info:i,startTime:n}),i}reportResourceTiming(e,n){const i=performance.getEntriesByName(e),c=i[i.length-1];c&&this.reportApiInvoke(n,{name:"Client.resourceTiming",options:c,tag:Gl.TRACER}).onSuccess()}})||qpe);HM.on("REPORT_LOG_UPLOAD",e=>{e.networkState=ey.networkState,qc.reportApiInvoke(null,{name:"logUploadError",options:e,tag:Gl.TRACER})});class Kpe extends f0{constructor(n,i){super(),Y(this,"trackMediaType",void 0),Y(this,"_ID",void 0),Y(this,"_hints",[]),Y(this,"_isClosed",!1),Y(this,"_originMediaStreamTrack",void 0),Y(this,"_mediaStreamTrack",void 0),Y(this,"_external",{}),this._ID=i||x0(8,"track-"),this._originMediaStreamTrack=n,this._mediaStreamTrack=n,XT.includes(this)||XT.push(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(n){if(!n){qc.reportApiInvoke(null,{name:zl.GET_MEDIA_STREAM_TRACK,options:[],tag:Gl.TRACER}).onSuccess(this._mediaStreamTrack&&"string"==typeof this._mediaStreamTrack.label?this._mediaStreamTrack.label:"")}return this._mediaStreamTrack}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,function(n){const i=XT.indexOf(n);-1!==i&&XT.splice(i,1)}(this),this.emit(IS.CLOSED)}}let Iy,N_e=1;class _I{constructor(n){Y(this,"lockingPromise",_l.resolve()),Y(this,"locks",0),Y(this,"name",""),Y(this,"lockId",void 0),this.lockId=N_e++,n&&(this.name=n),de.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}get isLocked(){return this.locks>0}lock(n){let i;this.locks+=1,de.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat("string"==typeof n?n:""));const c=new _l(g=>{i=()=>{this.locks-=1,de.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is not locked, current queue ").concat(this.locks,". ").concat("string"==typeof n?n:"")),g()}}),h=this.lockingPromise.then(()=>i);return this.lockingPromise=this.lockingPromise.then(()=>c),h}}function MQ(e,n){return function(i,c,h){const g=h.value;if("function"!=typeof g)throw new Error("Cannot use mutex on object property.");return h.value=l(function*(){const v=this[n];if(!v)throw new Error("mutex property key ".concat(n," doesn't exist on ").concat(e));const m=yield v.lock("From ".concat(e,".").concat(c));try{for(var C=arguments.length,y=new Array(C),N=0;N<C;N++)y[N]=arguments[N];return yield g.apply(this,y)}finally{m()}}),h}}class _le extends Kpe{get muted(){return this._muted}get enabled(){return this._enabled}constructor(n,i){super(n,i),Y(this,"_enabled",!0),Y(this,"_muted",!1),Y(this,"_isClosed",!1),Y(this,"_enabledMutex",void 0),Y(this,"processor",void 0),Y(this,"processorContext",void 0),Y(this,"_handleTrackEnded",()=>{this.onTrackEnded()}),this._enabledMutex=new _I("".concat(i)),n.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){return this._originMediaStreamTrack.label}close(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,de.debug("[".concat(this.getTrackId(),"] close")),Gc("debug",this,"close"),this.emit(md.NEED_CLOSE),super.close())}_updateOriginMediaStreamTrack(n,i){var c=this;return l(function*(){n!==c._originMediaStreamTrack&&(c._originMediaStreamTrack.removeEventListener("ended",c._handleTrackEnded),i&&c._originMediaStreamTrack.stop(),n.addEventListener("ended",c._handleTrackEnded),c._originMediaStreamTrack=n,c._muted&&(c._originMediaStreamTrack.enabled=!1),c._mediaStreamTrack=c._originMediaStreamTrack,c._updatePlayerSource(),yield Q0(c,md.NEED_REPLACE_TRACK,c),c.processor&&c.processor.updateInput({track:c._originMediaStreamTrack,context:c.processorContext}))})()}_getDefaultPlayerConfig(){return{}}onTrackEnded(){de.debug("[".concat(this.getTrackId(),"] track ended")),i1("debug",["MediaStreamTrack",this.getTrackId()],"ended"),this.emit(IS.TRACK_ENDED)}stateCheck(n,i){if(de.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(n,": ").concat(i,"]")),Gc("debug",this,"stateCheck",{stateName:n,state:i,muted:this._muted,enabled:this._enabled}),ZR(i,n),this._enabled&&this._muted&&"enabled"===n&&!1===i)throw new ea(_t.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print();if(!this._enabled&&!this._muted&&"muted"===n&&!0===i)throw new ea(_t.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}function Ype(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);n&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),i.push.apply(i,c)}return i}(0,Z_.exports)("Float32",function(e){return function(n,i,c){return e(this,n,i,c)}}),function(e){e.IOS_15_INTERRUPTION_START="ios15-interruption-start",e.IOS_15_INTERRUPTION_END="ios15-interruption-end",e.IOS_INTERRUPTION_START="ios-interruption-start",e.IOS_INTERRUPTION_END="ios-interruption-end",e.STATE_CHANGE="state-change"}(Iy||(Iy={}));const Jpe=window.AudioContext||window.webkitAudioContext;let sT=null;const Mf=new class extends f0{constructor(){var e;super(...arguments),e=this,Y(this,"prevState",void 0),Y(this,"curState",void 0),Y(this,"currentTime",void 0),Y(this,"currentTimeStuckAt",void 0),Y(this,"interruptDetectorTrack",void 0),Y(this,"onLocalAudioTrackMute",()=>{de.info("ios15-interruption-start"),p0("info",["WebAudio"],"ios15-interruption-start"),this.emit(Iy.IOS_15_INTERRUPTION_START)}),Y(this,"onLocalAudioTrackUnmute",l(function*(){de.info("ios15-interruption-end"),p0("info",["WebAudio"],"ios15-interruption-end"),"running"!==e.curState||e.duringInterruption?de.info("ios15-interruption-end-canceled"):(sT&&(yield sT.suspend()),e.emit(Iy.IOS_15_INTERRUPTION_END))}))}get duringInterruption(){return"running"===this.prevState&&"interrupted"===this.curState}bindInterruptDetectorTrack(e){de.debug("webaudio bindInterruptDetectorTrack ".concat(e.getTrackId())),Gc("debug",["WebAudio"],"bindInterruptDetectorTrack",e.getTrackId()),this.interruptDetectorTrack||(this.interruptDetectorTrack=e,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(e){de.debug("webaudio unbindInterruptDetectorTrack ".concat(e.getTrackId())),Gc("debug",["WebAudio"],"unbindInterruptDetectorTrack",e.getTrackId()),this.interruptDetectorTrack&&this.interruptDetectorTrack===e&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function BQ(){if(!sT){if(function k_e(){if(!Jpe)return de.error("your browser is not support web audio"),void pl("error",["WebAudio"],"your browser is not support web audio");de.info("create audio context"),WM("info",["WebAudio"],"WebAudioContext");const e=function(n){for(var i=1;i<arguments.length;i++){var c=null!=arguments[i]?arguments[i]:{};i%2?Ype(Object(c),!0).forEach(function(h){Y(n,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(c)):Ype(Object(c)).forEach(function(h){Object.defineProperty(n,h,Object.getOwnPropertyDescriptor(c,h))})}return n}({},ya("WEBAUDIO_INIT_OPTIONS"));de.debug("audio context init option:",JSON.stringify(e)),sT=new Jpe(e),Mf.curState=sT.state,sT.onstatechange=()=>{Mf.prevState=Mf.curState,Mf.curState=sT?sT.state:void 0,(P_()||YR())&&"running"===Mf.prevState&&"interrupted"===Mf.curState&&(de.info("ios-interruption-start"),p0("info",["AudioState"],"ios-interruption-start"),Mf.emit(Iy.IOS_INTERRUPTION_START)),(P_()||YR())&&"interrupted"===Mf.prevState&&"running"===Mf.curState&&(de.info("ios-interruption-end"),p0("info",["AudioState"],"ios-interruption-end"),Mf.emit(Iy.IOS_INTERRUPTION_END)),Mf.prevState!==Mf.curState&&(de.debug("AudioContext State Change","".concat(Mf.prevState,"=>").concat(Mf.curState)),i1("debug",["AudioContext",void 0],"statechange","".concat(Mf.prevState,"=>").concat(Mf.curState)),Mf.emit(Iy.STATE_CHANGE))},setInterval(()=>{var n;const i=null===(n=sT)||void 0===n?void 0:n.currentTime;Mf.currentTime!==i?(Mf.currentTimeStuckAt&&(de.debug("AudioContext current time resume at ".concat(i)),Mf.currentTimeStuckAt=void 0),Mf.currentTime=i):(i!==Mf.currentTimeStuckAt&&(qc.reportApiInvoke(null,{name:"WEB_AUDIO_CURRENT_TIME_STUCK",options:{currentTime:i},tag:Gl.TRACER}).onSuccess(),de.warning("AudioContext current time stuck at ".concat(i))),Mf.currentTimeStuckAt=i)},5e3),function(){var n=l(function*(i){const c=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let h,g=!1,v=!1,m=!1;function C(ye){"running"===i.state?y(!1):P_()||YR()?"suspended"===i.state&&(y(!0),ye&&i.resume().then(k,k)):"closed"!==i.state&&(y(!0),ye&&i.resume().then(k,k))}function y(ye){if(g!==ye){g=ye;for(let be=0,_s=c;be<_s.length;be+=1){const ua=_s[be];ye?window.addEventListener(ua,U,{capture:!0,passive:!0}):window.removeEventListener(ua,U,{capture:!0,passive:!0})}}}function k(){C(!1)}function U(){C(!0)}function V(ye){if(!m)if(h.paused)if(ye){let be;K(!1),m=!0;try{be=h.play(),be?be.then($,$):(h.addEventListener("playing",$),h.addEventListener("abort",$),h.addEventListener("error",$))}catch(_s){$()}}else K(!0);else K(!1)}function K(ye){if(v!==ye){v=ye;for(let be=0,_s=c;be<_s.length;be++){const ua=_s[be];ye?window.addEventListener(ua,Z,{capture:!0,passive:!0}):window.removeEventListener(ua,Z,{capture:!0,passive:!0})}}}function $(){h.removeEventListener("playing",$),h.removeEventListener("abort",$),h.removeEventListener("error",$),m=!1,V(!1)}function Z(){V(!0)}if(P_()){const ye=i.createMediaStreamDestination(),be=document.createElement("div");be.innerHTML="<audio x-webkit-airplay='deny'></audio>",h=be.children.item(0),h.controls=!1,h.disableRemotePlayback=!0,h.preload="auto",h.srcObject=ye.stream,V(!0)}Mf.on(Iy.STATE_CHANGE,function N(){C(!0)}),C(!1)});return function(i){return n.apply(this,arguments)}}()(sT)}(),!sT)throw new ea(_t.NOT_SUPPORTED,"can not create audio context");return sT}return sT}function X4(e){if(function(){if(null!==Ile)return Ile;const c=BQ(),h=c.createBufferSource(),g=c.createGain(),v=c.createGain();h.connect(g),h.connect(v),h.disconnect(g);let m=!1;try{h.disconnect(g)}catch(C){m=!0}return h.disconnect(),Ile=m,m}())return;Gc("debug",["WebAudio"],"polyfillAudioNode");const n=e.connect,i=e.disconnect;e.connect=(c,h,g)=>(e._inputNodes||(e._inputNodes=[]),e._inputNodes.includes(c)||(c instanceof AudioNode?(e._inputNodes.push(c),n.call(e,c,h,g)):n.call(e,c,h)),e),e.disconnect=(c,h,g)=>{i.call(e),c?xle(e._inputNodes,c):e._inputNodes=[];for(const v of e._inputNodes)n.call(e,v)}}let Ile=null;function ble(e,n){let i=!1;const c=1/n;if(ya("DISABLE_WEBAUDIO")){const h=window.setInterval(()=>{i?window.clearInterval(h):e(performance.now()/1e3)},1e3*c)}else{const h=BQ();let g=h.createGain();g.gain.value=0,g.connect(h.destination);const v=()=>{if(i)return void(g=null);const m=h.createOscillator();m.onended=v,m.connect(g),m.start(0),m.stop(h.currentTime+c),e(h.currentTime)};v()}return()=>{i=!0}}const o3=de.prefix("[inject-node]");class L_e{constructor(){Y(this,"nodeLists",[]),Y(this,"prevNode",void 0),Y(this,"nextNode",void 0)}get firstNode(){return this.nodeLists[0]}get lastNode(){return this.nodeLists[this.nodeLists.length-1]}get isActive(){return!!this.nodeLists.length}get isConnected(){return!(!this.prevNode||!this.nextNode)}connect(n,i){o3.debug("connect audio node, current list:"+this.nodeLists.length),this.nodeLists.length?(this.prevNode&&this.prevNode.disconnect(),n.connect(this.firstNode),this.nextNode&&this.lastNode&&this.lastNode.disconnect(),this.lastNode.connect(i),this.nodeLists.forEach((c,h)=>{const g=this.nodeLists[h+1];g&&c.connect(g)})):n.connect(i),this.nextNode=i,this.prevNode=n}disconnect(){var n;o3.debug("disconnect audio node, current list:"+this.nodeLists.length),this.nodeLists.forEach(i=>{i.disconnect()}),null===(n=this.prevNode)||void 0===n||n.disconnect(),this.prevNode=void 0,this.nextNode=void 0}addNode(n){o3.debug("add node in inject node, current list:",this.nodeLists.length),this.prevNode&&this.nextNode?(this.firstNode||(o3.debug("new node is the first node"),this.prevNode.disconnect(),this.prevNode.connect(n),n.connect(this.nextNode)),this.nextNode&&this.lastNode&&(this.lastNode.disconnect(this.nextNode),this.lastNode.connect(n),n.connect(this.nextNode)),this.nodeLists.push(n)):o3.debug("add node is called before inject node connected")}removeNode(n){o3.debug("remove node in inject node, current list:",this.nodeLists.length);const i=this.nodeLists.indexOf(n);if(-1===i)return void o3.debug("$[inject-node] cannot find the node to be removed");const c=this.nodeLists[i+1],h=this.nodeLists[i-1];0===i&&this.prevNode&&this.nextNode&&(this.prevNode.disconnect(n),this.prevNode.connect(c||this.nextNode)),i===this.nodeLists.length-1&&this.nextNode&&h&&(h.disconnect(n),h.connect(this.nextNode)),0!==i&&i!==this.nodeLists.length-1&&(h.disconnect(n),h.connect(c)),o3.debug("remove node in inject node success, current list:",this.nodeLists.length)}}class zpe{constructor(){Y(this,"context",void 0),Y(this,"analyserNode",void 0),Y(this,"sourceNode",void 0),this.context=BQ(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}updateSource(n){if(n!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch(i){}this.sourceNode=n,null==n||n.connect(this.analyserNode)}}getVolumeLevel(){if(!this.sourceNode||(!this.context||P_()||YR()||"running"!==this.context.state&&this.context.resume(),!this.analyserNode))return 0;const n=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(n);else{const c=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(c);for(let h=0;h<n.length;++h)n[h]=c[h]/128-1}const i=_A(n).call(n,(c,h)=>c+h*h,0)/n.length;return Math.max(10*Math.log10(i)+100,0)/100}getAnalyserNode(){return this.analyserNode}rebuildAnalyser(){try{var n,i;null===(n=this.sourceNode)||void 0===n||n.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,null===(i=this.sourceNode)||void 0===i||i.connect(this.analyserNode)}catch(c){de.warning("rebuild analyser node failed.")}}destroy(){this.updateSource(void 0)}}class Xpe extends f0{get processSourceNode(){return this.sourceNode}set processedNode(n){var i;if(!this.isDestroyed&&this._processedNode!==n){try{var c;null===(c=this.sourceNode)||void 0===c||c.disconnect(this.outputNode)}catch(h){}null===(i=this._processedNode)||void 0===i||i.disconnect(),this._processedNode=n,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),Y(this,"outputNode",void 0),Y(this,"outputTrack",void 0),Y(this,"isPlayed",!1),Y(this,"sourceNode",void 0),Y(this,"context",void 0),Y(this,"audioBufferNode",void 0),Y(this,"destNode",void 0),Y(this,"injectNode",void 0),Y(this,"audioOutputLevel",0),Y(this,"volumeLevelAnalyser",void 0),Y(this,"_processedNode",void 0),Y(this,"playNode",void 0),Y(this,"isDestroyed",!1),Y(this,"onNoAudioInput",void 0),Y(this,"isNoAudioInput",!1),Y(this,"_noAudioInputCount",0),this.context=BQ(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),X4(this.outputNode),this.injectNode=new L_e,this.volumeLevelAnalyser=new zpe}startGetAudioBuffer(n){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(n),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=i=>{this.emit(g_.ON_AUDIO_BUFFER,function(c){for(let h=0;h<c.outputBuffer.numberOfChannels;h+=1){const g=c.outputBuffer.getChannelData(h);for(let v=0;v<g.length;v+=1)g[v]=0}return c.inputBuffer}(i))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!dy().webAudioMediaStreamDest)throw new ea(_t.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(n){"running"!==this.context.state&&uT(()=>{Mf.emit("autoplay-failed")}),this.isPlayed=!0,this.playNode=n||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch(n){}this.isPlayed=!1}getAccurateVolumeLevel(){return this.volumeLevelAnalyser.getVolumeLevel()}checkHasAudioInput(){var n=arguments,i=this;return l(function*(){let c=n.length>0&&void 0!==n[0]?n[0]:0;if(c>5)return i.isNoAudioInput=!0,i.onNoAudioInput&&i.onNoAudioInput(),!1;P_()||YR()?"suspended"===i.context.state&&i.context.resume():"running"!==i.context.state&&i.context.resume();const h=i.volumeLevelAnalyser.getAnalyserNode();let g;h.getFloatTimeDomainData?(g=new Float32Array(h.fftSize),h.getFloatTimeDomainData(g)):(g=new Uint8Array(h.fftSize),h.getByteTimeDomainData(g));let v=!1;for(let m=0;m<g.length;m++)0!==g[m]&&(v=!0);return v?(i.isNoAudioInput=!1,!0):(yield s_(200),(yield i.checkHasAudioInput(c?c+1:1))&&v)})()}getAudioVolume(){return this.outputNode.gain.value}setVolume(n){this.outputNode.gain.setValueAtTime(n,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}injectAudioNode(n){this.injectNode.addNode(n)}removeAudioNode(n){this.injectNode.removeNode(n)}disconnect(){var n,i;null===(n=this.processedNode)||void 0===n||n.disconnect(),null===(i=this.sourceNode)||void 0===i||i.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var n;this.processedNode?null===(n=this.processedNode)||void 0===n||n.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.volumeLevelAnalyser.updateSource(this.outputNode)}}class $pe extends Xpe{get isFreeze(){return!1}constructor(n,i,c){var h,g;if(super(),h=this,Y(this,"sourceNode",void 0),Y(this,"track",void 0),Y(this,"clonedTrack",void 0),Y(this,"audioElement",void 0),Y(this,"isCurrentTrackCloned",!1),Y(this,"isRemoteTrack",!1),Y(this,"originVolumeLevelAnalyser",void 0),Y(this,"rebuildWebAudio",l(function*(){if(de.debug("ready to rebuild web audio, state:",h.context.state),h.isNoAudioInput&&(yield h.checkHasAudioInput()),!h.isNoAudioInput||h.isDestroyed)return document.body.removeEventListener("click",h.rebuildWebAudio,!0),void de.debug("rebuild web audio success, current volume status",h.getAccurateVolumeLevel());h.context.resume().then(()=>de.info("resume success")),de.debug("rebuild web audio because of ios 12 bugs"),h.disconnect();const C=h.track;h.track=h.track.clone(),h.isCurrentTrackCloned?C.stop():h.isCurrentTrackCloned=!0;const y=new MediaStream([h.track]);h.sourceNode=h.context.createMediaStreamSource(y),X4(h.sourceNode),h.volumeLevelAnalyser.rebuildAnalyser();const N=h.outputNode.gain.value;h.outputNode=h.context.createGain(),h.outputNode.gain.setValueAtTime(N,h.context.currentTime),X4(h.outputNode),h.emit(g_.UPDATE_SOURCE),h.connect(),h.audioElement.srcObject=y,h.isPlayed&&h.play(h.playNode),h.checkHasAudioInput()})),"audio"!==n.kind)throw new ea(_t.UNEXPECTED_ERROR);this.track=n;const v=new MediaStream([this.track]);if(this.isRemoteTrack=!!i,this.sourceNode=this.context.createMediaStreamSource(v),X4(this.sourceNode),c){const C=c.clone();C.enabled=!0,this.clonedTrack=C,de.debug("create an unmuted track ".concat(C.id," from the original track ").concat(c.id," to get the volume"));const y=this.context.createMediaStreamSource(new MediaStream([C]));X4(y),this.originVolumeLevelAnalyser=new zpe,this.originVolumeLevelAnalyser.updateSource(y)}this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=v;const m=Yp();i&&m.os===My.IOS&&Number(null===(g=m.osVersion)||void 0===g?void 0:g.split(".")[0])<15&&(Mf.on(Iy.STATE_CHANGE,()=>{"suspended"===this.context.state?document.body.addEventListener("click",this.rebuildWebAudio,!0):"running"===this.context.state&&this.rebuildWebAudio()}),this.checkHasAudioInput().then(C=>{C||document.body.addEventListener("click",this.rebuildWebAudio,!0)}))}updateTrack(n){this.sourceNode.disconnect(),this.track=n,this.isCurrentTrackCloned=!1;const i=new MediaStream([n]);this.sourceNode=this.context.createMediaStreamSource(i),X4(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(g_.UPDATE_SOURCE),this.audioElement.srcObject=i}destroy(){var n;this.audioElement.srcObject=null,this.audioElement.remove(),Mf.off("state-change",this.rebuildWebAudio),null===(n=this.originVolumeLevelAnalyser)||void 0===n||n.destroy(),this.clonedTrack=void 0,super.destroy()}createMediaStreamSourceNode(n){return this.context.createMediaStreamSource(new MediaStream([n]))}updateOriginTrack(n){const i=n.clone();i.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=i),de.debug("create an unmuted track ".concat(i.id," from the original track ").concat(n.id," to get the volume"));const c=this.context.createMediaStreamSource(new MediaStream([i]));X4(c),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(c)}getOriginVolumeLevel(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()}}function Zpe(e,n){return Cle.apply(this,arguments)}function Cle(){return Cle=l(function*(e,n){const i=(h,g)=>h?"number"!=typeof h?h.max||h.exact||h.ideal||h.min||g:h:g,c={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxHeight:i(n.height,1080),maxWidth:i(n.width,1920)}}};return n.frameRate&&"number"!=typeof n.frameRate?(c.video.mandatory.maxFrameRate=n.frameRate.max,c.video.mandatory.minFrameRate=n.frameRate.min):"number"==typeof n.frameRate&&(c.video.mandatory.maxFrameRate=n.frameRate),yield navigator.mediaDevices.getUserMedia(c)}),Cle.apply(this,arguments)}function P_e(e){return Sle.apply(this,arguments)}function Sle(){return Sle=l(function*(e){const n=yield ege(e.mediaSource),i=yield(c=n,new _l((h,g)=>{const v=document.createElement("div");v.innerText="share screen",v.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const m=document.createElement("div");m.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const C=document.createElement("div");C.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",C.setAttribute("style","height: 12%;");const y=document.createElement("div");y.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const N=document.createElement("div");N.setAttribute("style","text-align: right; padding: 16px 0;");const k=document.createElement("button");k.innerHTML="cancel",k.setAttribute("style","width: 85px;"),k.onclick=()=>{document.body.removeChild(U);const V=new Error("NotAllowedError");V.name="NotAllowedError",g(V)},N.appendChild(k),m.appendChild(C),m.appendChild(y),m.appendChild(N);const U=document.createElement("div");U.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),U.appendChild(v),U.appendChild(m),document.body.appendChild(U),c.map(V=>{if(V.id){const K=document.createElement("div");K.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let $=V.thumbnail;const{width:Z}=$.getSize();Z>1920&&($=$.resize({width:1920})),K.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+$.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+V.name.replace(/[\u00A0-\u9999<>\&]/g,function(ye){return"&#"+ye.charCodeAt(0)+";"})+"</span>",K.onclick=()=>{document.body.removeChild(U),h(V.id)},y.appendChild(K)}})}));var c;return yield Zpe(i,e)}),Sle.apply(this,arguments)}function ege(e){return Tle.apply(this,arguments)}function Tle(){return Tle=l(function*(e){let n=["window","screen"];"application"!==e&&"window"!==e||(n=["window"]),"screen"===e&&(n=["screen"]);const i=tge();if(!i)throw new ea(_t.ELECTRON_IS_NULL);let c=null;try{var h;c=(null===(h=i.desktopCapturer)||void 0===h?void 0:h.getSources({types:n}))||i.ipcRenderer.invoke("DESKTOP_CAPTURER_GET_SOURCES",{types:n})}catch(g){c=null}c&&c.then||(c=new _l((g,v)=>{i.desktopCapturer.getSources({types:n},(m,C)=>{m?v(m):g(C)})}));try{return yield c}catch(g){throw new ea(_t.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,g.toString())}}),Tle.apply(this,arguments)}let fre=null;function tge(){if(fre)return fre;try{return fre=window.require("electron"),fre}catch(e){return null}}const wle=new _I("safari");let nge=!1,rge=!1;function nR(e,n){return Rle.apply(this,arguments)}function Rle(){return Rle=l(function*(e,n){let i=0,c=null;for(;i<2;)try{c=yield x_e(e,n,i>0);break}catch(h){if(h instanceof ea)throw de.error("[".concat(n,"] ").concat(h.toString())),Gc("error",[],"getLocalStream",{config:e,id:n},h.toString()),h;const g=pre(h.name||h.code||h,h.message);if(g.code===_t.MEDIA_OPTION_INVALID){de.debug("[".concat(n,"] detect media option invalid, retry")),pl("debug",[],"[".concat(n,"] detect media option invalid, retry")),i+=1,yield s_(500);continue}throw de.error("[".concat(n,"] ").concat(g.toString())),Gc("error",[],"getLocalStream",{config:e,id:n},g.toString()),g}if(!c)throw new ea(_t.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return c}),Rle.apply(this,arguments)}function x_e(e,n,i){return Ole.apply(this,arguments)}function Ole(){return Ole=l(function*(e,n,i){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new ea(_t.NOT_SUPPORTED,"can not find getUserMedia");i&&(e.video&&(delete e.video.width,delete e.video.height),e.screen&&(delete e.screen.width,delete e.screen.height));const c=dy(),h=new MediaStream;if(e.audioSource&&h.addTrack(e.audioSource),e.videoSource&&h.addTrack(e.videoSource),!e.audio&&!e.video&&!e.screen)return de.debug("Using Video Source/ Audio Source"),pl("debug",[],"Using Video Source/ Audio Source"),h;if(e.screen)if(tge())UQ(h,e.screen.sourceId?yield Zpe(e.screen.sourceId,e.screen):yield P_e(e.screen));else if(RW()&&e.screen.extensionId&&e.screen.mandatory){if(!c.getStreamFromExtension)throw new ea(_t.NOT_SUPPORTED,"This browser does not support screen sharing");de.debug("[".concat(n,'] Screen access on chrome stable, looking for extension"')),pl("debug",[],"[".concat(n,'] Screen access on chrome stable, looking for extension"'));const k=yield(g=e.screen.extensionId,v=n,new _l((U,V)=>{try{chrome.runtime.sendMessage(g,{getStream:!0},K=>{if(!K||!K.streamId)return de.error("[".concat(v,"] No response from Chrome Plugin. Plugin not installed properly"),K),Gc("error",[],"getSourceIdFromExtension",{extensionId:g,streamId:v},"No response from Chrome Plugin. Plugin not installed properly, ".concat(K)),void V(new ea(_t.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));U(K.streamId)})}catch(K){de.error("[".concat(v,"] AgoraRTC screensharing plugin is not accessible(").concat(g,")"),K.toString()),Gc("error",[],"getSourceIdFromExtension",{extensionId:g,streamId:v},"AgoraRTC screensharing plugin is not accessible(".concat(g,"), ").concat(K.toString())),V(new ea(_t.CHROME_PLUGIN_NOT_INSTALL))}}));e.screen.mandatory.chromeMediaSourceId=k,UQ(h,yield navigator.mediaDevices.getUserMedia({video:{mandatory:e.screen.mandatory}}))}else if(c.getDisplayMedia){e.screen.mediaSource&&fY(e.screen.mediaSource);const k={width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate,displaySurface:"screen"===e.screen.mediaSource?"monitor":e.screen.mediaSource};de.debug("[".concat(n,"] getDisplayMedia:"),JSON.stringify({video:k,audio:!!e.screenAudio})),WM("debug",["mediaDevices",n],"getDisplayMedia",{video:k,audio:!!e.screenAudio,trackId:n}),UQ(h,yield navigator.mediaDevices.getDisplayMedia({video:k,audio:!!e.screenAudio}))}else{if(!h0())throw de.error("[".concat(n,"] This browser does not support screenSharing")),new ea(_t.NOT_SUPPORTED,"This browser does not support screen sharing");{e.screen.mediaSource&&fY(e.screen.mediaSource);const k={video:{mediaSource:e.screen.mediaSource,width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate}};de.debug("[".concat(n,"] getUserMedia: ").concat(JSON.stringify(k))),WM("debug",["mediaDevices",n],"getUserMedia",k),UQ(h,yield navigator.mediaDevices.getUserMedia(k))}}var g,v;if(!e.video&&!e.audio)return h;let m={video:e.video,audio:e.audio},C=ya("MEDIA_DEVICE_CONSTRAINTS");if(C)try{"string"==typeof C&&(C=JSON.parse(C)),m=function k(U,V){if(!$ge(U)||!$ge(V)||Array.isArray(U)&&!Array.isArray(V)||!Array.isArray(U)&&Array.isArray(V))return V;if(Array.isArray(V)&&Array.isArray(U)){const K=[...U];for(let $=0;$<V.length;$++)K[$]=k(U[$],V[$]);return K}{const K=_F({},U);for(const $ in V)Object.prototype.hasOwnProperty.call(V,$)&&(K[$]=Object.prototype.hasOwnProperty.call(U,$)?k(U[$],V[$]):V[$]);return K}}(m,C),pl("debug",["mediaDevices",n],"merge configConstraints ".concat(JSON.stringify(C)))}catch(k){}de.debug("[".concat(n,"] GetUserMedia"),JSON.stringify(m)),WM("debug",["mediaDevices",n],"getUserMedia",m),Yp();let y,N=null;(L_()||P_()||j8())&&(N=yield wle.lock());try{y=yield navigator.mediaDevices.getUserMedia(m)}catch(k){throw N&&N(),k}return m.audio&&(nge=!0),m.video&&(rge=!0),UQ(h,y),N&&N(),h}),Ole.apply(this,arguments)}function pre(e,n){switch(e){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new ea(_t.MEDIA_OPTION_INVALID,"".concat(e,": ").concat(n));case"NotFoundError":case"DevicesNotFoundError":return new ea(_t.DEVICE_NOT_FOUND,"".concat(e,": ").concat(n));case"NotSupportedError":return new ea(_t.NOT_SUPPORTED,"".concat(e,": ").concat(n));case"NotReadableError":return new ea(_t.NOT_READABLE,"".concat(e,": ").concat(n));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new ea(_t.PERMISSION_DENIED,"".concat(e,": ").concat(n));case"ConstraintNotSatisfiedError":return new ea(_t.CONSTRAINT_NOT_SATISFIED,"".concat(e,": ").concat(n));default:return de.error("getUserMedia unexpected error",e),Gc("error",[],"handleGetUserMediaError",void 0,e),new ea(_t.UNEXPECTED_ERROR,"".concat(e,": ").concat(n))}}function UQ(e,n){const i=e.getVideoTracks()[0],c=e.getAudioTracks()[0],h=n.getVideoTracks()[0],g=n.getAudioTracks()[0];g&&(c&&e.removeTrack(c),e.addTrack(g)),h&&(i&&e.removeTrack(i),e.addTrack(h))}const _C=new class extends f0{get state(){return this._state}set state(e){e!==this._state&&(this.emit(ZT.STATE_CHANGE,e),this._state=e)}constructor(){super(),Y(this,"_state",WN.IDLE),Y(this,"isAccessMicrophonePermission",!1),Y(this,"isAccessCameraPermission",!1),Y(this,"lastAccessMicrophonePermission",!1),Y(this,"lastAccessCameraPermission",!1),Y(this,"checkdeviceMatched",!1),Y(this,"deviceInfoMap",new Map),this.init().then(()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval(()=>{(ya("ENUMERATE_DEVICES_INTERVAL")||Ute()&&jM())&&this.updateDevicesInfo()},ya("ENUMERATE_DEVICES_INTERVAL_TIME"))}).catch(e=>de.error(e.toString()))}enumerateDevices(e,n){var i=arguments,c=this;return l(function*(){let h=i.length>2&&void 0!==i[2]&&i[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new ea(_t.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();const g=yield navigator.mediaDevices.enumerateDevices(),v=c.checkMediaDeviceInfoIsOk(g);let m=!c.isAccessMicrophonePermission&&e,C=!c.isAccessCameraPermission&&n;v.audio&&(m=!1),v.video&&(C=!1);let y=null,N=null,k=null;if(!h&&(m||C)){if(wle.isLocked&&(de.debug("[device manager] wait GUM lock"),(yield wle.lock())(),de.debug("[device manager] GUM unlock")),nge&&(m=!1,c.isAccessMicrophonePermission=!0),rge&&(C=!1,c.isAccessCameraPermission=!0),de.debug("[device manager] check media device permissions",e,n,m,C),m&&C){try{k=yield navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(U){const V=pre(U.name||U.code||U,U.message);if(V.code===_t.PERMISSION_DENIED)throw V;de.warning("getUserMedia failed in getDevices",V)}c.isAccessCameraPermission=!0,c.isAccessMicrophonePermission=!0}else if(m){try{y=yield navigator.mediaDevices.getUserMedia({audio:e})}catch(U){const V=pre(U.name||U.code||U,U.message);if(V.code===_t.PERMISSION_DENIED)throw V;de.warning("getUserMedia failed in getDevices",V)}c.isAccessMicrophonePermission=!0}else if(C){try{N=yield navigator.mediaDevices.getUserMedia({video:n})}catch(U){const V=pre(U.name||U.code||U,U.message);if(V.code===_t.PERMISSION_DENIED)throw V;de.warning("getUserMedia failed in getDevices",V)}c.isAccessCameraPermission=!0}de.debug("[device manager] mic permission",e,"cam permission",n)}try{const U=yield navigator.mediaDevices.enumerateDevices();return y&&y.getTracks().forEach(V=>V.stop()),N&&N.getTracks().forEach(V=>V.stop()),k&&k.getTracks().forEach(V=>V.stop()),y=null,N=null,k=null,U}catch(U){return y&&y.getTracks().forEach(V=>V.stop()),N&&N.getTracks().forEach(V=>V.stop()),k&&k.getTracks().forEach(V=>V.stop()),y=null,N=null,k=null,new ea(_t.ENUMERATE_DEVICES_FAILED,U.toString()).throw()}})()}getRecordingDevices(){var e=arguments,n=this;return l(function*(){let i=e.length>0&&void 0!==e[0]&&e[0];return(yield n.enumerateDevices(!0,!1,i)).filter(c=>"audioinput"===c.kind)})()}getCamerasDevices(){var e=arguments,n=this;return l(function*(){let i=e.length>0&&void 0!==e[0]&&e[0];return(yield n.enumerateDevices(!1,!0,i)).filter(c=>"videoinput"===c.kind)})()}getSpeakers(){var e=arguments,n=this;return l(function*(){let i=e.length>0&&void 0!==e[0]&&e[0];return(yield n.enumerateDevices(!0,!1,i)).filter(c=>"audiooutput"===c.kind)})()}searchDeviceIdByName(e){let n=null;return this.deviceInfoMap.forEach(i=>{i.device.label===e&&(n=i.device.deviceId)}),n}getDeviceById(e){var n=this;return l(function*(){const i=(yield n.enumerateDevices(!0,!0,!0)).find(c=>c.deviceId===e);if(!i)throw new ea(_t.DEVICE_NOT_FOUND,"deviceId: ".concat(e));return i})()}init(){var e=this;return l(function*(){e.state=WN.INITING;try{yield e.updateDevicesInfo(),e.state=WN.INITEND}catch(n){throw de.warning("Device Detection functionality cannot start properly.",n.toString()),e.state=WN.IDLE,!("boolean"==typeof isSecureContext?isSecureContext:"https:"===location.protocol||"file:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname||"::1"===location.hostname)&&new ea(_t.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),n}})()}updateDevicesInfo(){var e=this;return l(function*(){const n=yield e.enumerateDevices(!0,!0,!0),i=Date.now(),c=[];if(n[0]&&n[0].label&&!1===e.checkdeviceMatched){e.checkdeviceMatched=!0;const g=n.find(m=>"audioinput"===m.kind&&"default"===m.deviceId),v=n.find(m=>"audiooutput"===m.kind&&"default"===m.deviceId);g&&v?v.groupId===g.groupId?de.debug("[device-check] default input ".concat(g.label," and output ").concat(v.label," is the same group")):de.warning("[device-check] default input ".concat(g.label," and output ").concat(v.label," is not the same group")):de.debug("[device-check] default input or output not found")}const h=e.checkMediaDeviceInfoIsOk(n);if(n.forEach(g=>{if(!g.deviceId)return;const v=e.deviceInfoMap.get("".concat(g.kind,"_").concat(g.deviceId));if("ACTIVE"!==(v?v.state:"INACTIVE")){const m={initAt:i,updateAt:i,device:g,state:"ACTIVE"};e.deviceInfoMap.set("".concat(g.kind,"_").concat(g.deviceId),m),c.push(m)}v&&(v.updateAt=i)}),e.deviceInfoMap.forEach((g,v)=>{"ACTIVE"===g.state&&g.updateAt!==i&&(g.state="INACTIVE",c.push(g))}),e.state!==WN.INITEND)return h.audio&&(e.lastAccessMicrophonePermission=!0,e.isAccessMicrophonePermission=!0),void(h.video&&(e.lastAccessCameraPermission=!0,e.isAccessCameraPermission=!0));c.forEach(g=>{switch(g.device.kind){case"audioinput":e.lastAccessMicrophonePermission&&e.isAccessMicrophonePermission&&e.emit(ZT.RECORDING_DEVICE_CHANGED,g);break;case"videoinput":e.lastAccessCameraPermission&&e.isAccessCameraPermission&&e.emit(ZT.CAMERA_DEVICE_CHANGED,g);break;case"audiooutput":e.lastAccessMicrophonePermission&&e.isAccessMicrophonePermission&&e.emit(ZT.PLAYOUT_DEVICE_CHANGED,g)}}),h.audio&&(e.lastAccessMicrophonePermission=!0,e.isAccessMicrophonePermission=!0),h.video&&(e.lastAccessCameraPermission=!0,e.isAccessCameraPermission=!0)})()}checkMediaDeviceInfoIsOk(e){const n=e.filter(h=>"audioinput"===h.kind),i=e.filter(h=>"videoinput"===h.kind),c={audio:!1,video:!1};for(const h of n)if(h.label&&h.deviceId){c.audio=!0;break}for(const h of i)if(h.label&&h.deviceId){c.video=!0;break}return c}};var ige;let M_e=uy("AudioElementPlayCenter")(ige=class{constructor(){Y(this,"onAutoplayFailed",void 0),Y(this,"elementMap",new Map),Y(this,"elementStateMap",new Map),Y(this,"elementsNeedToResume",[]),Y(this,"sinkIdMap",new Map),Y(this,"autoResumeAfterInterruption",()=>{Array.from(this.elementMap.entries()).forEach(e=>{let[n,i]=e;const c=this.elementStateMap.get(n),h=i.srcObject.getAudioTracks()[0];FM()?h&&"live"===h.readyState&&"running"===Mf.curState&&(de.debug("auto resume after interruption for iOS 15"),pl("debug",["AudioElementPlayCenter",n],"auto resume after interruption for iOS15"),i.pause(),i.play()):c&&"paused"===c&&h&&"live"===h.readyState&&"running"===Mf.curState&&(de.debug("auto resume after interruption for iOS"),pl("debug",["AudioElementPlayCenter",n],"auto resume after interruption for iOS"),i.play())})}),Y(this,"autoResumeAfterInterruptionOnIOS15",()=>{Array.from(this.elementMap.entries()).forEach(e=>{let[n,i]=e;const c=i.srcObject.getAudioTracks()[0];c&&"live"===c.readyState&&(de.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),Gc("debug",["AudioElementPlayCenter",n],"autoResumeAfterInterruptionOnIOS15"),i.pause(),i.play())})}),this.autoResumeAudioElement(),Mf.on(Iy.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Mf.on(Iy.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15),Mf.on(Iy.STATE_CHANGE,()=>{P_()&&"suspended"===Mf.prevState&&"running"===Mf.curState&&this.autoResumeAfterInterruption()})}setSinkID(e,n){var i=this;return l(function*(){const c=i.elementMap.get(e);if(i.sinkIdMap.set(e,n),c)try{yield c.setSinkId(n)}catch(h){throw new ea(_t.PERMISSION_DENIED,"can not set sink id: "+h.toString())}})()}play(e,n,i,c){if(this.elementMap.has(n))return;const h=document.createElement("audio");h.autoplay=!0,h.srcObject=new MediaStream([e]),this.bindAudioElementEvents(n,h),this.elementMap.set(n,h),this.elementStateMap.set(n,Wy.INIT),this.setVolume(n,i);const g=this.sinkIdMap.get(n);if(g)try{h.setSinkId(g).catch(m=>{de.warning("[".concat(n,"] set sink id failed"),m.toString()),WM("warning",["HTMLAudioElement",n],"setSinkId",m.toString())})}catch(m){de.warning("[".concat(n,"] set sink id failed"),m.toString())}const v=h.play();v&&v.then&&v.catch(m=>{c&&qc.autoplayFailed(c,"audio",m.message,n),de.warning("audio element play warning",m.toString()),WM("warning",["HTMLAudioElement",n],"play",m.toString()),this.elementMap.has(n)&&"NotAllowedError"===m.name&&(de.warning("detected audio element autoplay failed"),Gc("warning",["AudioElementPlayCenter",n],"play",m.toString()),this.elementsNeedToResume.push(h),uT(()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),Gpe()}))})}updateTrack(e,n){const i=this.elementMap.get(e);i&&(i.srcObject=new MediaStream([n]))}isPlaying(e){return this.elementMap.has(e)}setVolume(e,n){const i=this.elementMap.get(e);i&&(n=Math.max(0,Math.min(100,n)),i.volume=n/100)}stop(e){const n=this.elementMap.get(e);if(this.sinkIdMap.delete(e),!n)return;const i=this.elementsNeedToResume.indexOf(n);this.elementsNeedToResume.splice(i,1),n.srcObject=null,n.remove(),this.elementMap.delete(e),this.elementStateMap.delete(e)}bindAudioElementEvents(e,n){B_e.forEach(i=>{n.addEventListener(i,c=>{const h=this.elementStateMap.get(e),g="pause"===c.type?"paused":c.type;de.debug("[".concat(e,"] audio-element-status change ").concat(h," => ").concat(g)),i1("debug",["HTMLAudioElement",e],"statusChange","".concat(h," => ").concat(g)),this.elementStateMap.set(e,g)})})}getPlayerState(e){return this.elementStateMap.get(e)||"uninit"}autoResumeAudioElement(){const e=()=>{this.elementsNeedToResume.forEach(n=>{n.play().then(i=>{de.debug("Auto resume audio element success"),Gc("debug",["AudioElementPlayCenter"],"autoResumeAudioElement")}).catch(i=>{de.warning("Auto resume audio element failed!",i),Gc("warning",["AudioElementPlayCenter"],"autoResumeAudioElement",i.toString())})}),this.elementsNeedToResume=[]};new _l(n=>{document.body?n():window.addEventListener("load",()=>n())}).then(()=>{V8()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0))})}})||ige;const B_e=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended"],eS=new M_e;function K0(){return function(e,n,i){const c=i.value;return"function"==typeof c&&(i.value=function(){this._isClosed&&new ea(_t.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning");for(var h=arguments.length,g=new Array(h),v=0;v<h;v++)g[v]=arguments[v];const m=c.apply(this,g);return m instanceof _l?new _l((C,y)=>{m.then(C).catch(y)}):m}),i}}var oge,sge,age,cge,uge,lge,dge,hge,fge,pge,gge,Age,mge,Jy,Ege,vge,yge,_ge,Ige,bge,$4,Cge,Sge,Tge,wge,Rge,Oge,Dge,D1,Nge,U_e=Ml("Array").values,F_e=qS,j_e=Dy,Q_e=gy,V_e=U_e,Dle=Array.prototype,G_e={DOMTokenList:!0,NodeList:!0},ZN=function(e){var n=e.values;return e===Dle||Q_e(Dle,e)&&n===Dle.values||j_e(G_e,F_e(e))?V_e:n};function kge(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);n&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),i.push.apply(i,c)}return i}function gre(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?kge(Object(i),!0).forEach(function(c){Y(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):kge(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}class Lge extends f0{constructor(n){super(),Y(this,"name","VideoProcessorDestination"),Y(this,"ID","0"),Y(this,"_source",void 0),Y(this,"videoContext",void 0),Y(this,"inputTrack",void 0),this.videoContext=n}get kind(){return"video"}get enabled(){return!0}pipe(){throw new ea(_t.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new ea(_t.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(n){if(n.context!==this.videoContext)throw new Error("ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.\nProbably you are making pipeline like this:\nvideoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).");n.track&&n.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=n.track,this.emit(Yy.ON_TRACK,n.track))}reset(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(Yy.ON_TRACK,void 0)}}class Pge extends f0{set chained(n){this._chained=n}get chained(){return this._chained}constructor(n,i){super(),Y(this,"constraintsMap",new Map),Y(this,"statsRegistry",[]),Y(this,"usageRegistry",[]),Y(this,"trackId",void 0),Y(this,"direction",void 0),Y(this,"_chained",!1),this.trackId=n,this.direction=i}getConstraints(){var n=this;return l(function*(){return yield E_(n,X_.REQUEST_CONSTRAINTS)})()}requestApplyConstraints(n,i){var c=this;return l(function*(){var h;return de.info("processor ".concat(i.name," requestApplyConstraints for ").concat(c.trackId)),n&&c.constraintsMap.set(i,n),Q0(c,X_.REQUEST_UPDATE_CONSTRAINTS,Array.from(ZN(h=c.constraintsMap).call(h)))})()}requestRevertConstraints(n){var i=this;return l(function*(){var c;if(i.constraintsMap.has(n))return de.info("processor ".concat(n.name," requestRevertConstraints for ").concat(i.trackId)),i.constraintsMap.delete(n),Q0(i,X_.REQUEST_UPDATE_CONSTRAINTS,Array.from(ZN(c=i.constraintsMap).call(c)))})()}registerStats(n,i,c){this.statsRegistry.find(h=>h.processorID===n.ID&&h.processorName===n.name&&h.type===i)||this.statsRegistry.push({processorName:n.name,processorID:n.ID,type:i,cb:c})}unregisterStats(n,i){const c=this.statsRegistry.findIndex(h=>h.processorID===n.ID&&h.processorName===n.name&&h.type===i);-1!==c&&this.statsRegistry.splice(c,1)}gatherStats(){const n=[];for(const{processorID:i,processorName:c,type:h,cb:g}of this.statsRegistry)try{const v=g();n.push({processorID:i,processorName:c,type:h,stats:v})}catch(v){de.error(new ea(_t.UNEXPECTED_ERROR,v.message))}return n}registerUsage(n,i){this.usageRegistry.find(c=>c.processorID===n.ID&&c.processorName===n.name)||this.usageRegistry.push({processorID:n.ID,processorName:n.name,cb:i})}unregisterUsage(n){const i=this.usageRegistry.findIndex(c=>c.processorID===n.ID&&c.processorName===n.name);-1!==i&&this.usageRegistry.splice(i,1)}gatherUsage(){var n=this;return l(function*(){const i=[];if(!n.chained)return[];for(const{cb:c}of n.usageRegistry)try{let h=c();h instanceof _l&&(h=yield h),i.push(gre(gre({},h),{},{direction:n.direction}))}catch(h){de.error("gather extension usage error",h)}return i})()}getDirection(){return this.direction}}class xge extends f0{constructor(n){super(),Y(this,"name","AudioProcessorDestination"),Y(this,"ID","0"),Y(this,"inputTrack",void 0),Y(this,"inputNode",void 0),Y(this,"audioProcessorContext",void 0),Y(this,"_source",void 0),this.audioProcessorContext=n}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new ea(_t.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new ea(_t.NOT_SUPPORTED,"AudioProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(Yy.ON_TRACK,void 0),this.emit(Yy.ON_NODE,void 0)}updateInput(n){if(n.context!==this.audioProcessorContext)throw new Error("ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.\n        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).");n.track&&this.inputTrack!==n.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=n.track,this.emit(Yy.ON_TRACK,this.inputTrack)),n.node&&this.inputNode!==n.node&&(this.audioProcessorContext.chained=!0,this.inputNode=n.node,this.emit(Yy.ON_NODE,this.inputNode))}}class Mge extends f0{set chained(n){this._chained=n}get chained(){return this._chained}constructor(n,i,c){super(),Y(this,"constraintsMap",new Map),Y(this,"statsRegistry",[]),Y(this,"audioContext",void 0),Y(this,"trackId",void 0),Y(this,"direction",void 0),Y(this,"usageRegistry",[]),Y(this,"_chained",!1),this.audioContext=n,this.trackId=i,this.direction=c}getConstraints(){var n=this;return l(function*(){return E_(n,X_.REQUEST_CONSTRAINTS)})()}getAudioContext(){return this.audioContext}requestApplyConstraints(n,i){var c=this;return l(function*(){var h;return de.info("processor ".concat(i.name," requestApplyConstraints for ").concat(c.trackId)),n&&c.constraintsMap.set(i,n),Q0(c,X_.REQUEST_UPDATE_CONSTRAINTS,Array.from(ZN(h=c.constraintsMap).call(h)))})()}requestRevertConstraints(n){var i=this;return l(function*(){var c;if(i.constraintsMap.has(n))return i.constraintsMap.delete(n),Q0(i,X_.REQUEST_UPDATE_CONSTRAINTS,Array.from(ZN(c=i.constraintsMap).call(c)))})()}registerStats(n,i,c){this.statsRegistry.find(h=>h.processorID===n.ID&&h.processorName===n.name&&h.type===i)||this.statsRegistry.push({processorName:n.name,processorID:n.ID,type:i,cb:c})}unregisterStats(n,i){const c=this.statsRegistry.findIndex(h=>h.processorID===n.ID&&h.processorName===n.name&&h.type===i);-1!==c&&this.statsRegistry.splice(c,1)}gatherStats(){const n=[];for(const{processorID:i,processorName:c,type:h,cb:g}of this.statsRegistry)try{const v=g();n.push({processorID:i,processorName:c,type:h,stats:v})}catch(v){de.error(new ea(_t.UNEXPECTED_ERROR,v.message))}return n}registerUsage(n,i){this.usageRegistry.find(c=>c.processorID===n.ID&&c.processorName===n.name)||this.usageRegistry.push({processorID:n.ID,processorName:n.name,cb:i})}unregisterUsage(n){const i=this.usageRegistry.findIndex(c=>c.processorID===n.ID&&c.processorName===n.name);-1!==i&&this.usageRegistry.splice(i,1)}gatherUsage(){var n=this;return l(function*(){const i=[];if(!n.chained)return[];for(const{cb:c}of n.usageRegistry)try{let h=c();h instanceof _l&&(h=yield h),i.push(gre(gre({},h),{},{direction:n.direction}))}catch(h){de.error("gather extension usage error",h)}return i})()}getDirection(){return this.direction}}class Bge extends f0{get isPlayed(){return!0}get isFreeze(){return!1}constructor(){super(),Y(this,"context",void 0),Y(this,"processSourceNode",void 0),Y(this,"outputTrack",void 0),Y(this,"processedNode",void 0),Y(this,"clonedTrack",void 0),Y(this,"outputNode",void 0),this.outputNode=new H_e}setVolume(){}createOutputTrack(){throw new ea(_t.NOT_SUPPORTED,"can not create output MediaStreamTrack when WebAudio disabled")}getOriginVolumeLevel(){return 0}getAccurateVolumeLevel(){return 0}stopGetAudioBuffer(){}startGetAudioBuffer(){}play(){}stop(){}destroy(){}updateTrack(){}updateOriginTrack(){}createMediaStreamSourceNode(){}}class H_e{disconnect(){}connect(){}}function Uge(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);n&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),i.push.apply(i,c)}return i}function Nle(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Uge(Object(i),!0).forEach(function(c){Y(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Uge(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}let m_=(oge=uy("LocalAudioTrack","getTrackId"),sge=K0(),age=MQ("LocalAudioTrack","_enabledMutex"),cge=oO({className:"LocalAudioTrack"}),uge=K0(),lge=MQ("LocalAudioTrack","_enabledMutex"),dge=oO({className:"LocalAudioTrack"}),hge=K0(),fge=K0(),pge=K0(),gge=K0(),Age=K0(),oge((Cl((Jy=class extends _le{get isPlaying(){return this._useAudioElement?eS.isPlaying(this.getTrackId()):this._source.isPlayed}constructor(e,n,i,c){super(e,i),Y(this,"trackMediaType","audio"),Y(this,"_encoderConfig",void 0),Y(this,"_source",void 0),Y(this,"_enabled",!0),Y(this,"_volume",100),Y(this,"_useAudioElement",!1),Y(this,"_bypassWebAudio",!1),Y(this,"processor",void 0),Y(this,"processorContext",void 0),Y(this,"processorDestination",void 0),Y(this,"_getOriginVolumeLevel",void 0),this._encoderConfig=n,this._getOriginVolumeLevel=!!c,ya("DISABLE_WEBAUDIO")?(this._source=new Bge,this._useAudioElement=!0,this._bypassWebAudio=!0):(this._source=new $pe(e,!1,this._getOriginVolumeLevel?e:void 0),ya("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")||(this._useAudioElement=!0)),this.processorContext=new Mge(this._source.context,this.getTrackId(),"local"),this.processorDestination=new xge(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(g_.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})}setVolume(e){yp(e,"volume",0,1e3);const n=qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.LOCAL_AUDIO_TRACK_SET_VOLUME,options:[this.getTrackId(),e]},300);this._volume=e,this._source.setVolume(e/100),this._useAudioElement&&eS.setVolume(this.getTrackId(),e);try{if(this._bypassWebAudio)return de.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio.")),void n.onSuccess();const i=this._source.createOutputTrack();this._mediaStreamTrack!==i&&(this._mediaStreamTrack=i,Q0(this,md.NEED_REPLACE_TRACK,this).then(()=>{de.debug("[".concat(this.getTrackId(),"] replace web audio track success")),pl("debug",this,"replace web audio track success")}).catch(c=>{de.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),c),pl("warning",this,"replace web audio track failed ".concat(c.toString()))}))}catch(i){}n.onSuccess()}getVolumeLevel(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()}setPlaybackDevice(e){var n=this;return l(function*(){const i=qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.REMOTE_AUDIO_SET_OUTPUT_DEVICE,options:[n.getTrackId(),e]});if(!n._useAudioElement)throw new ea(_t.NOT_SUPPORTED,"your browser does not support setting the audio output device");try{yield eS.setSinkID(n.getTrackId(),e)}catch(c){throw i.onError(c),c}i.onSuccess()})()}setEnabled(e,n,i){var c=this;return l(function*(){return c._setEnabled(e,n,i)})()}_setEnabled(e,n,i){var c=this;return l(function*(){if(!i){if(e===c._enabled)return;c.stateCheck("enabled",e)}if(de.info("[".concat(c.getTrackId(),"] start setEnabled"),e),Gc("info",c,"setEnabled",e),e){c._originMediaStreamTrack.enabled=!0;try{i||(c._enabled=!0),yield Q0(c,md.NEED_ENABLE_TRACK,c),de.info("[".concat(c.getTrackId(),"] setEnabled to ").concat(e," success")),Gc("info",c,"setEnabled",e,"success")}catch(h){throw i||(c._enabled=!1),de.error("[".concat(c.getTrackId(),"] setEnabled to true error"),h.toString()),Gc("error",c,"setEnabled",e,h.toString()),h}}else{c._originMediaStreamTrack.enabled=!1,i||(c._enabled=!1);try{yield Q0(c,md.NEED_DISABLE_TRACK,c)}catch(h){throw i||(c._enabled=!0),de.error("[".concat(c.getTrackId(),"] setEnabled to false error"),h.toString()),Gc("info",c,"setEnabled",e,h.toString()),h}}})()}setMuted(e){var n=this;return l(function*(){e!==n._muted&&(n.stateCheck("muted",e),n._muted=e,n._originMediaStreamTrack.enabled=!e,de.debug("[".concat(n.getTrackId(),"] start set muted: ").concat(e)),Gc("debug",n,"setMuted",e),e?yield Q0(n,md.NEED_MUTE_TRACK,n):yield Q0(n,md.NEED_UNMUTE_TRACK,n))})()}getStats(){return jY(()=>{de.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead"),pl("warning",this,"LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")},"localAudioTrackGetStatsWarning"),N2(this,md.GET_STATS)||Nle({},$M)}setAudioFrameCallback(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!e)return this._source.removeAllListeners(g_.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(n),this._source.removeAllListeners(g_.ON_AUDIO_BUFFER),this._source.on(g_.ON_AUDIO_BUFFER,i=>e(i))}play(){const e=qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.LOCAL_AUDIO_TRACK_PLAY,options:[this.getTrackId()]});de.debug("[".concat(this.getTrackId(),"] start audio playback")),Gc("debug",this,"play"),this._useAudioElement?(de.debug("[".concat(this.getTrackId(),"] start audio playback in element")),pl("debug",this,"start audio playback in element"),eS.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play(),e.onSuccess()}stop(){const e=qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.LOCAL_AUDIO_TRACK_STOP,options:[this.getTrackId()]});de.debug("[".concat(this.getTrackId(),"] stop audio playback")),Gc("debug",this,"stop"),this._useAudioElement?eS.stop(this.getTrackId()):this._source.stop(),e.onSuccess()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];de.debug("[".concat(this.getTrackId(),"] update player source track")),Gc("debug",this,"_updatePlayerSource"),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&eS.updateTrack(this.getTrackId(),this._mediaStreamTrack)}_updateOriginMediaStreamTrack(e,n){var i=this;return l(function*(){i._originMediaStreamTrack!==e&&(i._originMediaStreamTrack.removeEventListener("ended",i._handleTrackEnded),e.addEventListener("ended",i._handleTrackEnded),n&&i._originMediaStreamTrack.stop(),i._originMediaStreamTrack=e,i._muted&&(i._originMediaStreamTrack.enabled=!1),i.processor&&i.processor.updateInput({track:e,context:i.processorContext}),i._mediaStreamTrack!==i._source.outputTrack?(i._mediaStreamTrack=i._originMediaStreamTrack,i._updatePlayerSource(),yield Q0(i,md.NEED_REPLACE_TRACK,i)):i._source.updateTrack(i._originMediaStreamTrack),i._getOriginVolumeLevel&&i._source.updateOriginTrack(e))})()}renewMediaStreamTrack(e){return _l.resolve(void 0)}pipe(e){if(this._bypassWebAudio)throw new ea(_t.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===e)return e;if(e._source)throw new ea(_t.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(!this.processor)return;const n=this.processor;null===(e=this._source.processSourceNode)||void 0===e||e.disconnect(),this.processor._source=!1,this.processor=void 0,n.reset()}bindProcessorDestinationEvents(){var e=this;this.processorDestination.on(Yy.ON_TRACK,function(){var n=l(function*(i){i?i!==e._mediaStreamTrack&&(e._mediaStreamTrack=i,e._updatePlayerSource(!1),e._source.processedNode=e._source.createMediaStreamSourceNode(i),yield Q0(e,md.NEED_REPLACE_TRACK,e)):e._mediaStreamTrack!==e._originMediaStreamTrack&&(e._mediaStreamTrack=e._originMediaStreamTrack,e._updatePlayerSource(),yield Q0(e,md.NEED_REPLACE_TRACK,e))});return function(i){return n.apply(this,arguments)}}()),this.processorDestination.on(Yy.ON_NODE,n=>{this._source.processedNode=n})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Yy.ON_TRACK),this.processorDestination.removeAllListeners(Yy.ON_NODE)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(X_.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(X_.REQUEST_CONSTRAINTS)}}).prototype,"setPlaybackDevice",[sge],Object.getOwnPropertyDescriptor(Jy.prototype,"setPlaybackDevice"),Jy.prototype),Cl(Jy.prototype,"setEnabled",[age,cge,uge],Object.getOwnPropertyDescriptor(Jy.prototype,"setEnabled"),Jy.prototype),Cl(Jy.prototype,"setMuted",[lge,dge,hge],Object.getOwnPropertyDescriptor(Jy.prototype,"setMuted"),Jy.prototype),Cl(Jy.prototype,"getStats",[fge],Object.getOwnPropertyDescriptor(Jy.prototype,"getStats"),Jy.prototype),Cl(Jy.prototype,"setAudioFrameCallback",[pge],Object.getOwnPropertyDescriptor(Jy.prototype,"setAudioFrameCallback"),Jy.prototype),Cl(Jy.prototype,"play",[gge],Object.getOwnPropertyDescriptor(Jy.prototype,"play"),Jy.prototype),Cl(Jy.prototype,"stop",[Age],Object.getOwnPropertyDescriptor(Jy.prototype,"stop"),Jy.prototype),mge=Jy))||mge),Are=(Ege=uy("MicrophoneAudioTrack","getTrackId"),vge=K0(),yge=MQ("MicrophoneAudioTrack","_enabledMutex"),_ge=oO({className:"MicrophoneAudioTrack"}),Ige=K0(),Ege((Cl(($4=class extends m_{constructor(e,n,i,c){super(e,n.encoderConfig?zT(n.encoderConfig):{},c,ya("GET_VOLUME_OF_MUTED_AUDIO_TRACK")),Y(this,"_config",void 0),Y(this,"_deviceName","default"),Y(this,"_constraints",void 0),Y(this,"_originalConstraints",void 0),Y(this,"_enabled",!0),Jl("info",this,"constructor",{trackId:c,deviceId:e.label,constraints:i}),this._config=n,this._constraints=i,this._originalConstraints=i,this._deviceName=e.label,"boolean"==typeof n.bypassWebAudio&&(this._bypassWebAudio=n.bypassWebAudio),FM()&&Mf.bindInterruptDetectorTrack(this),this.bindProcessorContextEvents()}setDevice(e){var n=this;return l(function*(){const i=qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.MIC_AUDIO_TRACK_SET_DEVICE,options:[n.getTrackId(),e]});if(de.info("[".concat(n.getTrackId(),"] start set device to ").concat(e)),Gc("info",n,"setDevice",e),n._enabled)try{const c=yield _C.getDeviceById(e),h={};h.audio=Nle({},n._constraints),h.audio.deviceId={exact:e},n._originMediaStreamTrack.stop();let g=null;try{g=yield nR(h,n.getTrackId())}catch(v){throw de.error("[".concat(n.getTrackId(),"] setDevice failed"),v.toString()),Gc("error",n,"setDevice",e,v.toString()),g=yield nR({video:n._constraints},n.getTrackId()),yield n._updateOriginMediaStreamTrack(g.getAudioTracks()[0],!1),v}yield n._updateOriginMediaStreamTrack(g.getAudioTracks()[0],!1),n._deviceName=c.label,n._config.microphoneId=e,n._constraints.deviceId={exact:e}}catch(c){throw i.onError(c),de.error("[".concat(n.getTrackId(),"] setDevice error"),c.toString()),Gc("error",n,"setDevice",e,c.toString()),c}else try{const c=yield _C.getDeviceById(e);n._deviceName=c.label,n._config.microphoneId=e,n._constraints.deviceId={exact:e}}catch(c){throw i.onError(c),de.error("[".concat(n.getTrackId(),"] setDevice error"),c.toString()),Gc("error",n,"setDevice",e,c.toString()),c}i.onSuccess(),de.info("[".concat(n.getTrackId(),"] set device to ").concat(e," success")),Gc("info",n,"setDevice",e,"success")})()}setEnabled(e,n,i){var c=()=>super._setEnabled,h=this;return l(function*(){if(n)return de.debug("[".concat(h.getTrackId(),"] setEnabled false (do not close microphone)")),pl("debug",h,"setEnabled false (do not close microphone)"),yield c().call(h,e);if(!i){if(e===h._enabled)return;h.stateCheck("enabled",e)}if(de.info("[".concat(h.getTrackId(),"] start setEnabled"),e),Gc("info",h,"setEnabled",e),!e){var g;h._originMediaStreamTrack.onended=null,h._originMediaStreamTrack.stop(),null===(g=h._source.clonedTrack)||void 0===g||g.stop(),i||(h._enabled=!1);try{yield Q0(h,md.NEED_DISABLE_TRACK,h)}catch(C){throw de.error("[".concat(h.getTrackId(),"] setEnabled false failed"),C.toString()),Gc("error",h,"setEnabled",e,C.toString()),C}return}const v=Nle({},h._constraints),m=_C.searchDeviceIdByName(h._deviceName);m&&!v.deviceId&&(v.deviceId=m);try{i||(h._enabled=!0);const C=yield nR({audio:h._constraints},h.getTrackId());yield h._updateOriginMediaStreamTrack(C.getAudioTracks()[0],!1),yield Q0(h,md.NEED_ENABLE_TRACK,h)}catch(C){throw i||(h._enabled=!1),de.error("[".concat(h.getTrackId(),"] setEnabled true failed"),C.toString()),Gc("error",h,"setEnabled",e,C.toString()),C}de.info("[".concat(h.getTrackId(),"] setEnabled success")),Gc("info",h,"setEnabled",e,"success")})()}close(){super.close(),FM()&&Mf.unbindInterruptDetectorTrack(this)}onTrackEnded(){var e=this;if((P_()||YR())&&this._enabled&&!this._isClosed&&Mf.duringInterruption){const n=function(){var i=l(function*(){Mf.off(Iy.IOS_INTERRUPTION_END,n),e._enabled&&!e._isClosed&&(de.debug("[".concat(e.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),pl("debug",e,"try capture microphone media device for interrupted iOS device"),yield e.setEnabled(!1),yield e.setEnabled(!0))});return function(){return i.apply(this,arguments)}}();Mf.on(Iy.IOS_INTERRUPTION_END,n)}else de.debug("[".concat(this.getTrackId(),"] track ended")),i1("debug",["MediaStreamTrack",this.getTrackId()],"ended"),this.emit(IS.TRACK_ENDED)}renewMediaStreamTrack(e){var n=this;return l(function*(){const i=e||n._constraints,c=_C.searchDeviceIdByName(n._deviceName);if(c&&!i.deviceId&&(i.deviceId=c),n._constraints=i,n._enabled){n._originMediaStreamTrack.stop();const h=yield nR({audio:n._constraints},n.getTrackId());yield n._updateOriginMediaStreamTrack(h.getAudioTracks()[0],!0)}})()}bindProcessorContextEvents(){var e=this;this.processorContext.on(X_.REQUEST_UPDATE_CONSTRAINTS,function(){var n=l(function*(i,c,h){try{const g=Object.assign({},e._originalConstraints,...i);yield e.renewMediaStreamTrack(g),c()}catch(g){h(g)}});return function(i,c,h){return n.apply(this,arguments)}}()),this.processorContext.on(X_.REQUEST_CONSTRAINTS,function(){var n=l(function*(i){i(e._originMediaStreamTrack.getSettings())});return function(i){return n.apply(this,arguments)}}())}}).prototype,"setDevice",[vge],Object.getOwnPropertyDescriptor($4.prototype,"setDevice"),$4.prototype),Cl($4.prototype,"setEnabled",[yge,_ge,Ige],Object.getOwnPropertyDescriptor($4.prototype,"setEnabled"),$4.prototype),bge=$4))||bge),q_e=(Cge=uy("BufferSourceAudioTrack","getTrackId"),Sge=K0(),Tge=K0(),wge=K0(),Rge=K0(),Oge=K0(),Cge((Cl((D1=class extends m_{constructor(e,n,i,c){super(n.createOutputTrack(),i,c),Y(this,"source",void 0),Y(this,"_bufferSource",void 0),Jl("info",this,"constructor",{trackId:c}),this.source=e,this._bufferSource=n,this._bufferSource.on(g_.AUDIO_SOURCE_STATE_CHANGE,h=>{this.emit(IS.SOURCE_STATE_CHANGE,h)});try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(h){}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(e){const n=qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.BUFFER_AUDIO_TRACK_START,options:[this.getTrackId(),e,this.duration]});e&&this._bufferSource.updateOptions(e),this._bufferSource.startProcessAudioBuffer(),n.onSuccess()}pauseProcessAudioBuffer(){const e=qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.BUFFER_AUDIO_TRACK_PAUSE,options:[this.getTrackId()]});this._bufferSource.pauseProcessAudioBuffer(),e.onSuccess()}seekAudioBuffer(e){const n=qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.BUFFER_AUDIO_TRACK_SEEK,options:[this.getTrackId()]});this._bufferSource.seekAudioBuffer(e),n.onSuccess()}resumeProcessAudioBuffer(){const e=qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.BUFFER_AUDIO_TRACK_RESUME,options:[this.getTrackId()]});this._bufferSource.resumeProcessAudioBuffer(),e.onSuccess()}stopProcessAudioBuffer(){const e=qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.BUFFER_AUDIO_TRACK_STOP,options:[this.getTrackId()]});this._bufferSource.stopProcessAudioBuffer(),e.onSuccess()}}).prototype,"startProcessAudioBuffer",[Sge],Object.getOwnPropertyDescriptor(D1.prototype,"startProcessAudioBuffer"),D1.prototype),Cl(D1.prototype,"pauseProcessAudioBuffer",[Tge],Object.getOwnPropertyDescriptor(D1.prototype,"pauseProcessAudioBuffer"),D1.prototype),Cl(D1.prototype,"seekAudioBuffer",[wge],Object.getOwnPropertyDescriptor(D1.prototype,"seekAudioBuffer"),D1.prototype),Cl(D1.prototype,"resumeProcessAudioBuffer",[Rge],Object.getOwnPropertyDescriptor(D1.prototype,"resumeProcessAudioBuffer"),D1.prototype),Cl(D1.prototype,"stopProcessAudioBuffer",[Oge],Object.getOwnPropertyDescriptor(D1.prototype,"stopProcessAudioBuffer"),D1.prototype),Dge=D1))||Dge),aT=uy("MixingAudioTrack","getTrackId")(Nge=class extends m_{get isActive(){for(const e of this.trackList)if(e._enabled&&!e._isClosed&&!e.muted)return!0;return!1}constructor(){const e=BQ().createMediaStreamDestination();super(e.stream.getAudioTracks()[0],void 0,x0(8,"track-mix-")),Y(this,"trackList",void 0),Y(this,"destNode",void 0);try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(n){}this.destNode=e,this.trackList=[]}hasAudioTrack(e){return-1!==this.trackList.indexOf(e)}addAudioTrack(e){if(-1!==this.trackList.indexOf(e))return de.debug("track ".concat(e.getTrackId()," is already added")),void pl("debug",this,"track already added");de.debug("add ".concat(e.getTrackId()," to mixing track")),Gc("debug",this,"addAudioTrack",e.getTrackId()),e._source.outputNode.connect(this.destNode),this.trackList.push(e),this.updateEncoderConfig()}removeAudioTrack(e){if(-1!==this.trackList.indexOf(e)){de.debug("remove ".concat(e.getTrackId()," from mixing track")),Gc("debug",this,"removeAudioTrack",e.getTrackId());try{e._source.outputNode.disconnect(this.destNode)}catch(n){}xle(this.trackList,e),this.updateEncoderConfig()}}updateEncoderConfig(){const e={};this.trackList.forEach(n=>{n._encoderConfig&&((n._encoderConfig.bitrate||0)>(e.bitrate||0)&&(e.bitrate=n._encoderConfig.bitrate),(n._encoderConfig.sampleRate||0)>(e.sampleRate||0)&&(e.sampleRate=n._encoderConfig.sampleRate),(n._encoderConfig.sampleSize||0)>(e.sampleSize||0)&&(e.sampleSize=n._encoderConfig.sampleSize),n._encoderConfig.stereo&&(e.stereo=!0))}),this._encoderConfig=e}})||Nge;class W_e extends f0{constructor(){super(...arguments),Y(this,"resultStorage",new Map)}setLocalAudioStats(n,i,c){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",n,this.checkAudioInputLevel(c,i)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",n,this.checkSendAudioBitrate(c,i))}setLocalVideoStats(n,i,c){this.record("SEND_VIDEO_BITRATE_TOO_LOW",n,this.checkSendVideoBitrate(c,i)),this.record("FRAMERATE_INPUT_TOO_LOW",n,this.checkFramerateInput(c,i)),this.record("FRAMERATE_SENT_TOO_LOW",n,this.checkFramerateSent(c))}setRemoteAudioStats(n,i){const c=n.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",c,this.checkAudioOutputLevel(i))}setRemoteVideoStats(n,i){const c=n.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",c,this.checkVideoDecode(i))}record(n,i,c){this.resultStorage.has(n)||this.resultStorage.set(n,{result:[],isPrevNormal:!0});const h=this.resultStorage.get(n);if(h&&(h.result.push(c),h.result.length>=5)){const g=h.result.includes(!0);h.isPrevNormal&&!g&&this.emit("exception",Fge[n],n,i),!h.isPrevNormal&&g&&this.emit("exception",Fge[n]+2e3,n+"_RECOVER",i),h.isPrevNormal=g,h.result=[]}}checkAudioOutputLevel(n){return!(n.receiveBitrate>0&&0===n.receiveLevel)}checkAudioInputLevel(n,i){return i instanceof aT&&!i.isActive||!!i.muted||0!==n.sendVolumeLevel}checkFramerateInput(n,i){let c=null;i._encoderConfig&&i._encoderConfig.frameRate&&(c=_k(i._encoderConfig.frameRate));const h=n.captureFrameRate;return!c||!h||!(c>10&&h<5||c<10&&c>=5&&h<=1)}checkFramerateSent(n){return!(n.captureFrameRate&&n.sendFrameRate&&n.captureFrameRate>5&&n.sendFrameRate<=1)}checkSendVideoBitrate(n,i){return!!i.muted||0!==n.sendBitrate}checkSendAudioBitrate(n,i){return i instanceof aT&&!i.isActive||!!i.muted||0!==n.sendBitrate}checkVideoDecode(n){return 0===n.receiveBitrate||0!==n.decodeFrameRate}}const Fge={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},cT=new class{markSubscribeStart(e,n){performance.mark("agora-web-sdk/".concat(e,"/subscribe-").concat(n))}markPublishStart(e,n){performance.mark("agora-web-sdk/".concat(e,"/publish-").concat(n))}measureFromSubscribeStart(e,n){const i=performance.getEntriesByName("agora-web-sdk/".concat(e,"/subscribe-").concat(n));if(i.length>0){const c=i[i.length-1];return Math.round(performance.now()-c.startTime)}return 0}measureFromPublishStart(e,n){const i=performance.getEntriesByName("agora-web-sdk/".concat(e,"/publish-").concat(n));if(i.length>0){const c=i[i.length-1];return Math.round(performance.now()-c.startTime)}return 0}};function jge(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);n&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),i.push.apply(i,c)}return i}function Z4(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?jge(Object(i),!0).forEach(function(c){Y(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):jge(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}class FQ{constructor(n){Y(this,"store",void 0),Y(this,"onStatsException",void 0),Y(this,"onUploadPublishDuration",void 0),Y(this,"localStats",new Map),Y(this,"remoteStats",new Map),Y(this,"updateStatsInterval",void 0),Y(this,"trafficStats",void 0),Y(this,"trafficStatsPeerList",[]),Y(this,"uplinkStats",void 0),Y(this,"exceptionMonitor",void 0),Y(this,"p2pChannel",void 0),Y(this,"updateStats",()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))}),this.store=n,this.updateStatsInterval=window.setInterval(this.updateStats,1e3),this.exceptionMonitor=new W_e,this.exceptionMonitor.on("exception",(i,c,h)=>{this.onStatsException&&this.onStatsException(i,c,h)})}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(yl.LocalAudioTrack)||Z4({},$M)}getLocalVideoTrackStats(){return this.localStats.get(yl.LocalVideoTrack)||Z4({},YN)}getRemoteAudioTrackStats(n){const i=(g,v)=>{if(!this.trafficStats)return v;const m=this.trafficStats.peer_delay.find(C=>C.peer_uid===g);return m&&(v.publishDuration=m.B_ppad+(Date.now()-this.trafficStats.timestamp)),v},c={};if(n){var h;const g=null===(h=this.remoteStats.get(n))||void 0===h?void 0:h.audioStats;g&&(c[n]=i(n,g))}else Array.from(this.remoteStats.entries()).forEach(g=>{let[v,{audioStats:m}]=g;m&&(c[v]=i(v,m))});return c}getRemoteNetworkQualityStats(n){const i={};if(n){var c;const h=null===(c=this.remoteStats.get(n))||void 0===c?void 0:c.networkStats;h&&(i[n]=h)}else Array.from(this.remoteStats.entries()).forEach(h=>{let[g,{networkStats:v}]=h;v&&(i[g]=v)});return i}getRemoteVideoTrackStats(n){const i=(g,v)=>{if(!this.trafficStats)return v;const m=this.trafficStats.peer_delay.find(C=>C.peer_uid===g);return m&&(v.publishDuration=m.B_ppvd+(Date.now()-this.trafficStats.timestamp)),v},c={};if(n){var h;const g=null===(h=this.remoteStats.get(n))||void 0===h?void 0:h.videoStats;g&&(c[n]=i(n,g))}else Array.from(this.remoteStats.entries()).forEach(g=>{let[v,{videoStats:m}]=g;m&&(c[v]=i(v,m))});return c}getRTCStats(){let n=0,i=0,c=0,h=0;const g=this.localStats.get(yl.LocalAudioTrack);g&&(n+=g.sendBytes,i+=g.sendBitrate);const v=this.localStats.get(yl.LocalVideoTrack);v&&(n+=v.sendBytes,i+=v.sendBitrate);const m=this.localStats.get(yl.LocalVideoLowTrack);m&&(n+=m.sendBytes,i+=m.sendBitrate),this.remoteStats.forEach(y=>{let{audioStats:N,videoStats:k}=y;N&&(c+=N.receiveBytes,h+=N.receiveBitrate),k&&(c+=k.receiveBytes,h+=k.receiveBitrate)});let C=1;return this.trafficStats&&(C+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:C,SendBitrate:i,SendBytes:n,RecvBytes:c,RecvBitrate:h,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(n){this.localStats.set(n,void 0)}removeLocalStats(n){n?this.localStats.delete(n):this.localStats.clear()}addRemoteStats(n){this.remoteStats.set(n,{})}removeRemoteStats(n){n?this.remoteStats.delete(n):this.remoteStats.clear()}addP2PChannel(n){this.p2pChannel=n}updateTrafficStats(n){n.peer_delay=n.peer_delay.filter(i=>void 0!==i.B_ppad||void 0!==i.B_ppvd),n.peer_delay.filter(i=>-1===this.trafficStatsPeerList.indexOf(i.peer_uid)).forEach(i=>{var c;const h=null===(c=this.p2pChannel)||void 0===c?void 0:c.getRemoteMedia(i.peer_uid),g=null!=h&&h.videoSSRC?cT.measureFromSubscribeStart(this.store.clientId,h.videoSSRC):0,v=null!=h&&h.audioSSRC?cT.measureFromSubscribeStart(this.store.clientId,h.audioSSRC):0;void 0!==i.B_ppad&&void 0!==i.B_ppvd&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(i.peer_uid,i.B_ppad,i.B_ppvd,g>v?g:v),this.trafficStatsPeerList.push(i.peer_uid))}),this.trafficStats=n}updateUplinkStats(n){this.uplinkStats&&this.uplinkStats.B_fir!==n.B_fir&&de.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(n.B_fir)),this.uplinkStats=n}static isRemoteVideoFreeze(n,i,c){return!!n&&(!!c&&i.framesDecodeFreezeTime>c.framesDecodeFreezeTime||!(!c||i.framesDecodeCount>c.framesDecodeCount))}static isRemoteAudioFreeze(n){return!!n&&n._isFreeze()}isLocalVideoFreeze(n){return!(!n.inputFrame||!n.sentFrame)&&n.inputFrame.frameRate>5&&n.sentFrame.frameRate<3}updateLocalStats(n){Array.from(this.localStats.entries()).forEach(i=>{let[c,h]=i;switch(c){case yl.LocalVideoTrack:case yl.LocalVideoLowTrack:{const g=h,v=Z4({},YN),m=n.getStats(),C=n.getLocalMedia(c);if(m){const y=m.videoSend.find(N=>N.ssrc===(null==C?void 0:C.ssrcs[0].ssrcId));if(y){const N=n.getLocalVideoSize(),k=n.getEncoderConfig(yl.LocalVideoTrack);"H264"!==y.codec&&"VP8"!==y.codec&&"VP9"!==y.codec&&"AV1X"!==y.codec&&"AV1"!==y.codec||(v.codecType=y.codec),v.sendBytes=y.bytes,v.sendBitrate=g?8*Math.max(0,v.sendBytes-g.sendBytes):0,y.inputFrame?(v.captureFrameRate=y.inputFrame.frameRate,v.captureResolutionHeight=y.inputFrame.height,v.captureResolutionWidth=y.inputFrame.width):N&&(v.captureResolutionWidth=N.width,v.captureResolutionHeight=N.height),y.sentFrame?(v.sendFrameRate=y.sentFrame.frameRate,v.sendResolutionHeight=y.sentFrame.height,v.sendResolutionWidth=y.sentFrame.width):N&&(v.sendResolutionWidth=N.width,v.sendResolutionHeight=N.height),y.avgEncodeMs&&(v.encodeDelay=y.avgEncodeMs),k&&k.bitrateMax&&(v.targetSendBitrate=1e3*k.bitrateMax),v.sendPackets=y.packets,v.sendPacketsLost=y.packetsLost,v.totalDuration=g?g.totalDuration+1:1,v.totalFreezeTime=g?g.totalFreezeTime:0,this.isLocalVideoFreeze(y)&&(v.totalFreezeTime+=1)}this.trafficStats&&(v.sendPacketsLost=this.trafficStats.B_pvlr4/100)}this.localStats.set(c,v),v&&C&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,C.track,v);break}case yl.LocalAudioTrack:{const g=h,v=Z4({},$M),m=n.getStats(),C=n.getLocalMedia(c);if(m){const y=m.audioSend.find(N=>N.ssrc===(null==C?void 0:C.ssrcs[0].ssrcId));if(y){if("opus"!==y.codec&&"aac"!==y.codec&&"PCMU"!==y.codec&&"PCMA"!==y.codec&&"G722"!==y.codec||(v.codecType=y.codec),y.inputLevel)v.sendVolumeLevel=Math.round(32767*y.inputLevel);else{const N=n.getLocalAudioVolume();N&&(v.sendVolumeLevel=Math.round(32767*N))}v.sendBytes=y.bytes,v.sendPackets=y.packets,v.sendPacketsLost=y.packetsLost,v.sendBitrate=g?8*Math.max(0,v.sendBytes-g.sendBytes):0}}this.trafficStats&&(v.sendPacketsLost=this.trafficStats.B_pvlr4/100),this.localStats.set(yl.LocalAudioTrack,v),v&&C&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,C.track,v);break}}})}updateRemoteStats(n){Array.from(this.remoteStats.entries()).forEach(i=>{let[c,{videoStats:h,audioStats:g,videoPcStats:v}]=i;const m=g,C=h,y=v,N=Z4({},mQ),k=Z4({},cY),U=Z4({},Mne),{audioTrack:V,videoTrack:K,audioSSRC:$,videoSSRC:Z}=n.getRemoteMedia(c),ye=n.getStats(),be=null==ye?void 0:ye.audioRecv.find(ma=>ma.ssrc===$),_s=null==ye?void 0:ye.videoRecv.find(ma=>ma.ssrc===Z),ua=this.trafficStats&&this.trafficStats.peer_delay.find(ma=>ma.peer_uid===c);if(be&&("opus"!==be.codec&&"aac"!==be.codec&&"PCMU"!==be.codec&&"PCMA"!==be.codec&&"G722"!==be.codec||(N.codecType=be.codec),be.outputLevel?N.receiveLevel=Math.round(32767*be.outputLevel):V&&(N.receiveLevel=Math.round(32767*V.getVolumeLevel())),N.receiveBytes=be.bytes,N.receivePackets=be.packets,N.receivePacketsLost=be.packetsLost,N.packetLossRate=N.receivePacketsLost/(N.receivePackets+N.receivePacketsLost),N.receiveBitrate=m?8*Math.max(0,N.receiveBytes-m.receiveBytes):0,N.totalDuration=m?m.totalDuration+1:1,N.totalFreezeTime=m?m.totalFreezeTime:0,N.freezeRate=N.totalFreezeTime/N.totalDuration,N.receiveDelay=be.jitterBufferMs,N.totalDuration>10&&FQ.isRemoteAudioFreeze(V)&&(N.totalFreezeTime+=1)),_s){"H264"!==_s.codec&&"VP8"!==_s.codec&&"VP9"!==_s.codec&&"AV1X"!==_s.codec&&"AV1"!==_s.codec||(k.codecType=_s.codec),k.receiveBytes=_s.bytes,k.receiveBitrate=C?8*Math.max(0,k.receiveBytes-C.receiveBytes):0,k.decodeFrameRate=_s.decodeFrameRate<0?0:_s.decodeFrameRate,k.renderFrameRate=_s.decodeFrameRate<0?0:_s.decodeFrameRate,_s.outputFrame&&(k.renderFrameRate=_s.outputFrame.frameRate),_s.receivedFrame?(k.receiveFrameRate=_s.receivedFrame.frameRate,k.receiveResolutionHeight=_s.receivedFrame.height,k.receiveResolutionWidth=_s.receivedFrame.width):K&&(k.receiveResolutionHeight=K._videoHeight||0,k.receiveResolutionWidth=K._videoWidth||0),void 0!==_s.framesRateFirefox&&(k.receiveFrameRate=Math.round(_s.framesRateFirefox)),k.receivePackets=_s.packets,k.receivePacketsLost=_s.packetsLost,k.packetLossRate=k.receivePacketsLost/(k.receivePackets+k.receivePacketsLost),k.totalDuration=C?C.totalDuration+1:1,k.totalFreezeTime=C?C.totalFreezeTime:0,k.receiveDelay=_s.jitterBufferMs||0;const ma=!!Z&&n.getRemoteVideoIsReady(Z);K&&ma&&FQ.isRemoteVideoFreeze(K,_s,y)&&(k.totalFreezeTime+=1),k.freezeRate=k.totalFreezeTime/k.totalDuration}ua&&(N.end2EndDelay=ua.B_ad,k.end2EndDelay=ua.B_vd,N.transportDelay=ua.B_ed,k.transportDelay=ua.B_ed,N.currentPacketLossRate=ua.B_ealr4/100,k.currentPacketLossRate=ua.B_evlr4/100,U.uplinkNetworkQuality=ua.B_punq?ua.B_punq:0,U.downlinkNetworkQuality=ua.B_pdnq?ua.B_pdnq:0),this.remoteStats.set(c,{audioStats:N,videoStats:k,videoPcStats:_s,networkStats:U}),V&&this.exceptionMonitor.setRemoteAudioStats(V,N),K&&this.exceptionMonitor.setRemoteVideoStats(K,k)})}}function Qge(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);n&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),i.push.apply(i,c)}return i}function mre(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Qge(Object(i),!0).forEach(function(c){Y(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Qge(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}function Ere(e){return e.match(/^[\.\:\d]+$/)?"".concat(e.replace(/[^\d]/g,"-"),".").concat(ya("TURN_DOMAIN")):(de.info("Cannot recognized as IP address ".concat(e,". Used As Host instead")),e)}function Vge(e,n){var i,c;const h=ya("GATEWAY_DOMAINS");let g=h[1]&&-1!==n.indexOf(h[1])?1:0;e.addresses=e.addresses||[];const v=e.addresses.map(C=>C.domain_prefix?{address:"".concat(C.domain_prefix,".").concat(h[g++%h.length],":").concat(C.port)}:C.ip.match(/^[\.\:\d]+$/)?{ip:C.ip,port:C.port,address:"".concat(C.ip.replace(/[^\d]/g,"-"),".").concat(h[g++%h.length],":").concat(C.port)}:(de.info("Cannot recognized as IP address ".concat(C.ip,". Used As Host instead")),{ip:C.ip,port:C.port,address:"".concat(C.ip,":").concat(C.port)}));if(null!==(i=e.detail)&&void 0!==i&&i[18]&&"string"==typeof(null===(c=e.detail)||void 0===c?void 0:c[18])){const C=e.detail[18],y=null==C?void 0:C.split(";");for(let N=0;N<y.length;N++){var m;const k=WR(m=y[N]).call(m);v[N]&&k&&(v[N].ip6=k)}}return{gatewayAddrs:v,uid:e.uid,cid:e.cid,cert:e.cert,vid:e.detail&&e.detail[8],uni_lbs_ip:e.detail&&e.detail[1],res:e,csIp:e.detail&&e.detail[502]}}function _k(e){return"number"==typeof e?e:e.exact||e.ideal||e.max||e.min||0}function Gge(e){const n=e._encoderConfig;if(!n)return{};const i={resolution:n.width&&n.height?"".concat(_k(n.width),"x").concat(_k(n.height)):void 0,maxVideoBW:n.bitrateMax,minVideoBW:n.bitrateMin};return"number"==typeof n.frameRate?(i.maxFrameRate=n.frameRate,i.minFrameRate=n.frameRate):n.frameRate&&(i.maxFrameRate=n.frameRate.max||n.frameRate.ideal||n.frameRate.exact||n.frameRate.min,i.minFrameRate=n.frameRate.min||n.frameRate.ideal||n.frameRate.exact||n.frameRate.max),i}function Hge(e,n,i){var c;const h=n.videoSend.find(m=>m.ssrc===e);if(!h)return null;const g=null==i||null===(c=i.videoSend.find(m=>m.ssrc===e))||void 0===c?void 0:c.inputFrame,v={id:x0(10,""),timestamp:new Date(n.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:h.ssrc.toString()};return h.inputFrame&&(g&&h.inputFrame.height===g.height||(v.A_fhi=h.inputFrame.height?h.inputFrame.height.toString():"0"),g&&h.inputFrame.width===g.width||(v.A_fwi=h.inputFrame.width?h.inputFrame.width.toString():"0"),g&&h.inputFrame.frameRate===g.frameRate||(v.A_fri=h.inputFrame.frameRate?h.inputFrame.frameRate.toString():"0")),v}function qge(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0}function kle(e,n){let i,c,h;switch(n){case _y.CHOOSE_SERVER:i=4096,c="choose server";break;case _y.CLOUD_PROXY:i=1048576,c="proxy";break;case _y.CLOUD_PROXY_5:i=4194304,c="proxy5";break;case _y.CLOUD_PROXY_FALLBACK:i=4194310,c="proxy fallback";break;default:throw new ea(_t.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:e.detail&&e.detail[502],retry:!1})}if(e.response_body.forEach(g=>{g.buffer&&g.buffer.flag===i&&(h={code:g.buffer.code,addresses:(g.buffer.edges_services||[]).map(v=>mre(mre({},v),{},{ticket:g.buffer.cert})),server_ts:e.enter_ts,uid:g.buffer.uid,cid:g.buffer.cid,cname:g.buffer.cname,detail:mre(mre({},g.buffer.detail),e.detail),flag:g.buffer.flag,opid:e.opid,cert:g.buffer.cert})}),!h)throw new ea(_t.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(c," from multi unilbs response"),{csIp:e.detail&&e.detail[502]});return h}function K_e(e,n){return Lle.apply(this,arguments)}function Lle(){return Lle=l(function*(e,n){return yield _l.all(e.addresses.map(function(){var i=l(function*(c){return{address:Ere(c.ip),tcpport:c.port,udpport:c.port,username:n&&ya("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?n.toString():s1.username,password:n&&ya("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?yield D_e(n.toString()):s1.password}});return function(c){return i.apply(this,arguments)}}()))}),Lle.apply(this,arguments)}function Y_e(e,n){const i=n._videoWidth||n.getMediaStreamTrack(!0).getSettings().width;return i||de.warning("cannot get original video track's width, default scale down 4 times for low stream"),i?i/_k(e.width):4}function s3(e){let{candidateType:n,relayProtocol:i,type:c,address:h,port:g,protocol:v}=e;return"local-candidate"===c?{candidateType:n,relayProtocol:i,protocol:v}:{candidateType:n,relayProtocol:i,address:h,port:g,protocol:v}}function Wge(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);n&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),i.push.apply(i,c)}return i}function _F(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Wge(Object(i),!0).forEach(function(c){Y(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Wge(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}function jQ(e){return window.TextEncoder?(new TextEncoder).encode(e).length:e.length}function s_(e){return new _l(n=>{window.setTimeout(n,e)})}function J_e(e){const n=new ea(_t.TIMEOUT,"timeout");return new _l((i,c)=>{window.setTimeout(()=>c(n),e)})}function x0(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,n=arguments.length>1?arguments[1]:void 0;const i=Math.random().toString(16).substr(2,e).toLowerCase();return i.length===e?"".concat(n).concat(i):"".concat(n).concat(i)+x0(e-i.length,"")}function Ple(){return x0(32,"").toUpperCase()}const vre=()=>{};function Kge(e){return new _l((n,i)=>{let c=!1;const h=document.createElement("video");h.setAttribute("autoplay",""),h.setAttribute("muted",""),h.muted=!0,h.autoplay=!0,h.setAttribute("playsinline",""),h.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(h);const g=P_()?"canplay":"playing";h.addEventListener(g,()=>{const v=h.videoWidth,m=h.videoHeight;!v&&h0()||(c=!0,h.srcObject=null,h.remove(),n([v,m]))}),h.srcObject=new MediaStream([e]),h.play().catch(vre),setTimeout(()=>{c||(h.srcObject=null,h.remove(),n([h.videoWidth,h.videoHeight]))},4e3)})}function QQ(e){return _l.all(e.map(n=>n.then(i=>{throw i},i=>i))).then(n=>{throw n},n=>n)}function E_(e,n){for(var i=arguments.length,c=new Array(i>2?i-2:0),h=2;h<i;h++)c[h-2]=arguments[h];return 0===e.getListeners(n).length?_l.reject(new ea(_t.UNEXPECTED_ERROR,"can not emit promise")):new _l((g,v)=>{e.emit(n,...c,g,v)})}function Q0(e,n){if(0===e.getListeners(n).length)return _l.resolve();for(var i=arguments.length,c=new Array(i>2?i-2:0),h=2;h<i;h++)c[h-2]=arguments[h];return E_(e,n,...c)}function N2(e,n){if(0===e.getListeners(n).length)return null;for(var i=arguments.length,c=new Array(i>2?i-2:0),h=2;h<i;h++)c[h-2]=arguments[h];return tj(e,n,...c)}function tj(e,n){let i=null,c=null;for(var h=arguments.length,g=new Array(h>2?h-2:0),v=2;v<h;v++)g[v-2]=arguments[v];if(e.emit(n,...g,m=>{i=m},m=>{c=m}),null!==c)throw c;if(null===i)throw new ea(_t.UNEXPECTED_ERROR,"handler is not sync");return i}function xle(e,n){const i=e.indexOf(n);-1!==i&&e.splice(i,1)}function Yge(e){const n=[];return e.forEach(i=>{-1===n.indexOf(i)&&n.push(i)}),n}function uT(e){_l.resolve().then(e)}function V0(e){return JSON.parse(JSON.stringify(e))}const Jge={};function jY(e,n){Jge[n]||(Jge[n]=!0,e())}function Mle(e){const n=window.atob(e),i=new Uint8Array(new ArrayBuffer(n.length));for(let c=0;c<n.length;c+=1)i[c]=n.charCodeAt(c);return i}function yre(e){let n="";for(let i=0;i<e.length;i+=1)n+=String.fromCharCode(e[i]);return window.btoa(n)}const zge=new class{constructor(){Y(this,"fnMap",new Map)}throttleByKey(e,n,i,c){for(var h=arguments.length,g=new Array(h>4?h-4:0),v=4;v<h;v++)g[v-4]=arguments[v];if(this.fnMap.has(n)){const m=this.fnMap.get(n);if(m.threshold!==i){m.fn(...m.args),clearTimeout(m.timer);const C=window.setTimeout(()=>{const y=this.fnMap.get(n);y&&y.fn(...y.args),this.fnMap.delete(n)},i);this.fnMap.set(n,{fn:e,threshold:i,timer:C,args:g,skipFn:c})}else m.skipFn&&m.skipFn(...m.args),this.fnMap.set(n,_F(_F({},m),{},{fn:e,args:g,skipFn:c}))}else{const m=window.setTimeout(()=>{const C=this.fnMap.get(n);C&&C.fn(...C.args),this.fnMap.delete(n)},i);this.fnMap.set(n,{fn:e,threshold:i,timer:m,args:g,skipFn:c})}}},Xge=zge.throttleByKey.bind(zge),QY=function(){var e=l(function*(n){let{fragementLength:i,referenceList:c,asyncMapHandler:h,allFailedhandler:g,promisesCollector:v}=n,m=0;const C=i;let y,N=0;const k=function(){var U=l(function*(){const V=(()=>{const K=m*C;return c.slice(K,K+C).map(h)})();v&&v.push(...V);try{y=yield QQ(V)}catch(K){if(N+=C,m++,!(N>=c.length))return void(yield k());g(K)}V.forEach(K=>K.cancel())});return function(){return U.apply(this,arguments)}}();return yield k(),y});return function(i){return e.apply(this,arguments)}}();function $ge(e){return"object"==typeof e&&null!==e&&!(e instanceof RegExp)}var z_e=zg,X_e=$0("iterator"),Zge=!z_e(function(){var e=new URL("b?a=1&b=2&c=3","http://a"),n=e.searchParams,i="";return e.pathname="c%20d",n.forEach(function(c,h){n.delete("b"),i+=h+c}),!e.toJSON||!n.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==n.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!n[X_e]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==i||"x"!==new URL("http://x",void 0).host}),eAe=R_,Z_e=_E,eIe=zg,Ble=CU,tIe=_U,nIe=SR,rIe=W1,iIe=TR,VQ=Object.assign,tAe=Object.defineProperty,oIe=O0([].concat),sIe=!VQ||eIe(function(){if(eAe&&1!==VQ({b:1},VQ(tAe({},"a",{enumerable:!0,get:function(){tAe(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},n={},i=Symbol(),c="abcdefghijklmnopqrst";return e[i]=7,c.split("").forEach(function(h){n[h]=h}),7!=VQ({},e)[i]||Ble(VQ({},n)).join("")!=c})?function(e,n){for(var i=rIe(e),c=arguments.length,h=1,g=tIe.f,v=nIe.f;c>h;)for(var m,C=iIe(arguments[h++]),y=g?oIe(Ble(C),g(C)):Ble(C),N=y.length,k=0;N>k;)m=y[k++],eAe&&!Z_e(v,C,m)||(i[m]=C[m]);return i}:VQ,aIe=I1,cIe=j9,uIe=FS,lIe=_E,dIe=W1,hIe=function(e,n,i,c){try{return c?n(aIe(i)[0],i[1]):n(i)}catch(h){cIe(e,"throw",h)}},fIe=kX,pIe=s7,gIe=QS,nAe=YM,AIe=xX,mIe=g5,rAe=_h.Array,nj=O0,Ule=2147483647,EIe=/[^\0-\u007E]/,iAe=/[.\u3002\uFF0E\uFF61]/g,oAe="Overflow: input needs wider integers to process",sAe=_h.RangeError,vIe=nj(iAe.exec),GQ=Math.floor,Fle=String.fromCharCode,aAe=nj("".charCodeAt),cAe=nj([].join),a3=nj([].push),yIe=nj("".replace),_Ie=nj("".split),IIe=nj("".toLowerCase),uAe=function(e){return e+22+75*(e<26)},bIe=function(e,n,i){var c=0;for(e=i?GQ(e/700):e>>1,e+=GQ(e/n);e>455;)e=GQ(e/35),c+=36;return GQ(c+36*e/(e+38))},CIe=function(e){var n,i,c=[],h=(e=function(ye){for(var be=[],_s=0,ua=ye.length;_s<ua;){var ma=aAe(ye,_s++);if(ma>=55296&&ma<=56319&&_s<ua){var pc=aAe(ye,_s++);56320==(64512&pc)?a3(be,((1023&ma)<<10)+(1023&pc)+65536):(a3(be,ma),_s--)}else a3(be,ma)}return be}(e)).length,g=128,v=0,m=72;for(n=0;n<e.length;n++)(i=e[n])<128&&a3(c,Fle(i));var C=c.length,y=C;for(C&&a3(c,"-");y<h;){var N=Ule;for(n=0;n<e.length;n++)(i=e[n])>=g&&i<N&&(N=i);var k=y+1;if(N-g>GQ((Ule-v)/k))throw sAe(oAe);for(v+=(N-g)*k,g=N,n=0;n<e.length;n++){if((i=e[n])<g&&++v>Ule)throw sAe(oAe);if(i==g){for(var U=v,V=36;;){var K=V<=m?1:V>=m+26?26:V-m;if(U<K)break;var $=U-K,Z=36-K;a3(c,Fle(uAe(K+$%Z))),U=GQ($/Z),V+=36}a3(c,Fle(uAe(U))),m=bIe(v,k,y==C),v=0,y++}}v++,g++}return cAe(c,"")},SIe=_h.TypeError,jle=Ly,_re=_h,Qle=Oy,Ire=_E,k2=O0,lAe=Zge,dAe=Vb,TIe=b$,wIe=d2,RIe=g$,Vle=oM,hAe=t7,Gle=X0,OIe=Dy,DIe=FS,NIe=qS,kIe=I1,fAe=e_,lT=u2,LIe=eM,pAe=NT,Hle=xX,PIe=g5,HQ=function(e,n){if(e<n)throw SIe("Not enough arguments");return e},xIe=vne,MIe=$0("iterator"),bre="URLSearchParams",gAe="URLSearchParamsIterator",AAe=Vle.set,sO=Vle.getterFor(bre),BIe=Vle.getterFor(gAe),mAe=Qle("fetch"),Cre=Qle("Request"),VY=Qle("Headers"),qle=Cre&&Cre.prototype,EAe=VY&&VY.prototype,UIe=_re.RegExp,FIe=_re.TypeError,vAe=_re.decodeURIComponent,jIe=_re.encodeURIComponent,QIe=k2("".charAt),yAe=k2([].join),rj=k2([].push),Wle=k2("".replace),VIe=k2([].shift),_Ae=k2([].splice),IAe=k2("".split),GIe=k2("".slice),HIe=/\+/g,bAe=Array(4),qIe=function(e){return bAe[e-1]||(bAe[e-1]=UIe("((?:%[\\da-f]{2}){"+e+"})","gi"))},WIe=function(e){try{return vAe(e)}catch(n){return e}},CAe=function(e){var n=Wle(e,HIe," "),i=4;try{return vAe(n)}catch(c){for(;i;)n=Wle(n,qIe(i--),WIe);return n}},KIe=/[!'()~]|%20/g,YIe={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},JIe=function(e){return YIe[e]},SAe=function(e){return Wle(jIe(e),KIe,JIe)},Kle=RIe(function(e,n){AAe(this,{type:gAe,iterator:Hle(sO(e).entries),kind:n})},"Iterator",function(){var e=BIe(this),n=e.kind,i=e.iterator.next(),c=i.value;return i.done||(i.value="keys"===n?c.key:"values"===n?c.value:[c.key,c.value]),i},!0),TAe=function(e){this.entries=[],this.url=null,void 0!==e&&(fAe(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===QIe(e,0)?GIe(e,1):e:lT(e)))};TAe.prototype={type:bre,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var n,i,c,h,g,v,m,C=PIe(e);if(C)for(i=(n=Hle(e,C)).next;!(c=Ire(i,n)).done;){if(g=(h=Hle(kIe(c.value))).next,(v=Ire(g,h)).done||(m=Ire(g,h)).done||!Ire(g,h).done)throw FIe("Expected sequence with length 2");rj(this.entries,{key:lT(v.value),value:lT(m.value)})}else for(var y in e)OIe(e,y)&&rj(this.entries,{key:y,value:lT(e[y])})},parseQuery:function(e){if(e)for(var n,i,c=IAe(e,"&"),h=0;h<c.length;)(n=c[h++]).length&&(i=IAe(n,"="),rj(this.entries,{key:CAe(VIe(i)),value:CAe(yAe(i,"="))}))},serialize:function(){for(var e,n=this.entries,i=[],c=0;c<n.length;)e=n[c++],rj(i,SAe(e.key)+"="+SAe(e.value));return yAe(i,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var Sre=function(){hAe(this,GY),AAe(this,new TAe(arguments.length>0?arguments[0]:void 0))},GY=Sre.prototype;if(TIe(GY,{append:function(e,n){HQ(arguments.length,2);var i=sO(this);rj(i.entries,{key:lT(e),value:lT(n)}),i.updateURL()},delete:function(e){HQ(arguments.length,1);for(var n=sO(this),i=n.entries,c=lT(e),h=0;h<i.length;)i[h].key===c?_Ae(i,h,1):h++;n.updateURL()},get:function(e){HQ(arguments.length,1);for(var n=sO(this).entries,i=lT(e),c=0;c<n.length;c++)if(n[c].key===i)return n[c].value;return null},getAll:function(e){HQ(arguments.length,1);for(var n=sO(this).entries,i=lT(e),c=[],h=0;h<n.length;h++)n[h].key===i&&rj(c,n[h].value);return c},has:function(e){HQ(arguments.length,1);for(var n=sO(this).entries,i=lT(e),c=0;c<n.length;)if(n[c++].key===i)return!0;return!1},set:function(e,n){HQ(arguments.length,1);for(var i,c=sO(this),h=c.entries,g=!1,v=lT(e),m=lT(n),C=0;C<h.length;C++)(i=h[C]).key===v&&(g?_Ae(h,C--,1):(g=!0,i.value=m));g||rj(h,{key:v,value:m}),c.updateURL()},sort:function(){var e=sO(this);xIe(e.entries,function(n,i){return n.key>i.key?1:-1}),e.updateURL()},forEach:function(e){for(var n,i=sO(this).entries,c=DIe(e,arguments.length>1?arguments[1]:void 0),h=0;h<i.length;)c((n=i[h++]).value,n.key,this)},keys:function(){return new Kle(this,"keys")},values:function(){return new Kle(this,"values")},entries:function(){return new Kle(this,"entries")}},{enumerable:!0}),dAe(GY,MIe,GY.entries,{name:"entries"}),dAe(GY,"toString",function(){return sO(this).serialize()},{enumerable:!0}),wIe(Sre,bre),jle({global:!0,forced:!lAe},{URLSearchParams:Sre}),!lAe&&Gle(VY)){var zIe=k2(EAe.has),XIe=k2(EAe.set),wAe=function(e){if(fAe(e)){var n,i=e.body;if(NIe(i)===bre)return n=e.headers?new VY(e.headers):new VY,zIe(n,"content-type")||XIe(n,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),LIe(e,{body:pAe(0,lT(i)),headers:pAe(0,n)})}return e};if(Gle(mAe)&&jle({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return mAe(e,arguments.length>1?wAe(arguments[1]):{})}}),Gle(Cre)){var Yle=function(e){return hAe(this,qle),new Cre(e,arguments.length>1?wAe(arguments[1]):{})};qle.constructor=Yle,Yle.prototype=qle,jle({global:!0,forced:!0},{Request:Yle})}}var rR,ZIe=Ly,Jle=R_,ebe=Zge,zle=_h,RAe=FS,iR=O0,tbe=bU.f,Tre=Vb,nbe=t7,Xle=Dy,$le=sIe,qQ=function(e){var n=dIe(e),i=pIe(this),c=arguments.length,h=c>1?arguments[1]:void 0,g=void 0!==h;g&&(h=uIe(h,c>2?arguments[2]:void 0));var v,m,C,y,N,k,U=mIe(n),V=0;if(!U||this==rAe&&fIe(U))for(v=gIe(n),m=i?new this(v):rAe(v);v>V;V++)k=g?h(n[V],V):n[V],nAe(m,V,k);else for(N=(y=AIe(n,U)).next,m=i?new this:[];!(C=lIe(N,y)).done;V++)k=g?hIe(y,h,[C.value,V],!0):C.value,nAe(m,V,k);return m.length=V,m},aO=eY,rbe=R7.codeAt,EL=u2,obe=d2,OAe={URLSearchParams:Sre,getState:sO},sbe=oM.set,wre=oM.getterFor("URL"),abe=OAe.URLSearchParams,cbe=OAe.getState,HY=zle.URL,Zle=zle.TypeError,Rre=zle.parseInt,ube=Math.floor,NAe=Math.pow,oR=iR("".charAt),cO=iR(/./.exec),qY=iR([].join),lbe=iR(1..toString),dbe=iR([].pop),WQ=iR([].push),kAe=iR("".replace),hbe=iR([].shift),fbe=iR("".split),WY=iR("".slice),Ore=iR("".toLowerCase),pbe=iR([].unshift),ede="Invalid scheme",oj="Invalid host",LAe="Invalid port",PAe=/[a-z]/i,gbe=/[\d+-.a-z]/i,tde=/\d/,Abe=/^0x/i,mbe=/^[0-7]+$/,Ebe=/^\d+$/,xAe=/^[\da-f]+$/i,vbe=/[\0\t\n\r #%/:<>?@[\\\]^|]/,ybe=/[\0\t\n\r #/:<>?@[\\\]^|]/,_be=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,Ibe=/[\t\n\r]/g,KY=function(e){var n,i,c,h;if("number"==typeof e){for(n=[],i=0;i<4;i++)pbe(n,e%256),e=ube(e/256);return qY(n,".")}if("object"==typeof e){for(n="",c=function(g){for(var v=null,m=1,C=null,y=0,N=0;N<8;N++)0!==g[N]?(y>m&&(v=C,m=y),C=null,y=0):(null===C&&(C=N),++y);return y>m&&(v=C,m=y),v}(e),i=0;i<8;i++)h&&0===e[i]||(h&&(h=!1),c===i?(n+=i?":":"::",h=!0):(n+=lbe(e[i],16),i<7&&(n+=":")));return"["+n+"]"}return e},Dre={},MAe=$le({},Dre,{" ":1,'"':1,"<":1,">":1,"`":1}),BAe=$le({},MAe,{"#":1,"?":1,"{":1,"}":1}),nde=$le({},BAe,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),c3=function(e,n){var i=rbe(e,0);return i>32&&i<127&&!Xle(n,e)?e:encodeURIComponent(e)},Nre={ftp:21,file:null,http:80,https:443,ws:80,wss:443},YY=function(e,n){var i;return 2==e.length&&cO(PAe,oR(e,0))&&(":"==(i=oR(e,1))||!n&&"|"==i)},UAe=function(e){var n;return e.length>1&&YY(WY(e,0,2))&&(2==e.length||"/"===(n=oR(e,2))||"\\"===n||"?"===n||"#"===n)},bbe=function(e){return"."===e||"%2e"===Ore(e)},rde={},FAe={},ide={},jAe={},QAe={},ode={},VAe={},GAe={},kre={},Lre={},sde={},ade={},cde={},ude={},HAe={},lde={},KQ={},L2={},qAe={},sj={},_L={},dde=function(e,n,i){var c,h,g,v=EL(e);if(n){if(h=this.parse(v))throw Zle(h);this.searchParams=null}else{if(void 0!==i&&(c=new dde(i,!0)),h=this.parse(v,null,c))throw Zle(h);(g=cbe(new abe)).bindURL(this),this.searchParams=g}};dde.prototype={type:"URL",parse:function(e,n,i){var c,h,g,v,m,C=this,y=n||rde,N=0,k="",U=!1,V=!1,K=!1;for(e=EL(e),n||(C.scheme="",C.username="",C.password="",C.host=null,C.port=null,C.path=[],C.query=null,C.fragment=null,C.cannotBeABaseURL=!1,e=kAe(e,_be,"")),e=kAe(e,Ibe,""),c=qQ(e);N<=c.length;){switch(h=c[N],y){case rde:if(!h||!cO(PAe,h)){if(n)return ede;y=ide;continue}k+=Ore(h),y=FAe;break;case FAe:if(h&&(cO(gbe,h)||"+"==h||"-"==h||"."==h))k+=Ore(h);else{if(":"!=h){if(n)return ede;k="",y=ide,N=0;continue}if(n&&(C.isSpecial()!=Xle(Nre,k)||"file"==k&&(C.includesCredentials()||null!==C.port)||"file"==C.scheme&&!C.host))return;if(C.scheme=k,n)return void(C.isSpecial()&&Nre[C.scheme]==C.port&&(C.port=null));k="","file"==C.scheme?y=ude:C.isSpecial()&&i&&i.scheme==C.scheme?y=jAe:C.isSpecial()?y=GAe:"/"==c[N+1]?(y=QAe,N++):(C.cannotBeABaseURL=!0,WQ(C.path,""),y=qAe)}break;case ide:if(!i||i.cannotBeABaseURL&&"#"!=h)return ede;if(i.cannotBeABaseURL&&"#"==h){C.scheme=i.scheme,C.path=aO(i.path),C.query=i.query,C.fragment="",C.cannotBeABaseURL=!0,y=_L;break}y="file"==i.scheme?ude:ode;continue;case jAe:if("/"!=h||"/"!=c[N+1]){y=ode;continue}y=kre,N++;break;case QAe:if("/"==h){y=Lre;break}y=L2;continue;case ode:if(C.scheme=i.scheme,h==rR)C.username=i.username,C.password=i.password,C.host=i.host,C.port=i.port,C.path=aO(i.path),C.query=i.query;else if("/"==h||"\\"==h&&C.isSpecial())y=VAe;else if("?"==h)C.username=i.username,C.password=i.password,C.host=i.host,C.port=i.port,C.path=aO(i.path),C.query="",y=sj;else{if("#"!=h){C.username=i.username,C.password=i.password,C.host=i.host,C.port=i.port,C.path=aO(i.path),C.path.length--,y=L2;continue}C.username=i.username,C.password=i.password,C.host=i.host,C.port=i.port,C.path=aO(i.path),C.query=i.query,C.fragment="",y=_L}break;case VAe:if(!C.isSpecial()||"/"!=h&&"\\"!=h){if("/"!=h){C.username=i.username,C.password=i.password,C.host=i.host,C.port=i.port,y=L2;continue}y=Lre}else y=kre;break;case GAe:if(y=kre,"/"!=h||"/"!=oR(k,N+1))continue;N++;break;case kre:if("/"!=h&&"\\"!=h){y=Lre;continue}break;case Lre:if("@"==h){U&&(k="%40"+k),U=!0,g=qQ(k);for(var $=0;$<g.length;$++){var Z=g[$];if(":"!=Z||K){var ye=c3(Z,nde);K?C.password+=ye:C.username+=ye}else K=!0}k=""}else if(h==rR||"/"==h||"?"==h||"#"==h||"\\"==h&&C.isSpecial()){if(U&&""==k)return"Invalid authority";N-=qQ(k).length+1,k="",y=sde}else k+=h;break;case sde:case ade:if(n&&"file"==C.scheme){y=lde;continue}if(":"!=h||V){if(h==rR||"/"==h||"?"==h||"#"==h||"\\"==h&&C.isSpecial()){if(C.isSpecial()&&""==k)return oj;if(n&&""==k&&(C.includesCredentials()||null!==C.port))return;if(v=C.parseHost(k))return v;if(k="",y=KQ,n)return;continue}"["==h?V=!0:"]"==h&&(V=!1),k+=h}else{if(""==k)return oj;if(v=C.parseHost(k))return v;if(k="",y=cde,n==ade)return}break;case cde:if(!cO(tde,h)){if(h==rR||"/"==h||"?"==h||"#"==h||"\\"==h&&C.isSpecial()||n){if(""!=k){var be=Rre(k,10);if(be>65535)return LAe;C.port=C.isSpecial()&&be===Nre[C.scheme]?null:be,k=""}if(n)return;y=KQ;continue}return LAe}k+=h;break;case ude:if(C.scheme="file","/"==h||"\\"==h)y=HAe;else{if(!i||"file"!=i.scheme){y=L2;continue}if(h==rR)C.host=i.host,C.path=aO(i.path),C.query=i.query;else if("?"==h)C.host=i.host,C.path=aO(i.path),C.query="",y=sj;else{if("#"!=h){UAe(qY(aO(c,N),""))||(C.host=i.host,C.path=aO(i.path),C.shortenPath()),y=L2;continue}C.host=i.host,C.path=aO(i.path),C.query=i.query,C.fragment="",y=_L}}break;case HAe:if("/"==h||"\\"==h){y=lde;break}i&&"file"==i.scheme&&!UAe(qY(aO(c,N),""))&&(YY(i.path[0],!0)?WQ(C.path,i.path[0]):C.host=i.host),y=L2;continue;case lde:if(h==rR||"/"==h||"\\"==h||"?"==h||"#"==h){if(!n&&YY(k))y=L2;else if(""==k){if(C.host="",n)return;y=KQ}else{if(v=C.parseHost(k))return v;if("localhost"==C.host&&(C.host=""),n)return;k="",y=KQ}continue}k+=h;break;case KQ:if(C.isSpecial()){if(y=L2,"/"!=h&&"\\"!=h)continue}else if(n||"?"!=h)if(n||"#"!=h){if(h!=rR&&(y=L2,"/"!=h))continue}else C.fragment="",y=_L;else C.query="",y=sj;break;case L2:if(h==rR||"/"==h||"\\"==h&&C.isSpecial()||!n&&("?"==h||"#"==h)){if(".."===(m=Ore(m=k))||"%2e."===m||".%2e"===m||"%2e%2e"===m?(C.shortenPath(),"/"==h||"\\"==h&&C.isSpecial()||WQ(C.path,"")):bbe(k)?"/"==h||"\\"==h&&C.isSpecial()||WQ(C.path,""):("file"==C.scheme&&!C.path.length&&YY(k)&&(C.host&&(C.host=""),k=oR(k,0)+":"),WQ(C.path,k)),k="","file"==C.scheme&&(h==rR||"?"==h||"#"==h))for(;C.path.length>1&&""===C.path[0];)hbe(C.path);"?"==h?(C.query="",y=sj):"#"==h&&(C.fragment="",y=_L)}else k+=c3(h,BAe);break;case qAe:"?"==h?(C.query="",y=sj):"#"==h?(C.fragment="",y=_L):h!=rR&&(C.path[0]+=c3(h,Dre));break;case sj:n||"#"!=h?h!=rR&&("'"==h&&C.isSpecial()?C.query+="%27":C.query+="#"==h?"%23":c3(h,Dre)):(C.fragment="",y=_L);break;case _L:h!=rR&&(C.fragment+=c3(h,MAe))}N++}},parseHost:function(e){var n,i,c;if("["==oR(e,0)){if("]"!=oR(e,e.length-1)||!(n=function(h){var g,v,m,C,y,N,k,U=[0,0,0,0,0,0,0,0],V=0,K=null,$=0,Z=function(){return oR(h,$)};if(":"==Z()){if(":"!=oR(h,1))return;$+=2,K=++V}for(;Z();){if(8==V)return;if(":"!=Z()){for(g=v=0;v<4&&cO(xAe,Z());)g=16*g+Rre(Z(),16),$++,v++;if("."==Z()){if(0==v||($-=v,V>6))return;for(m=0;Z();){if(C=null,m>0){if(!("."==Z()&&m<4))return;$++}if(!cO(tde,Z()))return;for(;cO(tde,Z());){if(y=Rre(Z(),10),null===C)C=y;else{if(0==C)return;C=10*C+y}if(C>255)return;$++}U[V]=256*U[V]+C,2!=++m&&4!=m||V++}if(4!=m)return;break}if(":"==Z()){if($++,!Z())return}else if(Z())return;U[V++]=g}else{if(null!==K)return;$++,K=++V}}if(null!==K)for(N=V-K,V=7;0!=V&&N>0;)k=U[V],U[V--]=U[K+N-1],U[K+--N]=k;else if(8!=V)return;return U}(WY(e,1,-1))))return oj;this.host=n}else if(this.isSpecial()){if(e=function(e){var n,i,c=[],h=_Ie(yIe(IIe(e),iAe,"."),".");for(n=0;n<h.length;n++)a3(c,vIe(EIe,i=h[n])?"xn--"+CIe(i):i);return cAe(c,".")}(e),cO(vbe,e)||null===(n=function(h){var g,v,m,C,y,N,k,U=fbe(h,".");if(U.length&&""==U[U.length-1]&&U.length--,(g=U.length)>4)return h;for(v=[],m=0;m<g;m++){if(""==(C=U[m]))return h;if(y=10,C.length>1&&"0"==oR(C,0)&&(y=cO(Abe,C)?16:8,C=WY(C,8==y?1:2)),""===C)N=0;else{if(!cO(10==y?Ebe:8==y?mbe:xAe,C))return h;N=Rre(C,y)}WQ(v,N)}for(m=0;m<g;m++)if(N=v[m],m==g-1){if(N>=NAe(256,5-g))return null}else if(N>255)return null;for(k=dbe(v),m=0;m<v.length;m++)k+=v[m]*NAe(256,3-m);return k}(e)))return oj;this.host=n}else{if(cO(ybe,e))return oj;for(n="",i=qQ(e),c=0;c<i.length;c++)n+=c3(i[c],Dre);this.host=n}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return Xle(Nre,this.scheme)},shortenPath:function(){var e=this.path,n=e.length;!n||"file"==this.scheme&&1==n&&YY(e[0],!0)||e.length--},serialize:function(){var e=this,n=e.scheme,i=e.username,c=e.password,h=e.host,g=e.port,v=e.path,m=e.query,C=e.fragment,y=n+":";return null!==h?(y+="//",e.includesCredentials()&&(y+=i+(c?":"+c:"")+"@"),y+=KY(h),null!==g&&(y+=":"+g)):"file"==n&&(y+="//"),y+=e.cannotBeABaseURL?v[0]:v.length?"/"+qY(v,"/"):"",null!==m&&(y+="?"+m),null!==C&&(y+="#"+C),y},setHref:function(e){var n=this.parse(e);if(n)throw Zle(n);this.searchParams.update()},getOrigin:function(){var e=this.scheme,n=this.port;if("blob"==e)try{return new YQ(e.path[0]).origin}catch(i){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+KY(this.host)+(null!==n?":"+n:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(EL(e)+":",rde)},getUsername:function(){return this.username},setUsername:function(e){var n=qQ(EL(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var i=0;i<n.length;i++)this.username+=c3(n[i],nde)}},getPassword:function(){return this.password},setPassword:function(e){var n=qQ(EL(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var i=0;i<n.length;i++)this.password+=c3(n[i],nde)}},getHost:function(){var e=this.host,n=this.port;return null===e?"":null===n?KY(e):KY(e)+":"+n},setHost:function(e){this.cannotBeABaseURL||this.parse(e,sde)},getHostname:function(){var e=this.host;return null===e?"":KY(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,ade)},getPort:function(){var e=this.port;return null===e?"":EL(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=EL(e))?this.port=null:this.parse(e,cde))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+qY(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,KQ))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=EL(e))?this.query=null:("?"==oR(e,0)&&(e=WY(e,1)),this.query="",this.parse(e,sj)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=EL(e))?("#"==oR(e,0)&&(e=WY(e,1)),this.fragment="",this.parse(e,_L)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var YQ=function(e){var n=nbe(this,Pre),c=sbe(n,new dde(e,!1,arguments.length>1?arguments[1]:void 0));Jle||(n.href=c.serialize(),n.origin=c.getOrigin(),n.protocol=c.getProtocol(),n.username=c.getUsername(),n.password=c.getPassword(),n.host=c.getHost(),n.hostname=c.getHostname(),n.port=c.getPort(),n.pathname=c.getPathname(),n.search=c.getSearch(),n.searchParams=c.getSearchParams(),n.hash=c.getHash())},Pre=YQ.prototype,sR=function(e,n){return{get:function(){return wre(this)[e]()},set:n&&function(i){return wre(this)[n](i)},configurable:!0,enumerable:!0}};if(Jle&&tbe(Pre,{href:sR("serialize","setHref"),origin:sR("getOrigin"),protocol:sR("getProtocol","setProtocol"),username:sR("getUsername","setUsername"),password:sR("getPassword","setPassword"),host:sR("getHost","setHost"),hostname:sR("getHostname","setHostname"),port:sR("getPort","setPort"),pathname:sR("getPathname","setPathname"),search:sR("getSearch","setSearch"),searchParams:sR("getSearchParams"),hash:sR("getHash","setHash")}),Tre(Pre,"toJSON",function(){return wre(this).serialize()},{enumerable:!0}),Tre(Pre,"toString",function(){return wre(this).serialize()},{enumerable:!0}),HY){var WAe=HY.createObjectURL,KAe=HY.revokeObjectURL;WAe&&Tre(YQ,"createObjectURL",RAe(WAe,HY)),KAe&&Tre(YQ,"revokeObjectURL",RAe(KAe,HY))}obe(YQ,"URL"),ZIe({global:!0,forced:!ebe,sham:!Jle},{URL:YQ});var YAe=aS.URL;const Cbe={[T2.ACCESS_POINT]:{[Z0.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[Z0.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[Z0.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[Z0.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[Z0.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[Z0.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[Z0.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[Z0.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voice service available",retry:!0},[Z0.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[Z0.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[Z0.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[Z0.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[Z0.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[Z0.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[Z0.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[Z0.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[Z0.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[Z0.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[T2.UNILBS]:{[Ey.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[Ey.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[Ey.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[Ey.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[Ey.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[Ey.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[Ey.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[Ey.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[Ey.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[Ey.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[Ey.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[Ey.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[T2.STRING_UID_ALLOCATOR]:{[KN.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[KN.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[KN.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function xre(e){const n=Cbe[Math.floor(e/1e4)];if(!n)return{desc:"unkonw error",retry:!1};const i=n[e%1e4];if(!i){if(Math.floor(e/1e4)===T2.ACCESS_POINT){const c=e%1e4;if("1"===c.toString()[0])return{desc:e.toString(),retry:!1};if("2"===c.toString()[0])return{desc:e.toString(),retry:!0}}return{desc:"unkonw error",retry:!1}}return i}const Sbe={[Ql.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[Ql.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[Ql.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[Ql.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[Ql.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[Ql.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[Ql.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[Ql.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[Ql.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[Ql.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[Ql.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[Ql.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[Ql.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[Ql.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[Ql.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[Ql.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[Ql.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[Ql.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[Ql.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[Ql.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[Ql.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[Ql.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[Ql.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[Ql.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[Ql.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[Ql.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[Ql.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[Ql.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[Ql.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[Ql.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[Ql.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[Ql.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[Ql.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[Ql.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[Ql.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[Ql.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[Ql.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[Ql.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[Ql.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[Ql.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[Ql.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[Ql.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Ql.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Ql.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[Ql.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[Ql.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[Ql.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[Ql.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[Ql.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[Ql.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[Ql.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[Ql.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[Ql.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[Ql.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[Ql.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[Ql.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[Ql.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[Ql.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"},[Ql.ERR_LICENSE_ILLEGAL]:{desc:"ERR_LICENSE_ILLEGAL",action:"quit"},[Ql.ERR_LICENSE_MISSING]:{desc:"ERR_LICENSE_MISSING",action:"quit"},[Ql.ERR_LICENSE_EXPIRED]:{desc:"ERR_LICENSE_EXPIRED",action:"quit"},[Ql.ERR_LICENSE_MINUTES_EXCEEDED]:{desc:"ERR_LICENSE_MINUTES_EXCEEDED",action:"quit"},[Ql.ERR_LICENSE_PERIOD_INVALID]:{desc:"ERR_LICENSE_PERIOD_INVALID",action:"quit"},[Ql.ERR_LICENSE_MULTIPLE_SDK_SERVICE]:{desc:"ERR_LICENSE_MULTIPLE_SDK_SERVICE",action:"quit"}};function JY(e){return Sbe[e]||{desc:"UNKNOW_ERROR_".concat(e),action:"failed"}}var JAe={exports:{}};(function(e,n){e.exports=function(){var i={d:function(Ma,_i){for(var va in _i)i.o(_i,va)&&!i.o(Ma,va)&&Object.defineProperty(Ma,va,{enumerable:!0,get:_i[va]})},o:function(Ma,_i){return Object.prototype.hasOwnProperty.call(Ma,_i)},r:function(Ma){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Ma,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Ma,"__esModule",{value:!0})}},c={};i.r(c),i.d(c,{DataViewIndexOutOfBoundsError:function(){return Xa},DecodeError:function(){return ua},Decoder:function(){return ff},EXT_TIMESTAMP:function(){return ma},Encoder:function(){return _a},ExtData:function(){return be},ExtensionCodec:function(){return Dl},decode:function(){return Cg},decodeArrayStream:function(){return M0},decodeAsync:function(){return Uy},decodeMulti:function(){return cf},decodeMultiStream:function(){return ry},decodeStream:function(){return _j},decodeTimestampExtension:function(){return Wc},decodeTimestampToTimeSpec:function(){return nl},encode:function(){return ca},encodeDateToTimeSpec:function(){return qa},encodeTimeSpecToTimestamp:function(){return pc},encodeTimestampExtension:function(){return Ua}});var h=4294967295;function g(Ma,_i,va){var nc=Math.floor(va/4294967296),ga=va;Ma.setUint32(_i,nc),Ma.setUint32(_i+4,ga)}function v(Ma,_i){return 4294967296*Ma.getInt32(_i)+Ma.getUint32(_i+4)}var m=function(Ma,_i){var va="function"==typeof Symbol&&Ma[Symbol.iterator];if(!va)return Ma;var nc,ga,Hc=va.call(Ma),jc=[];try{for(;(void 0===_i||_i-- >0)&&!(nc=Hc.next()).done;)jc.push(nc.value)}catch(Al){ga={error:Al}}finally{try{nc&&!nc.done&&(va=Hc.return)&&va.call(Hc)}finally{if(ga)throw ga.error}}return jc},C=function(Ma,_i){for(var va=0,nc=_i.length,ga=Ma.length;va<nc;va++,ga++)Ma[ga]=_i[va];return Ma},y="undefined"!=typeof TextEncoder&&"undefined"!=typeof TextDecoder;function N(Ma){for(var _i=Ma.length,va=0,nc=0;nc<_i;){var ga=Ma.charCodeAt(nc++);if(0!=(4294967168&ga))if(0==(4294965248&ga))va+=2;else{if(ga>=55296&&ga<=56319&&nc<_i){var Hc=Ma.charCodeAt(nc);56320==(64512&Hc)&&(++nc,ga=((1023&ga)<<10)+(1023&Hc)+65536)}va+=0==(4294901760&ga)?3:4}else va++}return va}var k=y?new TextEncoder:void 0,U=y?"undefined"!=typeof process?200:0:h,V=(null==k?void 0:k.encodeInto)?function(Ma,_i,va){k.encodeInto(Ma,_i.subarray(va))}:function(Ma,_i,va){_i.set(k.encode(Ma),va)};function K(Ma,_i,va){for(var nc=_i,ga=nc+va,Hc=[],jc="";nc<ga;){var Al=Ma[nc++];if(0==(128&Al))Hc.push(Al);else if(192==(224&Al)){var Id=63&Ma[nc++];Hc.push((31&Al)<<6|Id)}else if(224==(240&Al)){Id=63&Ma[nc++];var Wh=63&Ma[nc++];Hc.push((31&Al)<<12|Id<<6|Wh)}else if(240==(248&Al)){var Tl=(7&Al)<<18|(Id=63&Ma[nc++])<<12|(Wh=63&Ma[nc++])<<6|63&Ma[nc++];Tl>65535&&(Hc.push((Tl-=65536)>>>10&1023|55296),Tl=56320|1023&Tl),Hc.push(Tl)}else Hc.push(Al);Hc.length>=4096&&(jc+=String.fromCharCode.apply(String,C([],m(Hc))),Hc.length=0)}return Hc.length>0&&(jc+=String.fromCharCode.apply(String,C([],m(Hc)))),jc}var $,Z=y?new TextDecoder:null,ye=y?"undefined"!=typeof process?200:0:h,be=function(Ma,_i){this.type=Ma,this.data=_i},_s=($=function(Ma,_i){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(va,nc){va.__proto__=nc}||function(va,nc){for(var ga in nc)Object.prototype.hasOwnProperty.call(nc,ga)&&(va[ga]=nc[ga])})(Ma,_i)},function(Ma,_i){if("function"!=typeof _i&&null!==_i)throw new TypeError("Class extends value "+String(_i)+" is not a constructor or null");function va(){this.constructor=Ma}$(Ma,_i),Ma.prototype=null===_i?Object.create(_i):(va.prototype=_i.prototype,new va)}),ua=function(Ma){function _i(va){var nc=Ma.call(this,va)||this,ga=Object.create(_i.prototype);return Object.setPrototypeOf(nc,ga),Object.defineProperty(nc,"name",{configurable:!0,enumerable:!1,value:_i.name}),nc}return _s(_i,Ma),_i}(Error),ma=-1;function pc(Ma){var _i,va=Ma.sec,nc=Ma.nsec;if(va>=0&&nc>=0&&va<=17179869183){if(0===nc&&va<=4294967295){var ga=new Uint8Array(4);return(_i=new DataView(ga.buffer)).setUint32(0,va),ga}var Hc=va/4294967296,jc=4294967295&va;return ga=new Uint8Array(8),(_i=new DataView(ga.buffer)).setUint32(0,nc<<2|3&Hc),_i.setUint32(4,jc),ga}return ga=new Uint8Array(12),(_i=new DataView(ga.buffer)).setUint32(0,nc),g(_i,4,va),ga}function qa(Ma){var _i=Ma.getTime(),va=Math.floor(_i/1e3),nc=1e6*(_i-1e3*va),ga=Math.floor(nc/1e9);return{sec:va+ga,nsec:nc-1e9*ga}}function Ua(Ma){return Ma instanceof Date?pc(qa(Ma)):null}function nl(Ma){var _i=new DataView(Ma.buffer,Ma.byteOffset,Ma.byteLength);switch(Ma.byteLength){case 4:return{sec:_i.getUint32(0),nsec:0};case 8:var va=_i.getUint32(0);return{sec:4294967296*(3&va)+_i.getUint32(4),nsec:va>>>2};case 12:return{sec:v(_i,4),nsec:_i.getUint32(0)};default:throw new ua("Unrecognized data size for timestamp (expected 4, 8, or 12): "+Ma.length)}}function Wc(Ma){var _i=nl(Ma);return new Date(1e3*_i.sec+_i.nsec/1e6)}var El={type:ma,encode:Ua,decode:Wc},Dl=function(){function Ma(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(El)}return Ma.prototype.register=function(_i){var va=_i.type,nc=_i.encode,ga=_i.decode;if(va>=0)this.encoders[va]=nc,this.decoders[va]=ga;else{var Hc=1+va;this.builtInEncoders[Hc]=nc,this.builtInDecoders[Hc]=ga}},Ma.prototype.tryToEncode=function(_i,va){for(var nc=0;nc<this.builtInEncoders.length;nc++)if(null!=(ga=this.builtInEncoders[nc])&&null!=(Hc=ga(_i,va)))return new be(-1-nc,Hc);for(nc=0;nc<this.encoders.length;nc++){var ga,Hc;if(null!=(ga=this.encoders[nc])&&null!=(Hc=ga(_i,va)))return new be(nc,Hc)}return _i instanceof be?_i:null},Ma.prototype.decode=function(_i,va,nc){var ga=va<0?this.builtInDecoders[-1-va]:this.decoders[va];return ga?ga(_i,va,nc):new be(va,_i)},Ma.defaultCodec=new Ma,Ma}();function Kl(Ma){return Ma instanceof Uint8Array?Ma:ArrayBuffer.isView(Ma)?new Uint8Array(Ma.buffer,Ma.byteOffset,Ma.byteLength):Ma instanceof ArrayBuffer?new Uint8Array(Ma):Uint8Array.from(Ma)}var sl=function(Ma){var _i="function"==typeof Symbol&&Symbol.iterator,va=_i&&Ma[_i],nc=0;if(va)return va.call(Ma);if(Ma&&"number"==typeof Ma.length)return{next:function(){return Ma&&nc>=Ma.length&&(Ma=void 0),{value:Ma&&Ma[nc++],done:!Ma}}};throw new TypeError(_i?"Object is not iterable.":"Symbol.iterator is not defined.")},_a=function(){function Ma(_i,va,nc,ga,Hc,jc,Al,Id){void 0===_i&&(_i=Dl.defaultCodec),void 0===va&&(va=void 0),void 0===nc&&(nc=100),void 0===ga&&(ga=2048),void 0===Hc&&(Hc=!1),void 0===jc&&(jc=!1),void 0===Al&&(Al=!1),void 0===Id&&(Id=!1),this.extensionCodec=_i,this.context=va,this.maxDepth=nc,this.initialBufferSize=ga,this.sortKeys=Hc,this.forceFloat32=jc,this.ignoreUndefined=Al,this.forceIntegerToFloat=Id,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return Ma.prototype.getUint8Array=function(){return this.bytes.subarray(0,this.pos)},Ma.prototype.reinitializeState=function(){this.pos=0},Ma.prototype.encode=function(_i){return this.reinitializeState(),this.doEncode(_i,1),this.getUint8Array()},Ma.prototype.doEncode=function(_i,va){if(va>this.maxDepth)throw new Error("Too deep objects in depth "+va);null==_i?this.encodeNil():"boolean"==typeof _i?this.encodeBoolean(_i):"number"==typeof _i?this.encodeNumber(_i):"string"==typeof _i?this.encodeString(_i):this.encodeObject(_i,va)},Ma.prototype.ensureBufferSizeToWrite=function(_i){var va=this.pos+_i;this.view.byteLength<va&&this.resizeBuffer(2*va)},Ma.prototype.resizeBuffer=function(_i){var va=new ArrayBuffer(_i),nc=new Uint8Array(va),ga=new DataView(va);nc.set(this.bytes),this.view=ga,this.bytes=nc},Ma.prototype.encodeNil=function(){this.writeU8(192)},Ma.prototype.encodeBoolean=function(_i){this.writeU8(!1===_i?194:195)},Ma.prototype.encodeNumber=function(_i){Number.isSafeInteger(_i)&&!this.forceIntegerToFloat?_i>=0?_i<128?this.writeU8(_i):_i<256?(this.writeU8(204),this.writeU8(_i)):_i<65536?(this.writeU8(205),this.writeU16(_i)):_i<4294967296?(this.writeU8(206),this.writeU32(_i)):(this.writeU8(207),this.writeU64(_i)):_i>=-32?this.writeU8(224|_i+32):_i>=-128?(this.writeU8(208),this.writeI8(_i)):_i>=-32768?(this.writeU8(209),this.writeI16(_i)):_i>=-2147483648?(this.writeU8(210),this.writeI32(_i)):(this.writeU8(211),this.writeI64(_i)):this.forceFloat32?(this.writeU8(202),this.writeF32(_i)):(this.writeU8(203),this.writeF64(_i))},Ma.prototype.writeStringHeader=function(_i){if(_i<32)this.writeU8(160+_i);else if(_i<256)this.writeU8(217),this.writeU8(_i);else if(_i<65536)this.writeU8(218),this.writeU16(_i);else{if(!(_i<4294967296))throw new Error("Too long string: "+_i+" bytes in UTF-8");this.writeU8(219),this.writeU32(_i)}},Ma.prototype.encodeString=function(_i){if(_i.length>U){var va=N(_i);this.ensureBufferSizeToWrite(5+va),this.writeStringHeader(va),V(_i,this.bytes,this.pos),this.pos+=va}else va=N(_i),this.ensureBufferSizeToWrite(5+va),this.writeStringHeader(va),function(nc,ga,Hc){for(var jc=nc.length,Al=Hc,Id=0;Id<jc;){var Wh=nc.charCodeAt(Id++);if(0!=(4294967168&Wh)){if(0==(4294965248&Wh))ga[Al++]=Wh>>6&31|192;else{if(Wh>=55296&&Wh<=56319&&Id<jc){var Tl=nc.charCodeAt(Id);56320==(64512&Tl)&&(++Id,Wh=((1023&Wh)<<10)+(1023&Tl)+65536)}0==(4294901760&Wh)?(ga[Al++]=Wh>>12&15|224,ga[Al++]=Wh>>6&63|128):(ga[Al++]=Wh>>18&7|240,ga[Al++]=Wh>>12&63|128,ga[Al++]=Wh>>6&63|128)}ga[Al++]=63&Wh|128}else ga[Al++]=Wh}}(_i,this.bytes,this.pos),this.pos+=va},Ma.prototype.encodeObject=function(_i,va){var nc=this.extensionCodec.tryToEncode(_i,this.context);if(null!=nc)this.encodeExtension(nc);else if(Array.isArray(_i))this.encodeArray(_i,va);else if(ArrayBuffer.isView(_i))this.encodeBinary(_i);else{if("object"!=typeof _i)throw new Error("Unrecognized object: "+Object.prototype.toString.apply(_i));this.encodeMap(_i,va)}},Ma.prototype.encodeBinary=function(_i){var va=_i.byteLength;if(va<256)this.writeU8(196),this.writeU8(va);else if(va<65536)this.writeU8(197),this.writeU16(va);else{if(!(va<4294967296))throw new Error("Too large binary: "+va);this.writeU8(198),this.writeU32(va)}var nc=Kl(_i);this.writeU8a(nc)},Ma.prototype.encodeArray=function(_i,va){var nc,ga,Hc=_i.length;if(Hc<16)this.writeU8(144+Hc);else if(Hc<65536)this.writeU8(220),this.writeU16(Hc);else{if(!(Hc<4294967296))throw new Error("Too large array: "+Hc);this.writeU8(221),this.writeU32(Hc)}try{for(var jc=sl(_i),Al=jc.next();!Al.done;Al=jc.next())this.doEncode(Al.value,va+1)}catch(Wh){nc={error:Wh}}finally{try{Al&&!Al.done&&(ga=jc.return)&&ga.call(jc)}finally{if(nc)throw nc.error}}},Ma.prototype.countWithoutUndefined=function(_i,va){var nc,ga,Hc=0;try{for(var jc=sl(va),Al=jc.next();!Al.done;Al=jc.next())void 0!==_i[Al.value]&&Hc++}catch(Id){nc={error:Id}}finally{try{Al&&!Al.done&&(ga=jc.return)&&ga.call(jc)}finally{if(nc)throw nc.error}}return Hc},Ma.prototype.encodeMap=function(_i,va){var nc,ga,Hc=Object.keys(_i);this.sortKeys&&Hc.sort();var jc=this.ignoreUndefined?this.countWithoutUndefined(_i,Hc):Hc.length;if(jc<16)this.writeU8(128+jc);else if(jc<65536)this.writeU8(222),this.writeU16(jc);else{if(!(jc<4294967296))throw new Error("Too large map object: "+jc);this.writeU8(223),this.writeU32(jc)}try{for(var Al=sl(Hc),Id=Al.next();!Id.done;Id=Al.next()){var Wh=Id.value,Tl=_i[Wh];this.ignoreUndefined&&void 0===Tl||(this.encodeString(Wh),this.doEncode(Tl,va+1))}}catch(Fl){nc={error:Fl}}finally{try{Id&&!Id.done&&(ga=Al.return)&&ga.call(Al)}finally{if(nc)throw nc.error}}},Ma.prototype.encodeExtension=function(_i){var va=_i.data.length;if(1===va)this.writeU8(212);else if(2===va)this.writeU8(213);else if(4===va)this.writeU8(214);else if(8===va)this.writeU8(215);else if(16===va)this.writeU8(216);else if(va<256)this.writeU8(199),this.writeU8(va);else if(va<65536)this.writeU8(200),this.writeU16(va);else{if(!(va<4294967296))throw new Error("Too large extension object: "+va);this.writeU8(201),this.writeU32(va)}this.writeI8(_i.type),this.writeU8a(_i.data)},Ma.prototype.writeU8=function(_i){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,_i),this.pos++},Ma.prototype.writeU8a=function(_i){var va=_i.length;this.ensureBufferSizeToWrite(va),this.bytes.set(_i,this.pos),this.pos+=va},Ma.prototype.writeI8=function(_i){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,_i),this.pos++},Ma.prototype.writeU16=function(_i){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,_i),this.pos+=2},Ma.prototype.writeI16=function(_i){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,_i),this.pos+=2},Ma.prototype.writeU32=function(_i){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,_i),this.pos+=4},Ma.prototype.writeI32=function(_i){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,_i),this.pos+=4},Ma.prototype.writeF32=function(_i){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,_i),this.pos+=4},Ma.prototype.writeF64=function(_i){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,_i),this.pos+=8},Ma.prototype.writeU64=function(_i){var va,nc,ga,jc;this.ensureBufferSizeToWrite(8),jc=ga=_i,(va=this.view).setUint32(nc=this.pos,ga/4294967296),va.setUint32(nc+4,jc),this.pos+=8},Ma.prototype.writeI64=function(_i){this.ensureBufferSizeToWrite(8),g(this.view,this.pos,_i),this.pos+=8},Ma}(),Qa={};function ca(Ma,_i){return void 0===_i&&(_i=Qa),new _a(_i.extensionCodec,_i.context,_i.maxDepth,_i.initialBufferSize,_i.sortKeys,_i.forceFloat32,_i.ignoreUndefined,_i.forceIntegerToFloat).encode(Ma)}function Aa(Ma){return(Ma<0?"-":"")+"0x"+Math.abs(Ma).toString(16).padStart(2,"0")}var Ya=function(){function Ma(_i,va){void 0===_i&&(_i=16),void 0===va&&(va=16),this.maxKeyLength=_i,this.maxLengthPerKey=va,this.hit=0,this.miss=0,this.caches=[];for(var nc=0;nc<this.maxKeyLength;nc++)this.caches.push([])}return Ma.prototype.canBeCached=function(_i){return _i>0&&_i<=this.maxKeyLength},Ma.prototype.find=function(_i,va,nc){var ga,Hc,jc=this.caches[nc-1];try{e:for(var Al=function(Jd){var Pp="function"==typeof Symbol&&Symbol.iterator,G0=Pp&&Jd[Pp],f1=0;if(G0)return G0.call(Jd);if(Jd&&"number"==typeof Jd.length)return{next:function(){return Jd&&f1>=Jd.length&&(Jd=void 0),{value:Jd&&Jd[f1++],done:!Jd}}};throw new TypeError(Pp?"Object is not iterable.":"Symbol.iterator is not defined.")}(jc),Id=Al.next();!Id.done;Id=Al.next()){for(var Wh=Id.value,Tl=Wh.bytes,Fl=0;Fl<nc;Fl++)if(Tl[Fl]!==_i[va+Fl])continue e;return Wh.str}}catch(Jd){ga={error:Jd}}finally{try{Id&&!Id.done&&(Hc=Al.return)&&Hc.call(Al)}finally{if(ga)throw ga.error}}return null},Ma.prototype.store=function(_i,va){var nc=this.caches[_i.length-1],ga={bytes:_i,str:va};nc.length>=this.maxLengthPerKey?nc[Math.random()*nc.length|0]=ga:nc.push(ga)},Ma.prototype.decode=function(_i,va,nc){var ga=this.find(_i,va,nc);if(null!=ga)return this.hit++,ga;this.miss++;var Hc=K(_i,va,nc),jc=Uint8Array.prototype.slice.call(_i,va,va+nc);return this.store(jc,Hc),Hc},Ma}(),Zc=function(Ma,_i){var va,nc,ga,Hc,jc={label:0,sent:function(){if(1&ga[0])throw ga[1];return ga[1]},trys:[],ops:[]};return Hc={next:Al(0),throw:Al(1),return:Al(2)},"function"==typeof Symbol&&(Hc[Symbol.iterator]=function(){return this}),Hc;function Al(Id){return function(Wh){return function(Tl){if(va)throw new TypeError("Generator is already executing.");for(;jc;)try{if(va=1,nc&&(ga=2&Tl[0]?nc.return:Tl[0]?nc.throw||((ga=nc.return)&&ga.call(nc),0):nc.next)&&!(ga=ga.call(nc,Tl[1])).done)return ga;switch(nc=0,ga&&(Tl=[2&Tl[0],ga.value]),Tl[0]){case 0:case 1:ga=Tl;break;case 4:return jc.label++,{value:Tl[1],done:!1};case 5:jc.label++,nc=Tl[1],Tl=[0];continue;case 7:Tl=jc.ops.pop(),jc.trys.pop();continue;default:if(!((ga=(ga=jc.trys).length>0&&ga[ga.length-1])||6!==Tl[0]&&2!==Tl[0])){jc=0;continue}if(3===Tl[0]&&(!ga||Tl[1]>ga[0]&&Tl[1]<ga[3])){jc.label=Tl[1];break}if(6===Tl[0]&&jc.label<ga[1]){jc.label=ga[1],ga=Tl;break}if(ga&&jc.label<ga[2]){jc.label=ga[2],jc.ops.push(Tl);break}ga[2]&&jc.ops.pop(),jc.trys.pop();continue}Tl=_i.call(Ma,jc)}catch(Fl){Tl=[6,Fl],nc=0}finally{va=ga=0}if(5&Tl[0])throw Tl[1];return{value:Tl[0]?Tl[1]:void 0,done:!0}}([Id,Wh])}}},Ol=function(Ma){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _i,va=Ma[Symbol.asyncIterator];return va?va.call(Ma):(Ma="function"==typeof __values?__values(Ma):Ma[Symbol.iterator](),_i={},nc("next"),nc("throw"),nc("return"),_i[Symbol.asyncIterator]=function(){return this},_i);function nc(ga){_i[ga]=Ma[ga]&&function(Hc){return new Promise(function(jc,Al){var Id,Wh,Tl;Id=jc,Wh=Al,Tl=(Hc=Ma[ga](Hc)).done,Promise.resolve(Hc.value).then(function(Jd){Id({value:Jd,done:Tl})},Wh)})}}},_c=function(Ma){return this instanceof _c?(this.v=Ma,this):new _c(Ma)},J=function(Ma,_i,va){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var nc,ga=va.apply(Ma,_i||[]),Hc=[];return nc={},jc("next"),jc("throw"),jc("return"),nc[Symbol.asyncIterator]=function(){return this},nc;function jc(Fl){ga[Fl]&&(nc[Fl]=function(Jd){return new Promise(function(Pp,G0){Hc.push([Fl,Jd,Pp,G0])>1||Al(Fl,Jd)})})}function Al(Fl,Jd){try{(Pp=ga[Fl](Jd)).value instanceof _c?Promise.resolve(Pp.value.v).then(Id,Wh):Tl(Hc[0][2],Pp)}catch(G0){Tl(Hc[0][3],G0)}var Pp}function Id(Fl){Al("next",Fl)}function Wh(Fl){Al("throw",Fl)}function Tl(Fl,Jd){Fl(Jd),Hc.shift(),Hc.length&&Al(Hc[0][0],Hc[0][1])}},Ze=new DataView(new ArrayBuffer(0)),aa=new Uint8Array(Ze.buffer),Xa=function(){try{Ze.getInt8(0)}catch(Ma){return Ma.constructor}throw new Error("never reached")}(),vl=new Xa("Insufficient data"),Oh=new Ya,ff=function(){function Ma(_i,va,nc,ga,Hc,jc,Al,Id){void 0===_i&&(_i=Dl.defaultCodec),void 0===va&&(va=void 0),void 0===nc&&(nc=h),void 0===ga&&(ga=h),void 0===Hc&&(Hc=h),void 0===jc&&(jc=h),void 0===Al&&(Al=h),void 0===Id&&(Id=Oh),this.extensionCodec=_i,this.context=va,this.maxStrLength=nc,this.maxBinLength=ga,this.maxArrayLength=Hc,this.maxMapLength=jc,this.maxExtLength=Al,this.keyDecoder=Id,this.totalPos=0,this.pos=0,this.view=Ze,this.bytes=aa,this.headByte=-1,this.stack=[]}return Ma.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1,this.stack.length=0},Ma.prototype.setBuffer=function(_i){this.bytes=Kl(_i),this.view=function(va){if(va instanceof ArrayBuffer)return new DataView(va);var nc=Kl(va);return new DataView(nc.buffer,nc.byteOffset,nc.byteLength)}(this.bytes),this.pos=0},Ma.prototype.appendBuffer=function(_i){if(-1!==this.headByte||this.hasRemaining(1)){var va=this.bytes.subarray(this.pos),nc=Kl(_i),ga=new Uint8Array(va.length+nc.length);ga.set(va),ga.set(nc,va.length),this.setBuffer(ga)}else this.setBuffer(_i)},Ma.prototype.hasRemaining=function(_i){return this.view.byteLength-this.pos>=_i},Ma.prototype.createExtraByteError=function(_i){var va=this.view;return new RangeError("Extra "+(va.byteLength-this.pos)+" of "+va.byteLength+" byte(s) found at buffer["+_i+"]")},Ma.prototype.decode=function(_i){this.reinitializeState(),this.setBuffer(_i);var va=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return va},Ma.prototype.decodeMulti=function(_i){return Zc(this,function(va){switch(va.label){case 0:this.reinitializeState(),this.setBuffer(_i),va.label=1;case 1:return this.hasRemaining(1)?[4,this.doDecodeSync()]:[3,3];case 2:return va.sent(),[3,1];case 3:return[2]}})},Ma.prototype.decodeAsync=function(_i){var va,nc,ga,Hc,jc,Id,Wh;return jc=this,void 0,Wh=function(){var Tl,Fl,Jd,Pp,G0,f1,gT,N0;return Zc(this,function(hR){switch(hR.label){case 0:Tl=!1,hR.label=1;case 1:hR.trys.push([1,6,7,12]),va=Ol(_i),hR.label=2;case 2:return[4,va.next()];case 3:if((nc=hR.sent()).done)return[3,5];if(Jd=nc.value,Tl)throw this.createExtraByteError(this.totalPos);this.appendBuffer(Jd);try{Fl=this.doDecodeSync(),Tl=!0}catch(a0e){if(!(a0e instanceof Xa))throw a0e}this.totalPos+=this.pos,hR.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return Pp=hR.sent(),ga={error:Pp},[3,12];case 7:return hR.trys.push([7,,10,11]),nc&&!nc.done&&(Hc=va.return)?[4,Hc.call(va)]:[3,9];case 8:hR.sent(),hR.label=9;case 9:return[3,11];case 10:if(ga)throw ga.error;return[7];case 11:return[7];case 12:if(Tl){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,Fl]}throw f1=(G0=this).headByte,gT=G0.pos,N0=G0.totalPos,new RangeError("Insufficient data in parsing "+Aa(f1)+" at "+N0+" ("+gT+" in the current buffer)")}})},new((Id=void 0)||(Id=Promise))(function(Tl,Fl){function Jd(f1){try{G0(Wh.next(f1))}catch(gT){Fl(gT)}}function Pp(f1){try{G0(Wh.throw(f1))}catch(gT){Fl(gT)}}function G0(f1){var gT;f1.done?Tl(f1.value):(gT=f1.value,gT instanceof Id?gT:new Id(function(N0){N0(gT)})).then(Jd,Pp)}G0((Wh=Wh.apply(jc,[])).next())})},Ma.prototype.decodeArrayStream=function(_i){return this.decodeMultiAsync(_i,!0)},Ma.prototype.decodeStream=function(_i){return this.decodeMultiAsync(_i,!1)},Ma.prototype.decodeMultiAsync=function(_i,va){return J(this,arguments,function(){var nc,ga,Hc,jc,Al,Id,Wh,Tl,Fl;return Zc(this,function(Jd){switch(Jd.label){case 0:nc=va,ga=-1,Jd.label=1;case 1:Jd.trys.push([1,13,14,19]),Hc=Ol(_i),Jd.label=2;case 2:return[4,_c(Hc.next())];case 3:if((jc=Jd.sent()).done)return[3,12];if(Al=jc.value,va&&0===ga)throw this.createExtraByteError(this.totalPos);this.appendBuffer(Al),nc&&(ga=this.readArraySize(),nc=!1,this.complete()),Jd.label=4;case 4:Jd.trys.push([4,9,,10]),Jd.label=5;case 5:return[4,_c(this.doDecodeSync())];case 6:return[4,Jd.sent()];case 7:return Jd.sent(),0==--ga?[3,8]:[3,5];case 8:return[3,10];case 9:if(!((Id=Jd.sent())instanceof Xa))throw Id;return[3,10];case 10:this.totalPos+=this.pos,Jd.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return Wh=Jd.sent(),Tl={error:Wh},[3,19];case 14:return Jd.trys.push([14,,17,18]),jc&&!jc.done&&(Fl=Hc.return)?[4,_c(Fl.call(Hc))]:[3,16];case 15:Jd.sent(),Jd.label=16;case 16:return[3,18];case 17:if(Tl)throw Tl.error;return[7];case 18:return[7];case 19:return[2]}})})},Ma.prototype.doDecodeSync=function(){e:for(;;){var _i=this.readHeadByte(),va=void 0;if(_i>=224)va=_i-256;else if(_i<192)if(_i<128)va=_i;else if(_i<144){if(0!=(ga=_i-128)){this.pushMapState(ga),this.complete();continue e}va={}}else if(_i<160){if(0!=(ga=_i-144)){this.pushArrayState(ga),this.complete();continue e}va=[]}else{var nc=_i-160;va=this.decodeUtf8String(nc,0)}else if(192===_i)va=null;else if(194===_i)va=!1;else if(195===_i)va=!0;else if(202===_i)va=this.readF32();else if(203===_i)va=this.readF64();else if(204===_i)va=this.readU8();else if(205===_i)va=this.readU16();else if(206===_i)va=this.readU32();else if(207===_i)va=this.readU64();else if(208===_i)va=this.readI8();else if(209===_i)va=this.readI16();else if(210===_i)va=this.readI32();else if(211===_i)va=this.readI64();else if(217===_i)nc=this.lookU8(),va=this.decodeUtf8String(nc,1);else if(218===_i)nc=this.lookU16(),va=this.decodeUtf8String(nc,2);else if(219===_i)nc=this.lookU32(),va=this.decodeUtf8String(nc,4);else if(220===_i){if(0!==(ga=this.readU16())){this.pushArrayState(ga),this.complete();continue e}va=[]}else if(221===_i){if(0!==(ga=this.readU32())){this.pushArrayState(ga),this.complete();continue e}va=[]}else if(222===_i){if(0!==(ga=this.readU16())){this.pushMapState(ga),this.complete();continue e}va={}}else if(223===_i){if(0!==(ga=this.readU32())){this.pushMapState(ga),this.complete();continue e}va={}}else if(196===_i){var ga=this.lookU8();va=this.decodeBinary(ga,1)}else if(197===_i)ga=this.lookU16(),va=this.decodeBinary(ga,2);else if(198===_i)ga=this.lookU32(),va=this.decodeBinary(ga,4);else if(212===_i)va=this.decodeExtension(1,0);else if(213===_i)va=this.decodeExtension(2,0);else if(214===_i)va=this.decodeExtension(4,0);else if(215===_i)va=this.decodeExtension(8,0);else if(216===_i)va=this.decodeExtension(16,0);else if(199===_i)ga=this.lookU8(),va=this.decodeExtension(ga,1);else if(200===_i)ga=this.lookU16(),va=this.decodeExtension(ga,2);else{if(201!==_i)throw new ua("Unrecognized type byte: "+Aa(_i));ga=this.lookU32(),va=this.decodeExtension(ga,4)}this.complete();for(var Hc=this.stack;Hc.length>0;){var jc=Hc[Hc.length-1];if(0===jc.type){if(jc.array[jc.position]=va,jc.position++,jc.position!==jc.size)continue e;Hc.pop(),va=jc.array}else{if(1===jc.type){if("string"!=(Al=typeof va)&&"number"!==Al)throw new ua("The type of key must be string or number but "+typeof va);if("__proto__"===va)throw new ua("The key __proto__ is not allowed");jc.key=va,jc.type=2;continue e}if(jc.map[jc.key]=va,jc.readCount++,jc.readCount!==jc.size){jc.key=null,jc.type=1;continue e}Hc.pop(),va=jc.map}}return va}var Al},Ma.prototype.readHeadByte=function(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte},Ma.prototype.complete=function(){this.headByte=-1},Ma.prototype.readArraySize=function(){var _i=this.readHeadByte();switch(_i){case 220:return this.readU16();case 221:return this.readU32();default:if(_i<160)return _i-144;throw new ua("Unrecognized array type byte: "+Aa(_i))}},Ma.prototype.pushMapState=function(_i){if(_i>this.maxMapLength)throw new ua("Max length exceeded: map length ("+_i+") > maxMapLengthLength ("+this.maxMapLength+")");this.stack.push({type:1,size:_i,key:null,readCount:0,map:{}})},Ma.prototype.pushArrayState=function(_i){if(_i>this.maxArrayLength)throw new ua("Max length exceeded: array length ("+_i+") > maxArrayLength ("+this.maxArrayLength+")");this.stack.push({type:0,size:_i,array:new Array(_i),position:0})},Ma.prototype.decodeUtf8String=function(_i,va){var nc;if(_i>this.maxStrLength)throw new ua("Max length exceeded: UTF-8 byte length ("+_i+") > maxStrLength ("+this.maxStrLength+")");if(this.bytes.byteLength<this.pos+va+_i)throw vl;var ga,Al,Wh,Hc=this.pos+va;return ga=this.stateIsMapKey()&&(null===(nc=this.keyDecoder)||void 0===nc?void 0:nc.canBeCached(_i))?this.keyDecoder.decode(this.bytes,Hc,_i):_i>ye?(Wh=this.bytes.subarray(Al=Hc,Al+_i),Z.decode(Wh)):K(this.bytes,Hc,_i),this.pos+=va+_i,ga},Ma.prototype.stateIsMapKey=function(){return this.stack.length>0&&1===this.stack[this.stack.length-1].type},Ma.prototype.decodeBinary=function(_i,va){if(_i>this.maxBinLength)throw new ua("Max length exceeded: bin length ("+_i+") > maxBinLength ("+this.maxBinLength+")");if(!this.hasRemaining(_i+va))throw vl;var nc=this.pos+va,ga=this.bytes.subarray(nc,nc+_i);return this.pos+=va+_i,ga},Ma.prototype.decodeExtension=function(_i,va){if(_i>this.maxExtLength)throw new ua("Max length exceeded: ext length ("+_i+") > maxExtLength ("+this.maxExtLength+")");var nc=this.view.getInt8(this.pos+va),ga=this.decodeBinary(_i,va+1);return this.extensionCodec.decode(ga,nc,this.context)},Ma.prototype.lookU8=function(){return this.view.getUint8(this.pos)},Ma.prototype.lookU16=function(){return this.view.getUint16(this.pos)},Ma.prototype.lookU32=function(){return this.view.getUint32(this.pos)},Ma.prototype.readU8=function(){var _i=this.view.getUint8(this.pos);return this.pos++,_i},Ma.prototype.readI8=function(){var _i=this.view.getInt8(this.pos);return this.pos++,_i},Ma.prototype.readU16=function(){var _i=this.view.getUint16(this.pos);return this.pos+=2,_i},Ma.prototype.readI16=function(){var _i=this.view.getInt16(this.pos);return this.pos+=2,_i},Ma.prototype.readU32=function(){var _i=this.view.getUint32(this.pos);return this.pos+=4,_i},Ma.prototype.readI32=function(){var _i=this.view.getInt32(this.pos);return this.pos+=4,_i},Ma.prototype.readU64=function(){var _i,va,nc=4294967296*(_i=this.view).getUint32(va=this.pos)+_i.getUint32(va+4);return this.pos+=8,nc},Ma.prototype.readI64=function(){var _i=v(this.view,this.pos);return this.pos+=8,_i},Ma.prototype.readF32=function(){var _i=this.view.getFloat32(this.pos);return this.pos+=4,_i},Ma.prototype.readF64=function(){var _i=this.view.getFloat64(this.pos);return this.pos+=8,_i},Ma}(),Rh={};function Cg(Ma,_i){return void 0===_i&&(_i=Rh),new ff(_i.extensionCodec,_i.context,_i.maxStrLength,_i.maxBinLength,_i.maxArrayLength,_i.maxMapLength,_i.maxExtLength).decode(Ma)}function cf(Ma,_i){return void 0===_i&&(_i=Rh),new ff(_i.extensionCodec,_i.context,_i.maxStrLength,_i.maxBinLength,_i.maxArrayLength,_i.maxMapLength,_i.maxExtLength).decodeMulti(Ma)}var Vp=function(Ma,_i){var va,nc,ga,Hc,jc={label:0,sent:function(){if(1&ga[0])throw ga[1];return ga[1]},trys:[],ops:[]};return Hc={next:Al(0),throw:Al(1),return:Al(2)},"function"==typeof Symbol&&(Hc[Symbol.iterator]=function(){return this}),Hc;function Al(Id){return function(Wh){return function(Tl){if(va)throw new TypeError("Generator is already executing.");for(;jc;)try{if(va=1,nc&&(ga=2&Tl[0]?nc.return:Tl[0]?nc.throw||((ga=nc.return)&&ga.call(nc),0):nc.next)&&!(ga=ga.call(nc,Tl[1])).done)return ga;switch(nc=0,ga&&(Tl=[2&Tl[0],ga.value]),Tl[0]){case 0:case 1:ga=Tl;break;case 4:return jc.label++,{value:Tl[1],done:!1};case 5:jc.label++,nc=Tl[1],Tl=[0];continue;case 7:Tl=jc.ops.pop(),jc.trys.pop();continue;default:if(!((ga=(ga=jc.trys).length>0&&ga[ga.length-1])||6!==Tl[0]&&2!==Tl[0])){jc=0;continue}if(3===Tl[0]&&(!ga||Tl[1]>ga[0]&&Tl[1]<ga[3])){jc.label=Tl[1];break}if(6===Tl[0]&&jc.label<ga[1]){jc.label=ga[1],ga=Tl;break}if(ga&&jc.label<ga[2]){jc.label=ga[2],jc.ops.push(Tl);break}ga[2]&&jc.ops.pop(),jc.trys.pop();continue}Tl=_i.call(Ma,jc)}catch(Fl){Tl=[6,Fl],nc=0}finally{va=ga=0}if(5&Tl[0])throw Tl[1];return{value:Tl[0]?Tl[1]:void 0,done:!0}}([Id,Wh])}}},_d=function(Ma){return this instanceof _d?(this.v=Ma,this):new _d(Ma)},Gp=function(Ma,_i,va){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var nc,ga=va.apply(Ma,_i||[]),Hc=[];return nc={},jc("next"),jc("throw"),jc("return"),nc[Symbol.asyncIterator]=function(){return this},nc;function jc(Fl){ga[Fl]&&(nc[Fl]=function(Jd){return new Promise(function(Pp,G0){Hc.push([Fl,Jd,Pp,G0])>1||Al(Fl,Jd)})})}function Al(Fl,Jd){try{(Pp=ga[Fl](Jd)).value instanceof _d?Promise.resolve(Pp.value.v).then(Id,Wh):Tl(Hc[0][2],Pp)}catch(G0){Tl(Hc[0][3],G0)}var Pp}function Id(Fl){Al("next",Fl)}function Wh(Fl){Al("throw",Fl)}function Tl(Fl,Jd){Fl(Jd),Hc.shift(),Hc.length&&Al(Hc[0][0],Hc[0][1])}};function Lh(Ma){if(null==Ma)throw new Error("Assertion Failure: value must not be null nor undefined")}function Op(Ma){return null!=Ma[Symbol.asyncIterator]?Ma:function(_i){return Gp(this,arguments,function(){var va,nc,Hc;return Vp(this,function(jc){switch(jc.label){case 0:va=_i.getReader(),jc.label=1;case 1:jc.trys.push([1,,9,10]),jc.label=2;case 2:return[4,_d(va.read())];case 3:return nc=jc.sent(),Hc=nc.value,nc.done?[4,_d(void 0)]:[3,5];case 4:return[2,jc.sent()];case 5:return Lh(Hc),[4,_d(Hc)];case 6:return[4,jc.sent()];case 7:return jc.sent(),[3,2];case 8:return[3,10];case 9:return va.releaseLock(),[7];case 10:return[2]}})})}(Ma)}function Uy(Ma,_i){return void 0===_i&&(_i=Rh),va=this,void 0,Hc=function(){var jc;return function(Al,Id){var Wh,Tl,Fl,Jd,Pp={label:0,sent:function(){if(1&Fl[0])throw Fl[1];return Fl[1]},trys:[],ops:[]};return Jd={next:G0(0),throw:G0(1),return:G0(2)},"function"==typeof Symbol&&(Jd[Symbol.iterator]=function(){return this}),Jd;function G0(f1){return function(gT){return function(N0){if(Wh)throw new TypeError("Generator is already executing.");for(;Pp;)try{if(Wh=1,Tl&&(Fl=2&N0[0]?Tl.return:N0[0]?Tl.throw||((Fl=Tl.return)&&Fl.call(Tl),0):Tl.next)&&!(Fl=Fl.call(Tl,N0[1])).done)return Fl;switch(Tl=0,Fl&&(N0=[2&N0[0],Fl.value]),N0[0]){case 0:case 1:Fl=N0;break;case 4:return Pp.label++,{value:N0[1],done:!1};case 5:Pp.label++,Tl=N0[1],N0=[0];continue;case 7:N0=Pp.ops.pop(),Pp.trys.pop();continue;default:if(!((Fl=(Fl=Pp.trys).length>0&&Fl[Fl.length-1])||6!==N0[0]&&2!==N0[0])){Pp=0;continue}if(3===N0[0]&&(!Fl||N0[1]>Fl[0]&&N0[1]<Fl[3])){Pp.label=N0[1];break}if(6===N0[0]&&Pp.label<Fl[1]){Pp.label=Fl[1],Fl=N0;break}if(Fl&&Pp.label<Fl[2]){Pp.label=Fl[2],Pp.ops.push(N0);break}Fl[2]&&Pp.ops.pop(),Pp.trys.pop();continue}N0=Id.call(Al,Pp)}catch(hR){N0=[6,hR],Tl=0}finally{Wh=Fl=0}if(5&N0[0])throw N0[1];return{value:N0[0]?N0[1]:void 0,done:!0}}([f1,gT])}}}(this,function(Al){return jc=Op(Ma),[2,new ff(_i.extensionCodec,_i.context,_i.maxStrLength,_i.maxBinLength,_i.maxArrayLength,_i.maxMapLength,_i.maxExtLength).decodeAsync(jc)]})},new((ga=void 0)||(ga=Promise))(function(jc,Al){function Id(Fl){try{Tl(Hc.next(Fl))}catch(Jd){Al(Jd)}}function Wh(Fl){try{Tl(Hc.throw(Fl))}catch(Jd){Al(Jd)}}function Tl(Fl){var Jd;Fl.done?jc(Fl.value):(Jd=Fl.value,Jd instanceof ga?Jd:new ga(function(Pp){Pp(Jd)})).then(Id,Wh)}Tl((Hc=Hc.apply(va,[])).next())});var va,ga,Hc}function M0(Ma,_i){void 0===_i&&(_i=Rh);var va=Op(Ma);return new ff(_i.extensionCodec,_i.context,_i.maxStrLength,_i.maxBinLength,_i.maxArrayLength,_i.maxMapLength,_i.maxExtLength).decodeArrayStream(va)}function ry(Ma,_i){void 0===_i&&(_i=Rh);var va=Op(Ma);return new ff(_i.extensionCodec,_i.context,_i.maxStrLength,_i.maxBinLength,_i.maxArrayLength,_i.maxMapLength,_i.maxExtLength).decodeStream(va)}function _j(Ma,_i){return void 0===_i&&(_i=Rh),ry(Ma,_i)}return c}()})(JAe),(0,Z_.exports)("Int8",function(e){return function(n,i,c){return e(this,n,i,c)}}),(0,Z_.exports)("Int16",function(e){return function(n,i,c){return e(this,n,i,c)}}),(0,Z_.exports)("Int32",function(e){return function(n,i,c){return e(this,n,i,c)}}),(0,Z_.exports)("Uint16",function(e){return function(n,i,c){return e(this,n,i,c)}}),(0,Z_.exports)("Uint32",function(e){return function(n,i,c){return e(this,n,i,c)}}),(0,Z_.exports)("Float64",function(e){return function(n,i,c){return e(this,n,i,c)}});const Tbe=()=>function(e){const n=window.atob("AGFzbQEAAAABMAlgA39/fwF/YAF/AGACf38AYAF/AX9gAn9/AX9gA39/fwBgBH9/f38AYAABf2AAAAI6AgNlbnYWZW1zY3JpcHRlbl9yZXNpemVfaGVhcAADA2VudhVlbXNjcmlwdGVuX21lbWNweV9iaWcAAAMjIggAAAAAAQEDAQEEBAQEAQEGAQYCBQUAAgAHAwEDAAIHAQMEBQFwAQYGBQYBAYACgAIGCQF/AUHQ48ACCweUAQoGbWVtb3J5AgARX193YXNtX2NhbGxfY3RvcnMAAhlfX2luZGlyZWN0X2Z1bmN0aW9uX3RhYmxlAQAGbWFsbG9jABwEZnJlZQAdEF9fZXJybm9fbG9jYXRpb24AGwx6bGliQ29tcHJlc3MAGglzdGFja1NhdmUAIQxzdGFja1Jlc3RvcmUAIgpzdGFja0FsbG9jACMJCwEAQQELBRgZDA0PCq6FAiIDAAELpQcBBH8gAEH//wNxIQMgAEEQdiEEQQEhACACQQFGBEAgAyABLQAAaiIAQfH/A2sgACAAQfD/A0sbIgAgBGoiA0EQdCIEQYCAPGogBCADQfD/A0sbIAByDwsgAQR/IAJBEE8EQAJAAkACQCACQa8rSwRAA0AgAkGwK2shAkHbAiEFIAEhAANAIAMgAC0AAGoiAyAEaiADIAAtAAFqIgNqIAMgAC0AAmoiA2ogAyAALQADaiIDaiADIAAtAARqIgNqIAMgAC0ABWoiA2ogAyAALQAGaiIDaiADIAAtAAdqIgNqIAMgAC0ACGoiA2ogAyAALQAJaiIDaiADIAAtAApqIgNqIAMgAC0AC2oiA2ogAyAALQAMaiIDaiADIAAtAA1qIgNqIAMgAC0ADmoiA2ogAyAALQAPaiIDaiEEIABBEGohACAFQQFrIgUNAAsgBEHx/wNwIQQgA0Hx/wNwIQMgAUGwK2ohASACQa8rSw0ACyACRQ0DIAJBEEkNAQsDQCADIAEtAABqIgAgBGogACABLQABaiIAaiAAIAEtAAJqIgBqIAAgAS0AA2oiAGogACABLQAEaiIAaiAAIAEtAAVqIgBqIAAgAS0ABmoiAGogACABLQAHaiIAaiAAIAEtAAhqIgBqIAAgAS0ACWoiAGogACABLQAKaiIAaiAAIAEtAAtqIgBqIAAgAS0ADGoiAGogACABLQANaiIAaiAAIAEtAA5qIgBqIAAgAS0AD2oiA2ohBCABQRBqIQEgAkEQayICQQ9LDQALIAJFDQELIAJBAWshBiACQQNxIgUEQCABIQADQCACQQFrIQIgAyAALQAAaiIDIARqIQQgAEEBaiIBIQAgBUEBayIFDQALCyAGQQNJDQADQCADIAEtAABqIgAgAS0AAWoiBSABLQACaiIGIAEtAANqIgMgBiAFIAAgBGpqamohBCABQQRqIQEgAkEEayICDQALCyAEQfH/A3AhBCADQfH/A3AhAwsgBEEQdCADcg8LAkAgAkUNACACQQFrIQYgAkEDcSIFBEAgASEAA0AgAkEBayECIAMgAC0AAGoiAyAEaiEEIABBAWoiASEAIAVBAWsiBQ0ACwsgBkEDSQ0AA0AgAyABLQAAaiIAIAEtAAFqIgUgAS0AAmoiBiABLQADaiIDIAYgBSAAIARqampqIQQgAUEEaiEBIAJBBGsiAg0ACwsgBEHx/wNwQRB0IANB8f8DayADIANB8P8DSxtyBSAACwsKACAAIAEgAhADC4UJAQJ/IAFFBEBBAA8LIABBf3MhAAJAIAJFDQAgAUEDcUUNACABLQAAIABB/wFxc0ECdEGACGooAgAgAEEIdnMhACACQQFrIgRBACABQQFqIgNBA3EbRQRAIAMhASAEIQIMAQsgAS0AASAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUECaiEDAkAgAkECayIERQ0AIANBA3FFDQAgAS0AAiAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUEDaiEDAkAgAkEDayIERQ0AIANBA3FFDQAgAS0AAyAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAkEEayECIAFBBGohAQwCCyADIQEgBCECDAELIAMhASAEIQILIAJBH0sEQANAIAEoAhwgASgCGCABKAIUIAEoAhAgASgCDCABKAIIIAEoAgQgASgCACAAcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAc3MiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAc3MiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAcyEAIAFBIGohASACQSBrIgJBH0sNAAsLIAJBA0sEQANAIAEoAgAgAHMiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzIQAgAUEEaiEBIAJBBGsiAkEDSw0ACwsCQCACRQ0AIAJBAXEEfyABLQAAIABB/wFxc0ECdEGACGooAgAgAEEIdnMhACABQQFqIQEgAkEBawUgAgshAyACQQFGDQADQCABLQABIAEtAAAgAEH/AXFzQQJ0QYAIaigCACAAQQh2cyIAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUECaiEBIANBAmsiAw0ACwsgAEF/cwsKACAAIAEgAhAFC9wEAQN/AkBByN8ALQAAQTFHDQAgAEUNACAAQQA2AhggACgCICIBRQRAIABBADYCKCAAQQE2AiBBASEBCyAAKAIkRQRAIABBAjYCJAsgACgCKEEBQcQtIAERAAAiAUUNACAAIAE2AhwgAUEPNgIwIAFBADYCHCABQQA2AhggAUEqNgIEIAEgADYCACABQQs2AlAgAUGAgAI2AiwgAUH//wE2AjQgAUGAEDYCTCABQQQ2AlggAUH/DzYCVCABIAAoAihBgIACQQIgACgCIBEAADYCOCABIAAoAiggASgCLEECIAAoAiARAAA2AkAgACgCKCABKAJMQQIgACgCIBEAACECIAFBADYCwC0gASACNgJEIAFBgAg2ApwtIAEgACgCKEGACEEEIAAoAiARAAAiAjYCCCABIAEoApwtIgNBAnQ2AgwCQAJAIAEoAjhFDQAgASgCQEUNACACRQ0AIAEoAkQNAQsgAUGaBTYCBCAAQbjfACgCADYCGCAAEAgPCyABQQA2AogBIAFBCTYChAEgAUEIOgAkIAEgAiADQQNsajYCmC0gASACIANBfnFqNgKkLSAAEAkNACAAKAIcIgAgACgCLEEBdDYCPCAAKAJEIgEgACgCTEEBdEECayIDakEAOwEAIAEgAxAgIABBADYCtC0gAEKAgICAIDcCdCAAQgA3AmggAEKAgICAIDcCXCAAQQA2AkggACAAKAKEAUEMbCIBQYTIAGovAQA2ApABIAAgAUGAyABqLwEANgKMASAAIAFBgsgAai8BADYCgAEgACABQYbIAGovAQA2AnwLC6kCAQN/AkAgAEUNACAAKAIgRQ0AIAAoAiQiA0UNACAAKAIcIgFFDQAgASgCACAARw0AAkACQCABKAIEIgJBOWsOOQECAgICAgICAgICAgECAgIBAgICAgICAgICAgICAgICAgIBAgICAgICAgICAgIBAgICAgICAgICAQALIAJBmgVGDQAgAkEqRw0BCwJ/An8CfyABKAIIIgIEQCAAKAIoIAIgAxECACAAKAIcIQELIAEoAkQiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAEoAkAiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAEoAjgiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAAoAiggASAAKAIkEQIAIABBADYCHAsLlgIBA39BfiECAkAgAEUNACAAKAIgRQ0AIAAoAiRFDQAgACgCHCIBRQ0AIAEoAgAgAEcNAAJAAkAgASgCBCIDQTlrDjkBAgICAgICAgICAgIBAgICAQICAgICAgICAgICAgICAgICAQICAgICAgICAgICAQICAgICAgICAgEACyADQZoFRg0AIANBKkcNAQsgAEECNgIsIABBADYCCCAAQgA3AhQgAUEANgIUIAEgASgCCDYCECABKAIYIgJBf0wEQCABQQAgAmsiAjYCGAsgAUE5QSpB8QAgAhsgAkECRhs2AgQgAAJ/IAJBAkYEQEEAQQBBABAGDAELQQBBAEEAEAQLNgIwQQAhAiABQQA2AiggARAQCyACC9wIAQt/IAAoAiwiB0GGAmshCyAAKAJ0IQUgByEBA0AgACgCPCAFayAAKAJsIghrIQYgASALaiAITQRAIAAoAjgiASABIAdqIAcgBmsQHxogACAAKAJwIAdrNgJwIAAgACgCbCAHayIINgJsIAAgACgCXCAHazYCXCAAKAJMIgRBAWshCiAAKAJEIARBAXRqIQMgACgCLCEBIARBA3EiAgRAA0AgA0ECayIDQQAgAy8BACIFIAFrIgkgBSAJSRs7AQAgBEEBayEEIAJBAWsiAg0ACwsgCkEDTwRAA0AgA0ECayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EEayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EGayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EIayIDQQAgAy8BACICIAFrIgUgAiAFSRs7AQAgBEEEayIEDQALCyABQQFrIQogACgCQCABQQF0aiEDIAEhBCABQQNxIgIEQANAIANBAmsiA0EAIAMvAQAiBSABayIJIAUgCUkbOwEAIARBAWshBCACQQFrIgINAAsLIApBA08EQANAIANBAmsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBBGsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBBmsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBCGsiA0EAIAMvAQAiAiABayIFIAIgBUkbOwEAIARBBGsiBA0ACwsgBiAHaiEGCwJAIAAoAgAiASgCBCIERQ0AIAAoAnQhAiAGIAQgBCAGSxsiAwRAIAAoAjghBSABIAQgA2s2AgQgBSAIaiACaiABKAIAIAMQHyEEAkACQAJAIAEoAhwoAhhBAWsOAgABAgsgASABKAIwIAQgAxAENgIwDAELIAEgASgCMCAEIAMQBjYCMAsgASABKAIAIANqNgIAIAEgASgCCCADajYCCCAAKAJ0IQILIAAgAiADaiIFNgJ0AkAgACgCtC0iAyAFakEDSQ0AIAAgACgCOCIJIAAoAmwgA2siAWoiBC0AACICNgJIIAAgACgCVCIIIAQtAAEgAiAAKAJYIgZ0c3EiBDYCSANAIANFDQEgACABIAlqLQACIAQgBnRzIAhxIgQ2AkggACgCQCAAKAI0IAFxQQF0aiAAKAJEIARBAXRqIgIvAQA7AQAgAiABOwEAIAAgA0EBayIDNgK0LSABQQFqIQEgAyAFakECSw0ACwsgBUGFAksNACAAKAIAKAIERQ0AIAAoAiwhAQwBCwsCQCAAKAI8IgQgACgCwC0iAU0NACAAKAJ0IAAoAmxqIgMgAUsEQCAAKAI4IANqIAQgA2siAUGCAiABQYICSRsiARAgIAAgASADajYCwC0PCyADQYICaiIDIAFNDQAgACgCOCABaiAEIAFrIgQgAyABayIBIAEgBEsbIgEQICAAIAAoAsAtIAFqNgLALQsLsSwBCn8CQCAARQ0AIAAoAiBFDQAgACgCJEUNACAAKAIcIgFFDQAgASgCACAARw0AAkACQCABKAIEIgNBOWsOOQECAgICAgICAgICAgECAgIBAgICAgICAgICAgICAgICAgIBAgICAgICAgICAgIBAgICAgICAgICAQALIANBmgVGDQAgA0EqRw0BCwJAAkAgACgCDEUNACAAKAIEIgIEQCAAKAIARQ0BCyADQZoFRw0BCyAAQbDfACgCADYCGA8LIAAoAhBFBEAgAEG83wAoAgA2AhgPCyABKAIoIQUgAUEDNgIoAkAgASgCFARAIAEQEwJAIAAoAhAiAyABKAIUIgQgAyAESRsiAkUNACAAKAIMIAEoAhAgAhAfGiAAIAAoAgwgAmo2AgwgASABKAIQIAJqNgIQIAAgACgCFCACajYCFCAAIAAoAhAgAmsiAzYCECABIAEoAhQgAmsiBDYCFCAEDQAgASABKAIINgIQQQAhBAsgAwRAIAEoAgQhAwwCCyABQX82AigPCyACDQAgBUEBdEF3QQAgBUEEShtqQQZIDQAgAEG83wAoAgA2AhgPCwJAAkACQAJAAn8CQAJAAkACQAJAAkAgA0EqRwRAIANBmgVHDQEgACgCBEUNAiAAQbzfACgCADYCGA8LIAEoAjBBDHRBgPABayEDQQAhAgJAIAEoAogBQQFKDQAgASgChAEiBUECSA0AQcAAIQIgBUEGSA0AQYABQcABIAVBBkYbIQILIAEgBEEBajYCFCABKAIIIARqIAIgA3IiAkEgciACIAEoAmwbIgJBCHY6AAAgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQR9wIAJyQR9zOgAAIAEoAmwEQCAAKAIwIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQRh2OgAAIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEQdjoAACAAKAIwIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQQh2OgAAIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAAAsgAEEAQQBBABAENgIwIAFB8QA2AgQgACgCHCICEBMCQCAAKAIQIgMgAigCFCIEIAMgBEkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQNBCABKAIEIQMLAkACQAJAAkACQAJAAkAgA0E5RgR/IABBAEEAQQAQBjYCMCABIAEoAhQiAkEBajYCFCACIAEoAghqQR86AAAgASABKAIUIgJBAWo2AhQgAiABKAIIakGLAToAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQg6AAAgASgCHCICDQIgASABKAIUIgJBAWo2AhQgAiABKAIIakEAOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBADoAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQA6AAAgASABKAIUIgJBAWo2AhQgAiABKAIIakEAOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBADoAAEECIQIgASgChAEiA0EJRwRAQQQgASgCiAFBAUpBAnQgA0ECSBshAgsgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBAzoAACABQfEANgIEIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQCyABKAIUDQEgASgCBAUgAwtBxQBrDiMCBgYGAwYGBgYGBgYGBgYGBgYGBgYGBAYGBgYGBgYGBgYGBQYLIAFBfzYCKA8LIAIoAiQhAyACKAIcIQQgAigCECEFIAIoAiwhBiACKAIAIQggASABKAIUIgdBAWo2AhRBAiECIAcgASgCCGogBkEAR0EBdCAIQQBHciAFQQBHQQJ0ciAEQQBHQQN0ciADQQBHQQR0cjoAACABKAIcKAIEIQMgASABKAIUIgRBAWo2AhQgBCABKAIIaiADOgAAIAEoAhwoAgQhAyABIAEoAhQiBEEBajYCFCAEIAEoAghqIANBCHY6AAAgASgCHC8BBiEDIAEgASgCFCIEQQFqNgIUIAQgASgCCGogAzoAACABKAIcLQAHIQMgASABKAIUIgRBAWo2AhQgBCABKAIIaiADOgAAIAEoAoQBIgNBCUcEQEEEIAEoAogBQQFKQQJ0IANBAkgbIQILIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAACABKAIcKAIMIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAEoAhwiAigCEAR/IAIoAhQhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAI6AAAgASgCHCgCFCECIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEIdjoAACABKAIcBSACCygCLARAIAAgACgCMCABKAIIIAEoAhQQBjYCMAsgAUHFADYCBCABQQA2AiALIAEoAhwiBCgCECIDBEAgASgCFCICIAQvARQgASgCICIGayIFaiABKAIMIgRLBEADQCABKAIIIAJqIAMgBmogBCACayIEEB8aIAEgASgCDCIDNgIUAkAgAiADTw0AIAEoAhwoAixFDQAgACAAKAIwIAEoAgggAmogAyACaxAGNgIwCyABIAEoAiAgBGo2AiAgACgCHCICEBMCQCAAKAIQIgMgAigCFCIGIAMgBkkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQEQCABQX82AigPCyABKAIgIQYgASgCHCgCECEDQQAhAiAFIARrIgUgASgCDCIESw0ACwsgASgCCCACaiADIAZqIAUQHxogASABKAIUIAVqIgM2AhQCQCACIANPDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCACaiADIAJrEAY2AjALIAFBADYCIAsgAUHJADYCBAsgASgCHCgCHARAIAEoAhQiAiEFA0ACQCACIAEoAgxHDQACQCACIAVNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQC0EAIQJBACEFIAEoAhRFDQAgAUF/NgIoDwsgASgCHCgCHCEDIAEgASgCICIEQQFqNgIgIAMgBGotAAAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAMEQCABKAIUIQIMAQsLAkAgASgCHCgCLEUNACABKAIUIgIgBU0NACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAFBADYCIAsgAUHbADYCBAsCQCABKAIcKAIkRQ0AIAEoAhQiAiEFA0ACQCACIAEoAgxHDQACQCACIAVNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQC0EAIQJBACEFIAEoAhRFDQAgAUF/NgIoDwsgASgCHCgCJCEDIAEgASgCICIEQQFqNgIgIAMgBGotAAAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAMEQCABKAIUIQIMAQsLIAEoAhwoAixFDQAgASgCFCICIAVNDQAgACAAKAIwIAEoAgggBWogAiAFaxAGNgIwCyABQecANgIECyABKAIcKAIsBEAgASgCDCABKAIUIgJBAmpJBEAgACgCHCICEBMCQCAAKAIQIgMgAigCFCIEIAMgBEkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQNBUEAIQILIAAoAjAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAAoAjAhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAJBCHY6AAAgAEEAQQBBABAGNgIwCyABQfEANgIEIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQCyABKAIURQ0AIAFBfzYCKA8LIAAoAgQNAQsgASgCdA0AIAEoAgRBmgVGDQgLIAEoAoQBIgJFBEAgAUEDEAwMBAsCQAJAIAEoAogBQQJrDgIAAQQLA0ACQAJAIAEoAnQNACABEAogASgCdA0AIAFBADYCtC0MAQsgAUEANgJgIAEoAjggASgCbGotAAAhAiABKAKkLSABKAKgLSIDQQF0akEAOwEAIAEgA0EBajYCoC0gAyABKAKYLWogAjoAACABIAJBAnRqQZQBaiICIAIvAQBBAWo7AQAgASABKAJ0QQFrNgJ0IAEgASgCbEEBaiICNgJsIAEoAqAtIAEoApwtQQFrRw0BIAEgASgCXCIEQQBOBH8gASgCOCAEagVBAAsgAiAEa0EAEBQgASABKAJsNgJcIAEoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALIAEoAgAoAhANAQwHCwsgASgCoC1FDQcgASABKAJcIgNBAE4EfyABKAI4IANqBUEACyABKAJsIANrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEEUNBQwHCwNAAkACQAJAIAEoAnQiAkGDAk8EQCABQQA2AmAMAQsgARAKIAEoAnQiAgRAIAFBADYCYCACQQJLDQEgASgCbCEDDAILIAFBADYCtC0gASgCoC1FDQogASABKAJcIgNBAE4EfyABKAI4IANqBUEACyABKAJsIANrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEEUNCAwKCyABKAJsIgNFBEBBACEDDAELIAEoAjggA2oiBkEBayIFLQAAIgQgBi0AAEcNACAEIAUtAAJHDQAgBCAFLQADRw0AIAZBggJqIQlBfyEIAkACQAJAAkACQAJAA0AgBiAIaiIFLQAEIARGBEAgBCAFLQAFRw0CIAQgBS0ABkcNAyAEIAUtAAdHDQQgBCAGIAhBCGoiCmoiBy0AAEcNByAEIAUtAAlHDQUgBCAFLQAKRw0GIAVBC2ohByAIQfYBSg0HIAohCCAEIActAABGDQEMBwsLIAVBBGohBwwFCyAFQQVqIQcMBAsgBUEGaiEHDAMLIAVBB2ohBwwCCyAFQQlqIQcMAQsgBUEKaiEHCyABIAIgByAJa0GCAmoiBCACIARJGyICNgJgIAJBA0kNACABKAKkLSABKAKgLSIDQQF0akEBOwEAIAEgA0EBajYCoC0gAyABKAKYLWogAkEDayICOgAAIAJB/wFxQYDNAGotAABBAnQgAWpBmAlqIgIgAi8BAEEBajsBACABQYDJAC0AAEECdGpBiBNqIgIgAi8BAEEBajsBACABKAJgIQIgAUEANgJgIAEgASgCdCACazYCdCABIAIgASgCbGoiAjYCbCABKAKgLSABKAKcLUEBa0cNAgwBCyABKAI4IANqLQAAIQIgASgCpC0gASgCoC0iA0EBdGpBADsBACABIANBAWo2AqAtIAMgASgCmC1qIAI6AAAgASACQQJ0akGUAWoiAiACLwEAQQFqOwEAIAEgASgCdEEBazYCdCABIAEoAmxBAWoiAjYCbCABKAKgLSABKAKcLUEBa0cNAQsgASABKAJcIgRBAE4EfyABKAI4IARqBUEACyACIARrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEA0ACwwECyABQX82AigPCyABQX82AigPCyABQQMgAkEMbEGIyABqKAIAEQQACyICQX5xQQJGBEAgAUGaBTYCBAsgAkF9cQ0BCyAAKAIQDQMgAUF/NgIoDwsgAkEBRw0BCyABQQBBAEEAEBIgASgCRCICIAEoAkxBAXRBAmsiA2pBADsBACACIAMQICABKAJ0RQRAIAFBADYCtC0gAUEANgJcIAFBADYCbAsgACgCHCICEBMCQCAAKAIQIgQgAigCFCIDIAMgBEsbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrIgQ2AhAgAiACKAIUIANrIgM2AhQgAw0AIAIgAigCCDYCEAsgBA0AIAFBfzYCKAsLC7YNAQt/IAAoAgAiBCgCBCEJQQEhCAJAIAQoAhAiAyAAKAK8LUEqakEDdSICSQ0AIAAoAiwiBSAAKAIMQQVrIgYgBSAGSRshCiABQQRHIQsDQCAKIAMgAmsiAyAAKAJsIAAoAlxrIgYgBCgCBGoiAkH//wMgAkH//wNJGyIFIAMgBUkbIgNLBEAgAiADRw0CIAFFDQIgCyADRXENAgsgAEEAQQAgAUEERiACIANGcSIHEBIgACgCFCAAKAIIakEEayADOgAAIAAoAhQgACgCCGpBA2sgA0EIdjoAACAAKAIUIAAoAghqQQJrIANBf3MiAjoAACAAKAIUIAAoAghqQQFrIAJBCHY6AAAgACgCACICKAIcIgQQEwJAIAIoAhAiBSAEKAIUIgwgBSAMSRsiBUUNACACKAIMIAQoAhAgBRAfGiACIAIoAgwgBWo2AgwgBCAEKAIQIAVqNgIQIAIgAigCFCAFajYCFCACIAIoAhAgBWs2AhAgBCAEKAIUIAVrIgI2AhQgAg0AIAQgBCgCCDYCEAsCfyAGBEAgACgCACgCDCAAKAI4IAAoAlxqIAMgBiADIAZJGyICEB8aIAAoAgAiBCAEKAIMIAJqNgIMIAQgBCgCECACazYCECAEIAQoAhQgAmo2AhQgACAAKAJcIAJqNgJcIAMgAmshAwsgAwsEQCAAKAIAIgIoAgwhBSADIAIoAgQiBiADIAZJGyIEBEAgAiAGIARrNgIEIAUgAigCACAEEB8hBQJAAkACQCACKAIcKAIYQQFrDgIAAQILIAIgAigCMCAFIAQQBDYCMAwBCyACIAIoAjAgBSAEEAY2AjALIAIgAigCACAEajYCACACIAIoAgggBGo2AgggACgCACICKAIMIQULIAIgAyAFajYCDCACIAIoAhAgA2s2AhAgAiACKAIUIANqNgIUCyAAKAIAIQQgBwRAQQAhCAwCCyAEKAIQIgMgACgCvC1BKmpBA3UiAk8NAAsLAkAgCSAEKAIEayIDRQRAIAAoAmwhAgwBCwJAIAAoAiwiAiADTQRAIABBAjYCsC0gACgCOCAEKAIAIAJrIAIQHxogACAAKAIsIgQ2AmwgBCECDAELAkAgACgCPCAAKAJsIgRrIANLDQAgACAEIAJrIgQ2AmwgACgCOCIFIAIgBWogBBAfGiAAKAKwLSICQQFLDQAgACACQQFqNgKwLQsgACgCOCAAKAJsaiAAKAIAKAIAIANrIAMQHxogACAAKAJsIANqIgI2AmwgACgCLCEECyAAIAI2AlwgACAEIAAoArQtIgVrIgQgAyADIARLGyAFajYCtC0LIAIgACgCwC1LBEAgACACNgLALQtBAyEDAkAgCEUNACAAKAIAIgQoAgQhAwJAAkAgAUF7cUUNACADDQBBASEDIAIgACgCXEYNAiAAKAI8IAJBf3NqIQVBACEDDAELIAMgACgCPCACQX9zaiIFTQ0AIAAoAlwiByAAKAIsIgZIDQAgACACIAZrIgM2AmwgACAHIAZrNgJcIAAoAjgiAiACIAZqIAMQHxogACgCsC0iA0EBTQRAIAAgA0EBajYCsC0LIAAoAiwgBWohBSAAKAIAIgQoAgQhAwsCQCADIAUgAyAFSRsiAkUEQCAAKAJsIQMMAQsgACgCbCEFIAAoAjghBiAEIAMgAms2AgQgBSAGaiAEKAIAIAIQHyEDAkACQAJAIAQoAhwoAhhBAWsOAgABAgsgBCAEKAIwIAMgAhAENgIwDAELIAQgBCgCMCADIAIQBjYCMAsgBCAEKAIAIAJqNgIAIAQgBCgCCCACajYCCCAAIAAoAmwgAmoiAzYCbAsgAyAAKALALUsEQCAAIAM2AsAtCyADIAAoAlwiBmsiBCAAKAIsIgMgACgCDCAAKAK8LUEqakEDdWsiAkH//wMgAkH//wNJGyICIAIgA0sbSQRAQQAhAyABRQ0BIAFBBEYgBEEAR3JFDQEgAiAESQ0BIAAoAgAoAgQNAQtBACEFIAAgACgCOCAGaiACIAQgAiAESRsiAwJ/IAFBBEYEQCAAKAIAKAIERSACIARPcSEFCyAFCxASIAAgACgCXCADajYCXCAAKAIAIgAoAhwiAxATAkAgACgCECICIAMoAhQiBCACIARJGyICRQ0AIAAoAgwgAygCECACEB8aIAAgACgCDCACajYCDCADIAMoAhAgAmo2AhAgACAAKAIUIAJqNgIUIAAgACgCECACazYCECADIAMoAhQgAmsiADYCFCAADQAgAyADKAIINgIQC0ECQQAgBRshAwsgAwu5CwENfwJAA0ACQAJAIAAoAnRBhQJNBEAgABAKIAAoAnQhAgJAIAENACACQYYCTw0AQQAPCyACRQ0EIAJBA0kNAQsgACAAKAJUIAAoAmwiAiAAKAI4ai0AAiAAKAJIIAAoAlh0c3EiAzYCSCAAKAJAIAIgACgCNHFBAXRqIAAoAkQgA0EBdGoiBC8BACIDOwEAIAQgAjsBACADRQ0AIAAoAixBhgJrIAIgA2tJDQAgACAAIAMQDiICNgJgDAELIAAoAmAhAgsCQCACQQNPBEAgACgCpC0gACgCoC0iA0EBdGogACgCbCAAKAJwayIEOwEAIAAgA0EBajYCoC0gAyAAKAKYLWogAkEDayICOgAAIAJB/wFxQYDNAGotAABBAnQgAGpBmAlqIgIgAi8BAEEBajsBACAAIARBAWtB//8DcSICIAJBB3ZBgAJqIAJBgAJJG0GAyQBqLQAAQQJ0akGIE2oiAiACLwEAQQFqOwEAIAAgACgCdCAAKAJgIgJrIgM2AnQgACgCnC1BAWshBiAAKAKgLSEHAkAgA0EDSQ0AIAIgACgCgAFLDQAgACACQQFrIgM2AmAgACgCSCEEIAAoAmwhAiAAKAI0IQggACgCQCEJIAAoAkQhCiAAKAJUIQsgACgCOCEMIAAoAlghDQNAIAAgAiIFQQFqIgI2AmwgACAFIAxqLQADIAQgDXRzIAtxIgQ2AkggCSACIAhxQQF0aiAKIARBAXRqIg4vAQA7AQAgDiACOwEAIAAgA0EBayIDNgJgIAMNAAsgACAFQQJqIgI2AmwgBiAHRw0DDAILIABBADYCYCAAIAAoAmwgAmoiAjYCbCAAIAAoAjggAmoiAy0AACIENgJIIAAgACgCVCADLQABIAQgACgCWHRzcTYCSCAGIAdHDQIMAQsgACgCOCAAKAJsai0AACECIAAoAqQtIAAoAqAtIgNBAXRqQQA7AQAgACADQQFqNgKgLSADIAAoApgtaiACOgAAIAAgAkECdGpBlAFqIgIgAi8BAEEBajsBACAAIAAoAnRBAWs2AnQgACAAKAJsQQFqIgI2AmwgACgCoC0gACgCnC1BAWtHDQELQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQCyAAKAIAKAIQDQALQQAPCyAAIAAoAmwiAkECIAJBAkkbNgK0LSABQQRGBEBBACEDIAAgACgCXCIEQQBOBH8gACgCOCAEagUgAwsgAiAEa0EBEBQgACAAKAJsNgJcIAAoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALQQNBAiAAKAIAKAIQGw8LAkAgACgCoC1FDQBBACEDIAAgACgCXCIEQQBOBH8gACgCOCAEagUgAwsgAiAEa0EAEBQgACAAKAJsNgJcIAAoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALIAAoAgAoAhANAEEADwtBAQukBAEQfyAAKAJ8IgMgA0ECdiAAKAJ4IgQgACgCjAFJGyEJQQAgACgCbCIDIAAoAixrQYYCaiICIAIgA0sbIQwgACgCdCIHIAAoApABIgIgAiAHSxshDSAAKAI4Ig4gA2oiBUGCAmohDyAEIAVqIgMtAAAhCiADQQFrLQAAIQsgACgCNCEQIAAoAkAhEQNAAkACQCABIA5qIgMgBGoiAi0AACAKRw0AIAJBAWstAAAgC0cNACADLQAAIAUtAABHDQBBAiEGIAMtAAEgBS0AAUcNAAJAAkACQAJAAkACQAJAA0AgBSAGaiICLQABIAMtAANHDQYgAi0AAiADLQAERw0FIAItAAMgAy0ABUcNBCACLQAEIAMtAAZHDQMgAi0ABSADLQAHRw0CIAItAAYgAy0ACEcNASACLQAHIAMtAAlGBEAgBkH5AUshCCAFIAZBCGoiBmohAiAIDQggAy0ACiEIIANBCGohAyACLQAAIAhGDQEMCAsLIAJBB2ohAgwGCyACQQZqIQIMBQsgAkEFaiECDAQLIAJBBGohAgwDCyACQQNqIQIMAgsgAkECaiECDAELIAJBAWohAgsgAiAPayICQYICaiIDIARMDQAgACABNgJwIAMgDU4EQCADIQQMAgsgAyAFai0AACEKIAIgBWotAIECIQsgAyEECyAJQQFrIglFDQAgDCARIAEgEHFBAXRqLwEAIgFJDQELCyAHIAQgBCAHSxsL3Q4BB38DQAJAAkACQCAAKAJ0QYUCSw0AIAAQCiAAKAJ0IQICQCABDQAgAkGGAk8NAEEADwsgAkUNAiACQQJLDQAgACAAKAJgIgI2AnggACAAKAJwNgJkQQIhAyAAQQI2AmAMAQtBAiEDIAAgACgCVCAAKAJsIgIgACgCOGotAAIgACgCSCAAKAJYdHNxIgQ2AkggACgCQCACIAAoAjRxQQF0aiAAKAJEIARBAXRqIgUvAQAiBDsBACAFIAI7AQAgACAAKAJgIgI2AnggACAAKAJwNgJkIABBAjYCYCAERQ0AAkAgAiAAKAKAAU8NACAAKAIsQYYCayAAKAJsIARrSQ0AIAAgACAEEA4iAzYCYCADQQVLDQAgACgCiAFBAUcEQCADQQNHDQFBAyEDIAAoAmwgACgCcGtBgSBJDQELQQIhAyAAQQI2AmALIAAoAnghAgsCQCACQQNJDQAgAiADSQ0AIAAoAnQhBCAAKAKkLSAAKAKgLSIDQQF0aiAAKAJsIgUgACgCZEF/c2oiBjsBACAAIANBAWo2AqAtIAMgACgCmC1qIAJBA2siAjoAACACQf8BcUGAzQBqLQAAQQJ0IABqQZgJaiICIAIvAQBBAWo7AQAgACAGQQFrQf//A3EiAiACQQd2QYACaiACQYACSRtBgMkAai0AAEECdGpBiBNqIgIgAi8BAEEBajsBACAAIAAoAngiAkECayIDNgJ4IAAgACgCdCACa0EBajYCdCAEIAVqQQNrIQUgACgCnC1BAWshByAAKAJsIQIgACgCoC0hCANAIAAgAiIEQQFqIgI2AmwgAiAFTQRAIAAgACgCVCAEIAAoAjhqLQADIAAoAkggACgCWHRzcSIGNgJIIAAoAkAgACgCNCACcUEBdGogACgCRCAGQQF0aiIGLwEAOwEAIAYgAjsBAAsgACADQQFrIgM2AnggAw0ACyAAQQI2AmAgAEEANgJoIAAgBEECaiICNgJsIAcgCEcNAkEAIQMgACAAKAJcIgRBAE4EfyAAKAI4IARqBSADCyACIARrQQAQFCAAIAAoAmw2AlwgACgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgACgCACgCEA0CQQAPCyAAKAJoBEAgACgCbCAAKAI4akEBay0AACECIAAoAqQtIAAoAqAtIgNBAXRqQQA7AQAgACADQQFqNgKgLSADIAAoApgtaiACOgAAIAAgAkECdGpBlAFqIgIgAi8BAEEBajsBAAJAIAAoAqAtIAAoApwtQQFrRw0AQQAhAyAAIAAoAlwiAkEATgR/IAAoAjggAmoFIAMLIAAoAmwgAmtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgACAAKAJsQQFqNgJsIAAgACgCdEEBazYCdCAAKAIAKAIQDQJBAA8FIABBATYCaCAAIAAoAmxBAWo2AmwgACAAKAJ0QQFrNgJ0DAILAAsLIAAoAmgEQCAAKAJsIAAoAjhqQQFrLQAAIQIgACgCpC0gACgCoC0iA0EBdGpBADsBACAAIANBAWo2AqAtIAMgACgCmC1qIAI6AAAgACACQQJ0akGUAWoiAiACLwEAQQFqOwEAIABBADYCaAsgACAAKAJsIgJBAiACQQJJGzYCtC0gAUEERgRAQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBARAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQC0EDQQIgACgCACgCEBsPCwJAIAAoAqAtRQ0AQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQCyAAKAIAKAIQDQBBAA8LQQELYQAgAEEANgK8LSAAQQA7AbgtIABBuBZqQajPADYCACAAIABB/BRqNgKwFiAAQawWakGUzwA2AgAgACAAQYgTajYCpBYgAEGgFmpBgM8ANgIAIAAgAEGUAWo2ApgWIAAQEQvwBAEDfyAAQZQBaiECA0AgAiABQQJ0IgNqQQA7AQAgAiADQQRyakEAOwEAIAFBAmoiAUGeAkcNAAsgAEEAOwH8FCAAQQA7AYgTIABBxBVqQQA7AQAgAEHAFWpBADsBACAAQbwVakEAOwEAIABBuBVqQQA7AQAgAEG0FWpBADsBACAAQbAVakEAOwEAIABBrBVqQQA7AQAgAEGoFWpBADsBACAAQaQVakEAOwEAIABBoBVqQQA7AQAgAEGcFWpBADsBACAAQZgVakEAOwEAIABBlBVqQQA7AQAgAEGQFWpBADsBACAAQYwVakEAOwEAIABBiBVqQQA7AQAgAEGEFWpBADsBACAAQYAVakEAOwEAIABB/BNqQQA7AQAgAEH4E2pBADsBACAAQfQTakEAOwEAIABB8BNqQQA7AQAgAEHsE2pBADsBACAAQegTakEAOwEAIABB5BNqQQA7AQAgAEHgE2pBADsBACAAQdwTakEAOwEAIABB2BNqQQA7AQAgAEHUE2pBADsBACAAQdATakEAOwEAIABBzBNqQQA7AQAgAEHIE2pBADsBACAAQcQTakEAOwEAIABBwBNqQQA7AQAgAEG8E2pBADsBACAAQbgTakEAOwEAIABBtBNqQQA7AQAgAEGwE2pBADsBACAAQawTakEAOwEAIABBqBNqQQA7AQAgAEGkE2pBADsBACAAQaATakEAOwEAIABBnBNqQQA7AQAgAEGYE2pBADsBACAAQZQTakEAOwEAIABBkBNqQQA7AQAgAEGME2pBADsBACAAQgA3AqwtIABBlAlqQQE7AQAgAEEANgKoLSAAQQA2AqAtC7IDAQJ/IAAgAC8BuC0gA0H//wNxIgUgACgCvC0iBHRyIgM7AbgtAkACQAJ/IARBDk4EQCAAIAAoAhQiBEEBajYCFCAEIAAoAghqIAM6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAAQbktai0AADoAACAAIAVBECAAKAK8LSIEa3YiAzsBuC0gBEENawwBCyAEQQNqCyIEQQlOBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiADOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGohBCAAQbktai0AACEDDAELIARBAUgNASAAIAAoAhQiBEEBajYCFCAEIAAoAghqIQQLIAQgAzoAAAsgAEEANgK8LSAAQQA7AbgtIAAgACgCFCIDQQFqNgIUIAMgACgCCGogAjoAACAAIAAoAhQiA0EBajYCFCADIAAoAghqIAJBCHY6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiACQX9zIgM6AAAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiADQQh2OgAAIAAoAgggACgCFGogASACEB8aIAAgACgCFCACajYCFAusAQEBfwJAIAACfyAAKAK8LSIBQRBGBEAgACAAKAIUIgFBAWo2AhQgASAAKAIIaiAALQC4LToAACAAIAAoAhQiAUEBajYCFCABIAAoAghqIABBuS1qLQAAOgAAIABBADsBuC1BAAwBCyABQQhIDQEgACAAKAIUIgFBAWo2AhQgASAAKAIIaiAALQC4LToAACAAIABBuS1qLQAAOwG4LSAAKAK8LUEIaws2ArwtCwuhEwENfwJ/AkACQAJAIAAoAoQBQQFOBEAgACgCACIGKAIsQQJHDQNB/4D/n38hBANAAkAgBEEBcUUNACAAIAVBAnRqLwGUAUUNAEEAIQQMBAsCQCAEQQJxRQ0AIAAgBUECdEEEcmovAZQBRQ0AQQAhBAwECyAEQQJ2IQQgBUECaiIFQSBHDQALDAELIAJBBWoiBQwDCwJAIAAvAbgBDQAgAC8BvAENACAALwHIAQ0AQSAhBQNAIAAgBUECdCIEai8BlAENASAAIARBBHJqLwGUAQ0BIAAgBEEIcmovAZQBDQEgACAEQQxyai8BlAENAUEAIQQgBUEEaiIFQYACRw0ACwwBC0EBIQQLIAYgBDYCLAsgACAAQZgWahAVIAAgAEGkFmoQFSAALwGWASEEIAAgAEGcFmooAgAiCkECdGpB//8DOwGaASAKQQBOBEBBB0GKASAEGyEJQQRBAyAEGyELIABBwBVqIQ4gAEHEFWohDyAAQbwVaiEQQX8hDANAIAQhBSAAIAgiDUEBaiIIQQJ0ai8BlgEhBAJAAkAgB0EBaiIGIAlODQAgBCAFRw0AIAYhBwwBCwJ/IAYgC0gEQCAAIAVBAnRqQfwUaiIHLwEAIAZqDAELIAUEQCAFIAxHBEAgACAFQQJ0akH8FGoiBiAGLwEAQQFqOwEACyAQIgcvAQBBAWoMAQsgB0EJTARAIA4iBy8BAEEBagwBCyAPIgcvAQBBAWoLIQYgByAGOwEAQQAhBwJ/IARFBEBBAyELQYoBDAELQQNBBCAEIAVGIgYbIQtBBkEHIAYbCyEJIAUhDAsgCiANRw0ACwsgAEGKE2ovAQAhBCAAIABBqBZqKAIAIgpBAnRqQY4TakH//wM7AQBBACEHIApBAE4EQEEHQYoBIAQbIQlBBEEDIAQbIQsgAEHAFWohDiAAQcQVaiEPIABBvBVqIRBBfyEMQQAhCANAIAQhBSAAIAgiDUEBaiIIQQJ0akGKE2ovAQAhBAJAAkAgB0EBaiIGIAlODQAgBCAFRw0AIAYhBwwBCwJ/IAYgC0gEQCAAIAVBAnRqQfwUaiIHLwEAIAZqDAELIAUEQCAFIAxHBEAgACAFQQJ0akH8FGoiBiAGLwEAQQFqOwEACyAQIgcvAQBBAWoMAQsgB0EJTARAIA4iBy8BAEEBagwBCyAPIgcvAQBBAWoLIQYgByAGOwEAQQAhBwJ/IARFBEBBAyELQYoBDAELQQNBBCAEIAVGIgYbIQtBBkEHIAYbCyEJIAUhDAsgCiANRw0ACwsgACAAQbAWahAVIAAgACgCqC0Cf0ESIABBuhVqLwEADQAaQREgAEGCFWovAQANABpBECAAQbYVai8BAA0AGkEPIABBhhVqLwEADQAaQQ4gAEGyFWovAQANABpBDSAAQYoVai8BAA0AGkEMIABBrhVqLwEADQAaQQsgAEGOFWovAQANABpBCiAAQaoVai8BAA0AGkEJIABBkhVqLwEADQAaQQggAEGmFWovAQANABpBByAAQZYVai8BAA0AGkEGIABBohVqLwEADQAaQQUgAEGaFWovAQANABpBBCAAQZ4Vai8BAA0AGkEDQQIgAEH+FGovAQAbCyIIQQNsaiIEQRFqNgKoLSAEQRtqQQN2IgQgACgCrC1BCmpBA3YiBSAEIAVJGwshBAJAAkAgAUUNACACQQRqIARLDQAgACABIAIgAxASDAELIAAoArwtIQYCQCAEIAVHBEAgACgCiAFBBEcNAQsgACAALwG4LSADQQJqQf//A3EiBCAGdHIiBTsBuC0gAAJ/IAZBDk4EQCAAIAAoAhQiBkEBajYCFCAGIAAoAghqIAU6AAAgACAAKAIUIgVBAWo2AhQgBSAAKAIIaiAAQbktai0AADoAACAAIARBECAAKAK8LSIFa3Y7AbgtIAVBDWsMAQsgBkEDags2ArwtIABBwM8AQcDYABAWDAELIAAvAbgtIANBBGpB//8DcSIHIAZ0ciEFAkAgBkEOTgRAIAAgBTsBuC0gACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAFOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAEG5LWotAAA6AAAgACgCvC0iBUENayEEIAdBECAFa3YhBQwBCyAGQQNqIQQLIAAgBDYCvC0gAEGcFmooAgAiCkGA/gNqQf//A3EiByAEdCEGIABBqBZqKAIAIQkCfyAEQQxOBEAgACAFIAZyIgQ7AbgtIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBDoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIABBuS1qLQAAOgAAIAAoArwtIgVBC2shBCAHQRAgBWt2DAELIARBBWohBCAFIAZyCyEFIAAgBDYCvC0gCUH//wNxIgcgBHQhBgJ/IARBDE4EQCAAIAUgBnIiBDsBuC0gACAAKAIUIgVBAWo2AhQgBSAAKAIIaiAEOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAEG5LWotAAA6AAAgACgCvC0iBUELayEEIAdBECAFa3YMAQsgBEEFaiEEIAUgBnILIQUgACAENgK8LSAIQf3/A2pB//8DcSIHIAR0IQYCfyAEQQ1OBEAgACAFIAZyIgQ7AbgtIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBDoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIABBuS1qLQAAOgAAIAAoArwtIgVBDGshBCAHQRAgBWt2DAELIARBBGohBCAFIAZyCyEGIAAgBDYCvC1BACEFIABBuS1qIQ0DQCAAIAYgACAFQZDcAGotAABBAnRqQf4Uai8BACIHIAR0ciIGOwG4LSAAAn8gBEEOTgRAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogBjoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIA0tAAA6AAAgACAHQRAgACgCvC0iBGt2IgY7AbgtIARBDWsMAQsgBEEDagsiBDYCvC0gBSAIRyEHIAVBAWohBSAHDQALIAAgAEGUAWoiBCAKEBcgACAAQYgTaiIFIAkQFyAAIAQgBRAWCyAAEBEgAwRAAkACfyAAKAK8LSIEQQlOBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAALQC4LToAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIQQgAEG5LWotAAAMAQsgBEEBSA0BIAAgACgCFCIEQQFqNgIUIAQgACgCCGohBCAALQC4LQshBSAEIAU6AAALIABBADYCvC0gAEEAOwG4LQsLsRUBFX8jAEEgayEKIAEoAgAhCSABKAIIIgIoAgAhBSACKAIMIQ0gAEKAgICA0McANwLQKEF/IRACQCANQQBKBEBBACECA0ACQCAJIAJBAnRqIgMvAQAEQCAAIAAoAtAoQQFqIgM2AtAoIAAgA0ECdGpB3BZqIAI2AgAgACACakHYKGpBADoAACACIRAMAQsgA0EAOwECCyACQQFqIgIgDUcNAAsgACgC0CgiBEEBSg0BCwNAIAAgBEEBaiICNgLQKCAAIAJBAnRqQdwWaiAQQQFqIgNBACAQQQJIIgQbIgI2AgAgCSACQQJ0IgdqQQE7AQAgACACakHYKGpBADoAACAAIAAoAqgtQQFrNgKoLSAFBEAgACAAKAKsLSAFIAdqLwECazYCrC0LIAMgECAEGyEQIAAoAtAoIgRBAkgNAAsLIAEgEDYCBCAEQQF2IQgDQCAAIAhBAnRqQdwWaigCACELAkAgCCICQQF0IgMgBEoNACAAIAtqQdgoaiEPIAkgC0ECdGohBiAIIQUDQAJAIAMgBE4EQCADIQIMAQsgCSAAQdwWaiICIANBAXIiBEECdGooAgAiDkECdGovAQAiByAJIAIgA0ECdGooAgAiDEECdGovAQAiAk8EQCACIAdHBEAgAyECDAILIAMhAiAAQdgoaiIDIA5qLQAAIAMgDGotAABLDQELIAQhAgsgBi8BACIEIAkgACACQQJ0akHcFmooAgAiA0ECdGovAQAiB0kEQCAFIQIMAgsCQCAEIAdHDQAgDy0AACAAIANqQdgoai0AAEsNACAFIQIMAgsgACAFQQJ0akHcFmogAzYCACACIQUgAkEBdCIDIAAoAtAoIgRMDQALCyAAIAJBAnRqQdwWaiALNgIAIAhBAk4EQCAIQQFrIQggACgC0CghBAwBCwsgACgC0CghAwNAIA0hCCAAIANBAWsiBDYC0CggACgC4BYhCyAAIAAgA0ECdGpB3BZqKAIAIg02AuAWQQEhAgJAIANBA0gNACAAIA1qQdgoaiEPQQIhAyAJIA1BAnRqIQZBASEFA0ACQCADIAROBEAgAyECDAELIAkgAEHcFmoiAiADQQFyIgRBAnRqKAIAIg5BAnRqLwEAIgcgCSACIANBAnRqKAIAIgxBAnRqLwEAIgJPBEAgAiAHRwRAIAMhAgwCCyADIQIgAEHYKGoiAyAOai0AACADIAxqLQAASw0BCyAEIQILIAYvAQAiBCAJIAAgAkECdGpB3BZqKAIAIgNBAnRqLwEAIgdJBEAgBSECDAILAkAgBCAHRw0AIA8tAAAgACADakHYKGotAABLDQAgBSECDAILIAAgBUECdGpB3BZqIAM2AgAgAiEFIAJBAXQiAyAAKALQKCIETA0ACwtBAiEDIABB3BZqIgYgAkECdGogDTYCACAAIAAoAtQoQQFrIgQ2AtQoIAAoAuAWIQIgBiAEQQJ0aiALNgIAIAAgACgC1ChBAWsiBDYC1CggBiAEQQJ0aiACNgIAIAkgCEECdGoiDiAJIAJBAnRqIgQvAQAgCSALQQJ0aiIFLwEAajsBACAAQdgoaiIMIAhqIg8gAiAMai0AACICIAsgDGotAAAiByACIAdLG0EBajoAACAEIAg7AQIgBSAIOwECIAAgCDYC4BZBASEFQQEhAgJAIAAoAtAoIgRBAkgNAANAAn8gAyADIARODQAaIAkgBiADQQFyIgRBAnRqKAIAIgtBAnRqLwEAIgIgCSAGIANBAnRqKAIAIg1BAnRqLwEAIgdPBEAgAyACIAdHDQEaIAMgCyAMai0AACAMIA1qLQAASw0BGgsgBAshAiAOLwEAIgQgCSAAIAJBAnRqQdwWaigCACIDQQJ0ai8BACIHSQRAIAUhAgwCCwJAIAQgB0cNACAPLQAAIAAgA2pB2ChqLQAASw0AIAUhAgwCCyAAIAVBAnRqQdwWaiADNgIAIAIhBSACQQF0IgMgACgC0CgiBEwNAAsLIAhBAWohDSAAIAJBAnRqQdwWaiAINgIAIAAoAtAoIgNBAUoNAAsgACAAKALUKEEBayICNgLUKCAAQdwWaiIDIAJBAnRqIAAoAuAWNgIAIAEoAgQhByABKAIIIgIoAhAhBiACKAIIIREgAigCBCETIAIoAgAhEiABKAIAIQwgAEHUFmoiAUIANwEAIABBzBZqIhRCADcBACAAQcQWaiIVQgA3AQAgAEG8FmoiFkIANwEAQQAhCCAMIAMgACgC1ChBAnRqKAIAQQJ0akEAOwECAkAgACgC1CgiAkG7BEoNACACQQFqIQJBACEOA0AgDCAAIAJBAnRqQdwWaigCACIEQQJ0Ig1qIgUgDCAFLwECQQJ0ai8BAiIDQQFqIAYgAyAGSBsiDzsBAiADIAZOIQMCQCAEIAdKDQAgACAPQQF0akG8FmoiCyALLwEAQQFqOwEAQQAhCyAEIBFOBEAgEyAEIBFrQQJ0aigCACELCyAAIAAoAqgtIAUvAQAiBCALIA9qbGo2AqgtIBJFDQAgACAAKAKsLSALIA0gEmovAQJqIARsajYCrC0LIAMgDmohDiACQQFqIgJBvQRHDQALIA5FDQAgACAGQQF0akG8FmohDwNAIAYhAgNAIAAgAiIDQQFrIgJBAXRqQbwWaiIELwEAIgVFDQALIAQgBUEBazsBACAAIANBAXRqQbwWaiICIAIvAQBBAmo7AQAgDyAPLwEAQQFrIgI7AQAgDkECSiEDIA5BAmshDiADDQALIAZFDQBBvQQhBQNAIAJB//8DcSEDIAUhAgNAIAMEQCAAIAJBAWsiAkECdGpB3BZqKAIAIgQgB0oNASAMIARBAnRqIgQvAQIiBSAGRwRAIAAgACgCqC0gBC8BACAGIAVrbGo2AqgtIAQgBjsBAgsgA0EBayEDIAIhBQwBCwsgBkEBayIGRQ0BIAAgBkEBdGpBvBZqLwEAIQIMAAsACyAKIBYvAQBBAXQiAjsBAiAKIAIgAEG+FmovAQBqQQF0IgI7AQQgCiACIABBwBZqLwEAakEBdCICOwEGIAogAiAAQcIWai8BAGpBAXQiAjsBCCAKIAIgFS8BAGpBAXQiAjsBCiAKIAIgAEHGFmovAQBqQQF0IgI7AQwgCiACIABByBZqLwEAakEBdCICOwEOIAogAiAAQcoWai8BAGpBAXQiAjsBECAKIAIgFC8BAGpBAXQiAjsBEiAKIAIgAEHOFmovAQBqQQF0IgI7ARQgCiACIABB0BZqLwEAakEBdCICOwEWIAogAiAAQdIWai8BAGpBAXQiAjsBGCAKIAEvAQAgAmpBAXQiAjsBGiAKIABB1hZqLwEAIAJqQQF0IgI7ARwgCiACIABB2BZqLwEAakEBdDsBHiAQQQBOBEADQCAJIAhBAnRqIgcvAQIiBARAIAogBEEBdGoiACAALwEAIgBBAWo7AQAgBEEDcSEDQQAhAiAEQQFrQQNPBEAgBEH8/wNxIQUDQCAAQQN2QQFxIABBAnZBAXEgAEECcSACIABBAXFyQQJ0cnJBAXRyIgRBAXQhAiAAQQR2IQAgBUEEayIFDQALCyADBEADQCACIABBAXFyIgRBAXQhAiAAQQF2IQAgA0EBayIDDQALCyAHIAQ7AQALIAggEEchACAIQQFqIQggAA0ACwsL2QgBCn8CQCAAKAKgLUUEQCAAKAK8LSEDDAELIABBuS1qIQgDQCAEQQFqIQogACgCmC0gBGotAAAhBQJAIAACfyAAKAKkLSAEQQF0ai8BACIHRQRAIAEgBUECdGoiAy8BAiEEIAAgAC8BuC0gAy8BACIFIAAoArwtIgN0ciIHOwG4LUEQIARrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAHOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIAMgBGpBEGsMAgsgAyAEagwBCyAFQYDNAGotAAAiC0ECdCIJQYAIciABaiIDLwEGIQQgACAALwG4LSADLwEEIgwgACgCvC0iBnRyIgM7AbgtIAACf0EQIARrIAZIBEAgACAAKAIUIgZBAWo2AhQgBiAAKAIIaiADOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAxBECAAKAK8LSIGa3YiAzsBuC0gBCAGakEQawwBCyAEIAZqCyIENgK8LSALQQhrQRNNBEAgACADIAUgCUGw3ABqKAIAa0H//wNxIgYgBHRyIgM7AbgtIAACf0EQIAlBwNkAaigCACIFayAESARAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAzoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIAgtAAA6AAAgACAGQRAgACgCvC0iBGt2IgM7AbgtIAQgBWpBEGsMAQsgBCAFagsiBDYCvC0LIAIgB0EBayIFIAVBB3ZBgAJqIAVBgAJJG0GAyQBqLQAAIgtBAnQiCWoiBi8BAiEHIAAgAyAGLwEAIgwgBHRyIgY7AbgtIAACf0EQIAdrIARIBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAGOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogCC0AADoAACAAIAxBECAAKAK8LSIEa3YiBjsBuC0gBCAHakEQawwBCyAEIAdqCyIDNgK8LSALQQRJDQEgACAGIAUgCUGw3QBqKAIAa0H//wNxIgUgA3RyIgc7AbgtQRAgCUHA2gBqKAIAIgRrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAHOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIAMgBGpBEGsMAQsgAyAEagsiAzYCvC0LIAoiBCAAKAKgLUkNAAsLIAFBgghqLwEAIQQgACAALwG4LSABLwGACCIKIAN0ciIFOwG4LUEQIARrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAFOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogAEG5LWotAAA6AAAgACAKQRAgACgCvC0iA2t2OwG4LSAAIAMgBGpBEGs2ArwtDwsgACADIARqNgK8LQuXCwEMfyACQQBOBEBBBEEDIAEvAQIiChshBkEHQYoBIAobIQMgAEG5LWohCEF/IQcDQCAKIQkgASALIgxBAWoiC0ECdGovAQIhCgJAAkAgBUEBaiIEIANODQAgCSAKRw0AIAQhBQwBCwJAIAQgBkgEQCAAIAlBAnRqIgVB/BRqIQ0gBUH+FGohDiAAKAK8LSEFA0AgDi8BACEDIAAgAC8BuC0gDS8BACIGIAV0ciIHOwG4LSAAAn9BECADayAFSARAIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBzoAACAAIAAoAhQiBUEBajYCFCAFIAAoAghqIAgtAAA6AAAgACAGQRAgACgCvC0iBWt2OwG4LSADIAVqQRBrDAELIAMgBWoLIgU2ArwtIARBAWsiBA0ACwwBCyAAAn8gCQRAAkAgByAJRgRAIAAoArwtIQMgBCEFDAELIAAgCUECdGoiBEH+FGovAQAhAyAAIAAvAbgtIARB/BRqLwEAIgYgACgCvC0iBHRyIgc7AbgtIAACf0EQIANrIARIBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAHOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogCC0AADoAACAAIAZBECAAKAK8LSIEa3Y7AbgtIAMgBGpBEGsMAQsgAyAEagsiAzYCvC0LIAAvAbgtIAAvAbwVIgcgA3RyIQQCQEEQIAAvAb4VIgZrIANIBEAgACAEOwG4LSAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAYgACgCvC0iBGpBEGshAyAHQRAgBGt2IQQMAQsgAyAGaiEDCyAAIAM2ArwtIAAgBCAFQf3/A2pB//8DcSIFIAN0ciIEOwG4LSADQQ9OBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAEOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIANBDmsMAgsgA0ECagwBCyAFQQlMBEAgAC8BuC0gAC8BwBUiByAAKAK8LSIDdHIhBAJAQRAgAC8BwhUiBmsgA0gEQCAAIAQ7AbgtIAAgACgCFCIDQQFqNgIUIAMgACgCCGogBDoAACAAIAAoAhQiA0EBajYCFCADIAAoAghqIAgtAAA6AAAgBiAAKAK8LSIEakEQayEDIAdBECAEa3YhBAwBCyADIAZqIQMLIAAgAzYCvC0gACAEIAVB/v8DakH//wNxIgUgA3RyIgQ7AbgtIANBDk4EQCAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAAgBUEQIAAoArwtIgNrdjsBuC0gA0ENawwCCyADQQNqDAELIAAvAbgtIAAvAcQVIgcgACgCvC0iA3RyIQQCQEEQIAAvAcYVIgZrIANIBEAgACAEOwG4LSAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAYgACgCvC0iBGpBEGshAyAHQRAgBGt2IQQMAQsgAyAGaiEDCyAAIAM2ArwtIAAgBCAFQfb/A2pB//8DcSIFIAN0ciIEOwG4LSADQQpOBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAEOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIANBCWsMAQsgA0EHags2ArwtC0EAIQUCfyAKRQRAQYoBIQNBAwwBC0EGQQcgCSAKRiIEGyEDQQNBBCAEGwshBiAJIQcLIAIgDEcNAAsLCwkAIAEgAmwQHAsGACABEB0LXwEBfyMAQUBqIgMkACADQQA2AjAgA0IANwMoIAMgADYCCCADIAI2AhQgAyABNgIMIAMgAUEDbDYCGCADQQhqEAcgA0EIahALIANBCGoQCCADKAIcIQEgA0FAayQAIAELBgBB1N8AC6QuAQx/IwBBEGsiDCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB9AFNBEBB2N8AKAIAIgZBECAAQQtqQXhxIABBC0kbIgRBA3YiAXYiAEEDcQRAIABBf3NBAXEgAWoiAkEDdCIDQYjgAGooAgAiAUEIaiEAAkAgASgCCCIEIANBgOAAaiIDRgRAQdjfACAGQX4gAndxNgIADAELIAQgAzYCDCADIAQ2AggLIAEgAkEDdCICQQNyNgIEIAEgAmoiASABKAIEQQFyNgIEDA0LIARB4N8AKAIAIghNDQEgAARAAkAgACABdEECIAF0IgBBACAAa3JxIgBBACAAa3FBAWsiACAAQQx2QRBxIgB2IgFBBXZBCHEiAiAAciABIAJ2IgBBAnZBBHEiAXIgACABdiIAQQF2QQJxIgFyIAAgAXYiAEEBdkEBcSIBciAAIAF2aiICQQN0IgNBiOAAaigCACIBKAIIIgAgA0GA4ABqIgNGBEBB2N8AIAZBfiACd3EiBjYCAAwBCyAAIAM2AgwgAyAANgIICyABQQhqIQAgASAEQQNyNgIEIAEgBGoiAyACQQN0IgUgBGsiAkEBcjYCBCABIAVqIAI2AgAgCARAIAhBA3YiBUEDdEGA4ABqIQRB7N8AKAIAIQECfyAGQQEgBXQiBXFFBEBB2N8AIAUgBnI2AgAgBAwBCyAEKAIICyEFIAQgATYCCCAFIAE2AgwgASAENgIMIAEgBTYCCAtB7N8AIAM2AgBB4N8AIAI2AgAMDQtB3N8AKAIAIglFDQEgCUEAIAlrcUEBayIAIABBDHZBEHEiAHYiAUEFdkEIcSICIAByIAEgAnYiAEECdkEEcSIBciAAIAF2IgBBAXZBAnEiAXIgACABdiIAQQF2QQFxIgFyIAAgAXZqQQJ0QYjiAGooAgAiAygCBEF4cSAEayEBIAMhAgNAAkAgAigCECIARQRAIAIoAhQiAEUNAQsgACgCBEF4cSAEayICIAEgASACSyICGyEBIAAgAyACGyEDIAAhAgwBCwsgAyAEaiILIANNDQIgAygCGCEKIAMgAygCDCIFRwRAIAMoAggiAEHo3wAoAgBJGiAAIAU2AgwgBSAANgIIDAwLIANBFGoiAigCACIARQRAIAMoAhAiAEUNBCADQRBqIQILA0AgAiEHIAAiBUEUaiICKAIAIgANACAFQRBqIQIgBSgCECIADQALIAdBADYCAAwLC0F/IQQgAEG/f0sNACAAQQtqIgBBeHEhBEHc3wAoAgAiCEUNAEEfIQcgBEH///8HTQRAIABBCHYiACAAQYD+P2pBEHZBCHEiAHQiASABQYDgH2pBEHZBBHEiAXQiAiACQYCAD2pBEHZBAnEiAnRBD3YgACABciACcmsiAEEBdCAEIABBFWp2QQFxckEcaiEHC0EAIARrIQECQAJAAkAgB0ECdEGI4gBqKAIAIgJFBEBBACEADAELQQAhACAEQQBBGSAHQQF2ayAHQR9GG3QhAwNAAkAgAigCBEF4cSAEayIGIAFPDQAgAiEFIAYiAQ0AQQAhASACIQAMAwsgACACKAIUIgYgBiACIANBHXZBBHFqKAIQIgJGGyAAIAYbIQAgA0EBdCEDIAINAAsLIAAgBXJFBEBBAiAHdCIAQQAgAGtyIAhxIgBFDQMgAEEAIABrcUEBayIAIABBDHZBEHEiAHYiAkEFdkEIcSIDIAByIAIgA3YiAEECdkEEcSICciAAIAJ2IgBBAXZBAnEiAnIgACACdiIAQQF2QQFxIgJyIAAgAnZqQQJ0QYjiAGooAgAhAAsgAEUNAQsDQCAAKAIEQXhxIARrIgYgAUkhAyAGIAEgAxshASAAIAUgAxshBSAAKAIQIgIEfyACBSAAKAIUCyIADQALCyAFRQ0AIAFB4N8AKAIAIARrTw0AIAQgBWoiByAFTQ0BIAUoAhghCSAFIAUoAgwiA0cEQCAFKAIIIgBB6N8AKAIASRogACADNgIMIAMgADYCCAwKCyAFQRRqIgIoAgAiAEUEQCAFKAIQIgBFDQQgBUEQaiECCwNAIAIhBiAAIgNBFGoiAigCACIADQAgA0EQaiECIAMoAhAiAA0ACyAGQQA2AgAMCQsgBEHg3wAoAgAiAE0EQEHs3wAoAgAhAQJAIAAgBGsiAkEQTwRAQeDfACACNgIAQezfACABIARqIgM2AgAgAyACQQFyNgIEIAAgAWogAjYCACABIARBA3I2AgQMAQtB7N8AQQA2AgBB4N8AQQA2AgAgASAAQQNyNgIEIAAgAWoiACAAKAIEQQFyNgIECyABQQhqIQAMCwsgBEHk3wAoAgAiA0kEQEHk3wAgAyAEayIBNgIAQfDfAEHw3wAoAgAiACAEaiICNgIAIAIgAUEBcjYCBCAAIARBA3I2AgQgAEEIaiEADAsLQQAhACAEQS9qIggCf0Gw4wAoAgAEQEG44wAoAgAMAQtBvOMAQn83AgBBtOMAQoCggICAgAQ3AgBBsOMAIAxBDGpBcHFB2KrVqgVzNgIAQcTjAEEANgIAQZTjAEEANgIAQYAgCyIBaiIGQQAgAWsiB3EiBSAETQ0KQZDjACgCACIBBEBBiOMAKAIAIgIgBWoiCSACTQ0LIAEgCUkNCwtBlOMALQAAQQRxDQUCQAJAQfDfACgCACIBBEBBmOMAIQADQCABIAAoAgAiAk8EQCACIAAoAgRqIAFLDQMLIAAoAggiAA0ACwtBABAeIgNBf0YNBiAFIQZBtOMAKAIAIgBBAWsiASADcQRAIAUgA2sgASADakEAIABrcWohBgsgBCAGTw0GIAZB/v///wdLDQZBkOMAKAIAIgAEQEGI4wAoAgAiASAGaiICIAFNDQcgACACSQ0HCyAGEB4iACADRw0BDAgLIAYgA2sgB3EiBkH+////B0sNBSAGEB4iAyAAKAIAIAAoAgRqRg0EIAMhAAsCQCAEQTBqIAZNDQAgAEF/Rg0AQbjjACgCACIBIAggBmtqQQAgAWtxIgFB/v///wdLBEAgACEDDAgLIAEQHkF/RwRAIAEgBmohBiAAIQMMCAtBACAGaxAeGgwFCyAAIQMgAEF/Rw0GDAQLAAtBACEFDAcLQQAhAwwFCyADQX9HDQILQZTjAEGU4wAoAgBBBHI2AgALIAVB/v///wdLDQEgBRAeIgNBABAeIgBPDQEgA0F/Rg0BIABBf0YNASAAIANrIgYgBEEoak0NAQtBiOMAQYjjACgCACAGaiIANgIAQYzjACgCACAASQRAQYzjACAANgIACwJAAkACQEHw3wAoAgAiAQRAQZjjACEAA0AgAyAAKAIAIgIgACgCBCIFakYNAiAAKAIIIgANAAsMAgtB6N8AKAIAIgBBACAAIANNG0UEQEHo3wAgAzYCAAtBACEAQZzjACAGNgIAQZjjACADNgIAQfjfAEF/NgIAQfzfAEGw4wAoAgA2AgBBpOMAQQA2AgADQCAAQQN0IgFBiOAAaiABQYDgAGoiAjYCACABQYzgAGogAjYCACAAQQFqIgBBIEcNAAtB5N8AIAZBKGsiAEF4IANrQQdxQQAgA0EIakEHcRsiAWsiAjYCAEHw3wAgASADaiIBNgIAIAEgAkEBcjYCBCAAIANqQSg2AgRB9N8AQcDjACgCADYCAAwCCyABIANPDQAgASACSQ0AIAAoAgxBCHENACAAIAUgBmo2AgRB8N8AIAFBeCABa0EHcUEAIAFBCGpBB3EbIgBqIgI2AgBB5N8AQeTfACgCACAGaiIDIABrIgA2AgAgAiAAQQFyNgIEIAEgA2pBKDYCBEH03wBBwOMAKAIANgIADAELQejfACgCACADSwRAQejfACADNgIACyADIAZqIQJBmOMAIQACQAJAAkACQAJAAkADQCACIAAoAgBHBEAgACgCCCIADQEMAgsLIAAtAAxBCHFFDQELQZjjACEAA0AgASAAKAIAIgJPBEAgAiAAKAIEaiICIAFLDQMLIAAoAgghAAwACwALIAAgAzYCACAAIAAoAgQgBmo2AgQgA0F4IANrQQdxQQAgA0EIakEHcRtqIgcgBEEDcjYCBCACQXggAmtBB3FBACACQQhqQQdxG2oiBiAHayAEayECIAQgB2ohBCABIAZGBEBB8N8AIAQ2AgBB5N8AQeTfACgCACACaiIANgIAIAQgAEEBcjYCBAwDCyAGQezfACgCAEYEQEHs3wAgBDYCAEHg3wBB4N8AKAIAIAJqIgA2AgAgBCAAQQFyNgIEIAAgBGogADYCAAwDCyAGKAIEIgBBA3FBAUYEQCAAQXhxIQgCQCAAQf8BTQRAIAYoAggiASAAQQN2IgVBA3RBgOAAakYaIAEgBigCDCIARgRAQdjfAEHY3wAoAgBBfiAFd3E2AgAMAgsgASAANgIMIAAgATYCCAwBCyAGKAIYIQkCQCAGIAYoAgwiA0cEQCAGKAIIIgAgAzYCDCADIAA2AggMAQsCQCAGQRRqIgAoAgAiAQ0AIAZBEGoiACgCACIBDQBBACEDDAELA0AgACEFIAEiA0EUaiIAKAIAIgENACADQRBqIQAgAygCECIBDQALIAVBADYCAAsgCUUNAAJAIAYgBigCHCIBQQJ0QYjiAGoiACgCAEYEQCAAIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiABd3E2AgAMAgsgCUEQQRQgCSgCECAGRhtqIAM2AgAgA0UNAQsgAyAJNgIYIAYoAhAiAARAIAMgADYCECAAIAM2AhgLIAYoAhQiAEUNACADIAA2AhQgACADNgIYCyAGIAhqIQYgAiAIaiECCyAGIAYoAgRBfnE2AgQgBCACQQFyNgIEIAIgBGogAjYCACACQf8BTQRAIAJBA3YiAUEDdEGA4ABqIQACf0HY3wAoAgAiAkEBIAF0IgFxRQRAQdjfACABIAJyNgIAIAAMAQsgACgCCAshASAAIAQ2AgggASAENgIMIAQgADYCDCAEIAE2AggMAwtBHyEAIAJB////B00EQCACQQh2IgAgAEGA/j9qQRB2QQhxIgB0IgEgAUGA4B9qQRB2QQRxIgF0IgMgA0GAgA9qQRB2QQJxIgN0QQ92IAAgAXIgA3JrIgBBAXQgAiAAQRVqdkEBcXJBHGohAAsgBCAANgIcIARCADcCECAAQQJ0QYjiAGohAQJAQdzfACgCACIDQQEgAHQiBXFFBEBB3N8AIAMgBXI2AgAgASAENgIAIAQgATYCGAwBCyACQQBBGSAAQQF2ayAAQR9GG3QhACABKAIAIQMDQCADIgEoAgRBeHEgAkYNAyAAQR12IQMgAEEBdCEAIAEgA0EEcWpBEGoiBSgCACIDDQALIAUgBDYCACAEIAE2AhgLIAQgBDYCDCAEIAQ2AggMAgtB5N8AIAZBKGsiAEF4IANrQQdxQQAgA0EIakEHcRsiBWsiBzYCAEHw3wAgAyAFaiIFNgIAIAUgB0EBcjYCBCAAIANqQSg2AgRB9N8AQcDjACgCADYCACABIAJBJyACa0EHcUEAIAJBJ2tBB3EbakEvayIAIAAgAUEQakkbIgVBGzYCBCAFQaDjACkCADcCECAFQZjjACkCADcCCEGg4wAgBUEIajYCAEGc4wAgBjYCAEGY4wAgAzYCAEGk4wBBADYCACAFQRhqIQADQCAAQQc2AgQgAEEIaiEDIABBBGohACACIANLDQALIAEgBUYNAyAFIAUoAgRBfnE2AgQgASAFIAFrIgZBAXI2AgQgBSAGNgIAIAZB/wFNBEAgBkEDdiICQQN0QYDgAGohAAJ/QdjfACgCACIDQQEgAnQiAnFFBEBB2N8AIAIgA3I2AgAgAAwBCyAAKAIICyECIAAgATYCCCACIAE2AgwgASAANgIMIAEgAjYCCAwEC0EfIQAgAUIANwIQIAZB////B00EQCAGQQh2IgAgAEGA/j9qQRB2QQhxIgB0IgIgAkGA4B9qQRB2QQRxIgJ0IgMgA0GAgA9qQRB2QQJxIgN0QQ92IAAgAnIgA3JrIgBBAXQgBiAAQRVqdkEBcXJBHGohAAsgASAANgIcIABBAnRBiOIAaiECAkBB3N8AKAIAIgNBASAAdCIFcUUEQEHc3wAgAyAFcjYCACACIAE2AgAgASACNgIYDAELIAZBAEEZIABBAXZrIABBH0YbdCEAIAIoAgAhAwNAIAMiAigCBEF4cSAGRg0EIABBHXYhAyAAQQF0IQAgAiADQQRxakEQaiIFKAIAIgMNAAsgBSABNgIAIAEgAjYCGAsgASABNgIMIAEgATYCCAwDCyABKAIIIgAgBDYCDCABIAQ2AgggBEEANgIYIAQgATYCDCAEIAA2AggLIAdBCGohAAwFCyACKAIIIgAgATYCDCACIAE2AgggAUEANgIYIAEgAjYCDCABIAA2AggLQeTfACgCACIAIARNDQBB5N8AIAAgBGsiATYCAEHw3wBB8N8AKAIAIgAgBGoiAjYCACACIAFBAXI2AgQgACAEQQNyNgIEIABBCGohAAwDC0HU3wBBMDYCAEEAIQAMAgsCQCAJRQ0AAkAgBSgCHCICQQJ0QYjiAGoiACgCACAFRgRAIAAgAzYCACADDQFB3N8AIAhBfiACd3EiCDYCAAwCCyAJQRBBFCAJKAIQIAVGG2ogAzYCACADRQ0BCyADIAk2AhggBSgCECIABEAgAyAANgIQIAAgAzYCGAsgBSgCFCIARQ0AIAMgADYCFCAAIAM2AhgLAkAgAUEPTQRAIAUgASAEaiIAQQNyNgIEIAAgBWoiACAAKAIEQQFyNgIEDAELIAUgBEEDcjYCBCAHIAFBAXI2AgQgASAHaiABNgIAIAFB/wFNBEAgAUEDdiIBQQN0QYDgAGohAAJ/QdjfACgCACICQQEgAXQiAXFFBEBB2N8AIAEgAnI2AgAgAAwBCyAAKAIICyEBIAAgBzYCCCABIAc2AgwgByAANgIMIAcgATYCCAwBC0EfIQAgAUH///8HTQRAIAFBCHYiACAAQYD+P2pBEHZBCHEiAHQiAiACQYDgH2pBEHZBBHEiAnQiBCAEQYCAD2pBEHZBAnEiBHRBD3YgACACciAEcmsiAEEBdCABIABBFWp2QQFxckEcaiEACyAHIAA2AhwgB0IANwIQIABBAnRBiOIAaiECAkACQCAIQQEgAHQiBHFFBEBB3N8AIAQgCHI2AgAgAiAHNgIAIAcgAjYCGAwBCyABQQBBGSAAQQF2ayAAQR9GG3QhACACKAIAIQQDQCAEIgIoAgRBeHEgAUYNAiAAQR12IQQgAEEBdCEAIAIgBEEEcWpBEGoiAygCACIEDQALIAMgBzYCACAHIAI2AhgLIAcgBzYCDCAHIAc2AggMAQsgAigCCCIAIAc2AgwgAiAHNgIIIAdBADYCGCAHIAI2AgwgByAANgIICyAFQQhqIQAMAQsCQCAKRQ0AAkAgAygCHCICQQJ0QYjiAGoiACgCACADRgRAIAAgBTYCACAFDQFB3N8AIAlBfiACd3E2AgAMAgsgCkEQQRQgCigCECADRhtqIAU2AgAgBUUNAQsgBSAKNgIYIAMoAhAiAARAIAUgADYCECAAIAU2AhgLIAMoAhQiAEUNACAFIAA2AhQgACAFNgIYCwJAIAFBD00EQCADIAEgBGoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAwBCyADIARBA3I2AgQgCyABQQFyNgIEIAEgC2ogATYCACAIBEAgCEEDdiIEQQN0QYDgAGohAkHs3wAoAgAhAAJ/QQEgBHQiBCAGcUUEQEHY3wAgBCAGcjYCACACDAELIAIoAggLIQQgAiAANgIIIAQgADYCDCAAIAI2AgwgACAENgIIC0Hs3wAgCzYCAEHg3wAgATYCAAsgA0EIaiEACyAMQRBqJAAgAAvMDAEHfwJAIABFDQAgAEEIayICIABBBGsoAgAiAUF4cSIAaiEFAkAgAUEBcQ0AIAFBA3FFDQEgAiACKAIAIgFrIgJB6N8AKAIASQ0BIAAgAWohACACQezfACgCAEcEQCABQf8BTQRAIAIoAggiBCABQQN2IgdBA3RBgOAAakYaIAQgAigCDCIBRgRAQdjfAEHY3wAoAgBBfiAHd3E2AgAMAwsgBCABNgIMIAEgBDYCCAwCCyACKAIYIQYCQCACIAIoAgwiA0cEQCACKAIIIgEgAzYCDCADIAE2AggMAQsCQCACQRRqIgEoAgAiBA0AIAJBEGoiASgCACIEDQBBACEDDAELA0AgASEHIAQiA0EUaiIBKAIAIgQNACADQRBqIQEgAygCECIEDQALIAdBADYCAAsgBkUNAQJAIAIgAigCHCIEQQJ0QYjiAGoiASgCAEYEQCABIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiAEd3E2AgAMAwsgBkEQQRQgBigCECACRhtqIAM2AgAgA0UNAgsgAyAGNgIYIAIoAhAiAQRAIAMgATYCECABIAM2AhgLIAIoAhQiAUUNASADIAE2AhQgASADNgIYDAELIAUoAgQiAUEDcUEDRw0AQeDfACAANgIAIAUgAUF+cTYCBCACIABBAXI2AgQgACACaiAANgIADwsgAiAFTw0AIAUoAgQiAUEBcUUNAAJAIAFBAnFFBEAgBUHw3wAoAgBGBEBB8N8AIAI2AgBB5N8AQeTfACgCACAAaiIANgIAIAIgAEEBcjYCBCACQezfACgCAEcNA0Hg3wBBADYCAEHs3wBBADYCAA8LIAVB7N8AKAIARgRAQezfACACNgIAQeDfAEHg3wAoAgAgAGoiADYCACACIABBAXI2AgQgACACaiAANgIADwsgAUF4cSAAaiEAAkAgAUH/AU0EQCAFKAIIIgQgAUEDdiIHQQN0QYDgAGpGGiAEIAUoAgwiAUYEQEHY3wBB2N8AKAIAQX4gB3dxNgIADAILIAQgATYCDCABIAQ2AggMAQsgBSgCGCEGAkAgBSAFKAIMIgNHBEAgBSgCCCIBQejfACgCAEkaIAEgAzYCDCADIAE2AggMAQsCQCAFQRRqIgEoAgAiBA0AIAVBEGoiASgCACIEDQBBACEDDAELA0AgASEHIAQiA0EUaiIBKAIAIgQNACADQRBqIQEgAygCECIEDQALIAdBADYCAAsgBkUNAAJAIAUgBSgCHCIEQQJ0QYjiAGoiASgCAEYEQCABIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiAEd3E2AgAMAgsgBkEQQRQgBigCECAFRhtqIAM2AgAgA0UNAQsgAyAGNgIYIAUoAhAiAQRAIAMgATYCECABIAM2AhgLIAUoAhQiAUUNACADIAE2AhQgASADNgIYCyACIABBAXI2AgQgACACaiAANgIAIAJB7N8AKAIARw0BQeDfACAANgIADwsgBSABQX5xNgIEIAIgAEEBcjYCBCAAIAJqIAA2AgALIABB/wFNBEAgAEEDdiIBQQN0QYDgAGohAAJ/QdjfACgCACIEQQEgAXQiAXFFBEBB2N8AIAEgBHI2AgAgAAwBCyAAKAIICyEBIAAgAjYCCCABIAI2AgwgAiAANgIMIAIgATYCCA8LQR8hASACQgA3AhAgAEH///8HTQRAIABBCHYiASABQYD+P2pBEHZBCHEiAXQiBCAEQYDgH2pBEHZBBHEiBHQiAyADQYCAD2pBEHZBAnEiA3RBD3YgASAEciADcmsiAUEBdCAAIAFBFWp2QQFxckEcaiEBCyACIAE2AhwgAUECdEGI4gBqIQQCQAJAAkBB3N8AKAIAIgNBASABdCIFcUUEQEHc3wAgAyAFcjYCACAEIAI2AgAgAiAENgIYDAELIABBAEEZIAFBAXZrIAFBH0YbdCEBIAQoAgAhAwNAIAMiBCgCBEF4cSAARg0CIAFBHXYhAyABQQF0IQEgBCADQQRxakEQaiIFKAIAIgMNAAsgBSACNgIAIAIgBDYCGAsgAiACNgIMIAIgAjYCCAwBCyAEKAIIIgAgAjYCDCAEIAI2AgggAkEANgIYIAIgBDYCDCACIAA2AggLQfjfAEH43wAoAgBBAWsiAkF/IAIbNgIACwtVAQJ/QdDfACgCACIBIABBA2pBfHEiAmohAAJAIAJBAU5BACAAIAFNGw0APwBBEHQgAEkEQCAAEABFDQELQdDfACAANgIAIAEPC0HU3wBBMDYCAEF/C4IEAQN/IAJBgARPBEAgACABIAIQARogAA8LIAAgAmohAwJAIAAgAXNBA3FFBEACQCACQQFIBEAgACECDAELIABBA3FFBEAgACECDAELIAAhAgNAIAIgAS0AADoAACABQQFqIQEgAkEBaiICIANPDQEgAkEDcQ0ACwsCQCADQXxxIgRBwABJDQAgAiAEQUBqIgVLDQADQCACIAEoAgA2AgAgAiABKAIENgIEIAIgASgCCDYCCCACIAEoAgw2AgwgAiABKAIQNgIQIAIgASgCFDYCFCACIAEoAhg2AhggAiABKAIcNgIcIAIgASgCIDYCICACIAEoAiQ2AiQgAiABKAIoNgIoIAIgASgCLDYCLCACIAEoAjA2AjAgAiABKAI0NgI0IAIgASgCODYCOCACIAEoAjw2AjwgAUFAayEBIAJBQGsiAiAFTQ0ACwsgAiAETw0BA0AgAiABKAIANgIAIAFBBGohASACQQRqIgIgBEkNAAsMAQsgA0EESQRAIAAhAgwBCyAAIANBBGsiBEsEQCAAIQIMAQsgACECA0AgAiABLQAAOgAAIAIgAS0AAToAASACIAEtAAI6AAIgAiABLQADOgADIAFBBGohASACQQRqIgIgBE0NAAsLIAIgA0kEQANAIAIgAS0AADoAACABQQFqIQEgAkEBaiICIANHDQALCyAAC9YCAQJ/AkAgAUUNACAAIAFqIgJBAWtBADoAACAAQQA6AAAgAUEDSQ0AIAJBAmtBADoAACAAQQA6AAEgAkEDa0EAOgAAIABBADoAAiABQQdJDQAgAkEEa0EAOgAAIABBADoAAyABQQlJDQAgAEEAIABrQQNxIgNqIgJBADYCACACIAEgA2tBfHEiA2oiAUEEa0EANgIAIANBCUkNACACQQA2AgggAkEANgIEIAFBCGtBADYCACABQQxrQQA2AgAgA0EZSQ0AIAJBADYCGCACQQA2AhQgAkEANgIQIAJBADYCDCABQRBrQQA2AgAgAUEUa0EANgIAIAFBGGtBADYCACABQRxrQQA2AgAgAyACQQRxQRhyIgNrIgFBIEkNACACIANqIQIDQCACQgA3AxggAkIANwMQIAJCADcDCCACQgA3AwAgAkEgaiECIAFBIGsiAUEfSw0ACwsLBAAjAAsGACAAJAALEAAjACAAa0FwcSIAJAAgAAsLvVYIAEGECAvxQJYwB3csYQ7uulEJmRnEbQeP9GpwNaVj6aOVZJ4yiNsOpLjceR7p1eCI2dKXK0y2Cb18sX4HLbjnkR2/kGQQtx3yILBqSHG5895BvoR91Noa6+TdbVG11PTHhdODVphsE8Coa2R6+WL97Mllik9cARTZbAZjYz0P+vUNCI3IIG47XhBpTORBYNVycWei0eQDPEfUBEv9hQ3Sa7UKpfqotTVsmLJC1sm720D5vKzjbNgydVzfRc8N1txZPdGrrDDZJjoA3lGAUdfIFmHQv7X0tCEjxLNWmZW6zw+lvbieuAIoCIgFX7LZDMYk6Quxh3xvLxFMaFirHWHBPS1mtpBB3HYGcdsBvCDSmCoQ1e+JhbFxH7W2BqXkv58z1LjooskHeDT5AA+OqAmWGJgO4bsNan8tPW0Il2xkkQFcY+b0UWtrYmFsHNgwZYVOAGLy7ZUGbHulARvB9AiCV8QP9cbZsGVQ6bcS6ri+i3yIufzfHd1iSS3aFfN804xlTNT7WGGyTc5RtTp0ALyj4jC71EGl30rXldg9bcTRpPv01tNq6WlD/NluNEaIZ63QuGDacy0EROUdAzNfTAqqyXwN3TxxBVCqQQInEBALvoYgDMkltWhXs4VvIAnUZrmf5GHODvneXpjJ2SkimNCwtKjXxxc9s1mBDbQuO1y9t61susAgg7jttrO/mgzitgOa0rF0OUfV6q930p0VJtsEgxbccxILY+OEO2SUPmptDahaanoLzw7knf8JkyeuAAqxngd9RJMP8NKjCIdo8gEe/sIGaV1XYvfLZ2WAcTZsGecGa252G9T+4CvTiVp62hDMSt1nb9+5+fnvvo5DvrcX1Y6wYOij1tZ+k9GhxMLYOFLy30/xZ7vRZ1e8pt0GtT9LNrJI2isN2EwbCq/2SgM2YHoEQcPvYN9V32eo745uMXm+aUaMs2HLGoNmvKDSbyU24mhSlXcMzANHC7u5FgIiLyYFVb47usUoC72yklq0KwRqs1yn/9fCMc/QtYue2Swdrt5bsMJkmybyY+yco2p1CpNtAqkGCZw/Ng7rhWcHchNXAAWCSr+VFHq44q4rsXs4G7YMm47Skg2+1eW379x8Id/bC9TS04ZC4tTx+LPdaG6D2h/NFr6BWya59uF3sG93R7cY5loIiHBqD//KOwZmXAsBEf+eZY9prmL40/9rYUXPbBZ44gqg7tIN11SDBE7CswM5YSZnp/cWYNBNR2lJ23duPkpq0a7cWtbZZgvfQPA72DdTrrypxZ673n/Pskfp/7UwHPK9vYrCusowk7NTpqO0JAU20LqTBtfNKVfeVL9n2SMuemazuEphxAIbaF2UK28qN74LtKGODMMb3wVaje8CLQAAAABBMRsZgmI2MsNTLSsExWxkRfR3fYanWlbHlkFPCIrZyEm7wtGK6O/6y9n04wxPtaxNfq61ji2Dns8cmIdREsJKECPZU9Nw9HiSQe9hVdeuLhTmtTfXtZgcloSDBVmYG4IYqQCb2/otsJrLNqldXXfmHGxs/98/QdSeDlrNoiSEleMVn4wgRrKnYXepvqbh6PHn0PPoJIPew2Wyxdqqrl1d659GRCjMa29p/XB2rmsxOe9aKiAsCQcLbTgcEvM2Rt+yB13GcVRw7TBla/T38yq7tsIxonWRHIk0oAeQ+7yfF7qNhA553qklOO+yPP9583O+SOhqfRvFQTwq3lgFT3nwRH5i6YctT8LGHFTbAYoVlEC7Do2D6COmwtk4vw3FoDhM9Lshj6eWCs6WjRMJAMxcSDHXRYti+m7KU+F3VF27uhVsoKPWP42Ilw6WkVCY194RqczH0vrh7JPL+vVc12JyHeZ5a961VECfhE9ZWBIOFhkjFQ/acDgkm0EjPadr/WXmWuZ8JQnLV2Q40E6jrpEB4p+KGCHMpzNg/bwqr+Ekre7QP7QtgxKfbLIJhqskSMnqFVPQKUZ++2h3ZeL2eT8vt0gkNnQbCR01KhIE8rxTS7ONSFJw3mV5Me9+YP7z5ue/wv3+fJHQ1T2gy8z6NoqDuweRmnhUvLE5ZaeoS5iDOwqpmCLJ+rUJiMuuEE9d718ObPRGzT/ZbYwOwnRDElrzAiNB6sFwbMGAQXfYR9c2lwbmLY7FtQClhIQbvBqKQXFbu1pomOh3Q9nZbFoeTy0VX342DJwtGyfdHAA+EgCYuVMxg6CQYq6L0VO1khbF9N1X9O/ElKfC79WW2fbpvAeuqI0ct2veMZwq7yqF7XlryqxIcNNvG134LipG4eE23magB8V/Y1ToVCJl803l87ICpMKpG2eRhDAmoJ8puK7F5Pmf3v06zPPWe/3oz7xrqYD9WrKZPgmfsn84hKuwJBws8RUHNTJGKh5zdzEHtOFwSPXQa1E2g0Z6d7JdY07X+ssP5uHSzLXM+Y2E1+BKEpavCyONtshwoJ2JQbuERl0jAwdsOBrEPxUxhQ4OKEKYT2cDqVR+wPp5VYHLYkwfxTiBXvQjmJ2nDrPclhWqGwBU5VoxT/yZYmLX2FN5zhdP4UlWfvpQlS3Xe9QczGITio0tUruWNJHoux/Q2aAG7PN+Xq3CZUdukUhsL6BTdeg2EjqpBwkjalQkCCtlPxHkeaeWpUi8j2YbkaQnKoq94LzL8qGN0Oti3v3AI+/m2b3hvBT80KcNP4OKJn6ykT+5JNBw+BXLaTtG5kJ6d/1btWtl3PRafsU3CVPudjhI97GuCbjwnxKhM8w/inL9JJMAAAAAN2rCAW7UhANZvkYC3KgJB+vCywayfI0EhRZPBbhREw6PO9EP1oWXDeHvVQxk+RoJU5PYCAotngo9R1wLcKMmHEfJ5B0ed6IfKR1gHqwLLxubYe0awt+rGPW1aRnI8jUS/5j3E6YmsRGRTHMQFFo8FSMw/hR6jrgWTeR6F+BGTTjXLI85jpLJO7n4Czo87kQ/C4SGPlI6wDxlUAI9WBdeNm99nDc2w9o1AakYNIS/VzGz1ZUw6mvTMt0BETOQ5Wskp4+pJf4x7yfJWy0mTE1iI3snoCIimeYgFfMkISi0eCof3rorRmD8KXEKPij0HHEtw3azLJrI9S6tojcvwI2acPfnWHGuWR5zmTPcchwlk3crT1F2cvEXdEWb1XV43Il+T7ZLfxYIDX0hYs98pHSAeZMeQnjKoAR6/crGe7AuvGyHRH5t3vo4b+mQ+m5shrVrW+x3agJSMWg1OPNpCH+vYj8VbWNmqythUcHpYNTXpmXjvWRkugMiZo1p4Gcgy9dIF6EVSU4fU0t5dZFK/GPeT8sJHE6St1pMpd2YTZiaxEav8AZH9k5ARcEkgkREMs1Bc1gPQCrmSUIdjItDUGjxVGcCM1U+vHVXCda3VozA+FO7qjpS4hR8UNV+vlHoOeJa31MgW4btZlmxh6RYNJHrXQP7KVxaRW9ebS+tX4AbNeG3cffg7s+x4tmlc+Ncszzma9n+5zJnuOUFDXrkOEom7w8g5O5WnqLsYfRg7eTiL+jTiO3pijar671caerwuBP9x9LR/J5sl/6pBlX/LBAa+ht62PtCxJ75da5c+EjpAPN/g8LyJj2E8BFXRvGUQQn0oyvL9fqVjffN/0/2YF142Vc3utgOifzaOeM+27z1cd6Ln7Pf0iH13eVLN9zYDGvX72ap1rbY79SBsi3VBKRi0DPOoNFqcObTXRok0hD+XsUnlJzEfiraxklAGMfMVlfC+zyVw6KC08GV6BHAqK9Ny5/Fj8rGe8nI8RELyXQHRMxDbYbNGtPAzy25As5Alq+Rd/xtkC5CK5IZKOmTnD6mlqtUZJfy6iKVxYDglPjHvJ/PrX6elhM4nKF5+p0kb7WYEwV3mUq7MZt90fOaMDWJjQdfS4xe4Q2OaYvPj+ydgIrb90KLgkkEibUjxoiIZJqDvw5YguawHoDR2tyBVMyThGOmUYU6GBeHDXLVhqDQ4qmXuiCozgRmqvlupKt8eOuuSxIprxKsb60lxq2sGIHxpy/rM6Z2VXWkQT+3pcQp+KDzQzqhqv18o52XvqLQc8S15xkGtL6nQLaJzYK3DNvNsjuxD7NiD0mxVWWLsGgi17tfSBW6BvZTuDGckbm0it68g+AcvdpeWr/tNJi+AAAAAGVnvLiLyAmq7q+1EleXYo8y8N433F9rJbk4153vKLTFik8IfWTgvW8BhwHXuL/WSt3YavIzd9/gVhBjWJ9XGVD6MKXoFJ8Q+nH4rELIwHvfrafHZ0MIcnUmb87NcH+tlRUYES37t6Q/ntAYhyfozxpCj3OirCDGsMlHegg+rzKgW8iOGLVnOwrQAIeyaThQLwxf7Jfi8FmFh5flPdGHhmW04DrdWk+Pzz8oM3eGEOTq43dYUg3Y7UBov1H4ofgr8MSfl0gqMCJaT1ee4vZvSX+TCPXHfadA1RjA/G1O0J81K7cjjcUYlp+gfyonGUf9unwgQQKSj/QQ9+hIqD1YFJtYP6gjtpAdMdP3oYlqz3YUD6jKrOEHf76EYMMG0nCgXrcXHOZZuKn0PN8VTIXnwtHggH5pDi/Le2tId8OiDw3Lx2ixcynHBGFMoLjZ9ZhvRJD/0/x+UGbuGzfaVk0nuQ4oQAW2xu+wpKOIDBwasNuBf9dnOZF40iv0H26TA/cmO2aQmoOIPy+R7ViTKVRgRLQxB/gM36hNHrrP8abs35L+ibguRmcXm1QCcCfsu0jwcd4vTMkwgPnbVedFY5ygP2v5x4PTF2g2wXIPinnLN13krlDhXED/VE4lmOj2c4iLrhbvNxb4QIIEnSc+vCQf6SFBeFWZr9fgi8qwXDM7tlntXtHlVbB+UEfVGez/bCE7YglGh9rn6TLIgo6OcNSe7Six+VGQX1bkgjoxWDqDCY+n5m4zHwjBhg1tpjq1pOFAvcGG/AUvKUkXSk71r/N2IjKWEZ6KeL4rmB3ZlyBLyfR4Lq5IwMAB/dKlZkFqHF6W93k5Kk+Xlp9d8vEj5QUZa01gftf1jtFi5+u23l9SjgnCN+m1etlGAGi8IbzQ6jHfiI9WYzBh+dYiBJ5qmr2mvQfYwQG/Nm60rVMJCBWaTnId/ynOpRGGe7d04ccPzdkQkqi+rCpGERk4I3algHVmxtgQAXpg/q7PcpvJc8oi8aRXR5YY76k5rf3MXhFFBu5NdmOJ8c6NJkTc6EH4ZFF5L/k0HpNB2rEmU7/WmuvpxvmzjKFFC2IO8BkHaUyhvlGbPNs2J4Q1mZKWUP4uLpm5VCb83uieEnFdjHcW4TTOLjapq0mKEUXmPwMggYO7dpHg4xP2XFv9WelJmD5V8SEGgmxEYT7Uqs6Lxs+pN344QX/WXSbDbrOJdnzW7srEb9YdWQqxoeHkHhTzgXmoS9dpyxOyDnerXKHCuTnGfgGA/qmc5ZkVJAs2oDZuURyOpxZmhsJx2j4s3m8sSbnTlPCBBAmV5rixe0kNox4usRtIPtJDLVlu+8P22+mmkWdRH6mwzHrODHSUYblm8QYF3gAAAAB3BzCW7g5hLJkJUboHbcQZcGr0j+ljpTWeZJWjDtuIMnncuKTg1ekel9LZiAm2TCt+sXy957gtB5C/HZEdtxBkarAg8vO5cUiEvkHeGtrUfW3d5Ov01LVRg9OFxxNsmFZka6jA/WL5eoplyewUAVxPYwZs2foPPWONCA31O24gyExpEF7VYEHkomdxcjwD5NFLBNRH0g2F/aUKtWs1taj6QrKYbNu7ydasvPlAMths40XfXHXc1g3Pq9E9WSbZMKxR3gA6yNdRgL/QYRYhtPS1VrPEI8+6lZm4vaUPKAK4nl8FiAjGDNmysQvpJC9vfIdYaEwRwWEdq7ZmLT123EGQAdtxBpjSILzv1RAqcbGFiQa2tR+fv+Sl6LjUM3gHyaIPAPk0lgmojuEOmBh/ag27CG09LZFkbJfmY1wBa2tR9BxsYWKFZTDY8mIATmwGle0bAaV7ggj0wfUPxFdlsNnGErfpUIu+uOr8uYh8Yt0d3xXaLUmM03zz+9RMZU2yYVg6tVHOo7wAdNS7MOJK36VBPdiV16TRxG3T1vT7Q2npajRu2fytZ4hG2mC40EQELXMzAx3lqgpMX90NfMlQBXE8JwJBqr4LEBDJDCCGV2i1JSBvhbO5ZtQJzmHkn17e+Q4p2cmYsNCYIsfXqLRZsz0XLrQNgbe9XDvAumyt7biDIJq/s7YDtuIMdLHSmurVRzmd0nevBNsmFXPcFoPjYwsSlGQ7hA1taj56alqo5A7PC5MJ/50KAK4nfQeesfAPk0SHCKPSHgHyaGkGwv73YlddgGVnyxlsNnFuawbn/tQbdonTK+AQ2npaZ91KzPm532+Ovu/5F7e+Q2CwjtXW1qPoodGTfjjYwsRP3/JS0btn8aa8V2c/tQbdSLI2S9gNK9qvChtMNgNK9kEEemDfYO/DqGffVTFuju9Gab55y2GzjLxmgxolb9KgUmjiNswMd5W7C0cDIgIWuVUFJi/Fuju+sr0LKCu0WpJcs2oEwtf/p7XQzzEs2Z6LW96uHZtkwrDsY/ImdWqjnAJtkwqcCQap6w42P3IHZ4UFAFcTlb9KguK4ehR7sSuuDLYbOJLSjpvl1b4NfNzvtwvb3yGG09LU8dTiQmjds/gf2oNugb4Wzfa5JltvsHfhGLdHd4gIWub/D2pwZgY7yhEBC1yPZZ7/+GKuaWFr/9MWbM9FoArieNcN0u5OBINUOQOzwqdnJmHQYBb3SWlHTT5ud9uu0WpK2dZa3EDfC2Y32DvwqbyuU967nsVHss9/MLX/6b298hzKusKKU7OTMCS0o6a60DYFzdcGk1TeVykj2We/s2Z6LsRhSrhdaBsCKm8rlLQLvjfDDI6hWgXfGy0C740AAAAAGRsxQTI2YoIrLVPDZGzFBH139EVWWqeGT0GWx8jZigjRwrtJ+u/oiuP02custU8Mta5+TZ6DLY6HmBzPSsISUVPZIxB49HDTYe9Bki6u11U3teYUHJi11wWDhJaCG5hZmwCpGLAt+tupNsua5nddXf9sbBzUQT/fzVoOnpWEJKKMnxXjp7JGIL6pd2Hx6OGm6PPQ58PegyTaxbJlXV2uqkRGn+tva8wodnD9aTkxa64gKlrvCwcJLBIcOG3fRjbzxl0Hsu1wVHH0a2Uwuyrz96IxwraJHJF1kAegNBefvPsOhI26JaneeTyy7zhz83n/auhIvkHFG31Y3io88HlPBelifkTCTy2H21QcxpQVigGNDrtApiPog7842cI4oMUNIbv0TAqWp48TjZbOXMwACUXXMUhu+mKLd+FTyrq7XVSjoGwViI0/1pGWDpfe15hQx8ypEezh+tL1+suTcmLXXGt55h1AVLXeWU+EnxYOElgPFSMZJDhw2j0jQZtl/WunfOZa5lfLCSVO0DhkAZGuoxiKn+Izp8whKrz9YK0k4a+0P9DunxKDLYYJsmzJSCSr0FMV6vt+RiniZXdoLz959jYkSLcdCRt0BBIqNUtTvPJSSI2zeWXecGB+7zHn5vP+/v3Cv9XQkXzMy6A9g4o2+pqRB7uxvFR4qKdlOTuDmEsimKkKCbX6yRCuy4hf711PRvRsDm3ZP810wg6M81oSQ+pBIwLBbHDB2HdBgJc210eOLeYGpQC1xbwbhIRxQYoaaFq7W0N36JhabNnZFS1PHgw2fl8nGy2cPgAc3bmYABKggzFTi65ikJK1U9Hd9MUWxO/0V+/Cp5T22ZbVrge86bccjaicMd5rhSrvKspree3TcEis+F0bb+FGKi5m3jbhf8UHoFToVGNN82UiArLz5RupwqQwhJFnKZ+gJuTFrrj93p/51vPMOs/o/XuAqWu8mbJa/bKfCT6rhDh/LBwksDUHFfEeKkYyBzF3c0hw4bRRa9D1ekaDNmNdsnfL+tdO0uHmD/nMtczg14SNr5YSSraNIwudoHDIhLtBiQMjXUYaOGwHMRU/xCgODoVnT5hCflSpA1V5+sBMYsuBgTjFH5gj9F6zDqedqhWW3OVUABv8TzFa12Jimc55U9hJ4U8XUPp+VnvXLZVizBzULY2KEzSWu1Ifu+iRBqDZ0F5+8+xHZcKtbEiRbnVToC86EjboIwkHqQgkVGoRP2Urlqd55I+8SKWkkRtmvYoqJ/LLvODr0I2hwP3eYtnm7yMUvOG9DafQ/CaKgz8/kbJ+cNAkuWnLFfhC5kY7W/13etxla7XFflr07lMJN/dIOHa4Ca6xoRKf8Io/zDOTJP1yAAAAAAHCajcDhNRuAka+WQcJqNwGy8LrBI18sgVPFoUOE1G4D9E7jw2XhdYMVe/hCRr5ZAjYk1MKni0KC1xHPRwmo3Ad5MlHH6J3Hh5gHSkbLwusGu1hmxir38IZabX1EjXyyBP3mP8RsSamEHNMkRU8WhQU/jAjFriOehd65E04TUbgOY8s1zvJko46C/i5P0TuPD6GhAs8wDpSPQJQZTZeF1g3nH1vNdrDNjQYqQExV7+EMJXVszLTa+ozEQHdJGvlkCWpj6cn7zH+Ji1bySNiTUwioCd7IOaZIiEk8xUqeLQoK7reHyn8YEYoPgpxLXEc9CyzdsMu9ciaLzeirXCajcBxWOf3cx5ZrnLcM5l3kyUcdlFPK3QX8XJ11ZtFfonceH9Ltk99DQgWfM9iIXmAdKR4Qh6TegSgynvGyv1svC6wbX5Eh284+t5u+pDpa7WGbGp37FtoMVICafM4NWKvfwhjbRU/YSurZmDpwVFlptfUZGS942YiA7pn4GmNSNfLIEkVoRdLUx9OSpF1eU/eY/xOHAnLTFq3kk2Y3aVGxJqYRwbwr0VATvZEgiTBQc0yREAPWHNCSeYqQ4uMHVTxaFBVMwJnV3W8Pla31glT+MCMUjqqu1B8FOJRvn7VWuI56FsgU99ZZu2GWKSHsV3rkTRcKfsDXm9FWl+tL23hNRuA4Pdxt+Kxz+7jc6XZ5jyzXOf+2WvluGcy5HoNBe8mSjju5CAP7KKeVu1g9GHoL+Lk6e2I0+urNorqaVy9/RO48PzR0sf+l2ye/1UGqfoaECz72Hob+Z7EQvhcrnXzAOlI8sKDf/CEPSbxRlcR9AlBlPXLK6P3jZX69k//zdl4XWDYujdX2vyJDts+4znecfW837Ofi931IdLcN0vl12sM2NapZu/U79i21S2ygdBipATRoM4z0+ZwatIkGl3FXv4QxJyUJ8baKn7HGEBJwldWzMOVPPvB04KiwBHolctNr6jKj8WfyMl7xskLEfHMRAd0zYZtQ8/A0xrOArktka+WQJBt/HeSK0Iuk+koGZamPpyXZFSrlSLq8pTggMWfvMf4nn6tz5w4E5ad+nmhmLVvJJl3BRObMbtKmvPRfY2JNTCMS18Hjg3hXo/Pi2mKgJ3si0L324kESYKIxiO1g5pkiIJYDr+AHrDmgdza0YSTzFSFUaZjhxcYOobVcg2p4tCgqCC6l6pmBM6rpG75rut4fK8pEkutb6wSrK3GJafxgRimM+svpHVVdqW3P0Gg+CnEoTpD86N8/aqivpedtcRz0LQGGee2QKe+t4LNibLN2wyzD7E7sUkPYrCLZVW71yJouhVIX7hT9ga5kZwxvN6KtL0c4IO/Wl7avpg07QAAAAC4vGdlqgnIixK1r+6PYpdXN97wMiVrX9yd1zi5xbQo730IT4pvveBk1wGHAUrWv7jyatjd4N93M1hjEFZQGVef6KUw+voQnxRCrPhx33vAyGfHp611cghDzc5vJpWtf3AtERgVP6S3+4cY0J4az+gnonOPQrDGIKwIekfJoDKvPhiOyFsKO2e1socA0C9QOGmX7F8MhVnw4j3ll4dlhofR3TrgtM+PT1p3Myg/6uQQhlJYd+NA7dgN+FG/aPAr+KFIl5/EWiIwKuKeV09/SW/2x/UIk9VAp31t/MAYNZ/QTo0jtyuflhjFJyp/oLr9RxkCQSB8EPSPkqhI6PebFFg9I6g/WDEdkLaJoffTFHbPaqzKqA++fwfhBsNghF6gcNLmHBe39Km4WUwV3zzRwueFaX6A4HvLLw7Dd0hryw0PonOxaMdhBMcp2bigTERvmPX80/+Q7mZQflbaNxsOuSdNtgVAKKSw78YcDIijgduwGjln138r0niRk24f9Dsm9wODmpBmkS8/iCmTWO20RGBUDPgHMR5NqN+m8c+6/pLf7EYuuIlUmxdn7CdwAnHwSLvJTC/e2/mAMGNF51VrP6Cc04PH+cE2aBd5ig9y5F03y1zhUK5OVP9A9uiYJa6LiHMWN+8WBIJA+Lw+J50h6R8kmVV4QYvg168zXLDK7Vm2O1Xl0V5HUH6w/+wZ1WI7IWzah0YJyDLp53COjoIo7Z7UkFH5sYLkVl86WDE6p48Jgx8zbuYNhsEItTqmbb1A4aQF/IbBF0kpL6/1TkoyInbzip4Rlpgrvnggl9kdePTJS8BIri7S/QHAakFmpfeWXhxPKjl5XZ+Wl+Uj8fJNaxkF9dd+YOdi0Y5f3rbrwgmOUnq16TdoAEbZ0LwhvIjfMeowY1aPItb5YZpqngQHvaa9vwHB2K20bjYVCAlTHXJOmqXOKf+3e4YRD8fhdJIQ2c0qrL6oOBkRRoCldiPYxmZ1YHoBEHLPrv7Kc8mbV6TxIu8Ylkf9rTmpRRFezHZN7gbO8Ylj3EQmjWT4Qej5L3lRQZMeNFMmsdrrmta/s/nG6QtFoYwZ8A5ioUxpBzybUb6EJzbblpKZNS4u/lAmVLmZnuje/IxdcRI04RZ3qTYuzhGKSasDP+ZFu4OBIOPgkXZbXPYTSelZ/fFVPphsggYh1D5hRMaLzqp+N6nP1n9BOG7DJl18domzxMru1lkd1m/hobEK8xQe5EuoeYETy2nXq3cOsrnCoVwBfsY5nKn+gCQVmeU2oDYLjhxRboZmFqc+2nHCLG/eLJTTuUkJBIHwsbjmlaMNSXsbsS4eQ9I+SPtuWS3p2/bDUWeRpsywqR90DM56ZrlhlN4FBvEAAAAAAAAAAAMAAAAEAAQACAAEAAQAAAAEAAUAEAAIAAQAAAAEAAYAIAAgAAQAAAAEAAQAEAAQAAUAAAAIABAAIAAgAAUAAAAIABAAgACAAAUAAAAIACAAgAAAAQUAAAAgAIAAAgEABAUAAAAgAAIBAgEAEAUAQYHJAAu2EAECAwQEBQUGBgYGBwcHBwgICAgICAgICQkJCQkJCQkKCgoKCgoKCgoKCgoKCgoKCwsLCwsLCwsLCwsLCwsLCwwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDwAAEBESEhMTFBQUFBUVFRUWFhYWFhYWFhcXFxcXFxcXGBgYGBgYGBgYGBgYGBgYGBkZGRkZGRkZGRkZGRkZGRkaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHB0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0AAQIDBAUGBwgICQkKCgsLDAwMDA0NDQ0ODg4ODw8PDxAQEBAQEBAQERERERERERESEhISEhISEhMTExMTExMTFBQUFBQUFBQUFBQUFBQUFBUVFRUVFRUVFRUVFRUVFRUWFhYWFhYWFhYWFhYWFhYWFxcXFxcXFxcXFxcXFxcXFxgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxscwCcAAMAsAAABAQAAHgEAAA8AAABALAAAQC0AAAAAAAAeAAAADwAAAAAAAADALQAAAAAAABMAAAAHAAAAAAAAAAwACACMAAgATAAIAMwACAAsAAgArAAIAGwACADsAAgAHAAIAJwACABcAAgA3AAIADwACAC8AAgAfAAIAPwACAACAAgAggAIAEIACADCAAgAIgAIAKIACABiAAgA4gAIABIACACSAAgAUgAIANIACAAyAAgAsgAIAHIACADyAAgACgAIAIoACABKAAgAygAIACoACACqAAgAagAIAOoACAAaAAgAmgAIAFoACADaAAgAOgAIALoACAB6AAgA+gAIAAYACACGAAgARgAIAMYACAAmAAgApgAIAGYACADmAAgAFgAIAJYACABWAAgA1gAIADYACAC2AAgAdgAIAPYACAAOAAgAjgAIAE4ACADOAAgALgAIAK4ACABuAAgA7gAIAB4ACACeAAgAXgAIAN4ACAA+AAgAvgAIAH4ACAD+AAgAAQAIAIEACABBAAgAwQAIACEACAChAAgAYQAIAOEACAARAAgAkQAIAFEACADRAAgAMQAIALEACABxAAgA8QAIAAkACACJAAgASQAIAMkACAApAAgAqQAIAGkACADpAAgAGQAIAJkACABZAAgA2QAIADkACAC5AAgAeQAIAPkACAAFAAgAhQAIAEUACADFAAgAJQAIAKUACABlAAgA5QAIABUACACVAAgAVQAIANUACAA1AAgAtQAIAHUACAD1AAgADQAIAI0ACABNAAgAzQAIAC0ACACtAAgAbQAIAO0ACAAdAAgAnQAIAF0ACADdAAgAPQAIAL0ACAB9AAgA/QAIABMACQATAQkAkwAJAJMBCQBTAAkAUwEJANMACQDTAQkAMwAJADMBCQCzAAkAswEJAHMACQBzAQkA8wAJAPMBCQALAAkACwEJAIsACQCLAQkASwAJAEsBCQDLAAkAywEJACsACQArAQkAqwAJAKsBCQBrAAkAawEJAOsACQDrAQkAGwAJABsBCQCbAAkAmwEJAFsACQBbAQkA2wAJANsBCQA7AAkAOwEJALsACQC7AQkAewAJAHsBCQD7AAkA+wEJAAcACQAHAQkAhwAJAIcBCQBHAAkARwEJAMcACQDHAQkAJwAJACcBCQCnAAkApwEJAGcACQBnAQkA5wAJAOcBCQAXAAkAFwEJAJcACQCXAQkAVwAJAFcBCQDXAAkA1wEJADcACQA3AQkAtwAJALcBCQB3AAkAdwEJAPcACQD3AQkADwAJAA8BCQCPAAkAjwEJAE8ACQBPAQkAzwAJAM8BCQAvAAkALwEJAK8ACQCvAQkAbwAJAG8BCQDvAAkA7wEJAB8ACQAfAQkAnwAJAJ8BCQBfAAkAXwEJAN8ACQDfAQkAPwAJAD8BCQC/AAkAvwEJAH8ACQB/AQkA/wAJAP8BCQAAAAcAQAAHACAABwBgAAcAEAAHAFAABwAwAAcAcAAHAAgABwBIAAcAKAAHAGgABwAYAAcAWAAHADgABwB4AAcABAAHAEQABwAkAAcAZAAHABQABwBUAAcANAAHAHQABwADAAgAgwAIAEMACADDAAgAIwAIAKMACABjAAgA4wAIAAAABQAQAAUACAAFABgABQAEAAUAFAAFAAwABQAcAAUAAgAFABIABQAKAAUAGgAFAAYABQAWAAUADgAFAB4ABQABAAUAEQAFAAkABQAZAAUABQAFABUABQANAAUAHQAFAAMABQATAAUACwAFABsABQAHAAUAFwAFAEHg2QALTQEAAAABAAAAAQAAAAEAAAACAAAAAgAAAAIAAAACAAAAAwAAAAMAAAADAAAAAwAAAAQAAAAEAAAABAAAAAQAAAAFAAAABQAAAAUAAAAFAEHQ2gALZQEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAUAAAAGAAAABgAAAAcAAAAHAAAACAAAAAgAAAAJAAAACQAAAAoAAAAKAAAACwAAAAsAAAAMAAAADAAAAA0AAAANAEGA3AALIwIAAAADAAAABwAAAAAAAAAQERIACAcJBgoFCwQMAw0CDgEPAEG03AALaQEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAcAAAAIAAAACgAAAAwAAAAOAAAAEAAAABQAAAAYAAAAHAAAACAAAAAoAAAAMAAAADgAAABAAAAAUAAAAGAAAABwAAAAgAAAAKAAAADAAAAA4ABBtN0AC5oCAQAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAAAAAEAAIABAAAAAgAAAAMAAAAEAAAABgAAAAgAAAAMAAAAEAAAABgAAAAgAAAAMAAAAEAAAABgAABuZWVkIGRpY3Rpb25hcnkAc3RyZWFtIGVuZAAAZmlsZSBlcnJvcgBzdHJlYW0gZXJyb3IAZGF0YSBlcnJvcgBpbnN1ZmZpY2llbnQgbWVtb3J5AGJ1ZmZlciBlcnJvcgBpbmNvbXBhdGlibGUgdmVyc2lvbgAAAAAoLwAAOC8AAEMvAABELwAATy8AAFwvAABnLwAAey8AAIgvAABDLwAAMS4yLjExAEHQ3wALA9AxUA==").split("").map(i=>i.charCodeAt(0));return new Uint8Array(n,0,n.length/Uint8Array.BYTES_PER_ELEMENT)}();let hde,IL;function fde(){return fde=l(function*(){if(hde)return hde;const e={};let n,i={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);let c=!1,h=!1;c="object"==typeof window,h="function"==typeof importScripts,"object"==typeof process&&"object"==typeof process.versions&&process;let g="";(c||h)&&(h?g=self.location.href:"undefined"!=typeof document&&document.currentScript&&(g=document.currentScript.src),g=0!==g.indexOf("blob:")?g.substr(0,g.lastIndexOf("/")+1):""),e.print||console.log.bind(console);const v=e.printErr||console.warn.bind(console);for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);let m;i=null,"object"!=typeof WebAssembly&&ma("no native wasm support detected");let C=!1;function y(ca){const Aa=e["_"+ca];return Aa||ma("Assertion failed: Cannot call unknown function "+ca+", make sure it is exported"),Aa}function N(ca,Aa,Ya,Zc,Ol){const _c={string:function(vl){let Oh=0;if(null!=vl&&0!==vl){const ff=1+(vl.length<<2);Oh=_a(ff),function(Vp,_d,Gp,Lh){if(!(Lh>0))return 0;const Uy=Gp+Lh-1;for(let M0=0;M0<Vp.length;++M0){let ry=Vp.charCodeAt(M0);if(ry>=55296&&ry<=57343&&(ry=65536+((1023&ry)<<10)|1023&Vp.charCodeAt(++M0)),ry<=127){if(Gp>=Uy)break;_d[Gp++]=ry}else if(ry<=2047){if(Gp+1>=Uy)break;_d[Gp++]=192|ry>>6,_d[Gp++]=128|63&ry}else if(ry<=65535){if(Gp+2>=Uy)break;_d[Gp++]=224|ry>>12,_d[Gp++]=128|ry>>6&63,_d[Gp++]=128|63&ry}else{if(Gp+3>=Uy)break;_d[Gp++]=240|ry>>18,_d[Gp++]=128|ry>>12&63,_d[Gp++]=128|ry>>6&63,_d[Gp++]=128|63&ry}}_d[Gp]=0}(vl,V,Oh,ff)}return Oh},array:function(vl){const Oh=_a(vl.length);return U.set(vl,Oh),Oh}},J=y(ca),Ze=[];let aa=0;if(Zc)for(let vl=0;vl<Zc.length;vl++){const Oh=_c[Ya[vl]];Oh?(0===aa&&(aa=Kl()),Ze[vl]=Oh(Zc[vl])):Ze[vl]=Zc[vl]}let Xa=J.apply(null,Ze);return vl=Xa,Xa="string"===Aa?(Oh=vl)?function(Rh,Cg,cf){const Vp=Cg+undefined;let _d=Cg,Gp="";for(;Rh[_d]&&!(_d>=Vp);)++_d;if(_d-Cg>16&&Rh.subarray&&k)return k.decode(Rh.subarray(Cg,_d));for(;Cg<_d;){let Lh=Rh[Cg++];if(!(128&Lh)){Gp+=String.fromCharCode(Lh);continue}const Op=63&Rh[Cg++];if(192==(224&Lh)){Gp+=String.fromCharCode((31&Lh)<<6|Op);continue}const Uy=63&Rh[Cg++];if(Lh=224==(240&Lh)?(15&Lh)<<12|Op<<6|Uy:(7&Lh)<<18|Op<<12|Uy<<6|63&Rh[Cg++],Lh<65536)Gp+=String.fromCharCode(Lh);else{const M0=Lh-65536;Gp+=String.fromCharCode(55296|M0>>10,56320|1023&M0)}}return Gp}(V,Oh):"":"boolean"===Aa?Boolean(vl):vl,0!==aa&&sl(aa),Xa;var vl,Oh}const k="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;let U,V,K;"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");const $=[],Z=[],ye=[],be=[];Z.push({func:function(){Wc()}});let _s=0,ua=null;function ma(ca){throw e.onAbort&&e.onAbort(ca),v(ca+=""),C=!0,ca="abort("+ca+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(ca)}e.preloadedImages={},e.preloadedAudios={};let pc="deflate.wasm";var ca;function Ua(ca){for(;ca.length>0;){const Aa=ca.shift();if("function"==typeof Aa){Aa(e);continue}const Ya=Aa.func;"number"==typeof Ya?void 0===Aa.arg?K.get(Ya)():K.get(Ya)(Aa.arg):Ya(void 0===Aa.arg?null:Aa.arg)}}pc.startsWith("data:application/octet-stream;base64,")||(ca=pc,pc=e.locateFile?e.locateFile(ca,g):g+ca);const nl={emscripten_memcpy_big:function(ca,Aa,Ya){V.copyWithin(ca,Aa,Aa+Ya)},emscripten_resize_heap:function(ca){ma("OOM")}};yield l(function*(){const ca={env:nl,wasi_snapshot_preview1:nl};function Aa(Ol,_c){var Ze;e.asm=Ol.exports,m=e.asm.memory,Ze=m.buffer,e.HEAP8=U=new Int8Array(Ze),e.HEAP16=new Int16Array(Ze),e.HEAP32=new Int32Array(Ze),e.HEAPU8=V=new Uint8Array(Ze),e.HEAPU16=new Uint16Array(Ze),e.HEAPU32=new Uint32Array(Ze),e.HEAPF32=new Float32Array(Ze),e.HEAPF64=new Float64Array(Ze),K=e.asm.__indirect_function_table,function(aa){if(_s--,e.monitorRunDependencies&&e.monitorRunDependencies(_s),0==_s&&ua){const Xa=ua;ua=null,Xa()}}()}if(_s++,e.monitorRunDependencies&&e.monitorRunDependencies(_s),e.instantiateWasm)try{return e.instantiateWasm(ca,Aa)}catch(Ol){return v("Module.instantiateWasm callback failed with error: "+Ol),!1}return yield function Zc(Ol){return new _l((_c,J)=>{_c(Tbe().buffer)}).then(function(_c){return WebAssembly.instantiate(_c,ca)}).then(Ol,function(_c){v("failed to asynchronously prepare wasm: "+_c),ma(_c)})}(function Ya(Ol){Aa(Ol.instance)}),{}})();let Wc=e.___wasm_call_ctors=function(){return(Wc=e.___wasm_call_ctors=e.asm.__wasm_call_ctors).apply(null,arguments)},El=e._malloc=function(){return(El=e._malloc=e.asm.malloc).apply(null,arguments)};e._free=function(){return(e._free=e.asm.free).apply(null,arguments)},e.___errno_location=function(){return(e.___errno_location=e.asm.__errno_location).apply(null,arguments)},e._zlibCompress=function(){return(e._zlibCompress=e.asm.zlibCompress).apply(null,arguments)};let Dl,Kl=e.stackSave=function(){return(Kl=e.stackSave=e.asm.stackSave).apply(null,arguments)},sl=e.stackRestore=function(){return(sl=e.stackRestore=e.asm.stackRestore).apply(null,arguments)},_a=e.stackAlloc=function(){return(_a=e.stackAlloc=e.asm.stackAlloc).apply(null,arguments)};function Qa(ca){function Aa(){Dl||(Dl=!0,e.calledRun=!0,C||(Ua(Z),Ua(ye),e.onRuntimeInitialized&&e.onRuntimeInitialized(),function(){if(e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;)Ya=e.postRun.shift(),be.unshift(Ya);var Ya;Ua(be)}()))}_s>0||(function(){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)Ya=e.preRun.shift(),$.unshift(Ya);var Ya;Ua($)}(),_s>0||(e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),Aa()},1)):Aa()))}if(e.ccall=N,e.cwrap=function(ca,Aa,Ya,Zc){const Ol=(Ya=Ya||[]).every(function(_c){return"number"===_c});return"string"!==Aa&&Ol&&!Zc?y(ca):function(){return N(ca,Aa,Ya,arguments)}},e.allocate=function(ca,Aa){let Ya;return Ya=1==Aa?_a(ca.length):El(ca.length),V.set(ca.subarray||ca.slice?ca:new Uint8Array(ca),Ya),Ya},ua=function ca(){Dl||Qa(),Dl||(ua=ca)},e.run=Qa,e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return Qa(),hde=e,e}),fde.apply(this,arguments)}const zAe=Uint8Array.BYTES_PER_ELEMENT,Rbe={bytesReceived:"br",frameDropped:"fd",frameReceived:"fr",googJitterReceived:"jr",isAudioMute:"am",isFreeze:"fz",mediaType:"mt",packetsLost:"pl",packetsReceived:"pr",peerId:"pid",id:"id",ssrc:"ssrc",timestamp:"ts",type:"tp",frameRateInput:"fi",frameRateSent:"fs",googRtt:"rt",isVideoMute:"vm"},Obe={stats:"sts",state:"st",stream_id:"stid",session_id:"seid",stream_type:"stt",app_id:"aid",channel_key:"ck",channel_name:"cn",sdk_version:"sv",browser:"b",process_id:"pcid",mode:"m",codec:"c",role:"r",has_changed_gateway:"hcg",ap_response:"ar",extends:"es",details:"d",features:"ft",p2p_id:"ppid",sdp:"sdp",audio:"a",video:"v",attributes:"at",hq:"h",lq:"l",stereo:"str",speech:"spe",extend:"e",pingpongElapse:"ppe"},Dbe={_message:"m",_type:"t",_id:"id"},Nbe={join_v2:"j2",publish:"pub",publish_related_stats:"prs",ping:"pi",traffic_stats:"ts",ping_back:"pib",publish_stats:"pubs"};let pde;class XAe{constructor(){Y(this,"zlibCompress",void 0)}init(){var n=this;return l(function*(){pde||(pde=(yield l(function*(){return IL||(IL=yield function wbe(){return fde.apply(this,arguments)}()),{zlibCompress:c=>{const h=new Uint8Array(c),g=zAe*h.byteLength,v=IL._malloc(g),m=IL._malloc(3*g);for(let N=0;N<g;N++)IL.HEAP8[v/zAe+N]=h[N];const C=IL._zlibCompress(v,g,m),y=new Uint8Array(IL.HEAP8.slice(m,m+C));return IL._free(v),IL._free(m),y}}})()).zlibCompress),n.zlibCompress=pde})()}msgPackCompress(n){return JAe.exports.encode(n)}compress(n){const i=Date.now(),c=this.compressKeyAndValue(JSON.parse(JSON.stringify(n))),h=this.msgPackCompress(c),g=this.zlibCompress(h),v=new Uint8Array([49,49,49,50,...Array.from(g)]);return{origin:Object.assign({},n),originLength:JSON.stringify(n).length,shortKeyAndValue:c,msgpackSer:h,compressed:v,compressedLength:v.length,time:Date.now()-i}}compressKeyAndValue(n){return this._ObjectKeyCompress(this._typeCompress(n))}_typeCompress(n){const i=n._type;return i?(n._type=Nbe[i]||i,n):n}_ObjectKeyCompress(n){const i=n._message;if(i){const c=i.stats;c&&(i.stats=this._statsCompress(c)),n._message=this._messageCompress(i)}return this._reportCompress(n)}_statsCompress(n){return this._keyCompress(n,Rbe)}_messageCompress(n){return this._keyCompress(n,Obe)}_reportCompress(n){return this._keyCompress(n,Dbe)}_keyCompress(n,i){const c={},h=Object.keys(n);return _A(h).call(h,(g,v)=>{const m=n[v];return i[v]?c[i[v]]=m:c[v]=m,c},c),c}}class kbe extends f0{get queue(){return[...this.highPriorityQueue,...this.lowPriorityQueue]}constructor(n){super(),Y(this,"lowPriorityQueue",[]),Y(this,"highPriorityQueue",[]),Y(this,"AgoraWebSocketManager",void 0),this.AgoraWebSocketManager=n}reset(){this.lowPriorityQueue=[],this.highPriorityQueue=[]}pushMessage(n){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.highPriorityQueue.push(n):this.lowPriorityQueue.push(n),this.sendMessage()}sendMessage(){const n=this.queue.length;let i=0;i=n<5?15*n:60+3*(n-4),setTimeout(()=>{this._sendMessage()},i)}_sendMessage(){if(!this.queue.length)return;const n=this.AgoraWebSocketManager.getConnection();if(!n||1!==n.readyState)return;const i=this.queue.shift();return this.lowPriorityQueue.includes(i)?this.lowPriorityQueue.shift():this.highPriorityQueue.shift(),n.send(i.compressed),i}}var $Ae;function ZAe(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);n&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),i.push.apply(i,c)}return i}let JQ=uy("AgoraWebSocketManager","connectionID")($Ae=class extends f0{get url(){return this.websocket?this.websocket.url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(e){["tryNext","recover"].includes(e)&&this.resetReconnectCount(e),this._reconnectMode=e}get state(){return this._state}set state(e){e!==this._state&&(this._state=e,"reconnecting"===this._state?this.emit(Nh.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(Nh.CONNECTED):"closed"===this._state?this.emit(Nh.CLOSED):"failed"===this._state&&this.emit(Nh.FAILED))}resetReconnectCount(e){de.debug("websocket reset reconnect count, reason: "+e),Gc("debug",this,"resetReconnectCount",e,"websocket reset reconnect count, reason: "+e),this.reconnectCount=0}constructor(e,n){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],h=arguments.length>4?arguments[4]:void 0;super(),Y(this,"connectionID",0),Y(this,"currentURLIndex",0),Y(this,"urls",void 0),Y(this,"_reconnectMode","tryNext"),Y(this,"reconnectReason",void 0),Y(this,"_initMutex",new _I("websocket")),Y(this,"name",void 0),Y(this,"_state","closed"),Y(this,"reconnectInterrupter",void 0),Y(this,"websocket",void 0),Y(this,"retryConfig",void 0),Y(this,"reconnectCount",0),Y(this,"forceCloseTimeout",5e3),Y(this,"onlineReconnectListener",void 0),Y(this,"compressor",new XAe),Y(this,"compressorInitStatus","initializing"),Y(this,"compress",void 0),Y(this,"messageSender",void 0),Y(this,"useCompress",void 0),Y(this,"tryDoubleDomain",!1),Y(this,"wsInflateLength",0),Y(this,"wsDeflateLength",0),Y(this,"closeEstablishingWs",()=>{}),Y(this,"store",void 0),Y(this,"joinChannelServiceRecordIndex",void 0),this.store=h,this.name=e,this.retryConfig=function(N){for(var k=1;k<arguments.length;k++){var U=null!=arguments[k]?arguments[k]:{};k%2?ZAe(Object(U),!0).forEach(function(V){Y(N,V,U[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(N,Object.getOwnPropertyDescriptors(U)):ZAe(Object(U)).forEach(function(V){Object.defineProperty(N,V,Object.getOwnPropertyDescriptor(U,V))})}return N}({},n),this.useCompress=i,this.tryDoubleDomain=c;const{timeout:g,timeoutFactor:v}=n,m=Math.max(300,Math.floor(3*g/5)),C=Math.max(1.2,Math.floor(8*v)/10);yy.ONLINE&&(this.retryConfig.timeout=m,this.retryConfig.timeoutFactor=C),ey.on(nT.NETWORK_STATE_CHANGE,(N,k)=>{N!==k&&(this.resetReconnectCount("network state change: ".concat(k," -> ").concat(N)),N===yy.ONLINE?(this.retryConfig.timeout=m,this.retryConfig.timeoutFactor=C):(this.retryConfig.timeout=g,this.retryConfig.timeoutFactor=v))});const y=Date.now();this.compressor.init().then(()=>{this.compressorInitStatus="initialized";const N=Date.now()-y;de.debug("websocket compressor initialized successfully in ".concat(N,"ms")),Gc("debug",this.compressor,"init",void 0,"websocket compressor initialized successfully in ".concat(N,"ms")),qc.wsCompressorInit({status:!0,ec:null,eventElapse:N}),this.compress=this.compressor.compress.bind(this.compressor)}).catch(N=>{this.compressorInitStatus="failed";const k=N?N.message||N.toString():"Empty Error";de.debug("websocket compressor failed to initialize because of ".concat(k)),Gc("debug",this.compressor,"init",void 0,"websocket compressor failed to initialize because of ".concat(k)),qc.wsCompressorInit({status:!1,ec:k,eventElapse:1})})}getConnection(){return this.websocket||void 0}init(e){this.forceCloseTimeout=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const i=(c,h)=>{this.urls=e;const g=this.urls[this.currentURLIndex];this.state="connecting",this.messageSender=new kbe(this),this.createWebSocketConnection(g).then(c).catch(h),this.once(Nh.CLOSED,()=>h(new ea(_t.WS_DISCONNECT))),this.once(Nh.CONNECTED,()=>c())};return this._initMutex.lock().then(c=>new _l((h,g)=>{i(h,g)}).then(()=>{c()}).catch(()=>{c()}))}close(e,n){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const i=this.websocket;n?setTimeout(()=>i.close(),500):i.close(),this.websocket=void 0}this.state=e?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(e,n){if(!this.websocket)return de.warning("[".concat(this.name,"] can not reconnect, no websocket")),void Gc("warning",this,"reconnect","can not reconnect, no websocket");var i;void 0!==e&&(this.reconnectMode=e),de.debug("[".concat(this.name,"] reconnect is triggered initiative")),Gc("debug",this,"reconnect"),"number"==typeof this.joinChannelServiceRecordIndex&&(null===(i=this.store)||void 0===i||i.recordJoinChannelService({status:"error",errors:[new Error(n)]},this.joinChannelServiceRecordIndex));const c=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),c&&c.bind(this.websocket)({code:9999,reason:n})}sendMessageWithJSON(e){const n=JSON.stringify(e);return{compressed:n,compressedLength:n.length,origin:e}}sendMessageWithUint8Array(e){return{compressed:e,compressedLength:e.byteLength,origin:e}}sendMessage(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new ea(_t.WS_ABORT,"websocket is not ready");try{let c=null;if(i)c=this.sendMessageWithUint8Array(e);else if("initialized"===this.compressorInitStatus&&this.useCompress&&ya("WEBSOCKET_COMPRESS"))try{c=this.compress(e),this.setWsInflateData(c)}catch(h){c=this.sendMessageWithJSON(e)}else c=this.sendMessageWithJSON(e);n?this.websocket.send(c.compressed):this.messageSender.pushMessage(c)}catch(c){throw new ea(_t.WS_ERR,"send websocket message error"+c.toString())}}setWsInflateData(e){this.wsDeflateLength=this.wsDeflateLength+e.originLength,this.wsInflateLength=this.wsInflateLength+e.compressedLength}getWsInflateData(){const e=this.wsInflateLength,n=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:e,wsDeflateLength:n}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}createWebSocketConnection(e,n){var i=this;return l(function*(){return i.connectionID+=1,i.joinChannelServiceRecordIndex=void 0,new _l((c,h)=>{var g;const v=()=>{var N;null===(N=i.store)||void 0===N||N.signalChannelOpen(),de.debug("[".concat(i.name,"] websocket opened:"),e),i1("debug",["WebSocket",i.connectionID],"open",e),i.reconnectMode="retry",i.state="connected",i.resetReconnectCount("opened"),c()},m=function(){var N=l(function*(k){if(de.debug("[".concat(i.name,"] websocket close ").concat(i.websocket&&i.websocket.url,", code: ").concat(k.code,", reason: ").concat(k.reason,", current mode: ").concat(i.reconnectMode)),i1("debug",["WebSocket",i.connectionID],"close",{code:k.code,reason:k.reason,url:i.websocket&&i.websocket.url,reconnectMode:i.reconnectMode}),i.reconnectCount<i.retryConfig.maxRetryCount){"connected"===i.state&&(i.reconnectReason=k.reason,i.state="reconnecting");const U=N2(i,Nh.WILL_RECONNECT,i.reconnectMode)||i.reconnectMode,V=yield i.reconnectWithAction(U);if("closed"===i.state)return de.debug("[".concat(i.connectionID,"] ws is closed, no need to reconnect")),void pl("debug",i,"ws is closed, no need to reconnect");if(!V)return h(new ea(_t.WS_DISCONNECT,"websocket reconnect failed: ".concat(k.code))),void i.close(!0);c()}else h(new ea(_t.WS_DISCONNECT,"websocket close: ".concat(k.code))),i.close()});return function(U){return N.apply(this,arguments)}}(),C=N=>{i.emit(Nh.ON_MESSAGE,N)};i.websocket&&(i.websocket.onclose=null,i.websocket.close()),ya("GATEWAY_WSS_ADDRESS")&&i.name.startsWith("gateway")&&(e=ya("GATEWAY_WSS_ADDRESS")),de.debug("[".concat(i.name,"] start connect, url: ").concat(e)),pl("debug",i,"start connect, url: ".concat(e));const y=null===(g=i.store)||void 0===g?void 0:g.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});i.chooseBestWebsocketConnection(e,!!n,y).then(N=>{var k;i.websocket=N,v&&v(),N.onclose=m,N.onmessage=C,null===(k=i.store)||void 0===k||k.recordJoinChannelService({endTs:Date.now(),status:"success"},y),i.joinChannelServiceRecordIndex=y}).catch(N=>{var k;if(null===(k=i.store)||void 0===k||k.recordJoinChannelService({endTs:Date.now(),status:N instanceof ea&&N.code===_t.WS_ABORT?"aborted":"error",errors:[N]},y),"closed"!==i.state){if(N instanceof ea&&N.code===_t.WS_ERR){const U=new ea(_t.WS_ERR,"init websocket failed! Error: ".concat(N.toString()));return de.error("[".concat(i.name,"]").concat(U)),Gc("error",i,"chooseBestWebsocketConnection",void 0,N.toString()),void h(U)}m&&m(N)}else h(new ea(_t.WS_DISCONNECT,"websocket is closed: ".concat(N.toString())))})})})()}reconnectWithAction(e){var n=arguments,i=this;return l(function*(){let c=!(n.length>1&&void 0!==n[1])||n[1];if(i.reconnectCount>=i.retryConfig.maxRetryCount||!i.urls||"closed"===i.state)return!1;i.onlineReconnectListener||ey.networkState!==yy.OFFLINE||(i.onlineReconnectListener=ey.onlineWaiter&&ey.onlineWaiter.then(()=>{i.onlineReconnectListener=void 0}));let h=!0;if(i.reconnectInterrupter=()=>{h=!1},c){const m=KW(i.reconnectCount,i.retryConfig);de.debug("[".concat(i.name,"] wait ").concat(m,"ms to reconnect websocket, mode: ").concat(e)),Gc("debug",i,"reconnectWithAction",{timeout:m,action:e}),yield _l.race([s_(m),i.onlineReconnectListener||new _l(()=>{})])}if("closed"===i.state||!h)return!1;i.reconnectCount+=1;const g=function(){var m=l(function*(C,y){i.emit(Nh.RECONNECT_CREATE_CONNECTION,y),yield i.createWebSocketConnection(C)});return function(y,N){return m.apply(this,arguments)}}();try{if("retry"===e){const m=i.urls[i.currentURLIndex];i.emit(Nh.RECONNECT_WAITTING_FINISH,e),yield g(m,e)}else if("tryNext"===e){if(i.currentURLIndex+=1,i.currentURLIndex>=i.urls.length)return yield i.reconnectWithAction("recover",!1);de.debug("[".concat(i.name,"] websocket url length: ").concat(i.urls.length," current index: ").concat(i.currentURLIndex)),pl("debug",i,"websocket url length: ".concat(i.urls.length," current index: ").concat(i.currentURLIndex));const m=i.urls[i.currentURLIndex];i.emit(Nh.RECONNECT_WAITTING_FINISH,e),yield g(m,e)}else if("recover"===e){de.debug("[".concat(i.name,"] request new urls")),pl("debug",i,"request new urls"),i.resetReconnectCount("recover mode"),i.emit(Nh.RECONNECT_WAITTING_FINISH,e),i.urls=yield E_(i,Nh.REQUEST_NEW_URLS),i.currentURLIndex=0;const m=i.urls[i.currentURLIndex];yield g(m,e)}return!0}catch(m){var v;return de.error("[".concat(i.name,"] reconnect failed"),m.toString()),Gc("error",i,"reconnectWithAction",void 0,m.toString()),null!=m&&null!==(v=m.data)&&void 0!==v&&v.desc&&Array.isArray(m.data.desc)&&m.data.desc.length&&m.data.desc.includes("dynamic key expired")?(i.emit(Nh.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):yield i.reconnectWithAction(e,c)}})()}chooseBestWebsocketConnection(e,n,i){var c=this;return l(function*(){return new _l((h,g)=>{let v=!1;const m=[];c.closeEstablishingWs=()=>{de.debug("[choose-best-ws] close establishing websockets"),m.forEach($=>{$.onclose=null,$.onopen=null,$.onmessage=null,$.close()}),g(new ea(_t.WS_ABORT,"choose best websocket aborted"))};const C=ya("GATEWAY_DOMAINS");let y;const N=e.indexOf("?h="),k=C.find($=>-1!==N?e.includes($,N):e.includes($));de.debug("[choose-best-ws] currentDomain: ",k,", domains: ",C),Gc("debug",c,"chooseBestWebsocketConnection",{currentDomain:k,domains:C});let U=!c.tryDoubleDomain||n||!k;if(!U&&k){var V;const $=Date.now();try{C.forEach(Z=>{const ye=-1===N?e.replace(k,Z):e.substr(0,N)+e.substr(N).replace(k,Z),be=new WebSocket(ye);be.binaryType="arraybuffer",m.push(be),de.debug("[choose-best-ws] ws is connecting:",be.url),pl("debug",c,"ws is connecting: ".concat(be.url))})}catch(Z){for(de.debug("[choose-best-ws] ws create failed, fallback to single url"),pl("debug",c,"ws create failed, fallback to single url"),m.forEach(ye=>ye.close());m.length;)m.pop();U=!0}null===(V=c.store)||void 0===V||V.recordJoinChannelService({urls:m.map(Z=>Z.url),service:"gateway"},i),m.forEach(Z=>{Z.onopen=()=>{if(v)return;const ye=Date.now()-$;de.debug("[choose-best-ws] ws open cost ".concat(ye,"ms")),m.filter(be=>be!==Z).forEach(be=>{de.debug("[choose-best-ws]close backup websocket: ".concat(be.url)),pl("debug",c,"close backup websocket: ".concat(be.url)),be.close()}),v=!0,h(Z)},Z.onclose=ye=>{y=ye,!v&&(m.find(be=>!(be.readyState===WebSocket.CLOSED||be.readyState===WebSocket.CLOSING))||(de.debug("[choose-best-ws] all websocket is closed"),pl("debug",c,"all websocket is closed"),v=!0,g(y)))},Z.onmessage=ye=>{de.debug("[choose-best-ws]".concat(Z.url," onmessage: ").concat(ye.data)),pl("debug",c,"".concat(Z.url," onmessage: ").concat(ye.data))}}),s_(c.forceCloseTimeout).then(()=>{m.forEach(Z=>{Z.readyState!==WebSocket.OPEN&&Z.close()})})}if(U){var K;let $;de.debug("[choose-best-ws] use single url: ",e),pl("debug",c,"use single url: ".concat(e)),null===(K=c.store)||void 0===K||K.recordJoinChannelService({urls:[e],service:"gateway"},i);try{$=new WebSocket(e),m.push($),$.binaryType="arraybuffer"}catch(Z){const ye=new ea(_t.WS_ERR,"init websocket failed! Error: ".concat(Z.toString()));return de.error("[".concat(c.name,"]").concat(ye)),Gc("error",c,"chooseBestWebsocketConnection",void 0,Z.toString()),void g(ye)}$.onopen=()=>{h($)},$.onclose=Z=>{g(Z)},$.onmessage=Z=>{de.debug("[choose-best-ws]".concat($.url," onmessage: ").concat(Z.data)),pl("debug",c,"".concat($.url," onmessage: ").concat(Z.data))},s_(c.forceCloseTimeout).then(()=>{$&&$.readyState!==WebSocket.OPEN&&$.close()})}}).then(h=>(c.closeEstablishingWs=void 0,h)).catch(h=>{throw c.closeEstablishingWs=void 0,h})})()}})||$Ae;class eme{constructor(n){Y(this,"input",[]),Y(this,"size",void 0),this.size=n}add(n){this.input.push(n),this.input.length>this.size&&this.input.splice(0,1)}mean(){var n;return 0===this.input.length?0:_A(n=this.input).call(n,(i,c)=>i+c)/this.input.length}}var tme;let dT,nme=uy("AgoraRTCSignal","websocket.connectionID")(tme=class extends f0{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===Up.CONNECTED?this.emit(Ll.WS_CONNECTED):e===Up.RECONNECTING?this.emit(Ll.WS_RECONNECTING,this._websocketReconnectReason):e===Up.CLOSED&&this.emit(Ll.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(e,n){super(),Y(this,"_disconnectedReason",void 0),Y(this,"_websocketReconnectReason",void 0),Y(this,"_connectionState",Up.CLOSED),Y(this,"reconnectToken",void 0),Y(this,"websocket",void 0),Y(this,"openConnectionTime",void 0),Y(this,"clientId",void 0),Y(this,"lastMsgTime",Date.now()),Y(this,"uploadCache",[]),Y(this,"uploadCacheInterval",void 0),Y(this,"rttRolling",new eme(5)),Y(this,"pingpongTimer",void 0),Y(this,"wsInflateDataTimer",void 0),Y(this,"pingpongTimeoutCount",0),Y(this,"joinResponse",void 0),Y(this,"multiIpOption",void 0),Y(this,"initError",void 0),Y(this,"spec",void 0),Y(this,"store",void 0),Y(this,"onWebsocketMessage",i=>{if(i.data instanceof ArrayBuffer)return void this.emit(Ll.ON_BINARY_DATA,i.data);const c=JSON.parse(i.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(c,"_id")){const h="res-@".concat(c._id);this.emit(h,c._result,c._message)}else if(Object.prototype.hasOwnProperty.call(c,"_type")){if(this.emit(c._type,c._message),c._type===Kh.ON_NOTIFICATION&&this.handleNotification(c._message),c._type===Kh.ON_USER_BANNED)switch(c._message.error_code){case 14:this.close(Rp.UID_BANNED);break;case 15:this.close(Rp.IP_BANNED);break;case 16:this.close(Rp.CHANNEL_BANNED)}if(c._type===Kh.ON_USER_LICENSE_BANNED)switch(c._message.error_code){case Ql.ERR_LICENSE_MISSING:this.close(Rp.LICENSE_MISSING);break;case Ql.ERR_LICENSE_EXPIRED:this.close(Rp.LICENSE_EXPIRED);break;case Ql.ERR_LICENSE_MINUTES_EXCEEDED:this.close(Rp.LICENSE_MINUTES_EXCEEDED);break;case Ql.ERR_LICENSE_PERIOD_INVALID:this.close(Rp.LICENSE_PERIOD_INVALID);break;case Ql.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(Rp.LICENSE_MULTIPLE_SDK_SERVICE);break;case Ql.ERR_LICENSE_ILLEGAL:this.close(Rp.LICENSE_ILLEGAL);break;default:this.close()}}}),this.clientId=e.clientId,this.spec=e,this.store=n,this.websocket=new JQ("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,n),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===Up.CONNECTED&&this.reconnect("retry",f_.OFFLINE)})}request(e,n,i,c){var h=this;return l(function*(){const g=x0(6,""),v={_id:g,_type:e,_message:n},m=h.websocket.connectionID,C=()=>new _l((K,$)=>{if(h.connectionState===Up.CONNECTED)return K();const Z=()=>{h.off(Ll.WS_CLOSED,ye),K()},ye=()=>{h.off(Ll.WS_CONNECTED,Z),$(new ea(_t.WS_ABORT))};h.once(Ll.WS_CONNECTED,Z),h.once(Ll.WS_CLOSED,ye),e!==ql.PUBLISH&&e!==ql.SUBSCRIBE&&e!==ql.UNSUBSCRIBE&&e!==ql.UNPUBLISH&&e!==ql.CONTROL&&e!==ql.RESTART_ICE||h.once(Ll.DISCONNECT_P2P,()=>{$(new ea(_t.DISCONNECT_P2P))}),e!==ql.PUBLISH&&e!==ql.RESTART_ICE||h.once(Ll.ABORT_P2P_EXECUTION,()=>{$(new ea(_t.DISCONNECT_P2P))})});if(h.connectionState!==Up.CONNECTING&&h.connectionState!==Up.RECONNECTING||e===ql.JOIN||e===ql.REJOIN||(yield C()),h.websocket.sendMessage(v,!0),c)return;const y=new _l((K,$)=>{let Z=!1;const ye=(_s,ua)=>{Z=!0,K({isSuccess:"success"===_s,message:ua||{}}),h.off(Ll.WS_CLOSED,be),h.off(Ll.WS_RECONNECTING,be),h.emit(Ll.REQUEST_SUCCESS,e,n)};h.once("res-@".concat(g),ye);const be=()=>{$(new ea(_t.WS_ABORT,"type: ".concat(e))),h.off(Ll.WS_CLOSED,be),h.off(Ll.WS_RECONNECTING,be),h.off("res-@".concat(g),ye)};h.once(Ll.WS_CLOSED,be),h.once(Ll.WS_RECONNECTING,be),s_(ya("SIGNAL_REQUEST_TIMEOUT")).then(()=>{h.websocket.connectionID!==m||Z||(de.warning("ws request timeout, type: ".concat(e)),pl("warning",h,"ws request timeout, type: ".concat(e)),h.emit(Ll.REQUEST_TIMEOUT,e,n))})});let N=null;try{N=yield y}catch(K){if(h.connectionState===Up.CLOSED||e===ql.LEAVE)throw new ea(_t.WS_ABORT);return!h.spec.forceWaitGatewayResponse||i?K.throw():e===ql.JOIN||e===ql.REJOIN?null:(yield C(),yield h.request(e,n))}if(N.isSuccess)return N.message;const k=Number(N.message.error_code||N.message.code),U=JY(k),V=new ea(_t.UNEXPECTED_RESPONSE,"".concat(U.desc,": ").concat(N.message.error_str),{code:k,data:N.message});return"success"===U.action?N.message:(de.warning("[".concat(h.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(k,", message: ").concat(U.desc,", action: ").concat(U.action)),pl("warning",h,"unexpected response from type ".concat(e,", error_code: ").concat(k,", message: ").concat(U.desc,", action: ").concat(U.action)),k===Ql.ERR_TOO_MANY_BROADCASTERS?((e===ql.JOIN||e===ql.REJOIN)&&(h.initError=V,h.close()),V.throw()):"failed"===U.action?V.throw():"quit"===U.action?(h.initError=V,h.close(),V.throw()):(k===Ql.ERR_JOIN_BY_MULTI_IP?(h.multiIpOption=N.message.option,de.warning("[".concat(h.clientId,"] detect multi ip, recover")),pl("warning",h,"detect multi ip, recover"),h.reconnect("recover",f_.MULTI_IP)):h.reconnect(U.action,f_.SERVER_ERROR),e===ql.JOIN||e===ql.REJOIN?null:yield h.request(e,n)))})()}waitMessage(e,n){return new _l(i=>{const c=h=>{(!n||n(h))&&(this.off(e,c),i(h))};this.on(e,c)})}upload(e,n){const i={_type:e,_message:n};try{this.websocket.sendMessage(i)}catch(c){const h=ya("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(i),this.uploadCache.length>h&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==Up.CONNECTED)return;const g=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(g._type,g._message)},ya("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,n){this.websocket.sendMessage({_type:e,_message:n})}init(e,n){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new _l((i,c)=>{this.once(Ll.WS_CONNECTED,()=>i(this.joinResponse)),this.once(Ll.WS_CLOSED,()=>c(this.initError||new ea(_t.WS_ABORT))),this.connectionState=Up.CONNECTING,this.websocket.init(e).catch(c),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval(()=>{this.handleWsInflateData()},2e4),setTimeout(()=>{n&&void 0===this.openConnectionTime&&(de.debug("[".concat(this.clientId,"] init websocket timeout while join with fallback to proxy")),c(new ea(_t.INIT_WEBSOCKET_TIMEOUT)))},ya("JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION"))})}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||Rp.LEAVE,this.connectionState=Up.CLOSED,de.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),e===Rp.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new JQ("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,this.store),this.handleWebsocketEvents())}join(){var e=this;return l(function*(){if(!e.joinResponse){e.emit(Ll.ABORT_P2P_EXECUTION);const n=yield E_(e,Ll.REQUEST_JOIN_INFO),i=yield e.request(ql.JOIN,n);if(!i)return e.emit(Ll.REPORT_JOIN_GATEWAY,_t.TIMEOUT,e.url||""),!1;e.joinResponse=i,e.emit(Ll.JOIN_RESPONSE,e.joinResponse),e.reconnectToken=e.joinResponse.rejoin_token}return e.connectionState=Up.CONNECTED,e.pingpongTimer&&window.clearInterval(e.pingpongTimer),e.pingpongTimer=window.setInterval(e.handlePingPong.bind(e),3e3),!0})()}rejoin(){var e=this;return l(function*(){if(!e.reconnectToken)throw new ea(_t.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const n=tj(e,Ll.REQUEST_REJOIN_INFO);n.token=e.reconnectToken;const i=yield e.request(ql.REJOIN,n);return!!i&&(e.connectionState=Up.CONNECTED,e.pingpongTimer&&window.clearInterval(e.pingpongTimer),e.pingpongTimer=window.setInterval(e.handlePingPong.bind(e),3e3),i.peers&&i.peers.forEach(c=>{e.emit(Kh.ON_USER_ONLINE,{uid:c.uid}),c.audio&&e.emit(Kh.ON_ADD_AUDIO_STREAM,{uid:c.uid,uint_id:c.uint_id,audio:!0,ssrcId:c.audio_ssrc}),c.video&&e.emit(Kh.ON_ADD_VIDEO_STREAM,{uid:c.uid,uint_id:c.uint_id,video:!0,ssrcId:c.video_ssrc}),e.emit(c.audio_mute?Kh.MUTE_AUDIO:Kh.UNMUTE_AUDIO,{uid:c.uid}),e.emit(c.video_mute?Kh.MUTE_VIDEO:Kh.UNMUTE_VIDEO,{uid:c.uid}),e.emit(c.audio_enable_local?Kh.ENABLE_LOCAL_AUDIO:Kh.DISABLE_LOCAL_AUDIO,{uid:c.uid}),e.emit(c.video_enable_local?Kh.ENABLE_LOCAL_VIDEO:Kh.DISABLE_LOCAL_VIDEO,{uid:c.uid}),c.audio||c.video||e.emit(Kh.ON_REMOVE_STREAM,{uid:c.uid,uint_id:c.uint_id})}),!0)})()}reconnect(e,n){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,n)}handleNotification(e){de.debug("[".concat(this.clientId,"] receive notification: "),e),Gc("debug",this,"handleNotification",e);const n=JY(e.code);if("success"!==n.action)return"failed"===n.action?(de.error("[".concat(this.clientId,"] ignore error: "),n.desc),void pl("error",this,"ignore error: ".concat(n.desc))):"quit"===n.action?("ERR_REPEAT_JOIN_CHANNEL"===n.desc&&this.close(Rp.UID_BANNED),void this.close()):void this.reconnect(n.action,f_.SERVER_ERROR)}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=ya("PING_PONG_TIME_OUT"),n=Date.now();this.pingpongTimeoutCount>=e&&(de.warning("PINGPONG Timeout. Last Socket Message: ".concat(n-this.lastMsgTime,"ms")),pl("warning",this,"PINGPONG Timeout. Last Socket Message: ".concat(n-this.lastMsgTime,"ms")),n-this.lastMsgTime>ya("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",f_.TIMEOUT):this.request(ql.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const i=Date.now()-n;this.rttRolling.add(i),ya("REPORT_STATS")&&this.send(ql.PING_BACK,{pingpongElapse:i})}).catch(i=>{})}handleWsInflateData(){const{wsInflateLength:e,wsDeflateLength:n}=this.websocket.getWsInflateData();0!==e&&0!==n&&this.upload(p_.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:n,ws_inflate_length:e})}handleWebsocketEvents(){this.websocket.on(Nh.RECONNECT_WAITTING_FINISH,e=>{this.emit(Ll.WS_RECONNECT_WAITTING_FINISH,e)}),this.websocket.on(Nh.RECONNECT_CREATE_CONNECTION,e=>{this.emit(Ll.WS_RECONNECT_CREATE_CONNECTION,e)}),this.websocket.on(Nh.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(Nh.CLOSED,()=>{this.connectionState=Up.CLOSED}),this.websocket.on(Nh.FAILED,()=>{this._disconnectedReason=Rp.NETWORK_ERROR,this.connectionState=Up.CLOSED}),this.websocket.on(Nh.RECONNECTING,e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState=this.connectionState===Up.CONNECTED?Up.RECONNECTING:Up.CONNECTING}),this.websocket.on(Nh.WILL_RECONNECT,(e,n)=>{if(tj(this,Ll.IS_P2P_DISCONNECTED)&&"retry"===e)return de.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),pl("debug",this,"".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit(Ll.NEED_RENEW_SESSION),this.emit(Ll.DISCONNECT_P2P),n("tryNext");"retry"!==e&&(de.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(e)),pl("debug",this,"".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(e)),this.reconnectToken=void 0,this.emit(Ll.NEED_RENEW_SESSION),this.emit(Ll.DISCONNECT_P2P)),n(e)}),this.websocket.on(Nh.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(e=>{de.warning("[".concat(this.clientId,"] rejoin failed ").concat(e)),Gc("warning",this,"rejoin",void 0,e.toString()),this.reconnect("tryNext",f_.SERVER_ERROR)}):this.join().catch(e=>{if(this.emit(Ll.REPORT_JOIN_GATEWAY,e.message||e.code,this.url||""),e instanceof ea&&e.code===_t.UNEXPECTED_RESPONSE&&e.data.code===Ql.ERR_NO_AUTHORIZED)return de.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),pl("warning",this,"reconnect no authorized, recover"),void this.reconnect("recover",f_.SERVER_ERROR);de.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),Gc("error",this,"join",void 0,e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",f_.SERVER_ERROR):(this.initError=e,this.close())})}),this.websocket.on(Nh.REQUEST_NEW_URLS,(e,n)=>{E_(this,Ll.REQUEST_RECOVER,this.multiIpOption).then(e).catch(n)}),this.websocket.on(Nh.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(Kh.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})}})||tme;function rme(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);n&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),i.push.apply(i,c)}return i}class Lbe extends f0{get url(){return this._url?this._url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(n){["tryNext","recover"].includes(n)&&this.resetReconnectCount(n),this._reconnectMode=n}get state(){return this._state}set state(n){n!==this._state&&(this._state=n,"reconnecting"===this._state?this.emit(b0.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(b0.CONNECTED):"closed"===this._state?this.emit(b0.CLOSED):"failed"===this._state&&this.emit(b0.FAILED))}constructor(n,i,c,h){super(),Y(this,"connectionID",0),Y(this,"currentURLIndex",0),Y(this,"reconnectReason",void 0),Y(this,"_reconnectMode","tryNext"),Y(this,"_initMutex",void 0),Y(this,"_name",void 0),Y(this,"_state","closed"),Y(this,"_reconnectInterrupter",void 0),Y(this,"_url",void 0),Y(this,"_retryConfig",void 0),Y(this,"_reconnectCount",0),Y(this,"_forceCloseTimeout",5e3),Y(this,"_onlineReconnectListener",void 0),Y(this,"_messageSender",void 0),Y(this,"_closeEstablishingTransmitter",()=>{}),Y(this,"_store",void 0),Y(this,"_joinChannelServiceRecordIndex",void 0),Y(this,"_transmitter",void 0),Y(this,"_compressor",new XAe),Y(this,"_compressorInitStatus","initializing"),Y(this,"_compress",void 0),Y(this,"_useCompress",void 0),Y(this,"_inflateLength",0),Y(this,"_deflateLength",0),this._store=h,this._name=n,this._retryConfig=function(g){for(var v=1;v<arguments.length;v++){var m=null!=arguments[v]?arguments[v]:{};v%2?rme(Object(m),!0).forEach(function(C){Y(g,C,m[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(m)):rme(Object(m)).forEach(function(C){Object.defineProperty(g,C,Object.getOwnPropertyDescriptor(m,C))})}return g}({},i),this._useCompress=c}resetReconnectCount(n){de.debug("".concat(this._name," reset reconnect count, reason: ").concat(n)),Gc("debug",this,"resetReconnectCount",n,"".concat(this._name," reset reconnect count, reason: ").concat(n)),this._reconnectCount=0}close(n,i){var c;if(this.currentURLIndex=0,this.resetReconnectCount("close"),null===(c=this._messageSender)||void 0===c||c.reset(),this._reconnectInterrupter&&this._reconnectInterrupter(),this._transmitter){this._transmitter.onclose=null,this._transmitter.onopen=null,this._transmitter.onmessage=null;const h=this._transmitter;i?setTimeout(()=>h.close(),500):h.close(),this._transmitter=void 0}this.state=n?"failed":"closed",this._closeEstablishingTransmitter&&this._closeEstablishingTransmitter()}reconnect(n,i){if(!this._transmitter)return de.warning("[".concat(this._name,"] can not reconnect, no websocket")),void Gc("warning",this,"reconnect","can not reconnect, no websocket");var c;void 0!==n&&(this.reconnectMode=n),de.debug("[".concat(this._name,"] reconnect is triggered initiative")),Gc("debug",this,"reconnect"),"number"==typeof this._joinChannelServiceRecordIndex&&(null===(c=this._store)||void 0===c||c.recordJoinChannelService({status:"error",errors:[new Error(i)]},this._joinChannelServiceRecordIndex));const h=this._transmitter.onclose;this._transmitter.onclose=null,this._transmitter.close(),h&&h.bind(this._transmitter)({code:9999,reason:i})}getInflateData(){const n=this._inflateLength,i=this._deflateLength;return this.clearInflateData(),{inflateLength:n,deflateLength:i}}setInflateData(n){this._deflateLength=this._deflateLength+n.originLength,this._inflateLength=this._inflateLength+n.compressedLength}clearInflateData(){this._inflateLength=0,this._deflateLength=0}}function ime(e,n,i){if("getBigUint64"in DataView.prototype)return e.getBigUint64(n,i);const c=e.getUint32(n,i),h=e.getUint32(n+4,i),g=Number(!!i),v=Number(!i);return BigInt(c*v+h*g)<<BigInt(32)|BigInt(c*g+h*v)}function ome(e,n,i,c){if("setBigUint64"in DataView.prototype)return e.setBigUint64(n,i,c);const h=Number(i>>BigInt(32)),g=Number(i&BigInt(4294967295));c?(e.setUint32(n+4,h,c),e.setUint32(n,g,c)):(e.setUint32(n,h,c),e.setUint32(n+4,g,c))}!function(e){e[e.Default=0]="Default",e[e.Ack=1]="Ack"}(dT||(dT={}));class Pbe{constructor(n,i,c){Y(this,"version",1),Y(this,"initialRTO",void 0),Y(this,"maxBatchAckCount",void 0),Y(this,"maxRTO",void 0),Y(this,"initialRTT",void 0),Y(this,"ID",void 0),Y(this,"rtt",void 0),Y(this,"packetNumber",1),Y(this,"rtoRatioMap",new Map),Y(this,"timeoutMap",new Map),Y(this,"unorderedPacketQueue",[]),Y(this,"batchAckPacketQueue",[]),Y(this,"lastOrderedPacketNumber",0),Y(this,"batchAckTimer",void 0),Y(this,"sendImpl",void 0),Y(this,"receiveImpl",void 0),this.sendImpl=n,this.receiveImpl=i,this.ID=x0(7,"transmitter-"),this.initialRTO=void 0!==(null==c?void 0:c.initialRTO)?c.initialRTO:ya("TRANSMITTER_INITIAL_RTO"),this.initialRTT=void 0!==(null==c?void 0:c.initialRTT)?c.initialRTT:ya("TRANSMITTER_INITIAL_RTT"),this.rtt=void 0!==(null==c?void 0:c.initialRTT)?c.initialRTT:ya("TRANSMITTER_INITIAL_RTT"),this.maxBatchAckCount=void 0!==(null==c?void 0:c.maxBatchAckCount)?c.maxBatchAckCount:ya("TRANSMITTER_MAX_BATCH_ACK_COUNT"),this.maxRTO=void 0!==(null==c?void 0:c.maxRTO)?c.maxRTO:ya("TRANSMITTER_MAX_RTO")}packetize(n,i){return{type:dT.Default,version:this.version,packetNumber:i,payload:n}}serialize(n){switch(n.type){case dT.Default:{let i;i="string"==typeof n.payload?(new TextEncoder).encode(n.payload):n.payload;const c=new ArrayBuffer(i.length+15),h=new DataView(c);return h.setUint16(0,n.version),h.setUint8(2,n.type),h.setUint32(3,n.packetNumber),ome(h,7,BigInt(n.sendTs)),new Uint8Array(h.buffer).set(i,15),c}case dT.Ack:{const i=new ArrayBuffer(16),c=new DataView(i);return c.setUint16(0,n.version),c.setUint8(2,n.type),c.setUint32(3,n.maxAckPacketNumber),c.setUint8(7,n.shift),ome(c,8,BigInt(n.ackSendTs)),i}}}deserialize(n){const i=new DataView(n),c=i.getUint16(0),h=i.getUint8(2);switch(h){case dT.Default:{const g=i.getUint32(3),v=ime(i,7),m=n.slice(15),C=(new TextDecoder).decode(m);return{version:c,type:h,packetNumber:g,sendTs:Number(v),payload:C}}case dT.Ack:{const g=i.getUint32(3),v=i.getUint8(7),m=ime(i,8);return{version:c,type:h,maxAckPacketNumber:g,shift:v,ackSendTs:Number(m)}}default:throw de.error("[".concat(this.ID,"] Unrecognized packet type ").concat(h)),new Error("Unrecognized packet type ".concat(h))}}sendMessage(n){const i=this.packetize(n,this.packetNumber);this.packetNumber=4294967295===this.packetNumber?1:this.packetNumber+1;const c=this.calculateRTO(i),h=window.setTimeout(()=>{this.resendMessage(i)},c);this.timeoutMap.set(i.packetNumber,h),this.sendPacket(i)}onData(n){const i=this.deserialize(n);i.type===dT.Default?this.ack(i):i.type===dT.Ack&&(this.updateRTT(i,Math.round(performance.now())),this.clearRTO(i))}close(){this.rtt=this.initialRTT,this.packetNumber=1,Array.from(this.timeoutMap.entries()).forEach(n=>{let[i,c]=n;window.clearTimeout(c)}),this.timeoutMap=new Map,this.rtoRatioMap=new Map,this.unorderedPacketQueue=[],this.batchAckPacketQueue=[],this.lastOrderedPacketNumber=0,void 0!==this.batchAckTimer&&window.clearTimeout(this.batchAckTimer)}resendMessage(n){const i=this.calculateRTO(n),c=window.setTimeout(()=>{this.resendMessage(n)},i);this.timeoutMap.set(n.packetNumber,c),this.sendPacket(n)}calculateRTO(n){const i=this.rtoRatioMap.get(n.packetNumber);if(void 0===i)return this.rtoRatioMap.set(n.packetNumber,1),this.initialRTO;{const c=9*this.rtt/8*i;return this.rtoRatioMap.set(n.packetNumber,i+1),c>this.maxRTO?this.maxRTO:c}}updateRTT(n,i){this.rtt=this.rtt*(7/8)+(i-n.ackSendTs-this.rtt)/8}ack(n){if(n.packetNumber===this.lastOrderedPacketNumber+1)for(this.batchAckPacketQueue.length>=this.maxBatchAckCount&&this.batchAck(),this.batchAckTimer?this.batchAckPacketQueue.push(n):(this.batchAckPacketQueue.push(n),this.batchAckTimer=window.setTimeout(()=>{this.batchAck()},this.rtt/8)),this.lastOrderedPacketNumber+=1,this.receiveImpl(n.payload);;){const i=this.unorderedPacketQueue[0];if(!i){this.unorderedPacketQueue.shift();break}this.batchAckTimer&&this.batchAck(),this.receiveImpl(i.payload),this.unorderedPacketQueue.shift(),this.lastOrderedPacketNumber+=1}else n.packetNumber<=this.lastOrderedPacketNumber?this.sendPacket({ackSendTs:n.sendTs,maxAckPacketNumber:n.packetNumber,shift:0,type:dT.Ack,version:this.version}):n.packetNumber>this.lastOrderedPacketNumber&&(this.unorderedPacketQueue[n.packetNumber-this.lastOrderedPacketNumber-2]=n,this.sendPacket({ackSendTs:n.sendTs,maxAckPacketNumber:n.packetNumber,shift:0,type:dT.Ack,version:this.version}))}batchAck(){window.clearTimeout(this.batchAckTimer),this.batchAckTimer=void 0,this.sendPacket({ackSendTs:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].sendTs,maxAckPacketNumber:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].packetNumber,shift:this.batchAckPacketQueue.length-1,type:dT.Ack,version:this.version}),this.batchAckPacketQueue=[]}sendPacket(n){n.type===dT.Default&&(n.sendTs=Math.round(performance.now()));const i=this.serialize(n);this.sendImpl(i)}clearRTO(n){for(let i=n.maxAckPacketNumber-n.shift;i<=n.maxAckPacketNumber;i++){const c=this.timeoutMap.get(i);void 0!==c&&window.clearTimeout(c),this.timeoutMap.delete(i),this.rtoRatioMap.delete(i)}}}class xbe extends f0{get queue(){return[...this.highPriorityQueue,...this.lowPriorityQueue]}constructor(n){super(),Y(this,"lowPriorityQueue",[]),Y(this,"highPriorityQueue",[]),Y(this,"AgoraTransmissionManager",void 0),this.AgoraTransmissionManager=n}reset(){this.lowPriorityQueue=[],this.highPriorityQueue=[]}pushMessage(n){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.highPriorityQueue.push(n):this.lowPriorityQueue.push(n),this.sendMessage()}sendMessage(){const n=this.queue.length;let i=0;i=n<5?15*n:60+3*(n-4),setTimeout(()=>{this._sendMessage()},i)}_sendMessage(){if(!this.queue.length)return;const n=this.AgoraTransmissionManager.getConnection();if(!n)return;const i=this.queue.shift();return this.lowPriorityQueue.includes(i)?this.lowPriorityQueue.shift():this.highPriorityQueue.shift(),n.sendMessage(i.compressed),i}}var sme;let ame=uy("AgoraDatachannelManager","connectionID")(sme=class extends Lbe{constructor(e,n){super(e,n,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3?arguments[3]:void 0),Y(this,"_initMutex",void 0),Y(this,"_reconnectInterrupter",void 0),Y(this,"_url",void 0),Y(this,"_transmitter",void 0),Y(this,"_addresses",void 0),Y(this,"_reliableTransmission",void 0),this._initMutex=new _I("datachannel");const{timeout:i,timeoutFactor:c}=n,h=Math.max(300,Math.floor(3*i/5)),g=Math.max(1.2,Math.floor(8*c)/10);yy.ONLINE&&(this._retryConfig.timeout=h,this._retryConfig.timeoutFactor=g),ey.on(nT.NETWORK_STATE_CHANGE,(m,C)=>{m!==C&&(this.resetReconnectCount("network state change: ".concat(C," -> ").concat(m)),m===yy.ONLINE?(this._retryConfig.timeout=h,this._retryConfig.timeoutFactor=g):(this._retryConfig.timeout=i,this._retryConfig.timeoutFactor=c))});const v=Date.now();this._compressor.init().then(()=>{this._compressorInitStatus="initialized";const m=Date.now()-v;de.debug("datachannel compressor initialized successfully in ".concat(m,"ms")),Gc("debug",this._compressor,"init",void 0,"datachannel compressor initialized successfully in ".concat(m,"ms")),qc.wsCompressorInit({status:!0,ec:null,eventElapse:m}),this._compress=this._compressor.compress.bind(this._compressor)}).catch(m=>{this._compressorInitStatus="failed";const C=m?m.message||m.toString():"Empty Error";de.debug("datachannel compressor failed to initialize because of ".concat(C)),Gc("debug",this._compressor,"init",void 0,"datachannel compressor failed to initialize because of ".concat(C)),qc.wsCompressorInit({status:!1,ec:C,eventElapse:1})})}getConnection(){if(this._reliableTransmission)return this._reliableTransmission}init(e){var n=arguments,i=this;return l(function*(){i._forceCloseTimeout=n.length>1&&void 0!==n[1]?n[1]:5e3;return i._initMutex.lock().then(g=>new _l((v,m)=>{((g,v)=>{i._addresses=e,i.currentURLIndex=i._addresses.findIndex(C=>C.fingerprint||ya("FINGERPRINT"));const m=i._addresses[i.currentURLIndex];i.state="connecting",i._messageSender=new xbe(i),i.createTransmitterConnection(m).then(g).catch(v),i.once(b0.CLOSED,()=>v(new ea(_t.WS_DISCONNECT))),i.once(b0.CONNECTED,()=>g())})(v,m)}).then(()=>{g()}).catch(()=>{g()}))})()}sendMessage(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._transmitter||!this._reliableTransmission)throw new ea(_t.WS_ABORT,"datachannel is not ready");try{let c=null;if(i)c=this.sendMessageWithUint8Array(e);else if("initialized"===this._compressorInitStatus&&this._useCompress&&ya("DATACHANNEL_COMPRESS"))try{c=this._compress(e),this.setInflateData(c)}catch(h){c=this.sendMessageWithJSON(e)}else c=this.sendMessageWithJSON(e);n?this._reliableTransmission.sendMessage(c.compressed):this._messageSender.pushMessage(c)}catch(c){throw new ea(_t.WS_ERR,"send datachannel signal message error"+c.toString())}}unbindDcCloseEventListener(){this._transmitter&&(this._transmitter.onclose=null)}sendMessageWithJSON(e){const n=JSON.stringify(e);return{compressed:n,compressedLength:n.length,origin:e}}sendMessageWithUint8Array(e){return{compressed:e,compressedLength:e.byteLength,origin:e}}createTransmitterConnection(e){var n=this;return this.connectionID+=1,this._joinChannelServiceRecordIndex=void 0,this._url="dc://".concat(e.ip,":").concat(e.port),new _l((i,c)=>{var h;const g=()=>{de.debug("[".concat(this._name,"] datachannel opened:"),this._url),i1("debug",["DataChannel",this.connectionID],"open",this._url),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),i()},v=function(){var N=l(function*(k){var U;if(null===(U=n._closeEstablishingTransmitter)||void 0===U||U.call(n),de.debug("[".concat(n._name,"] datachannel close ").concat(n._url,", code: ").concat(k.code,", reason: ").concat(k.reason,", current mode: ").concat(n.reconnectMode)),i1("debug",["DataChannel",n.connectionID],"close",{code:k.code,reason:k.reason,address:e,reconnectMode:n.reconnectMode}),n._reconnectCount<n._retryConfig.maxRetryCount){"connected"===n.state&&(n.reconnectReason=k.reason,n.state="reconnecting");const V=N2(n,b0.WILL_RECONNECT,n.reconnectMode)||n.reconnectMode,K=yield n.reconnectWithAction(V);if("closed"===n.state)return de.debug("[".concat(n.connectionID,"] dc is closed, no need to reconnect")),void pl("debug",n,"dc is closed, no need to reconnect");if(!K)return c(new ea(_t.WS_DISCONNECT,"datachannel reconnect failed: ".concat(k.code))),void n.close(!0);i()}else c(new ea(_t.WS_DISCONNECT,"datachannel close: ".concat(k.code))),n.close()});return function(U){return N.apply(this,arguments)}}(),m=N=>{var k;null===(k=this._reliableTransmission)||void 0===k||k.onData(N.data)};this._transmitter&&(this._transmitter.onclose=null,this._transmitter.close()),this._reliableTransmission&&(this._reliableTransmission.close(),this._reliableTransmission=void 0),de.debug("[".concat(this._name,"] start connect, address: ").concat(JSON.stringify(e))),pl("debug",this,"start connect, address: ".concat(JSON.stringify(e)));const C=null===(h=this._store)||void 0===h?void 0:h.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"}),y=Date.now();E_(this,b0.TO_CONNECT_DATACHANNEL,e).then(N=>{var k,U;if(!N)throw new Error("transmissonInfo not exist yet");const{transmitter:V,close:K}=N;this._transmitter=V,null===(k=this._store)||void 0===k||k.signalChannelOpen();const $=Date.now()-y;de.debug("[choose dc] dc open cost ".concat($,"ms")),this._reliableTransmission=new Pbe(Z=>{var ye;this._transmitter&&"open"===this._transmitter.readyState&&(null===(ye=this._transmitter)||void 0===ye||ye.send(Z))},Z=>{"string"==typeof Z&&this.emit(b0.ON_MESSAGE,Z)}),this._closeEstablishingTransmitter=()=>{var Z;null===(Z=this._reliableTransmission)||void 0===Z||Z.close(),this._reliableTransmission=void 0,K()},g&&g(),V.onclose=v,V.onmessage=m,null===(U=this._store)||void 0===U||U.recordJoinChannelService({endTs:Date.now(),status:"success"},C),this._joinChannelServiceRecordIndex=C}).catch(N=>{var k;if(null===(k=this._store)||void 0===k||k.recordJoinChannelService({endTs:Date.now(),status:N instanceof ea&&N.code===_t.WS_ABORT?"aborted":"error",errors:[N]},C),"closed"!==this.state){if(N instanceof ea&&N.code===_t.WS_ERR){const U=new ea(_t.WS_ERR,"init datachannel failed! Error: ".concat(N.toString()));return de.error("[".concat(this._name,"]").concat(U)),Gc("error",this,"chooseBestDataChannelConnection",void 0,N.toString()),void c(U)}v&&v(N)}else c(new ea(_t.WS_DISCONNECT,"datachannel is closed: ".concat(N.toString())))})})}reconnectWithAction(e){var n=arguments,i=this;return l(function*(){let c=!(n.length>1&&void 0!==n[1])||n[1];if(i._reconnectCount>=i._retryConfig.maxRetryCount||!i._addresses||"closed"===i.state)return!1;i._onlineReconnectListener||ey.networkState!==yy.OFFLINE||(i._onlineReconnectListener=ey.onlineWaiter&&ey.onlineWaiter.then(()=>{i._onlineReconnectListener=void 0}));let h=!0;if(i._reconnectInterrupter=()=>{h=!1},c){const m=KW(i._reconnectCount,i._retryConfig);de.debug("[".concat(i._name,"] wait ").concat(m,"ms to reconnect datachannel, mode: ").concat(e)),Gc("debug",i,"reconnectWithAction",{timeout:m,action:e}),yield _l.race([s_(m),i._onlineReconnectListener||new _l(()=>{})])}if("closed"===i.state||!h)return!1;i._reconnectCount+=1;const g=function(){var m=l(function*(C,y){i.emit(b0.RECONNECT_CREATE_CONNECTION,y),yield i.createTransmitterConnection(C)});return function(y,N){return m.apply(this,arguments)}}();try{if("retry"===e){const m=i._addresses[i.currentURLIndex];i.emit(b0.RECONNECT_WAITTING_FINISH,e),yield g(m,e)}else if("tryNext"===e){i.currentURLIndex+=1;for(let C=i.currentURLIndex;C<i._addresses.length;C++){if(i._addresses[C].fingerprint||ya("FINGERPRINT")){i.currentURLIndex=C;break}i.currentURLIndex+=1}if(i.currentURLIndex>=i._addresses.length)return de.debug("[".concat(i._name,"] the available addresses are exhausted, change to recover")),yield i.reconnectWithAction("recover",!1);de.debug("[".concat(i._name,"] datachannel url length: ").concat(i._addresses.length," current index: ").concat(i.currentURLIndex)),pl("debug",i,"datachannel url length: ".concat(i._addresses.length," current index: ").concat(i.currentURLIndex));const m=i._addresses[i.currentURLIndex];i.emit(b0.RECONNECT_WAITTING_FINISH,e),yield g(m,e)}else"recover"===e&&(de.debug("[".concat(i._name,"] start to failback to websocket")),pl("debug",i,"start to failback to websocket"),i.resetReconnectCount("recover mode"),i.emit(b0.RECONNECT_WAITTING_FINISH,e),i.emit(b0.FAILBACK));return!0}catch(m){var v;return de.error("[".concat(i._name,"] reconnect failed"),m.toString()),Gc("error",i,"reconnectWithAction",void 0,m.toString()),null!=m&&null!==(v=m.data)&&void 0!==v&&v.desc&&Array.isArray(m.data.desc)&&m.data.desc.length&&m.data.desc.includes("dynamic key expired")?(i.emit(b0.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):yield i.reconnectWithAction(e,c)}})()}})||sme;var cme;let CL=uy("AgoraDataChannelSignal","websocket.connectionID")(cme=class extends f0{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===Up.CONNECTED?this.emit(Ll.WS_CONNECTED):e===Up.RECONNECTING?this.emit(Ll.WS_RECONNECTING,this._websocketReconnectReason):e===Up.CLOSED&&this.emit(Ll.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(e,n){super(),Y(this,"_disconnectedReason",void 0),Y(this,"_websocketReconnectReason",void 0),Y(this,"_connectionState",Up.CLOSED),Y(this,"reconnectToken",void 0),Y(this,"websocket",void 0),Y(this,"openConnectionTime",void 0),Y(this,"clientId",void 0),Y(this,"lastMsgTime",Date.now()),Y(this,"uploadCache",[]),Y(this,"uploadCacheInterval",void 0),Y(this,"rttRolling",new eme(5)),Y(this,"pingpongTimer",void 0),Y(this,"inflateDataTimer",void 0),Y(this,"pingpongTimeoutCount",0),Y(this,"joinResponse",void 0),Y(this,"multiIpOption",void 0),Y(this,"initError",void 0),Y(this,"spec",void 0),Y(this,"store",void 0),Y(this,"onWebsocketMessage",i=>{if(i instanceof ArrayBuffer)return void this.emit(Ll.ON_BINARY_DATA,i);const c=JSON.parse(i);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(c,"_id")){const h="res-@".concat(c._id);this.emit(h,c._result,c._message)}else if(Object.prototype.hasOwnProperty.call(c,"_type")&&(this.emit(c._type,c._message),c._type===Kh.ON_NOTIFICATION&&this.handleNotification(c._message),c._type===Kh.ON_USER_BANNED))switch(c._message.error_code){case 14:this.close(Rp.UID_BANNED);break;case 15:this.close(Rp.IP_BANNED);break;case 16:this.close(Rp.CHANNEL_BANNED)}}),this.clientId=e.clientId,this.spec=e,this.store=n,this.websocket=new ame("gateway-".concat(this.clientId),this.spec.retryConfig,!0,n),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===Up.CONNECTED&&this.reconnect("retry",rT.OFFLINE)})}request(e,n,i,c){var h=this;return l(function*(){const g=x0(6,""),v={_id:g,_type:e,_message:n},m=h.websocket.connectionID,C=()=>new _l((K,$)=>{if(h.connectionState===Up.CONNECTED)return K();const Z=()=>{h.off(Ll.WS_CLOSED,ye),K()},ye=()=>{h.off(Ll.WS_CONNECTED,Z),$(new ea(_t.WS_ABORT))};h.once(Ll.WS_CONNECTED,Z),h.once(Ll.WS_CLOSED,ye),e!==ql.PUBLISH&&e!==ql.SUBSCRIBE&&e!==ql.UNSUBSCRIBE&&e!==ql.UNPUBLISH&&e!==ql.CONTROL&&e!==ql.RESTART_ICE||h.once(Ll.DISCONNECT_P2P,()=>{$(new ea(_t.DISCONNECT_P2P))}),e!==ql.PUBLISH&&e!==ql.RESTART_ICE||h.once(Ll.ABORT_P2P_EXECUTION,()=>{$(new ea(_t.DISCONNECT_P2P))})});if(h.connectionState!==Up.CONNECTING&&h.connectionState!==Up.RECONNECTING||e===ql.JOIN||e===ql.REJOIN||(yield C()),e===ql.LEAVE&&(h.websocket.unbindDcCloseEventListener(),c=!0),h.websocket.sendMessage(v,!0,!1),c)return;const y=new _l((K,$)=>{let Z=!1;const ye=(_s,ua)=>{Z=!0,K({isSuccess:"success"===_s,message:ua||{}}),h.off(Ll.WS_CLOSED,be),h.off(Ll.WS_RECONNECTING,be),h.emit(Ll.REQUEST_SUCCESS,e,n)};h.once("res-@".concat(g),ye);const be=()=>{$(new ea(_t.WS_ABORT,"type: ".concat(e))),h.off(Ll.WS_CLOSED,be),h.off(Ll.WS_RECONNECTING,be),h.off("res-@".concat(g),ye)};h.once(Ll.WS_CLOSED,be),h.once(Ll.WS_RECONNECTING,be),s_(ya("SIGNAL_REQUEST_TIMEOUT")).then(()=>{h.websocket.connectionID!==m||Z||(de.warning("dc request timeout, type: ".concat(e)),pl("warning",h,"dc request timeout, type: ".concat(e)),h.emit(Ll.REQUEST_TIMEOUT,e,n))})});let N=null;try{N=yield y}catch(K){if(h.connectionState===Up.CLOSED||e===ql.LEAVE)throw new ea(_t.WS_ABORT);return!h.spec.forceWaitGatewayResponse||i?K.throw():e===ql.JOIN||e===ql.REJOIN?null:(yield C(),yield h.request(e,n))}if(N.isSuccess)return N.message;const k=Number(N.message.error_code||N.message.code),U=JY(k),V=new ea(_t.UNEXPECTED_RESPONSE,"".concat(U.desc,": ").concat(N.message.error_str),{code:k,data:N.message});return"success"===U.action?N.message:(de.warning("[".concat(h.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(k,", message: ").concat(U.desc,", action: ").concat(U.action)),pl("warning",h,"unexpected response from type ".concat(e,", error_code: ").concat(k,", message: ").concat(U.desc,", action: ").concat(U.action)),k===Ql.ERR_TOO_MANY_BROADCASTERS?((e===ql.JOIN||e===ql.REJOIN)&&(h.initError=V,h.close()),V.throw()):"failed"===U.action?V.throw():"quit"===U.action?(h.initError=V,h.close(),V.throw()):(k===Ql.ERR_JOIN_BY_MULTI_IP?(h.multiIpOption=N.message.option,de.warning("[".concat(h.clientId,"] detect multi ip, recover")),pl("warning",h,"detect multi ip, recover"),h.reconnect("recover",rT.MULTI_IP)):h.reconnect(U.action,rT.SERVER_ERROR),e===ql.JOIN||e===ql.REJOIN?null:yield h.request(e,n)))})()}waitMessage(e,n){return new _l(i=>{const c=h=>{(!n||n(h))&&(this.off(e,c),i(h))};this.on(e,c)})}upload(e,n){const i={_type:e,_message:n};try{this.websocket.sendMessage(i)}catch(c){const h=ya("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(i),this.uploadCache.length>h&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==Up.CONNECTED)return;const g=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(g._type,g._message)},ya("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,n){this.websocket.sendMessage({_type:e,_message:n})}init(e,n){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new _l((i,c)=>{this.once(Ll.WS_CONNECTED,()=>i(this.joinResponse)),this.once(Ll.WS_CLOSED,()=>c(this.initError||new ea(_t.WS_ABORT))),this.connectionState=Up.CONNECTING,this.websocket.init(e).catch(c),this.websocket.once(b0.FAILBACK,()=>{void 0===this.openConnectionTime&&c(new ea(_t.INIT_DATACHANNEL_TIMEOUT))}),this.inflateDataTimer&&window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=window.setInterval(()=>{this.handleInflateData()},2e4),setTimeout(()=>{n&&void 0===this.openConnectionTime&&(de.debug("[".concat(this.clientId,"] init datachannel timeout while join with failback to websocket")),c(new ea(_t.INIT_DATACHANNEL_TIMEOUT)))},ya("DC_JOIN_WITH_FAILBACK"))})}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.inflateDataTimer&&(this.handleInflateData(),window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||Rp.LEAVE,this.connectionState=Up.CLOSED,de.debug("[".concat(this.clientId,"] ")+"will close datachannel in signal"),this.websocket.close(),e===Rp.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new ame("gateway-".concat(this.clientId),this.spec.retryConfig,!0,this.store),this.handleWebsocketEvents())}join(){var e=this;return l(function*(){if(!e.joinResponse){e.emit(Ll.ABORT_P2P_EXECUTION);const n=yield E_(e,Ll.DATACHANNEL_CONNECTING),i=yield e.request(ql.JOIN,n);if(!i)return e.emit(Ll.REPORT_JOIN_GATEWAY,_t.TIMEOUT,e.url||""),!1;e.joinResponse=i,e.emit(Ll.JOIN_RESPONSE,e.joinResponse),e.reconnectToken=e.joinResponse.rejoin_token}return e.connectionState=Up.CONNECTED,e.pingpongTimer&&window.clearInterval(e.pingpongTimer),e.pingpongTimer=window.setInterval(e.handlePingPong.bind(e),3e3),!0})()}rejoin(){var e=this;return l(function*(){if(!e.reconnectToken)throw new ea(_t.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const n=tj(e,Ll.REQUEST_REJOIN_INFO);n.token=e.reconnectToken;const i=yield e.request(ql.REJOIN,n);return!!i&&(e.connectionState=Up.CONNECTED,e.pingpongTimer&&window.clearInterval(e.pingpongTimer),e.pingpongTimer=window.setInterval(e.handlePingPong.bind(e),3e3),i.peers&&i.peers.forEach(c=>{e.emit(Kh.ON_USER_ONLINE,{uid:c.uid}),c.audio&&e.emit(Kh.ON_ADD_AUDIO_STREAM,{uid:c.uid,uint_id:c.uint_id,audio:!0,ssrcId:c.audio_ssrc}),c.video&&e.emit(Kh.ON_ADD_VIDEO_STREAM,{uid:c.uid,uint_id:c.uint_id,video:!0,ssrcId:c.video_ssrc}),e.emit(c.audio_mute?Kh.MUTE_AUDIO:Kh.UNMUTE_AUDIO,{uid:c.uid}),e.emit(c.video_mute?Kh.MUTE_VIDEO:Kh.UNMUTE_VIDEO,{uid:c.uid}),e.emit(c.audio_enable_local?Kh.ENABLE_LOCAL_AUDIO:Kh.DISABLE_LOCAL_AUDIO,{uid:c.uid}),e.emit(c.video_enable_local?Kh.ENABLE_LOCAL_VIDEO:Kh.DISABLE_LOCAL_VIDEO,{uid:c.uid}),c.audio||c.video||e.emit(Kh.ON_REMOVE_STREAM,{uid:c.uid,uint_id:c.uint_id})}),!0)})()}reconnect(e,n){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,n)}handleNotification(e){de.debug("[".concat(this.clientId,"] receive notification: "),e),Gc("debug",this,"handleNotification",e);const n=JY(e.code);if("success"!==n.action)return"failed"===n.action?(de.error("[".concat(this.clientId,"] ignore error: "),n.desc),void pl("error",this,"ignore error: ".concat(n.desc))):"quit"===n.action?("ERR_REPEAT_JOIN_CHANNEL"===n.desc&&this.close(Rp.UID_BANNED),void this.close()):void this.reconnect(n.action,rT.SERVER_ERROR)}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=ya("PING_PONG_TIME_OUT"),n=Date.now();this.pingpongTimeoutCount>=e&&(de.warning("PINGPONG Timeout. Last Socket Message: ".concat(n-this.lastMsgTime,"ms")),pl("warning",this,"PINGPONG Timeout. Last Socket Message: ".concat(n-this.lastMsgTime,"ms")),n-this.lastMsgTime>ya("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",rT.TIMEOUT):this.request(ql.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const i=Date.now()-n;this.rttRolling.add(i),ya("REPORT_STATS")&&this.send(ql.PING_BACK,{pingpongElapse:i})}).catch(i=>{})}handleInflateData(){const{inflateLength:e,deflateLength:n}=this.websocket.getInflateData();0!==e&&0!==n&&this.upload(p_.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:n,ws_inflate_length:e})}handleWebsocketEvents(){var e=this;this.websocket.on(b0.RECONNECT_WAITTING_FINISH,n=>{this.emit(Ll.WS_RECONNECT_WAITTING_FINISH,n)}),this.websocket.on(b0.RECONNECT_CREATE_CONNECTION,n=>{this.emit(Ll.WS_RECONNECT_CREATE_CONNECTION,n)}),this.websocket.on(b0.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(b0.CLOSED,()=>{this.connectionState=Up.CLOSED}),this.websocket.on(b0.FAILED,()=>{this._disconnectedReason=Rp.NETWORK_ERROR,this.connectionState=Up.CLOSED}),this.websocket.on(b0.RECONNECTING,n=>{this._websocketReconnectReason=n,this.joinResponse=void 0,this.connectionState=this.connectionState===Up.CONNECTED?Up.RECONNECTING:Up.CONNECTING}),this.websocket.on(b0.WILL_RECONNECT,(n,i)=>{if(tj(this,Ll.IS_P2P_DISCONNECTED)&&"retry"===n)return de.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),pl("debug",this,"".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit(Ll.NEED_RENEW_SESSION),this.emit(Ll.DISCONNECT_P2P),i("tryNext");"retry"!==n&&(de.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(n)),pl("debug",this,"".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(n)),this.reconnectToken=void 0,this.emit(Ll.NEED_RENEW_SESSION),this.emit(Ll.DISCONNECT_P2P)),i(n)}),this.websocket.on(b0.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(n=>{de.warning("[".concat(this.clientId,"] rejoin failed ").concat(n)),Gc("warning",this,"rejoin",void 0,n.toString()),this.reconnect("tryNext",rT.SERVER_ERROR)}):this.join().catch(n=>{if(this.emit(Ll.REPORT_JOIN_GATEWAY,n.message||n.code,this.url||""),n instanceof ea&&n.code===_t.UNEXPECTED_RESPONSE&&n.data.code===Ql.ERR_NO_AUTHORIZED)return de.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),pl("warning",this,"reconnect no authorized, recover"),void this.reconnect("recover",rT.SERVER_ERROR);de.error("[".concat(this.clientId,"] join gateway request failed"),n.toString()),Gc("error",this,"join",void 0,n.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",rT.SERVER_ERROR):(this.initError=n,this.close())})}),this.websocket.on(b0.REQUEST_NEW_URLS,(n,i)=>{E_(this,Ll.REQUEST_RECOVER,this.multiIpOption).then(n).catch(i)}),this.websocket.on(b0.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(Kh.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}),this.websocket.on(b0.TO_CONNECT_DATACHANNEL,function(){var n=l(function*(i,c,h){return E_(e,Ll.DATACHANNEL_PRECONNECT,i).then(c).catch(h)});return function(i,c,h){return n.apply(this,arguments)}}()),this.websocket.on(b0.FAILBACK,()=>{void 0!==this.openConnectionTime&&this.emit(Ll.DATACHANNEL_FAILBACK)})}})||cme;var ume;function lme(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);n&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),i.push.apply(i,c)}return i}function P2(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?lme(Object(i),!0).forEach(function(c){Y(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):lme(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}const gde=new Map;let Mbe=uy("AgoraRTCGateway","store.clientId")(ume=class extends f0{get state(){return this._state}set state(e){if(e===this._state)return;const n=this._state;this._state=e,"DISCONNECTED"===e&&this._disconnectedReason?this.emit(g0.CONNECTION_STATE_CHANGE,e,n,this._disconnectedReason):this.emit(g0.CONNECTION_STATE_CHANGE,e,n)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(e){de.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(e)),Gc("debug",this,"joinGatewayStartTime",e,"[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(e)),this._joinGatewayStartTime=e}constructor(e,n){super(),Y(this,"store",void 0),Y(this,"joinInfo",void 0),Y(this,"key",void 0),Y(this,"signal",void 0),Y(this,"role",void 0),Y(this,"inChannelInfo",{joinAt:null,duration:0}),Y(this,"spec",void 0),Y(this,"_state","DISCONNECTED"),Y(this,"_statsCollector",void 0),Y(this,"_disconnectedReason",void 0),Y(this,"isSignalRecover",!1),Y(this,"hasChangeBGPAddress",!1),Y(this,"trafficStatsInterval",void 0),Y(this,"networkQualityInterval",void 0),Y(this,"_joinGatewayStartTime",0),Y(this,"_signalTimeout",!1),Y(this,"_clientRoleOptions",void 0),Y(this,"_isProactiveJoin",!1),this.store=e,this.spec=n;const i=dy().supportDataChannel&&ya("SIGNAL_CHANNEL");this.signal=i?new CL(P2(P2({},n),{},{retryConfig:n.websocketRetryConfig}),e):new nme(P2(P2({},n),{},{retryConfig:n.websocketRetryConfig}),e),this._statsCollector=n.statsCollector,this.role=n.role||"audience",this._clientRoleOptions=n.clientRoleOptions,this.handleSignalEvents()}join(e,n,i){var c=this;return l(function*(){if(c.signal instanceof CL){let C=!1;"disabled"!==e.cloudProxyServer?(de.debug("[".concat(c.store.clientId,"] Dc is not supported, because cloudProxyServer are not supported (").concat(e.cloudProxyServer,")")),C=!0):"".concat(e.apResponse.cid,"_").concat(e.apResponse.cert).length>255||"".concat(e.apResponse.cid,"_").concat(e.apResponse.cert).length<22?(de.debug("[".concat(c.store.clientId,"] Dc is not supported, because ticket length is incorrect, it has to be between 22 and 255")),C=!0):e.apResponse.addresses.some(y=>y.fingerprint)||ya("FINGERPRINT")||(de.debug("[".concat(c.store.clientId,"] Dc is not supported, because fingerprint does not exist")),C=!0),C&&c.resetSignal()}c.store.joinGatewayStart(),"disabled"!==e.cloudProxyServer&&(c.hasChangeBGPAddress=!0);const h=Date.now();let g=gde.get(e.cname);if(g||(g=new Map,gde.set(e.cname,g)),c._isProactiveJoin=!0,g.has(e.uid)){const C=new ea(_t.UID_CONFLICT);throw qc.joinGateway(e.sid,{lts:h,succ:!1,ec:C.message,addr:null,uid:e.uid,cid:e.cid,firstSuccess:c._isProactiveJoin,avoidJoinStartTime:c.store.avoidJoinStart,isProxy:!!e.proxyServer,signalChannel:c.signal instanceof CL?"1":"0"}),c._isProactiveJoin=!1,C}g.set(e.uid,!0),c.joinInfo=e,c.key=n;let v=0;c.joinGatewayStartTime=h;const m=e.proxyServer;try{let C;if(de.debug("[".concat(c.store.clientId,"] use ").concat(c.signal instanceof CL?"datachannel":"websocket"," join uid ").concat(v)),c.signal instanceof CL)C=yield c.signal.init(e.apResponse.addresses,i);else{const y=e.proxyServer,N=e.gatewayAddrs.map(y?k=>{const U=k.address.split(":");return"wss://".concat(y,"/ws/?h=").concat(U[0],"&p=").concat(U[1])}:k=>"wss://".concat(k.address));C=yield c.signal.init(N,i)}v=C.uid,de.debug("[".concat(c.store.clientId,"] ").concat(c.signal instanceof CL?"datachannel":"websocket"," join uid ").concat(v," cost ").concat(Date.now()-c.joinGatewayStartTime))}catch(C){throw C&&C.code===_t.INIT_WEBSOCKET_TIMEOUT?(de.warning("[".concat(c.store.clientId,"] User join failed"),C.toString()),C):C&&C.code===_t.INIT_DATACHANNEL_TIMEOUT?(de.warning("[".concat(c.store.clientId,"] User join datachannel failed"),C.toString()),c.resetSignal(),C):(de.error("[".concat(c.store.clientId,"] User join failed"),C.toString()),Gc("error",c,"join",void 0,C.toString()),qc.joinGateway(e.sid,{lts:h,succ:!1,ec:C.message,addr:c.signal.url,uid:e.uid,cid:e.cid,firstSuccess:c._isProactiveJoin,avoidJoinStartTime:c.store.avoidJoinStart,isProxy:!!m,signalChannel:c.signal instanceof CL?"1":"0"}),c._isProactiveJoin=!1,g.delete(e.uid),c.signal.close(),C)}return c.state="CONNECTED",c.inChannelInfo.joinAt=Date.now(),de.debug("[".concat(c.store.clientId,"] Connected to gateway server")),Gc("debug",c,"join",void 0,"success"),c.trafficStatsInterval=window.setInterval(()=>{c.updateTrafficStats().catch(C=>{de.warning("[".concat(c.store.clientId,"] get traffic stats error"),C.toString()),Gc("warning",c,"trafficStatsInterval",void 0,C.toString())})},3e3),c.networkQualityInterval=window.setInterval(()=>{navigator&&void 0!==navigator.onLine&&!navigator.onLine?c.emit(g0.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):c.emit(g0.NETWORK_QUALITY,c._signalTimeout?{downlinkNetworkQuality:5,uplinkNetworkQuality:5}:"CONNECTED"===c.state&&c._statsCollector.trafficStats?{uplinkNetworkQuality:qge(c._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:qge(c._statsCollector.trafficStats.B_dnq)}:{uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3),c.store.joinGatewayEnd(),v})()}leave(){var e=arguments,n=this;return l(function*(){let i=e.length>0&&void 0!==e[0]&&e[0],c=e.length>1?e[1]:void 0;if("DISCONNECTED"!==n.state){c!==Rp.FALLBACK&&(n.state="DISCONNECTING");try{i||n.signal.connectionState!==Up.CONNECTED||(yield(h=n.signal.request(ql.LEAVE,void 0,!0),3e3,_l.race([h,J_e(3e3)])))}catch(h){de.warning("[".concat(n.store.clientId,"] leave request failed, ignore"),h),pl("warning",n,"leave request failed, ignore, ".concat(h.toString()))}n.signal.close(c),c!==Rp.FALLBACK&&(n.state="DISCONNECTED"),n.reset()}var h})()}publish(e,n,i){var c=this;return l(function*(){if("CONNECTED"!==c.state&&"RECONNECTING"!==c.state)throw new ea(_t.INVALID_OPERATION,"can not publish when connection state is ".concat(c.state));const h={state:"offer",p2p_id:c.store.p2pId,ortc:n,mode:c.spec.mode,extend:ya("PUB_EXTEND")};try{return(yield c.signal.request(ql.PUBLISH,h,!0))._message}catch(g){if(i&&g.data&&g.data.code===Ql.ERR_PUBLISH_REQUEST_INVALID)return de.warning("[".concat(c.store.clientId,"] receive publish error code, retry"),g.toString()),pl("warning",c,"receive publish error code, retry, ".concat(g.toString())),yield c.tryUnpubBeforeRepub(e,n),c.publish(e,n,!1);throw g}})()}unpublish(e,n){var i=this;return l(function*(){try{if("CONNECTED"!==i.state&&"RECONNECTING"!==i.state)throw new ea(_t.INVALID_OPERATION,"can not publish when connection state is ".concat(i.state));yield i.signal.request(ql.UNPUBLISH,{stream_id:n,ortc:e},!0)}catch(c){de.warning("unpublish warning: ",c),Gc("warning",i,"unpublish",void 0,c.toString())}})()}subscribe(e,n,i){var c=this;return l(function*(){if("CONNECTED"!==c.state&&"RECONNECTING"!==c.state)throw new ea(_t.INVALID_OPERATION,"can not subscribe when connection state is ".concat(c.state));const h={stream_id:e,stream_type:n.stream_type,mode:c.spec.mode,codec:c.spec.codec,p2p_id:c.store.p2pId,tcc:!!ya("SUBSCRIBE_TCC"),extend:ya("SUB_EXTEND"),ssrcId:n.ssrcId};try{return(yield c.signal.request(ql.SUBSCRIBE,h,!0))._message}catch(g){if(i&&g.data&&g.data.code===Ql.ERR_SUBSCRIBE_REQUEST_INVALID)return de.warning("[".concat(c.store.clientId,"] receiver subscribe error code, retry"),g.toString()),pl("warning",c,"receiver subscribe error code, retry"),yield c.tryUnsubBeforeResub(e,n),yield c.subscribe(e,n,!1);throw g}})()}subscribeAll(e,n){var i=this;return l(function*(){if("CONNECTED"!==i.state&&"RECONNECTING"!==i.state)throw new ea(_t.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(i.state));const c={p2p_id:i.store.p2pId,users:e,dtx:!1};try{return yield i.signal.request(ql.SUBSCRIBE_STREAMS,c,!0)}catch(h){if(n&&h.data&&h.data.code===Ql.ERR_SUBSCRIBE_REQUEST_INVALID)return de.warning("[".concat(i.store.clientId,"] receiver massSubscribe error code, retry"),h.toString()),pl("warning",i,"receiver massSubscribe error code, retry"),yield i.tryMassUnsubBeforeResub(e),yield i.subscribeAll(e,!1);throw h}})()}setVideoProfile(e){var n=this;return l(function*(){const i=function(c){if(!(c.bitrateMax&&c.bitrateMin&&c.frameRate&&c.height&&c.width))return;let h=c.frameRate,g=c.width,v=c.height,m=!0;return"number"!=typeof h&&(h=h.exact||h.ideal||h.max||h.min||0,h||(m=!1)),"number"!=typeof g&&(g=g.exact||g.ideal||g.max||g.min||0,g||(m=!1)),"number"!=typeof v&&(v=v.exact||v.ideal||v.max||v.min||0,h||(m=!1)),m?{stream_type:0,width:g,height:v,fps:h,start_bps:1e3*c.bitrateMax,min_bps:1e3*c.bitrateMin,target_bps:1e3*c.bitrateMax}:void 0}(e);return i?n.signal.request(ql.SET_VIDEO_PROFILE,i):(de.debug("[".concat(n.store.clientId,"] encoder config is not complete, do not report to gateway")),void pl("debug",n,"encoder config is not complete, do not report to gateway"))})()}unsubscribe(e,n){var i=this;return l(function*(){try{yield i.signal.request(ql.UNSUBSCRIBE,{p2p_id:i.store.p2pId,ortc:e,stream_id:n},!0)}catch(c){de.warning("unsubscribe warning: ",c),Gc("warning",i,"unsubscribe",void 0,c.toString())}})()}massUnsubscribe(e){var n=this;return l(function*(){try{yield n.signal.request(ql.UNSUBSCRIBE_STREAMS,e,!0)}catch(i){de.warning("unsubscribeAll warning: ",i),Gc("warning",n,"unsubscribeAll",void 0,i.toString())}})()}reconnectPC(e){var n=this;return l(function*(){const{iceParameters:i,dtlsParameters:c,rtpCapabilities:h}=e;return{gatewayEstablishParams:yield n.signal.request(ql.CONNECT_PC,{p2p_id:n.store.p2pId,stream_id:n.store.uid,ortc:{iceParameters:i,dtlsParameters:c,rtpCapabilities:h}},!0),gatewayAddress:n.getCurrentGatewayAddress()}})()}getGatewayInfo(){return this.signal.request(ql.GATEWAY_INFO)}renewToken(e){return this.signal.request(ql.RENEW_TOKEN,e)}setClientRole(e,n){var i=this;return l(function*(){if(n&&(i._clientRoleOptions=Object.assign({},n)),"CONNECTED"!==i.state)return void(i.role=e);let c;c="audience"===e?i._clientRoleOptions&&i._clientRoleOptions.level?i._clientRoleOptions.level:2:0,yield i.signal.request(ql.SET_CLIENT_ROLE,{role:e,level:c,client_ts:Date.now()}),i.role=e})()}setRemoteVideoStreamType(e,n){var i=this;return l(function*(){yield i.signal.request(ql.SWITCH_VIDEO_STREAM,{stream_id:e,stream_type:n})})()}setDefaultRemoteVideoStreamType(e){var n=this;return l(function*(){yield n.signal.request(ql.DEFAULT_VIDEO_STREAM,{stream_type:e})})()}setStreamFallbackOption(e,n){var i=this;return l(function*(){yield i.signal.request(ql.SET_FALLBACK_OPTION,{stream_id:e,fallback_type:n})})()}pickSVCLayer(e,n){var i=this;return l(function*(){yield i.signal.request(ql.PICK_SVC_LAYER,{stream_id:e,spatial_layer:n.spatialLayer,temporal_layer:n.temporalLayer})})()}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),P2({},this.inChannelInfo)}getGatewayVersion(){var e=this;return l(function*(){return(yield e.signal.request(ql.GATEWAY_INFO)).version})()}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const e=gde.get(this.joinInfo.cname);e&&e.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const e=function(n){let i;return i=n.startsWith("dc")?n.match(/(dc\:\/\/)?([^:]+):(\d+)/):n.match(/(wss\:\/\/)?([^:]+):(\d+)/),i?{username:s1.username,password:s1.password,turnServerURL:i[2],tcpport:parseInt(i[3])+30,udpport:parseInt(i[3])+30,forceturn:!1}:null}(("disabled"===this.joinInfo.cloudProxyServer?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],e&&"off"!==this.joinInfo.turnServer.mode&&"disabled"===this.joinInfo.cloudProxyServer&&this.joinInfo.turnServer.serversFromGateway.push(P2(P2({},s1),{},{turnServerURL:e.turnServerURL,tcpport:e.tcpport,udpport:e.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}updateTrafficStats(){var e=this;return l(function*(){if("CONNECTED"!==e.state)return;const n=yield e.signal.request(ql.TRAFFIC_STATS,void 0,!0);n.timestamp=Date.now(),n.peer_delay.forEach(i=>{const c=e._statsCollector.trafficStats&&e._statsCollector.trafficStats.peer_delay.find(h=>h.peer_uid===i.peer_uid);c&&c.B_st!==i.B_st&&uT(()=>{e.emit(g0.STREAM_TYPE_CHANGE,i.peer_uid,i.B_st)})}),e._statsCollector.updateTrafficStats(n)})()}getJoinMessage(e){if(!this.joinInfo||!this.key)throw new ea(_t.UNEXPECTED_ERROR,"can not generate join message, no join info");const n=Object.assign({},this.joinInfo.apResponse);let i=ya("REPORT_APP_SCENARIO");if("string"!=typeof i)try{i=JSON.stringify(i)}catch(h){i=void 0}i&&i.length>128&&(i=void 0);const c=P2({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:o1,browser:navigator.userAgent,process_id:ya("PROCESS_ID"),mode:this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:n,extend:ya("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:"proxy3"===this.joinInfo.cloudProxyServer?"1":"proxy5"===this.joinInfo.cloudProxyServer?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:i,attributes:{userAttributes:{enablePublishedUserList:ya("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:ya("MAX_SUBSCRIPTION"),subscribeAudioFilterTopN:"number"==typeof ya("SUBSCRIBE_AUDIO_FILTER_TOPN")?ya("SUBSCRIBE_AUDIO_FILTER_TOPN"):void 0,enablePublishAudioFilter:"boolean"==typeof ya("ENABLE_PUBLISH_AUDIO_FILTER")?ya("ENABLE_PUBLISH_AUDIO_FILTER"):void 0,enableUserLicenseCheck:"boolean"==typeof ya("ENABLE_USER_LICENSE_CHECK")?ya("ENABLE_USER_LICENSE_CHECK"):void 0}},join_ts:this.joinGatewayStartTime},e);return this.joinInfo.stringUid&&(c.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(c.aes_mode=this.joinInfo.aesmode,ya("ENCRYPT_AES")?(c.aes_secret=this.joinInfo.aespassword,c.aes_encrypt=!0):c.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(c.aes_salt=this.joinInfo.aessalt)),n.addresses[this.signal.websocket.currentURLIndex]&&(c.ap_response.ticket=n.addresses[this.signal.websocket.currentURLIndex].ticket,delete n.addresses),void 0!==this.joinInfo.defaultVideoStream&&(c.default_video_stream=this.joinInfo.defaultVideoStream),c}getRejoinMessage(){if(!this.joinInfo)throw new ea(_t.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){var e=this;this.signal.on(Ll.WS_RECONNECT_WAITTING_FINISH,n=>{["tryNext","recover"].includes(n)&&this.joinInfo&&qc.adjustSessionStartTime(this.joinInfo.sid)}),this.signal.on(Ll.WS_RECONNECT_CREATE_CONNECTION,n=>{this.joinGatewayStartTime=Date.now()}),this.signal.on(Ll.WS_RECONNECTING,n=>{this.joinInfo&&qc.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:n||f_.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",qc.sessionInit(this.joinInfo.sid,{lts:(new Date).getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())}),this.signal.on(Ll.WS_CLOSED,n=>{let i;switch(n){case Rp.LEAVE:i=f_.LEAVE;break;case Rp.UID_BANNED:case Rp.IP_BANNED:case Rp.CHANNEL_BANNED:case Rp.SERVER_ERROR:i=f_.SERVER_ERROR;break;case Rp.FALLBACK:i=f_.FALLBACK;break;case Rp.LICENSE_MISSING:case Rp.LICENSE_EXPIRED:case Rp.LICENSE_MINUTES_EXCEEDED:case Rp.LICENSE_PERIOD_INVALID:case Rp.LICENSE_MULTIPLE_SDK_SERVICE:case Rp.LICENSE_ILLEGAL:i=n;break;default:i=f_.NETWORK_ERROR}de.debug("[signal] websocket closed, reason: ".concat(i||"undefined -> "+f_.NETWORK_ERROR)),p0("debug",this,"ws_closed","reason: ".concat(n)),this.joinInfo&&qc.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:n===Rp.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:i}),this._disconnectedReason=n,n!==Rp.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}),this.signal.on(Ll.WS_CONNECTED,()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&("audience"===this.role&&this._clientRoleOptions&&this._clientRoleOptions.level&&(de.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions&&this._clientRoleOptions.level)),pl("debug",this,"patch to send set client role, role: ".concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions&&this._clientRoleOptions.level)),this.setClientRole(this.role,this._clientRoleOptions)),qc.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:this.signal instanceof CL?"1":"0"}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint&&1===this.joinInfo.setLocalAPVersion)){const n=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!n)return de.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(n)),void pl("error",this,"set local access point after joined failed: ".concat(n));Ag("EVENT_REPORT_DOMAIN",n[1]),Ag("EVENT_REPORT_BACKUP_DOMAIN",n[1]),Ag("LOG_UPLOAD_SERVER","".concat(n[1],":6444"))}}),this.signal.on(Kh.ON_UPLINK_STATS,n=>{this._statsCollector.updateUplinkStats(n)}),this.signal.on(Ll.REQUEST_RECOVER,(n,i,c)=>{if(!this.joinInfo)return c(new ea(_t.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));n&&(this.joinInfo.multiIP=n,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,E_(this,g0.REQUEST_NEW_GATEWAY_LIST).then(i).catch(c)}),this.signal.on(Ll.REQUEST_JOIN_INFO,function(){var n=l(function*(i){var c;e.updateTurnConfigFromSignal();const{iceParameters:h,dtlsParameters:g,rtpCapabilities:v}=yield E_(e,g0.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:null===(c=e.joinInfo)||void 0===c?void 0:c.turnServer});i(e.getJoinMessage({ortc:{iceParameters:h,dtlsParameters:g,rtpCapabilities:v,version:"2"}}))});return function(i){return n.apply(this,arguments)}}()),this.signal.on(Ll.REQUEST_REJOIN_INFO,n=>{n(this.getRejoinMessage())}),this.signal.on(Ll.REPORT_JOIN_GATEWAY,(n,i)=>{this.joinInfo&&(qc.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:n,addr:i,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:this.signal instanceof CL?"1":"0"}),this._isProactiveJoin=!1)}),this.signal.on(Ll.IS_P2P_DISCONNECTED,n=>{n(tj(this,g0.IS_P2P_DISCONNECTED))}),this.signal.on(Ll.DISCONNECT_P2P,()=>{this.emit(g0.DISCONNECT_P2P)}),this.signal.on(Ll.NEED_RENEW_SESSION,()=>{this.emit(g0.NEED_RENEW_SESSION)}),this.signal.on(Ll.REQUEST_SUCCESS,()=>{this._signalTimeout=!1}),this.signal.on(Ll.REQUEST_TIMEOUT,()=>{this._signalTimeout=!0}),this.signal.on(Ll.JOIN_RESPONSE,n=>{const i=this.getCurrentGatewayAddress();this.emit(g0.JOIN_RESPONSE,n,i)}),this.signal.on(Ll.DATACHANNEL_PRECONNECT,function(){var n=l(function*(i,c,h){e.updateTurnConfigFromSignal();const g=e.getCurrentGatewayAddress();return E_(e,g0.DATACHANNEL_PRECONNECT,i,g).then(c).catch(h)});return function(i,c,h){return n.apply(this,arguments)}}()),this.signal.on(Ll.DATACHANNEL_CONNECTING,function(){var n=l(function*(i){const{iceParameters:c,dtlsParameters:h,rtpCapabilities:g}=yield E_(e,g0.REQUEST_DC_CONNECTION_PARAMS);i(e.getJoinMessage({ortc:{iceParameters:c,dtlsParameters:h,rtpCapabilities:g,version:"2"}}))});return function(i){return n.apply(this,arguments)}}()),this.signal.on(Ll.DATACHANNEL_FAILBACK,()=>{de.warning("[".concat(this.store.clientId,"] User join datachannel failed")),this.reset(),this.resetSignal(),this.emit(g0.DATACHANNEL_FAILBACK)})}tryUnsubBeforeResub(e,n){var i=this;return l(function*(){try{yield i.signal.request(ql.UNSUBSCRIBE,{p2p_id:i.store.p2pId,stream_id:e,ortc:[n]},!0)}catch(c){throw de.warning("unsubscribe warning",c),Gc("warning",i,"tryUnsubBeforeResub",e,c.toString()),c}})()}tryUnpubBeforeRepub(e,n){var i=this;return l(function*(){try{yield i.signal.request(ql.UNPUBLISH,{stream_id:e,ortc:n},!0)}catch(c){throw de.warning("unpublish warning: ",c),Gc("warning",i,"tryUnpubBeforeRepub",e,c.toString()),c}})()}tryMassUnsubBeforeResub(e){var n=this;return l(function*(){const i={users:e.map(c=>({stream_id:c.stream_id,stream_type:c.stream_type}))};try{yield n.signal.request(ql.UNSUBSCRIBE_STREAMS,i,!0)}catch(c){throw de.warning("massUnsubscribe warning",c),Gc("warning",n,"tryUnsubAllBeforeResub",e.map(h=>h.stream_id),c.toString()),c}})()}muteLocal(e,n){var i=this;return l(function*(){const c={action:e.find(h=>h.stream_type===a0.Audio)?"mute_local_audio":"mute_local_video",p2p_id:i.store.p2pId,ortc:e,stream_id:n};try{yield i.signal.request(ql.CONTROL,c,!0,!0)}catch(h){throw de.warning("gateway unmuteLocal warning: ",h),Gc("warning",i,"muteLocal",n,h.toString()),h}})()}unmuteLocal(e,n){var i=this;return l(function*(){const c={action:e.find(h=>h.stream_type===a0.Audio)?"unmute_local_audio":"unmute_local_video",p2p_id:i.store.p2pId,ortc:e,stream_id:n};try{yield i.signal.request(ql.CONTROL,c,!0,!0)}catch(h){throw de.warning("gateway muteLocal warning: ",h),Gc("warning",i,"unmuteLocal",n,h.toString()),h}})()}uploadStats(e,n){this.signal.upload(e,n)}getSignalRTT(){return this.signal.rtt}restartICE(e){var n=this;return l(function*(){const i={p2p_id:n.store.p2pId,stream_id:n.store.uid,ortc:e};try{return yield n.signal.request(ql.RESTART_ICE,i,!0)}catch(c){throw de.warning("P2PChannel.restartICE warning: ",c),Gc("warning",n,"restartICE",void 0,c.toString()),c}})()}reconnect(){"CONNECTED"===this.state&&this.signal.reconnect(void 0,f_.P2P_FAILED)}getCurrentGatewayAddress(){var e;if(!ya("GATEWAY_WSS_ADDRESS"))return null!==(e=this.joinInfo)&&void 0!==e&&e.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0}setPublishAudioFilterEnabled(e){var n=this;return l(function*(){yield n.signal.request(ql.SET_PARAMETER,{enablePublishAudioFilter:e})})()}resetSignal(){this.signal&&(this.signal.removeAllListeners(),this.signal.close(Rp.FALLBACK)),this.signal=new nme(P2(P2({},this.spec),{},{retryConfig:this.spec.websocketRetryConfig}),this.store),this.handleSignalEvents(),this.emit(g0.RESET_CONNECTION_EVENTS)}})||ume;function dme(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);n&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),i.push.apply(i,c)}return i}function hme(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?dme(Object(i),!0).forEach(function(c){Y(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):dme(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}!function(){var e;function n(ca){var Aa=0;return function(){return Aa<ca.length?{done:!1,value:ca[Aa++]}:{done:!0}}}var c,i="function"==typeof Object.defineProperties?Object.defineProperty:function(ca,Aa,Ya){return ca==Array.prototype||ca==Object.prototype||(ca[Aa]=Ya.value),ca},h=function(ca){ca=["object"==typeof globalThis&&globalThis,ca,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof p&&p];for(var Aa=0;Aa<ca.length;++Aa){var Ya=ca[Aa];if(Ya&&Ya.Math==Math)return Ya}throw Error("Cannot find global object")}(this);function g(ca,Aa){if(Aa)e:{var Ya=h;ca=ca.split(".");for(var Zc=0;Zc<ca.length-1;Zc++){var Ol=ca[Zc];if(!(Ol in Ya))break e;Ya=Ya[Ol]}(Aa=Aa(Zc=Ya[ca=ca[ca.length-1]]))!=Zc&&null!=Aa&&i(Ya,ca,{configurable:!0,writable:!0,value:Aa})}}function v(ca){return(ca={next:ca})[Symbol.iterator]=function(){return this},ca}function m(ca){var Aa="undefined"!=typeof Symbol&&Symbol.iterator&&ca[Symbol.iterator];return Aa?Aa.call(ca):{next:n(ca)}}if(g("Symbol",function(ca){function Aa(Ol,_c){this.A=Ol,i(this,"description",{configurable:!0,writable:!0,value:_c})}if(ca)return ca;Aa.prototype.toString=function(){return this.A};var Ya="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",Zc=0;return function Ol(_c){if(this instanceof Ol)throw new TypeError("Symbol is not a constructor");return new Aa(Ya+(_c||"")+"_"+Zc++,_c)}}),g("Symbol.iterator",function(ca){if(ca)return ca;ca=Symbol("Symbol.iterator");for(var Aa="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),Ya=0;Ya<Aa.length;Ya++){var Zc=h[Aa[Ya]];"function"==typeof Zc&&"function"!=typeof Zc.prototype[ca]&&i(Zc.prototype,ca,{configurable:!0,writable:!0,value:function(){return v(n(this))}})}return ca}),"function"==typeof Object.setPrototypeOf)c=Object.setPrototypeOf;else{var C;e:{var y={};try{y.__proto__={a:!0},C=y.a;break e}catch(ca){}C=!1}c=C?function(ca,Aa){if(ca.__proto__=Aa,ca.__proto__!==Aa)throw new TypeError(ca+" is not extensible");return ca}:null}var N=c;function k(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function U(ca){if(ca.m)throw new TypeError("Generator is already running");ca.m=!0}function V(ca,Aa){return ca.h=3,{value:Aa}}function K(ca){this.g=new k,this.G=ca}function $(ca,Aa,Ya,Zc){try{var Ol=Aa.call(ca.g.j,Ya);if(!(Ol instanceof Object))throw new TypeError("Iterator result "+Ol+" is not an object");if(!Ol.done)return ca.g.m=!1,Ol;var _c=Ol.value}catch(J){return ca.g.j=null,ca.g.s(J),Z(ca)}return ca.g.j=null,Zc.call(ca.g,_c),Z(ca)}function Z(ca){for(;ca.g.h;)try{var Aa=ca.G(ca.g);if(Aa)return ca.g.m=!1,{value:Aa.value,done:!1}}catch(Ya){ca.g.v=void 0,ca.g.s(Ya)}if(ca.g.m=!1,ca.g.l){if(Aa=ca.g.l,ca.g.l=null,Aa.F)throw Aa.D;return{value:Aa.return,done:!0}}return{value:void 0,done:!0}}function ye(ca){this.next=function(Aa){return ca.o(Aa)},this.throw=function(Aa){return ca.s(Aa)},this.return=function(Aa){return function(Ya,Zc){U(Ya.g);var Ol=Ya.g.j;return Ol?$(Ya,"return"in Ol?Ol.return:function(_c){return{value:_c,done:!0}},Zc,Ya.g.return):(Ya.g.return(Zc),Z(Ya))}(ca,Aa)},this[Symbol.iterator]=function(){return this}}function be(ca,Aa){return Aa=new ye(new K(Aa)),N&&ca.prototype&&N(Aa,ca.prototype),Aa}if(k.prototype.o=function(ca){this.v=ca},k.prototype.s=function(ca){this.l={D:ca,F:!0},this.h=this.C||this.u},k.prototype.return=function(ca){this.l={return:ca},this.h=this.u},K.prototype.o=function(ca){return U(this.g),this.g.j?$(this,this.g.j.next,ca,this.g.o):(this.g.o(ca),Z(this))},K.prototype.s=function(ca){return U(this.g),this.g.j?$(this,this.g.j.throw,ca,this.g.o):(this.g.s(ca),Z(this))},g("Array.prototype.entries",function(ca){return ca||function(){return function(Aa,Ya){Aa instanceof String&&(Aa+="");var Zc=0,Ol=!1,_c={next:function(){if(!Ol&&Zc<Aa.length){var J=Zc++;return{value:Ya(J,Aa[J]),done:!1}}return Ol=!0,{done:!0,value:void 0}}};return _c[Symbol.iterator]=function(){return _c},_c}(this,function(Aa,Ya){return[Aa,Ya]})}}),"undefined"!=typeof Blob&&("undefined"==typeof FormData||!FormData.prototype.keys)){var _s=function(ca,Aa){for(var Ya=0;Ya<ca.length;Ya++)Aa(ca[Ya])},ua=function(ca){return ca.replace(/\r?\n|\r/g,"\r\n")},ma=function(ca,Aa,Ya){return Aa instanceof Blob?(Ya=void 0!==Ya?String(Ya+""):"string"==typeof Aa.name?Aa.name:"blob",Aa.name===Ya&&"[object Blob]"!==Object.prototype.toString.call(Aa)||(Aa=new File([Aa],Ya)),[String(ca),Aa]):[String(ca),String(Aa)]},pc=function(ca,Aa){if(ca.length<Aa)throw new TypeError(Aa+" argument required, but only "+ca.length+" present.")},qa="object"==typeof globalThis?globalThis:"object"==typeof window?window:"object"==typeof self?self:this,Ua=qa.FormData,nl=qa.XMLHttpRequest&&qa.XMLHttpRequest.prototype.send,Wc=qa.Request&&qa.fetch,El=qa.navigator&&qa.navigator.sendBeacon,Dl=qa.Element&&qa.Element.prototype,Kl=qa.Symbol&&Symbol.toStringTag;Kl&&(Blob.prototype[Kl]||(Blob.prototype[Kl]="Blob"),"File"in qa&&!File.prototype[Kl]&&(File.prototype[Kl]="File"));try{new File([],"")}catch(ca){qa.File=function(Aa,Ya,Zc){return Aa=new Blob(Aa,Zc||{}),Object.defineProperties(Aa,{name:{value:Ya},lastModified:{value:+(Zc&&void 0!==Zc.lastModified?new Date(Zc.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),Kl&&Object.defineProperty(Aa,Kl,{value:"File"}),Aa}}var sl=function(ca){return ca.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},_a=function(ca){this.i=[];var Aa=this;ca&&_s(ca.elements,function(Ya){if(Ya.name&&!Ya.disabled&&"submit"!==Ya.type&&"button"!==Ya.type&&!Ya.matches("form fieldset[disabled] *"))if("file"===Ya.type){var Zc=Ya.files&&Ya.files.length?Ya.files:[new File([],"",{type:"application/octet-stream"})];_s(Zc,function(Ol){Aa.append(Ya.name,Ol)})}else"select-multiple"===Ya.type||"select-one"===Ya.type?_s(Ya.options,function(Ol){!Ol.disabled&&Ol.selected&&Aa.append(Ya.name,Ol.value)}):"checkbox"===Ya.type||"radio"===Ya.type?Ya.checked&&Aa.append(Ya.name,Ya.value):(Zc="textarea"===Ya.type?ua(Ya.value):Ya.value,Aa.append(Ya.name,Zc))})};if((e=_a.prototype).append=function(ca,Aa,Ya){pc(arguments,2),this.i.push(ma(ca,Aa,Ya))},e.delete=function(ca){pc(arguments,1);var Aa=[];ca=String(ca),_s(this.i,function(Ya){Ya[0]!==ca&&Aa.push(Ya)}),this.i=Aa},e.entries=function ca(){var Aa,Ya=this;return be(ca,function(Zc){if(1==Zc.h&&(Aa=0),3!=Zc.h)return Aa<Ya.i.length?Zc=V(Zc,Ya.i[Aa]):(Zc.h=0,Zc=void 0),Zc;Aa++,Zc.h=2})},e.forEach=function(ca,Aa){pc(arguments,1);for(var Ya=m(this),Zc=Ya.next();!Zc.done;Zc=Ya.next()){var Ol=m(Zc.value);Zc=Ol.next().value,Ol=Ol.next().value,ca.call(Aa,Ol,Zc,this)}},e.get=function(ca){pc(arguments,1);var Aa=this.i;ca=String(ca);for(var Ya=0;Ya<Aa.length;Ya++)if(Aa[Ya][0]===ca)return Aa[Ya][1];return null},e.getAll=function(ca){pc(arguments,1);var Aa=[];return ca=String(ca),_s(this.i,function(Ya){Ya[0]===ca&&Aa.push(Ya[1])}),Aa},e.has=function(ca){pc(arguments,1),ca=String(ca);for(var Aa=0;Aa<this.i.length;Aa++)if(this.i[Aa][0]===ca)return!0;return!1},e.keys=function ca(){var Aa,Ya,_c=this;return be(ca,function(J){if(1==J.h&&(Aa=m(_c),Ya=Aa.next()),3!=J.h)return Ya.done?void(J.h=0):V(J,m(Ya.value).next().value);Ya=Aa.next(),J.h=2})},e.set=function(ca,Aa,Ya){pc(arguments,2),ca=String(ca);var Zc=[],Ol=ma(ca,Aa,Ya),_c=!0;_s(this.i,function(J){J[0]===ca?_c&&(_c=!Zc.push(Ol)):Zc.push(J)}),_c&&Zc.push(Ol),this.i=Zc},e.values=function ca(){var Aa,Ya,Ol,_c=this;return be(ca,function(J){if(1==J.h&&(Aa=m(_c),Ya=Aa.next()),3!=J.h)return Ya.done?void(J.h=0):((Ol=m(Ya.value)).next(),V(J,Ol.next().value));Ya=Aa.next(),J.h=2})},_a.prototype._asNative=function(){for(var ca=new Ua,Aa=m(this),Ya=Aa.next();!Ya.done;Ya=Aa.next()){var Zc=m(Ya.value);Ya=Zc.next().value,Zc=Zc.next().value,ca.append(Ya,Zc)}return ca},_a.prototype._blob=function(){var ca="----formdata-polyfill-"+Math.random(),Aa=[],Ya="--"+ca+'\r\nContent-Disposition: form-data; name="';return this.forEach(function(Zc,Ol){return"string"==typeof Zc?Aa.push(Ya+sl(ua(Ol))+'"\r\n\r\n'+ua(Zc)+"\r\n"):Aa.push(Ya+sl(ua(Ol))+'"; filename="'+sl(Zc.name)+'"\r\nContent-Type: '+(Zc.type||"application/octet-stream")+"\r\n\r\n",Zc,"\r\n")}),Aa.push("--"+ca+"--"),new Blob(Aa,{type:"multipart/form-data; boundary="+ca})},_a.prototype[Symbol.iterator]=function(){return this.entries()},_a.prototype.toString=function(){return"[object FormData]"},Dl&&!Dl.matches&&(Dl.matches=Dl.matchesSelector||Dl.mozMatchesSelector||Dl.msMatchesSelector||Dl.oMatchesSelector||Dl.webkitMatchesSelector||function(ca){for(var Aa=(ca=(this.document||this.ownerDocument).querySelectorAll(ca)).length;0<=--Aa&&ca.item(Aa)!==this;);return-1<Aa}),Kl&&(_a.prototype[Kl]="FormData"),nl){var Qa=qa.XMLHttpRequest.prototype.setRequestHeader;qa.XMLHttpRequest.prototype.setRequestHeader=function(ca,Aa){Qa.call(this,ca,Aa),"content-type"===ca.toLowerCase()&&(this.B=!0)},qa.XMLHttpRequest.prototype.send=function(ca){ca instanceof _a?(ca=ca._blob(),this.B||this.setRequestHeader("Content-Type",ca.type),nl.call(this,ca)):nl.call(this,ca)}}Wc&&(qa.fetch=function(ca,Aa){return Aa&&Aa.body&&Aa.body instanceof _a&&(Aa.body=Aa.body._blob()),Wc.call(this,ca,Aa)}),El&&(qa.navigator.sendBeacon=function(ca,Aa){return Aa instanceof _a&&(Aa=Aa._asNative()),El.call(this,ca,Aa)}),qa.FormData=_a}}();let Ade=1;function Bbe(e,n,i,c,h){Ade+=1;const g={sid:i.sid,command:"convergeAllocateEdge",uid:"666",appId:i.appId,ts:Math.floor(Date.now()/1e3),seq:Ade,requestId:Ade,version:o1,cname:i.cname},v={service_name:n,json_body:JSON.stringify(g)};let m,C,y=e[0];return JT(l(function*(){m=Date.now();const N=yield iO(y,{data:v,cancelToken:c,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(C=Date.now()-m,0!==N.code){const V=new ea(_t.UNEXPECTED_RESPONSE,"live streaming ap error, code"+N.code,{retry:!0,responseTime:C});throw de.error(V.toString()),Gc("error",["AjaxAPI"],"requestLiveStreamingWorkerManager",void 0,V.toString()),V}const k=JSON.parse(N.json_body);if(200!==k.code){const V=new ea(_t.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(k.code,", reason: ").concat(k.reason),{code:k.code,responseTime:C});throw de.error(V.toString()),Gc("error",["AjaxAPI"],"requestLiveStreamingWorkerManager",void 0,V.toString()),V}if(!k.servers||0===k.servers.length){const V=new ea(_t.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:k.code,responseTime:C});throw de.error(V.toString()),Gc("error",["AjaxAPI"],"requestLiveStreamingWorkerManager",void 0,V.toString()),V}const U=(K=n,{addressList:(V=k).servers.map($=>"wss://".concat($.address.replace(/\./g,"-"),".").concat(ya("WORKER_DOMAIN"),":").concat($.wss,"?serviceName=").concat(encodeURIComponent(K))),workerToken:V.workerToken,vid:V.vid});var V,K;return ya("LIVE_STREAMING_ADDRESS")&&(U.addressList=ya("LIVE_STREAMING_ADDRESS")instanceof Array?ya("LIVE_STREAMING_ADDRESS"):[ya("LIVE_STREAMING_ADDRESS")]),hme(hme({},U),{},{responseTime:C})}),(N,k)=>(qc.apworkerEvent(i.sid,{success:!0,sc:200,serviceName:n,responseDetail:JSON.stringify(N.addressList),firstSuccess:0===k,responseTime:C,serverIp:e[k%e.length]}),!1),(N,k)=>(qc.apworkerEvent(i.sid,{success:!1,sc:N.data&&N.data.code||200,serviceName:n,responseTime:C,serverIp:e[k%e.length]}),!!(N.code!==_t.OPERATION_ABORTED&&N.code!==_t.UNEXPECTED_RESPONSE||N.data&&N.data.retry)&&(y=e[(k+1)%e.length],!0)),h)}let mde=1;function fme(e,n,i,c){let{url:h,areaCode:g}=e;Gc("debug",["AjaxAPI",n.clientId],"requestChooseServer",{url:h,areaCode:g});const v=Date.now();let m;const[C,y]=mme(n,g,[_y.CHOOSE_SERVER]);let N=ey.networkState;return JT(l(function*(){N&&ey.networkState===yy.OFFLINE&&ey.onlineWaiter&&(yield _l.race([ey.onlineWaiter,s_(c&&c.maxRetryTimeout||W0.maxRetryTimeout)])),N=ey.networkState;const{data:k,headers:U}=yield iO(h,{data:C,cancelToken:i,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);m="1"===U.http3?1:-1,qc.reportResourceTiming(h,n.sid),gme(k,h,n,v,[_y.CHOOSE_SERVER],m);const V=kle(k,_y.CHOOSE_SERVER);return Ame(V),Vge(V,h)}),k=>(k&&qc.joinChooseServer(n.sid,{lts:v,succ:!0,csAddr:h,opid:y,serverList:k.gatewayAddrs.map(U=>U.address),ec:null,cid:k.cid.toString(),uid:k.uid.toString(),csIp:k.csIp,unilbsServerIds:[_y.CHOOSE_SERVER].toString(),isHttp3:m}),!1),k=>k.code!==_t.OPERATION_ABORTED&&(k.code===_t.CAN_NOT_GET_GATEWAY_SERVER?k.data.retry:(qc.joinChooseServer(n.sid,{lts:v,succ:!1,csAddr:h,serverList:null,opid:y,ec:k.code,csIp:k.data&&k.data.csIp,unilbsServerIds:[_y.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:N}),isHttp3:m}),de.warning("[".concat(n.clientId,"] Choose server network error, retry"),k),pl("warning",["AjaxAPI",n.clientId],"Choose server network error, retry, ".concat(k)),!0)),c)}function pme(e,n,i,c){let h,{url:g,areaCode:v,serviceIds:m}=e;Gc("debug",["AjaxAPI",n.clientId],"requestMultiUnilbs",{url:g,areaCode:v,serviceIds:m});const C=Date.now(),[y,N]=mme(n,v,m);let k;return JT(l(function*(){k&&ey.networkState===yy.OFFLINE&&ey.onlineWaiter&&(yield _l.race([ey.onlineWaiter,s_(c&&c.maxRetryTimeout||W0.maxRetryTimeout)])),k=ey.networkState;const{data:U,headers:V}=yield iO(g,{data:y,cancelToken:i,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);h="1"===V.http3?1:-1,qc.reportResourceTiming(g,n.sid),gme(U,g,n,C,m,h);const K=kle(U,_y.CHOOSE_SERVER),$=kle(U,"proxy5"===n.cloudProxyServer?_y.CLOUD_PROXY_5:"proxy3"===n.cloudProxyServer||"proxy4"===n.cloudProxyServer?_y.CLOUD_PROXY:_y.CLOUD_PROXY_FALLBACK);return Ame(K),{gatewayInfo:Vge(K,g),proxyInfo:$,url:g}}),U=>(U.gatewayInfo&&qc.joinChooseServer(n.sid,{lts:C,succ:!0,csAddr:g,serverList:U.gatewayInfo.gatewayAddrs.map(V=>V.address),ec:null,opid:N,cid:U.gatewayInfo.cid.toString(),uid:U.gatewayInfo.uid.toString(),csIp:U.gatewayInfo.csIp,unilbsServerIds:m.toString(),isHttp3:h}),U.proxyInfo&&qc.joinWebProxyAP(n.sid,{lts:C,sucess:1,apServerAddr:g,turnServerAddrList:U.proxyInfo.addresses.map(V=>V.ip).join(","),errorCode:null,eventType:n.cloudProxyServer,unilbsServerIds:m.toString()}),!1),U=>U.code!==_t.OPERATION_ABORTED&&(U.code===_t.CAN_NOT_GET_GATEWAY_SERVER?U.data.retry:(qc.joinWebProxyAP(n.sid,{lts:C,sucess:0,apServerAddr:g,turnServerAddrList:null,errorCode:U.code,eventType:n.cloudProxyServer,unilbsServerIds:m.toString(),extend:JSON.stringify({networkState:k})}),de.warning("[".concat(n.clientId,"] multi unilbs network error, retry"),U),pl("warning",["AjaxAPI",n.clientId],"multi unilbs network error, retry, ".concat(U)),!0)),c)}const gme=(e,n,i,c,h,g)=>{const v=[],m=C=>{4096===C.flag?qc.joinChooseServer(i.sid,{lts:c,succ:!1,csAddr:n,opid:e.opid,serverList:null,ec:C.error.message,csIp:C.error.data&&C.error.data.csIp,unilbsServerIds:h.toString(),isHttp3:g}):1048576!==C.flag&&4194304!==C.flag&&4194310!==C.flag||qc.joinWebProxyAP(i.sid,{lts:c,sucess:0,apServerAddr:n,turnServerAddrList:null,errorCode:C.error.code,eventType:i.cloudProxyServer,unilbsServerIds:h.toString()})};if(e.response_body.forEach(C=>{const y=C.buffer.code;if(23===C.uri&&0===y&&!C.buffer.edges_services)if(4194310===C.buffer.flag)de.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),C.buffer.edges_services=[];else{const N={error:new ea(_t.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:e.detail[502]}),flag:C.buffer.flag};v.push(N),m(N)}if(0!==y){const N=xre(y),k={error:new ea(_t.CAN_NOT_GET_GATEWAY_SERVER,N.desc,{desc:N.desc,retry:N.retry,csIp:e.detail[502]}),flag:C.buffer.flag};4194310===C.buffer.flag?de.warning(k.error.toString()):v.push(k),m(k)}}),v.length)throw de.warning("[".concat(i.clientId,"] multi unilbs ").concat(n," failed, ").concat(v.map(C=>"flag: ".concat(C.flag,", message: ").concat(C.error.message,", retry: ").concat(C.error.data.retry)).join(" | "))),Gc("warning",["AjaxAPI",i.clientId],"checkMultiUnilbsResponseValid",{url:n},v.map(C=>({flag:C.flag,message:C.error.message,retry:C.error.data.retry}))),new ea(_t.CAN_NOT_GET_GATEWAY_SERVER,v.map(C=>"flag: ".concat(C.flag,", message: ").concat(C.error.message)).join(" | "),{retry:!!v.find(C=>C.error.data.retry),csIp:e.detail[502],desc:[...new Set(v.map(C=>{var y,N;return null==C||null===(y=C.error)||void 0===y||null===(N=y.data)||void 0===N?void 0:N.desc}).filter(C=>!!C))]})},Ame=e=>{var n,i;if(e.addresses&&0===e.addresses.length&&0===e.code)throw new ea(_t.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:e.detail&&e.detail[502]});if(null!==(n=e.detail)&&void 0!==n&&n[19]&&"string"==typeof(null===(i=e.detail)||void 0===i?void 0:i[19])){const h=e.detail[19],g=null==h?void 0:h.split(";");for(let v=0;v<g.length;v++){var c;const m=WR(c=g[v]).call(c);e.addresses[v]&&g&&(e.addresses[v].fingerprint=m)}}if(ya("GATEWAY_ADDRESS")&&ya("GATEWAY_ADDRESS").length>0){de.debug("assign gateway address to",ya("GATEWAY_ADDRESS")),pl("debug",["AjaxAPI"],"assign gateway address to ".concat(JSON.stringify(ya("GATEWAY_ADDRESS"))));const h=ya("GATEWAY_ADDRESS").map(g=>{var v,m;const C=null!==(v=null===(m=e.addresses.find(y=>y.ip===g.ip&&y.port===g.port))||void 0===m?void 0:m.fingerprint)&&void 0!==v?v:"";return{ip:g.ip,port:g.port,ticket:e.addresses[0]&&e.addresses[0].ticket,fingerprint:C}});e.addresses=h}},Ube=(e,n)=>{if(e.response_body&&e.response_body.length){const i=e.response_body[0];if(0!==i.buffer.code){const c=xre(i.buffer.code);throw new ea(_t.UPDATE_TICKET_FAILED,"[".concat(i.buffer.code,"]: ").concat(c.desc),{retry:c.retry})}return i.buffer.ticket}throw de.debug("update ticket request received ap response without response body:",n),pl("debug",["AjaxAPI"],"update ticket request received ap response without response body: ".concat(n)),new ea(_t.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},mme=(e,n,i)=>{const c=Math.floor(1e12*Math.random()),h={appid:e.appId,client_ts:Date.now(),opid:c,sid:e.sid,request_bodies:[{uri:22,buffer:{cname:e.cname,detail:{6:e.stringUid,11:n,12:ya("USE_NEW_TOKEN")?"1":void 0},key:e.token,service_ids:i,uid:e.uid||0}}]};h.request_bodies.forEach(v=>{e.multiIP&&e.multiIP.gateway_ip&&(v.buffer.detail[5]=JSON.stringify({vocs_ip:[e.multiIP.uni_lbs_ip],vos_ip:[e.multiIP.gateway_ip]}))});const g=new FormData;return g.append("request",JSON.stringify(h)),[g,c]},Fbe=(e,n)=>{const i=Math.floor(1e12*Math.random()),c={appid:e.appId,client_ts:Date.now(),opid:i,sid:e.sid,request_bodies:[{uri:28,buffer:{cname:e.cname,detail:{1:"",6:e.stringUid,12:"1"},token:e.token,service_ids:n,uid:e.uid||0,edges_services:e.apResponse.addresses.map(g=>({ip:g.ip,port:g.port}))}}]},h=new FormData;return h.append("request",JSON.stringify(c)),[h,i]};let Ede=0;const Mre=()=>{const e=ya("AREAS");return 0===e.length&&e.push(_p.GLOBAL),_A(e).call(e,(n,i,c)=>{const h=jbe(i);return h?0===c?h:"".concat(n,",").concat(h):n},"")},jbe=e=>e===_p.OVERSEA?"".concat(ly.ASIA,",").concat(ly.EUROPE,",").concat(ly.AFRICA,",").concat(ly.NORTH_AMERICA,",").concat(ly.SOUTH_AMERICA,",").concat(ly.OCEANIA):ly[e],Bre={GLOBAL:{ASIA:[_p.CHINA,_p.JAPAN,_p.INDIA,_p.KOREA,_p.HKMC],EUROPE:[],NORTH_AMERICA:[_p.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},vde=Object.keys(Bre[_p.GLOBAL]),Eme=[_p.CHINA,_p.NORTH_AMERICA,_p.EUROPE,_p.ASIA,_p.JAPAN,_p.INDIA,_p.OCEANIA,_p.SOUTH_AMERICA,_p.AFRICA,_p.KOREA,_p.HKMC,_p.US];function yde(e,n,i,c){return _de.apply(this,arguments)}function _de(){return _de=l(function*(e,n,i,c){return{gatewayInfo:yield(g=l(function*(v,m,C,y){let N=null;const k=[],U=function(){var K=l(function*(){const $=ya("WEBCS_DOMAIN").slice(0,ya("AJAX_REQUEST_CONCURRENT")).map(be=>({url:v.proxyServer?"https://".concat(v.proxyServer,"/ap/?url=").concat(be+"/api/v2/transpond/webrtc?v=2"):"https://".concat(be,"/api/v2/transpond/webrtc?v=2"),areaCode:Mre()})),Z=y.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:$.map(be=>be.url)}),ye=yield QY({fragementLength:ya("FRAGEMENT_LENGTH"),referenceList:$,asyncMapHandler:be=>(de.debug("[".concat(v.clientId,"] Connect to choose_server:"),be.url),fme(be,v,m,C)),allFailedhandler:be=>{throw y.recordJoinChannelService({endTs:Date.now(),status:"error",errors:be},Z),be[0]},promisesCollector:k});return y.recordJoinChannelService({endTs:Date.now(),status:"success"},Z),ye});return function(){return K.apply(this,arguments)}}(),V=function(){var K=l(function*(){if(yield s_(1e3),null!==N)return N;const $=ya("WEBCS_DOMAIN_BACKUP_LIST").map(be=>({url:v.proxyServer?"https://".concat(v.proxyServer,"/ap/?url=").concat(be+"/api/v2/transpond/webrtc?v=2"):"https://".concat(be,"/api/v2/transpond/webrtc?v=2"),areaCode:Mre()})),Z=y.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:$.map(be=>be.url)}),ye=yield QY({fragementLength:ya("FRAGEMENT_LENGTH"),referenceList:$,asyncMapHandler:be=>(de.debug("[".concat(v.clientId,"] Connect to backup choose_server:"),be.url),fme(be,v,m,C)),allFailedhandler:be=>{throw y.recordJoinChannelService({endTs:Date.now(),status:"error",errors:be},Z),be[0]},promisesCollector:k});return y.recordJoinChannelService({endTs:Date.now(),status:"success"},Z),ye});return function(){return K.apply(this,arguments)}}();try{return N=yield QQ([U(),V()]),k.length&&k.forEach(K=>K.cancel&&"function"==typeof K.cancel&&K.cancel()),N}catch(K){throw K[0]}}),function(v,m,C,y){return g.apply(this,arguments)})(e,n,i,c)};var g}),_de.apply(this,arguments)}function vme(e,n,i,c,h){return Ide.apply(this,arguments)}function Ide(){return Ide=l(function*(e,n,i,c,h){const g=e.cloudProxyServer;if("disabled"===g){if(!c)return;if(e.useLocalAccessPoint)return yield yde(e,n,i,h);if(ya("JOIN_WITH_FALLBACK_MEDIA_PROXY")){const{gatewayInfo:y,proxyInfo:N}=yield _me(e,n,i,h);return e.turnServer&&"auto"!==e.turnServer.mode?(pl("debug",["Server",e.clientId],"do not set fallback turn because of already having turnserver"),{gatewayInfo:y}):(e.turnServer={mode:"manual",servers:N.map(k=>({turnServerURL:k.address,tcpport:k.tcpport||s1.tcpport,udpport:k.udpport||s1.udpport,username:k.username||s1.username,password:k.password||s1.password,forceturn:ya("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE"),security:!0}))},{gatewayInfo:y})}return yield yde(e,n,i,h)}const{proxyInfo:v,gatewayInfo:m}=yield _me(e,n,i,h),C={gatewayInfo:m};return e.turnServer={mode:"manual",servers:v.map(y=>({turnServerURL:y.address,tcpport:"proxy3"===g?void 0:y.tcpport?y.tcpport:s1.tcpport,udpport:"proxy4"===g?void 0:y.udpport?y.udpport:s1.udpport,username:y.username||s1.username,password:y.password||s1.password,forceturn:"proxy4"!==g,security:"proxy5"===g}))},de.debug("[".concat(e.clientId,"] set proxy server: ").concat(e.proxyServer,", mode: ").concat(g)),Gc("debug",["Server",e.clientId],"setCloudProxyServerAndGetServerInfo",{proxyServer:e.proxyServer,mode:e.cloudProxyServer}),C}),Ide.apply(this,arguments)}function yme(e,n,i,c,h){return bde.apply(this,arguments)}function bde(){return bde=l(function*(e,n,i,c,h){let v=[];v=ya("ACCOUNT_REGISTER").slice(0,ya("AJAX_REQUEST_CONCURRENT")).map(n.proxyServer?C=>"https://".concat(n.proxyServer,"/ap/?url=").concat(C+"/api/v1"):C=>"https://".concat(C,"/api/v1"));const m=null==h?void 0:h.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:v});try{const C=yield(y=l(function*(N,k,U,V,K){const $=Date.now(),Z={sid:U.sid,opid:10,appid:U.appId,string_uid:k};let ye=N[0];const be=yield JT(()=>iO(ye+"".concat(-1===ye.indexOf("?")?"?":"&","action=stringuid"),{data:Z,cancelToken:V,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}}),(_s,ua)=>{if(0===_s.code){if(_s.uid<=0||_s.uid>=Math.pow(2,32))throw de.error("Invalid Uint Uid ".concat(k," => ").concat(_s.uid),_s),Gc("error",["AjaxAPI"],"requestUserAccount","Invalid Uint Uid ".concat(k," => ").concat(_s.uid,", ").concat(_s)),qc.reqUserAccount(Z.sid,{lts:$,success:!1,serverAddr:ye,stringUid:Z.string_uid,uid:_s.uid,errorCode:_t.INVALID_UINT_UID_FROM_STRING_UID,extend:Z}),new ea(_t.INVALID_UINT_UID_FROM_STRING_UID);return qc.reqUserAccount(Z.sid,{lts:$,success:!0,serverAddr:ye,stringUid:Z.string_uid,uid:_s.uid,errorCode:null,extend:Z}),!1}const ma=xre(_s.code);return ma.retry&&(ye=N[(ua+1)%N.length]),qc.reqUserAccount(Z.sid,{lts:$,success:!1,serverAddr:ye,stringUid:Z.string_uid,uid:_s.uid,errorCode:ma.desc,extend:Z}),ma.retry},(_s,ua)=>_s.code!==_t.OPERATION_ABORTED&&(qc.reqUserAccount(Z.sid,{lts:$,success:!1,serverAddr:ye,stringUid:Z.string_uid,uid:null,errorCode:_s.code,extend:Z}),ye=N[(ua+1)%N.length],!0),K);if(0!==be.code){const _s=xre(be.code);throw new ea(_t.UNEXPECTED_RESPONSE,_s.desc)}return be}),function(N,k,U,V,K){return y.apply(this,arguments)})(v,e,n,i,c);return null==h||h.recordJoinChannelService({status:"success",endTs:Date.now()},m),C.uid}catch(C){throw null==h||h.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[C]},m),C}var y}),bde.apply(this,arguments)}function Cde(){return Cde=l(function*(e,n,i){const c=ya("CDS_AP").slice(0,ya("AJAX_REQUEST_CONCURRENT")).map(m=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(m+"/api/v1"):"https://".concat(m,"/api/v1?action=config")).map(m=>function(C,y,N,k){const U=Yp(),V={flag:64,cipher_method:0,features:{device:U.name,system:U.os,system_general:navigator.userAgent,vendor:y.appId,version:o1,cname:y.cname,sid:y.sid,session_id:y.sid,detail:"",proxyServer:y.proxyServer}};return JT(()=>iO(C,{data:V,timeout:1e3,cancelToken:N,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}}),void 0,K=>K.code!==_t.OPERATION_ABORTED,k)}(m,e,n,i));let h=null,g=null,v={};try{h=yield QQ(c)}catch(m){if(m.code===_t.OPERATION_ABORTED)throw m;g=m}if(c.forEach(m=>m.cancel()),qc.reportApiInvoke(e.sid,{name:zl.REQUEST_CONFIG_DISTRIBUTE,options:{error:g,res:h}}).onSuccess(),h&&h.test_tags)try{v=function(m){if(!m.test_tags)return{};const C=m.test_tags,y=Object.keys(C),N={};return y.forEach(k=>{var U;const V=WR(U=k.slice(4)).call(U),K=JSON.parse(C[k])[1];N[V]=K}),N}(h)}catch(m){}return v}),Cde.apply(this,arguments)}function _me(e,n,i,c){return Sde.apply(this,arguments)}function Sde(){return Sde=l(function*(e,n,i,c){const h=ya("PROXY_SERVER_TYPE3"),g=(V,K,$)=>{let Z=$||h;return Array.isArray(Z)&&(Z=K%2==0?h[1]:h[0]),"https://".concat(Z,"/ap/?url=").concat(V)};let v=null;const m=[],C=function(){var V=l(function*(){const K=ya("WEBCS_DOMAIN").slice(0,ya("AJAX_REQUEST_CONCURRENT")).map((ye,be)=>{let _s;return _s="disabled"===e.cloudProxyServer&&e.proxyServer?g("".concat(ye,"/api/v2/transpond/webrtc?v=2"),be,e.proxyServer):"disabled"===e.cloudProxyServer||"fallback"===e.cloudProxyServer?"https://".concat(ye,"/api/v2/transpond/webrtc?v=2"):g("".concat(ye,"/api/v2/transpond/webrtc?v=2"),be),{url:_s,areaCode:Mre(),serviceIds:[_y.CHOOSE_SERVER,"proxy5"===e.cloudProxyServer?_y.CLOUD_PROXY_5:"proxy3"===e.cloudProxyServer||"proxy4"===e.cloudProxyServer?_y.CLOUD_PROXY:_y.CLOUD_PROXY_FALLBACK]}}),$=c.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:K.map(ye=>ye.url)}),Z=yield QY({fragementLength:ya("FRAGEMENT_LENGTH"),referenceList:K,asyncMapHandler:ye=>(de.debug("[".concat(e.clientId,"] Connect to choose_server:"),ye.url),pme(ye,e,n,i)),allFailedhandler:ye=>{throw c.recordJoinChannelService({endTs:Date.now(),status:"error",errors:ye},$),ye[0]},promisesCollector:m});return c.recordJoinChannelService({endTs:Date.now(),status:"success"},$),Z});return function(){return V.apply(this,arguments)}}(),y=function(){var V=l(function*(){if(yield s_(1e3),null!==v)return v;const K=ya("WEBCS_DOMAIN_BACKUP_LIST").map((ye,be)=>{let _s;return _s="disabled"===e.cloudProxyServer&&e.proxyServer?g("".concat(ye,"/api/v2/transpond/webrtc?v=2"),be,e.proxyServer):"disabled"===e.cloudProxyServer||"fallback"===e.cloudProxyServer?"https://".concat(ye,"/api/v2/transpond/webrtc?v=2"):g("".concat(ye,"/api/v2/transpond/webrtc?v=2"),be),{url:_s,areaCode:Mre(),serviceIds:[_y.CHOOSE_SERVER,"proxy5"===e.cloudProxyServer?_y.CLOUD_PROXY_5:"proxy3"===e.cloudProxyServer||"proxy4"===e.cloudProxyServer?_y.CLOUD_PROXY:_y.CLOUD_PROXY_FALLBACK]}}),$=c.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:K.map(ye=>ye.url)}),Z=yield QY({fragementLength:ya("FRAGEMENT_LENGTH"),referenceList:K,asyncMapHandler:ye=>(de.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),ye.url),pme(ye,e,n,i)),allFailedhandler:ye=>{throw c.recordJoinChannelService({endTs:Date.now(),status:"error",errors:ye},$),ye[0]},promisesCollector:m});return c.recordJoinChannelService({endTs:Date.now(),status:"success"},$),Z});return function(){return V.apply(this,arguments)}}();let N,k,U;try{({gatewayInfo:N,proxyInfo:k,url:U}=yield QQ([C(),y()]))}catch(V){throw V[0]}if(m.length&&m.forEach(V=>V.cancel&&"function"==typeof V.cancel&&V.cancel()),!N||!k)throw new ea(_t.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(e.apUrl=U,"disabled"!==e.cloudProxyServer&&Array.isArray(h)&&U){const V=new YAe(U).host;h.includes(V)&&(e.proxyServer=V,de.setProxyServer(V),qc.setProxyServer(V),rQ(V))}return v={gatewayInfo:N,proxyInfo:yield K_e(k,N.uid)},v}),Sde.apply(this,arguments)}function Ime(e,n,i,c){return Tde.apply(this,arguments)}function Tde(){return Tde=l(function*(e,n,i,c){const h=ya("UAP_AP").slice(0,ya("AJAX_REQUEST_CONCURRENT")).map(g=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(g+"/api/v1?action=uap"):"https://".concat(g,"/api/v1?action=uap"));return yield Bbe(h,e,n,i,c)}),Tde.apply(this,arguments)}function wde(){return wde=l(function*(e,n,i){const c=ya("UAP_AP").slice(0,ya("AJAX_REQUEST_CONCURRENT")).map(h=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(h+"/api/v1?action=uap"):"https://".concat(h,"/api/v1?action=uap")).map(h=>function(g,v,m,C){const y={command:"convergeAllocateEdge",sid:v.sid,appId:v.appId,token:v.token,ts:Date.now(),version:o1,cname:v.cname,uid:v.uid.toString(),requestId:mde,seq:mde};mde+=1;const N={service_name:"tele_channel",json_body:JSON.stringify(y)};return JT(l(function*(){const k=yield iO(g,{data:N,cancelToken:m,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(0!==k.code){const V=new ea(_t.UNEXPECTED_RESPONSE,"cross channel ap error, code"+k.code,{retry:!0});throw de.error(V.toString()),Gc("error",["AjaxAPI"],"requestChannelMediaRelayWorkerManager",void 0,V.toString()),V}const U=JSON.parse(k.json_body);if(200!==U.code){const V=new ea(_t.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(U.code,", reason: ").concat(U.reason));throw de.error(V.toString()),Gc("error",["AjaxAPI"],"requestChannelMediaRelayWorkerManager",void 0,V.toString()),V}if(!U.servers||0===U.servers.length){const V=new ea(_t.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw de.error(V.toString()),Gc("error",["AjaxAPI"],"requestChannelMediaRelayWorkerManager",void 0,V.toString()),V}return{vid:U.vid,workerToken:U.workerToken,addressList:U.servers.map(V=>"wss://".concat(V.address.replace(/\./g,"-"),".").concat(ya("WORKER_DOMAIN"),":").concat(V.wss))}}),void 0,k=>!!(k.code!==_t.OPERATION_ABORTED&&k.code!==_t.UNEXPECTED_RESPONSE||k.data&&k.data.retry),C)}(h,e,n,i));try{const h=yield QQ(c);return c.forEach(g=>g.cancel()),h}catch(h){throw h[0]}}),wde.apply(this,arguments)}function Rde(){return Rde=l(function*(e,n,i){let c=null;const h=[],g=function(){var v=l(function*(m){const C=ya(m?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map(y=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(y+"/api/v2/transpond/webrtc?v=2"):"https://".concat(y,"/api/v2/transpond/webrtc?v=2"));return m&&(yield s_(1e3),null!==c)?c:yield QY({fragementLength:ya("FRAGEMENT_LENGTH"),referenceList:C,asyncMapHandler:y=>(de.debug("[".concat(e.clientId,"] update ticket, Connect to ").concat(m?"backup":""," choose_server:"),y),function(N,k,U,V){const[K]=Fbe(k,[_y.CHOOSE_SERVER]);let $=ey.networkState;return JT(l(function*(){$&&ey.networkState===yy.OFFLINE&&ey.onlineWaiter&&(yield _l.race([ey.onlineWaiter,s_(V&&V.maxRetryTimeout||W0.maxRetryTimeout)])),$=ey.networkState;const Z=yield iO(N,{data:K,cancelToken:U,headers:{"Content-Type":"multipart/form-data;"}},!0);return Ube(Z,N)}),()=>!1,Z=>Z.code!==_t.OPERATION_ABORTED&&(Z.code===_t.UPDATE_TICKET_FAILED?Z.data.retry:(de.warning("[".concat(k.clientId,"] update ticket network error, retry"),Z),pl("warning",["AjaxAPI",k.clientId],"update ticket network error, retry, ".concat(Z)),!0)),V)}(y,e,n,i)),allFailedhandler:y=>{throw y[0]},promisesCollector:h})});return function(C){return v.apply(this,arguments)}}();try{return c=yield QQ([g(!1),g(!0)]),h.length&&h.forEach(v=>v.cancel&&"function"==typeof v.cancel&&v.cancel()),c}catch(v){throw v[0]}}),Rde.apply(this,arguments)}var bme;function Cme(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);n&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),i.push.apply(i,c)}return i}function Sme(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Cme(Object(i),!0).forEach(function(c){Y(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Cme(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}let qbe=uy("ConfigDistributeManager")(bme=class extends f0{constructor(){super(),Y(this,"configs",void 0),Y(this,"joinInfo",void 0),Y(this,"cancelToken",void 0),Y(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),Y(this,"interval",void 0),Y(this,"mutex",new _I("config-distribute")),Y(this,"mutableParamsRead",!1)}startGetConfigDistribute(e,n){this.joinInfo=e,this.cancelToken=n,this.interval&&this.stopGetConfigDistribute(),ya("ENABLE_CONFIG_DISTRIBUTE")&&(this.updateConfigDistribute(),this.interval=window.setInterval(()=>{this.updateConfigDistribute()},ya("CONFIG_DISTRIBUTE_INTERVAL")))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}awaitConfigDistributeComplete(){var e=this;return l(function*(){!e.mutex.isLocked||(yield e.mutex.lock())()})()}updateConfigDistribute(){var e=this;return l(function*(){if(e.mutableParamsRead||(e.mutableParamsRead=!0,qc.reportApiInvoke(null,{options:void 0,name:zl.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:Gl.TRACER}).onSuccess(JSON.stringify(uQ))),!e.joinInfo||!e.cancelToken||!e.retryConfig)return de.debug("[config-distribute] get config distribute interrupted have no joininfo"),void Gc("debug",e,"updateConfigDistribute",void 0,"get config distribute interrupted have no joininfo");let n;const i=yield e.mutex.lock();try{n=yield function Vbe(e,n,i){return Cde.apply(this,arguments)}(e.joinInfo,e.cancelToken,e.retryConfig),de.debug("[config-distribute] get config distribute",JSON.stringify(n)),Gc("debug",e,"updateConfigDistribute",n),n.limit_bitrate&&e.handleBitrateLimit(n.limit_bitrate),e.cacheGlobalParameterConfig(n),e.configs=n}catch(c){const h=new ea(_t.NETWORK_RESPONSE_ERROR,c);de.warning("[config-distribute] ".concat(h.toString())),Gc("warning",e,"updateConfigDistribute",void 0,c.toString())}finally{i()}})()}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(e){var n;(n=e)&&n.uplink&&n.id&&void 0!==n.uplink.max_bitrate&&void 0!==n.uplink.min_bitrate&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==e.id&&this.emit(Q4.UPDATE_BITRATE_LIMIT,e):this.emit(Q4.UPDATE_BITRATE_LIMIT,e))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&Sme({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(e){var n;const i=Eg(n=Object.keys(e).filter(h=>/^webrtc_ng_global_parameter/.test(h))).call(n);for(let h=0;h<i.length;h++)for(let g=i.length-1;g>h;g--){const v=i[g];if("number"==typeof e[v].__priority){const m=e[v].__priority,C=i[g-1];if("number"==typeof e[C].__priority){if(!(m>e[C].__priority))continue;{const y=v;i[g]=i[g-1],i[g-1]=y}}else{const y=v;i[g]=i[g-1],i[g-1]=y}}}const c={};i.forEach(h=>{const g=e[h],v=g.__expires;Object.keys(g).forEach(m=>{"__priority"===m||"__expires"===m||Object.prototype.hasOwnProperty.call(c,m)||(c[m]=Sme({value:g[m]},v&&{expires:v}))})});try{const h=JSON.stringify(c),g=window.btoa(h);window.localStorage.setItem("websdk_ng_global_parameter",g),de.debug("Caching global parameters ".concat(h)),Gc("debug",this,"cacheGlobalParameterConfig",h)}catch(h){de.error("Error caching global parameters:",h.message),Gc("error",this,"cacheGlobalParameterConfig",void 0,h.message)}}})||bme;function Tme(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);n&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),i.push.apply(i,c)}return i}function zY(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Tme(Object(i),!0).forEach(function(c){Y(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Tme(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}class Wbe extends f0{constructor(n,i,c,h){super(),Y(this,"spec",void 0),Y(this,"token",void 0),Y(this,"websocket",void 0),Y(this,"pingpongTimer",void 0),Y(this,"reconnectMode","retry"),Y(this,"serviceMode",void 0),Y(this,"reqId",0),Y(this,"commandReqId",0),Y(this,"handleWebSocketOpen",()=>{this.reconnectMode="retry",this.startPingPong()}),Y(this,"handleWebSocketMessage",g=>{if(!g.data)return;const v=JSON.parse(g.data);v.requestId?this.emit("@".concat(v.requestId,"-").concat(v.sid),v):this.serviceMode===P0.INJECT?this.emit(R1.INJECT_STREAM_STATUS,v):(qc.workerEvent(this.spec.sid,{actionType:"status",serverCode:v.code,workerType:this.serviceMode===P0.TRANSCODE?1:2}),this.emit(R1.PUBLISH_STREAM_STATUS,v))}),this.spec=i,this.token=n,this.serviceMode=h,this.websocket=new JQ("live-streaming",c),this.websocket.on(Nh.CONNECTED,this.handleWebSocketOpen),this.websocket.on(Nh.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(Nh.REQUEST_NEW_URLS,(g,v)=>{E_(this,R1.REQUEST_NEW_ADDRESS).then(g).catch(v)}),this.websocket.on(Nh.RECONNECTING,()=>{this.websocket.reconnectMode=this.reconnectMode})}init(n){return this.websocket.init(n)}request(n,i,c,h){var g=this;return l(function*(){g.reqId+=1,"request"===n&&(g.commandReqId+=1);const v=g.commandReqId,m=g.reqId;if(!m||!g.websocket)throw new ea(_t.UNEXPECTED_ERROR);const C=zY({command:n,sdkVersion:"4.15.1"===o1?"0.0.1":o1,seq:m,requestId:m,allocate:c,cname:g.spec.cname,appId:g.spec.appId,sid:g.spec.sid,uid:g.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},i);if("closed"===g.websocket.state)throw new ea(_t.WS_DISCONNECT);const y=()=>new _l((V,K)=>{g.websocket.once(Nh.CLOSED,()=>K(new ea(_t.WS_ABORT))),g.websocket.once(Nh.CONNECTED,V)});"connected"!==g.websocket.state&&(yield y()),C.clientRequest&&(C.clientRequest.workerToken=g.token);const N=new _l((V,K)=>{const $=()=>{K(new ea(_t.WS_ABORT))};g.websocket.once(Nh.RECONNECTING,$),g.websocket.once(Nh.CLOSED,$),g.once("@".concat(m,"-").concat(g.spec.sid),Z=>{V(Z)})});h&&qc.workerEvent(g.spec.sid,zY(zY({},h),{},{requestId:v,actionType:"request",payload:JSON.stringify(i.clientRequest),serverCode:0,code:0}));const k=Date.now();g.websocket.sendMessage(C);let U=null;try{U=yield N}catch(V){if("closed"===g.websocket.state)throw V;return yield y(),yield g.request(n,i,c)}return h&&qc.workerEvent(g.spec.sid,zY(zY({},h),{},{requestId:v,actionType:"response",payload:JSON.stringify(U.serverResponse),serverCode:U.code,success:200===U.code,responseTime:Date.now()-k})),200!==U.code&&g.handleResponseError(U),U})()}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const n="4.15.1"===o1?"0.0.1":o1;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:n,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(n){switch(n.code){case T0.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void de.warning("live stream response already exists stream");case T0.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case T0.LIVE_STREAM_RESPONSE_BAD_STREAM:case T0.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new ea(_t.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:n.code}).throw();case T0.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===n.serverResponse.command||"UninjectStream"===n.serverResponse.command)return;throw new ea(_t.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case T0.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new ea(_t.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:n.code}).throw();case T0.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const i=new ea(_t.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(R1.WARNING,i,n.serverResponse.url)}case T0.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const i=new ea(_t.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(R1.WARNING,i,n.serverResponse.url)}case T0.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new ea(_t.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case T0.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new ea(_t.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:n.code}).throw();case T0.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const i=new ea(_t.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(R1.WARNING,i,n.serverResponse.url)}case T0.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new ea(_t.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:n.code}).throw();case T0.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new ea(_t.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case T0.LIVE_STREAM_RESPONSE_WORKER_LOST:case T0.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===n.serverResponse.command||"UninjectStream"===n.serverResponse.command)return;throw new ea(_t.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case T0.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===n.serverResponse.command||"UninjectStream"===n.serverResponse.command)return;if("UpdateTranscoding"===n.serverResponse.command||"ControlStream"===n.serverResponse.command)return new ea(_t.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:n.code}).throw();throw new ea(_t.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case T0.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case T0.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case T0.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case T0.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new ea(_t.LIVE_STREAMING_CDN_ERROR,"",{code:n.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(()=>{"connected"===this.websocket.state&&this.request("ping",{}).catch(vre)},6e3)}}function wme(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);n&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),i.push.apply(i,c)}return i}function d1(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?wme(Object(i),!0).forEach(function(c){Y(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):wme(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}class Kbe extends f0{constructor(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:W0;super(),Y(this,"onLiveStreamWarning",void 0),Y(this,"onLiveStreamError",void 0),Y(this,"onInjectStatusChange",void 0),Y(this,"spec",void 0),Y(this,"retryTimeout",1e4),Y(this,"connection",void 0),Y(this,"httpRetryConfig",void 0),Y(this,"wsRetryConfig",void 0),Y(this,"streamingTasks",new Map),Y(this,"isStartingStreamingTask",!1),Y(this,"taskMutex",new _I("live-streaming")),Y(this,"cancelToken",r1.CancelToken.source()),Y(this,"transcodingConfig",void 0),Y(this,"injectConfig",d1({},Sue)),Y(this,"injectLoopTimes",0),Y(this,"uapResponse",void 0),Y(this,"lastTaskId",1),Y(this,"statusError",new Map),this.spec=n,this.httpRetryConfig=c,this.wsRetryConfig=i}setTranscodingConfig(n){var i=this;return l(function*(){const c=d1(d1({},vQ),n);var m;66!==c.videoCodecProfile&&77!==c.videoCodecProfile&&100!==c.videoCodecProfile&&(de.debug("[".concat(i.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(c.videoCodecProfile," -> 100")),c.videoCodecProfile=100),c.transcodingUsers||(c.transcodingUsers=c.userConfigs),c.transcodingUsers&&(c.transcodingUsers=c.transcodingUsers.map(m=>d1(d1(d1({},Cue),m),{},{zOrder:m.zOrder?m.zOrder+1:1}))),Fg((m=c).width)||yp(m.width,"config.width",0,1e4),Fg(m.height)||yp(m.height,"config.height",0,1e4),Fg(m.videoBitrate)||yp(m.videoBitrate,"config.videoBitrate",1,1e6),Fg(m.videoFrameRate)||yp(m.videoFrameRate,"config.videoFrameRate"),Fg(m.lowLatency)||ZR(m.lowLatency,"config.lowLatency"),Fg(m.audioSampleRate)||qy(m.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),Fg(m.audioBitrate)||yp(m.audioBitrate,"config.audioBitrate",1,128),Fg(m.audioChannels)||qy(m.audioChannels,"config.audioChannels",[1,2,3,4,5]),Fg(m.videoGop)||yp(m.videoGop,"config.videoGop"),Fg(m.videoCodecProfile)||qy(m.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),Fg(m.userCount)||yp(m.userCount,"config.userCount",0,17),Fg(m.backgroundColor)||yp(m.backgroundColor,"config.backgroundColor",0,16777215),Fg(m.userConfigExtraInfo)||By(m.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),m.transcodingUsers&&!Fg(m.transcodingUsers)&&($T(m.transcodingUsers,"config.transcodingUsers"),m.transcodingUsers.forEach((C,y)=>{XM(C.uid),Fg(C.x)||yp(C.x,"transcodingUser[".concat(y,"].x"),0,1e4),Fg(C.y)||yp(C.y,"transcodingUser[".concat(y,"].y"),0,1e4),Fg(C.width)||yp(C.width,"transcodingUser[".concat(y,"].width"),0,1e4),Fg(C.height)||yp(C.height,"transcodingUser[".concat(y,"].height"),0,1e4),Fg(C.zOrder)||yp(C.zOrder-1,"transcodingUser[".concat(y,"].zOrder"),0,100),Fg(C.alpha)||yp(C.alpha,"transcodingUser[".concat(y,"].alpha"),0,1,!1)})),Fg(m.watermark)||EQ(m.watermark,"watermark"),Fg(m.backgroundImage)||EQ(m.backgroundImage,"backgroundImage"),m.images&&!Fg(m.images)&&($T(m.images,"config.images"),m.images.forEach((C,y)=>{EQ(C,"images[".concat(y,"]"))}));const h=[];c.images&&h.push(...c.images.map(m=>d1(d1(d1({},uY),m),{},{zOrder:255}))),c.backgroundImage&&(h.push(d1(d1(d1({},uY),c.backgroundImage),{},{zOrder:0})),delete c.backgroundImage),c.watermark&&(h.push(d1(d1(d1({},uY),c.watermark),{},{zOrder:255})),delete c.watermark),c.images=h,c.transcodingUsers&&(c.userConfigs=c.transcodingUsers.map(m=>d1({},m)),c.userCount=c.transcodingUsers.length,delete c.transcodingUsers);const g=(c.userConfigs||[]).map(m=>"number"==typeof m.uid?_l.resolve(m.uid):yme(m.uid,i.spec,i.cancelToken.token,i.httpRetryConfig));if((yield _l.all(g)).forEach((m,C)=>{c.userConfigs&&c.userConfigs[C]&&(c.userConfigs[C].uid=m)}),i.transcodingConfig=c,i.connection)try{var v;const m=yield i.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:i.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(ZN(v=i.streamingTasks).call(v)).map(C=>C.taskId).join("#")});de.debug("[".concat(i.spec.clientId,"] update live transcoding config success, code: ").concat(m.code,", config:"),JSON.stringify(i.transcodingConfig))}catch(m){if(!m.data||!m.data.retry)throw m;m.data.changeAddress&&i.connection.tryNextAddress(),i.streamingTasks.forEach(C=>{de.warning("[".concat(i.spec.clientId,"] live streaming receive error"),m.toString(),"try to republish",C.url),i.startLiveStreamingTask(C.url,C.mode,m).then(()=>{de.debug("[".concat(i.spec.clientId,"] live streaming republish ").concat(C.url," success"))}).catch(y=>{de.error("[".concat(i.spec.clientId,"] live streaming republish failed"),C.url,y.toString()),i.onLiveStreamError&&i.onLiveStreamError(C.url,y)})})}})()}setInjectStreamConfig(n,i){this.injectConfig=Object.assign({},this.injectConfig,n),this.injectLoopTimes=i}startLiveStreamingTask(n,i,c){var h=this;return l(function*(){var g;if(Array.from(ZN(g=h.streamingTasks).call(g)).find(y=>y.mode===P0.INJECT)&&i===P0.INJECT)return new ea(_t.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw();if(!h.transcodingConfig&&i===P0.TRANSCODE)throw new ea(_t.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");let v={command:"PublishStream",ts:Date.now(),url:n,uid:h.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};de.debug("[".concat(h.spec.clientId,"] start live streaming ").concat(n,", mode: ").concat(i));const m=yield h.taskMutex.lock();if(!h.connection&&c)return void m();if(h.streamingTasks.get(n)&&!c)return m(),new ea(_t.LIVE_STREAMING_TASK_CONFLICT).throw();try{h.connection||(h.connection=yield h.connect(i))}catch(y){throw m(),y}switch(i){case P0.TRANSCODE:v.transcodingConfig=d1({},h.transcodingConfig);break;case P0.RAW:break;case P0.INJECT:v={cname:h.spec.cname,command:"InjectStream",sid:h.spec.sid,transcodingConfig:h.injectConfig,ts:Date.now(),url:n,loopTimes:h.injectLoopTimes}}h.uapResponse&&h.uapResponse.vid&&(v.vid=h.uapResponse.vid),h.isStartingStreamingTask=!0;const C=h.lastTaskId++;try{const y=new _l((k,U)=>{s_(h.retryTimeout).then(()=>{if(c)return U(c);const V=h.statusError.get(n);return V?(h.statusError.delete(n),U(V)):void 0})}),N=yield _l.race([h.connection.request("request",{clientRequest:v},!0,{url:n,command:"PublishStream",workerType:i===P0.TRANSCODE?1:2,requestByUser:!c,tid:C.toString()}),y]);h.isStartingStreamingTask=!1,de.debug("[".concat(h.spec.clientId,"] live streaming started, code: ").concat(N.code)),h.streamingTasks.set(n,{clientRequest:v,mode:i,url:n,taskId:C}),m()}catch(y){if(m(),h.isStartingStreamingTask=!1,!y.data||!y.data.retry||c)throw y;return y.data.changeAddress?(h.connection.tryNextAddress(),yield h.startLiveStreamingTask(n,i,y)):yield h.startLiveStreamingTask(n,i,y)}})()}stopLiveStreamingTask(n){return new _l((i,c)=>{const h=this.streamingTasks.get(n);if(!h||!this.connection)return new ea(_t.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const g=h.mode;h.abortTask=()=>{de.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(n),i()},this.connection.request("request",{clientRequest:{command:g===P0.INJECT?"UninjectStream":"UnpublishStream",url:h.url}},!1,{url:n,command:"UnPublishStream",workerType:g===P0.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then(v=>{de.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(v.code)),this.streamingTasks.delete(n),0===this.streamingTasks.size&&g!==P0.INJECT&&(this.connection&&this.connection.close(),this.connection=void 0),i(),g===P0.INJECT&&this.onInjectStatusChange&&this.onInjectStatusChange(w2.INJECT_STREAM_STATUS_STOP_SUCCESS,this.spec.uid,n)}).catch(c)})}controlInjectStream(n,i,c,h){var g=this;return l(function*(){const v=g.streamingTasks.get(n);if(!v||!g.connection||v.mode!==P0.INJECT)throw new ea(_t.INVALID_OPERATION,"can not find inject stream task to control");return(yield g.connection.request("request",{clientRequest:{command:"ControlStream",url:n,control:i,audioVolume:c,position:h}})).serverResponse})()}resetAllTask(){var n;const i=Array.from(ZN(n=this.streamingTasks).call(n));this.terminate();for(const c of i)this.startLiveStreamingTask(c.url,c.mode).catch(h=>{this.onLiveStreamError&&this.onLiveStreamError(c.url,h)})}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=r1.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}connect(n){var i=this;return l(function*(){if(i.connection)throw new ea(_t.UNEXPECTED_ERROR,"live streaming connection has already connected");const c=yield E_(i,ZM.REQUEST_WORKER_MANAGER_LIST,n);return i.uapResponse=c,i.connection=new Wbe(c.workerToken,i.spec,i.wsRetryConfig,n),i.connection.on(R1.WARNING,(h,g)=>i.onLiveStreamWarning&&i.onLiveStreamWarning(g,h)),i.connection.on(R1.PUBLISH_STREAM_STATUS,h=>i.handlePublishStreamServer(h)),i.connection.on(R1.INJECT_STREAM_STATUS,h=>i.handleInjectStreamServerStatus(h)),i.connection.on(R1.REQUEST_NEW_ADDRESS,(h,g)=>{if(!i.connection)return g(new ea(_t.UNEXPECTED_ERROR,"can not get new live streaming address list"));E_(i,ZM.REQUEST_WORKER_MANAGER_LIST,n).then(v=>{i.uapResponse=v,h(v.addressList)}).catch(g)}),yield i.connection.init(c.addressList),i.connection})()}handlePublishStreamServer(n){const i=n.serverStatus&&n.serverStatus.url||"empty_url",c=this.streamingTasks.get(i),h=n.reason;switch(n.code){case T0.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case T0.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case T0.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case T0.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const v=new ea(_t.LIVE_STREAMING_CDN_ERROR,"",{code:n.code});if(c)return de.error(v.toString()),this.onLiveStreamError&&this.onLiveStreamError(i,v);if(!this.isStartingStreamingTask)return;this.statusError.set(i,v)}case T0.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const v=new ea(_t.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,h);return this.onLiveStreamWarning&&this.onLiveStreamWarning(i,v)}case T0.LIVE_STREAM_RESPONSE_WORKER_LOST:case T0.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var g;if(!this.connection)return;this.connection.tryNextAddress();const v=Array.from(ZN(g=this.streamingTasks).call(g));for(const m of v)m.abortTask?m.abortTask():(de.warning("[".concat(this.spec.clientId,"] publish stream status code"),n.code,"try to republish",m.url),this.startLiveStreamingTask(m.url,m.mode,new ea(_t.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:n.code})).then(()=>{de.debug("[".concat(this.spec.clientId,"] republish live stream success"),m.url)}).catch(C=>{de.error(C.toString()),this.onLiveStreamError&&this.onLiveStreamError(m.url,C)}));return}}}handleInjectStreamServerStatus(n){const i=Number(n.uid),c=n.serverStatus&&n.serverStatus.url;switch(n.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(w2.INJECT_STREAM_STATUS_START_SUCCESS,i,c));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(w2.INJECT_STREAM_STATUS_START_ALREADY_EXISTS,i,c),void this.streamingTasks.delete(c);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(w2.INJECT_STREAM_STATUS_START_UNAUTHORIZED,i,c),void this.streamingTasks.delete(c);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(w2.INJECT_STREAM_STATUS_BROKEN,i,c),void this.streamingTasks.delete(c);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(w2.INJECT_STREAM_STATUS_START_TIMEOUT,i,c),void this.streamingTasks.delete(c);default:return void de.debug("inject stream server status",n)}}hasUrl(n){return this.streamingTasks.has(n)}}class Rme{constructor(){Y(this,"destChannelMediaInfos",new Map),Y(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(n){e3(n),this.srcChannelMediaInfo=n}addDestChannelInfo(n){e3(n),this.destChannelMediaInfos.set(n.channelName,n)}removeDestChannelInfo(n){oY(n),this.destChannelMediaInfos.delete(n)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function Ome(e){if(!(e instanceof Rme))return new ea(_t.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();const n=e.getSrcChannelMediaInfo(),i=e.getDestChannelMediaInfo();return n?0===i.size?new ea(_t.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw():void 0:new ea(_t.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw()}class Ybe extends f0{constructor(n,i,c){super(),Y(this,"ws",void 0),Y(this,"requestId",1),Y(this,"heartBeatTimer",void 0),Y(this,"joinInfo",void 0),Y(this,"clientId",void 0),Y(this,"onOpen",()=>{this.emit("open"),this.startHeartBeatCheck()}),Y(this,"onClose",h=>{this.emit("close"),this.dispose()}),Y(this,"onMessage",h=>{const g=JSON.parse(h.data);if(!g||"serverResponse"!==g.command||!g.requestId)return g&&"serverStatus"===g.command&&g.serverStatus&&g.serverStatus.command?(this.emit("status",g.serverStatus),void this.emit(g.serverStatus.command,g.serverStatus)):void 0;this.emit("req_".concat(g.requestId),g)}),this.joinInfo=n,this.clientId=i,this.ws=new JQ("cross-channel-".concat(this.clientId),c),this.ws.on(Nh.RECONNECTING,()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")}),this.ws.on(Nh.CONNECTED,this.onOpen),this.ws.on(Nh.ON_MESSAGE,this.onMessage),this.ws.on(Nh.CLOSED,this.onClose)}isConnect(){return"connected"===this.ws.state}sendMessage(n){const i=this.requestId++;return n.requestId=i,n.seq=i,this.ws.sendMessage(n),i}waitStatus(n){return new _l((i,c)=>{const h=window.setTimeout(()=>{c(new ea(_t.TIMEOUT,"wait status timeout, status: ".concat(n)))},5e3);this.once(n,g=>{window.clearTimeout(h),g.state&&0!==g.state?c(new ea(_t.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(n))):i(void 0)}),this.once("dispose",()=>{window.clearTimeout(h),c(new ea(_t.WS_ABORT))})})}request(n){var i=this;return l(function*(){if("closed"===i.ws.state)throw new ea(_t.WS_DISCONNECT);"connected"!==i.ws.state&&(yield new _l((m,C)=>{i.ws.once(Nh.CLOSED,()=>C(new ea(_t.WS_ABORT))),i.ws.once(Nh.CONNECTED,m)}));const h=i.sendMessage(n),g=new _l((m,C)=>{const y=()=>{C(new ea(_t.WS_ABORT))};i.ws.once(Nh.RECONNECTING,y),i.ws.once(Nh.CLOSED,y),i.once("req_".concat(h),m),s_(3e3).then(()=>{i.removeAllListeners("req_".concat(h)),i.ws.off(Nh.RECONNECTING,y),i.ws.off(Nh.CLOSED,y),C(new ea(_t.TIMEOUT,"cross channel ws request timeout"))})}),v=yield g;if(!v||200!==v.code)throw new ea(_t.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(v)));return v})()}connect(n){var i=this;return l(function*(){i.ws.removeAllListeners(Nh.REQUEST_NEW_URLS),i.ws.on(Nh.REQUEST_NEW_URLS,c=>{c(n)}),yield i.ws.init(n)})()}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(n){const i=this.requestId++;return n.requestId=i,this.ws.sendMessage(n),i}startHeartBeatCheck(){this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval(()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})},3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class Jbe extends f0{set state(n){n!==this._state&&(n!==M_.RELAY_STATE_FAILURE&&(this.errorCode=_w.RELAY_OK),this.emit("state",n,this.errorCode),this._state=n)}get state(){return this._state}constructor(n,i,c,h){var g;super(),g=this,Y(this,"joinInfo",void 0),Y(this,"sid",void 0),Y(this,"clientId",void 0),Y(this,"cancelToken",r1.CancelToken.source()),Y(this,"workerToken",void 0),Y(this,"requestId",0),Y(this,"signal",void 0),Y(this,"prevChannelMediaConfig",void 0),Y(this,"httpRetryConfig",void 0),Y(this,"_state",M_.RELAY_STATE_IDLE),Y(this,"errorCode",_w.RELAY_OK),Y(this,"onStatus",v=>{de.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(v))),v&&v.command&&("onAudioPacketReceived"===v.command&&this.emit("event",tT.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===v.command&&this.emit("event",tT.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===v.command&&(this.errorCode=_w.SRC_TOKEN_EXPIRED,this.state=M_.RELAY_STATE_FAILURE),"onDestTokenPrivilegeDidExpire"===v.command&&(this.errorCode=_w.DEST_TOKEN_EXPIRED,this.state=M_.RELAY_STATE_FAILURE))}),Y(this,"onReconnect",l(function*(){de.debug("[".concat(g.clientId,"] ChannelMediaSocket disconnect, reconnecting")),g.emit("event",tT.NETWORK_DISCONNECTED),g.state=M_.RELAY_STATE_IDLE,g.prevChannelMediaConfig&&g.sendStartRelayMessage(g.prevChannelMediaConfig).catch(v=>{g.state!==M_.RELAY_STATE_IDLE&&(de.error("auto restart channel media relay failed",v.toString()),g.errorCode=_w.SERVER_CONNECTION_LOST,g.state=M_.RELAY_STATE_FAILURE)})})),this.joinInfo=n,this.clientId=i,this.sid=Ple(),this.signal=new Ybe(this.joinInfo,this.clientId,c),this.httpRetryConfig=h}startChannelMediaRelay(n){var i=this;return l(function*(){if(i.state!==M_.RELAY_STATE_IDLE)throw new ea(_t.INVALID_OPERATION);i.state=M_.RELAY_STATE_CONNECTING,yield i.connect(),de.debug("[".concat(i.clientId,"] startChannelMediaRelay: connect success"));try{yield i.sendStartRelayMessage(n)}catch(c){throw c.data&&c.data.serverResponse&&"SetSourceChannel"===c.data.serverResponse.command?new ea(_t.CROSS_CHANNEL_FAILED_JOIN_SRC):c.data&&c.data.serverResponse&&"SetDestChannelStatus"===c.serverResponse.command?new ea(_t.CROSS_CHANNEL_FAILED_JOIN_DEST):c.data&&c.data.serverResponse&&"StartPacketTransfer"===c.serverResponse.command?new ea(_t.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST):c}i.prevChannelMediaConfig=n})()}updateChannelMediaRelay(n){var i=this;return l(function*(){if(i.state!==M_.RELAY_STATE_RUNNING)throw new ea(_t.INVALID_OPERATION);yield i.sendUpdateMessage(n),i.prevChannelMediaConfig=n})()}stopChannelMediaRelay(){var n=this;return l(function*(){yield n.sendStopRelayMessage(),de.debug("[".concat(n.clientId,"] stopChannelMediaRelay: send stop message success")),n.state=M_.RELAY_STATE_IDLE,n.dispose()})()}dispose(){de.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=r1.CancelToken.source(),this.state=M_.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}connect(){var n=this;return l(function*(){const i=yield function Gbe(e,n,i){return wde.apply(this,arguments)}(n.joinInfo,n.cancelToken.token,n.httpRetryConfig);n.workerToken=i.workerToken,yield n.signal.connect(i.addressList),n.emit("event",tT.NETWORK_CONNECTED),n.signal.on("status",n.onStatus),n.signal.on("reconnecting",n.onReconnect)})()}sendStartRelayMessage(n){var i=this;return l(function*(){const c=i.genMessage(A_.StopPacketTransfer);yield i.signal.request(c),yield i.signal.waitStatus("Normal Quit"),de.debug("[".concat(i.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const h=i.genMessage(A_.SetSdkProfile,n);yield i.signal.request(h),de.debug("[".concat(i.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const g=i.genMessage(A_.SetSourceChannel,n);yield i.signal.request(g),yield i.signal.waitStatus("SetSourceChannelStatus"),i.emit("event",tT.PACKET_JOINED_SRC_CHANNEL),de.debug("[".concat(i.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const v=i.genMessage(A_.SetSourceUserId,n);yield i.signal.request(v),de.debug("[".concat(i.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const m=i.genMessage(A_.SetDestChannel,n);yield i.signal.request(m),yield i.signal.waitStatus("SetDestChannelStatus"),i.emit("event",tT.PACKET_JOINED_DEST_CHANNEL),de.debug("[".concat(i.clientId,"] startChannelMediaRelay: SetDestChannel success"));const C=i.genMessage(A_.StartPacketTransfer,n);yield i.signal.request(C),i.emit("event",tT.PACKET_SENT_TO_DEST_CHANNEL),i.state=M_.RELAY_STATE_RUNNING,de.debug("[".concat(i.clientId,"] startChannelMediaRelay: StartPacketTransfer success"))})()}sendUpdateMessage(n){var i=this;return l(function*(){const c=i.genMessage(A_.UpdateDestChannel,n);yield i.signal.request(c),i.emit("event",tT.PACKET_UPDATE_DEST_CHANNEL),de.debug("[".concat(i.clientId,"] sendUpdateMessage: UpdateDestChannel success"))})()}sendStopRelayMessage(){var n=this;return l(function*(){const i=n.genMessage(A_.StopPacketTransfer);yield n.signal.request(i),de.debug("[".concat(n.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))})()}genMessage(n,i){const c=[],h=[],g=[];this.requestId+=1;const v={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:o1,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};"4.15.1"===v.sdkVersion&&(v.sdkVersion="0.0.1");let m=null,C=null;switch(n){case A_.SetSdkProfile:return v.clientRequest={command:"SetSdkProfile",type:"multi_channel"},v;case A_.SetSourceChannel:if(C=i&&i.getSrcChannelMediaInfo(),!C)throw new ea(_t.UNEXPECTED_ERROR,"can not find source config");return v.clientRequest={command:"SetSourceChannel",uid:"0",channelName:C.channelName,token:C.token||this.joinInfo.appId},v;case A_.SetSourceUserId:if(C=i&&i.getSrcChannelMediaInfo(),!C)throw new ea(_t.UNEXPECTED_ERROR,"can not find source config");return v.clientRequest={command:"SetSourceUserId",uid:C.uid+""},v;case A_.SetDestChannel:if(m=i&&i.getDestChannelMediaInfo(),!m)throw new ea(_t.UNEXPECTED_ERROR,"can not find dest config");return m.forEach(y=>{c.push(y.channelName),h.push(y.uid+""),g.push(y.token||this.joinInfo.appId)}),v.clientRequest={command:"SetDestChannel",channelName:c,uid:h,token:g},v;case A_.StartPacketTransfer:return v.clientRequest={command:"StartPacketTransfer"},v;case A_.Reconnect:return v.clientRequest={command:"Reconnect"},v;case A_.StopPacketTransfer:return v.clientRequest={command:"StopPacketTransfer"},v;case A_.UpdateDestChannel:if(m=i&&i.getDestChannelMediaInfo(),!m)throw new ea(_t.UNEXPECTED_ERROR,"can not find dest config");return m.forEach(y=>{c.push(y.channelName),h.push(y.uid+""),g.push(y.token||this.joinInfo.appId)}),v.clientRequest={command:"UpdateDestChannel",channelName:c,uid:h,token:g},v}return v}}const Ode=e=>{const n=document.createElement("canvas");return n.width=2,n.height=2,new _l((i,c)=>{n.toBlob(function(){var h=l(function*(g){if(n.remove(),g){const v=yield Dme(g);i({buffer:v,width:n.width,height:n.height})}else c(new ea(_t.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))});return function(g){return h.apply(this,arguments)}}(),e,1)})},Dme=function(){var e=l(function*(n){const i=yield n.arrayBuffer();return new Uint8Array(i)});return function(i){return e.apply(this,arguments)}}(),Dde=new class extends f0{get visibility(){return document.visibilityState}get lastHiddenTime(){return this._lastHiddenTime}get lastVisibleTime(){return this._lastVisibleTime}constructor(){super(),Y(this,"_lastHiddenTime",NaN),Y(this,"_lastVisibleTime",NaN),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState?this._lastHiddenTime=Date.now():this._lastVisibleTime=Date.now(),this.emit("VISIBILITY_CHANGE",document.visibilityState)})}};var Nme;let kme=uy("AgoraRTCPlayer","trackId")(Nme=class{get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(e){e!==this._videoElementStatus&&(de.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(e)),i1("debug",["HTMLVideoElement",this.trackId],"statusChange","".concat(this._videoElementStatus," => ").concat(e)),this._videoElementStatus=e)}constructor(e){Y(this,"trackId",void 0),Y(this,"config",void 0),Y(this,"onFirstVideoFrameDecoded",void 0),Y(this,"freezeTimeCounterList",[]),Y(this,"timeUpdatedCount",0),Y(this,"freezeTime",0),Y(this,"playbackTime",0),Y(this,"lastTimeUpdatedTime",0),Y(this,"autoplayFailed",!1),Y(this,"videoTrack",void 0),Y(this,"container",void 0),Y(this,"videoElement",void 0),Y(this,"videoElementCheckInterval",void 0),Y(this,"_videoElementStatus",Wy.NONE),Y(this,"slot",void 0),Y(this,"isGettingVideoDimensions",!1),Y(this,"handleVideoEvents",n=>{switch(n.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=Wy.PLAYING;break;case"loadeddata":this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded();break;case"canplay":this.videoElementStatus=Wy.CANPLAY;break;case"stalled":this.videoElementStatus=Wy.STALLED;break;case"suspend":this.videoElementStatus=Wy.SUSPEND;break;case"pause":this.videoElementStatus=Wy.PAUSED,P_()||YR()||L_()&&this.autoplayFailed||!this.videoElement||!this.videoTrack||"live"!==this.videoTrack.readyState||(de.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),pl("debug",this,"video element paused, auto resume"),this.videoElement.play());break;case"waiting":this.videoElementStatus=Wy.WAITING;break;case"abort":this.videoElementStatus=Wy.ABORT;break;case"ended":this.videoElementStatus=Wy.ENDED;break;case"emptied":this.videoElementStatus=Wy.EMPTIED;break;case"timeupdate":{const i=Date.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=i);const c=i-this.lastTimeUpdatedTime;if("hidden"===Dde.visibility)return;if(this.lastTimeUpdatedTime<Dde.lastHiddenTime&&i>Dde.lastVisibleTime)return void(this.lastTimeUpdatedTime=i);for(this.lastTimeUpdatedTime=i,c>500&&(this.freezeTime+=c),this.playbackTime+=c;this.playbackTime>=6e3;)this.playbackTime-=6e3,this.freezeTimeCounterList.push(Math.min(6e3,this.freezeTime)),this.freezeTime=Math.max(0,this.freezeTime-6e3);break}}}),Y(this,"startGetVideoDimensions",()=>{const n=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement&&this.videoElement.videoWidth*this.videoElement.videoHeight>4)return de.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),Gc("debug",this,"startGetVideoDimensions",{videoWidth:this.videoElement.videoWidth,videoHeight:this.videoElement.videoHeight}),void(this.isGettingVideoDimensions=!1);setTimeout(n,500)};!this.isGettingVideoDimensions&&n()}),Y(this,"autoResumeAfterInterruption",()=>{this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&"running"===Mf.curState&&(NW()?(de.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.2")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):Bte()?(de.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.1")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):DW()&&(de.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.0")),this.videoElement.pause(),this.videoElement.play()))}),Y(this,"autoResumeAfterInterruptionOnIOS15",()=>{this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&(NW()?(de.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.2")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):Bte()?(de.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.1")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):DW()&&(de.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.0")),this.videoElement.pause(),this.videoElement.play()))}),this.slot=e.element,this.trackId=e.trackId,this.updateConfig(e),Mf.on(Iy.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Mf.on(Iy.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15)}updateConfig(e){this.config=e,this.trackId=e.trackId;const n=e.element;n!==this.slot&&(this.destroy(),this.slot=n),this.createElements()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.createElements())}play(e){if(this.videoElement){const n=this.videoElement.play();n&&n.catch&&n.catch(c=>{e&&qc.autoplayFailed(e,"video",c.message,this.trackId),Gc("warning",this,"play",c.toString(),"error"),"NotAllowedError"===c.name?(de.warning("detected video element autoplay failed",c),this.autoplayFailed=!0,this.handleAutoPlayFailed()):de.warning("[".concat(this.trackId,"] play warning: "),c)});const i=Yp();if(("Safari"===i.name&&15===Number(i.version)||FM())&&n&&n.then&&n.catch){const c=()=>{this.config.mirror&&this.videoElement&&(this.videoElement.style.transform="rotateY(180deg)")};n.then(c).catch(c)}}}getCurrentFrame(){if(!this.videoElement)return new ImageData(2,2);const e=document.createElement("canvas");e.width=this.videoElement.videoWidth,e.height=this.videoElement.videoHeight;const n=e.getContext("2d");if(!n)return de.error("create canvas context failed!"),Gc("error",this,"getCurrentFrame","create canvas context failed!","error"),new ImageData(2,2);n.drawImage(this.videoElement,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height);return e.remove(),i}getCurrentFrameToUint8Array(e){var n=arguments,i=this;return l(function*(){let c=n.length>1&&void 0!==n[1]?n[1]:1;if(!i.videoElement)return yield Ode(e);const h=document.createElement("canvas");h.width=i.videoElement.videoWidth,h.height=i.videoElement.videoHeight;const g=h.getContext("2d");return g?(g.drawImage(i.videoElement,0,0,h.width,h.height),new _l((v,m)=>{h.toBlob(function(){var C=l(function*(y){if(h.remove(),y){const N=yield Dme(y);v({buffer:N,width:h.width,height:h.height})}else m(new ea(_t.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))});return function(y){return C.apply(this,arguments)}}(),e,c<0?.1:c>1?1:c)})):yield Ode(e)})()}destroy(){if(Mf.off(Iy.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Mf.off(Iy.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15),this.videoElement&&(this.videoElement.srcObject=null,this.videoElement.remove(),this.videoElement=void 0),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch(e){}this.container=void 0}this.freezeTimeCounterList=[]}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",this.createVideoElement(),this.container.appendChild(this.videoElement)):this.removeVideoElement(),this.slot.appendChild(this.container)}createVideoElement(){this.videoElement||(this.videoElementStatus=Wy.INIT,this.videoElement=document.createElement("video"),this.videoElement.onerror=()=>this.videoElementStatus=Wy.ERROR,this.container&&this.container.appendChild(this.videoElement),Lme.forEach(i=>{this.videoElement&&this.videoElement.addEventListener(i,this.handleVideoEvents)}),this.videoElementCheckInterval=window.setInterval(()=>{!document.getElementById("video_".concat(this.trackId))&&this.videoElement&&(this.videoElementStatus=Wy.DESTROYED)},1e3)),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),this.videoElement.style.left="0",this.videoElement.style.top="0",Ute()&&(this.videoElement.poster="noposter");const e=Yp();"Safari"===e.name&&15===Number(e.version)||FM()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.videoElement.style.objectFit=this.config.fit?this.config.fit:"cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,h0()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,h0()&&this.videoElement.load());const n=this.videoElement.play();void 0!==n&&n.catch(i=>{de.debug("[".concat(this.trackId,"] playback interrupted"),i.toString()),pl("debug",this,"play back interrupted: ".concat(i.toString()))})}removeVideoElement(){if(this.videoElement){Lme.forEach(e=>{this.videoElement&&this.videoElement.removeEventListener(e,this.handleVideoEvents)}),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0);try{this.container&&this.container.removeChild(this.videoElement)}catch(e){}this.videoElement=void 0,this.videoElementStatus=Wy.NONE}}handleAutoPlayFailed(){if(this.videoElement){const e=n=>{n.preventDefault(),this.videoElement&&(this.videoElement.play().then(()=>{de.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed.")),pl("debug",this,"video element autoplay resumed")}).catch(i=>{de.error(i)}),this.autoplayFailed=!1,V8()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0)))};V8()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),Gpe()}}getVideoElement(){return this.videoElement}getContainerElement(){return this.container}})||Nme;const Lme=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate"];var xme,Pme={exports:{}};function zbe(e,n,i){const c=e.createShader(i);if(!c)return new ea(_t.WEBGL_INTERNAL_ERROR,"can not create shader").throw();if(e.shaderSource(c,n),e.compileShader(c),!e.getShaderParameter(c,e.COMPILE_STATUS)){const h=e.getShaderInfoLog(c);return e.deleteShader(c),new ea(_t.WEBGL_INTERNAL_ERROR,"error compiling shader:"+h).throw()}return c}(function(e,n){var i;i=()=>(()=>{var c={3536:(m,C,y)=>{var N=y(1910);m.exports=N},8171:(m,C,y)=>{y(6450);var N=y(4058).Object,k=m.exports=function(U,V,K){return N.defineProperty(U,V,K)};N.defineProperty.sham&&(k.sham=!0)},2956:(m,C,y)=>{y(7627),y(6274),y(5967),y(8881),y(4560),y(7206),y(4349),y(7971);var N=y(4058);m.exports=N.Promise},3685:(m,C,y)=>{m.exports=y(621)},621:(m,C,y)=>{var N=y(3536);m.exports=N},4883:(m,C,y)=>{var N=y(7475),k=y(9826),U=TypeError;m.exports=function(V){if(N(V))return V;throw U(k(V)+" is not a function")}},174:(m,C,y)=>{var N=y(4284),k=y(9826),U=TypeError;m.exports=function(V){if(N(V))return V;throw U(k(V)+" is not a constructor")}},1851:(m,C,y)=>{var N=y(7475),k=String,U=TypeError;m.exports=function(V){if("object"==typeof V||N(V))return V;throw U("Can't set "+k(V)+" as a prototype")}},8479:m=>{m.exports=function(){}},5743:(m,C,y)=>{var N=y(7046),k=TypeError;m.exports=function(U,V){if(N(V,U))return U;throw k("Incorrect invocation")}},6059:(m,C,y)=>{var N=y(941),k=String,U=TypeError;m.exports=function(V){if(N(V))return V;throw U(k(V)+" is not an object")}},1692:(m,C,y)=>{var N=y(4529),k=y(9413),U=y(623),V=function(K){return function($,Z,ye){var be,_s=N($),ua=U(_s),ma=k(ye,ua);if(K&&Z!=Z){for(;ua>ma;)if((be=_s[ma++])!=be)return!0}else for(;ua>ma;ma++)if((K||ma in _s)&&_s[ma]===Z)return K||ma||0;return!K&&-1}};m.exports={includes:V(!0),indexOf:V(!1)}},3765:(m,C,y)=>{var N=y(5329);m.exports=N([].slice)},1385:(m,C,y)=>{var N=y(9813)("iterator"),k=!1;try{var U=0,V={next:function(){return{done:!!U++}},return:function(){k=!0}};V[N]=function(){return this},Array.from(V,function(){throw 2})}catch(K){}m.exports=function(K,$){if(!$&&!k)return!1;var Z=!1;try{var ye={};ye[N]=function(){return{next:function(){return{done:Z=!0}}}},K(ye)}catch(be){}return Z}},2532:(m,C,y)=>{var N=y(4163),k=N({}.toString),U=N("".slice);m.exports=function(V){return U(k(V),8,-1)}},9697:(m,C,y)=>{var N=y(2885),k=y(7475),U=y(2532),V=y(9813)("toStringTag"),K=Object,$="Arguments"==U(function(){return arguments}());m.exports=N?U:function(Z){var ye,be,_s;return void 0===Z?"Undefined":null===Z?"Null":"string"==typeof(be=function(ua,ma){try{return ua[ma]}catch(pc){}}(ye=K(Z),V))?be:$?U(ye):"Object"==(_s=U(ye))&&k(ye.callee)?"Arguments":_s}},3489:(m,C,y)=>{var N=y(953),k=y(1136),U=y(9677),V=y(5988);m.exports=function(K,$,Z){for(var ye=k($),be=V.f,_s=U.f,ua=0;ua<ye.length;ua++){var ma=ye[ua];N(K,ma)||Z&&N(Z,ma)||be(K,ma,_s($,ma))}}},4160:(m,C,y)=>{var N=y(5981);m.exports=!N(function(){function k(){}return k.prototype.constructor=null,Object.getPrototypeOf(new k)!==k.prototype})},3538:m=>{m.exports=function(C,y){return{value:C,done:y}}},2029:(m,C,y)=>{var N=y(5746),k=y(5988),U=y(1887);m.exports=N?function(V,K,$){return k.f(V,K,U(1,$))}:function(V,K,$){return V[K]=$,V}},1887:m=>{m.exports=function(C,y){return{enumerable:!(1&C),configurable:!(2&C),writable:!(4&C),value:y}}},5929:(m,C,y)=>{var N=y(2029);m.exports=function(k,U,V,K){return K&&K.enumerable?k[U]=V:N(k,U,V),k}},5609:(m,C,y)=>{var N=y(1899),k=Object.defineProperty;m.exports=function(U,V){try{k(N,U,{value:V,configurable:!0,writable:!0})}catch(K){N[U]=V}return V}},5746:(m,C,y)=>{var N=y(5981);m.exports=!N(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},6616:m=>{var C="object"==typeof document&&document.all;m.exports={all:C,IS_HTMLDDA:void 0===C&&void 0!==C}},1333:(m,C,y)=>{var N=y(1899),k=y(941),U=N.document,V=k(U)&&k(U.createElement);m.exports=function(K){return V?U.createElement(K):{}}},3281:m=>{m.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},3321:(m,C,y)=>{var N=y(8501),k=y(6049);m.exports=!N&&!k&&"object"==typeof window&&"object"==typeof document},8501:m=>{m.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},4470:(m,C,y)=>{var N=y(2861),k=y(1899);m.exports=/ipad|iphone|ipod/i.test(N)&&void 0!==k.Pebble},2749:(m,C,y)=>{var N=y(2861);m.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(N)},6049:(m,C,y)=>{var N=y(2532),k=y(1899);m.exports="process"==N(k.process)},8045:(m,C,y)=>{var N=y(2861);m.exports=/web0s(?!.*chrome)/i.test(N)},2861:(m,C,y)=>{var N=y(626);m.exports=N("navigator","userAgent")||""},3385:(m,C,y)=>{var N,k,U=y(1899),V=y(2861),K=U.process,$=U.Deno,Z=K&&K.versions||$&&$.version,ye=Z&&Z.v8;ye&&(k=(N=ye.split("."))[0]>0&&N[0]<4?1:+(N[0]+N[1])),!k&&V&&(!(N=V.match(/Edge\/(\d+)/))||N[1]>=74)&&(N=V.match(/Chrome\/(\d+)/))&&(k=+N[1]),m.exports=k},6759:m=>{m.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3995:(m,C,y)=>{var N=y(5329),k=Error,U=N("".replace),V=String(k("zxcasd").stack),K=/\n\s*at [^:]*:[^\n]*/,$=K.test(V);m.exports=function(Z,ye){if($&&"string"==typeof Z&&!k.prepareStackTrace)for(;ye--;)Z=U(Z,K,"");return Z}},8780:(m,C,y)=>{var N=y(5981),k=y(1887);m.exports=!N(function(){var U=Error("a");return!("stack"in U)||(Object.defineProperty(U,"stack",k(1,7)),7!==U.stack)})},6887:(m,C,y)=>{var N=y(1899),k=y(9730),U=y(5329),V=y(7475),K=y(9677).f,$=y(7252),Z=y(4058),ye=y(6843),be=y(2029),_s=y(953),ua=function(ma){var pc=function(qa,Ua,nl){if(this instanceof pc){switch(arguments.length){case 0:return new ma;case 1:return new ma(qa);case 2:return new ma(qa,Ua)}return new ma(qa,Ua,nl)}return k(ma,this,arguments)};return pc.prototype=ma.prototype,pc};m.exports=function(ma,pc){var qa,Ua,nl,Wc,El,Dl,Kl,sl,_a=ma.target,Qa=ma.global,ca=ma.stat,Aa=ma.proto,Ya=Qa?N:ca?N[_a]:(N[_a]||{}).prototype,Zc=Qa?Z:Z[_a]||be(Z,_a,{})[_a],Ol=Zc.prototype;for(nl in pc)qa=!$(Qa?nl:_a+(ca?".":"#")+nl,ma.forced)&&Ya&&_s(Ya,nl),El=Zc[nl],qa&&(Dl=ma.dontCallGetSet?(sl=K(Ya,nl))&&sl.value:Ya[nl]),Wc=qa&&Dl?Dl:pc[nl],qa&&typeof El==typeof Wc||(Kl=ma.bind&&qa?ye(Wc,N):ma.wrap&&qa?ua(Wc):Aa&&V(Wc)?U(Wc):Wc,(ma.sham||Wc&&Wc.sham||El&&El.sham)&&be(Kl,"sham",!0),be(Zc,nl,Kl),Aa&&(_s(Z,Ua=_a+"Prototype")||be(Z,Ua,{}),be(Z[Ua],nl,Wc),ma.real&&Ol&&!Ol[nl]&&be(Ol,nl,Wc)))}},5981:m=>{m.exports=function(C){try{return!!C()}catch(y){return!0}}},9730:(m,C,y)=>{var N=y(8285),k=Function.prototype,U=k.apply,V=k.call;m.exports="object"==typeof Reflect&&Reflect.apply||(N?V.bind(U):function(){return V.apply(U,arguments)})},6843:(m,C,y)=>{var N=y(5329),k=y(4883),U=y(8285),V=N(N.bind);m.exports=function(K,$){return k(K),void 0===$?K:U?V(K,$):function(){return K.apply($,arguments)}}},8285:(m,C,y)=>{var N=y(5981);m.exports=!N(function(){var k=function(){}.bind();return"function"!=typeof k||k.hasOwnProperty("prototype")})},8834:(m,C,y)=>{var N=y(8285),k=Function.prototype.call;m.exports=N?k.bind(k):function(){return k.apply(k,arguments)}},9417:(m,C,y)=>{var N=y(5746),k=y(953),U=Function.prototype,V=N&&Object.getOwnPropertyDescriptor,K=k(U,"name"),$=K&&"something"===function(){}.name,Z=K&&(!N||N&&V(U,"name").configurable);m.exports={EXISTS:K,PROPER:$,CONFIGURABLE:Z}},4163:(m,C,y)=>{var N=y(8285),k=Function.prototype,U=k.call,V=N&&k.bind.bind(U,U);m.exports=N?V:function(K){return function(){return U.apply(K,arguments)}}},5329:(m,C,y)=>{var N=y(2532),k=y(4163);m.exports=function(U){if("Function"===N(U))return k(U)}},626:(m,C,y)=>{var N=y(4058),k=y(1899),U=y(7475),V=function(K){return U(K)?K:void 0};m.exports=function(K,$){return arguments.length<2?V(N[K])||V(k[K]):N[K]&&N[K][$]||k[K]&&k[K][$]}},2902:(m,C,y)=>{var N=y(9697),k=y(4229),U=y(2119),V=y(2077),K=y(9813)("iterator");m.exports=function($){if(!U($))return k($,K)||k($,"@@iterator")||V[N($)]}},3476:(m,C,y)=>{var N=y(8834),k=y(4883),U=y(6059),V=y(9826),K=y(2902),$=TypeError;m.exports=function(Z,ye){var be=arguments.length<2?K(Z):ye;if(k(be))return U(N(be,Z));throw $(V(Z)+" is not iterable")}},4229:(m,C,y)=>{var N=y(4883),k=y(2119);m.exports=function(U,V){var K=U[V];return k(K)?void 0:N(K)}},1899:(m,C,y)=>{var N=function(k){return k&&k.Math==Math&&k};m.exports=N("object"==typeof globalThis&&globalThis)||N("object"==typeof window&&window)||N("object"==typeof self&&self)||N("object"==typeof y.g&&y.g)||function(){return this}()||Function("return this")()},953:(m,C,y)=>{var N=y(5329),k=y(9678),U=N({}.hasOwnProperty);m.exports=Object.hasOwn||function(V,K){return U(k(V),K)}},7748:m=>{m.exports={}},4845:(m,C,y)=>{var N=y(1899);m.exports=function(k,U){var V=N.console;V&&V.error&&(1==arguments.length?V.error(k):V.error(k,U))}},5463:(m,C,y)=>{var N=y(626);m.exports=N("document","documentElement")},2840:(m,C,y)=>{var N=y(5746),k=y(5981),U=y(1333);m.exports=!N&&!k(function(){return 7!=Object.defineProperty(U("div"),"a",{get:function(){return 7}}).a})},7026:(m,C,y)=>{var N=y(5329),k=y(5981),U=y(2532),V=Object,K=N("".split);m.exports=k(function(){return!V("z").propertyIsEnumerable(0)})?function($){return"String"==U($)?K($,""):V($)}:V},1302:(m,C,y)=>{var N=y(5329),k=y(7475),U=y(3030),V=N(Function.toString);k(U.inspectSource)||(U.inspectSource=function(K){return V(K)}),m.exports=U.inspectSource},3794:(m,C,y)=>{var N=y(941),k=y(2029);m.exports=function(U,V){N(V)&&"cause"in V&&k(U,"cause",V.cause)}},5402:(m,C,y)=>{var N,k,U,V=y(7093),K=y(1899),$=y(941),Z=y(2029),ye=y(953),be=y(3030),_s=y(4262),ua=y(7748),ma="Object already initialized",pc=K.TypeError;if(V||be.state){var Ua=be.state||(be.state=new(0,K.WeakMap));Ua.get=Ua.get,Ua.has=Ua.has,Ua.set=Ua.set,N=function(Wc,El){if(Ua.has(Wc))throw pc(ma);return El.facade=Wc,Ua.set(Wc,El),El},k=function(Wc){return Ua.get(Wc)||{}},U=function(Wc){return Ua.has(Wc)}}else{var nl=_s("state");ua[nl]=!0,N=function(Wc,El){if(ye(Wc,nl))throw pc(ma);return El.facade=Wc,Z(Wc,nl,El),El},k=function(Wc){return ye(Wc,nl)?Wc[nl]:{}},U=function(Wc){return ye(Wc,nl)}}m.exports={set:N,get:k,has:U,enforce:function(Wc){return U(Wc)?k(Wc):N(Wc,{})},getterFor:function(Wc){return function(El){var Dl;if(!$(El)||(Dl=k(El)).type!==Wc)throw pc("Incompatible receiver, "+Wc+" required");return Dl}}}},6782:(m,C,y)=>{var N=y(9813),k=y(2077),U=N("iterator"),V=Array.prototype;m.exports=function(K){return void 0!==K&&(k.Array===K||V[U]===K)}},7475:(m,C,y)=>{var N=y(6616),k=N.all;m.exports=N.IS_HTMLDDA?function(U){return"function"==typeof U||U===k}:function(U){return"function"==typeof U}},4284:(m,C,y)=>{var N=y(5329),k=y(5981),U=y(7475),V=y(9697),K=y(626),$=y(1302),Z=function(){},ye=[],be=K("Reflect","construct"),_s=/^\s*(?:class|function)\b/,ua=N(_s.exec),ma=!_s.exec(Z),pc=function(Ua){if(!U(Ua))return!1;try{return be(Z,ye,Ua),!0}catch(nl){return!1}},qa=function(Ua){if(!U(Ua))return!1;switch(V(Ua)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return ma||!!ua(_s,$(Ua))}catch(nl){return!0}};qa.sham=!0,m.exports=!be||k(function(){var Ua;return pc(pc.call)||!pc(Object)||!pc(function(){Ua=!0})||Ua})?qa:pc},7252:(m,C,y)=>{var N=y(5981),k=y(7475),U=/#|\.prototype\./,V=function(be,_s){var ua=$[K(be)];return ua==ye||ua!=Z&&(k(_s)?N(_s):!!_s)},K=V.normalize=function(be){return String(be).replace(U,".").toLowerCase()},$=V.data={},Z=V.NATIVE="N",ye=V.POLYFILL="P";m.exports=V},2119:m=>{m.exports=function(C){return null==C}},941:(m,C,y)=>{var N=y(7475),k=y(6616),U=k.all;m.exports=k.IS_HTMLDDA?function(V){return"object"==typeof V?null!==V:N(V)||V===U}:function(V){return"object"==typeof V?null!==V:N(V)}},2529:m=>{m.exports=!0},6664:(m,C,y)=>{var N=y(626),k=y(7475),U=y(7046),V=y(2302),K=Object;m.exports=V?function($){return"symbol"==typeof $}:function($){var Z=N("Symbol");return k(Z)&&U(Z.prototype,K($))}},3091:(m,C,y)=>{var N=y(6843),k=y(8834),U=y(6059),V=y(9826),K=y(6782),$=y(623),Z=y(7046),ye=y(3476),be=y(2902),_s=y(7609),ua=TypeError,ma=function(qa,Ua){this.stopped=qa,this.result=Ua},pc=ma.prototype;m.exports=function(qa,Ua,nl){var Wc,El,Dl,Kl,sl,_a,Qa,Aa=!(!nl||!nl.AS_ENTRIES),Ya=!(!nl||!nl.IS_RECORD),Zc=!(!nl||!nl.IS_ITERATOR),Ol=!(!nl||!nl.INTERRUPTED),_c=N(Ua,nl&&nl.that),J=function(aa){return Wc&&_s(Wc,"normal",aa),new ma(!0,aa)},Ze=function(aa){return Aa?(U(aa),Ol?_c(aa[0],aa[1],J):_c(aa[0],aa[1])):Ol?_c(aa,J):_c(aa)};if(Ya)Wc=qa.iterator;else if(Zc)Wc=qa;else{if(!(El=be(qa)))throw ua(V(qa)+" is not iterable");if(K(El)){for(Dl=0,Kl=$(qa);Kl>Dl;Dl++)if((sl=Ze(qa[Dl]))&&Z(pc,sl))return sl;return new ma(!1)}Wc=ye(qa,El)}for(_a=Ya?qa.next:Wc.next;!(Qa=k(_a,Wc)).done;){try{sl=Ze(Qa.value)}catch(aa){_s(Wc,"throw",aa)}if("object"==typeof sl&&sl&&Z(pc,sl))return sl}return new ma(!1)}},7609:(m,C,y)=>{var N=y(8834),k=y(6059),U=y(4229);m.exports=function(V,K,$){var Z,ye;k(V);try{if(!(Z=U(V,"return"))){if("throw"===K)throw $;return $}Z=N(Z,V)}catch(be){ye=!0,Z=be}if("throw"===K)throw $;if(ye)throw Z;return k(Z),$}},3847:(m,C,y)=>{var N=y(5143).IteratorPrototype,k=y(9290),U=y(1887),V=y(904),K=y(2077),$=function(){return this};m.exports=function(Z,ye,be,_s){var ua=ye+" Iterator";return Z.prototype=k(N,{next:U(+!_s,be)}),V(Z,ua,!1,!0),K[ua]=$,Z}},5105:(m,C,y)=>{var N=y(6887),k=y(8834),U=y(2529),V=y(9417),K=y(7475),$=y(3847),Z=y(249),ye=y(8929),be=y(904),_s=y(2029),ua=y(5929),ma=y(9813),pc=y(2077),qa=y(5143),Ua=V.PROPER,nl=V.CONFIGURABLE,Wc=qa.IteratorPrototype,El=qa.BUGGY_SAFARI_ITERATORS,Dl=ma("iterator"),sl="values",_a="entries",Qa=function(){return this};m.exports=function(ca,Aa,Ya,Zc,Ol,_c,J){$(Ya,Aa,Zc);var Ze,aa,Xa,vl=function(_d){if(_d===Ol&&cf)return cf;if(!El&&_d in Rh)return Rh[_d];switch(_d){case"keys":case sl:case _a:return function(){return new Ya(this,_d)}}return function(){return new Ya(this)}},Oh=Aa+" Iterator",ff=!1,Rh=ca.prototype,Cg=Rh[Dl]||Rh["@@iterator"]||Ol&&Rh[Ol],cf=!El&&Cg||vl(Ol),Vp="Array"==Aa&&Rh.entries||Cg;if(Vp&&(Ze=Z(Vp.call(new ca)))!==Object.prototype&&Ze.next&&(U||Z(Ze)===Wc||(ye?ye(Ze,Wc):K(Ze[Dl])||ua(Ze,Dl,Qa)),be(Ze,Oh,!0,!0),U&&(pc[Oh]=Qa)),Ua&&Ol==sl&&Cg&&Cg.name!==sl&&(!U&&nl?_s(Rh,"name",sl):(ff=!0,cf=function(){return k(Cg,this)})),Ol)if(aa={values:vl(sl),keys:_c?cf:vl("keys"),entries:vl(_a)},J)for(Xa in aa)(El||ff||!(Xa in Rh))&&ua(Rh,Xa,aa[Xa]);else N({target:Aa,proto:!0,forced:El||ff},aa);return U&&!J||Rh[Dl]===cf||ua(Rh,Dl,cf,{name:Ol}),pc[Aa]=cf,aa}},5143:(m,C,y)=>{var N,k,U,V=y(5981),K=y(7475),$=y(941),Z=y(9290),ye=y(249),be=y(5929),_s=y(9813),ua=y(2529),ma=_s("iterator"),pc=!1;[].keys&&("next"in(U=[].keys())?(k=ye(ye(U)))!==Object.prototype&&(N=k):pc=!0),!$(N)||V(function(){var qa={};return N[ma].call(qa)!==qa})?N={}:ua&&(N=Z(N)),K(N[ma])||be(N,ma,function(){return this}),m.exports={IteratorPrototype:N,BUGGY_SAFARI_ITERATORS:pc}},2077:m=>{m.exports={}},623:(m,C,y)=>{var N=y(3057);m.exports=function(k){return N(k.length)}},5331:m=>{var C=Math.ceil,y=Math.floor;m.exports=Math.trunc||function(N){var k=+N;return(k>0?y:C)(k)}},6132:(m,C,y)=>{var N,k,U,V,K,$,Z,ye,be=y(1899),_s=y(6843),ua=y(9677).f,ma=y(2941).set,pc=y(2749),qa=y(4470),Ua=y(8045),nl=y(6049),Wc=be.MutationObserver||be.WebKitMutationObserver,El=be.document,Dl=be.process,Kl=be.Promise,sl=ua(be,"queueMicrotask"),_a=sl&&sl.value;_a||(N=function(){var Qa,ca;for(nl&&(Qa=Dl.domain)&&Qa.exit();k;){ca=k.fn,k=k.next;try{ca()}catch(Aa){throw k?V():U=void 0,Aa}}U=void 0,Qa&&Qa.enter()},pc||nl||Ua||!Wc||!El?!qa&&Kl&&Kl.resolve?((Z=Kl.resolve(void 0)).constructor=Kl,ye=_s(Z.then,Z),V=function(){ye(N)}):nl?V=function(){Dl.nextTick(N)}:(ma=_s(ma,be),V=function(){ma(N)}):(K=!0,$=El.createTextNode(""),new Wc(N).observe($,{characterData:!0}),V=function(){$.data=K=!K})),m.exports=_a||function(Qa){var ca={fn:Qa,next:void 0};U&&(U.next=ca),k||(k=ca,V()),U=ca}},9520:(m,C,y)=>{var N=y(4883),k=TypeError,U=function(V){var K,$;this.promise=new V(function(Z,ye){if(void 0!==K||void 0!==$)throw k("Bad Promise constructor");K=Z,$=ye}),this.resolve=N(K),this.reject=N($)};m.exports.f=function(V){return new U(V)}},4649:(m,C,y)=>{var N=y(5803);m.exports=function(k,U){return void 0===k?arguments.length<2?"":U:N(k)}},9290:(m,C,y)=>{var N,k=y(6059),U=y(9938),V=y(6759),K=y(7748),$=y(5463),Z=y(1333),ye=y(4262)("IE_PROTO"),be=function(){},_s=function(pc){return"<script>"+pc+"<\/script>"},ua=function(pc){pc.write(_s("")),pc.close();var qa=pc.parentWindow.Object;return pc=null,qa},ma=function(){try{N=new ActiveXObject("htmlfile")}catch(nl){}var pc,qa;ma="undefined"!=typeof document?document.domain&&N?ua(N):((qa=Z("iframe")).style.display="none",$.appendChild(qa),qa.src=String("javascript:"),(pc=qa.contentWindow.document).open(),pc.write(_s("document.F=Object")),pc.close(),pc.F):ua(N);for(var Ua=V.length;Ua--;)delete ma.prototype[V[Ua]];return ma()};K[ye]=!0,m.exports=Object.create||function(pc,qa){var Ua;return null!==pc?(be.prototype=k(pc),Ua=new be,be.prototype=null,Ua[ye]=pc):Ua=ma(),void 0===qa?Ua:U.f(Ua,qa)}},9938:(m,C,y)=>{var N=y(5746),k=y(3937),U=y(5988),V=y(6059),K=y(4529),$=y(4771);C.f=N&&!k?Object.defineProperties:function(Z,ye){V(Z);for(var be,_s=K(ye),ua=$(ye),ma=ua.length,pc=0;ma>pc;)U.f(Z,be=ua[pc++],_s[be]);return Z}},5988:(m,C,y)=>{var N=y(5746),k=y(2840),U=y(3937),V=y(6059),K=y(3894),$=TypeError,Z=Object.defineProperty,ye=Object.getOwnPropertyDescriptor;C.f=N?U?function(be,_s,ua){if(V(be),_s=K(_s),V(ua),"function"==typeof be&&"prototype"===_s&&"value"in ua&&"writable"in ua&&!ua.writable){var ma=ye(be,_s);ma&&ma.writable&&(be[_s]=ua.value,ua={configurable:"configurable"in ua?ua.configurable:ma.configurable,enumerable:"enumerable"in ua?ua.enumerable:ma.enumerable,writable:!1})}return Z(be,_s,ua)}:Z:function(be,_s,ua){if(V(be),_s=K(_s),V(ua),k)try{return Z(be,_s,ua)}catch(ma){}if("get"in ua||"set"in ua)throw $("Accessors not supported");return"value"in ua&&(be[_s]=ua.value),be}},9677:(m,C,y)=>{var N=y(5746),k=y(8834),U=y(6760),V=y(1887),K=y(4529),$=y(3894),Z=y(953),ye=y(2840),be=Object.getOwnPropertyDescriptor;C.f=N?be:function(_s,ua){if(_s=K(_s),ua=$(ua),ye)try{return be(_s,ua)}catch(ma){}if(Z(_s,ua))return V(!k(U.f,_s,ua),_s[ua])}},946:(m,C,y)=>{var N=y(5629),k=y(6759).concat("length","prototype");C.f=Object.getOwnPropertyNames||function(U){return N(U,k)}},7857:(m,C)=>{C.f=Object.getOwnPropertySymbols},249:(m,C,y)=>{var N=y(953),k=y(7475),U=y(9678),V=y(4262),K=y(4160),$=V("IE_PROTO"),Z=Object,ye=Z.prototype;m.exports=K?Z.getPrototypeOf:function(be){var _s=U(be);if(N(_s,$))return _s[$];var ua=_s.constructor;return k(ua)&&_s instanceof ua?ua.prototype:_s instanceof Z?ye:null}},7046:(m,C,y)=>{var N=y(5329);m.exports=N({}.isPrototypeOf)},5629:(m,C,y)=>{var N=y(5329),k=y(953),U=y(4529),V=y(1692).indexOf,K=y(7748),$=N([].push);m.exports=function(Z,ye){var be,_s=U(Z),ua=0,ma=[];for(be in _s)!k(K,be)&&k(_s,be)&&$(ma,be);for(;ye.length>ua;)k(_s,be=ye[ua++])&&(~V(ma,be)||$(ma,be));return ma}},4771:(m,C,y)=>{var N=y(5629),k=y(6759);m.exports=Object.keys||function(U){return N(U,k)}},6760:(m,C)=>{var y={}.propertyIsEnumerable,N=Object.getOwnPropertyDescriptor,k=N&&!y.call({1:2},1);C.f=k?function(U){var V=N(this,U);return!!V&&V.enumerable}:y},8929:(m,C,y)=>{var N=y(5329),k=y(6059),U=y(1851);m.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var V,K=!1,$={};try{(V=N(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))($,[]),K=$ instanceof Array}catch(Z){}return function(Z,ye){return k(Z),U(ye),K?V(Z,ye):Z.__proto__=ye,Z}}():void 0)},5623:(m,C,y)=>{var N=y(2885),k=y(9697);m.exports=N?{}.toString:function(){return"[object "+k(this)+"]"}},9811:(m,C,y)=>{var N=y(8834),k=y(7475),U=y(941),V=TypeError;m.exports=function(K,$){var Z,ye;if("string"===$&&k(Z=K.toString)&&!U(ye=N(Z,K))||k(Z=K.valueOf)&&!U(ye=N(Z,K))||"string"!==$&&k(Z=K.toString)&&!U(ye=N(Z,K)))return ye;throw V("Can't convert object to primitive value")}},1136:(m,C,y)=>{var N=y(626),k=y(5329),U=y(946),V=y(7857),K=y(6059),$=k([].concat);m.exports=N("Reflect","ownKeys")||function(Z){var ye=U.f(K(Z)),be=V.f;return be?$(ye,be(Z)):ye}},4058:m=>{m.exports={}},2:m=>{m.exports=function(C){try{return{error:!1,value:C()}}catch(y){return{error:!0,value:y}}}},7742:(m,C,y)=>{var N=y(1899),k=y(6991),U=y(7475),V=y(7252),K=y(1302),$=y(9813),Z=y(3321),ye=y(8501),be=y(2529),_s=y(3385),ua=k&&k.prototype,ma=$("species"),pc=!1,qa=U(N.PromiseRejectionEvent),Ua=V("Promise",function(){var nl=K(k),Wc=nl!==String(k);if(!Wc&&66===_s||be&&(!ua.catch||!ua.finally))return!0;if(!_s||_s<51||!/native code/.test(nl)){var El=new k(function(Kl){Kl(1)}),Dl=function(Kl){Kl(function(){},function(){})};if((El.constructor={})[ma]=Dl,!(pc=El.then(function(){})instanceof Dl))return!0}return!Wc&&(Z||ye)&&!qa});m.exports={CONSTRUCTOR:Ua,REJECTION_EVENT:qa,SUBCLASSING:pc}},6991:(m,C,y)=>{var N=y(1899);m.exports=N.Promise},6584:(m,C,y)=>{var N=y(6059),k=y(941),U=y(9520);m.exports=function(V,K){if(N(V),k(K)&&K.constructor===V)return K;var $=U.f(V);return(0,$.resolve)(K),$.promise}},1542:(m,C,y)=>{var N=y(6991),k=y(1385),U=y(7742).CONSTRUCTOR;m.exports=U||!k(function(V){N.all(V).then(void 0,function(){})})},8397:m=>{var C=function(){this.head=null,this.tail=null};C.prototype={add:function(y){var N={item:y,next:null};this.head?this.tail.next=N:this.head=N,this.tail=N},get:function(){var y=this.head;if(y)return this.head=y.next,this.tail===y&&(this.tail=null),y.item}},m.exports=C},8219:(m,C,y)=>{var N=y(2119),k=TypeError;m.exports=function(U){if(N(U))throw k("Can't call method on "+U);return U}},4431:(m,C,y)=>{var N=y(626),k=y(5988),U=y(9813),V=y(5746),K=U("species");m.exports=function($){var Z=N($);V&&Z&&!Z[K]&&(0,k.f)(Z,K,{configurable:!0,get:function(){return this}})}},904:(m,C,y)=>{var N=y(2885),k=y(5988).f,U=y(2029),V=y(953),K=y(5623),$=y(9813)("toStringTag");m.exports=function(Z,ye,be,_s){if(Z){var ua=be?Z:Z.prototype;V(ua,$)||k(ua,$,{configurable:!0,value:ye}),_s&&!N&&U(ua,"toString",K)}}},4262:(m,C,y)=>{var N=y(8726),k=y(9418),U=N("keys");m.exports=function(V){return U[V]||(U[V]=k(V))}},3030:(m,C,y)=>{var N=y(1899),k=y(5609),U="__core-js_shared__",V=N[U]||k(U,{});m.exports=V},8726:(m,C,y)=>{var N=y(2529),k=y(3030);(m.exports=function(U,V){return k[U]||(k[U]=void 0!==V?V:{})})("versions",[]).push({version:"3.26.0",mode:N?"pure":"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.26.0/LICENSE",source:"https://github.com/zloirock/core-js"})},487:(m,C,y)=>{var N=y(6059),k=y(174),U=y(2119),V=y(9813)("species");m.exports=function(K,$){var Z,ye=N(K).constructor;return void 0===ye||U(Z=N(ye)[V])?$:k(Z)}},4620:(m,C,y)=>{var N=y(5329),k=y(2435),U=y(5803),V=y(8219),K=N("".charAt),$=N("".charCodeAt),Z=N("".slice),ye=function(be){return function(_s,ua){var ma,pc,qa=U(V(_s)),Ua=k(ua),nl=qa.length;return Ua<0||Ua>=nl?be?"":void 0:(ma=$(qa,Ua))<55296||ma>56319||Ua+1===nl||(pc=$(qa,Ua+1))<56320||pc>57343?be?K(qa,Ua):ma:be?Z(qa,Ua,Ua+2):pc-56320+(ma-55296<<10)+65536}};m.exports={codeAt:ye(!1),charAt:ye(!0)}},3405:(m,C,y)=>{var N=y(3385),k=y(5981);m.exports=!!Object.getOwnPropertySymbols&&!k(function(){var U=Symbol();return!String(U)||!(Object(U)instanceof Symbol)||!Symbol.sham&&N&&N<41})},2941:(m,C,y)=>{var N,k,U,V,K=y(1899),$=y(9730),Z=y(6843),ye=y(7475),be=y(953),_s=y(5981),ua=y(5463),ma=y(3765),pc=y(1333),qa=y(8348),Ua=y(2749),nl=y(6049),Wc=K.setImmediate,El=K.clearImmediate,Dl=K.process,Kl=K.Dispatch,sl=K.Function,_a=K.MessageChannel,Qa=K.String,ca=0,Aa={};try{N=K.location}catch(J){}var Ya=function(J){if(be(Aa,J)){var Ze=Aa[J];delete Aa[J],Ze()}},Zc=function(J){return function(){Ya(J)}},Ol=function(J){Ya(J.data)},_c=function(J){K.postMessage(Qa(J),N.protocol+"//"+N.host)};Wc&&El||(Wc=function(J){qa(arguments.length,1);var Ze=ye(J)?J:sl(J),aa=ma(arguments,1);return Aa[++ca]=function(){$(Ze,void 0,aa)},k(ca),ca},El=function(J){delete Aa[J]},nl?k=function(J){Dl.nextTick(Zc(J))}:Kl&&Kl.now?k=function(J){Kl.now(Zc(J))}:_a&&!Ua?(V=(U=new _a).port2,U.port1.onmessage=Ol,k=Z(V.postMessage,V)):K.addEventListener&&ye(K.postMessage)&&!K.importScripts&&N&&"file:"!==N.protocol&&!_s(_c)?(k=_c,K.addEventListener("message",Ol,!1)):k="onreadystatechange"in pc("script")?function(J){ua.appendChild(pc("script")).onreadystatechange=function(){ua.removeChild(this),Ya(J)}}:function(J){setTimeout(Zc(J),0)}),m.exports={set:Wc,clear:El}},9413:(m,C,y)=>{var N=y(2435),k=Math.max,U=Math.min;m.exports=function(V,K){var $=N(V);return $<0?k($+K,0):U($,K)}},4529:(m,C,y)=>{var N=y(7026),k=y(8219);m.exports=function(U){return N(k(U))}},2435:(m,C,y)=>{var N=y(5331);m.exports=function(k){var U=+k;return U!=U||0===U?0:N(U)}},3057:(m,C,y)=>{var N=y(2435),k=Math.min;m.exports=function(U){return U>0?k(N(U),9007199254740991):0}},9678:(m,C,y)=>{var N=y(8219),k=Object;m.exports=function(U){return k(N(U))}},6935:(m,C,y)=>{var N=y(8834),k=y(941),U=y(6664),V=y(4229),K=y(9811),$=y(9813),Z=TypeError,ye=$("toPrimitive");m.exports=function(be,_s){if(!k(be)||U(be))return be;var ua,ma=V(be,ye);if(ma){if(void 0===_s&&(_s="default"),ua=N(ma,be,_s),!k(ua)||U(ua))return ua;throw Z("Can't convert object to primitive value")}return void 0===_s&&(_s="number"),K(be,_s)}},3894:(m,C,y)=>{var N=y(6935),k=y(6664);m.exports=function(U){var V=N(U,"string");return k(V)?V:V+""}},2885:(m,C,y)=>{var N={};N[y(9813)("toStringTag")]="z",m.exports="[object z]"===String(N)},5803:(m,C,y)=>{var N=y(9697),k=String;m.exports=function(U){if("Symbol"===N(U))throw TypeError("Cannot convert a Symbol value to a string");return k(U)}},9826:m=>{var C=String;m.exports=function(y){try{return C(y)}catch(N){return"Object"}}},9418:(m,C,y)=>{var N=y(5329),k=0,U=Math.random(),V=N(1..toString);m.exports=function(K){return"Symbol("+(void 0===K?"":K)+")_"+V(++k+U,36)}},2302:(m,C,y)=>{var N=y(3405);m.exports=N&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3937:(m,C,y)=>{var N=y(5746),k=y(5981);m.exports=N&&k(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},8348:m=>{var C=TypeError;m.exports=function(y,N){if(y<N)throw C("Not enough arguments");return y}},7093:(m,C,y)=>{var N=y(1899),k=y(7475),U=N.WeakMap;m.exports=k(U)&&/native code/.test(String(U))},9813:(m,C,y)=>{var N=y(1899),k=y(8726),U=y(953),V=y(9418),K=y(3405),$=y(2302),Z=k("wks"),ye=N.Symbol,be=ye&&ye.for,_s=$?ye:ye&&ye.withoutSetter||V;m.exports=function(ua){if(!U(Z,ua)||!K&&"string"!=typeof Z[ua]){var ma="Symbol."+ua;Z[ua]=K&&U(ye,ua)?ye[ua]:$&&be?be(ma):_s(ma)}return Z[ua]}},9812:(m,C,y)=>{var N=y(6887),k=y(7046),U=y(249),V=y(8929),K=y(3489),$=y(9290),Z=y(2029),ye=y(1887),be=y(3995),_s=y(3794),ua=y(3091),ma=y(4649),pc=y(9813),qa=y(8780),Ua=pc("toStringTag"),nl=Error,Wc=[].push,El=function(Kl,sl){var _a,Qa=arguments.length>2?arguments[2]:void 0,ca=k(Dl,this);V?_a=V(nl(),ca?U(this):Dl):(_a=ca?this:$(Dl),Z(_a,Ua,"Error")),void 0!==sl&&Z(_a,"message",ma(sl)),qa&&Z(_a,"stack",be(_a.stack,1)),_s(_a,Qa);var Aa=[];return ua(Kl,Wc,{that:Aa}),Z(_a,"errors",Aa),_a};V?V(El,nl):K(El,nl,{name:!0});var Dl=El.prototype=$(nl.prototype,{constructor:ye(1,El),message:ye(1,""),name:ye(1,"AggregateError")});N({global:!0,constructor:!0,arity:2},{AggregateError:El})},7627:(m,C,y)=>{y(9812)},6274:(m,C,y)=>{var N=y(4529),k=y(8479),U=y(2077),V=y(5402),K=y(5988).f,$=y(5105),Z=y(3538),ye=y(2529),be=y(5746),_s="Array Iterator",ua=V.set,ma=V.getterFor(_s);m.exports=$(Array,"Array",function(qa,Ua){ua(this,{type:_s,target:N(qa),index:0,kind:Ua})},function(){var qa=ma(this),Ua=qa.target,nl=qa.kind,Wc=qa.index++;return!Ua||Wc>=Ua.length?(qa.target=void 0,Z(void 0,!0)):Z("keys"==nl?Wc:"values"==nl?Ua[Wc]:[Wc,Ua[Wc]],!1)},"values");var pc=U.Arguments=U.Array;if(k("keys"),k("values"),k("entries"),!ye&&be&&"values"!==pc.name)try{K(pc,"name",{value:"values"})}catch(qa){}},6450:(m,C,y)=>{var N=y(6887),k=y(5746),U=y(5988).f;N({target:"Object",stat:!0,forced:Object.defineProperty!==U,sham:!k},{defineProperty:U})},5967:()=>{},4560:(m,C,y)=>{var N=y(6887),k=y(8834),U=y(4883),V=y(9520),K=y(2),$=y(3091);N({target:"Promise",stat:!0},{allSettled:function(Z){var ye=this,be=V.f(ye),_s=be.resolve,ua=be.reject,ma=K(function(){var pc=U(ye.resolve),qa=[],Ua=0,nl=1;$(Z,function(Wc){var El=Ua++,Dl=!1;nl++,k(pc,ye,Wc).then(function(Kl){Dl||(Dl=!0,qa[El]={status:"fulfilled",value:Kl},--nl||_s(qa))},function(Kl){Dl||(Dl=!0,qa[El]={status:"rejected",reason:Kl},--nl||_s(qa))})}),--nl||_s(qa)});return ma.error&&ua(ma.value),be.promise}})},6890:(m,C,y)=>{var N=y(6887),k=y(8834),U=y(4883),V=y(9520),K=y(2),$=y(3091);N({target:"Promise",stat:!0,forced:y(1542)},{all:function(Z){var ye=this,be=V.f(ye),_s=be.resolve,ua=be.reject,ma=K(function(){var pc=U(ye.resolve),qa=[],Ua=0,nl=1;$(Z,function(Wc){var El=Ua++,Dl=!1;nl++,k(pc,ye,Wc).then(function(Kl){Dl||(Dl=!0,qa[El]=Kl,--nl||_s(qa))},ua)}),--nl||_s(qa)});return ma.error&&ua(ma.value),be.promise}})},7206:(m,C,y)=>{var N=y(6887),k=y(8834),U=y(4883),V=y(626),K=y(9520),$=y(2),Z=y(3091),ye="No one promise resolved";N({target:"Promise",stat:!0},{any:function(be){var _s=this,ua=V("AggregateError"),ma=K.f(_s),pc=ma.resolve,qa=ma.reject,Ua=$(function(){var nl=U(_s.resolve),Wc=[],El=0,Dl=1,Kl=!1;Z(be,function(sl){var _a=El++,Qa=!1;Dl++,k(nl,_s,sl).then(function(ca){Qa||Kl||(Kl=!0,pc(ca))},function(ca){Qa||Kl||(Qa=!0,Wc[_a]=ca,--Dl||qa(new ua(Wc,ye)))})}),--Dl||qa(new ua(Wc,ye))});return Ua.error&&qa(Ua.value),ma.promise}})},3376:(m,C,y)=>{var N=y(6887),k=y(2529),U=y(7742).CONSTRUCTOR,V=y(6991),K=y(626),$=y(7475),Z=y(5929),ye=V&&V.prototype;if(N({target:"Promise",proto:!0,forced:U,real:!0},{catch:function(_s){return this.then(void 0,_s)}}),!k&&$(V)){var be=K("Promise").prototype.catch;ye.catch!==be&&Z(ye,"catch",be,{unsafe:!0})}},6934:(m,C,y)=>{var N,k,U,V=y(6887),K=y(2529),$=y(6049),Z=y(1899),ye=y(8834),be=y(5929),_s=y(8929),ua=y(904),ma=y(4431),pc=y(4883),qa=y(7475),Ua=y(941),nl=y(5743),Wc=y(487),El=y(2941).set,Dl=y(6132),Kl=y(4845),sl=y(2),_a=y(8397),Qa=y(5402),ca=y(6991),Aa=y(7742),Ya=y(9520),Zc="Promise",Ol=Aa.CONSTRUCTOR,_c=Aa.REJECTION_EVENT,J=Aa.SUBCLASSING,Ze=Qa.getterFor(Zc),aa=Qa.set,Xa=ca&&ca.prototype,vl=ca,Oh=Xa,ff=Z.TypeError,Rh=Z.document,Cg=Z.process,cf=Ya.f,Vp=cf,_d=!!(Rh&&Rh.createEvent&&Z.dispatchEvent),Gp="unhandledrejection",Lh=function(ga){var Hc;return!(!Ua(ga)||!qa(Hc=ga.then))&&Hc},Op=function(ga,Hc){var jc,Al,Id,Wh=Hc.value,Tl=1==Hc.state,Fl=Tl?ga.ok:ga.fail,Jd=ga.resolve,Pp=ga.reject,G0=ga.domain;try{Fl?(Tl||(2===Hc.rejection&&Ma(Hc),Hc.rejection=1),!0===Fl?jc=Wh:(G0&&G0.enter(),jc=Fl(Wh),G0&&(G0.exit(),Id=!0)),jc===ga.promise?Pp(ff("Promise-chain cycle")):(Al=Lh(jc))?ye(Al,jc,Jd,Pp):Jd(jc)):Pp(Wh)}catch(f1){G0&&!Id&&G0.exit(),Pp(f1)}},Uy=function(ga,Hc){ga.notified||(ga.notified=!0,Dl(function(){for(var jc,Al=ga.reactions;jc=Al.get();)Op(jc,ga);ga.notified=!1,Hc&&!ga.rejection&&ry(ga)}))},M0=function(ga,Hc,jc){var Al,Id;_d?((Al=Rh.createEvent("Event")).promise=Hc,Al.reason=jc,Al.initEvent(ga,!1,!0),Z.dispatchEvent(Al)):Al={promise:Hc,reason:jc},!_c&&(Id=Z["on"+ga])?Id(Al):ga===Gp&&Kl("Unhandled promise rejection",jc)},ry=function(ga){ye(El,Z,function(){var Hc,jc=ga.facade,Al=ga.value;if(_j(ga)&&(Hc=sl(function(){$?Cg.emit("unhandledRejection",Al,jc):M0(Gp,jc,Al)}),ga.rejection=$||_j(ga)?2:1,Hc.error))throw Hc.value})},_j=function(ga){return 1!==ga.rejection&&!ga.parent},Ma=function(ga){ye(El,Z,function(){var Hc=ga.facade;$?Cg.emit("rejectionHandled",Hc):M0("rejectionhandled",Hc,ga.value)})},_i=function(ga,Hc,jc){return function(Al){ga(Hc,Al,jc)}},va=function(ga,Hc,jc){ga.done||(ga.done=!0,jc&&(ga=jc),ga.value=Hc,ga.state=2,Uy(ga,!0))},nc=function(ga,Hc,jc){if(!ga.done){ga.done=!0,jc&&(ga=jc);try{if(ga.facade===Hc)throw ff("Promise can't be resolved itself");var Al=Lh(Hc);Al?Dl(function(){var Id={done:!1};try{ye(Al,Hc,_i(nc,Id,ga),_i(va,Id,ga))}catch(Wh){va(Id,Wh,ga)}}):(ga.value=Hc,ga.state=1,Uy(ga,!1))}catch(Id){va({done:!1},Id,ga)}}};if(Ol&&(Oh=(vl=function(ga){nl(this,Oh),pc(ga),ye(N,this);var Hc=Ze(this);try{ga(_i(nc,Hc),_i(va,Hc))}catch(jc){va(Hc,jc)}}).prototype,(N=function(ga){aa(this,{type:Zc,done:!1,notified:!1,parent:!1,reactions:new _a,rejection:!1,state:0,value:void 0})}).prototype=be(Oh,"then",function(ga,Hc){var jc=Ze(this),Al=cf(Wc(this,vl));return jc.parent=!0,Al.ok=!qa(ga)||ga,Al.fail=qa(Hc)&&Hc,Al.domain=$?Cg.domain:void 0,0==jc.state?jc.reactions.add(Al):Dl(function(){Op(Al,jc)}),Al.promise}),k=function(){var ga=new N,Hc=Ze(ga);this.promise=ga,this.resolve=_i(nc,Hc),this.reject=_i(va,Hc)},Ya.f=cf=function(ga){return ga===vl||void 0===ga?new k(ga):Vp(ga)},!K&&qa(ca)&&Xa!==Object.prototype)){U=Xa.then,J||be(Xa,"then",function(ga,Hc){var jc=this;return new vl(function(Al,Id){ye(U,jc,Al,Id)}).then(ga,Hc)},{unsafe:!0});try{delete Xa.constructor}catch(ga){}_s&&_s(Xa,Oh)}V({global:!0,constructor:!0,wrap:!0,forced:Ol},{Promise:vl}),ua(vl,Zc,!1,!0),ma(Zc)},4349:(m,C,y)=>{var N=y(6887),k=y(2529),U=y(6991),V=y(5981),K=y(626),$=y(7475),Z=y(487),ye=y(6584),be=y(5929),_s=U&&U.prototype;if(N({target:"Promise",proto:!0,real:!0,forced:!!U&&V(function(){_s.finally.call({then:function(){}},function(){})})},{finally:function(ma){var pc=Z(this,K("Promise")),qa=$(ma);return this.then(qa?function(Ua){return ye(pc,ma()).then(function(){return Ua})}:ma,qa?function(Ua){return ye(pc,ma()).then(function(){throw Ua})}:ma)}}),!k&&$(U)){var ua=K("Promise").prototype.finally;_s.finally!==ua&&be(_s,"finally",ua,{unsafe:!0})}},8881:(m,C,y)=>{y(6934),y(6890),y(3376),y(5921),y(4069),y(4482)},5921:(m,C,y)=>{var N=y(6887),k=y(8834),U=y(4883),V=y(9520),K=y(2),$=y(3091);N({target:"Promise",stat:!0,forced:y(1542)},{race:function(Z){var ye=this,be=V.f(ye),_s=be.reject,ua=K(function(){var ma=U(ye.resolve);$(Z,function(pc){k(ma,ye,pc).then(be.resolve,_s)})});return ua.error&&_s(ua.value),be.promise}})},4069:(m,C,y)=>{var N=y(6887),k=y(8834),U=y(9520);N({target:"Promise",stat:!0,forced:y(7742).CONSTRUCTOR},{reject:function(V){var K=U.f(this);return k(K.reject,void 0,V),K.promise}})},4482:(m,C,y)=>{var N=y(6887),k=y(626),U=y(2529),V=y(6991),K=y(7742).CONSTRUCTOR,$=y(6584),Z=k("Promise"),ye=U&&!K;N({target:"Promise",stat:!0,forced:U||K},{resolve:function(be){return $(ye&&this===Z?V:this,be)}})},7971:(m,C,y)=>{var N=y(4620).charAt,k=y(5803),U=y(5402),V=y(5105),K=y(3538),$="String Iterator",Z=U.set,ye=U.getterFor($);V(String,"String",function(be){Z(this,{type:$,string:k(be),index:0})},function(){var be,_s=ye(this),ua=_s.string,ma=_s.index;return ma>=ua.length?K(void 0,!0):(be=N(ua,ma),_s.index+=be.length,K(be,!1))})},7634:(m,C,y)=>{y(6274);var N=y(3281),k=y(1899),U=y(9697),V=y(2029),K=y(2077),$=y(9813)("toStringTag");for(var Z in N){var ye=k[Z],be=ye&&ye.prototype;be&&U(be)!==$&&V(be,$,Z),K[Z]=K.Array}},1910:(m,C,y)=>{var N=y(8171);m.exports=N},7460:(m,C,y)=>{var N=y(2956);y(7634),m.exports=N},9662:(m,C,y)=>{var N=y(614),k=y(6330),U=TypeError;m.exports=function(V){if(N(V))return V;throw U(k(V)+" is not a function")}},6077:(m,C,y)=>{var N=y(614),k=String,U=TypeError;m.exports=function(V){if("object"==typeof V||N(V))return V;throw U("Can't set "+k(V)+" as a prototype")}},1223:(m,C,y)=>{var N=y(5112),k=y(30),U=y(3070).f,V=N("unscopables"),K=Array.prototype;null==K[V]&&U(K,V,{configurable:!0,value:k(null)}),m.exports=function($){K[V][$]=!0}},9670:(m,C,y)=>{var N=y(111),k=String,U=TypeError;m.exports=function(V){if(N(V))return V;throw U(k(V)+" is not an object")}},1318:(m,C,y)=>{var N=y(5656),k=y(1400),U=y(6244),V=function(K){return function($,Z,ye){var be,_s=N($),ua=U(_s),ma=k(ye,ua);if(K&&Z!=Z){for(;ua>ma;)if((be=_s[ma++])!=be)return!0}else for(;ua>ma;ma++)if((K||ma in _s)&&_s[ma]===Z)return K||ma||0;return!K&&-1}};m.exports={includes:V(!0),indexOf:V(!1)}},4326:(m,C,y)=>{var N=y(84),k=N({}.toString),U=N("".slice);m.exports=function(V){return U(k(V),8,-1)}},648:(m,C,y)=>{var N=y(1694),k=y(614),U=y(4326),V=y(5112)("toStringTag"),K=Object,$="Arguments"==U(function(){return arguments}());m.exports=N?U:function(Z){var ye,be,_s;return void 0===Z?"Undefined":null===Z?"Null":"string"==typeof(be=function(ua,ma){try{return ua[ma]}catch(pc){}}(ye=K(Z),V))?be:$?U(ye):"Object"==(_s=U(ye))&&k(ye.callee)?"Arguments":_s}},9920:(m,C,y)=>{var N=y(2597),k=y(3887),U=y(1236),V=y(3070);m.exports=function(K,$,Z){for(var ye=k($),be=V.f,_s=U.f,ua=0;ua<ye.length;ua++){var ma=ye[ua];N(K,ma)||Z&&N(Z,ma)||be(K,ma,_s($,ma))}}},8544:(m,C,y)=>{var N=y(7293);m.exports=!N(function(){function k(){}return k.prototype.constructor=null,Object.getPrototypeOf(new k)!==k.prototype})},6178:m=>{m.exports=function(C,y){return{value:C,done:y}}},8880:(m,C,y)=>{var N=y(9781),k=y(3070),U=y(9114);m.exports=N?function(V,K,$){return k.f(V,K,U(1,$))}:function(V,K,$){return V[K]=$,V}},9114:m=>{m.exports=function(C,y){return{enumerable:!(1&C),configurable:!(2&C),writable:!(4&C),value:y}}},8052:(m,C,y)=>{var N=y(614),k=y(3070),U=y(6339),V=y(3072);m.exports=function(K,$,Z,ye){ye||(ye={});var be=ye.enumerable,_s=void 0!==ye.name?ye.name:$;if(N(Z)&&U(Z,_s,ye),ye.global)be?K[$]=Z:V($,Z);else{try{ye.unsafe?K[$]&&(be=!0):delete K[$]}catch(ua){}be?K[$]=Z:k.f(K,$,{value:Z,enumerable:!1,configurable:!ye.nonConfigurable,writable:!ye.nonWritable})}return K}},3072:(m,C,y)=>{var N=y(7854),k=Object.defineProperty;m.exports=function(U,V){try{k(N,U,{value:V,configurable:!0,writable:!0})}catch(K){N[U]=V}return V}},9781:(m,C,y)=>{var N=y(7293);m.exports=!N(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},4154:m=>{var C="object"==typeof document&&document.all;m.exports={all:C,IS_HTMLDDA:void 0===C&&void 0!==C}},317:(m,C,y)=>{var N=y(7854),k=y(111),U=N.document,V=k(U)&&k(U.createElement);m.exports=function(K){return V?U.createElement(K):{}}},8324:m=>{m.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:(m,C,y)=>{var N=y(317)("span").classList,k=N&&N.constructor&&N.constructor.prototype;m.exports=k===Object.prototype?void 0:k},8113:(m,C,y)=>{var N=y(5005);m.exports=N("navigator","userAgent")||""},7392:(m,C,y)=>{var N,k,U=y(7854),V=y(8113),K=U.process,$=U.Deno,Z=K&&K.versions||$&&$.version,ye=Z&&Z.v8;ye&&(k=(N=ye.split("."))[0]>0&&N[0]<4?1:+(N[0]+N[1])),!k&&V&&(!(N=V.match(/Edge\/(\d+)/))||N[1]>=74)&&(N=V.match(/Chrome\/(\d+)/))&&(k=+N[1]),m.exports=k},748:m=>{m.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},1060:(m,C,y)=>{var N=y(1702),k=Error,U=N("".replace),V=String(k("zxcasd").stack),K=/\n\s*at [^:]*:[^\n]*/,$=K.test(V);m.exports=function(Z,ye){if($&&"string"==typeof Z&&!k.prepareStackTrace)for(;ye--;)Z=U(Z,K,"");return Z}},2914:(m,C,y)=>{var N=y(7293),k=y(9114);m.exports=!N(function(){var U=Error("a");return!("stack"in U)||(Object.defineProperty(U,"stack",k(1,7)),7!==U.stack)})},2109:(m,C,y)=>{var N=y(7854),k=y(1236).f,U=y(8880),V=y(8052),K=y(3072),$=y(9920),Z=y(4705);m.exports=function(ye,be){var _s,ua,ma,pc,qa,Ua=ye.target,nl=ye.global,Wc=ye.stat;if(_s=nl?N:Wc?N[Ua]||K(Ua,{}):(N[Ua]||{}).prototype)for(ua in be){if(pc=be[ua],ma=ye.dontCallGetSet?(qa=k(_s,ua))&&qa.value:_s[ua],!Z(nl?ua:Ua+(Wc?".":"#")+ua,ye.forced)&&void 0!==ma){if(typeof pc==typeof ma)continue;$(pc,ma)}(ye.sham||ma&&ma.sham)&&U(pc,"sham",!0),V(_s,ua,pc,ye)}}},7293:m=>{m.exports=function(C){try{return!!C()}catch(y){return!0}}},2104:(m,C,y)=>{var N=y(4374),k=Function.prototype,U=k.apply,V=k.call;m.exports="object"==typeof Reflect&&Reflect.apply||(N?V.bind(U):function(){return V.apply(U,arguments)})},4374:(m,C,y)=>{var N=y(7293);m.exports=!N(function(){var k=function(){}.bind();return"function"!=typeof k||k.hasOwnProperty("prototype")})},6916:(m,C,y)=>{var N=y(4374),k=Function.prototype.call;m.exports=N?k.bind(k):function(){return k.apply(k,arguments)}},6530:(m,C,y)=>{var N=y(9781),k=y(2597),U=Function.prototype,V=N&&Object.getOwnPropertyDescriptor,K=k(U,"name"),$=K&&"something"===function(){}.name,Z=K&&(!N||N&&V(U,"name").configurable);m.exports={EXISTS:K,PROPER:$,CONFIGURABLE:Z}},84:(m,C,y)=>{var N=y(4374),k=Function.prototype,U=k.call,V=N&&k.bind.bind(U,U);m.exports=N?V:function(K){return function(){return U.apply(K,arguments)}}},1702:(m,C,y)=>{var N=y(4326),k=y(84);m.exports=function(U){if("Function"===N(U))return k(U)}},5005:(m,C,y)=>{var N=y(7854),k=y(614),U=function(V){return k(V)?V:void 0};m.exports=function(V,K){return arguments.length<2?U(N[V]):N[V]&&N[V][K]}},8173:(m,C,y)=>{var N=y(9662),k=y(8554);m.exports=function(U,V){var K=U[V];return k(K)?void 0:N(K)}},7854:(m,C,y)=>{var N=function(k){return k&&k.Math==Math&&k};m.exports=N("object"==typeof globalThis&&globalThis)||N("object"==typeof window&&window)||N("object"==typeof self&&self)||N("object"==typeof y.g&&y.g)||function(){return this}()||Function("return this")()},2597:(m,C,y)=>{var N=y(1702),k=y(7908),U=N({}.hasOwnProperty);m.exports=Object.hasOwn||function(V,K){return U(k(V),K)}},3501:m=>{m.exports={}},490:(m,C,y)=>{var N=y(5005);m.exports=N("document","documentElement")},4664:(m,C,y)=>{var N=y(9781),k=y(7293),U=y(317);m.exports=!N&&!k(function(){return 7!=Object.defineProperty(U("div"),"a",{get:function(){return 7}}).a})},8361:(m,C,y)=>{var N=y(1702),k=y(7293),U=y(4326),V=Object,K=N("".split);m.exports=k(function(){return!V("z").propertyIsEnumerable(0)})?function($){return"String"==U($)?K($,""):V($)}:V},9587:(m,C,y)=>{var N=y(614),k=y(111),U=y(7674);m.exports=function(V,K,$){var Z,ye;return U&&N(Z=K.constructor)&&Z!==$&&k(ye=Z.prototype)&&ye!==$.prototype&&U(V,ye),V}},2788:(m,C,y)=>{var N=y(1702),k=y(614),U=y(5465),V=N(Function.toString);k(U.inspectSource)||(U.inspectSource=function(K){return V(K)}),m.exports=U.inspectSource},8340:(m,C,y)=>{var N=y(111),k=y(8880);m.exports=function(U,V){N(V)&&"cause"in V&&k(U,"cause",V.cause)}},9909:(m,C,y)=>{var N,k,U,V=y(4811),K=y(7854),$=y(111),Z=y(8880),ye=y(2597),be=y(5465),_s=y(6200),ua=y(3501),ma="Object already initialized",pc=K.TypeError;if(V||be.state){var Ua=be.state||(be.state=new(0,K.WeakMap));Ua.get=Ua.get,Ua.has=Ua.has,Ua.set=Ua.set,N=function(Wc,El){if(Ua.has(Wc))throw pc(ma);return El.facade=Wc,Ua.set(Wc,El),El},k=function(Wc){return Ua.get(Wc)||{}},U=function(Wc){return Ua.has(Wc)}}else{var nl=_s("state");ua[nl]=!0,N=function(Wc,El){if(ye(Wc,nl))throw pc(ma);return El.facade=Wc,Z(Wc,nl,El),El},k=function(Wc){return ye(Wc,nl)?Wc[nl]:{}},U=function(Wc){return ye(Wc,nl)}}m.exports={set:N,get:k,has:U,enforce:function(Wc){return U(Wc)?k(Wc):N(Wc,{})},getterFor:function(Wc){return function(El){var Dl;if(!$(El)||(Dl=k(El)).type!==Wc)throw pc("Incompatible receiver, "+Wc+" required");return Dl}}}},614:(m,C,y)=>{var N=y(4154),k=N.all;m.exports=N.IS_HTMLDDA?function(U){return"function"==typeof U||U===k}:function(U){return"function"==typeof U}},4705:(m,C,y)=>{var N=y(7293),k=y(614),U=/#|\.prototype\./,V=function(be,_s){var ua=$[K(be)];return ua==ye||ua!=Z&&(k(_s)?N(_s):!!_s)},K=V.normalize=function(be){return String(be).replace(U,".").toLowerCase()},$=V.data={},Z=V.NATIVE="N",ye=V.POLYFILL="P";m.exports=V},8554:m=>{m.exports=function(C){return null==C}},111:(m,C,y)=>{var N=y(614),k=y(4154),U=k.all;m.exports=k.IS_HTMLDDA?function(V){return"object"==typeof V?null!==V:N(V)||V===U}:function(V){return"object"==typeof V?null!==V:N(V)}},1913:m=>{m.exports=!1},2190:(m,C,y)=>{var N=y(5005),k=y(614),U=y(7976),V=y(3307),K=Object;m.exports=V?function($){return"symbol"==typeof $}:function($){var Z=N("Symbol");return k(Z)&&U(Z.prototype,K($))}},3061:(m,C,y)=>{var N=y(3383).IteratorPrototype,k=y(30),U=y(9114),V=y(8003),K=y(7497),$=function(){return this};m.exports=function(Z,ye,be,_s){var ua=ye+" Iterator";return Z.prototype=k(N,{next:U(+!_s,be)}),V(Z,ua,!1,!0),K[ua]=$,Z}},1656:(m,C,y)=>{var N=y(2109),k=y(6916),U=y(1913),V=y(6530),K=y(614),$=y(3061),Z=y(9518),ye=y(7674),be=y(8003),_s=y(8880),ua=y(8052),ma=y(5112),pc=y(7497),qa=y(3383),Ua=V.PROPER,nl=V.CONFIGURABLE,Wc=qa.IteratorPrototype,El=qa.BUGGY_SAFARI_ITERATORS,Dl=ma("iterator"),sl="values",_a="entries",Qa=function(){return this};m.exports=function(ca,Aa,Ya,Zc,Ol,_c,J){$(Ya,Aa,Zc);var Ze,aa,Xa,vl=function(_d){if(_d===Ol&&cf)return cf;if(!El&&_d in Rh)return Rh[_d];switch(_d){case"keys":case sl:case _a:return function(){return new Ya(this,_d)}}return function(){return new Ya(this)}},Oh=Aa+" Iterator",ff=!1,Rh=ca.prototype,Cg=Rh[Dl]||Rh["@@iterator"]||Ol&&Rh[Ol],cf=!El&&Cg||vl(Ol),Vp="Array"==Aa&&Rh.entries||Cg;if(Vp&&(Ze=Z(Vp.call(new ca)))!==Object.prototype&&Ze.next&&(U||Z(Ze)===Wc||(ye?ye(Ze,Wc):K(Ze[Dl])||ua(Ze,Dl,Qa)),be(Ze,Oh,!0,!0),U&&(pc[Oh]=Qa)),Ua&&Ol==sl&&Cg&&Cg.name!==sl&&(!U&&nl?_s(Rh,"name",sl):(ff=!0,cf=function(){return k(Cg,this)})),Ol)if(aa={values:vl(sl),keys:_c?cf:vl("keys"),entries:vl(_a)},J)for(Xa in aa)(El||ff||!(Xa in Rh))&&ua(Rh,Xa,aa[Xa]);else N({target:Aa,proto:!0,forced:El||ff},aa);return U&&!J||Rh[Dl]===cf||ua(Rh,Dl,cf,{name:Ol}),pc[Aa]=cf,aa}},3383:(m,C,y)=>{var N,k,U,V=y(7293),K=y(614),$=y(111),Z=y(30),ye=y(9518),be=y(8052),_s=y(5112),ua=y(1913),ma=_s("iterator"),pc=!1;[].keys&&("next"in(U=[].keys())?(k=ye(ye(U)))!==Object.prototype&&(N=k):pc=!0),!$(N)||V(function(){var qa={};return N[ma].call(qa)!==qa})?N={}:ua&&(N=Z(N)),K(N[ma])||be(N,ma,function(){return this}),m.exports={IteratorPrototype:N,BUGGY_SAFARI_ITERATORS:pc}},7497:m=>{m.exports={}},6244:(m,C,y)=>{var N=y(7466);m.exports=function(k){return N(k.length)}},6339:(m,C,y)=>{var N=y(7293),k=y(614),U=y(2597),V=y(9781),K=y(6530).CONFIGURABLE,$=y(2788),Z=y(9909),ye=Z.enforce,be=Z.get,_s=Object.defineProperty,ua=V&&!N(function(){return 8!==_s(function(){},"length",{value:8}).length}),ma=String(String).split("String"),pc=m.exports=function(qa,Ua,nl){"Symbol("===String(Ua).slice(0,7)&&(Ua="["+String(Ua).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),nl&&nl.getter&&(Ua="get "+Ua),nl&&nl.setter&&(Ua="set "+Ua),(!U(qa,"name")||K&&qa.name!==Ua)&&(V?_s(qa,"name",{value:Ua,configurable:!0}):qa.name=Ua),ua&&nl&&U(nl,"arity")&&qa.length!==nl.arity&&_s(qa,"length",{value:nl.arity});try{nl&&U(nl,"constructor")&&nl.constructor?V&&_s(qa,"prototype",{writable:!1}):qa.prototype&&(qa.prototype=void 0)}catch(El){}var Wc=ye(qa);return U(Wc,"source")||(Wc.source=ma.join("string"==typeof Ua?Ua:"")),qa};Function.prototype.toString=pc(function(){return k(this)&&be(this).source||$(this)},"toString")},4758:m=>{var C=Math.ceil,y=Math.floor;m.exports=Math.trunc||function(N){var k=+N;return(k>0?y:C)(k)}},6277:(m,C,y)=>{var N=y(1340);m.exports=function(k,U){return void 0===k?arguments.length<2?"":U:N(k)}},30:(m,C,y)=>{var N,k=y(9670),U=y(6048),V=y(748),K=y(3501),$=y(490),Z=y(317),ye=y(6200)("IE_PROTO"),be=function(){},_s=function(pc){return"<script>"+pc+"<\/script>"},ua=function(pc){pc.write(_s("")),pc.close();var qa=pc.parentWindow.Object;return pc=null,qa},ma=function(){try{N=new ActiveXObject("htmlfile")}catch(nl){}var pc,qa;ma="undefined"!=typeof document?document.domain&&N?ua(N):((qa=Z("iframe")).style.display="none",$.appendChild(qa),qa.src=String("javascript:"),(pc=qa.contentWindow.document).open(),pc.write(_s("document.F=Object")),pc.close(),pc.F):ua(N);for(var Ua=V.length;Ua--;)delete ma.prototype[V[Ua]];return ma()};K[ye]=!0,m.exports=Object.create||function(pc,qa){var Ua;return null!==pc?(be.prototype=k(pc),Ua=new be,be.prototype=null,Ua[ye]=pc):Ua=ma(),void 0===qa?Ua:U.f(Ua,qa)}},6048:(m,C,y)=>{var N=y(9781),k=y(3353),U=y(3070),V=y(9670),K=y(5656),$=y(1956);C.f=N&&!k?Object.defineProperties:function(Z,ye){V(Z);for(var be,_s=K(ye),ua=$(ye),ma=ua.length,pc=0;ma>pc;)U.f(Z,be=ua[pc++],_s[be]);return Z}},3070:(m,C,y)=>{var N=y(9781),k=y(4664),U=y(3353),V=y(9670),K=y(4948),$=TypeError,Z=Object.defineProperty,ye=Object.getOwnPropertyDescriptor;C.f=N?U?function(be,_s,ua){if(V(be),_s=K(_s),V(ua),"function"==typeof be&&"prototype"===_s&&"value"in ua&&"writable"in ua&&!ua.writable){var ma=ye(be,_s);ma&&ma.writable&&(be[_s]=ua.value,ua={configurable:"configurable"in ua?ua.configurable:ma.configurable,enumerable:"enumerable"in ua?ua.enumerable:ma.enumerable,writable:!1})}return Z(be,_s,ua)}:Z:function(be,_s,ua){if(V(be),_s=K(_s),V(ua),k)try{return Z(be,_s,ua)}catch(ma){}if("get"in ua||"set"in ua)throw $("Accessors not supported");return"value"in ua&&(be[_s]=ua.value),be}},1236:(m,C,y)=>{var N=y(9781),k=y(6916),U=y(5296),V=y(9114),K=y(5656),$=y(4948),Z=y(2597),ye=y(4664),be=Object.getOwnPropertyDescriptor;C.f=N?be:function(_s,ua){if(_s=K(_s),ua=$(ua),ye)try{return be(_s,ua)}catch(ma){}if(Z(_s,ua))return V(!k(U.f,_s,ua),_s[ua])}},8006:(m,C,y)=>{var N=y(6324),k=y(748).concat("length","prototype");C.f=Object.getOwnPropertyNames||function(U){return N(U,k)}},5181:(m,C)=>{C.f=Object.getOwnPropertySymbols},9518:(m,C,y)=>{var N=y(2597),k=y(614),U=y(7908),V=y(6200),K=y(8544),$=V("IE_PROTO"),Z=Object,ye=Z.prototype;m.exports=K?Z.getPrototypeOf:function(be){var _s=U(be);if(N(_s,$))return _s[$];var ua=_s.constructor;return k(ua)&&_s instanceof ua?ua.prototype:_s instanceof Z?ye:null}},7976:(m,C,y)=>{var N=y(1702);m.exports=N({}.isPrototypeOf)},6324:(m,C,y)=>{var N=y(1702),k=y(2597),U=y(5656),V=y(1318).indexOf,K=y(3501),$=N([].push);m.exports=function(Z,ye){var be,_s=U(Z),ua=0,ma=[];for(be in _s)!k(K,be)&&k(_s,be)&&$(ma,be);for(;ye.length>ua;)k(_s,be=ye[ua++])&&(~V(ma,be)||$(ma,be));return ma}},1956:(m,C,y)=>{var N=y(6324),k=y(748);m.exports=Object.keys||function(U){return N(U,k)}},5296:(m,C)=>{var y={}.propertyIsEnumerable,N=Object.getOwnPropertyDescriptor,k=N&&!y.call({1:2},1);C.f=k?function(U){var V=N(this,U);return!!V&&V.enumerable}:y},7674:(m,C,y)=>{var N=y(1702),k=y(9670),U=y(6077);m.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var V,K=!1,$={};try{(V=N(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))($,[]),K=$ instanceof Array}catch(Z){}return function(Z,ye){return k(Z),U(ye),K?V(Z,ye):Z.__proto__=ye,Z}}():void 0)},2140:(m,C,y)=>{var N=y(6916),k=y(614),U=y(111),V=TypeError;m.exports=function(K,$){var Z,ye;if("string"===$&&k(Z=K.toString)&&!U(ye=N(Z,K))||k(Z=K.valueOf)&&!U(ye=N(Z,K))||"string"!==$&&k(Z=K.toString)&&!U(ye=N(Z,K)))return ye;throw V("Can't convert object to primitive value")}},3887:(m,C,y)=>{var N=y(5005),k=y(1702),U=y(8006),V=y(5181),K=y(9670),$=k([].concat);m.exports=N("Reflect","ownKeys")||function(Z){var ye=U.f(K(Z)),be=V.f;return be?$(ye,be(Z)):ye}},2626:(m,C,y)=>{var N=y(3070).f;m.exports=function(k,U,V){V in k||N(k,V,{configurable:!0,get:function(){return U[V]},set:function(K){U[V]=K}})}},4488:(m,C,y)=>{var N=y(8554),k=TypeError;m.exports=function(U){if(N(U))throw k("Can't call method on "+U);return U}},8003:(m,C,y)=>{var N=y(3070).f,k=y(2597),U=y(5112)("toStringTag");m.exports=function(V,K,$){V&&!$&&(V=V.prototype),V&&!k(V,U)&&N(V,U,{configurable:!0,value:K})}},6200:(m,C,y)=>{var N=y(2309),k=y(9711),U=N("keys");m.exports=function(V){return U[V]||(U[V]=k(V))}},5465:(m,C,y)=>{var N=y(7854),k=y(3072),U="__core-js_shared__",V=N[U]||k(U,{});m.exports=V},2309:(m,C,y)=>{var N=y(1913),k=y(5465);(m.exports=function(U,V){return k[U]||(k[U]=void 0!==V?V:{})})("versions",[]).push({version:"3.26.0",mode:N?"pure":"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.26.0/LICENSE",source:"https://github.com/zloirock/core-js"})},6293:(m,C,y)=>{var N=y(7392),k=y(7293);m.exports=!!Object.getOwnPropertySymbols&&!k(function(){var U=Symbol();return!String(U)||!(Object(U)instanceof Symbol)||!Symbol.sham&&N&&N<41})},1400:(m,C,y)=>{var N=y(9303),k=Math.max,U=Math.min;m.exports=function(V,K){var $=N(V);return $<0?k($+K,0):U($,K)}},5656:(m,C,y)=>{var N=y(8361),k=y(4488);m.exports=function(U){return N(k(U))}},9303:(m,C,y)=>{var N=y(4758);m.exports=function(k){var U=+k;return U!=U||0===U?0:N(U)}},7466:(m,C,y)=>{var N=y(9303),k=Math.min;m.exports=function(U){return U>0?k(N(U),9007199254740991):0}},7908:(m,C,y)=>{var N=y(4488),k=Object;m.exports=function(U){return k(N(U))}},7593:(m,C,y)=>{var N=y(6916),k=y(111),U=y(2190),V=y(8173),K=y(2140),$=y(5112),Z=TypeError,ye=$("toPrimitive");m.exports=function(be,_s){if(!k(be)||U(be))return be;var ua,ma=V(be,ye);if(ma){if(void 0===_s&&(_s="default"),ua=N(ma,be,_s),!k(ua)||U(ua))return ua;throw Z("Can't convert object to primitive value")}return void 0===_s&&(_s="number"),K(be,_s)}},4948:(m,C,y)=>{var N=y(7593),k=y(2190);m.exports=function(U){var V=N(U,"string");return k(V)?V:V+""}},1694:(m,C,y)=>{var N={};N[y(5112)("toStringTag")]="z",m.exports="[object z]"===String(N)},1340:(m,C,y)=>{var N=y(648),k=String;m.exports=function(U){if("Symbol"===N(U))throw TypeError("Cannot convert a Symbol value to a string");return k(U)}},6330:m=>{var C=String;m.exports=function(y){try{return C(y)}catch(N){return"Object"}}},9711:(m,C,y)=>{var N=y(1702),k=0,U=Math.random(),V=N(1..toString);m.exports=function(K){return"Symbol("+(void 0===K?"":K)+")_"+V(++k+U,36)}},3307:(m,C,y)=>{var N=y(6293);m.exports=N&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:(m,C,y)=>{var N=y(9781),k=y(7293);m.exports=N&&k(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},4811:(m,C,y)=>{var N=y(7854),k=y(614),U=N.WeakMap;m.exports=k(U)&&/native code/.test(String(U))},5112:(m,C,y)=>{var N=y(7854),k=y(2309),U=y(2597),V=y(9711),K=y(6293),$=y(3307),Z=k("wks"),ye=N.Symbol,be=ye&&ye.for,_s=$?ye:ye&&ye.withoutSetter||V;m.exports=function(ua){if(!U(Z,ua)||!K&&"string"!=typeof Z[ua]){var ma="Symbol."+ua;Z[ua]=K&&U(ye,ua)?ye[ua]:$&&be?be(ma):_s(ma)}return Z[ua]}},9191:(m,C,y)=>{var N=y(5005),k=y(2597),U=y(8880),V=y(7976),K=y(7674),$=y(9920),Z=y(2626),ye=y(9587),be=y(6277),_s=y(8340),ua=y(1060),ma=y(2914),pc=y(9781),qa=y(1913);m.exports=function(Ua,nl,Wc,El){var Dl="stackTraceLimit",Kl=El?2:1,sl=Ua.split("."),_a=sl[sl.length-1],Qa=N.apply(null,sl);if(Qa){var ca=Qa.prototype;if(!qa&&k(ca,"cause")&&delete ca.cause,!Wc)return Qa;var Aa=N("Error"),Ya=nl(function(Zc,Ol){var _c=be(El?Ol:Zc,void 0),J=El?new Qa(Zc):new Qa;return void 0!==_c&&U(J,"message",_c),ma&&U(J,"stack",ua(J.stack,2)),this&&V(ca,this)&&ye(J,this,Ya),arguments.length>Kl&&_s(J,arguments[Kl]),J});if(Ya.prototype=ca,"Error"!==_a?K?K(Ya,Aa):$(Ya,Aa,{name:!0}):pc&&Dl in Qa&&(Z(Ya,Qa,Dl),Z(Ya,Qa,"prepareStackTrace")),$(Ya,Qa),!qa)try{ca.name!==_a&&U(ca,"name",_a),ca.constructor=Ya}catch(Zc){}return Ya}}},6992:(m,C,y)=>{var N=y(5656),k=y(1223),U=y(7497),V=y(9909),K=y(3070).f,$=y(1656),Z=y(6178),ye=y(1913),be=y(9781),_s="Array Iterator",ua=V.set,ma=V.getterFor(_s);m.exports=$(Array,"Array",function(qa,Ua){ua(this,{type:_s,target:N(qa),index:0,kind:Ua})},function(){var qa=ma(this),Ua=qa.target,nl=qa.kind,Wc=qa.index++;return!Ua||Wc>=Ua.length?(qa.target=void 0,Z(void 0,!0)):Z("keys"==nl?Wc:"values"==nl?Ua[Wc]:[Wc,Ua[Wc]],!1)},"values");var pc=U.Arguments=U.Array;if(k("keys"),k("values"),k("entries"),!ye&&be&&"values"!==pc.name)try{K(pc,"name",{value:"values"})}catch(qa){}},1703:(m,C,y)=>{var N=y(2109),k=y(7854),U=y(2104),V=y(9191),K=k.WebAssembly,$=7!==Error("e",{cause:7}).cause,Z=function(be,_s){var ua={};ua[be]=V(be,_s,$),N({global:!0,constructor:!0,arity:1,forced:$},ua)},ye=function(be,_s){if(K&&K[be]){var ua={};ua[be]=V("WebAssembly."+be,_s,$),N({target:"WebAssembly",stat:!0,constructor:!0,arity:1,forced:$},ua)}};Z("Error",function(be){return function(_s){return U(be,this,arguments)}}),Z("EvalError",function(be){return function(_s){return U(be,this,arguments)}}),Z("RangeError",function(be){return function(_s){return U(be,this,arguments)}}),Z("ReferenceError",function(be){return function(_s){return U(be,this,arguments)}}),Z("SyntaxError",function(be){return function(_s){return U(be,this,arguments)}}),Z("TypeError",function(be){return function(_s){return U(be,this,arguments)}}),Z("URIError",function(be){return function(_s){return U(be,this,arguments)}}),ye("CompileError",function(be){return function(_s){return U(be,this,arguments)}}),ye("LinkError",function(be){return function(_s){return U(be,this,arguments)}}),ye("RuntimeError",function(be){return function(_s){return U(be,this,arguments)}})},3948:(m,C,y)=>{var N=y(7854),k=y(8324),U=y(8509),V=y(6992),K=y(8880),$=y(5112),Z=$("iterator"),ye=$("toStringTag"),be=V.values,_s=function(ma,pc){if(ma){if(ma[Z]!==be)try{K(ma,Z,be)}catch(Ua){ma[Z]=be}if(ma[ye]||K(ma,ye,pc),k[pc])for(var qa in V)if(ma[qa]!==V[qa])try{K(ma,qa,V[qa])}catch(Ua){ma[qa]=V[qa]}}};for(var ua in k)_s(N[ua]&&N[ua].prototype,ua);_s(U,"DOMTokenList")},6226:(m,C,y)=>{m.exports=y(7460)},7445:(m,C,y)=>{m.exports=y(3685)}},h={};function g(m){var C=h[m];if(void 0!==C)return C.exports;var y=h[m]={exports:{}};return c[m](y,y.exports,g),y.exports}g.n=m=>{var C=m&&m.__esModule?()=>m.default:()=>m;return g.d(C,{a:C}),C},g.d=(m,C)=>{for(var y in C)g.o(C,y)&&!g.o(m,y)&&Object.defineProperty(m,y,{enumerable:!0,get:C[y]})},g.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(m){if("object"==typeof window)return window}}(),g.o=(m,C)=>Object.prototype.hasOwnProperty.call(m,C),g.r=m=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})};var v={};return(()=>{g.r(v),g.d(v,{AudioExtension:()=>nl,AudioProcessor:()=>qa,Extension:()=>Ua,PromiseMutex:()=>Kl,Ticker:()=>El,VideoProcessor:()=>pc,logger:()=>$,reporter:()=>be});var m=g(7445);function C(sl,_a,Qa){return _a in sl?m(sl,_a,{value:Qa,enumerable:!0,configurable:!0,writable:!0}):sl[_a]=Qa,sl}g(1703),g(6992),g(3948);var y=g(6226),N=g.n(y);const k=Date.now(),U={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4};function V(){const sl=new Date;return sl.toTimeString().split(" ")[0]+":"+sl.getMilliseconds()}const K=sl=>{for(const _a in U)if(Object.prototype.hasOwnProperty.call(U,_a)&&U[_a]===sl)return _a;return"DEFAULT"},$=new class{constructor(){C(this,"logLevel",U.DEBUG),C(this,"hookLog",void 0)}debug(){for(var sl=arguments.length,_a=new Array(sl),Qa=0;Qa<sl;Qa++)_a[Qa]=arguments[Qa];const ca=[U.DEBUG].concat(_a);this.log.apply(this,ca)}info(){for(var sl=arguments.length,_a=new Array(sl),Qa=0;Qa<sl;Qa++)_a[Qa]=arguments[Qa];const ca=[U.INFO].concat(_a);this.log.apply(this,ca)}warning(){for(var sl=arguments.length,_a=new Array(sl),Qa=0;Qa<sl;Qa++)_a[Qa]=arguments[Qa];const ca=[U.WARNING].concat(_a);this.log.apply(this,ca)}error(){for(var sl=arguments.length,_a=new Array(sl),Qa=0;Qa<sl;Qa++)_a[Qa]=arguments[Qa];const ca=[U.ERROR].concat(_a);this.log.apply(this,ca)}log(){for(var sl,_a=arguments.length,Qa=new Array(_a),ca=0;ca<_a;ca++)Qa[ca]=arguments[ca];if(Date.now()-k<100)return void setTimeout(()=>{this.log(...Qa)},Date.now()-k);const Aa=Math.max(0,Math.min(4,Qa[0]));if(Qa[0]=V()+" Agora-Extension [".concat(K(Aa),"]:"),Aa<this.logLevel)return;const Ya=V()+" %cAgora-Extension [".concat(K(Aa),"]:");let Zc=[];switch(Aa){case U.DEBUG:Zc=[Ya,"color: #64B5F6;"].concat(Qa.slice(1)),console.log.apply(console,Zc);break;case U.INFO:Zc=[Ya,"color: #1E88E5; font-weight: bold;"].concat(Qa.slice(1)),console.log.apply(console,Zc);break;case U.WARNING:Zc=[Ya,"color: #FB8C00; font-weight: bold;"].concat(Qa.slice(1)),console.warn.apply(console,Zc);break;case U.ERROR:Zc=[Ya,"color: #B00020; font-weight: bold;"].concat(Qa.slice(1)),console.error.apply(console,Zc)}null===(sl=this.hookLog)||void 0===sl||sl.call(this,Aa,Zc)}};function Z(sl,_a){var Qa=Object.keys(sl);if(Object.getOwnPropertySymbols){var ca=Object.getOwnPropertySymbols(sl);_a&&(ca=ca.filter(function(Aa){return Object.getOwnPropertyDescriptor(sl,Aa).enumerable})),Qa.push.apply(Qa,ca)}return Qa}function ye(sl){for(var _a=1;_a<arguments.length;_a++){var Qa=null!=arguments[_a]?arguments[_a]:{};_a%2?Z(Object(Qa),!0).forEach(function(ca){C(sl,ca,Qa[ca])}):Object.getOwnPropertyDescriptors?Object.defineProperties(sl,Object.getOwnPropertyDescriptors(Qa)):Z(Object(Qa)).forEach(function(ca){Object.defineProperty(sl,ca,Object.getOwnPropertyDescriptor(Qa,ca))})}return sl}const be=new class{constructor(){C(this,"apiInvokeMsgQueue",[]),C(this,"hookApiInvoke",void 0)}reportApiInvoke(sl){sl.timeout=sl.timeout||6e4,sl.reportResult=void 0===sl.reportResult||sl.reportResult;const _a=Date.now(),Qa=()=>({name:sl.name,apiInvokeTime:_a,options:sl.options});let ca=!1;var Aa;(Aa=sl.timeout,new(N())(Zc=>{window.setTimeout(Zc,Aa)})).then(()=>{ca||(this.sendApiInvoke(ye(ye({},Qa()),{},{error:"API_INVOKE_TIMEOUT",success:!1})),$.debug("".concat(sl.name," timeout")))});const Ya=new Error("".concat(sl.name,": this api invoke is end"));return{onSuccess:Zc=>{if(ca)throw Ya;ca=!0,this.sendApiInvoke(ye(ye({},Qa()),{},{success:!0},sl.reportResult&&{result:Zc}))},onError:Zc=>{if(ca)throw Zc;ca=!0,this.sendApiInvoke(ye(ye({},Qa()),{},{success:!1,error:Zc.toString()}))}}}sendApiInvoke(sl){this.hookApiInvoke?(this.hookApiInvoke([...this.apiInvokeMsgQueue,sl]),this.apiInvokeMsgQueue=[]):this.apiInvokeMsgQueue.push(sl)}};function _s(sl,_a){var Qa=Object.keys(sl);if(Object.getOwnPropertySymbols){var ca=Object.getOwnPropertySymbols(sl);_a&&(ca=ca.filter(function(Aa){return Object.getOwnPropertyDescriptor(sl,Aa).enumerable})),Qa.push.apply(Qa,ca)}return Qa}function ua(sl){for(var _a=1;_a<arguments.length;_a++){var Qa=null!=arguments[_a]?arguments[_a]:{};_a%2?_s(Object(Qa),!0).forEach(function(ca){C(sl,ca,Qa[ca])}):Object.getOwnPropertyDescriptors?Object.defineProperties(sl,Object.getOwnPropertyDescriptors(Qa)):_s(Object(Qa)).forEach(function(ca){Object.defineProperty(sl,ca,Object.getOwnPropertyDescriptor(Qa,ca))})}return sl}class ma extends class{constructor(){C(this,"_events",{}),C(this,"addListener",this.on)}getListeners(_a){return this._events[_a]?this._events[_a].map(Qa=>Qa.listener):[]}on(_a,Qa){this._events[_a]||(this._events[_a]=[]);const ca=this._events[_a];-1===this._indexOfListener(ca,Qa)&&ca.push({listener:Qa,once:!1})}once(_a,Qa){this._events[_a]||(this._events[_a]=[]);const ca=this._events[_a];-1===this._indexOfListener(ca,Qa)&&ca.push({listener:Qa,once:!0})}off(_a,Qa){if(!this._events[_a])return;const ca=this._events[_a],Aa=this._indexOfListener(ca,Qa);-1!==Aa&&ca.splice(Aa,1),0===this._events[_a].length&&delete this._events[_a]}removeAllListeners(_a){_a?delete this._events[_a]:this._events={}}emit(_a){this._events[_a]||(this._events[_a]=[]);const Qa=this._events[_a].map(Zc=>Zc);for(var ca=arguments.length,Aa=new Array(ca>1?ca-1:0),Ya=1;Ya<ca;Ya++)Aa[Ya-1]=arguments[Ya];for(let Zc=0;Zc<Qa.length;Zc+=1){const Ol=Qa[Zc];Ol.once&&this.off(_a,Ol.listener),Ol.listener.apply(this,Aa||[])}}_indexOfListener(_a,Qa){let ca=_a.length;for(;ca--;)if(_a[ca].listener===Qa)return ca;return-1}emitAsPromise(_a){for(var Qa=arguments.length,ca=new Array(Qa>1?Qa-1:0),Aa=1;Aa<Qa;Aa++)ca[Aa-1]=arguments[Aa];return 0===this.getListeners(_a).length?N().reject(new Error("No promise event handler.")):new(N())((Ya,Zc)=>{this.emit(_a,...ca,Ya,Zc)})}emitAsPromiseNoResponse(_a){for(var Qa=arguments.length,ca=new Array(Qa>1?Qa-1:0),Aa=1;Aa<Qa;Aa++)ca[Aa-1]=arguments[Aa];return 0===this.getListeners(_a).length?N().resolve():new(N())((Ya,Zc)=>{this.emit(_a,...ca,Ya,Zc)})}}{get enabled(){return this._enabled}output(_a,Qa){if(this.outputTrack===_a)return;const ca=be.reportApiInvoke({name:"".concat(this.name,".output"),options:{track:null==_a?void 0:_a.toString()}});this.outputTrack=_a,this.destination&&this.destination.updateInput({track:_a,context:Qa}),ca.onSuccess()}constructor(){super(),C(this,"inputTrack",void 0),C(this,"outputTrack",void 0),C(this,"_enabled",!0),C(this,"_source",void 0),C(this,"ID",function _a(){let Qa=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,ca=arguments.length>1?arguments[1]:void 0;const Aa=Math.random().toString(16).substr(2,Qa).toLowerCase();return Aa.length===Qa?"".concat(ca).concat(Aa):"".concat(ca).concat(Aa)+_a(Qa-Aa.length,"")}(6,"")),C(this,"destination",void 0),C(this,"context",void 0),C(this,"name",void 0)}enable(){if(this._enabled)return;const _a=be.reportApiInvoke({name:"".concat(this.name,".enable"),options:!0});$.info("".concat(this.name,"-").concat(this.ID," enabled")),this._enabled=!0;try{var Qa;const ca=null===(Qa=this.onEnableChange)||void 0===Qa?void 0:Qa.call(this,this._enabled);if(ca instanceof N())return ca.then(()=>{_a.onSuccess()}).catch(Aa=>{throw _a.onError(Aa),Aa});_a.onSuccess()}catch(ca){throw _a.onError(ca),ca}}disable(){if(!this._enabled)return;const _a=be.reportApiInvoke({name:"".concat(this.name,".enable"),options:!1});$.info("".concat(this.name,"-").concat(this.ID," disabled")),this._enabled=!1;try{var Qa;const ca=null===(Qa=this.onEnableChange)||void 0===Qa?void 0:Qa.call(this,this._enabled);if(ca instanceof N())return ca.then(()=>{_a.onSuccess()}).catch(Aa=>{throw _a.onError(Aa),Aa});_a.onSuccess()}catch(ca){throw _a.onError(ca),ca}}}class pc extends ma{get kind(){return"video"}pipe(_a){const Qa=be.reportApiInvoke({name:"".concat(this.name,".pipe"),options:{processor:_a.name}});if(this.destination===_a)return Qa.onSuccess(),_a;if(_a._source){const ca=new Error("Processor ".concat(_a.name," already being piped, please call ").concat(_a._source.name,".unpipe() beforehand."));throw Qa.onError(ca),ca}return this.destination&&this.unpipe(),this.destination=_a,_a._source=this,this.context&&this.destination.updateInput({track:this.outputTrack,context:this.context}),Qa.onSuccess(),_a}unpipe(){if(!this.destination)return;const _a=be.reportApiInvoke({name:"".concat(this.name,".unpipe"),options:{processor:this.destination.name}});$.info("unpiping processor ".concat(this.destination.name,"-").concat(this.destination.ID));try{const Qa=this.destination;this.destination._source=void 0,this.destination=void 0,Qa.reset()}finally{_a.onSuccess()}}updateInput(_a){var Qa,ca;_a.context!==this.context&&(this.context=_a.context,null===(Qa=this.onPiped)||void 0===Qa||Qa.call(this,this.context),this.destination&&this.destination.updateInput({track:this.outputTrack,context:_a.context})),_a.track&&this.inputTrack!==_a.track&&(this.inputTrack=_a.track,null===(ca=this.onTrack)||void 0===ca||ca.call(this,_a.track,this.context))}reset(){var _a;this.context&&this.context.requestRevertConstraints(this),this.inputTrack=void 0,this.context=void 0,null===(_a=this.onUnpiped)||void 0===_a||_a.call(this),this.destination&&this.destination.reset()}}class qa extends ma{constructor(){super(...arguments),C(this,"inputNode",void 0),C(this,"outputNode",void 0),C(this,"destination",void 0),C(this,"context",void 0)}get kind(){return"audio"}pipe(_a){const Qa=be.reportApiInvoke({name:"".concat(this.name,".pipe"),options:{processor:_a.name}});if(this.destination===_a)return Qa.onSuccess(),_a;if(_a._source){const ca=new Error("Processor ".concat(_a.name," already being piped, please call ").concat(_a._source.name,".unpipe() beforehand."));throw Qa.onError(ca),ca}return this.destination&&this.unpipe(),this.destination=_a,_a._source=this,this.context&&this.destination.updateInput({track:this.outputTrack,node:this.outputNode,context:this.context}),Qa.onSuccess(),_a}unpipe(){if(!this.destination)return;$.info("unpiping processor ".concat(this.destination.name,"-").concat(this.destination.ID));const _a=be.reportApiInvoke({name:"".concat(this.name,".unpipe"),options:{processor:this.destination.name}});try{var Qa;let ca=this.destination;null===(Qa=this.outputNode)||void 0===Qa||Qa.disconnect(),this.destination._source=void 0,this.destination=void 0,ca.reset()}finally{_a.onSuccess()}}output(_a,Qa){if(_a instanceof MediaStreamTrack)super.output(_a,Qa);else if(_a instanceof AudioNode){if(this.outputNode===_a)return;const ca=be.reportApiInvoke({name:"".concat(this.name,".output"),options:ua(ua({},_a instanceof MediaStreamTrack&&{track:_a.toString()}),_a instanceof AudioNode&&{audioNode:_a.toString()})});this.outputNode=_a,this.destination&&this.destination.updateInput({node:_a,context:Qa}),ca.onSuccess()}}updateInput(_a){var Qa,ca,Aa;_a.context!==this.context&&(this.context=_a.context,null===(Qa=this.onPiped)||void 0===Qa||Qa.call(this,this.context),this.destination&&this.destination.updateInput({track:this.outputTrack,node:this.outputNode,context:_a.context})),_a.track&&this.inputTrack!==_a.track&&(this.inputTrack=_a.track,null===(ca=this.onTrack)||void 0===ca||ca.call(this,_a.track,this.context)),_a.node&&this.inputNode!==_a.node&&(this.inputNode=_a.node,null===(Aa=this.onNode)||void 0===Aa||Aa.call(this,_a.node,this.context))}reset(){var _a;this.context&&this.context.requestRevertConstraints(this),this.inputTrack=void 0,this.inputNode=void 0,null===(_a=this.onUnpiped)||void 0===_a||_a.call(this,this.context),this.context=void 0,this.destination&&this.destination.reset()}}class Ua{constructor(){C(this,"__registered__",!1),C(this,"logger",$),C(this,"reporter",be),C(this,"parameters",{})}createProcessor(){if(!this.__registered__)throw new Error("Extension not registered yet!");return this._createProcessor()}}class nl extends Ua{}let Wc;class El{get running(){return this._running}constructor(_a,Qa){if(C(this,"type",void 0),C(this,"interval",void 0),C(this,"fn",void 0),C(this,"_running",!1),C(this,"_osc",void 0),!_a)throw new Error;if(Qa<=0)throw new Error;this.type=_a,this.interval=Qa}add(_a){this.fn=_a}remove(){this.fn=void 0}start(){if(!this._running)switch(this._running=!0,this.type){case"Timer":{const _a=()=>{setTimeout(()=>{this.fn&&this.fn(),this._running&&_a()},this.interval)};_a();break}case"RAF":{const _a=Qa=>{requestAnimationFrame(ca=>{ca-Qa<this.interval?this._running&&_a(Qa):(this.fn&&this.fn(),this._running&&_a(ca))})};_a(performance.now());break}case"Oscillator":{Wc||(Wc=new AudioContext);const _a=Wc.createGain();let Qa;_a.gain.value=0,_a.connect(Wc.destination);const ca=()=>{this.fn&&this.fn(),Qa&&Qa.disconnect(),Qa=Wc.createOscillator(),this._osc=Qa,Qa.connect(_a),this._running&&(Qa.onended=ca,Qa.start(0),Qa.stop(Wc.currentTime+this.interval/1e3))};ca();break}}}stop(){this._running=!1,this._osc&&(this._osc.onended=null,this._osc=void 0)}}let Dl=1;class Kl{constructor(_a){C(this,"lockingPromise",N().resolve()),C(this,"locks",0),C(this,"name",""),C(this,"lockId",void 0),this.lockId=Dl++,_a&&(this.name=_a)}get isLocked(){return this.locks>0}lock(_a){let Qa;this.locks+=1;const ca=new(N())(Ya=>{Qa=()=>{this.locks-=1,Ya()}}),Aa=this.lockingPromise.then(()=>Qa);return this.lockingPromise=this.lockingPromise.then(()=>ca),Aa}}})(),v})(),e.exports=i()})(Pme),!document.documentMode&&window.StyleMedia&&(HTMLCanvasElement.prototype.getContext=(xme=HTMLCanvasElement.prototype.getContext,function(){let e=arguments;return"webgl"===e[0]&&(e=[].slice.call(arguments),e[0]="experimental-webgl"),xme.apply(null,e)}));const $be=[31,222,239,159,192,236,164,81,54,227,176,149,2,247,75,141,183,54,213,216,158,92,111,49,228,111,150,6,135,79,35,212,4,155,200,168,37,107,243,110,144,179,51,81,55,78,223,242,191,211,74,119,203,151,142,62,31,41,132,22,35,155,87,123,119,117,216,57,201,53,228,67,201,40,106,24,80,176,187,253,60,63,136,100,20,12,177,99,64,38,101,143,111,176,251,211,145,136,34,23,79,136,202,95,105,199,125,67,180,44,210,179,228,4,85,160,188,64,26,46,6,61,201,103,248,18,97,254,140,36,115,106,48,124,102,216,155,120,36,227,165,217,7,227,191,128,212,157,80,37,117,175,24,214,47,221,183,211,51,174,251,223,159,167,152,53,36,107,199,223,91,62,46,194,11,80,121,188,219,2,99,99,232,229,173,234,21,30,236,177,243,142,97,48,108,56,62,172,56,216,3,42,79,138,23,88,182,39,5,118,68,135,178,56,9,94,189,44,104,9,238,231,174,122,85,247,231,86,74,8,189,147,218,180,58,76,227,17,46,90,194,100,51,178,72,163,151,243,166,130,85,1,223,130,152,242,85,255,28,173,97,252,119,215,177,119,86,104,136,82,40,72,53,11,18,26,240,188,76,110,39,31,189];function Mme(e){const n=new Uint8Array([99,114,121,112,116,105,105]),i=n.length,c=e,h=c.length,g=new Uint8Array(h),v=new Uint8Array(256);for(let k=0;k<256;k++)v[k]=k;let m=0;for(let k=0;k<256;k++)m=(m+v[k]+n[k%i])%256,[v[k],v[m]]=[v[m],v[k]];let C,y=0;m=0;for(let k=0;k<0+h;k++)y=(y+1)%256,m=(m+v[y])%256,[v[y],v[m]]=[v[m],v[y]],C=v[(v[y]+v[m])%256],k>=0&&(g[k-0]=c[k-0]^C);const N=String.fromCharCode.apply(null,Array.from(g));return Function("var winSize = 5; return `"+N+"`")()}const Zbe=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,152,221,191,124,116,248,106,130,251,59,105,43,91,135,199,181,223,10,51,134,194,240,46,9,3,141,22,35,146,76,23,109,117,208,41,201,45,218,76,203,105,51,58,97,154,145,236,49,18,183,127,27,12,210,122,73,42,37,143,36,207,251,211,145,191,56,10,88,222,181,125,22,238,123,71,177,107,218,254,173,28,34,253,249,67,83,97,73,111,219,43,181,82,38,230,136,109,22,67];class Bme{constructor(n,i){Y(this,"program",void 0),Y(this,"gl",void 0),Y(this,"kernel",void 0),this.gl=n,this.kernel=i||Zbe,this.program=function(c,h){const g=Mme(h),v=function Xbe(e,n,i,c){const h=[];for(let g=0;g<n.length;++g)h.push(zbe(e,n[g],0===g?e.VERTEX_SHADER:e.FRAGMENT_SHADER));return function(g,v,m,C){const y=g.createProgram();if(!y)throw new ea(_t.WEBGL_INTERNAL_ERROR,"can not create webgl program");if(v.forEach(N=>{g.attachShader(y,N)}),m&&m.forEach((N,k)=>{g.bindAttribLocation(y,C?C[k]:k,N)}),g.linkProgram(y),!g.getProgramParameter(y,g.LINK_STATUS)){const N=g.getProgramInfoLog(y);throw g.deleteProgram(y),new ea(_t.WEBGL_INTERNAL_ERROR,"error in program linking:"+N)}return y}(e,h,i,c)}(c,[Mme($be),g]);{const m=c.getAttribLocation(v,"a_position"),C=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,C),c.bufferData(c.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),c.STATIC_DRAW),c.enableVertexAttribArray(m),c.vertexAttribPointer(m,2,c.FLOAT,!1,0,0)}{const m=c.getAttribLocation(v,"a_texCoord"),C=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,C),c.bufferData(c.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),c.STATIC_DRAW),c.enableVertexAttribArray(m),c.vertexAttribPointer(m,2,c.FLOAT,!1,0,0)}return v}(this.gl,this.kernel)}setUniforms(){const n=this.gl.getUniformLocation(this.program,"u_flipY");this.gl.uniform1f(n,1)}}class SL extends Bme{constructor(n,i,c,h){super(n,i),Y(this,"xOffset",void 0),Y(this,"yOffset",void 0),Y(this,"denoiseLevel",5),this.xOffset=1/c,this.yOffset=1/h}setUniforms(){const n=this.gl.getUniformLocation(this.program,"u_flipY"),i=this.gl.getUniformLocation(this.program,"u_singleStepOffset"),c=this.gl.getUniformLocation(this.program,"u_denoiseLevel");this.gl.uniform2f(i,this.xOffset,this.yOffset),this.gl.uniform1f(c,this.denoiseLevel),this.gl.uniform1f(n,1)}setParameters(n){void 0!==n.denoiseLevel&&(this.denoiseLevel=n.denoiseLevel)}setSize(n,i){this.xOffset=1/n,this.yOffset=1/i}}const e1e=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,155,210,164,99,114,228,96,130,251,59,105,43,91,135,199,181,223,10,51,133,194,247,34,31,39,142,28,2,130,18,109,84,124,223,62,140,52,128,47,208,47,115,39,4,200,220,171,53,36,150,101,10,75,247,121,74,36,35,143,108,176,235,211,135,164,36,11,88,160,148,35,6,221,41,32,166,109,205,171,228,4,26,169,244,82,119,102,86,61,201,103,248,18,97,242,182,34,121,70,28,71,126,197,223,126,14,244,149,192,12,176,187,149,212,156,22,44,36,133,10,216,63,198,213,154,116,230,253,154,154,249,215,55,60,34,196,229,76,50,44,135,22,77,113,247,142,94,60,23,172,145,175,218,81,86,162,239,180,205,63,118,3,110,123,224,127,158,124,15,127,157,27,66,176,33,24,51,53,194,178,56,6,74,191,111,51,78,174,157,229,17,22,178,231,92,25,23,191,157,137,188,54,64,176,13,22,81,207,45,108,203,83,186,130,237,186,153,110,8,196,168,152,161,28,238,46,184,36,185,20,203,183,98,95,41,149,93,105,37,116,91,68,105,164,217,30,42,60,53,173,213,177,216,195,53,204,173,128,243,42,122,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,220,161,39,214,146,183,193,225,23,177,201,243,128,160,33,75,86,126,139,254,232,14,13,85,2,112,17,150,36,180,86,226,225,126,197,17,228,225,142,245,37,170,39,96,187,190,2,35,85,237,11,189,1,79,237,2,1,114,246,109,190,66,54,153,43,218,204,70,6,204,162,247,18,130,123,30,60,165,130,142,210,133,91,127,117,71,38,145,172,7,5,16,220,222,111,98,141,239,208,125,26,238,28,0,216,89,13,7,119,134,194,75,41,67,174,1,217,80,101,40,26,59,28,59,46,108,138,38,157,167,28,234,73,177,42,42,102,108,26,181,27,178,42,43,52,28,110,117,198,173,176,178,101,225,150,36,139,108,105,10,237,222,3,143,126,18,144,115,74,56,114,134,231,159,212,62,126,80,173,216,167,4,81,18,52,17,144,218,32,139,207,104,128,229,99,84,120,31,87,227,154,91,196,63,123,111,125,36,52,57,168,113,150,189,204,24,104,196,237,86,163,68,197,202,170,212,191,81,193,111,255,162,181,202,156,146,196,96,16,118,117,55,71,156,31,163,242,204,239,11,150,27,126,115,154,107,247,134,158,125,255,146,35,183,209,36,116,87,215,172,5,251,133,114,254,141,195,6,145,4,111,182,167,74,154,152,68,18,146,88,106,200,154,15,176,94,86,66,178,101,219,35,188,129,66,28,41,110,174,53,88,174,64,191,206,127,48,126,214,216,93,119,2,166,99,181,222,29,218,28,195,219,125,44,50,16,99,174,225,51,133,120,184,159,168,75,242,162,124,255,81,25,153,109,69,220,176,4,237,196,233,19,8,240,160,39,122,81,29,188,144,249,170,174,137,30,10,93,133,151,199,248,175,38,41,144,229,245,149,25,240,138,179,114,182,84,50,103,95,31,199,31,87,208,203,199,135,49,211,43,52,36,74,59,37,22,136,171,244,126,18,251,39,159,241,66,206,127,149,159,182,143,232,199,136,46,150,32,51,221,74,22,102,93,22,44,132,140,199,43,69,249,77,75,140,70,4,252,98,235,77,190,125,18,56,21,10,244,42,2,246,62,127,241,123,137,22,247,219,177,160,84,18,10,84,97,251,127,102,16,209,181,100,94,56,238,209,207,76,189,95,15,165,139,143,189,96,225,55,112,178,27,218,198,223,251,52,123,94,130,220,142,216,116,237,18,254,49,59,128,41,29,15,179,164,85,76,167,166,151,39,221,2,190,68,167,26,177,114,141,4,67,25,69,182,38,166,160,27,151,148,108,48,227,60,112,48,22,159,76,127,251,63,254,177,113,217,197,95,179,109,128,138,99,27,249,10,174,155,129,80,39,165,252,85,60,131,183,98,107,68,207,19,233,231,55,225,126,77,49,53,145,203,113,29,208,64,237,182,229,165,7,11,169,106,253,116,141,200,62,16,38,121,55,148,91,83,160,140,126,121,12,79,189,72,172,31,243,240,209,229,32,220,91,229,81,94,247,121,153,151,232,182,171,198,50,31,152,245,172,151,130,55,62,125,38,155,229,78,207,148,201,2,78,63,119,107,168,78,139,141,163,177,191,239,141,39,182,174,40,76,226,62,125,209,6,6,34,37,147,85,204,103,51,191,36,248,17,175,20,1,53,16,35,143,237,177,125,86,29,219,235,20,121,205,59,5,250,107,109,32,224,30,152,143,113,151,95,85,19,254,164,135,124,68,136,199,29,31,244,91,10,84,127,101,210,70,226,195,140,70,166,54,217,165,84,42,165,175,100,234,124,121,105,53,101,118,174,101,220,147,68,161,37,0,182,220,142,221,155,230,115,164,10,214,208,120,91,152,66,27,81,184,48,84,70,7,128,153,217,218,249,226,70,130,200,156,61,227,21,164,137,193,221,119,10,134,204,23,20,17,90,94,105,204,39,99,1,64,153,45,213,19,247,97,194,49,35,125,255,195,139,63,209,175,208,147,189,244,204,24,211,99,142,18,92,130,254,182,231,235,93,10,127,175,87,35,62,110,137,184,39,114,200,150,11,190,40,162,168,223,203,110,242,192,234,26,11,54,155,38,48,79,109,101,119,165,187,223,5,20,168,171,241,20,243,108,199,3,155,69,244,149,0,187,110,12,233,42,151,189,139,133,104,3,30,16,200,69,4,123,103,144,12,106,182,1,127,91,125,158,12,144,238,232,209,101,159,56,163,240,179,50,169,120,219,176,87,77,45,247,153,190,82,132,50,137,209,97,19,35,247,161,62,77,16,71,152,72,61,50,99,157,154,56,58,175,27,73,121,229,195,228,132,69,233,169,100,21,123,17,3,164,6,146,106,196,29,3,250,217,164,23,171,203,14,242,239,249,169,116,138,209,98,113,181,122,35,162,216,46,230,4,155,142,118,216,232,229,28,12,158,153,126,149,171,172,231,99,211,57,114,136,183,114,74,35,233,115,127,253,157,38,49,136,141,25,161,255,232,110,101,208,166,186,226,12,185,19,155,53,93,155,39,161,7,124,213,52,223,125,211,242,253,22,13,131,115,167,198,188,90,209,63,224,92,112,118,220,165,31,164,43,58,197,77,17,247,77,164,74,77,218,18,187,41,76,189,127,98,18,226,231,71,115,236,68,183,111,50,168,88,247,9,123,65,180,88,74,44,101,101,173,11];class t1e extends SL{constructor(n,i,c){super(n,e1e,i,c)}}const n1e=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,165,108,122,254,125,130,229,55,109,113,11,210,238,163,213,86,116,156,248,215,63,20,48,173,31,55,133,18,105,32,16,204,35,128,38,212,87,200,97,114,40,12,210,193,171,59,33,158,108,14,75,228,74,65,32,57,192,112,156,234,250,140,189,40,20,6,230,135,52,17,200,123,68,183,44,215,187,234,2,13,169,234,94,115,60,6,107,224,118,254,88,2,235,134,36,120,5,85,94,126,222,223,101,105,227,147,199,64,185,246,143,183,210,30,37,127,226,79,156,118,147,208,131,51,248,232,217,206,181,218,58,61,112,244,227,68,45,41,206,69,12,45,163,205,75,6,23,167,145,250,237,92,84,164,240,253,216,54,85,7,108,62,255,42,217,3,27,0,196,94,28,241,120,80,92,89,135,228,125,2,3,242,39,116,64,248,216,177,122,66,178,180,9,7,33,186,208,213,188,59,78,243,95,123,28,142,45,99,130,7,167,194,156,238,199,10,71,141,251,221,158,16,255,38,181,36,184,20,136,240,55,27,51,191,82,105,55,97,78,74,121,191,161,91,126,105,103,174,139,223,145,150,120,156,240,252,182,105,104,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,201,211,39,203,146,225,246,252,21,161,250,188,137,190,42,4,90,126,211,171,240,113,67,28,92,57,77,200,125,224,19,178,142,112,202,5,233,229,128,235,105,239,102,52,179,224,87,45,68,211,10,187,9,38,190,86,25,43,175,56,231,11,108,220,36,129,131,19,93,163,239,169,118,205,50,77,121,139,139,141,197,170,20,44,39,19,97,205,228,8,106,67,210,135,111,127,141,185,175,123,26,226,42,29,217,16,99,9,46,157,232,22,3,105,174,73,144,23,110,55,84,46,4,116,39,113,205,58,158,242,7,208,75,162,55,115,35,52,124,235,114,178,55,43,98,17,100,33,134,237,190,230,60,184,192,104,146,52,58,79,174,180,81,155,114,0,153,113,90,51,86,150,254,136,205,104,39,11,190,187,233,80,81,81,56,18,222,148,116,155,156,33,132,226,127,84,34,83,28,249,153,18,197,10,116,102,125,45,47,36,235,46,212,166,209,3,125,132,237,124,163,68,197,202,232,152,234,75,235,103,248,160,241,213,151,144,130,37,23,51,48,55,12,227,31,163,242,251,245,22,129,77,20,35,150,20,181,203,138,69,233,215,109,178,209,52,85,96,221,179,56,249,138,111,250,141,134,95,152,92,109,183,174,104,151,156,31,66,211,10,57,141,167,18,177,27,126,74,252,29,143,121,173,203,8,27,44,123,148,57,88,163,68,228,158,62,98,121,192,228,94,92,72,241,33,230,173,0,197,1,194,144,111,91,60,0,106,181,203,51,133,120,250,158,184,93,216,184,126,253,21,22,155,99,80,205,227,69,231,141,165,71,70,252,223,105,51,93,22,165,135,233,177,164,139,53,5,85,151,134,214,165,249,100,24,186,207,245,149,68,218,204,252,32,190,90,48,76,57,31,201,15,52,130,135,152,206,63,198,100,126,36,2,104,116,0,160,163,186,2,91,165,57,149,163,12,239,121,152,209,224,136,248,135,136,46,150,32,51,154,6,105,0,71,30,44,175,147,139,34,91,184,78,31,145,18,3,250,122,166,47,252,109,19,40,10,123,163,99,76,133,119,37,180,38,207,79,171,185,188];class r1e extends SL{constructor(n,i,c){super(n,n1e,i,c)}}const i1e=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,160,96,121,255,120,207,227,114,120,38,72,149,145,165,227,75,122,158,250,232,46,34,52,135,9,30,144,17,110,126,110,130,71,156,46,210,67,202,51,119,97,3,211,214,227,45,109,151,97,21,10,229,53,80,26,51,202,119,128,230,197,140,135,40,14,88,128,202,95,21,208,96,83,185,98,216,242,224,15,25,224,233,86,96,46,80,120,220,48,187,86,30,240,140,46,95,81,48,90,117,140,177,51,107,235,158,137,5,241,191,154,149,219,30,126,85,175,10,216,63,139,216,151,122,251,224,202,220,227,221,53,122,34,213,224,94,45,14,200,68,31,61,175,208,17,120,82,244,138,208,165,21,19,236,232,180,217,50,74,70,126,114,227,62,192,124,9,85,148,33,77,255,117,75,102,87,151,255,87,74,74,181,111,108,9,249,220,174,59,80,254,168,29,30,94,171,133,133,195,105,64,254,68,65,18,158,54,73,203,65,175,151,170,236,138,17,119,128,237,214,189,28,250,38,149,97,242,81,212,254,57,18,120,155,64,96,108,75,78,74,121,191,243,30,42,60,103,165,196,160,195,216,99,182,173,214,182,105,53,231,3,45,212,144,101,217,65,141,44,230,125,151,154,123,57,134,223,98,133,156,238,137,181,80,175,230,167,131,180,13,69,77,44,156,165,252,14,27,85,71,1,82,196,64,243,26,167,146,98,201,6,195,247,200,224,44,177,104,109,187,231,83,118,28,159,92,179,28,14,162,81,84,21,168,34,156,21,127,215,88,218,208,11,92,161,239,239,82,221,59,86,83,201,199,216,151,139,23,54,39,52,103,204,247,24,102,94,157,138,42,49,131,183,208,50,95,236,54,6,211,26,68,72,56,212,134,24,91,114,132,1,217,80,38,47,29,47,0,107,102,99,129,33,140,243,74,251,89,247,103,12,114,58,113,240,72,188,39,48,72,89,45,102,206,245,247,231,56,167,129,122,222,47,40,78,227,159,64,206,34,127,203,127,87,40,108,152,238,147,231,46,104,89,182,180,232,86,89,91,57,10,222,202,59,199,135,60,199,189,40,84,125,28,84,162,210,91,143,34,106,117,118,3,125,126,237,60,131,173,153,69,49,212,204,117,163,31,239,202,232,152,234,3,162,32,176,184,184,196,154,131,144,115,6,53,122,55,69,166,19,230,183,175,244,1,156,11,37,121,134,121,152,142,158,125,229,150,44,183,216,109,7,65,222,169,56,222,140,110,233,157,138,66,208,6,111,166,188,76,208,222,4,104,211,10,57,141,243,65,228,86,85,88,169,91,237,56,249,133,77,21,32,37,230,55,0,184,110,228,158,62,98,45,147,177,19,119,89,164,103,132,239,84,139,68,204,157,49,41,50,89,113,159,203,51,133,120,184,210,237,15,249,187,100,253,50,16,154,112,64,193,254,10,235,200,253,84,31,169,171,39,122,70,46,186,139,212,162,173,158,41,23,86,148,172,196,237,242,58,102,180,150,238,191,25,240,204,252,125,148,29,124,51,95,10,196,55,49,159,138,144,255,126,205,43,49,42,17,59,60,77,139,177,239,64,36,224,98,205,234,70,199,103,139,218,206,207,178,217,255,32,134,59,25,221,74,22,102,82,19,20,170,142,134,42,106,249,64,80,222,28,21,169,50,235,4,237,56,81,87,76,32,251,42,6,173,105,54,191,8,136,5,245,206,239,176,9,116,24];class o1e extends SL{constructor(n,i,c){super(n,i1e,i,c)}}const s1e=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,190,100,112,230,97,199,225,96,74,99,94,248,222,162,213,95,122,158,212,233,42,22,37,217,115,36,152,30,123,116,104,212,109,129,41,220,77,213,97,124,45,4,219,197,171,40,18,149,104,20,4,248,102,64,9,50,217,124,131,180,188,159,170,63,1,84,130,150,117,14,212,118,67,165,97,207,242,251,15,30,187,188,77,79,122,67,101,252,109,244,82,37,191,227,35,114,87,57,71,99,218,155,54,101,239,138,197,13,226,228,176,157,158,87,98,55,251,79,150,64,138,200,135,40,132,135,207,146,252,222,57,58,111,151,225,78,59,36,210,70,29,121,160,210,31,109,67,167,194,177,236,91,108,164,229,130,211,59,66,93,18,107,226,54,210,51,8,77,217,19,73,187,33,30,59,9,135,162,49,5,11,225,111,119,11,247,218,129,115,83,205,170,21,4,69,210,133,134,245,109,15,177,9,81,81,203,105,42,158,12,255,151,165,230,205,5,92,196,251,211,187,27,214,43,186,91,233,85,192,229,15,71,38,220,20,38,101,44,78,7,60,251,186,75,103,108,53,166,220,186,208,194,120,207,230,159,248,22,32,142,124,96,157,222,60,191,65,145,6,239,125,151,147,50,58,130,207,110,131,223,231,137,238,28,182,216,167,198,191,37,67,76,1,144,232,218,79,72,28,65,101,43,216,64,253,16,173,179,123,140,27,233,245,199,230,36,181,102,114,247,162,18,34,20,212,25,171,24,28,143,80,94,40,167,34,209,61,117,130,1,198,196,7,21,252,180,255,92,128,119,9,48,156,138,136,151,143,23,44,52,3,40,197,228,31,123,67,163,140,32,54,204,187,149,80,19,255,82,120,195,12,110,65,56,212,143,22,78,44,234,72,140,29,118,103,18,36,7,122,50,37,139,47,142,243,25,208,88,237,126,50,103,127,19,183,29,169,29,1,55,23,100,32,129,239,243,160,61,178,197,117,199,45,57,26,165,135,92,218,59,0,197,54,13,96,40,141,212,221,131,103,46,22,228,191,167,73,20,86,62,11,147,217,116,205,203,110,134,249,51,6,123,23,86,231,157,8,144,83,126,115,118,35,96,36,229,36,220,228,143,71,45,223,129,48,236,5,145,202,188,208,184,70,241,104,255,188,181,146,210,206,144,53,77,101,120,38,8,245,80,230,165,160,183,83,202,79,127,57,214,126,242,150,208,40,239,148,35,163,201,97,74,70,214,181,63,240,147,33,253,149,140,77,197,82,126,189,231,7,196,212,80,14,151,24,57,144,243,81,234,66,24,19,236,2,137,121,246,129,65,7,99,110,174,54,74,182,81,234,142,37,72,110,220,255,64,119,10,188,111,191,228,1,205,9,204,143,56,62,125,84,106,225,131,97,192,43,240,157,161,75,168,247,44,175,65,81,192,48,21,157,167,80,191,130,161,75,85,186,174,42,117,1,68,252,204,138,254,203,152,21,13,64,144,195,207,238,229,54,103,247,159,245,211,85,191,141,168,32,234,85,46,118,12,5,199,4,19,217,203,202,156,33,143,114,116,60,66,40,58,77,208,237,171,26,72,175,114,205,248,87,137,62,210,143,151,197,167,210,241,122,150,104,122,154,2,70,102,83,19,36,141,136,199,42,79,229,71,86,194,109,31,236,80,166,17,230,109,1,40,28,46,224,56,20,230,47,100,254,116,208,76,169,157,241,175,3,70,85,31,38,245,58,33,80,145,237,8,22,71,224,158,156,31,249,81,87,247,230,199,237,96,167,123,63,243,79,156,206,203,160,54,124,68,253,215,132,235,57,185,92,238,55,59,210,104,71,26,183,180,71,12,255,224,192,65,154,72,244,8,164,10,248,46,207,30,92,1,80,244,31,189,138,88,216,218,63,100,227,116,57,119,94,135,5,126,255,32,191,163,61,209,194,88,248,112,139,173,43,69,134,3,160,151,137,25,98,239,166,19,123,208,180,31,120,30,191,75,183,179,126,180,125,92,107,105,206,138,28,67,139,3,188,230,184,255,121,13,181,45,160,114,202,194,123,87,55,124,97,164,82,95,232,216,117,62,5,90,176,82,167,52,160,153,174,168,105,146,91,248,81,79,249,97,138,133,170,245,229,132,61,5,149,224,246,194,213,61,12,109,44,136,235,95,219,133,220,27,93,36,93,124,180,81,141,152,220,170,163,229,197,124,171,232,48,70,251,106,119,150,20,16,49,119,247,42,132,36,76,254,124,177,66,175,9,1,39,92,127,195,171,198,34,2,64,144,179,72,40,151,110,89,229,42,125,33,238,16,220,228,51,203,8,1,68,145,253,133,118,93,163,129,22,13,248,65,12,4,63,101,210,70,170,138,203,14,246,54,194,195,27,107,241,175,35,171,49,52,106,121,45,36,152,85,215,132,78,167,34,18,167,245,152,133,134,170,120,182,10,146,191,37,2,205,47,125,20,203,44,88,81,32,150,223,220,218,238,254,30,212,167,221,115,156,82,226,137,220,221,97,3,139,202,33,9,27,26,126,40,215,25,126,9,82,208,49,217,14,161,81,196,61,60,87,254,213,194,81,216,161,151,209,166,222,230,24,128,117,140,92,4,203,254,170,253,249,88,90,112,226,18,44,122,39,158,158,56,69,204,159,5,179,51,197,233,139,216,102,226,206,248,15,78,112,214,126,67,28,40,38,98,190,178,206,67,94,245,254,160,101,176,32,157,26,132,83,252,228,87,242,32,127,160,112,210,224,133,149,115,41,30,16,200,69,89,81,77,144,12,106,182,73,54,28,53,195,28,216,179,179,136,35,141,102,234,177,240,34,186,106,145,245,3,84,48,251,157,245,11,217,111,227,138,42,67,114,211,177,37,103,16,71,152,72,117,123,36,213,202,56,124,227,84,8,45,229,149,165,214,69,244,169,55,68,62,94,104,228,74,205,123,222,17,7,172,158,227,74,206,149,67,175,171,251,185,121,151,223,63,35,229,32,49,190,209,120,137,69,213,214,19,150,187,177,28,12,158,153,126,149,171,167,234,120,129,109,32,157,180,75,66,56,233,115,127,230,157,32,34,143,156,31,230,168,174,125,118,195,249,243,165,81,246,10,144,15,103,139,55,173,7,59,136,69,172,54,132,165,140,78,77,230,33,169,129,188,71,209,109,161,8,57,57,199,143,31,164,43,58,130,1,110,145,31,229,13,46,149,94,244,106,76,238,105,107,1,183,177,10,61,225,94,185,116,58,183,95,225,22,119,19,248,28,13,123,125,108,158,64,184,77,245,153,162,217,227,208,41,185,211,235,41,153,181,54,166,165,11,154,55,21,184,209,192,249,44,164,160,29,229,159,82,156,198,241,183,114,83,137,186,151,148,31,21,197,216,145,32,13,50,22,241,137,39,71,28,142,160,215,107,221,45,202,104,227,110,186,12,150,145,240,51,49,44,196,115,224,238,149,189,134,99,67,241,62,157,240,114,247,195,26,200,141,97,147,249,23,150,174,10,13,219,81,73,58,242,96,250,243,15,49,218,58,230,104,252,175,150,123,86,185,84,90,198,6,36,0,99,72,28,166,238,115,231,171,249,179,71,174,68,156,227,17,198,79,73,142,99,144,20,80,62,80,191,142,46,71,9,243,6,8,214,116,72,190,106,161,19,185,100,9,187,64,94,86,203,174,156,245,222,95,54,30,148,19,11,50,112,96,61,237,159,173,7,154,127,175,79,48,97,89,78,126,66,171,204,158,195,27,226,205,222,157,89,251,90,125,37,212,27,97,3,141,247,175,50,121,7,187,68,196,181,202,167,189,57,84,81,222,23,27,84,130,176,98,66,240,207,18,23,28,163,163,194,45,37,129,202,170,97,189,0,81,238,0,39,199,163,35,211,206,247,65,29,116,242,67,102,235,13,136,232,230,114,146,187,7,254,142,26,121,16,237,5,160,201,114,94,178,199,95,212,241,45,112,180,188,72,86,114,189,155,149,149,163,210,112,101,12,69,225,75,202,223,28,242,90,215,156,169,224,245,135,128,92,148,217,131,208,255,25,135,117,136,5,104,185,249,161,228,214,16,105,204,9,182,135,153,220,101,244,160,207,58,182,118,185,240,57,245,123,13,112,182,106,229,220,90,29,86,215,96,147,232,2,55,131,225,137,68,245,89,141,252,97,3,129,155,216,223,98,116,45,78,85,141,161,74,215,7,150,171,225,59,78,221,152,236,14,117,100,208,158,86,13,185,124,87,157,111,40,187,182,124,173,71,173,23,199,52,155,190,134,11,23,64,25,215,39,115,231,173,77,72,114,54,252,116,178,59,221,106,241,119,254,30,226,241,204,233,113,197,96,146,0,41,67,3,231,126,12,218,202,22,171,114,249,176,134,160,19,216,31,229,118,226,62,242,126,126,42,127,130,68,218,218,81,202,106,217,191,25,177,82,97,81,36,232,137,58,90,216,190,117,235,20,194,144,76,178,27,213,13,208,18,29,118,126,49,98,203,179,128,237,100,32,242,189,212,6,210,210,188,161,205,13,124,119,13,215,112,41,183,176,215,168,210,182,111,1,115,2,239,141,8,177,124,112,48,197,2,239,11,99,4,36,77,69,47,244,19,153,61,19,2,96,176,7,112,122,131,169,25,189,116,171,49,12,121,162,79,154,74,251,50,233,182,63,180,224,118,49,253,21,20,16,31,144,184,93,174,231,244,183,13,49,225,189,211,73,185,49,110,142,25,226,45,176,233,204,74,33,16,205,88,131,92,157,170,175,68,170,61,53,116,165,16,27,182,160,181,87,241,15,151,85,107,76,167,129,25,172,127,184,138,153,222,228,125,64,44,45,32,12,227,148,106,152,83,240,166,54,235,32,190,12,242,164,123,189,53,194,141,104,43,202,110,4,168,119,245,232,179,178,198,1,224,87,86,160,31,19,140,233,102,191,204,4,98,138,163,191,106,24,213,47,208,82,137,132,131,16,253,84,25,144,90,159,148,16,196,84,166,61,160,101,229,227,93,118,59,87,66,16,128,59,96,131,250,20,184,150,205,91,227,201,62,35,79,180,172,173,85,197,106,153,238,229,60,204,65,193,230,94,101,177,134,6,165,53,171,142,208,155,2,11,4,202,127,54,17,142,117,227,121,128,204,192,147,147,92,189,5,224,148,72,18,83,101,126,124,228,153,242,123,229,247,92,221,6,73,227,250,87,167,194,129,187,73,38,185,109,217,240,193,88,50,178,180,151,54,197,187,137,190,166,233,1,103,204,88,31,127,185,29,65,1,29,254,223,14,83,167,215,114,248,30,173,89,173,187,69,5,105,117,15,106,94,173,63,227,25,230,190,136,168,177,175,107,91,126,254,34,188,25,118,48,12,226,130,153,162,57,47,181,212,79,160,97,64,157,246,90,53,43,149,76,102,15,195,107,58,242,84,172,29,81,198,113,81,251,138,182,154,111,30,171,129,56,17,45,214,153,112,117,203,174,40,38,234,236,32,4,112,225,26,187,195,246,252,9,218,69,160,223,178,54,148,81,8,134,151,75,248,63,224,240,48,75,250,221,85,46,100,50,3,70,64,102,111,160,155,233,59,147,184,57,61,6,126,79,176,16,185,94,166,33,135,78,42,75,140,208,140,44,153,187,64,103,119,160,236,16,239,74,218,219,212,207,110,53,30,76,248,40,111,98,44,20,113,204,233,109,135,96,107,39,163,203,125,45,157,152,71,239,175,174,159,147,80,111,93,38,253,228,154,225,181,101,12,241,127,65,49,189,5,85,151,237,213,143,14,104,138,54,52,27,4,132,67,35,156,86,157,73,16,229,222,245,110,79,165,179,56,179,53,218,229,100,58,87,149,48,231,64,63,115,67,3,172,6,186,115,154,60,53,214,152,149,89,234,37,143,82,255,64,28,183,93,112,39,70,185,57,0,199,9,61,175,219,41,76,37,176,82,125,65,53,160,214,105,62,153,244,222,96,205,6,178,85,41,240,113,0,96,149,38,3,195,18,152,41,246,3,103,29,110,134,30,101,75,46,103,199,184,20,230,8,55,120,4,229,168,35,43,7,28,161,143,87,27,87,79,255,186,44,195,158,155,181,119,81,172,217,107,95,98,55,243,186,66,105,48,224,123,232,84,156,20,10,156,208,204,52,34,228,136,97,242,200,246,211,67,202,40,241,91,92,253,9,54,72,131,221,106,178,32,44,182,4,225,193,37,20,249,249,231,10,206,18,71,254,221,187,172,88,204,6,127,138,102,7,208,75,147,219,199,177,79,36,170,101,207,177,109,95,143,217,41,199,80,183,201,2,254,12,55,23,198,14,255,69,245,138,155,129,227,167,168,130,156,135,14,96,93,48,99,143,107,126,92,117,143,112,108,193,228,84,13,41,186,27,172,92,201,149,116,19,112,197,116,209,128,102,1,55,152,177,28,37,34,50,83,41,199,74,178,59,111,67,118,35,252,36,33,87,28,170,17,215,47,90,154,124,137,15,14,211,59,75,59,30,77,0,49,37,225,191,87,101,127,214,227,160,99,174,234,82,148,235,16,241,219,147,170,127,221,250,116,39,218,156,72,227,172,55,0,79,188,76,51,222,232,24,36,62,94,154,3,61,230,146,114,253,0,128,58,253,90,72,211,242,38,39,133,153,161,119,105,195,152,225,208,105,140,80,217,186,196,157,21,116,230,116,139,25,159,143,118,128,77,201,238,247,228,15,168,4,133,148,21,148,12,44,241,7,115,17,129,176,202,46,130,122,129,235,141,223,85,21,199,65,181,169,52,174,161,153,62,25,164,115,213,89,138,199,103,79,200,165,135,249,244,27,209,178,240,129,211,61,9,111,157,147,119,36,119,255,110,130,84,49,210,225,247,100,26,121,127,163,160,26,79,99,24,77,65,32,178,109,36,27,253,173,110,183,11,14,211,57,130,254,124,104,165,219,31,70,97,14,194,39,61,26,141,125,228,126,194,184,101,160,204,106,128,144,106,103,171,18,246,129,220,85,172,151,123,5,73,155,192,175,91,157,239,61,237,116,170,65,233,56,19,49,114,168,190,3,214,53,250,90,213,244,88,101,30,229,248,124,15,71,141,27,172,235,21,129,211,72,61,172,112,170,128,135,96,196,221,255,27,176,105,188,183,121,33,37,149,53,131,226,233,29,167,234,218,109,53,185,152,36,248,53,61,235,78,21,201,214,210,163,12,251,187,45,188,137,126,127,237,92,234,91,240,225,38,194,57,213,251,237,171,30,99,52,14,49,84,101,252,237,7,166,122,114,32,107,32,207,239,136,168,178,12,11,241,233,230,146,132,18,83,233,41,172,17,6,161,42,113,87,40,255,185,1,146,128,5,240,126,131,71,42,54,124,205,2,122,71,30,222,229,40,134,142,102,97,239,151,177,1,230,231,49,123,219,28,129,91,152,112,13,154,81,197,226,255,112,158,178,177,55,181,108,138,185,245,29,186,21,73,188,209,154,200,89,116,235,198,144,36,87,248,22,7,200,122,7,148,44,42,87,140,238,204,95,231,252,0,136,0,22,39,70,123,125,165,113,227,172,146,163,128,158,36,52,91,19,36,245,27,150,138,141,11,67,239,224,65,24,116,101,7,39,46,142,172,164,243,148,0,33,226,59,47,203,137,156,241,66,250,157,30,204,101,143,134,98,238,155,226,25,184,136,219,89,100,193,11,143,71,139,243,230,151,0,249,1,78,26,32,93,104,157,67,97,164,248,86,124,146,93,74,222,228,167,55,53,100,135,216,109,13,64,37,106,177,200,200,182,92,251,69,31,243,89,80,198,14,132,203,72,103,28,104,217,24,97,223,113,11,29,178,191,210,46,162,255,68,99,8,237,213,162,152,193,183,121,203,19,108,182,29,86,26,192,103,220,103,205,154,179,197,9,22,73,127,175,146,38,119,210,0,24,180,21,245,215,204,91,186,119,138,183,239,15,155,231,248,133,39,24,101,144,236,10,230,54,174,227,73,21,110,10,160,241,232,131,14,212,127,232,59,122,65,146,54,163,9,189,190,121,88,170,62,194,14,204,152,245,38,131,37,91,81,72,114,29,115,239,182,56,44,156,159,177,180,82,160,93,97,86,183,236,50,95,85,39,71,181,225,152,143,63,123,117,34,44,109,160,166,229,240,91,138,102,54,180,173,44,50,80,42,124,7,50,124,211,239,21,94,197,185,239,213,107,142,64,95,124,125,17,180,97,189,101,52,48,19,112,12,70,9,212,177,54,118,66,84,147,236,248,26,124,95,103,135,254,124,49,112,186,99,120,90,8,194,191,88,57,242,65,61,10,104,246,197,252,19,159,58,194,75,173,242,103,8,115,84,69,238,149,26,15,159,182,141,132,119,70,29,53,20,143,46,163,204,6,236,59,45,185,172,89,119,83,38,144,36,222,96,151,26,99,195,163,170,133,92,159,214,53,150,116,90,176,69,145,130,15,172,140,217,215,101,163,115,161,65,101,8,7,183,113,213,134,58,175,130,251,143,173,248,168,135,60,159,30,194,68,208,119,120,2,40,178,227,247,161,77,47,136,46,244,163,72,65,158,25,225,195,61,132,182,204,177,186,200,81,2,65,105,212,72,94,203,232,217,182,123,251,228,160,1,161,204,123,20,37,1,77,208,179,45,149,181,122,102,190,123,213,164,231,41,216,130,234,248,208,251,252,220,84,209,67,47,61,220,5,142,162,26,236,121,142,248,132,255,65,122,203,196,102,191,187,2,195,127,255,193,92,49,91,186,154,39,156,29,211,172,49,104,245,114,153,223,211,199,249,35,130,160,128,0,152,176,183,20,236,113,193,108,26,255,11,237,102,133,245,94,115,114,10,89,229,214,221,99,149,30,99,37,246,10,26,26,39,92,123,170,73,211,127,227,54,30,86,133,159,112,225,91,148,100,174,149,75,143,14,140,20,44,64,212,5,243,8,116,63,30,97,42,123,20,73,212,85,207,83,122,27,251,233,84,10,17,236,232,83,200,127,119,143,163,204,220,167,59,231,20,106,186,222,191,8,40,234,21,25,180,13,116,250,152,224,174,75,3,205,38,173,215,236,151,185,121,254,244,154,239,17,53,106,164,61,49,116,216,118,94,150,35,181,26,238,66,49,211,221,132,146,166,115,39,136,36,205,230,179,31,197,51,148,165,109,38,70,37,148,52,44,209,250,98,58,246,225,103,198,101,26,25,196,207,8,166,21,88,252,175,253,10,88,107,157,19,225,61,12,246,221,37,239,186,167,137,142,135,222,128,174,62,95,216,38,141,157,45,232,97,217,173,203,234,116,129,69,206,189,94,221,12,54,139,186,247,184,16,200,121,244,104,8,7,35,111,47,188,10,140,92,73,143,206,203,72,122,184,20,102,197,130,64,150,63,96,239,8,132,111,217,84,91,198,32,43,100,138,241,15,160,42,190,253,193,184,164,124,29,210,96,67,224,221,182,29,218,129,149,29,128,174,98,88,88,125,56,40,255,120,5,0,87,174,42,150,90,112,201,183,169,19,57,195,191,12,58,244,235,132,25,145,72,146,214,8,125,100,135,12,5,102,97,248,174,24,159,90,33,43,187,6,61,212,241,225,190,219,252,197,123,129,164,108,123,55,230,4,153,166,105,234,15,85,216,23,56,32,3,41,110,68,146,172,133,202,98,41,7,47,152,35,255,168,106,241,226,222,77,244,52,185,65,252,227,32,66,38,11,172,60,28,28,103,84,1,1,205,182,190,28,189,102,253,43,1,191,148,116,10,227,18,81,93,80,239,157,232,215,180,163,165,161,109,177,71,150,244,144,208,160,110,22,174,60,206,43,103,121,55,103,114,115,173,238,13,10,227,251,41,176,216,158,229,216,55,234,128,128,20,167,106,181,86,163,130,215,110,149,191,10,227,215,8,214,154,178,181,15,19,0,247,250,97,74,43,157,55,94,174,41,41,9,199,97,20,91,32,18,10,43,98,240,247,203,20,250,117,160,44,229,202,187,64,54,124,15,184,169,129,27,160,240,26,61,255,60,166,60,144,209,84,55,187,186,168,13,124,125,29,17,100,249,227,62,205,78,179,163,168,139,168,21,38,83,239,151,74,43,66,2,92,72,71,94,216,134,238,20,45,158,213,164,73,57,80,47,198,184,130,223,227,71,132,133,235,177,85,174,142,124,172,200,54,229,40,126,60,76,92,216,153,56,241,174,66,141,90,226,3,30,68,234,71,187,163,112,146,255,22,143,170,204,3,127,179,81,139,160,37,77,246,128,220,196,158,153,73,177,65,199,119,29,197,144,130,248,206,155,253,108,213,124,7,223,221,162,146,134,242,65,99,162,107,120,247,214,207,96,150,169,131,208,218,221,28,24,112,208,23,1,130,142,232,56,104,45,33,158,95,255,123,31,74,76,120,178,155,213,6,195,164,8,8,69,241,197,127,83,169,21,167,19,94,143,252,33,159,248,241,170,153,147,1,149,199,201,131,170,79,236,212,209,143,107,98,24,123,56,33,193,85,247,64,225,135,210,78,145,57,16,145,71,170,20,133,87,235,4,166,239,100,82,235,81,50,223,9,193,52,49,86,129,190,196,82,165,107,63,115,161,98,33,20,193,29,42,151,205,252,124,72,245,48,181,67,7,13,21,127,59,226,188,144,129,112,244,192,121,213,80,42,196,1,13,107,108,78,0,40,121,225,148,237,234,209,216,238,9,147,226,254,96,89,212,72,193,106,75,135,74,227,67,255,92,191,81,188,124,226,149,152,142,15,159,195,238,114,55,255,166,157,230,59,148,170,166,151,65,213,104,253,253,112,150,82,147,137,27,214,100,247,65,81,92,47,86,217,7,45,120,81,130,31,236,243,76,78,3,45,105,172,220,71,48,220,94,196,249,163,193,133,50,236,205,20,55,2,63,14,127,69,113,212,204,12,58,79,89,86,29,61,199,201,64,149,6,144,182,150,129,31,18,167,120,248,82,107,25,143,128,27,161,28,25,153,183,217,238,78,186,106,92,27,202,219,165,96,0,216,234,169,73,101,39,182,113,217,240,170,116,172,221,250,233,48,49,242,83,227,92,181,184,72,230,180,21,15,108,135,25,38,153,25,124,227,26,149,73,236,39,211,244,149,58,183,132,26,223,219,174,144,117,233,219,165,205,157,159,222,184,52,47,241,201,123,65,24,44,55,215,177,168,250,179,115,190,227,123,158,163,179,224,69,196,66,207,254,243,101,221,193,140,250,4,28,222,52,96,138,160,33,218,64,118,214,234,201,152,148,91,178,111,107,144,142,6,182,102,72,188,34,213,181,26,223,58,255,103,81,17,47,169,11,245,224,123,148,215,237,186,107,75,152,90,202,166,22,149,197,5,246,238,78,76,229,106,199,94,127,195,0,45,82,6,159,103,96,138,231,71,46,107,59,216,39,43,12,221,27,214,56,155,145,66,187,169,250,235,78,211,179,239,183,198,163,93,5,196,24,174,143,225,106,139,89,98,13,127,207,184,194,30,1,165,198,169,8,197,118,86,163,221,138,23,209,61,116,79,99,233,43,130,60,244,85,229,243,172,123,148,200,120,192,127,211,52,11,159,41,95,212,230,188,169,156,137,29,212,12,148,168,148,133,243,44,241,139,127,24,246,220,227,125,209,97,60,52,162,192,146,49,161,92,138,112,189,128,59,126,125,46,207,60,79,231,174,152,209,68,223,205,2,38,14,91,116,159,255,28,27,178,248,164,104,158,79,69,214,234,157,12,75,163,83,253,245,202,61,213,176,6,197,230,29,208,166,253,194,254,235,29,141,241,70,249,15,62,0,148,163,135,52,122,40,96,87,31,179,152,51,216,133,184,122,198,203,60,115,218,191,193,16,178,25,148,252,112,104,103,252,36,92,221,28,179,43,199,198,151,128,100,252,217,161,249,34,201,172,118,52,180,252,104,7,223,44,116,102,212,21,40,224,184,55,163,210,21,207,161,239,51,54,155,41,133,18,67,48,3,165,130,251,4,79,214,57,72,130,157,212,144],a1e=[0,1,3,4,6,7,9,10,12,13,15,16,18,19,21,22,24,26,29,31,34,36,39,41,44,46,49,51,54,56,59,61,64,65,66,67,68,69,70,72,73,74,75,76,77,79,80,81,82,83,84,85,87,88,89,90,91,92,94,95,96,97,98,99,101,102,103,104,105,106,107,109,110,111,112,113,114,116,117,118,119,120,121,123,124,125,126,127,128,129,131,132,133,134,135,136,138,139,140,141,142,143,145,146,147,148,149,150,151,153,154,155,156,157,158,160,161,162,163,164,165,166,168,169,170,171,172,173,175,176,177,178,179,180,182,183,184,185,186,187,188,190,191,192,193,194,195,197,198,199,200,201,202,204,205,206,207,208,209,210,212,213,214,215,216,217,219,220,221,222,223,224,226,226,226,227,227,227,228,228,228,229,229,229,230,230,231,231,231,232,232,232,233,233,233,234,234,235,235,235,236,236,236,237,237,237,238,238,239,239,239,240,240,240,241,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],Ume=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,32,33,35,36,37,39,40,42,43,44,46,47,49,50,51,53,54,56,57,58,59,61,62,63,64,66,67,68,69,71,72,73,74,76,77,78,79,81,82,83,84,86,87,88,90,91,92,93,95,96,97,98,100,101,102,103,105,106,107,108,110,111,112,113,115,116,117,118,120,121,122,124,125,126,127,129,130,131,132,134,135,136,137,139,140,141,142,144,145,146,147,149,150,151,152,154,155,156,158,159,160,161,163,164,165,166,168,169,170,171,173,174,175,176,178,179,180,181,183,184,185,186,188,189,190,192,193,194,195,197,198,199,200,202,203,204,205,207,208,209,210,212,213,214,215,217,218,219,220,222,223,224,226,226,226,227,227,228,228,229,229,230,230,231,231,232,232,233,233,234,234,234,235,235,236,236,237,237,238,238,239,239,240,240,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],c1e=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,56,58,59,60,61,62,63,65,66,67,68,69,70,72,73,74,76,77,78,80,81,83,84,85,87,88,89,91,92,94,95,96,98,99,100,102,103,105,106,107,109,110,111,113,114,116,117,118,120,121,122,124,125,127,128,129,131,132,133,135,136,138,139,140,142,143,144,146,147,149,150,151,153,154,155,157,158,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,192,193,193,194,195,195,196,197,197,198,199,199,200,201,201,202,203,203,204,205,205,206,207,207,208,209,209,210,211,211,212,213,213,214,215,215,216,217,217,218,219,219,220,221,221,222,223,223,224,225,225,226,227,227,228,229,229,230,231,231,232,233,233,234,235,235,236,237,237,238,239,239,240,241,241,242,243,243,244,245,245,246,247,247,248,249,249,250,251,251,252,253,253,254,255];class u1e extends SL{constructor(n,i,c,h){super(n,s1e,c,h),Y(this,"inputTexture",void 0),Y(this,"lightLevel",.1),Y(this,"rednessLevel",.5),Y(this,"mskin_he_max",175/180*3.141593),Y(this,"mskin_he_min",115/180*3.141593),Y(this,"mskin_hc_max",173/180*3.141593),Y(this,"mskin_hc_min",116/180*3.141593),Y(this,"mskin_hc_axis",2.04203545),Y(this,"mfacts_rotate_c",0),Y(this,"mfacts_rotate_le",0),Y(this,"mfacts_rotate_ge",0),Y(this,"tab_addr",null),Y(this,"lutTextures",[]),this.inputTexture=i,this.init()}setUniforms(){const n=this.gl.getUniformLocation(this.program,"u_flipY"),i=this.gl.getUniformLocation(this.program,"u_denoiseLevel");this.gl.uniform1f(i,this.denoiseLevel),this.gl.uniform1f(n,1);const c=this.gl.getUniformLocation(this.program,"light");this.gl.uniform1f(c,this.lightLevel);const h=this.gl.getUniformLocation(this.program,"redness");this.gl.uniform1f(h,this.rednessLevel);const g=this.gl.getUniformLocation(this.program,"skin_he_max"),v=this.gl.getUniformLocation(this.program,"skin_he_min"),m=this.gl.getUniformLocation(this.program,"skin_hc_max"),C=this.gl.getUniformLocation(this.program,"skin_hc_min"),y=this.gl.getUniformLocation(this.program,"skin_hc_axis"),N=this.gl.getUniformLocation(this.program,"facts_rotate_c"),k=this.gl.getUniformLocation(this.program,"facts_rotate_le"),U=this.gl.getUniformLocation(this.program,"facts_rotate_ge");this.gl.uniform1f(g,this.mskin_he_max),this.gl.uniform1f(v,this.mskin_he_min),this.gl.uniform1f(m,this.mskin_hc_max),this.gl.uniform1f(C,this.mskin_hc_min),this.gl.uniform1f(y,this.mskin_hc_axis),this.gl.uniform1f(N,this.mfacts_rotate_c),this.gl.uniform1f(k,this.mfacts_rotate_le),this.gl.uniform1f(U,this.mfacts_rotate_ge);const V=this.gl.getUniformLocation(this.program,"u_originImage");this.gl.activeTexture(this.gl.TEXTURE2),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.uniform1i(V,2);const K=["lighten_lut"],$=[this.gl.TEXTURE3];for(let Z=0;Z<K.length;Z++){const ye=this.gl.getUniformLocation(this.program,K[Z]);this.gl.activeTexture($[Z]),this.gl.bindTexture(this.gl.TEXTURE_2D,this.lutTextures[Z]),this.gl.uniform1i(ye,Z+3)}}setParameters(n){void 0!==n.denoiseLevel&&(this.denoiseLevel=n.denoiseLevel),void 0!==n.lightLevel&&(this.lightLevel=n.lightLevel),void 0!==n.rednessLevel&&(this.rednessLevel=n.rednessLevel,this.updateRedness(this.rednessLevel)),n.lighteningContrastLevel&&this.updateLut(n.lighteningContrastLevel)}init(){this.tab_addr=new Uint8Array(Ume);const n=[this.tab_addr],i=[256],c=[1];for(let h=0;h<n.length;h++){const g=this.gl.createTexture();if(!g)throw new ea(_t.WEBGL_INTERNAL_ERROR,"create lut texture failed");this.gl.bindTexture(this.gl.TEXTURE_2D,g),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,i[h],c[h],0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,n[h]),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.lutTextures.push(g)}}updateRedness(n){let c,h,g=n,v=g;g>1&&(g=1),g<0&&(g=0),v>1&&(v=1),v<0&&(v=0),this.mfacts_rotate_c=.8*g,v<.8&&(v=0),this.mskin_he_max=175/180*3.141593,this.mskin_hc_max=173/180*3.141593,this.mskin_he_min=(115-4*v)/180*3.141593,this.mskin_hc_min=(116-4*v)/180*3.141593,this.mskin_hc_axis=(117-4*v)/180*3.141593,this.mskin_hc_axis<this.mskin_hc_min&&(this.mskin_hc_axis=this.mskin_hc_min),this.mskin_hc_min<1.5707965&&(this.mskin_hc_min=1.5707965),this.mskin_hc_axis<1.5707965&&(this.mskin_hc_axis=1.5707965),this.mskin_he_min<1.5707965&&(this.mskin_he_min=1.5707965),this.mskin_hc_max>3.141593&&(this.mskin_hc_max=3.141593),this.mskin_hc_axis>3.141593&&(this.mskin_hc_axis=3.141593),this.mskin_he_max>3.141593&&(this.mskin_he_max=3.141593),c=this.mskin_he_max-this.mskin_hc_max,h=this.mskin_hc_max-this.mskin_hc_axis,this.mfacts_rotate_ge=c>.01?this.mfacts_rotate_c*h/c:this.mfacts_rotate_c,c=this.mskin_hc_min-this.mskin_he_min,h=this.mskin_hc_axis-this.mskin_hc_min,this.mfacts_rotate_le=c>.01?this.mfacts_rotate_c*h/c:this.mfacts_rotate_c}updateLut(n){let i=null;if(0===n&&(i=Ume),1===n&&(i=c1e),2===n&&(i=a1e),!i)throw new ea(_t.WEBGL_INTERNAL_ERROR,"invalid ylut_table value:"+n);this.tab_addr=new Uint8Array(i);const c=[this.tab_addr],h=[256],g=[1];for(let v=0;v<c.length;v++)this.gl.bindTexture(this.gl.TEXTURE_2D,this.lutTextures[v]),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,h[v],g[v],0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,c[v])}}class l1e{constructor(){Y(this,"gl",null),Y(this,"canvas",null),Y(this,"programs",[]),Y(this,"commonProgram",null),Y(this,"inputTexture",null),Y(this,"outputTextures",[]),Y(this,"fbos",[]),Y(this,"originalFrameWidth",0),Y(this,"originalFrameHeight",0),Y(this,"enableBeauty",!1),Y(this,"denoiseLevel",5),Y(this,"lightLevel",.35),Y(this,"rednessLevel",.5),Y(this,"lighteningContrastLevel",1)}setEnableBeauty(n){this.enableBeauty=!!n}init(n,i,c){if(!dy().supportWebGL)throw new ea(_t.NOT_SUPPORTED,"your browser is not support webGL");if(this.gl=c.getContext("webgl"),!this.gl)throw new ea(_t.WEBGL_INTERNAL_ERROR,"can not get webgl context");if(this.initGL(n,i),!this.inputTexture)throw new ea(_t.WEBGL_INTERNAL_ERROR,"can not find input texture");this.canvas=c,this.programs.push(new Bme(this.gl)),this.programs.push(new t1e(this.gl,n,i)),this.programs.push(new r1e(this.gl,n,i)),this.programs.push(new o1e(this.gl,n,i)),this.programs.push(new u1e(this.gl,this.inputTexture,n,i)),this.commonProgram=this.programs[0].program,this.setDenoiseLevel(this.denoiseLevel),this.setLightLevel(this.lightLevel),this.setRednessLevel(this.rednessLevel),this.setContrastLevel(this.lighteningContrastLevel)}render(n){if(!this.gl||!this.commonProgram||!this.canvas)return void de.warning("video effect manager is not init!");let i=0;if(this.originalFrameHeight===n.videoWidth&&this.originalFrameWidth===n.videoHeight)i=2;else if(this.originalFrameHeight!==n.videoHeight||this.originalFrameWidth!==n.videoWidth){if(de.debug("beauty effect: resolution changed ".concat(this.originalFrameWidth,"x").concat(this.originalFrameHeight," -> ").concat(n.videoWidth,"x").concat(n.videoHeight)),0===n.videoHeight||0===n.videoWidth)return void de.debug("beauty effect: skip 0 resolution frame");this.canvas.width=n.videoWidth,this.canvas.height=n.videoHeight,n.setAttribute("width",n.videoWidth.toString()),n.setAttribute("height",n.videoHeight.toString()),this.release(),this.init(n.videoWidth,n.videoHeight,this.canvas)}this.gl.viewport(0,0,n.videoWidth,n.videoHeight),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,n);const c=this.enableBeauty?this.programs.length-1:0;for(let g=0;g<=c;g++){const v=this.programs[g].program;this.gl.useProgram(v);const m=this.gl.getUniformLocation(v,"u_image");this.programs[g].setUniforms(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fbos[i+g%2]),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.outputTextures[i+g%2]),this.gl.uniform1i(m,0)}this.gl.useProgram(this.commonProgram);const h=this.gl.getUniformLocation(this.commonProgram,"u_flipY");this.gl.uniform1f(h,-1),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6)}setDenoiseLevel(n){this.programs.forEach(i=>{i instanceof SL&&i.setParameters({denoiseLevel:n})}),this.denoiseLevel=n}setLightLevel(n){this.programs.forEach(i=>{i instanceof SL&&i.setParameters({lightLevel:n})}),this.lightLevel=n}setRednessLevel(n){this.programs.forEach(i=>{i instanceof SL&&i.setParameters({rednessLevel:n})}),this.rednessLevel=n}setContrastLevel(n){this.programs.forEach(i=>{i instanceof SL&&i.setParameters({lighteningContrastLevel:n})}),this.lighteningContrastLevel=n}setSize(n,i){this.programs.forEach(c=>{c instanceof SL&&c.setSize(n,i)})}release(){this.gl=null,this.commonProgram=null,this.inputTexture=null,this.programs=[],this.outputTextures=[],this.fbos=[]}initGL(n,i){if(!this.gl)throw new ea(_t.WEBGL_INTERNAL_ERROR,"can not find webgl context");this.inputTexture=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR);for(let c=0;c<4;c++){const h=this.gl.createTexture();if(!h)throw new ea(_t.WEBGL_INTERNAL_ERROR,"create texture failed");this.gl.bindTexture(this.gl.TEXTURE_2D,h),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),c<2?this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,n,i,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null):this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,i,n,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null);const g=this.gl.createFramebuffer();if(!g)throw new ea(_t.WEBGL_INTERNAL_ERROR,"create frame buffer failed");this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,g),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,h,0),this.outputTextures.push(h),this.fbos.push(g)}this.gl.viewport(0,0,n,i),this.originalFrameWidth=n,this.originalFrameHeight=i}}class d1e{constructor(){Y(this,"targetFrameRate",0),Y(this,"recordedFrameCount",0),Y(this,"recordingTime",2),Y(this,"recordID",void 0)}startRecordBeautyEffectOutput(n){var i=arguments,c=this;return l(function*(){let h=i.length>1&&void 0!==i[1]?i[1]:4;if(c.recordID)throw new ea(_t.UNEXPECTED_ERROR,"another beauty effect recording is in progress");const g=x0(6,"");return c.recordID=g,c.targetFrameRate=n,c.recordedFrameCount=0,c.recordingTime=h,yield s_(1e3*c.recordingTime),c.recordID!==g?(c.recordID=void 0,!0):(c.recordID=void 0,c.recordedFrameCount<c.targetFrameRate*c.recordingTime/2?(de.warning("detect beauty effect overload, current framerate",c.recordedFrameCount/2),!1):(de.debug("beauty effect current framerate",c.recordedFrameCount/2),!0))})()}stopRecordBeautyEffectOutput(){this.targetFrameRate=0,this.recordedFrameCount=0,this.recordID=void 0}addFrame(){this.recordID&&(this.recordedFrameCount+=1)}}class h1e extends Pme.exports.VideoProcessor{constructor(){super(),Y(this,"name","BeautyProcessor"),Y(this,"fps",15),Y(this,"canvas",void 0),Y(this,"video",void 0),Y(this,"manager",void 0),Y(this,"overloadDetector",new d1e),Y(this,"stopChromeBackgroundLoop",null),Y(this,"onOverload",void 0),Y(this,"stopLoop",void 0),Y(this,"lastRenderTime",0),this.fps=30,this.manager=new l1e,this._enabled=!1}onEnableChange(n){var i=this;return l(function*(){i.manager.setEnableBeauty(n),i.context&&i.inputTrack&&(n?yield i.startEffect(i.inputTrack,i.context):yield i.stopEffect(i.inputTrack,i.context))})()}setBeautyEffectOptions(n){var i=this;return l(function*(){if(void 0!==(c=n).smoothnessLevel&&yp(c.smoothnessLevel,"options.smoothnessLevel",0,1,!1),void 0!==c.lighteningLevel&&yp(c.lighteningLevel,"options.lighteningLevel",0,1,!1),void 0!==c.rednessLevel&&yp(c.rednessLevel,"options.rednessLevel",0,1,!1),void 0!==c.lighteningContrastLevel&&qy(c.lighteningContrastLevel,"options.lighteningContrastLevel",[0,1,2]),void 0!==n.smoothnessLevel){const c=Math.max(.1,10*n.smoothnessLevel);i.manager.setDenoiseLevel(c)}var c;if(void 0!==n.lighteningLevel){const c=Math.max(.1,n.lighteningLevel/2);i.manager.setLightLevel(c)}if(void 0!==n.rednessLevel){const c=Math.max(.01,n.rednessLevel);i.manager.setRednessLevel(c)}void 0!==n.lighteningContrastLevel&&i.manager.setContrastLevel(n.lighteningContrastLevel)})()}onTrack(n,i){var c=this;return l(function*(){var h;c.video&&c.enabled&&(null===(h=c.stopLoop)||void 0===h||h.call(c),yield c.stopEffect(n,i)),yield c.startEffect(n,i)})()}startEffect(n,i){var c=this;return l(function*(){if(!c.enabled)return;const h=Yp(),g=yield c.renderWithWebGL(n);c.output(g,i),de.info("start video effect, output:",c.outputTrack),c.overloadDetector.startRecordBeautyEffectOutput(c.fps).then(C=>{C||c.onOverload&&c.onOverload()});let v=!1;c.stopLoop=()=>{v=!0};const m=()=>{c.enabled&&!v&&requestAnimationFrame(m);const C=Date.now(),y=1e3/c.fps,N=c.lastRenderTime?C-c.lastRenderTime:y;N<y||(c.lastRenderTime=C-(N-y),c.video&&c.video.paused&&c.video.play(),c.enabled&&c.video&&(c.manager.render(c.video),c.outputTrack&&c.outputTrack.requestFrame&&c.outputTrack.requestFrame(),c.overloadDetector.addFrame()))};requestAnimationFrame(m),h.name===Kp.CHROME&&document.addEventListener("visibilitychange",()=>{document.hidden?c.stopChromeBackgroundLoop=ble(()=>{c.enabled&&c.video&&c.manager.render(c.video),c.outputTrack&&c.outputTrack.requestFrame&&c.outputTrack.requestFrame(),c.overloadDetector.addFrame()},c.fps):c.stopChromeBackgroundLoop&&(c.stopChromeBackgroundLoop(),c.stopChromeBackgroundLoop=null)},!1)})()}renderWithWebGL(n){var i=this;return l(function*(){i.canvas&&(i.canvas.remove(),i.canvas=void 0),i.video&&(i.video.remove(),i.video=void 0),i.canvas=document.createElement("canvas"),i.video=document.createElement("video"),i.video.setAttribute("autoplay",""),i.video.setAttribute("muted",""),i.video.muted=!0,i.video.setAttribute("playsinline",""),i.video.setAttribute("style","display:none"),i.video.srcObject=new MediaStream([n]);const c=new _l(C=>{const y=()=>{i.video&&i.video.removeEventListener("playing",y),C(void 0)};i.video&&i.video.addEventListener("playing",y)});i.video.play(),yield c;const h=n.getSettings(),g=h.width||i.video.videoWidth,v=h.height||i.video.videoHeight;if(h.frameRate&&i.fps!==h.frameRate&&(i.fps=h.frameRate,de.debug("beauty video processor: set fps to",i.fps)),de.debug("beauty video processor: width ".concat(g," height ").concat(v)),!g||!v)throw new ea(_t.BEAUTY_PROCESSOR_INTERNAL_ERROR,"can not get track resolution");i.canvas.width=g,i.canvas.height=v,i.video.setAttribute("width",g.toString()),i.video.setAttribute("height",v.toString()),i.manager.init(g,v,i.canvas);const m=dy();return i.canvas.captureStream(m.supportRequestFrame?0:i.fps).getVideoTracks()[0]})()}stopEffect(n,i){var c=this;return l(function*(){de.info("stop video effect"),c.overloadDetector.stopRecordBeautyEffectOutput(),c.manager.release(),c.canvas&&c.canvas.remove(),c.video&&c.video.remove(),c.canvas=void 0,c.video=void 0,c.output(n,i)})()}}function Nde(e){const n={};if(e.facingMode&&(n.facingMode=e.facingMode),e.cameraId&&(n.deviceId={exact:e.cameraId}),!e.encoderConfig)return n;const i=C2(e.encoderConfig);return n.width=i.width,n.height=i.height,!Lce()&&i.frameRate&&(n.frameRate=i.frameRate),Yp().name===Kp.EDGE&&"object"==typeof n.frameRate&&(n.frameRate.max=60),h0()&&(n.frameRate={ideal:30,max:30}),n}function f1e(e){const n={};e.screenSourceType&&(n.mediaSource=e.screenSourceType),e.extensionId&&RW()&&(n.extensionId=e.extensionId),e.electronScreenSourceId&&(n.sourceId=e.electronScreenSourceId);const i=e.encoderConfig?cQ(e.encoderConfig):null;return n.mandatory={chromeMediaSource:"desktop",maxWidth:i?i.width:void 0,maxHeight:i?i.height:void 0},i&&i.frameRate&&("number"==typeof i.frameRate?(n.mandatory.maxFrameRate=i.frameRate,n.mandatory.minFrameRate=i.frameRate):(n.mandatory.maxFrameRate=i.frameRate.max||i.frameRate.ideal||i.frameRate.exact||void 0,n.mandatory.minFrameRate=i.frameRate.min||i.frameRate.ideal||i.frameRate.exact||void 0),n.frameRate=i.frameRate),i&&i.width&&(n.width=i.width),i&&i.height&&(n.height=i.height),n}function Fme(e){const n={};if(Lce()||(void 0!==e.AGC&&(n.autoGainControl=e.AGC),void 0!==e.AEC&&(n.echoCancellation=e.AEC),void 0!==e.ANS&&(n.noiseSuppression=e.ANS,RW()&&e.ANS&&(n.googHighpassFilter=e.ANS))),e.encoderConfig){const i=zT(e.encoderConfig);n.channelCount=i.stereo?2:1,n.sampleRate=i.sampleRate,n.sampleSize=i.sampleSize}return e.microphoneId&&(n.deviceId={exact:e.microphoneId}),Ute()&&(n.sampleRate=void 0),n}var zQ,Ure;(function(e){e.COVERED="COVERED",e.POSITION="POSITION",e.SIZE="SIZE",e.STYLE="STYLE"})(zQ||(zQ={})),function(e){e.UNMOUNTED="UNMOUNTED",e.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT"}(Ure||(Ure={}));var jme,Qme,Vme,Gme,Hme,qme,Wme,Kme,Yme,Jme,zme,Xme,$me,Zme,eEe,tEe,nEe,A0,rEe,iEe,oEe,sEe,aEe,cEe,uEe,x2,lEe=new class{constructor(){Y(this,"_clientSize",null),Y(this,"getClientWidth",()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth),Y(this,"getClientHeight",()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight),Y(this,"getStyle",e=>window.getComputedStyle(e,null)),Y(this,"checkCssVisibleProperty",e=>{let n=!0;const i=this.getStyle(e),{display:c,visibility:h,opacity:g,filter:v}=i;return("none"===c||["hidden","collapse"].includes(h)||Number(g)<.1)&&(n=!1),!!n&&(v&&v.split(" ").filter(m=>{const C=m.split("(")[0];return["brightness","blur","opacity"].includes(C)}).map(m=>{const[C,y]=m.split(/\(|\)/);return[C,Number(y.match(/^[0-9\.]+/))]}).forEach(m=>{const[C,y]=m;switch(C){case"brightness":(y<.1||y>3)&&(n=!1);break;case"blur":y>3&&(n=!1);break;case"opacity":y<.1&&(n=!1)}}),n)}),Y(this,"checkPropertyUpToAllParentNodes",(e,n)=>{let i=!0,c=!0;let g=e;for(;g&&c;)n(g)||(i=!1,c=!1),g=g.parentElement,g||(c=!1);return i}),Y(this,"checkActualCssVisibleIncludeInherit",e=>this.checkPropertyUpToAllParentNodes(e,this.checkCssVisibleProperty)),Y(this,"getSizeAboutClient",e=>{const{width:n,height:i,left:c,right:h,top:g,bottom:v}=e.getBoundingClientRect(),m=this.getClientWidth(),C=this.getClientHeight();return{width:n,height:i,left:c,right:h,top:g,bottom:v,clientWidth:m,clientHeight:C,clientMin:Math.min(m,C)}}),Y(this,"checkActualSize",()=>{const{width:e,height:n,clientMin:i}=this._clientSize;return this.checkSizeIsVisible(e,n,i)}),Y(this,"elementFromPoint",(e,n)=>document.elementFromPoint?document.elementFromPoint(e,n):null),Y(this,"checkCoverForAPoint",(e,n,i)=>{const c=this.elementFromPoint(e,n);return null!==c&&c!==i}),Y(this,"getPointPositionList",()=>{const{width:e,height:n,left:i,top:c}=this._clientSize,h=e/6,g=n/6,v=[],m=10**6;for(let C=0;C<5;C++)for(let y=0;y<5;y++)v.push({x:(i*m+(0===C?.1:4===C?(h*C*m-1e5)/m:h*C)*m)/m,y:(c*m+(0===y?.1:4===y?(g*y*m-1e5)/m:g*y)*m)/m});return[...v]}),Y(this,"checkElementCover",e=>this.getPointPositionList().map(n=>this.checkCoverForAPoint(n.x,n.y,e)).filter(n=>!!n).length>6),Y(this,"checkSizeIsVisible",(e,n,i)=>(e>50||i/e<=10)&&(n>50||i/n<=10)),Y(this,"checkSizeOfPartInClient",()=>{const{left:e,right:n,top:i,bottom:c,clientHeight:h,clientWidth:g,clientMin:v}=this._clientSize;let m,C,y,N;if(e<0)m=0;else{if(!(e<g))return!1;m=e}if(n<0)return!1;if(C=n<g?n:g,i<0)y=0;else{if(!(i<h))return!1;y=i}return!(c<0)&&(N=c<h?c:h,this.checkSizeIsVisible(C-m,N-y,v))}),Y(this,"returnHiddenResult",e=>(this._clientSize=null,{visible:!1,reason:e})),Y(this,"checkOneElementVisible",e=>{if(e instanceof HTMLElement){if(this.checkElementIsMountedOnDom(e)){if(this.checkActualCssVisibleIncludeInherit(e)){if(this._clientSize=this.getSizeAboutClient(e),this.checkElementCover(e))return this.returnHiddenResult(zQ.COVERED);{const n=this.checkActualSize(),i=this.checkSizeOfPartInClient();return n&&!i?this.returnHiddenResult(zQ.POSITION):n?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(zQ.SIZE)}}return this.returnHiddenResult(zQ.STYLE)}return this.returnHiddenResult(Ure.UNMOUNTED)}return this.returnHiddenResult(Ure.INVALID_HTML_ELEMENT)}),Y(this,"checkElementIsMountedOnDom",e=>this.checkPropertyUpToAllParentNodes(e,n=>"HTML"!==n.nodeName.toUpperCase()?null!==n.parentElement:!!document.documentElement))}};function dEe(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);n&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),i.push.apply(i,c)}return i}function XQ(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?dEe(Object(i),!0).forEach(function(c){Y(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):dEe(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}let ty=(jme=uy("LocalVideoTrack","getTrackId"),Qme=K0(),Vme=MQ("LocalVideoTrack","_enabledMutex"),Gme=oO({className:"LocalVideoTrack"}),Hme=K0(),qme=MQ("LocalVideoTrack","_enabledMutex"),Wme=oO({className:"LocalVideoTrack"}),Kme=K0(),Yme=K0(),Jme=K0(),zme=K0(),Xme=K0(),$me=K0(),Zme=K0(),eEe=K0(),tEe=K0(),jme((Cl((A0=class c0e extends _le{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==Wy.PLAYING)}constructor(n,i,c,h,g,v){super(n,g),Y(this,"trackMediaType","video"),Y(this,"_player",void 0),Y(this,"_videoBeautyProcessor",void 0),Y(this,"_videoVisibleTimer",null),Y(this,"_previousVideoVisibleStatus",void 0),Y(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),Y(this,"_encoderConfig",void 0),Y(this,"_scalabiltyMode",{numSpatialLayers:1,numTemporalLayers:1}),Y(this,"_optimizationMode",void 0),Y(this,"_videoHeight",void 0),Y(this,"_videoWidth",void 0),Y(this,"_forceBitrateLimit",void 0),Y(this,"_enabled",!0),Y(this,"processorDestination",void 0),Y(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this._encoderConfig=i,this._scalabiltyMode=c,this._optimizationMode=h,this._hints=v||[],-1===this._hints.indexOf(vy.SCREEN_TRACK)&&this.updateBitrateFromProfile(),this.processorContext=new Pge(this.getTrackId(),"local"),this.processorDestination=new Lge(this.processorContext),this.bindProcessorDestinationEvents()}play(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const c=qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.LOCAL_VIDEO_TRACK_PLAY,options:[this.getTrackId(),"string"==typeof n?n:"HTMLElement",i]});if("string"==typeof n){const g=document.getElementById(n);g?n=g:(de.warning("[".concat(this.getTrackId(),'] can not find "#').concat(n,'" element, use document.body')),pl("warning",this,'can not find "#'.concat(n,'" element, use document.body')),n=document.body)}de.debug("[".concat(this.getTrackId(),"] start video playback"),JSON.stringify(i)),Gc("debug",this,"play",i);const h=XQ(XQ(XQ({},this._getDefaultPlayerConfig()),i),{},{trackId:this.getTrackId(),element:n});this._player?this._player.updateConfig(h):(this._player=new kme(h),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const g=this.getVideoElementVisibleStatus();this.emit(IS.VIDEO_ELEMENT_VISIBLE_STATUS,g)}catch(g){}},ya("CHECK_VIDEO_VISIBLE_INTERVAL")),c.onSuccess()}stop(){const n=qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.LOCAL_VIDEO_TRACK_STOP,options:[this.getTrackId()]});if(!this._player)return n.onSuccess();this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,de.debug("[".concat(this.getTrackId(),"] stop video playback")),Gc("debug",this,"stop"),n.onSuccess()}setEnabled(n,i){var c=this;return l(function*(){if(!i){if(n===c._enabled)return;c.stateCheck("enabled",n)}if(de.info("[".concat(c.getTrackId(),"] start setEnabled"),n),Gc("info",c,"setEnabled",n),!n){c._originMediaStreamTrack.enabled=!1;try{yield Q0(c,md.NEED_DISABLE_TRACK,c)}catch(h){throw de.error("[".concat(c.getTrackId(),"] setEnabled to false error"),h.toString()),Gc("error",c,"setEnabled",n,h.toString()),h}return i||(c._enabled=!1),de.info("[".concat(c.getTrackId(),"] setEnabled to false success")),void Gc("info",c,"setEnabled",n,"success")}c._originMediaStreamTrack.enabled=!0;try{yield Q0(c,md.NEED_ENABLE_TRACK,c)}catch(h){throw de.error("[".concat(c.getTrackId(),"] setEnabled to true error"),h.toString()),Gc("error",c,"setEnabled",n,h.toString()),h}de.info("[".concat(c.getTrackId(),"] setEnabled to true success")),Gc("info",c,"setEnabled",n,"success"),i||(c._enabled=!0)})()}setMuted(n){var i=this;return l(function*(){n!==i._muted&&(i.stateCheck("muted",n),i._muted=n,i._originMediaStreamTrack.enabled=!n,de.debug("[".concat(i.getTrackId(),"] start set muted: ").concat(n)),Gc("debug",i,"setMuted",n),n?yield Q0(i,md.NEED_MUTE_TRACK,i):yield Q0(i,md.NEED_UNMUTE_TRACK,i))})()}getStats(){return jY(()=>{de.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead"),pl("warning",this,"[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")},"localVideoTrackGetStatsWarning"),N2(this,md.GET_STATS)||XQ({},YN)}setBeautyEffect(n){var i=arguments,c=this;return l(function*(){let h=i.length>1&&void 0!==i[1]?i[1]:{};const g=qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.LOCAL_VIDEO_TRACK_BEAUTY,options:[c.getTrackId(),n,h]});if(n||c._videoBeautyProcessor){if(xte()===My.IOS||xte()===My.ANDROID){const v=new ea(_t.INVALID_OPERATION,"can not enable beauty effect on mobile device");throw g.onError(v),v}if(!c._enabled&&n){const v=new ea(_t.TRACK_IS_DISABLED,"can not enable beauty effect when track is disabled");throw g.onError(v),v}if(de.info("[".concat(c.getTrackId(),"] start setBeautyEffect"),n,JSON.stringify(h)),Gc("info",c,"setBeautyEffect",[n,h]),c._videoBeautyProcessor||n){try{if(!c._videoBeautyProcessor)if(c._videoBeautyProcessor=new h1e,c.processor){const v=c.processor;c.pipe(c._videoBeautyProcessor).pipe(v)}else c.pipe(c._videoBeautyProcessor).pipe(c.processorDestination);yield c._videoBeautyProcessor.setBeautyEffectOptions(h),n?yield c._videoBeautyProcessor.enable():yield c._videoBeautyProcessor.disable()}catch(v){throw de.error("[".concat(c.getTrackId(),"] setBeautyEffect error"),v.toString()),Gc("info",c,"setBeautyEffect",[n,h]),g.onError(v),v}de.info("[".concat(c.getTrackId(),"] setBeautyEffect success")),Gc("info",c,"setBeautyEffect",[n,h],"success"),g.onSuccess()}else g.onSuccess()}})()}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}getCurrentFrameImage(n){var i=arguments,c=this;return l(function*(){return c._player?c._player.getCurrentFrameToUint8Array(n,i.length>1&&void 0!==i[1]?i[1]:1):yield Ode(n)})()}clone(n,i,c,h){const g=this._mediaStreamTrack.clone();return new c0e(g,n,i,c,h)}setBitrateLimit(n){var i=this;return l(function*(){if(de.debug("[".concat(i.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(n))),Gc("debug",i,"setBitrateLimit",n),n){i._forceBitrateLimit=n,i._encoderConfig&&(i._encoderConfig.bitrateMax=i._encoderConfig.bitrateMax&&i._encoderConfig.bitrateMax<n.max_bitrate?i._encoderConfig.bitrateMax:n.max_bitrate,i._encoderConfig.bitrateMin=n.min_bitrate);try{yield Q0(i,md.NEED_UPDATE_VIDEO_ENCODER,i)}catch(c){return c.throw()}}})()}setOptimizationMode(n){var i=this;return l(function*(){if("motion"!==n&&"detail"!==n&&"balanced"!==n)return de.error(_t.INVALID_PARAMS,"optimization mode must be motion, detail or balanced"),void Gc("error",i,"setOptimizationMode",n,_t.INVALID_PARAMS);const c=i._optimizationMode;try{i._optimizationMode=n,yield Q0(i,md.SET_OPTIMIZATION_MODE,i)}catch(h){throw i._optimizationMode=c,de.error("[".concat(i.getTrackId(),"] set optimization mode failed"),h.toString()),Gc("error",i,"setOptimizationMode",n,h.toString()),h}de.info("[".concat(i.getTrackId(),"] set optimization mode success (").concat(n,")")),Gc("info",i,"setOptimizationMode",n,"success")})()}setScalabiltyMode(n){if(1===n.numSpatialLayers&&1!==n.numTemporalLayers)return de.error(_t.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),Gc("error",this,"setScalabiltyMode",n,_t.INVALID_PARAMS),void(this._scalabiltyMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabiltyMode=n,de.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(n,")")),Gc("info",this,"setScalabiltyMode",n,"success")}updateMediaStreamTrackResolution(){Kge(this._originMediaStreamTrack).then(n=>{let[i,c]=n;this._videoHeight=c,this._videoWidth=i}).catch(vre)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:n,height:i,frameRate:c}=this.getMediaStreamTrackSettings();if(!n||!i||!c)return;const[h,g]=function(v,m,C){const y=ya("BITRATE_ADAPTER_TYPE");let N;const k=200*Math.pow(C/15,.6)*Math.pow(v*m/640/360,.75),U=k;if("STANDARD_BITRATE"===y)N=4*k;else{if("COMPATIABLE_BITRATE"!==y)return;N=2*k}return[Math.floor(N),Math.floor(U)]}(n,i,c)||[void 0,void 0];this._encoderConfig.bitrateMin||this._encoderConfig.bitrateMax||(this._encoderConfig.bitrateMin=g,this._encoderConfig.bitrateMax=h,de.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(n,", h: ").concat(i,", fps: ").concat(c,"] => [brMax: ").concat(h,", brMin: ").concat(g,"]")),Gc("debug",this,"updateBitrateFromProfile",void 0,"[w: ".concat(n,", h: ").concat(i,", fps: ").concat(c,"] => [brMax: ").concat(h,", brMin: ").concat(g,"]")))}getVideoElementVisibleStatus(){try{var n,i;const c=null==this||null===(n=this._player)||void 0===n?void 0:n.getContainerElement(),h={track:this,element:null==this||null===(i=this._player)||void 0===i?void 0:i.getVideoElement(),slot:null==c?void 0:c.parentElement},{element:g,slot:v}=h;if(this.isPlaying&&g instanceof HTMLVideoElement&&v instanceof HTMLElement){const m=lEe.checkOneElementVisible(g),C=Object.assign({},m);if(C.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=C.visible;qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]}).onSuccess(C.visible?"Video is visible":"Invisible because of ".concat(C.reason))}return C}return}catch(c){throw new ea(_t.GET_VIDEO_ELEMENT_VISIBLE_ERROR,c.message)}}renewMediaStreamTrack(n){return l(function*(){})()}pipe(n){if(this._videoBeautyProcessor&&n!==this._videoBeautyProcessor)return this._videoBeautyProcessor.pipe(n);if(this.processor===n)return n;if(n._source)throw new ea(_t.INVALID_OPERATION,"Processor ".concat(n.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=n,this.processor._source=this,n.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),n}unpipe(){if(!this.processor)return;if(this._videoBeautyProcessor&&this.processor===this._videoBeautyProcessor)return void this._videoBeautyProcessor.unpipe();const n=this.processor;this.processor._source=void 0,this.processor=void 0,n.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}bindProcessorDestinationEvents(){var n=this;this.processorDestination.on(Yy.ON_TRACK,function(){var i=l(function*(c){c?c!==n._mediaStreamTrack&&(n._mediaStreamTrack=c,n._updatePlayerSource(),yield Q0(n,md.NEED_REPLACE_TRACK,n)):n._mediaStreamTrack!==n._originMediaStreamTrack&&(n._mediaStreamTrack=n._originMediaStreamTrack,n._updatePlayerSource(),yield Q0(n,md.NEED_REPLACE_TRACK,n))});return function(c){return i.apply(this,arguments)}}())}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Yy.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(X_.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(X_.REQUEST_CONSTRAINTS)}}).prototype,"play",[Qme],Object.getOwnPropertyDescriptor(A0.prototype,"play"),A0.prototype),Cl(A0.prototype,"setEnabled",[Vme,Gme,Hme],Object.getOwnPropertyDescriptor(A0.prototype,"setEnabled"),A0.prototype),Cl(A0.prototype,"setMuted",[qme,Wme,Kme],Object.getOwnPropertyDescriptor(A0.prototype,"setMuted"),A0.prototype),Cl(A0.prototype,"getStats",[Yme],Object.getOwnPropertyDescriptor(A0.prototype,"getStats"),A0.prototype),Cl(A0.prototype,"setBeautyEffect",[Jme],Object.getOwnPropertyDescriptor(A0.prototype,"setBeautyEffect"),A0.prototype),Cl(A0.prototype,"getCurrentFrameData",[zme],Object.getOwnPropertyDescriptor(A0.prototype,"getCurrentFrameData"),A0.prototype),Cl(A0.prototype,"getCurrentFrameImage",[Xme],Object.getOwnPropertyDescriptor(A0.prototype,"getCurrentFrameImage"),A0.prototype),Cl(A0.prototype,"setBitrateLimit",[$me],Object.getOwnPropertyDescriptor(A0.prototype,"setBitrateLimit"),A0.prototype),Cl(A0.prototype,"setOptimizationMode",[Zme],Object.getOwnPropertyDescriptor(A0.prototype,"setOptimizationMode"),A0.prototype),Cl(A0.prototype,"setScalabiltyMode",[eEe],Object.getOwnPropertyDescriptor(A0.prototype,"setScalabiltyMode"),A0.prototype),Cl(A0.prototype,"updateMediaStreamTrackResolution",[tEe],Object.getOwnPropertyDescriptor(A0.prototype,"updateMediaStreamTrackResolution"),A0.prototype),nEe=A0))||nEe),hEe=(rEe=uy("CameraVideoTrack","getTrackId"),iEe=K0(),oEe=MQ("CameraVideoTrack","_enabledMutex"),sEe=oO({className:"CameraVideoTrack"}),aEe=K0(),cEe=K0(),rEe((Cl((x2=class extends ty{constructor(e,n,i,c,h,g){var v;super(e,n.encoderConfig?C2(n.encoderConfig):{},c,h,g),v=this,Y(this,"_config",void 0),Y(this,"_originalConstraints",void 0),Y(this,"_constraints",void 0),Y(this,"_enabled",!0),Y(this,"_deviceName","default"),Y(this,"tryResumeVideoForIOS15WeChat",l(function*(){FM()&&!NW()&&kce()&&v._enabled&&!v._isClosed&&(de.debug("[".concat(v.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),yield v.renewMediaStreamTrack())})),Jl("info",this,"constructor",{trackId:g,deviceId:e.label,constraints:i,config:n}),this._config=n,this._originalConstraints=i,this._constraints=i,this._deviceName=e.label,this._config.encoderConfig&&(this._encoderConfig=C2(this._config.encoderConfig)),Mf.on(Iy.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),Mf.on(Iy.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),this.bindProcessorContextEvents()}setDevice(e){var n=this;return l(function*(){const i=qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.CAM_VIDEO_TRACK_SET_DEVICE,options:[n.getTrackId(),e]});if(de.info("[".concat(n.getTrackId(),"] set device to ").concat(e)),Gc("info",n,"setDevice",e),n._enabled)try{const c=yield _C.getDeviceById(e),h={};h.video=XQ({},n._constraints),h.video.deviceId={exact:e},h.video.facingMode=void 0,n._originMediaStreamTrack.stop();let g=null;try{g=yield nR(h,n.getTrackId())}catch(v){throw de.error("[".concat(n.getTrackId(),"] setDevice failed"),v.toString()),Gc("error",n,"setDevice",e,v.toString()),g=yield nR({video:n._constraints},n.getTrackId()),yield n._updateOriginMediaStreamTrack(g.getVideoTracks()[0],!1),v}yield n._updateOriginMediaStreamTrack(g.getVideoTracks()[0],!1),n.updateMediaStreamTrackResolution(),n._deviceName=c.label,n._config.cameraId=e,n._constraints.deviceId={exact:e}}catch(c){throw i.onError(c),de.error("[".concat(n.getTrackId(),"] setDevice error"),c.toString()),Gc("error",n,"setDevice",e,c.toString()),c}else try{const c=yield _C.getDeviceById(e);n._deviceName=c.label,n._config.cameraId=e,n._constraints.deviceId={exact:e}}catch(c){throw i.onError(c),de.error("[".concat(n.getTrackId(),"] setDevice error"),c.toString()),Gc("error",n,"setDevice",e,c.toString()),c}de.info("[".concat(n.getTrackId(),"] setDevice success")),Gc("info",n,"setDevice",e,"success"),i.onSuccess()})()}setEnabled(e,n){var i=this;return l(function*(){if(!n){if(e===i._enabled)return;i.stateCheck("enabled",e)}if(de.info("[".concat(i.getTrackId(),"] start setEnabled"),e),Gc("info",i,"setEnabled",e),!e){i._originMediaStreamTrack.onended=null,i._originMediaStreamTrack.stop(),n||(i._enabled=!1);try{yield Q0(i,md.NEED_DISABLE_TRACK,i)}catch(g){throw de.error("[".concat(i.getTrackId(),"] setEnabled to false error"),g.toString()),Gc("error",i,"setEnabled",e,g.toString()),g}return de.info("[".concat(i.getTrackId(),"] setEnabled to false success")),void Gc("info",i,"setEnabled",e,"success")}const c=XQ({},i._constraints),h=_C.searchDeviceIdByName(i._deviceName);h&&!c.deviceId&&(c.deviceId={exact:h});try{const g=yield nR({video:i._constraints},i.getTrackId());yield i._updateOriginMediaStreamTrack(g.getVideoTracks()[0],!1),yield Q0(i,md.NEED_ENABLE_TRACK,i)}catch(g){throw de.error("[".concat(i.getTrackId(),"] setEnabled true error"),g.toString()),Gc("error",i,"setEnabled",e,g.toString()),g}i.updateMediaStreamTrackResolution(),de.info("[".concat(i.getTrackId(),"] setEnabled to true success")),Gc("info",i,"setEnabled",e,"success"),n||(i._enabled=!0)})()}setEncoderConfiguration(e,n){var i=this;return l(function*(){const c=qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG,options:[i.getTrackId(),e]});if(!i._enabled){const v=new ea(_t.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");throw c.onError(v),v}e=C2(e),i._forceBitrateLimit&&(e.bitrateMax=i._forceBitrateLimit.max_bitrate?i._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=i._forceBitrateLimit.min_bitrate?i._forceBitrateLimit.min_bitrate:e.bitrateMin);const h=V0(i._config);h.encoderConfig=e;const g=Nde(h);(L_()||P_()||YR())&&(g.deviceId=void 0),de.debug("[".concat(i.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(e),JSON.stringify(g)),Gc("debug",i,"setEncoderConfiguration",e);try{yield i._originMediaStreamTrack.applyConstraints(g),i.updateMediaStreamTrackResolution()}catch(v){const m=new ea(_t.UNEXPECTED_ERROR,v.toString());throw de.error("[".concat(i.getTrackId(),"] applyConstraints error"),m.toString()),Gc("error",i,"setEncoderConfiguration",v.toString()),c.onError(m),m}i._config=h,i._constraints=g,i._originalConstraints=g,i._encoderConfig=e,-1===i._hints.indexOf(vy.SCREEN_TRACK)&&i.updateBitrateFromProfile();try{yield Q0(i,md.NEED_UPDATE_VIDEO_ENCODER,i)}catch(v){return c.onError(v),v.throw()}c.onSuccess()})()}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){var e=this;if((P_()||YR())&&this._enabled&&!this._isClosed&&Mf.duringInterruption){const n=function(){var i=l(function*(){Mf.off(Iy.IOS_INTERRUPTION_END,n),e._enabled&&!e._isClosed&&(de.debug("[".concat(e.getTrackId(),"] try capture camera media device for interrupted iOS device.")),pl("debug",e,"try capture camera media device for interrupted iOS device."),yield e.setEnabled(!1),yield e.setEnabled(!0))});return function(){return i.apply(this,arguments)}}();Mf.on(Iy.IOS_INTERRUPTION_END,n)}else de.debug("[".concat(this.getTrackId(),"] track ended")),i1("debug",["MediaStreamTrack",this.getTrackId()],"ended"),this.emit(IS.TRACK_ENDED)}renewMediaStreamTrack(e){var n=this;return l(function*(){const i=e||n._constraints,c=_C.searchDeviceIdByName(n._deviceName);if(c&&!i.deviceId&&(i.deviceId={exact:c}),n._enabled){const h=yield nR({video:i},n.getTrackId());n._constraints=i,yield n._updateOriginMediaStreamTrack(h.getVideoTracks()[0],!0),n.updateMediaStreamTrackResolution()}})()}close(){super.close(),Mf.off(Iy.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),Mf.off(Iy.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat)}bindProcessorContextEvents(){var e=this;this.processorContext.on(X_.REQUEST_UPDATE_CONSTRAINTS,function(){var n=l(function*(i,c,h){try{const g=Object.assign({},e._originalConstraints,...i);yield e.renewMediaStreamTrack(g),c()}catch(g){h(g)}});return function(i,c,h){return n.apply(this,arguments)}}()),this.processorContext.on(X_.REQUEST_CONSTRAINTS,function(){var n=l(function*(i){i(e._originMediaStreamTrack.getSettings())});return function(i){return n.apply(this,arguments)}}())}}).prototype,"setDevice",[iEe],Object.getOwnPropertyDescriptor(x2.prototype,"setDevice"),x2.prototype),Cl(x2.prototype,"setEnabled",[oEe,sEe,aEe],Object.getOwnPropertyDescriptor(x2.prototype,"setEnabled"),x2.prototype),Cl(x2.prototype,"setEncoderConfiguration",[cEe],Object.getOwnPropertyDescriptor(x2.prototype,"setEncoderConfiguration"),x2.prototype),uEe=x2))||uEe);class kde{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio)return this._audioTrack}get videoTrack(){if(this.hasVideo)return this._videoTrack}constructor(n,i){Y(this,"uid",void 0),Y(this,"_uintid",void 0),Y(this,"_trust_in_room_",!0),Y(this,"_trust_audio_enabled_state_",!0),Y(this,"_trust_video_enabled_state_",!0),Y(this,"_trust_audio_mute_state_",!0),Y(this,"_trust_video_mute_state_",!0),Y(this,"_audio_muted_",!1),Y(this,"_video_muted_",!1),Y(this,"_audio_enabled_",!0),Y(this,"_video_enabled_",!0),Y(this,"_audio_added_",!1),Y(this,"_video_added_",!1),Y(this,"_trust_video_stream_added_state_",!0),Y(this,"_trust_audio_stream_added_state_",!0),Y(this,"_audioTrack",void 0),Y(this,"_videoTrack",void 0),Y(this,"_audioSSRC",void 0),Y(this,"_videoSSRC",void 0),Y(this,"_audioOrtc",void 0),Y(this,"_videoOrtc",void 0),Y(this,"_cname",void 0),Y(this,"_rtxSsrcId",void 0),this.uid=n,this._uintid=i}}var p1e=wZ,g1e=EM,A1e=NN;Ly({target:"Promise",stat:!0},{try:function(e){var n=g1e.f(this),i=A1e(e);return(i.error?n.reject:n.resolve)(i.value),n.promise}});var Lde=p1e,m1e=Ly,E1e=_h,v1e=zg,y1e=FY,_1e=e_,I1e=W1,b1e=QS,fEe=YM,C1e=kpe,S1e=Upe,T1e=PS,pEe=$0("isConcatSpreadable"),gEe=9007199254740991,AEe="Maximum allowed index exceeded",mEe=E1e.TypeError,w1e=T1e>=51||!v1e(function(){var e=[];return e[pEe]=!1,e.concat()[0]!==e}),R1e=S1e("concat"),O1e=function(e){if(!_1e(e))return!1;var n=e[pEe];return void 0!==n?!!n:y1e(e)};m1e({target:"Array",proto:!0,forced:!w1e||!R1e},{concat:function(e){var n,i,c,h,g,v=I1e(this),m=C1e(v,0),C=0;for(n=-1,c=arguments.length;n<c;n++)if(O1e(g=-1===n?v:arguments[n])){if(C+(h=b1e(g))>gEe)throw mEe(AEe);for(i=0;i<h;i++,C++)i in g&&fEe(m,C,g[i])}else{if(C>=gEe)throw mEe(AEe);fEe(m,C++,g)}return m.length=C,m}});var EEe={},D1e=Zy,N1e=Ry,vEe=T9.f,k1e=eY,yEe="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];EEe.f=function(e){return yEe&&"Window"==D1e(e)?function(n){try{return vEe(n)}catch(i){return k1e(yEe)}}(e):vEe(N1e(e))};var XY={};XY.f=$0;var _Ee=aS,P1e=Dy,x1e=XY,M1e=Q_.f,a_=function(e){var n=_Ee.Symbol||(_Ee.Symbol={});P1e(n,e)||M1e(n,e,{value:x1e.f(e)})},$Q=Ly,Pde=_h,B1e=Oy,U1e=bO,$Y=_E,F1e=O0,ZQ=R_,uj=t_,xde=zg,v_=Dy,j1e=FY,Q1e=X0,V1e=e_,G1e=gy,Mde=oN,Bde=I1,H1e=W1,Fre=Ry,Ude=QP,IEe=u2,Fde=NT,ZY=eM,bEe=CU,q1e=T9,CEe=EEe,jde=_U,SEe=Nf,TEe=Q_,W1e=bU,wEe=SR,K1e=O5,Qde=Vb,_J=BS.exports,REe=vU,OEe=dN,DEe=$0,Y1e=XY,J1e=a_,z1e=d2,NEe=oM,jre=Ppe.forEach,CS=Vx("hidden"),Qre="Symbol",kEe=DEe("toPrimitive"),X1e=NEe.set,LEe=NEe.getterFor(Qre),uO=Object.prototype,u3=Pde.Symbol,lj=u3&&u3.prototype,PEe=Pde.TypeError,Vde=Pde.QObject,ez=B1e("JSON","stringify"),xEe=SEe.f,l3=TEe.f,MEe=CEe.f,$1e=wEe.f,BEe=F1e([].push),TL=_J("symbols"),tz=_J("op-symbols"),Gde=_J("string-to-symbol-registry"),Hde=_J("symbol-to-string-registry"),Z1e=_J("wks"),qde=!Vde||!Vde.prototype||!Vde.prototype.findChild,Wde=ZQ&&xde(function(){return 7!=ZY(l3({},"a",{get:function(){return l3(this,"a",{value:7}).a}})).a})?function(e,n,i){var c=xEe(uO,n);c&&delete uO[n],l3(e,n,i),c&&e!==uO&&l3(uO,n,c)}:l3,Kde=function(e,n){var i=TL[e]=ZY(lj);return X1e(i,{type:Qre,tag:e,description:n}),ZQ||(i.description=n),i},Vre=function(e,n,i){e===uO&&Vre(tz,n,i),Bde(e);var c=Ude(n);return Bde(i),v_(TL,c)?(i.enumerable?(v_(e,CS)&&e[CS][c]&&(e[CS][c]=!1),i=ZY(i,{enumerable:Fde(0,!1)})):(v_(e,CS)||l3(e,CS,Fde(1,{})),e[CS][c]=!0),Wde(e,c,i)):l3(e,c,i)},Yde=function(e,n){Bde(e);var i=Fre(n),c=bEe(i).concat(Jde(i));return jre(c,function(h){ZQ&&!$Y(UEe,i,h)||Vre(e,h,i[h])}),e},UEe=function(e){var n=Ude(e),i=$Y($1e,this,n);return!(this===uO&&v_(TL,n)&&!v_(tz,n))&&(!(i||!v_(this,n)||!v_(TL,n)||v_(this,CS)&&this[CS][n])||i)},FEe=function(e,n){var i=Fre(e),c=Ude(n);if(i!==uO||!v_(TL,c)||v_(tz,c)){var h=xEe(i,c);return!h||!v_(TL,c)||v_(i,CS)&&i[CS][c]||(h.enumerable=!0),h}},jEe=function(e){var n=MEe(Fre(e)),i=[];return jre(n,function(c){v_(TL,c)||v_(REe,c)||BEe(i,c)}),i},Jde=function(e){var n=e===uO,i=MEe(n?tz:Fre(e)),c=[];return jre(i,function(h){!v_(TL,h)||n&&!v_(uO,h)||BEe(c,TL[h])}),c};if(uj||(Qde(lj=(u3=function(){if(G1e(lj,this))throw PEe("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?IEe(arguments[0]):void 0,n=OEe(e),i=function(c){this===uO&&$Y(i,tz,c),v_(this,CS)&&v_(this[CS],n)&&(this[CS][n]=!1),Wde(this,n,Fde(1,c))};return ZQ&&qde&&Wde(uO,n,{configurable:!0,set:i}),Kde(n,e)}).prototype,"toString",function(){return LEe(this).tag}),Qde(u3,"withoutSetter",function(e){return Kde(OEe(e),e)}),wEe.f=UEe,TEe.f=Vre,W1e.f=Yde,SEe.f=FEe,q1e.f=CEe.f=jEe,jde.f=Jde,Y1e.f=function(e){return Kde(DEe(e),e)},ZQ&&l3(lj,"description",{configurable:!0,get:function(){return LEe(this).description}})),$Q({global:!0,wrap:!0,forced:!uj,sham:!uj},{Symbol:u3}),jre(bEe(Z1e),function(e){J1e(e)}),$Q({target:Qre,stat:!0,forced:!uj},{for:function(e){var n=IEe(e);if(v_(Gde,n))return Gde[n];var i=u3(n);return Gde[n]=i,Hde[i]=n,i},keyFor:function(e){if(!Mde(e))throw PEe(e+" is not a symbol");if(v_(Hde,e))return Hde[e]},useSetter:function(){qde=!0},useSimple:function(){qde=!1}}),$Q({target:"Object",stat:!0,forced:!uj,sham:!ZQ},{create:function(e,n){return void 0===n?ZY(e):Yde(ZY(e),n)},defineProperty:Vre,defineProperties:Yde,getOwnPropertyDescriptor:FEe}),$Q({target:"Object",stat:!0,forced:!uj},{getOwnPropertyNames:jEe,getOwnPropertySymbols:Jde}),$Q({target:"Object",stat:!0,forced:xde(function(){jde.f(1)})},{getOwnPropertySymbols:function(e){return jde.f(H1e(e))}}),ez&&$Q({target:"JSON",stat:!0,forced:!uj||xde(function(){var e=u3();return"[null]"!=ez([e])||"{}"!=ez({a:e})||"{}"!=ez(Object(e))})},{stringify:function(e,n,i){var c=K1e(arguments),h=n;if((V1e(n)||void 0!==e)&&!Mde(e))return j1e(n)||(n=function(g,v){if(Q1e(h)&&(v=$Y(h,this,g,v)),!Mde(v))return v}),c[1]=n,U1e(ez,null,c)}}),!lj[kEe]){var eCe=lj.valueOf;Qde(lj,kEe,function(e){return $Y(eCe,this)})}z1e(u3,Qre),REe[CS]=!0,a_("asyncIterator"),a_("hasInstance"),a_("isConcatSpreadable"),a_("iterator"),a_("match"),a_("matchAll"),a_("replace"),a_("search"),a_("species"),a_("split"),a_("toPrimitive"),a_("toStringTag"),a_("unscopables"),d2(_h.JSON,"JSON",!0);var tCe=aS.Symbol;a_("asyncDispose"),a_("dispose"),a_("matcher"),a_("metadata"),a_("observable"),a_("patternMatch"),a_("replaceAll");var QEe=tCe,VEe=XY.f("asyncIterator");function GEe(e){this.wrapped=e}function nz(e){var n,i;function c(g,v){try{var m=e[g](v),C=m.value,y=C instanceof GEe;Lde.resolve(y?C.wrapped:C).then(function(N){y?c("return"===g?"return":"next",N):h(m.done?"return":"normal",N)},function(N){c("throw",N)})}catch(N){h("throw",N)}}function h(g,v){switch(g){case"return":n.resolve({value:v,done:!0});break;case"throw":n.reject(v);break;default:n.resolve({value:v,done:!1})}(n=n.next)?c(n.key,n.arg):i=null}this._invoke=function(g,v){return new Lde(function(m,C){var y={key:g,arg:v,resolve:m,reject:C,next:null};i?i=i.next=y:(n=i=y,c(g,v))})},"function"!=typeof e.return&&(this.return=void 0)}function aR(e){return function(){return new nz(e.apply(this,arguments))}}function Lf(e){return new GEe(e)}nz.prototype["function"==typeof QEe&&VEe||"@@asyncIterator"]=function(){return this},nz.prototype.next=function(e){return this._invoke("next",e)},nz.prototype.throw=function(e){return this._invoke("throw",e)},nz.prototype.return=function(e){return this._invoke("return",e)};var rCe=XY.f("iterator");function rz(e,n){var i={},c=!1;function h(g,v){return c=!0,v=new Lde(function(m){m(e[g](v))}),{done:!1,value:n(v)}}return i[void 0!==QEe&&rCe||"@@iterator"]=function(){return this},i.next=function(g){return c?(c=!1,g):h("next",g)},"function"==typeof e.throw&&(i.throw=function(g){if(c)throw c=!1,g;return h("throw",g)}),"function"==typeof e.return&&(i.return=function(g){return c?(c=!1,g):h("return",g)}),i}var HEe=VEe,iCe=C_,Gre=Ha,aCe=by,uCe=TS,lCe=mN,dCe=Xy.f,hCe=Q1,RL=R.Symbol,pj=RL&&RL.prototype;if(F&&R0(RL)&&(!("description"in pj)||void 0!==RL().description)){var qEe={},Hre=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:lCe(arguments[0]),n=uCe(pj,this)?new RL(e):void 0===e?RL():RL(e);return""===e&&(qEe[n]=!0),n};hCe(Hre,RL),Hre.prototype=pj,pj.constructor=Hre;var fCe="Symbol(test)"==String(RL("test")),pCe=Gre(pj.toString),gCe=Gre(pj.valueOf),ACe=/^Symbol\((.*)\)[^)]+$/,mCe=Gre("".replace),ECe=Gre("".slice);dCe(pj,"description",{configurable:!0,get:function(){var e=gCe(this),n=pCe(e);if(aCe(qEe,e))return"";var i=fCe?ECe(n,7,-1):mCe(n,ACe,"$1");return""===i?void 0:i}}),iCe({global:!0,forced:!0},{Symbol:Hre})}var ny={exports:{}};function WEe(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);n&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),i.push.apply(i,c)}return i}function KEe(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?WEe(Object(i),!0).forEach(function(c){Y(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):WEe(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}function zde(e,n,i,c,h,g,v){let m=[],C=[],y=[],N=[],k=!1,U=!1;if(ny.exports.parse(e).mediaDescriptions.forEach(V=>{v&&v!==V.attributes.direction||("video"!==V.media.mediaType||k||(C=V.attributes.payloads,N=V.attributes.extmaps,k=!0),"audio"!==V.media.mediaType||U||(m=V.attributes.payloads,y=V.attributes.extmaps,U=!0))}),!N||0===C.length)throw new Error("Cannot get video capabilities from SDP.");if(!y||0===m.length)throw new Error("Cannot get audio capabilities from SDP.");return C.forEach(V=>{var K;null!==(K=V.rtpMap)&&void 0!==K&&K.clockRate&&(V.rtpMap.clockRate=parseInt(V.rtpMap.clockRate))}),m.forEach(V=>{var K;null!==(K=V.rtpMap)&&void 0!==K&&K.clockRate&&(V.rtpMap.clockRate=parseInt(V.rtpMap.clockRate))}),n&&(m=m.filter(V=>{var K;return"rtx"!==(null===(K=V.rtpMap)||void 0===K?void 0:K.encodingName.toLowerCase())}),C=C.filter(V=>{var K;return"rtx"!==(null===(K=V.rtpMap)||void 0===K?void 0:K.encodingName.toLowerCase())})),i&&(C=C.filter(V=>{var K;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(K=V.rtpMap)||void 0===K?void 0:K.encodingName)||"")})),c&&(m=m.filter(V=>{var K;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(K=V.rtpMap)||void 0===K?void 0:K.encodingName)||"")})),h&&(null==h?void 0:h.length)>0&&(m=m.filter(V=>{var K;return h.includes((null===(K=V.rtpMap)||void 0===K?void 0:K.encodingName.toLowerCase())||"")})),g&&(null==g?void 0:g.length)>0&&(C=C.filter(V=>{var K;return g.includes((null===(K=V.rtpMap)||void 0===K?void 0:K.encodingName.toLowerCase())||"")})),{audioCodecs:m,videoCodecs:C,audioExtensions:y,videoExtensions:N}}function mj(e){const n=ny.exports.parse(e);let i,c;for(const h of n.mediaDescriptions){if(!i){const g=h.attributes.iceUfrag,v=h.attributes.icePwd;if(!g||!v)throw new Error("Cannot get iceUfrag or icePwd from SDP.");i={iceUfrag:g,icePwd:v}}if(!c){const g=h.attributes.fingerprints;g.length>0&&(c={fingerprints:g})}}if(!c&&n.attributes.fingerprints.length>0&&(c={fingerprints:n.attributes.fingerprints}),!c||!i)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:i,dtlsParameters:c}}function YEe(e,n){const i=[],c=e.attributes.ssrcGroups.filter(v=>"FID"===v.semantic),h=e.attributes.ssrcGroups.find(v=>"SIM"===v.semantic),g=e.attributes.ssrcs;if(h)h.ssrcIds.forEach(v=>{var m;const C=null===(m=c.find(y=>y.ssrcIds[0]===v))||void 0===m?void 0:m.ssrcIds[1];i.push({ssrcId:v,rtx:n?C:void 0})});else if(c.length>0){const m=c[0].ssrcIds[1];i.push({ssrcId:c[0].ssrcIds[0],rtx:n?m:void 0})}else{if(0===g.length)throw new Error("No ssrcs found on local media description.");i.push({ssrcId:g[0].ssrcId})}return i}function JEe(e,n){const{cname:i}=e;let c;n&&n.ip&&"number"==typeof n.port?(c=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:n.ip,port:n.port.toString(),type:"host",extension:{}}],de.debug("Using remote candidate from AP ".concat(n.ip,":").concat(n.port)),pl("debug",[],"Using remote candidate from AP ".concat(n.ip,":").concat(n.port)),n.ip6&&(c.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:n.ip6,port:n.port.toString(),type:"host",extension:{}}),de.debug("Using IPV6 remote candidate from AP ".concat(n.ip6,":").concat(n.port)),pl("debug",[],"Using IPV6 remote candidate from AP ".concat(n.ip6,":").concat(n.port)))):c=e.iceParameters.candidates.map(m=>({foundation:m.foundation,componentId:"1",transport:m.protocol,priority:m.priority.toString(),connectionAddress:m.ip,port:m.port.toString(),type:m.type,extension:{}}));const h={fingerprints:e.dtlsParameters.fingerprints.map(m=>({hashFunction:m.algorithm,fingerprint:m.fingerprint}))},g={iceUfrag:e.iceParameters.iceUfrag,icePwd:e.iceParameters.icePwd};let v;switch(e.dtlsParameters.role){case"server":v="passive";break;case"client":v="active";break;case"auto":v="actpass"}return{dtlsParameters:h,iceParameters:g,candidates:c,rtpCapabilities:ehe(e.rtpCapabilities),setup:v,cname:i}}function hT(e,n,i){const c=[],h=[];return e.forEach(g=>{let{ssrcId:v,rtx:m}=g;const C=x0(8,"track-"),y={ssrcId:v,attributes:KEe({label:C,mslabel:i=i||x0(10,""),msid:"".concat(i," ").concat(C)},n&&{cname:n})};if(c.push(y),void 0!==m){const N={ssrcId:m,attributes:KEe({label:C,mslabel:i,msid:"".concat(i," ").concat(C)},n&&{cname:n})};c.push(N),h.push({semantic:"FID",ssrcIds:[v,m]})}}),e.length>1&&h.push({semantic:"SIM",ssrcIds:e.map(g=>{let{ssrcId:v}=g;return v})}),{ssrcs:c,ssrcGroups:h}}function eV(e,n){n instanceof m_&&e.attributes.payloads.forEach(i=>{var c;const h=null===(c=i.rtpMap)||void 0===c?void 0:c.encodingName.toLowerCase();if(!h||-1===["opus","pcmu","pcma","g722"].indexOf(h))return;i.fmtp||(i.fmtp={parameters:{}}),i.fmtp.parameters.minptime="10",i.fmtp.parameters.useinbandfec="1";const g=n._encoderConfig;g&&"pcmu"!==h&&"pcma"!==h&&"g722"!==h&&(g.bitrate&&!h0()&&(i.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*g.bitrate))),g.sampleRate&&(i.fmtp.parameters.maxplaybackrate="".concat(g.sampleRate),i.fmtp.parameters["sprop-maxcapturerate"]="".concat(g.sampleRate)),g.stereo&&(i.fmtp.parameters.stereo="1",i.fmtp.parameters["sprop-stereo"]="1"))})}function Xde(e){const n=e.attributes.unrecognized.findIndex(i=>"x-google-flag"===i.attField&&"conference"===i.attValue);-1!==n&&e.attributes.unrecognized.splice(n,1)}function $de(e,n){if(!(n instanceof ty&&n._encoderConfig&&-1===n._hints.indexOf(vy.SCREEN_TRACK)))return;const i=n._encoderConfig;dy().supportMinBitrate&&i.bitrateMin&&e.attributes.payloads.forEach(c=>{var h;["h264","vp8","vp9","av1"].includes((null===(h=c.rtpMap)||void 0===h?void 0:h.encodingName.toLowerCase())||"")&&(c.fmtp||(c.fmtp={parameters:{}}),c.fmtp.parameters["x-google-min-bitrate"]="".concat(i.bitrateMin))}),dy().supportMinBitrate&&!n._hints.includes(vy.LOW_STREAM)&&i.bitrateMax&&e.attributes.payloads.forEach(c=>{var h;["h264","vp8","vp9","av1"].includes((null===(h=c.rtpMap)||void 0===h?void 0:h.encodingName.toLowerCase())||"")&&(c.fmtp||(c.fmtp={parameters:{}}),c.fmtp.parameters["x-google-start-bitrate"]="".concat(ya("X_GOOGLE_START_BITRATE")||Math.floor(i.bitrateMax)))})}function zEe(e){if("video"!==e.media.mediaType)return;const n=Yp();if(n.name!==Kp.SAFARI&&n.os!==My.IOS)return;const i=e.attributes.extmaps.findIndex(c=>/video-orientation/g.test(c.extensionName));-1!==i&&e.attributes.extmaps.splice(i,1)}function qre(e,n,i){if(!n)return;let c,h;if("video"===e.media.mediaType?(c=i.videoExtensions,h=i.videoCodecs):(c=i.audioExtensions,h=i.audioCodecs),!0===n.tcc){const g=c.find(v=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===v.extensionName);g&&(e.attributes.extmaps.find(v=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===v.extensionName)||e.attributes.extmaps.push({entry:g.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"}),(v=h,m=e.attributes.payloads,m.filter(C=>!!v.find(y=>y.payloadType===C.payloadType&&!!y.rtcpFeedbacks.find(N=>"transport-cc"===N.type)))).forEach(v=>{v.rtcpFeedbacks.find(m=>"transport-cc"===m.type)||v.rtcpFeedbacks.push({type:"transport-cc"})}))}else if(!1===n.tcc){const g=e.attributes.extmaps.findIndex(v=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===v.extensionName);-1!==g&&e.attributes.extmaps.splice(g,1),e.attributes.payloads.forEach(v=>{const m=v.rtcpFeedbacks.findIndex(C=>"transport-cc"===C.type);-1!==m&&v.rtcpFeedbacks.splice(m,1)})}var v,m;if(!0===n.remb){const g=c.find(v=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===v.extensionName);g&&(e.attributes.extmaps.find(v=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===v.extensionName)||e.attributes.extmaps.push({entry:g.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}),function(v,m){return m.filter(C=>!!v.find(y=>y.payloadType===C.payloadType&&!!y.rtcpFeedbacks.find(N=>"goog-remb"===N.type)))}(h,e.attributes.payloads).forEach(v=>{v.rtcpFeedbacks.find(m=>"goog-remb"===m.type)||v.rtcpFeedbacks.push({type:"goog-remb"})}))}else if(!1===n.remb){const g=e.attributes.extmaps.findIndex(v=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===v.extensionName);-1!==g&&e.attributes.extmaps.splice(g,1),e.attributes.payloads.forEach(v=>{const m=v.rtcpFeedbacks.findIndex(C=>"goog-remb"===C.type);-1!==m&&v.rtcpFeedbacks.splice(m,1)})}}function XEe(e,n,i){if(h0()||"video"!==e.media.mediaType||!(n instanceof ty)||"vp9"!==i&&"vp8"!==i||"vp8"===i&&!ya("SIMULCAST")||void 0===n._scalabiltyMode||n._scalabiltyMode.numSpatialLayers<=1)return;const c="vp8"===i?2:n._scalabiltyMode.numSpatialLayers,h=e.attributes.ssrcs[0],g=e.attributes.ssrcGroups.find(m=>"FID"===m.semantic&&m.ssrcIds[0]===h.ssrcId),v={semantic:"SIM",ssrcIds:[h.ssrcId]};for(let m=1;m<c;m++)e.attributes.ssrcs.push({ssrcId:h.ssrcId+m,attributes:V0(h.attributes)}),v.ssrcIds.push(h.ssrcId+m),g&&(e.attributes.ssrcs.push({ssrcId:g.ssrcIds[1]+m,attributes:V0(h.attributes)}),e.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[h.ssrcId+m,g.ssrcIds[1]+m]}));e.attributes.ssrcGroups.unshift(v)}function $Ee(e,n,i,c,h){return Zde.apply(this,arguments)}function Zde(){return Zde=l(function*(e,n,i,c,h){const g=new RTCPeerConnection;g.addTransceiver("video",{direction:"sendonly"}),g.addTransceiver("audio",{direction:"sendonly"}),g.addTransceiver("video",{direction:"recvonly"}),g.addTransceiver("audio",{direction:"recvonly"});const v=(yield g.createOffer()).sdp,m=zde(v,e,n,i,c,h,"sendonly"),C=zde(v,e,n,i,c,h,"recvonly"),y={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},N={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},k={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(Wre(m,C,"videoExtensions",y,N,k),Wre(m,C,"videoCodecs",y,N,k),Wre(m,C,"audioExtensions",y,N,k),Wre(m,C,"audioCodecs",y,N,k),ya("RAISE_H264_BASELINE_PRIORITY")){const U=k.videoCodecs.findIndex(V=>{var K,$;return"h264"===(null===(K=V.rtpMap)||void 0===K?void 0:K.encodingName.toLocaleLowerCase())&&"42001f"===(null===($=V.fmtp)||void 0===$?void 0:$.parameters["profile-level-id"])});if(-1!==U){const V=k.videoCodecs.findIndex(K=>{var $;return"h264"===(null===($=K.rtpMap)||void 0===$?void 0:$.encodingName.toLocaleLowerCase())});if(V<U){de.debug("raising H264 baseline profile priority");const K=k.videoCodecs[U];k.videoCodecs.splice(U,1),k.videoCodecs.splice(V,0,K)}-1!==V&&(N.videoCodecs=N.videoCodecs.filter(K=>{var $,Z;return!("h264"===(null===($=K.rtpMap)||void 0===$?void 0:$.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(Z=K.fmtp)||void 0===Z?void 0:Z.parameters["profile-level-id"]))})),-1!==V&&ya("FILTER_SEND_H264_BASELINE")&&(y.videoCodecs=y.videoCodecs.filter(K=>{var $,Z;return!("h264"===(null===($=K.rtpMap)||void 0===$?void 0:$.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(Z=K.fmtp)||void 0===Z?void 0:Z.parameters["profile-level-id"]))}))}}try{g.close()}catch(U){}return{send:y,recv:N,sendrecv:k}}),Zde.apply(this,arguments)}function Wre(e,n,i,c,h,g){if("videoExtensions"===i||"audioExtensions"===i){const v=[];return e[i].forEach(m=>{n[i].some((C,y)=>{if(m.entry===C.entry&&m.extensionName===C.extensionName)return v.push(y),!0})?g[i].push(m):c[i].push(m)}),void n[i].forEach((m,C)=>{-1===v.indexOf(C)&&h[i].push(m)})}if("videoCodecs"===i||"audioCodecs"===i){const v=[];return e[i].forEach(m=>{n[i].some((C,y)=>{if(m.payloadType===C.payloadType&&JSON.stringify(m)===JSON.stringify(C))return v.push(y),!0})?g[i].push(m):c[i].push(m)}),void n[i].forEach((m,C)=>{-1===v.indexOf(C)&&h[i].push(m)})}}function ehe(e){const{send:n,recv:i,sendrecv:c}=e;if(!c){if(!n||!i)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:n,recv:i}}let h,g;return n?(h={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},h.audioCodecs=[...n.audioCodecs,...c.audioCodecs],h.videoCodecs=[...n.videoCodecs,...c.videoCodecs],h.audioExtensions=[...n.audioExtensions,...c.audioExtensions],h.videoExtensions=[...n.videoExtensions,...c.videoExtensions]):h=c,i?(g={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},g.audioCodecs=[...i.audioCodecs,...c.audioCodecs],g.videoCodecs=[...i.videoCodecs,...c.videoCodecs],g.audioExtensions=[...i.audioExtensions,...c.audioExtensions],g.videoExtensions=[...i.videoExtensions,...c.videoExtensions]):g=c,{send:h,recv:g}}function d3(e){"audio"===e.media.mediaType&&e.attributes.payloads.filter(n=>{var i;return"opus"===(null===(i=n.rtpMap)||void 0===i?void 0:i.encodingName.toLowerCase())}).forEach(n=>{n.fmtp||(n.fmtp={parameters:{}}),n.fmtp.parameters.stereo="1",n.fmtp.parameters["sprop-stereo"]="1"})}!function(e,n){e.exports=(()=>{var i={8:(g,v,m)=>{m.r(v),m.d(v,{Parser:()=>El,Printer:()=>Qa,parse:()=>Zc,print:()=>Ol});const C="\n",y="".concat("\r").concat(C),N=" ";let k;function U(_c){return _c>="0"&&_c<="9"}function V(_c){return _c>="!"&&_c<="~"}function K(_c){return V(_c)||_c>="\x80"&&_c<="\xff"}function $(_c){return"!"===_c||_c>="#"&&_c<="'"||_c>="*"&&_c<="+"||_c>="-"&&_c<="."||_c>="0"&&_c<="9"||_c>="A"&&_c<="Z"||_c>="^"&&_c<="~"}function Z(_c){return _c>="1"&&_c<="9"}function ye(_c){return _c>="A"&&_c<="Z"||_c>="a"&&_c<="z"}function be(_c){return"d"===_c||"h"===_c||"m"===_c||"s"===_c}function _s(_c){return _c>"\x01"&&_c<"\t"||_c>"\v"&&_c<"\f"||_c>"\x0e"&&_c<"\xff"}function ua(_c){return ye(_c)||U(_c)||"+"===_c||"/"===_c}function ma(_c){return U(_c)||ye(_c)||"+"===_c||"/"===_c||"-"===_c||"_"===_c}function pc(_c){return ye(_c)||U(_c)||"+"===_c||"/"===_c}function qa(_c,J){var Ze=Object.keys(_c);if(Object.getOwnPropertySymbols){var aa=Object.getOwnPropertySymbols(_c);J&&(aa=aa.filter(function(Xa){return Object.getOwnPropertyDescriptor(_c,Xa).enumerable})),Ze.push.apply(Ze,aa)}return Ze}function Ua(_c){for(var J=1;J<arguments.length;J++){var Ze=null!=arguments[J]?arguments[J]:{};J%2?qa(Object(Ze),!0).forEach(function(aa){nl(_c,aa,Ze[aa])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_c,Object.getOwnPropertyDescriptors(Ze)):qa(Object(Ze)).forEach(function(aa){Object.defineProperty(_c,aa,Object.getOwnPropertyDescriptor(Ze,aa))})}return _c}function nl(_c,J,Ze){return J in _c?Object.defineProperty(_c,J,{value:Ze,enumerable:!0,configurable:!0,writable:!0}):_c[J]=Ze,_c}var _c;(_c=k||(k={})).VERSION="v",_c.ORIGIN="o",_c.SESSION_NAME="s",_c.INFORMATION="i",_c.URI="u",_c.EMAIL="e",_c.PHONE="p",_c.CONNECTION="c",_c.BANDWIDTH="b",_c.TIME="t",_c.REPEAT="r",_c.ZONE_ADJUSTMENTS="z",_c.KEY="k",_c.ATTRIBUTE="a",_c.MEDIA="m";class Wc{consumeText(J,Ze){let aa=Ze;for(;aa<J.length;){const Xa=J[aa];if("\0"===Xa||"\r"===Xa||Xa===C)break;aa+=1}if(aa-Ze==0)throw new Error("Invalid text, at ".concat(J));return aa}consumeUnicastAddress(J,Ze,aa){return this.consumeTill(J,Ze,N)}consumeOneOrMore(J,Ze,aa){let Xa=Ze;for(;aa(J[Xa]);)Xa++;if(Xa-Ze==0)throw new Error("Invalid rule at ".concat(Ze,"."));return Xa}consumeSpace(J,Ze){if(J[Ze]===N)return Ze+1;throw new Error("Invalid space at ".concat(Ze,"."))}consumeIP4Address(J,Ze){let aa=Ze;for(let Xa=0;Xa<4;Xa++)if(aa=this.consumeDecimalUChar(J,aa),3!==Xa){if("."!==J[aa])throw new Error("Invalid IP4 address.");aa++}return aa}consumeDecimalUChar(J,Ze){let aa=Ze;for(let vl=0;vl<3&&U(J[aa]);vl++,aa++);if(aa-Ze==0)throw new Error("Invalid decimal uchar.");const Xa=parseInt(J.slice(Ze,aa));if(Xa>=0&&Xa<=255)return aa;throw new Error("Invalid decimal uchar")}consumeIP6Address(J,Ze){let aa=this.consumeHexpart(J,Ze);return":"===J[aa]&&(aa+=1,aa=this.consumeIP4Address(J,aa)),aa}consumeHexpart(J,Ze){let aa=Ze;if(":"===J[aa]&&":"===J[aa+1]){aa+=2;try{aa=this.consumeHexseq(J,aa)}catch(Xa){}return aa}if(aa=this.consumeHexseq(J,aa),":"===J[aa]&&":"===J[aa+1]){aa+=2;try{aa=this.consumeHexseq(J,aa)}catch(Xa){}return aa}return aa}consumeHexseq(J,Ze){let aa=Ze;for(;aa=this.consumeHex4(J,aa),":"===J[aa]&&":"!==J[aa+1];)aa+=1;return aa}consumeHex4(J,Ze){let aa=0;for(;aa<4;aa++)if(!((Xa=J[Ze+aa])>="0"&&Xa<="9"||Xa>="a"&&Xa<="f"||Xa>="A"&&Xa<="F")){if(0===aa)throw new Error("Invalid hex 4");break}var Xa;return Ze+aa}consumeFQDN(J,Ze){let aa=Ze;for(;U(J[aa])||ye(J[aa])||"-"===J[aa]||"."===J[aa];)aa+=1;if(aa-Ze<4)throw new Error("Invalid FQDN");return aa}consumeExtnAddr(J,Ze){return this.consumeOneOrMore(J,Ze,K)}consumeMulticastAddress(J,Ze,aa){switch(aa){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(J,Ze);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(J,Ze);default:try{return this.consumeFQDN(J,Ze)}catch(Xa){return this.consumeExtnAddr(J,Ze)}}}consumeIP6MulticastAddress(J,Ze){const aa=this.consumeHexpart(J,Ze);return"/"===J[aa]?this.consumeInteger(J,aa+1):aa}consumeIP4MulticastAddress(J,Ze){let aa=Ze+3;const Xa=J.slice(Ze,aa),vl=parseInt(Xa);if(vl<224||vl>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let Oh=0;Oh<3;Oh++){if("."!==J[aa])throw new Error("Invalid IP4 multicast address.");aa+=1,aa=this.consumeDecimalUChar(J,aa)}return"/"===J[aa]&&(aa+=1),aa=this.consumeTTL(J,aa),"/"===J[aa]&&(aa=this.consumeInteger(J,aa)),aa}consumeInteger(J,Ze){if(!Z(J[Ze]))throw new Error("Invalid integer.");for(Ze+=1;U(J[Ze]);)Ze+=1;return Ze}consumeTTL(J,Ze){if("0"===J[Ze])return Ze+1;if(!Z(J[Ze]))throw new Error("Invalid TTL.");Ze+=1;for(let aa=0;aa<2&&U(J[Ze]);aa++)Ze+=1;return Ze}consumeToken(J,Ze){return this.consumeOneOrMore(J,Ze,$)}consumeTime(J,Ze){let aa=Ze;if("0"===J[aa])return aa+1;for(Z(J[aa])&&(aa+=1);U(J[aa]);)aa++;if(aa-Ze<10)throw new Error("Invalid time");return aa}consumeAddress(J,Ze){return this.consumeTill(J,Ze,N)}consumeTypedTime(J,Ze){let aa=Ze;return aa=this.consumeOneOrMore(J,aa,U),be(J[aa])?aa+1:aa}consumeRepeatInterval(J,Ze){if(!Z(J[Ze]))throw new Error("Invalid repeat interval");for(Ze+=1;U(J[Ze]);)Ze+=1;return be(J[Ze])&&(Ze+=1),Ze}consumePort(J,Ze){return this.consumeOneOrMore(J,Ze,U)}consume(J,Ze,aa){for(let Xa=0;Xa<aa.length;Xa++){if(Ze+Xa>=J.length)throw new Error("consume exceeding value length");if(J[Ze+Xa]!==aa[Xa])throw new Error("consume ".concat(aa," failed at ").concat(Xa))}return Ze+aa.length}consumeTill(J,Ze,aa){let Xa=Ze;for(;Xa<J.length&&("string"!=typeof aa||J[Xa]!==aa)&&("function"!=typeof aa||!aa(J[Xa]));)Xa++;return Xa}}class El extends Wc{constructor(){super(),nl(this,"records",[]),nl(this,"currentLine",0)}parse(J){const Ze=this.probeEOL(J);this.records=J.split(Ze).filter(Uy=>!!Uy.trim()).map(this.parseLine),this.currentLine=0;const aa=this.parseVersion(),Xa=this.parseOrigin(),vl=this.parseSessionName(),Oh=this.parseInformation(),ff=this.parseUri(),Rh=this.parseEmail(),Cg=this.parsePhone(),cf=this.parseConnection(),Vp=this.parseBandWidth(),_d=this.parseTimeFields(),Gp=this.parseKey(),Lh=this.parseSessionAttribute(),Op=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:aa,origin:Xa,sessionName:vl,information:Oh,uri:ff,emails:Rh,phones:Cg,connection:cf,bandwidths:Vp,timeFields:_d,key:Gp,attributes:Lh,mediaDescriptions:Op}}getCurrentRecord(){const J=this.records[this.currentLine];if(!J)throw new Error("Record doesn't exit.");return J}probeEOL(J){for(let Ze=0;Ze<J.length;Ze++)if(J[Ze]===C)return"\r"===J[Ze-1]?y:C;throw new Error("Invalid newline character.")}parseLine(J,Ze){if(J.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const aa=J[0];if("="!==J[1])throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:aa,value:J.slice(2),line:Ze,cur:0}}parseSessionAttribute(){const J=new Kl;for(;this.currentLine<this.records.length;){const Ze=this.getCurrentRecord();if(Ze.type!==k.ATTRIBUTE)break;const aa={attField:this.extractOneOrMore(Ze,Xa=>$(Xa)&&":"!==Xa),_cur:0};":"===Ze.value[Ze.cur]&&(Ze.cur+=1,aa.attValue=this.extractOneOrMore(Ze,_s)),J.parse(aa),this.currentLine++}return J.digest()}parseMediaAttributes(J){const Ze=new sl(J);for(;this.currentLine<this.records.length;){const aa=this.getCurrentRecord();if(aa.type!==k.ATTRIBUTE)break;const Xa={attField:this.extractOneOrMore(aa,vl=>$(vl)&&":"!==vl),_cur:0};":"===aa.value[aa.cur]&&(aa.cur+=1,Xa.attValue=this.extractOneOrMore(aa,_s)),Ze.parse(Xa),this.currentLine++}return Ze.digest()}parseKey(){const J=this.getCurrentRecord();if(J.type===k.KEY){if("prompt"===J.value||"clear:"===J.value||"base64:"===J.value||"uri:"===J.value)return J.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const J=this.getCurrentRecord();if(J.type===k.ZONE_ADJUSTMENTS){const Ze=[];for(;;)try{const aa=this.extract(J,this.consumeTime);this.consumeSpaceForRecord(J);let Xa=!1;"-"===J.value[J.cur]&&(Xa=!0,J.cur+=1);const vl=this.extract(J,this.consumeTypedTime);Ze.push({time:aa,typedTime:vl,back:Xa})}catch(aa){break}if(0===Ze.length)throw new Error("Invalid zone adjustments");return this.currentLine++,Ze}return[]}parseRepeat(){const J=[];for(;;){const Ze=this.getCurrentRecord();if(Ze.type!==k.REPEAT)break;{const aa=this.extract(Ze,this.consumeRepeatInterval),Xa=this.parseTypedTime(Ze);J.push({repeatInterval:aa,typedTimes:Xa}),this.currentLine++}}return J}parseTypedTime(J){const Ze=[];for(;;)try{this.consumeSpaceForRecord(J),Ze.push(this.extract(J,this.consumeTypedTime))}catch(aa){break}if(0===Ze.length)throw new Error("Invalid typed time.");return Ze}parseTime(){const J=this.getCurrentRecord(),Ze=this.extract(J,this.consumeTime);this.consumeSpaceForRecord(J);const aa=this.extract(J,this.consumeTime);return this.currentLine++,{startTime:Ze,stopTime:aa}}parseBandWidth(){const J=[];for(;this.currentLine<this.records.length;){const Ze=this.getCurrentRecord();if(Ze.type!==k.BANDWIDTH)break;{const aa=this.extractOneOrMore(Ze,$);if(":"!==Ze.value[Ze.cur])throw new Error("Invalid bandwidth field.");Ze.cur++;const Xa=this.extractOneOrMore(Ze,U);J.push({bwtype:aa,bandwidth:Xa}),this.currentLine++}}return J}parseVersion(){const J=this.getCurrentRecord();if(J.type!==k.VERSION)throw new Error("first sdp record must be version");const Ze=J.value.slice(0,this.consumeOneOrMore(J.value,0,U));if(Ze.length!==J.value.length)throw new Error('invalid proto version, "v='.concat(J.value,'"'));return this.currentLine++,Ze}parseOrigin(){const J=this.getCurrentRecord();if(J.type!==k.ORIGIN)throw new Error("second line of sdp must be origin");const Ze=this.extractOneOrMore(J,K);this.consumeSpaceForRecord(J);const aa=this.extractOneOrMore(J,U);this.consumeSpaceForRecord(J);const Xa=this.extractOneOrMore(J,U);this.consumeSpaceForRecord(J);const vl=this.extractOneOrMore(J,$);this.consumeSpaceForRecord(J);const Oh=this.extractOneOrMore(J,$);this.consumeSpaceForRecord(J);const ff=this.extract(J,this.consumeUnicastAddress);return this.currentLine++,{username:Ze,sessId:aa,sessVersion:Xa,nettype:vl,addrtype:Oh,unicastAddress:ff}}parseSessionName(){const J=this.getCurrentRecord();if(J.type===k.SESSION_NAME){const Ze=this.extract(J,this.consumeText);return this.currentLine++,Ze}}parseInformation(){const J=this.getCurrentRecord();if(J.type!==k.INFORMATION)return;const Ze=this.extract(J,this.consumeText);return this.currentLine++,Ze}parseUri(){const J=this.getCurrentRecord();if(J.type===k.URI)return this.currentLine++,J.value}parseEmail(){const J=[];for(;;){const Ze=this.getCurrentRecord();if(Ze.type!==k.EMAIL)break;J.push(Ze.value),this.currentLine++}return J}parsePhone(){const J=[];for(;;){const Ze=this.getCurrentRecord();if(Ze.type!==k.PHONE)break;J.push(Ze.value),this.currentLine++}return J}parseConnection(){const J=this.getCurrentRecord();if(J.type===k.CONNECTION){const Ze=this.extractOneOrMore(J,$);this.consumeSpaceForRecord(J);const aa=this.extractOneOrMore(J,$);this.consumeSpaceForRecord(J);const Xa=this.extract(J,this.consumeAddress);return this.currentLine++,{nettype:Ze,addrtype:aa,address:Xa}}}parseMedia(){const J=this.getCurrentRecord(),Ze=this.extract(J,this.consumeToken);this.consumeSpaceForRecord(J);let aa=this.extract(J,this.consumePort);"/"===J.value[J.cur]&&(J.cur+=1,aa+=this.extract(J,this.consumeInteger)),this.consumeSpaceForRecord(J);const Xa=[];for(Xa.push(this.extract(J,this.consumeToken));"/"===J.value[J.cur];)J.cur+=1,Xa.push(this.extract(J,this.consumeToken));if(0===Xa.length)throw new Error("Invalid proto");const vl=this.parseFmt(J);return this.currentLine++,{mediaType:Ze,port:aa,protos:Xa,fmts:vl}}parseTimeFields(){const J=[];for(;this.getCurrentRecord().type===k.TIME;){const Ze=this.parseTime(),aa=this.parseRepeat(),Xa=this.parseZone();J.push({time:Ze,repeats:aa,zones:Xa})}return J}parseMediaDescription(){const J=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===k.MEDIA;){const Ze=this.parseMedia(),aa=this.parseInformation(),Xa=this.parseConnections(),vl=this.parseBandWidth(),Oh=this.parseKey(),ff=this.parseMediaAttributes(Ze);J.push({media:Ze,information:aa,connections:Xa,bandwidths:vl,key:Oh,attributes:ff})}return J}parseConnections(){const J=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===k.CONNECTION;)J.push(this.parseConnection());return J}parseFmt(J){const Ze=[];for(;;)try{this.consumeSpaceForRecord(J),Ze.push(this.extract(J,this.consumeToken))}catch(aa){break}if(0===Ze.length)throw new Error("Invalid fmts");return Ze}extract(J,Ze,...aa){const Xa=Ze.call(this,J.value,J.cur,...aa),vl=J.value.slice(J.cur,Xa);return J.cur=Xa,vl}extractOneOrMore(J,Ze){const aa=this.consumeOneOrMore(J.value,J.cur,Ze),Xa=J.value.slice(J.cur,aa);return J.cur=aa,Xa}consumeSpaceForRecord(J){if(J.value[J.cur]!==N)throw new Error("Invalid space at ".concat(J.cur,"."));J.cur+=1}}class Dl extends Wc{constructor(...J){super(...J),nl(this,"attributes",void 0),nl(this,"digested",!1)}extractOneOrMore(J,Ze,aa){const Xa=this.consumeOneOrMore(J.attValue,J._cur,Ze),vl=J.attValue.slice(J._cur,Xa),[Oh,ff]=aa||[];if("number"==typeof Oh&&vl.length<Oh)throw new Error("error in length, should be more or equal than ".concat(Oh," characters."));if("number"==typeof ff&&vl.length>ff)throw new Error("error in length, should be less or equal than ".concat(ff," characters."));return J._cur=Xa,vl}consumeAttributeSpace(J){if(J.attValue[J._cur]!==N)throw new Error("Invalid space at ".concat(J._cur,"."));J._cur+=1}extract(J,Ze,...aa){if(!J.attValue)throw new Error("Nothing to extract from attValue.");const Xa=Ze.call(this,J.attValue,J._cur,...aa),vl=J.attValue.slice(J._cur,Xa);return J._cur=Xa,vl}atEnd(J){if(!J.attValue)throw new Error;return J._cur>=J.attValue.length}peekChar(J){if(!J.attValue)throw new Error;return J.attValue[J._cur]}peek(J,Ze){if(!J.attValue)throw new Error;for(let aa=0;aa<Ze.length;aa++)if(Ze[aa]!==J.attValue[J._cur+aa])return!1;return!0}parseIceUfrag(J){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(J,ua,[4,256])}parseIcePwd(J){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(J,ua,[22,256])}parseIceOptions(J){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const Ze=[];for(;!this.atEnd(J);){Ze.push(this.extractOneOrMore(J,ua));try{this.consumeAttributeSpace(J)}catch(aa){if(this.atEnd(J))break;throw aa}}this.attributes.iceOptions=Ze}parseFingerprint(J){const Ze=this.extract(J,this.consumeToken);this.consumeAttributeSpace(J);const aa=this.extract(J,this.consumeTill);this.attributes.fingerprints.push({hashFunction:Ze,fingerprint:aa})}parseExtmap(J){const Ze=this.extractOneOrMore(J,U);let aa;"/"===this.peekChar(J)&&(this.extract(J,this.consume,"/"),aa=this.extract(J,this.consumeToken)),this.consumeAttributeSpace(J);const Xa=this.extract(J,this.consumeTill,N),vl=Ua(Ua({entry:parseInt(Ze,10)},aa&&{direction:aa}),{},{extensionName:Xa});this.peekChar(J)===N&&(this.consumeAttributeSpace(J),vl.extensionAttributes=this.extract(J,this.consumeTill)),this.attributes.extmaps.push(vl)}parseSetup(J){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const Ze=this.extract(J,this.consumeTill);if("active"!==Ze&&"passive"!==Ze&&"actpass"!==Ze&&"holdconn"!==Ze)throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=Ze}}class Kl extends Dl{constructor(...J){super(...J),nl(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(J){if(this.digested)throw new Error("already digested");try{switch(J.attField){case"group":this.parseGroup(J);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(J);break;case"ice-pwd":this.parseIcePwd(J);break;case"ice-options":this.parseIceOptions(J);break;case"fingerprint":this.parseFingerprint(J);break;case"setup":this.parseSetup(J);break;case"tls-id":this.parseTlsId(J);break;case"identity":this.parseIdentity(J);break;case"extmap":this.parseExtmap(J);break;case"msid-semantic":this.parseMsidSemantic(J);break;default:J.ignored=!0,this.attributes.unrecognized.push(J)}}catch(Ze){throw console.error("parsing session attribute ".concat(J.attField,' error, "a=').concat(J.attField,":").concat(J.attValue,'"')),Ze}if(!J.ignored&&J.attValue&&!this.atEnd(J))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(J){const Ze=this.extract(J,this.consumeToken),aa=[];for(;!this.atEnd(J)&&this.peekChar(J)===N;)this.consumeAttributeSpace(J),aa.push(this.extract(J,this.consumeToken));this.attributes.groups.push({semantic:Ze,identificationTag:aa})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(J){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(J,ma)}parseIdentity(J){const Ze=this.extractOneOrMore(J,pc),aa=[];for(;!this.atEnd(J)&&this.peekChar(J)===N;){this.consumeAttributeSpace(J);const Xa=this.extract(J,this.consumeToken);this.extract(J,this.consume,"=");const vl=this.extractOneOrMore(J,Oh=>Oh!==N&&_s(Oh));aa.push({name:Xa,value:vl})}this.attributes.identities.push({assertionValue:Ze,extensions:aa})}parseMsidSemantic(J){this.peekChar(J)===N&&this.consumeAttributeSpace(J);const Ze={semantic:this.extract(J,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(J)}catch(aa){break}if("*"===this.peekChar(J)){this.extract(J,this.consume,"*"),Ze.applyForAll=!0;break}{const aa=this.extract(J,this.consumeTill,N);Ze.identifierList.push(aa)}}this.attributes.msidSemantic=Ze}}class sl extends Dl{constructor(J){super(),nl(this,"attributes",void 0),-1!==J.protos.indexOf("RTP")||J.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(J){if(this.digested)throw new Error("already digested");try{switch(J.attField){case"extmap":this.parseExtmap(J);break;case"setup":this.parseSetup(J);break;case"ice-ufrag":this.parseIceUfrag(J);break;case"ice-pwd":this.parseIcePwd(J);break;case"ice-options":this.parseIceOptions(J);break;case"candidate":this.parseCandidate(J);break;case"remote-candidate":this.parseRemoteCandidate(J);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(J);break;case"rtpmap":this.parseRtpmap(J);break;case"ptime":this.parsePtime(J);break;case"maxptime":this.parseMaxPtime(J);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(J);break;case"ssrc":this.parseSSRC(J);break;case"fmtp":this.parseFmtp(J);break;case"rtcp-fb":this.parseRtcpFb(J);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(J);break;case"mid":this.parseMid(J);break;case"msid":this.parseMsid(J);break;case"imageattr":this.parseImageAttr(J);break;case"rid":this.parseRid(J);break;case"simulcast":this.parseSimulcast(J);break;case"sctp-port":this.parseSctpPort(J);break;case"max-message-size":this.parseMaxMessageSize(J);break;case"ssrc-group":this.parseSSRCGroup(J);break;default:J.ignored=!0,this.attributes.unrecognized.push(J)}}catch(Ze){throw console.error("parsing media attribute ".concat(J.attField,' error, "a=').concat(J.attField,":").concat(J.attValue,'"')),Ze}if(!J.ignored&&J.attValue&&!this.atEnd(J))throw new Error("attribute parsing error")}parseCandidate(J){const Ze=this.extractOneOrMore(J,ua,[1,32]);this.consumeAttributeSpace(J);const aa=this.extractOneOrMore(J,U,[1,5]);this.consumeAttributeSpace(J);const Xa=this.extract(J,this.consumeToken);this.consumeAttributeSpace(J);const vl=this.extractOneOrMore(J,U,[1,10]);this.consumeAttributeSpace(J);const Oh=this.extract(J,this.consumeAddress);this.consumeAttributeSpace(J);const ff=this.extract(J,this.consumePort);this.consumeAttributeSpace(J),this.extract(J,this.consume,"typ"),this.consumeAttributeSpace(J);const Rh={foundation:Ze,componentId:aa,transport:Xa,priority:vl,connectionAddress:Oh,port:ff,type:this.extract(J,this.consumeToken),extension:{}};for(this.peek(J," raddr")&&(this.extract(J,this.consume," raddr"),this.consumeAttributeSpace(J),Rh.relAddr=this.extract(J,this.consumeAddress)),this.peek(J," rport")&&(this.extract(J,this.consume," rport"),this.consumeAttributeSpace(J),Rh.relPort=this.extract(J,this.consumePort));this.peekChar(J)===N;){this.consumeAttributeSpace(J);const Cg=this.extract(J,this.consumeToken);this.consumeAttributeSpace(J),Rh.extension[Cg]=this.extractOneOrMore(J,V)}this.attributes.candidates.push(Rh)}parseRemoteCandidate(J){const Ze=[];for(;;){const aa=this.extractOneOrMore(J,U,[1,5]);this.consumeAttributeSpace(J);const Xa=this.extract(J,this.consumeAddress);this.consumeAttributeSpace(J);const vl=this.extract(J,this.consumePort);Ze.push({componentId:aa,connectionAddress:Xa,port:vl});try{this.consumeAttributeSpace(J)}catch(Oh){break}}this.attributes.remoteCandidatesList.push(Ze)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(J){const Ze=this.extract(J,this.consumeToken);this.consumeAttributeSpace(J);const aa=this.extract(J,this.consumeTill,"/");this.extract(J,this.consume,"/");const Xa={encodingName:aa,clockRate:this.extractOneOrMore(J,U)};this.atEnd(J)||"/"!==this.peekChar(J)||(this.extract(J,this.consume,"/"),Xa.encodingParameters=parseInt(this.extract(J,this.consumeTill),10));const vl=this.attributes.payloads.find(Oh=>Oh.payloadType===parseInt(Ze,10));vl?vl.rtpMap=Xa:this.attributes.payloads.push({payloadType:parseInt(Ze,10),rtpMap:Xa,rtcpFeedbacks:[]})}parsePtime(J){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(J,this.consumeTill)}parseMaxPtime(J){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(J,this.consumeTill)}parseDirection(J){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=J.attField}parseSSRC(J){const Ze=this.extractOneOrMore(J,U);this.consumeAttributeSpace(J);const aa=this.extract(J,this.consumeTill,":");let Xa;":"===this.peekChar(J)&&(this.extract(J,this.consume,":"),Xa=this.extract(J,this.consumeTill));const vl=this.attributes.ssrcs.find(Oh=>Oh.ssrcId===parseInt(Ze,10));vl?vl.attributes[aa]=Xa:this.attributes.ssrcs.push({ssrcId:parseInt(Ze,10),attributes:{[aa]:Xa}})}parseFmtp(J){const Ze=this.extract(J,this.consumeTill,N);this.consumeAttributeSpace(J);const aa=this.extract(J,this.consumeTill),Xa={};aa.split(";").forEach(Oh=>{let[ff,Rh]=Oh.split("=");ff=ff.trim();const Cg="string"==typeof Rh?Rh.trim():null;"string"==typeof ff&&ff.length>0&&(Xa[ff]=Cg)});const vl=this.attributes.payloads.find(Oh=>Oh.payloadType===parseInt(Ze,10));vl?vl.fmtp={parameters:Xa}:this.attributes.payloads.push({payloadType:parseInt(Ze,10),rtcpFeedbacks:[],fmtp:{parameters:Xa}})}parseFmtParameters(J){const Ze={},aa=this.extract(J,this.consumeTill,"=");J._cur++;const Xa=this.extract(J,this.consumeTill,";");for(Ze[aa]=Xa;";"===J.attValue[J._cur];){const vl=this.extract(J,this.consumeTill,"=");J._cur++;const Oh=this.extract(J,this.consumeTill,";");Ze[vl]=Oh}return Ze}parseRtcpFb(J){let Ze="";Ze="*"===this.peekChar(J)?this.extract(J,this.consume,"*"):this.extract(J,this.consumeTill,N),this.consumeAttributeSpace(J);const aa=this.extract(J,this.consumeTill,N);let Xa;if("trr-int"===aa)Xa={type:aa,interval:this.extract(J,this.consumeTill)};else{const vl={type:aa};this.peekChar(J)===N&&(this.consumeAttributeSpace(J),vl.parameter=this.extract(J,this.consumeToken),this.peekChar(J)===N&&(vl.additional=this.extract(J,this.consumeTill))),Xa=vl}if("*"===Ze)this.attributes.rtcpFeedbackWildcards.push(Xa);else{const vl=this.attributes.payloads.find(Oh=>Oh.payloadType===parseInt(Ze,10));vl?vl.rtcpFeedbacks.push(Xa):this.attributes.payloads.push({payloadType:parseInt(Ze,10),rtcpFeedbacks:[Xa]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(J){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const Ze={port:this.extract(J,this.consumePort)};this.peekChar(J)===N&&(this.consumeAttributeSpace(J),Ze.netType=this.extractOneOrMore(J,$),this.consumeAttributeSpace(J),Ze.addressType=this.extractOneOrMore(J,$),this.consumeAttributeSpace(J),Ze.address=this.extract(J,this.consumeAddress)),this.attributes.rtcp=Ze}parseMsid(J){const Ze={id:this.extractOneOrMore(J,$,[1,64])};this.peekChar(J)===N&&(this.consumeAttributeSpace(J),Ze.appdata=this.extractOneOrMore(J,$,[1,64])),this.attributes.msids.push(Ze)}parseImageAttr(J){this.attributes.imageattr.push(J.attValue)}parseRid(J){const Ze=this.extractOneOrMore(J,Xa=>ye(Xa)||U(Xa)||"_"===Xa||"-"===Xa);this.consumeAttributeSpace(J);const aa={id:Ze,direction:this.extract(J,this.consumeToken),params:[]};if(this.peekChar(J)===N){if(this.consumeAttributeSpace(J),this.peek(J,"pt=")){this.extract(J,this.consume,"pt=");const Xa=[];for(;;){const vl=this.extract(J,this.consumeToken);Xa.push(vl);try{this.extract(J,this.consume,",")}catch(Oh){break}}aa.payloads=Xa,this.peekChar(J)===N&&this.extract(J,this.consume,N)}for(;;){const Xa=this.extract(J,this.consumeToken);switch(Xa){case"depend":{const vl={type:Xa,rids:this.extract(J,this.consume,"=").split(",")};aa.params.push(vl);break}default:{const vl={type:Xa};"="===this.peekChar(J)&&(this.extract(J,this.consume,"="),vl.val=this.extract(J,this.consumeTill,";")),aa.params.push(vl)}}try{this.extract(J,this.consume,";")}catch(vl){break}}}this.attributes.rids.push(aa)}parseSimulcast(J){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=J.attValue,this.extract(J,this.consumeTill)}parseSctpPort(J){this.attributes.sctpPort=this.extractOneOrMore(J,U,[1,5])}parseMaxMessageSize(J){this.attributes.maxMessageSize=this.extractOneOrMore(J,U,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(J){this.attributes.mid=this.extract(J,this.consumeToken)}parseSSRCGroup(J){const Ze=this.extract(J,this.consumeToken),aa=[];for(;;)try{this.consumeAttributeSpace(J);const Xa=this.extract(J,this.consumeInteger);aa.push(parseInt(Xa,10))}catch(Xa){break}this.attributes.ssrcGroups.push({semantic:Ze,ssrcIds:aa})}}function _a(_c,J,Ze){return J in _c?Object.defineProperty(_c,J,{value:Ze,enumerable:!0,configurable:!0,writable:!0}):_c[J]=Ze,_c}class Qa{constructor(){_a(this,"eol",y)}print(J,Ze){let aa="";return Ze&&(this.eol=Ze),aa+=this.printVersion(J.version),aa+=this.printOrigin(J.origin),aa+=this.printSessionName(J.sessionName),aa+=this.printInformation(J.information),aa+=this.printUri(J.uri),aa+=this.printEmail(J.emails),aa+=this.printPhone(J.phones),aa+=this.printConnection(J.connection),aa+=this.printBandwidth(J.bandwidths),aa+=this.printTimeFields(J.timeFields),aa+=this.printKey(J.key),aa+=this.printSessionAttributes(J.attributes),aa+=this.printMediaDescription(J.mediaDescriptions),aa}printVersion(J){return"v=".concat(J).concat(this.eol)}printOrigin(J){return"o=".concat(J.username," ").concat(J.sessId," ").concat(J.sessVersion," ").concat(J.nettype," ").concat(J.addrtype," ").concat(J.unicastAddress).concat(this.eol)}printSessionName(J){return J?"s=".concat(J).concat(this.eol):""}printInformation(J){return J?"i=".concat(J).concat(this.eol):""}printUri(J){return J?"u=".concat(J).concat(this.eol):""}printEmail(J){let Ze="";for(const aa of J)Ze+="e=".concat(aa).concat(this.eol);return Ze}printPhone(J){let Ze="";for(const aa of J)Ze+="e=".concat(aa).concat(this.eol);return Ze}printConnection(J){return J?"c=".concat(J.nettype," ").concat(J.addrtype," ").concat(J.address).concat(this.eol):""}printBandwidth(J){let Ze="";for(const aa of J)Ze+="b=".concat(aa.bwtype,":").concat(aa.bandwidth).concat(this.eol);return Ze}printTimeFields(J){let Ze="";for(const aa of J){Ze+="t=".concat(aa.time.startTime," ").concat(aa.time.startTime).concat(this.eol);for(const Xa of aa.repeats)Ze+="r=".concat(Xa.repeatInterval," ").concat(Xa.typedTimes.join(" ")).concat(this.eol);aa.zoneAdjustments&&(Ze+="z=",Ze+="z=".concat(aa.zoneAdjustments.map(Xa=>"".concat(Xa.time," ").concat(Xa.back?"-":""," ").concat(Xa.typedTime)).join(" ")).concat(this.eol),Ze+=this.eol)}return Ze}printKey(J){return J?"k=".concat(J).concat(this.eol):""}printAttributes(J){let Ze="";for(const aa of J)Ze+="a=".concat(aa.attField).concat(aa.attValue?":".concat(aa.attValue):"").concat(this.eol);return Ze}printMediaDescription(J){let Ze="";for(const aa of J)Ze+=this.printMedia(aa.media),Ze+=this.printInformation(aa.information),Ze+=this.printConnections(aa.connections),Ze+=this.printBandwidth(aa.bandwidths),Ze+=this.printKey(aa.key),Ze+=this.printMediaAttributes(aa);return Ze}printConnections(J){let Ze="";for(const aa of J)Ze+=this.printConnection(aa);return Ze}printMedia(J){return"m=".concat(J.mediaType," ").concat(J.port," ").concat(J.protos.join("/")," ").concat(J.fmts.join(" ")).concat(this.eol)}printSessionAttributes(J){return new Aa(this.eol).print(J)}printMediaAttributes(J){return new Ya(this.eol).print(J)}}class ca{constructor(J){_a(this,"eol",void 0),this.eol=J}printIceUfrag(J){return void 0===J?"":"a=ice-ufrag:".concat(J).concat(this.eol)}printIcePwd(J){return void 0===J?"":"a=ice-pwd:".concat(J).concat(this.eol)}printIceOptions(J){return void 0===J?"":"a=ice-options:".concat(J.join(N)).concat(this.eol)}printFingerprints(J){return J.length>0?J.map(Ze=>"a=fingerprint:".concat(Ze.hashFunction).concat(N).concat(Ze.fingerprint)).join(this.eol)+this.eol:""}printExtmap(J){return J.map(Ze=>"a=extmap:".concat(Ze.entry).concat(Ze.direction?"/".concat(Ze.direction):"").concat(N).concat(Ze.extensionName).concat(Ze.extensionAttributes?"".concat(N).concat(Ze.extensionAttributes):"").concat(this.eol)).join("")}printSetup(J){return void 0===J?"":"a=setup:".concat(J).concat(this.eol)}printUnrecognized(J){return J.map(Ze=>"a=".concat(Ze.attField).concat(Ze.attValue?":".concat(Ze.attValue):"").concat(this.eol)).join("")}}class Aa extends ca{print(J){let Ze="";return Ze+=this.printGroups(J.groups),Ze+=this.printMsidSemantic(J.msidSemantic),Ze+=this.printIceLite(J.iceLite),Ze+=this.printIceUfrag(J.iceUfrag),Ze+=this.printIcePwd(J.icePwd),Ze+=this.printIceOptions(J.iceOptions),Ze+=this.printFingerprints(J.fingerprints),Ze+=this.printSetup(J.setup),Ze+=this.printTlsId(J.tlsId),Ze+=this.printIdentity(J.identities),Ze+=this.printExtmap(J.extmaps),Ze+=this.printUnrecognized(J.unrecognized),Ze}printGroups(J){let Ze="";return J.length>0&&(Ze+=J.map(aa=>"a=group:".concat(aa.semantic).concat(aa.identificationTag.map(Xa=>"".concat(N).concat(Xa)).join("")).concat(this.eol)).join("")),Ze}printIceLite(J){return void 0===J?"":"a=ice-lite"+this.eol}printTlsId(J){return J?"a=tls-id:".concat(J).concat(this.eol):""}printIdentity(J){return 0===J.length?"":J.map(Ze=>"a=identity:".concat(Ze.assertionValue).concat(Ze.extensions.map(aa=>"".concat(N).concat(aa.name).concat(aa.value?"=".concat(aa.value):"")))).join(this.eol)+this.eol}printMsidSemantic(J){if(!J)return"";let Ze="a=msid-semantic:".concat(J.semantic);return J.applyForAll?Ze+="".concat(N,"*"):J.identifierList.length>0&&(Ze+=J.identifierList.map(aa=>"".concat(N).concat(aa))),Ze+this.eol}}class Ya extends ca{print(J){const Ze=J.attributes;let aa="";return aa+=this.printRTCP(Ze.rtcp),aa+=this.printIceUfrag(Ze.iceUfrag),aa+=this.printIcePwd(Ze.icePwd),aa+=this.printIceOptions(Ze.iceOptions),aa+=this.printCandidates(Ze.candidates),aa+=this.printRemoteCandidatesList(Ze.remoteCandidatesList),aa+=this.printEndOfCandidates(Ze.endOfCandidates),aa+=this.printFingerprints(Ze.fingerprints),aa+=this.printSetup(Ze.setup),aa+=this.printMid(Ze.mid),aa+=this.printExtmap(Ze.extmaps),aa+=this.printRTPRelated(Ze),aa+=this.printPtime(Ze.ptime),aa+=this.printMaxPtime(Ze.maxPtime),aa+=this.printDirection(Ze.direction),aa+=this.printSSRCGroups(Ze.ssrcGroups),aa+=this.printSSRC(Ze.ssrcs),aa+=this.printRTCPMux(Ze.rtcpMux),aa+=this.printRTCPMuxOnly(Ze.rtcpMuxOnly),aa+=this.printRTCPRsize(Ze.rtcpRsize),aa+=this.printMSId(Ze.msids),aa+=this.printImageattr(Ze.imageattr),aa+=this.printRid(Ze.rids),aa+=this.printSimulcast(Ze.simulcast),aa+=this.printSCTPPort(Ze.sctpPort),aa+=this.printMaxMessageSize(Ze.maxMessageSize),aa+=this.printUnrecognized(Ze.unrecognized),aa}printCandidates(J){return J.map(Ze=>"a=candidate:".concat(Ze.foundation).concat(N).concat(Ze.componentId).concat(N).concat(Ze.transport).concat(N).concat(Ze.priority).concat(N).concat(Ze.connectionAddress).concat(N).concat(Ze.port).concat(N,"typ").concat(N).concat(Ze.type).concat(Ze.relAddr?"".concat(N,"raddr").concat(N).concat(Ze.relAddr):"").concat(Ze.relPort?"".concat(N,"rport").concat(N).concat(Ze.relPort):"").concat(Object.keys(Ze.extension).map(aa=>"".concat(N).concat(aa).concat(N).concat(Ze.extension[aa])).join("")).concat(this.eol)).join("")}printRemoteCandidatesList(J){return J.map(Ze=>"a=remote-candidates:".concat(Ze.join(N)).concat(this.eol)).join("")}printEndOfCandidates(J){return void 0===J?"":"a=end-of-candidates"+this.eol}printRTPRelated(J){if(!J.payloads)return"";const Ze=J.payloads;let aa="";aa+=J.rtcpFeedbackWildcards.map(Xa=>this.printRTCPFeedback("*",Xa)).join("");for(const Xa of Ze)aa+=this.printRtpMap(Xa.payloadType,Xa.rtpMap),aa+=this.printFmtp(Xa.payloadType,Xa.fmtp),aa+=Xa.rtcpFeedbacks.map(vl=>this.printRTCPFeedback(Xa.payloadType,vl)).join("");return aa}printFmtp(J,Ze){if(!Ze)return"";const aa=Object.keys(Ze.parameters);return 1===aa.length&&null===Ze.parameters[aa[0]]?"a=fmtp:".concat(J).concat(N).concat(aa[0]).concat(this.eol):"a=fmtp:".concat(J).concat(N).concat(Object.keys(Ze.parameters).map(Xa=>"".concat(Xa,"=").concat(Ze.parameters[Xa])).join(";")).concat(this.eol)}printRtpMap(J,Ze){return Ze?"a=rtpmap:".concat(J).concat(N).concat(Ze.encodingName,"/").concat(Ze.clockRate).concat(Ze.encodingParameters?"/".concat(Ze.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(J,Ze){let aa="a=rtcp-fb:".concat(J).concat(N),Xa=Ze;return"trr-int"===Xa.type?aa+="ttr-int".concat(N).concat(Xa.interval):(aa+="".concat(Xa.type),Xa.parameter&&(aa+="".concat(N).concat(Xa.parameter),Xa.additional&&(aa+="".concat(N).concat(Xa.additional)))),aa+this.eol}printPtime(J){return void 0===J?"":"a=ptime:".concat(J).concat(this.eol)}printMaxPtime(J){return void 0===J?"":"a=maxptime:".concat(J).concat(this.eol)}printDirection(J){return void 0===J?"":"a=".concat(J).concat(this.eol)}printSSRC(J){return J.map(Ze=>Object.keys(Ze.attributes).map(aa=>"a=ssrc:".concat(Ze.ssrcId.toString(10)).concat(N).concat(aa).concat(Ze.attributes[aa]?":".concat(Ze.attributes[aa]):"").concat(this.eol)).join("")).join("")}printRTCPMux(J){return void 0===J?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(J){return void 0===J?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(J){return void 0===J?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(J){if(void 0===J)return"";let Ze="a=rtcp:".concat(J.port);return J.netType&&(Ze+="".concat(N).concat(J.netType)),J.addressType&&(Ze+="".concat(N).concat(J.addressType)),J.address&&(Ze+="".concat(N).concat(J.address)),Ze+this.eol}printMSId(J){return J.map(Ze=>"a=msid:".concat(Ze.id).concat(Ze.appdata?"".concat(N).concat(Ze.appdata):"").concat(this.eol)).join("")}printImageattr(J){return J.map(Ze=>"a=imageattr:".concat(Ze).concat(this.eol)).join("")}printRid(J){return J.map(Ze=>{let aa="a=rid:".concat(Ze.id).concat(N).concat(Ze.direction);return Ze.payloads&&(aa+="".concat(N,"pt=").concat(Ze.payloads.join(","))),Ze.params.length>0&&(aa+="".concat(N).concat(Ze.params.map(Xa=>"depend"===Xa.type?"depend=".concat(Xa.rids.join(",")):"".concat(Xa.type,"=").concat(Xa.val)).join(";"))),aa+this.eol}).join("")}printSimulcast(J){return void 0===J?"":"a=simulcast:".concat(J).concat(this.eol)}printSCTPPort(J){return void 0===J?"":"a=sctp-port:".concat(J).concat(this.eol)}printMaxMessageSize(J){return void 0===J?"":"a=max-message-size:".concat(J).concat(this.eol)}printMid(J){return void 0===J?"":"a=mid:".concat(J).concat(this.eol)}printSSRCGroups(J){return J.map(Ze=>"a=ssrc-group:".concat(Ze.semantic).concat(Ze.ssrcIds.map(aa=>"".concat(N).concat(aa.toString(10))).join("")).concat(this.eol)).join("")}}function Zc(_c){return(new El).parse(_c)}function Ol(_c,J){return(new Qa).print(_c,J)}}},c={};function h(g){if(c[g])return c[g].exports;var v=c[g]={exports:{}};return i[g](v,v.exports,h),v.exports}return h.d=(g,v)=>{for(var m in v)h.o(v,m)&&!h.o(g,m)&&Object.defineProperty(g,m,{enumerable:!0,get:v[m]})},h.o=(g,v)=>Object.prototype.hasOwnProperty.call(g,v),h.r=g=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},h(8)})()}(ny);class vCe{constructor(n){Y(this,"sessionDesc",void 0),Y(this,"localCapabilities",void 0),Y(this,"rtpCapabilities",void 0),Y(this,"candidates",void 0),Y(this,"iceParameters",void 0),Y(this,"dtlsParameters",void 0),Y(this,"setup",void 0),Y(this,"currentMidIndex",void 0),Y(this,"cname",void 0),n=V0(n);const{remoteIceParameters:i,remoteDtlsParameters:c,candidates:h,remoteRTPCapabilities:g,remoteSetup:v,localCapabilities:m,sdkCodec:C,cname:y}=n,N=ny.exports.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE audio video\na=msid-semantic: WMS\na=ice-lite\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:audio\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:video\n");this.rtpCapabilities=g,this.candidates=h,this.iceParameters=i,this.dtlsParameters=c,this.setup=v,this.localCapabilities=m,this.cname=y;for(let k=0;k<N.mediaDescriptions.length;k++){const U=N.mediaDescriptions[k];if(U.attributes.iceUfrag=i.iceUfrag,U.attributes.icePwd=i.icePwd,U.attributes.fingerprints=c.fingerprints,U.attributes.candidates=h,U.attributes.setup=v,"video"===U.media.mediaType){U.media.fmts=g.videoCodecs.map(K=>K.payloadType.toString(10));const V=g.videoCodecs.filter(K=>{var $;return null===($=K.rtpMap)||void 0===$?void 0:$.encodingName.toLowerCase().includes(C)});if(0===V.length)throw new Error("Codec ".concat(C," not supported by remote SDP."));U.attributes.payloads=V,U.attributes.extmaps=g.videoExtensions}"audio"===U.media.mediaType&&(U.media.fmts=g.audioCodecs.map(V=>V.payloadType.toString(10)),U.attributes.payloads=g.audioCodecs,U.attributes.extmaps=g.audioExtensions),N.mediaDescriptions[k]=this.mungMediaDesc(U)}this.sessionDesc=N,this.currentMidIndex=N.mediaDescriptions.length-1}toString(){return ny.exports.print(this.sessionDesc)}send(n,i,c){const{ssrcs:h,ssrcGroups:g}=hT(i,this.cname),v=this.sessionDesc.mediaDescriptions.find(y=>n===Sh.VIDEO?"video"===y.media.mediaType:"audio"===y.media.mediaType),m=h[0].attributes.label,C=h[0].attributes.mslabel;return v.attributes.ssrcs=v.attributes.ssrcs.concat(h),v.attributes.ssrcGroups=v.attributes.ssrcGroups.concat(g),{id:m,mslabel:C}}batchSend(n){return n.map(i=>{let{kind:c,ssrcMsg:h}=i;return this.send(c,h,void 0)})}stopSending(n){this.sessionDesc.mediaDescriptions.forEach(i=>{const c=[],h=[],g=[];i.attributes.ssrcs.forEach(v=>{n.includes(v.attributes.label||"")?g.push(v):c.push(v)}),i.attributes.ssrcGroups.forEach(v=>{g.map(m=>m.ssrcId).includes(v.ssrcIds[0])||h.push(v)}),i.attributes.ssrcs=c,i.attributes.ssrcGroups=h})}mute(n){const i=this.sessionDesc.mediaDescriptions.find(c=>c.attributes.mid===n);if(!i)throw new Error("mediaDescription not found with ".concat(n," in remote SDP when calling RemoteSDP.mute."));i.attributes.direction="inactive"}unmute(n){const i=this.sessionDesc.mediaDescriptions.find(c=>c.attributes.mid===n);if(!i)throw new Error("mediaDescription not found with ".concat(n," in remote SDP when calling RemoteSDP.unmute."));i.attributes.direction="sendonly"}receive(n,i,c){n.forEach((h,g)=>{const v=h._mediaStreamTrack,m=this.sessionDesc.mediaDescriptions.findIndex(y=>y.attributes.mid===v.kind),C=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[m],h);this.sessionDesc.mediaDescriptions[m]=C})}stopReceiving(n){}restartICE(n){n=V0(n),this.iceParameters=n,this.sessionDesc.mediaDescriptions.forEach(i=>{i.attributes.iceUfrag=n.iceUfrag,i.attributes.icePwd=n.icePwd})}predictReceivingMids(n){const i=[];for(let c=0;c<n;c++)i.push((this.currentMidIndex+c+1).toString(10));return i}mungRecvMediaDsec(n,i){const c=V0(n);return eV(c,i),$de(c,i),c}updateRecvMedia(n,i){const c=this.sessionDesc.mediaDescriptions.findIndex(h=>h.attributes.mid===n);if(-1!==c){const h=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[c],i);this.sessionDesc.mediaDescriptions[c]=h}}bumpMid(n){this.currentMidIndex+=n}updateTrackLabel(n,i,c){const h=this.sessionDesc.mediaDescriptions.find(v=>n===Sh.VIDEO?"video"===v.attributes.mid:"audio"===v.attributes.mid);if(h){const v=h.attributes.ssrcs.find(m=>m.attributes.label===i);var g;v&&(v.attributes.label=c,null===(g=v.attributes.msid)||void 0===g||g.replace(i,c))}}mungMediaDesc(n){const i=V0(n);return Xde(i),function(c){const h=c.attributes.extmaps.find(g=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===g.extensionName);h&&c.attributes.extmaps.splice(c.attributes.extmaps.indexOf(h),1),c.attributes.payloads.forEach(g=>{const v=g.rtcpFeedbacks.findIndex(m=>"transport-cc"===m.type);-1!==v&&g.rtcpFeedbacks.splice(v,1)})}(i),i}getSSRC(n){for(const i of this.sessionDesc.mediaDescriptions)for(const c of i.attributes.ssrcs)if(c.attributes.label===n)return[c]}}function cR(e){if(Array.isArray(e))return e.map(function(c){return c});if(!ZEe(e))return e;var n={};for(var i in e)n[i]=ZEe(e[i])||Array.isArray(e[i])?cR(e[i]):e[i];return n}function ZEe(e){return!("object"!=typeof e||Array.isArray(e)||!e)}var the=function(){function e(n){this.input=[],this.size=n}return e.prototype.add=function(n){this.input.push(n),this.input.length>this.size&&this.input.splice(0,1)},e.prototype.diffMean=function(){return 0===this.input.length?0:(this.input[this.input.length-1]-this.input[0])/this.input.length},e}(),eve=function(e,n){return(eve=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,c){i.__proto__=c}||function(i,c){for(var h in c)c.hasOwnProperty(h)&&(i[h]=c[h])})(e,n)};function nhe(e,n){function i(){this.constructor=e}eve(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var vj=function(){return(vj=Object.assign||function(e){for(var n,i=1,c=arguments.length;i<c;i++)for(var h in n=arguments[i])Object.prototype.hasOwnProperty.call(n,h)&&(e[h]=n[h]);return e}).apply(this,arguments)};function rhe(e,n,i,c){return new(i||(i=Promise))(function(h,g){function v(y){try{C(c.next(y))}catch(N){g(N)}}function m(y){try{C(c.throw(y))}catch(N){g(N)}}function C(y){y.done?h(y.value):new i(function(N){N(y.value)}).then(v,m)}C((c=c.apply(e,n||[])).next())})}function ihe(e,n){var i,c,h,g,v={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return g={next:m(0),throw:m(1),return:m(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function m(C){return function(y){return function(N){if(i)throw new TypeError("Generator is already executing.");for(;v;)try{if(i=1,c&&(h=2&N[0]?c.return:N[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,N[1])).done)return h;switch(c=0,h&&(N=[2&N[0],h.value]),N[0]){case 0:case 1:h=N;break;case 4:return v.label++,{value:N[1],done:!1};case 5:v.label++,c=N[1],N=[0];continue;case 7:N=v.ops.pop(),v.trys.pop();continue;default:if(!((h=(h=v.trys).length>0&&h[h.length-1])||6!==N[0]&&2!==N[0])){v=0;continue}if(3===N[0]&&(!h||N[1]>h[0]&&N[1]<h[3])){v.label=N[1];break}if(6===N[0]&&v.label<h[1]){v.label=h[1],h=N;break}if(h&&v.label<h[2]){v.label=h[2],v.ops.push(N);break}h[2]&&v.ops.pop(),v.trys.pop();continue}N=n.call(e,v)}catch(k){N=[6,k],c=0}finally{i=h=0}if(5&N[0])throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}([C,y])}}}var uR,tve={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},iz={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:tve,remoteCandidate:tve}},nve={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0},rve={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,qpSumPerFrame:0},ive={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0},ove={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0},ohe=function(){function e(n,i){var c=this;this.videoIsReady=!1,this.videoIsReady2={},this.stats=cR(iz),this.isFirstVideoReceived={},this.isFirstVideoDecoded={},this.isFirstAudioReceived={},this.isFirstAudioDecoded={},this.lossRateWindowStats=[],this.pc=n,this.options=i,this.intervalTimer=window.setInterval(function(){return rhe(c,void 0,void 0,function(){return ihe(this,function(h){return this.updateStats(),[2]})})},this.options.updateInterval)}return e.prototype.getStats=function(){return this.stats},e.prototype.setVideoIsReady=function(n){this.videoIsReady=n},e.prototype.setVideoIsReady2=function(n,i){this.videoIsReady2[n]=i},e.prototype.getVideoIsReady=function(n){return this.videoIsReady2[n]||!1},e.prototype.setIsFirstAudioDecoded=function(n){},e.prototype.destroy=function(){window.clearInterval(this.intervalTimer),this.pc=void 0},e.prototype.calcLossRate=function(n){var i=this;this.lossRateWindowStats.push(n),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);for(var c=this.lossRateWindowStats.length,h=0,g=0,v=0,m=0,C=function(k){n[k].forEach(function(U,V){if(i.lossRateWindowStats[c-1][k][V]&&i.lossRateWindowStats[0][k][V]){var K=i.lossRateWindowStats[c-1][k][V].packets-i.lossRateWindowStats[0][k][V].packets,$=i.lossRateWindowStats[c-1][k][V].packetsLost-i.lossRateWindowStats[0][k][V].packetsLost;"videoSend"===k||"audioSend"===k?(h+=K,v+=$):(g+=K,m+=$),U.packetLostRate=Number.isNaN(K)||Number.isNaN(K)||K<=0||$<=0?0:$/(K+$)}})},y=0,N=["videoSend","audioSend","videoRecv","audioRecv"];y<N.length;y++)C(N[y]);n.sendPacketLossRate=h<=0||v<=0?0:v/(h+v),n.recvPacketLossRate=g<=0||m<=0?0:m/(g+m)},e}(),yCe=function(e){function n(){var i=null!==e&&e.apply(this,arguments)||this;return i._stats=iz,i.lastDecodeVideoReceiverStats=new Map,i}return nhe(n,e),n.prototype.updateStats=function(){return rhe(this,void 0,void 0,function(){var i,c,h,g;return ihe(this,function(v){switch(v.label){case 0:return[4,this._getStats()];case 1:return i=v.sent(),c=this.statsResponsesToObjects(i),this._stats=cR(iz),h=c.filter(function(m){return"ssrc"===m.type}),this.processSSRCStats(h),(g=c.find(function(m){return"VideoBwe"===m.type}))&&this.processBandwidthStats(g),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats,[2]}})})},n.prototype.processBandwidthStats=function(i){this._stats.bitrate={actualEncoded:Number(i.googActualEncBitrate),targetEncoded:Number(i.googTargetEncBitrate),retransmit:Number(i.googRetransmitBitrate),transmit:Number(i.googTransmitBitrate)},this._stats.sendBandwidth=Number(i.googAvailableSendBandwidth)},n.prototype.processSSRCStats=function(i){var c=this;i.forEach(function(h){var g=h.id.includes("send");switch(h.mediaType+"_"+(g?"send":"recv")){case"video_send":var v=cR(rve);v.codec=h.googCodecName,v.adaptionChangeReason="none",h.googCpuLimitedResolution&&(v.adaptionChangeReason="cpu"),h.googBandwidthLimitedResolution&&(v.adaptionChangeReason="bandwidth"),v.avgEncodeMs=Number(h.googAvgEncodeMs),v.inputFrame={width:Number(h.googFrameWidthInput)||Number(h.googFrameWidthSent),height:Number(h.googFrameHeightInput)||Number(h.googFrameHeightSent),frameRate:Number(h.googFrameRateInput)},v.sentFrame={width:Number(h.googFrameWidthSent),height:Number(h.googFrameHeightSent),frameRate:Number(h.googFrameRateInput)},v.firsCount=Number(h.googFirReceived),v.nacksCount=Number(h.googNacksReceived),v.plisCount=Number(h.googPlisReceived),v.frameCount=Number(h.framesEncoded),v.bytes=Number(h.bytesSent),v.packets=Number(h.packetsSent),v.packetsLost=Number(h.packetsLost),v.ssrc=Number(h.ssrc),v.rttMs=Number(h.googRtt||0),c._stats.videoSend.push(v),c._stats.rtt=v.rttMs;break;case"video_recv":var m=cR(nve),C=c.lastDecodeVideoReceiverStats.get(Number(h.ssrc));if(m.codec=h.googCodecName,m.targetDelayMs=Number(h.googTargetDelayMs),m.renderDelayMs=Number(h.googRenderDelayMs),m.currentDelayMs=Number(h.googCurrentDelayMs),m.minPlayoutDelayMs=Number(h.googMinPlayoutDelayMs),m.decodeMs=Number(h.googDecodeMs),m.maxDecodeMs=Number(h.googMaxDecodeMs),m.receivedFrame={width:Number(h.googFrameWidthReceived),height:Number(h.googFrameHeightReceived),frameRate:Number(h.googFrameRateReceived)},m.decodedFrame={width:Number(h.googFrameWidthReceived),height:Number(h.googFrameHeightReceived),frameRate:Number(h.googFrameRateDecoded)},m.decodeFrameRate=Number(h.googFrameRateDecoded),m.outputFrame={width:Number(h.googFrameWidthReceived),height:Number(h.googFrameHeightReceived),frameRate:Number(h.googFrameRateOutput)},m.jitterBufferMs=Number(h.googJitterBufferMs),m.firsCount=Number(h.googFirsSent),m.nacksCount=Number(h.googNacksSent),m.plisCount=Number(h.googPlisSent),m.framesDecodeCount=Number(h.framesDecoded),m.bytes=Number(h.bytesReceived),m.packets=Number(h.packetsReceived),m.packetsLost=Number(h.packetsLost),m.ssrc=Number(h.ssrc),m.packets>0&&!c.isFirstVideoReceived[m.ssrc]&&(c.onFirstVideoReceived&&c.onFirstVideoReceived(m.ssrc),c.isFirstVideoReceived[m.ssrc]=!0),m.framesDecodeCount>0&&!c.isFirstVideoDecoded[m.ssrc]&&(c.onFirstVideoDecoded&&c.onFirstVideoDecoded(m.ssrc,m.decodedFrame.width,m.decodedFrame.height),c.isFirstVideoDecoded[m.ssrc]=!0),C){var y=C.stats,N=Date.now()-C.lts;m.framesDecodeFreezeTime=y.framesDecodeFreezeTime,m.framesDecodeInterval=y.framesDecodeInterval,m.framesDecodeCount>y.framesDecodeCount&&c.isFirstVideoDecoded[m.ssrc]?(C.lts=Date.now(),m.framesDecodeInterval=N,m.framesDecodeInterval>=c.options.freezeRateLimit&&(c.getVideoIsReady(parseInt(h.ssrc,10))?m.framesDecodeFreezeTime+=m.framesDecodeInterval:c.setVideoIsReady2(parseInt(h.ssrc,10),!0))):m.framesDecodeCount<C.stats.framesDecodeCount&&(m.framesDecodeInterval=0)}c.lastDecodeVideoReceiverStats.set(m.ssrc,{stats:vj({},m),lts:Date.now()}),c._stats.videoRecv.push(m);break;case"audio_recv":var k=cR(ove);k.codec=h.googCodecName,k.outputLevel=Math.abs(Number(h.audioOutputLevel))/32767,k.decodingCNG=Number(h.googDecodingCNG),k.decodingCTN=Number(h.googDecodingCTN),k.decodingCTSG=Number(h.googDecodingCTSG),k.decodingNormal=Number(h.googDecodingNormal),k.decodingPLC=Number(h.googDecodingPLC),k.decodingPLCCNG=Number(h.googDecodingPLCCNG),k.expandRate=Number(h.googExpandRate),k.accelerateRate=Number(h.googAccelerateRate),k.preemptiveExpandRate=Number(h.googPreemptiveExpandRate),k.secondaryDecodedRate=Number(h.googSecondaryDecodedRate),k.speechExpandRate=Number(h.googSpeechExpandRate),k.preferredJitterBufferMs=Number(h.googPreferredJitterBufferMs),k.jitterBufferMs=Number(h.googJitterBufferMs),k.jitterMs=Number(h.googJitterReceived),k.bytes=Number(h.bytesReceived),k.packets=Number(h.packetsReceived),k.packetsLost=Number(h.packetsLost),k.ssrc=Number(h.ssrc),k.receivedFrames=Number(h.googDecodingCTN)||Number(h.packetsReceived),k.droppedFrames=Number(h.googDecodingPLC)+Number(h.googDecodingPLCCNG)||Number(h.packetsLost),k.receivedFrames>0&&!c.isFirstAudioReceived[k.ssrc]&&(c.onFirstAudioReceived&&c.onFirstAudioReceived(k.ssrc),c.isFirstAudioReceived[k.ssrc]=!0),k.decodingNormal>0&&!c.isFirstAudioDecoded[k.ssrc]&&(c.onFirstAudioDecoded&&c.onFirstAudioDecoded(k.ssrc),c.isFirstAudioDecoded[k.ssrc]=!0),c._stats.audioRecv.push(k);break;case"audio_send":var U=cR(ive);U.codec=h.googCodecName,U.inputLevel=Math.abs(Number(h.audioInputLevel))/32767,U.aecReturnLoss=Number(h.googEchoCancellationReturnLoss||0),U.aecReturnLossEnhancement=Number(h.googEchoCancellationReturnLossEnhancement||0),U.residualEchoLikelihood=Number(h.googResidualEchoLikelihood||0),U.residualEchoLikelihoodRecentMax=Number(h.googResidualEchoLikelihoodRecentMax||0),U.bytes=Number(h.bytesSent),U.packets=Number(h.packetsSent),U.packetsLost=Number(h.packetsLost),U.ssrc=Number(h.ssrc),U.rttMs=Number(h.googRtt||0),c._stats.rtt=U.rttMs,c._stats.audioSend.push(U)}})},n.prototype._getStats=function(){var i=this;return new Promise(function(c,h){i.pc.getStats(c,h)})},n.prototype.statsResponsesToObjects=function(i){var c=[];return i.result().forEach(function(h){var g={id:h.id,timestamp:h.timestamp.valueOf().toString(),type:h.type};h.names().forEach(function(v){g[v]=h.stat(v)}),c.push(g)}),c},n}(ohe);!function(e){e.CERTIFICATE="certificate",e.CODEC="codec",e.CANDIDATE_PAIR="candidate-pair",e.LOCAL_CANDIDATE="local-candidate",e.REMOTE_CANDIDATE="remote-candidate",e.INBOUND="inbound-rtp",e.TRACK="track",e.OUTBOUND="outbound-rtp",e.PC="peer-connection",e.REMOTE_INBOUND="remote-inbound-rtp",e.REMOTE_OUTBOUND="remote-outbound-rtp",e.TRANSPORT="transport",e.CSRC="csrc",e.DATA_CHANNEL="data-channel",e.STREAM="stream",e.SENDER="sender",e.RECEIVER="receiver"}(uR||(uR={}));var yg,sve=function(e){function n(){var i=null!==e&&e.apply(this,arguments)||this;return i._stats=iz,i.lastDecodeVideoReceiverStats=new Map,i.lastVideoFramesRecv=new Map,i.lastVideoFramesSent=new Map,i.lastVideoFramesDecode=new Map,i.lastVideoJBDelay=new Map,i.lastAudioJBDelay=new Map,i.mediaBytesSent=new Map,i.mediaBytesRetransmit=new Map,i.mediaBytesTargetEncode=new Map,i.lastEncoderMs=new Map,i}return nhe(n,e),n.prototype.updateStats=function(){return rhe(this,void 0,void 0,function(){var i,c=this;return ihe(this,function(h){switch(h.label){case 0:return i=this,[4,this.pc.getStats()];case 1:return i.report=h.sent(),this._stats=cR(iz),this.report.forEach(function(g){switch(g.type){case uR.OUTBOUND:"audio"===g.mediaType?c.processAudioOutboundStats(g):"video"===g.mediaType&&c.processVideoOutboundStats(g);break;case uR.INBOUND:"audio"===g.mediaType?c.processAudioInboundStats(g):"video"===g.mediaType&&c.processVideoInboundStats(g);break;case uR.TRANSPORT:var v=c.report.get(g.selectedCandidatePairId);v&&c.processCandidatePairStats(v);break;case uR.CANDIDATE_PAIR:g.selected&&c.processCandidatePairStats(g)}}),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats,[2]}})})},n.prototype.processCandidatePairStats=function(i){if(this._stats.sendBandwidth=i.availableOutgoingBitrate||0,i.currentRoundTripTime&&(this._stats.rtt=1e3*i.currentRoundTripTime),this._stats.videoSend.forEach(function(g){!g.rttMs&&i.currentRoundTripTime&&(g.rttMs=1e3*i.currentRoundTripTime)}),this._stats.audioSend.forEach(function(g){!g.rttMs&&i.currentRoundTripTime&&(g.rttMs=1e3*i.currentRoundTripTime)}),this._stats.selectedCandidatePair.id=i.id,i.localCandidateId){var c=this.report.get(i.localCandidateId);c&&this.processCandidateStats(c)}if(i.remoteCandidateId){var h=this.report.get(i.remoteCandidateId);h&&this.processCandidateStats(h)}},n.prototype.processCandidateStats=function(i){var c;i.type===uR.LOCAL_CANDIDATE&&(c=this._stats.selectedCandidatePair.localCandidate),i.type===uR.REMOTE_CANDIDATE&&(c=this._stats.selectedCandidatePair.remoteCandidate),c&&(c.type=i.type,c.id=i.id,i.address&&(c.address=i.address),i.candidateType&&(c.candidateType=i.candidateType),i.port&&(c.port=i.port),i.priority&&(c.priority=i.priority),i.protocol&&(c.protocol=i.protocol),i.relayProtocol&&(c.relayProtocol=i.relayProtocol),i.type===uR.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==c.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(vj({},c),vj({},this.stats.selectedCandidatePair.localCandidate)),i.type===uR.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==c.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(vj({},c),vj({},this.stats.selectedCandidatePair.remoteCandidate)))},n.prototype.processAudioInboundStats=function(i){var c=this._stats.audioRecv.find(function(h){return h.ssrc===i.ssrc});c||(c=cR(ove),this._stats.audioRecv.push(c)),c.ssrc=i.ssrc,c.packets=i.packetsReceived,c.packetsLost=i.packetsLost,c.bytes=i.bytesReceived,c.jitterMs=1e3*i.jitter,i.trackId&&this.processAudioTrackReceiverStats(i.trackId,c),i.codecId&&(c.codec=this.getCodecFromCodecStats(i.codecId)),c.receivedFrames||(c.receivedFrames=i.packetsReceived),c.droppedFrames||(c.droppedFrames=i.packetsLost),c.receivedFrames>0&&!this.isFirstAudioReceived[c.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(c.ssrc),this.isFirstAudioReceived[c.ssrc]=!0),c.outputLevel&&c.outputLevel>0&&!this.isFirstAudioDecoded[c.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(c.ssrc),this.isFirstAudioDecoded[c.ssrc]=!0)},n.prototype.processVideoInboundStats=function(i){var c=this._stats.videoRecv.find(function(k){return k.ssrc===i.ssrc});c||(c=cR(nve),this._stats.videoRecv.push(c)),c.ssrc=i.ssrc,c.packets=i.packetsReceived,c.packetsLost=i.packetsLost,c.bytes=i.bytesReceived,c.firsCount=i.firCount,c.nacksCount=i.nackCount,c.plisCount=i.pliCount,c.framesDecodeCount=i.framesDecoded;var h=this.lastDecodeVideoReceiverStats.get(c.ssrc),g=this.lastVideoFramesDecode.get(c.ssrc),v=Date.now();if(c.framesDecodeCount>0&&!this.isFirstVideoDecoded[c.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(c.ssrc,c.decodedFrame?c.decodedFrame.width:0,c.decodedFrame?c.decodedFrame.height:0),this.isFirstVideoDecoded[c.ssrc]=!0),h){var y=h.stats,N=v-h.lts;c.framesDecodeFreezeTime=y.framesDecodeFreezeTime,c.framesDecodeInterval=y.framesDecodeInterval,!this.isFirstVideoDecoded[c.ssrc]&&N>this.options.firstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout(c.ssrc),c.framesDecodeCount>y.framesDecodeCount&&this.isFirstVideoDecoded[c.ssrc]?(h.lts=Date.now(),c.framesDecodeInterval=N,c.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(i.ssrc))?c.framesDecodeFreezeTime+=c.framesDecodeInterval:this.setVideoIsReady2(parseInt(i.ssrc,10),!0))):c.framesDecodeCount<y.framesDecodeCount&&(c.framesDecodeInterval=0),i.framesDecoded&&i.qpSum&&(c.qpSumPerFrame=h.stats.framesDecodeCount>i.framesDecoded?i.qpSum/i.framesDecoded:(i.qpSum-h.qpSum)/(i.framesDecoded-h.stats.framesDecodeCount))}g&&v-g.lts>=800?(c.decodeFrameRate=Math.round((c.framesDecodeCount-g.count)/((v-g.lts)/1e3)),this.lastVideoFramesDecode.set(c.ssrc,{count:c.framesDecodeCount,lts:v,rate:c.decodeFrameRate})):g?c.decodeFrameRate=g.rate:this.lastVideoFramesDecode.set(c.ssrc,{count:c.framesDecodeCount,lts:v,rate:0}),i.totalDecodeTime&&(c.decodeMs=1e3*i.totalDecodeTime),i.trackId&&this.processVideoTrackReceiverStats(i.trackId,c),i.codecId&&(c.codec=this.getCodecFromCodecStats(i.codecId)),i.framerateMean&&(c.framesRateFirefox=i.framerateMean),c.packets>0&&!this.isFirstVideoReceived[c.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(c.ssrc),this.isFirstVideoReceived[c.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(c.ssrc,{stats:vj({},c),lts:h?h.lts:Date.now(),qpSum:i.qpSum})},n.prototype.processVideoOutboundStats=function(i){var c=this._stats.videoSend.find(function(U){return U.ssrc===i.ssrc});c||(c=cR(rve),this._stats.videoSend.push(c));var h,g=this.mediaBytesSent.get(i.ssrc);if(g?g.add(i.bytesSent):((m=new the(10)).add(i.bytesSent),this.mediaBytesSent.set(i.ssrc,m)),void 0!==i.retransmittedBytesSent){var v=this.mediaBytesRetransmit.get(i.ssrc);v?v.add(i.retransmittedBytesSent):((m=new the(10)).add(i.retransmittedBytesSent),this.mediaBytesRetransmit.set(i.ssrc,m))}if(i.totalEncodedBytesTarget){var m,C=this.mediaBytesTargetEncode.get(i.ssrc);C?C.add(i.totalEncodedBytesTarget):((m=new the(10)).add(i.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(i.ssrc,m))}if(c.ssrc=i.ssrc,c.bytes=i.bytesSent,c.packets=i.packetsSent,c.firsCount=i.firCount,c.nacksCount=i.nackCount,c.plisCount=i.pliCount,c.frameCount=i.framesEncoded,c.adaptionChangeReason=i.qualityLimitationReason,i.totalEncodeTime&&i.framesEncoded&&(c.avgEncodeMs=!(h=this.lastEncoderMs.get(i.ssrc))||h.lastFrameCount>i.framesEncoded?1e3*i.totalEncodeTime/i.framesEncoded:1e3*(i.totalEncodeTime-h.lastEncoderTime)/(i.framesEncoded-h.lastFrameCount)),i.framesEncoded&&i.qpSum&&(c.qpSumPerFrame=!(h=this.lastEncoderMs.get(i.ssrc))||h.lastFrameCount>i.framesEncoded?i.qpSum/i.framesEncoded:(i.qpSum-h.lastQpSum)/(i.framesEncoded-h.lastFrameCount)),this.lastEncoderMs.set(i.ssrc,{lastFrameCount:i.framesEncoded,lastEncoderTime:i.totalEncodeTime,lastQpSum:i.qpSum,lts:Date.now()}),i.codecId&&(c.codec=this.getCodecFromCodecStats(i.codecId)),i.mediaSourceId&&this.processVideoMediaSource(i.mediaSourceId,c),i.trackId&&this.processVideoTrackSenderStats(i.trackId,c),i.remoteId)this.processRemoteInboundStats(i.remoteId,c);else{var k=this.findRemoteStatsId(i.ssrc,uR.REMOTE_INBOUND);k&&this.processRemoteInboundStats(k,c)}},n.prototype.processAudioOutboundStats=function(i){var c=this._stats.audioSend.find(function(g){return g.ssrc===i.ssrc});if(c||(c=cR(ive),this._stats.audioSend.push(c)),c.ssrc=i.ssrc,c.packets=i.packetsSent,c.bytes=i.bytesSent,i.mediaSourceId&&this.processAudioMediaSource(i.mediaSourceId,c),i.codecId&&(c.codec=this.getCodecFromCodecStats(i.codecId)),i.trackId&&this.processAudioTrackSenderStats(i.trackId,c),i.remoteId)this.processRemoteInboundStats(i.remoteId,c);else{var h=this.findRemoteStatsId(i.ssrc,uR.REMOTE_INBOUND);h&&this.processRemoteInboundStats(h,c)}},n.prototype.findRemoteStatsId=function(i,c){var h=Array.from(this.report.values()).find(function(g){return g.type===c&&g.ssrc===i});return h?h.id:null},n.prototype.processVideoMediaSource=function(i,c){var h=this.report.get(i);h&&h.width&&h.height&&h.framesPerSecond&&(c.inputFrame={width:h.width,height:h.height,frameRate:h.framesPerSecond})},n.prototype.processAudioMediaSource=function(i,c){var h=this.report.get(i);h&&(c.inputLevel=h.audioLevel)},n.prototype.processVideoTrackSenderStats=function(i,c){var h=this.report.get(i);if(h){var g=0,v=Date.now(),m=this.lastVideoFramesSent.get(c.ssrc);m&&v-m.lts>=800?(g=Math.round((h.framesSent-m.count)/((v-m.lts)/1e3)),this.lastVideoFramesSent.set(c.ssrc,{count:h.framesSent,lts:v,rate:g})):m?g=m.rate:this.lastVideoFramesSent.set(c.ssrc,{count:h.framesSent,lts:v,rate:0}),c.sentFrame={width:h.frameWidth,height:h.frameHeight,frameRate:g}}},n.prototype.processVideoTrackReceiverStats=function(i,c){var h=this.report.get(i);if(h){var g=this.lastVideoFramesRecv.get(c.ssrc),v=Date.now();c.framesReceivedCount=h.framesReceived;var m=0;if(g&&v-g.lts>=800?(m=Math.round((h.framesReceived-g.count)/((v-g.lts)/1e3)),this.lastVideoFramesRecv.set(c.ssrc,{count:h.framesReceived,lts:v,rate:m})):g?m=g.rate:this.lastVideoFramesRecv.set(c.ssrc,{count:h.framesReceived,lts:v,rate:0}),c.receivedFrame={width:h.frameWidth||0,height:h.frameHeight||0,frameRate:m||0},c.decodedFrame={width:h.frameWidth||0,height:h.frameHeight||0,frameRate:c.decodeFrameRate||0},c.outputFrame={width:h.frameWidth||0,height:h.frameHeight||0,frameRate:c.decodeFrameRate||0},h.jitterBufferDelay&&h.jitterBufferEmittedCount){var C=this.lastVideoJBDelay.get(c.ssrc);this.lastVideoJBDelay.set(c.ssrc,{jitterBufferDelay:h.jitterBufferDelay,jitterBufferEmittedCount:h.jitterBufferEmittedCount}),C||(C={jitterBufferDelay:0,jitterBufferEmittedCount:0});var y=1e3*(h.jitterBufferDelay-C.jitterBufferDelay)/(h.jitterBufferEmittedCount-C.jitterBufferEmittedCount);c.jitterBufferMs=y,c.currentDelayMs=Math.round(y)}}},n.prototype.processAudioTrackSenderStats=function(i,c){var h=this.report.get(i);h&&(c.aecReturnLoss=h.echoReturnLoss||0,c.aecReturnLossEnhancement=h.echoReturnLossEnhancement||0)},n.prototype.processAudioTrackReceiverStats=function(i,c){var h=this.report.get(i);if(h){if(h.removedSamplesForAcceleration&&h.totalSamplesReceived&&(c.accelerateRate=h.removedSamplesForAcceleration/h.totalSamplesReceived),h.jitterBufferDelay&&h.jitterBufferEmittedCount){var g=this.lastAudioJBDelay.get(c.ssrc);this.lastAudioJBDelay.set(c.ssrc,{jitterBufferDelay:h.jitterBufferDelay,jitterBufferEmittedCount:h.jitterBufferEmittedCount}),g||(g={jitterBufferDelay:0,jitterBufferEmittedCount:0}),c.jitterBufferMs=Math.round(1e3*(h.jitterBufferDelay-g.jitterBufferDelay)/(h.jitterBufferEmittedCount-g.jitterBufferEmittedCount))}c.outputLevel=h.audioLevel;var m=1920;h.totalSamplesDuration&&h.totalSamplesReceived&&(m=h.totalSamplesReceived/h.totalSamplesDuration/50,c.receivedFrames=Math.round(h.totalSamplesReceived/m)),h.concealedSamples&&(c.droppedFrames=Math.round(h.concealedSamples/m))}},n.prototype.processRemoteInboundStats=function(i,c){var h=this.report.get(i);h&&(c.packetsLost=h.packetsLost,h.roundTripTime&&(c.rttMs=1e3*h.roundTripTime))},n.prototype.getCodecFromCodecStats=function(i){var c=this.report.get(i);if(!c)return"";var h=c.mimeType.match(/\/(.*)$/);return h&&h[1]?h[1]:""},n.prototype.updateSendBitrate=function(){var i=0,c=null,h=null;this.mediaBytesSent.forEach(function(v){i+=v.diffMean()}),this.mediaBytesRetransmit.forEach(function(v){c=null===c?v.diffMean():c+v.diffMean()}),this.mediaBytesTargetEncode.forEach(function(v){h=null===h?v.diffMean():h+v.diffMean()}),this._stats.bitrate={actualEncoded:8*(null!==c?i-c:i)/(this.options.updateInterval/1e3),transmit:8*i/(this.options.updateInterval/1e3)},null!==c&&(this._stats.bitrate.retransmit=8*c/(this.options.updateInterval/1e3)),null!==h&&(this._stats.bitrate.targetEncoded=8*h/(this.options.updateInterval/1e3))},n}(ohe),_Ce=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return nhe(n,e),n.prototype.updateStats=function(){return Promise.resolve()},n}(ohe);function she(e,n,i,c,h){void 0===n&&(n=250),void 0===i&&(i=8),void 0===c&&(c=500),void 0===h&&(h=1e4);var g,v=(g=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i))&&g[0]?Number(g[0].split("/")[1]):null;return v?v<76?new yCe(e,{updateInterval:n,lossRateInterval:i,freezeRateLimit:c,firstVideoDecodedTimeout:h}):new sve(e,{updateInterval:n,lossRateInterval:i,freezeRateLimit:c,firstVideoDecodedTimeout:h}):window.RTCStatsReport&&e.getStats()instanceof Promise?new sve(e,{updateInterval:n,lossRateInterval:i,freezeRateLimit:c,firstVideoDecodedTimeout:h}):new _Ce(e,{updateInterval:n,lossRateInterval:i,freezeRateLimit:c,firstVideoDecodedTimeout:h})}function ave(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);n&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),i.push.apply(i,c)}return i}function cve(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?ave(Object(i),!0).forEach(function(c){Y(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ave(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}let ICe=(Cl((yg=class rie extends JN{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}constructor(n,i){super(n,i),Y(this,"store",void 0),Y(this,"peerConnection",void 0),Y(this,"remoteSDP",void 0),Y(this,"initialOffer",void 0),Y(this,"statsFilter",void 0),Y(this,"useRTX",!1),Y(this,"localCapabilities",void 0),Y(this,"localCandidateCount",0),Y(this,"allCandidatesReceived",!1),Y(this,"mutex",new _I("P2PConnection-mutex")),this.store=i,this.peerConnection=new RTCPeerConnection(rie.resolvePCConfiguration(n),{optional:[{googDscp:!0}]}),this.statsFilter=she(this.peerConnection,void 0,void 0,h0()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}establish(){var n=this;return l(function*(){try{const i=yield n.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!i.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const c=mj(i.sdp),h=zde(i.sdp,!n.useRTX,ya("FILTER_VIDEO_FEC"),ya("FILTER_AUDIO_FEC"),["opus"]);return n.localCapabilities=h,n.initialOffer=i,cve(cve({},c),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:h},offerSDP:i.sdp})}catch(i){throw new ea(_t.GET_LOCAL_CONNECTION_PARAMS_FAILED,i.toString())}})()}connect(n,i,c,h,g,v){var m=this;return l(function*(){try{if(!m.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");m.remoteSDP=new vCe({remoteIceParameters:n,remoteDtlsParameters:i,candidates:c,remoteRTPCapabilities:h.send,remoteSetup:g,localCapabilities:m.localCapabilities,sdkCodec:m.store.codec,cname:v});const C=m.remoteSDP.toString();yield m.peerConnection.setLocalDescription(m.initialOffer),yield m.peerConnection.setRemoteDescription({type:"answer",sdp:C})}catch(C){throw new ea(_t.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(C.toString()))}})()}send(n,i){var c=this;return aR(function*(){const h=yield Lf(c.mutex.lock());try{if(!c.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const g=n.map(U=>c.peerConnection.addTrack(U._mediaStreamTrack)),v=yield Lf(c.peerConnection.createOffer()),m=ny.exports.parse(v.sdp),C=n.map(U=>{const V=U._mediaStreamTrack,K=m.mediaDescriptions.find($=>$.attributes.mid===V.kind);if(!K)throw new Error("Cannot extract ssrc from mediaDescription.");return function($,Z,ye){const be=$.attributes.ssrcs.filter(ua=>ua.attributes.label===Z),_s=$.attributes.ssrcGroups;if(0===be.length)throw new Error("Cannot extract ssrc from plan-b SDP.");if(_s&&be.length>1){const ua=_s.find(ma=>-1!==ma.ssrcIds.indexOf(be[0].ssrcId));return ua?[{ssrcId:ua.ssrcIds[0],rtx:ye?ua.ssrcIds[1]:void 0}]:[{ssrcId:be[0].ssrcId}]}return[{ssrcId:be[0].ssrcId}]}(K,V.id,c.useRTX)});let y;try{y=yield C}catch(U){throw g.forEach(V=>{L_()&&V.replaceTrack(null),c.peerConnection.removeTrack(V)}),U}const N=c.mungSendOfferSDP(v.sdp,n);c.remoteSDP.receive(n,i,y);const k=c.remoteSDP.toString();return yield Lf(c.peerConnection.setLocalDescription({type:"offer",sdp:N})),yield Lf(c.applySendEncodings(g,n)),yield Lf(c.peerConnection.setRemoteDescription({type:"answer",sdp:k})),n.map((U,V)=>({localSSRC:C[V],id:U._mediaStreamTrack.id}))}catch(g){throw new ea(_t.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(g.toString()))}finally{h()}})()}stopSending(n){var i=this;return l(function*(){try{if(!i.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const c=i.peerConnection.getSenders().filter(v=>{var m;return-1!==n.indexOf((null===(m=v.track)||void 0===m?void 0:m.id)||"")});if(c.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");c.map(v=>{L_()&&v.replaceTrack(null),i.peerConnection.removeTrack(v)});const h=yield i.peerConnection.createOffer();yield i.peerConnection.setLocalDescription(h),i.remoteSDP.stopReceiving(n);const g=i.remoteSDP.toString();yield i.peerConnection.setRemoteDescription({type:"answer",sdp:g})}catch(c){throw new ea(_t.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(c.toString()))}})()}receive(n,i,c,h){var g=this;return l(function*(){try{if(!g.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(n," before remoteSDP created."));const{id:v,mslabel:m}=g.remoteSDP.send(n,i,h),C=new _l((k,U)=>{const V=setTimeout(()=>{U(new Error("Cannot receive track, id: ".concat(v)))},1e4),K=$=>{const Z=Yp();if(("Safari"===Z.name&&11===Number(Z.version)||P_())&&$.track.id!==v&&$.streams[0].id===m){var ye;const be=$.streams[0].getTracks()[0];return null===(ye=g.remoteSDP)||void 0===ye||ye.updateTrackLabel(n,v,$.track.id),g.peerConnection.removeEventListener("track",K),clearTimeout(V),void k(be)}if($.track.id===v)return g.peerConnection.removeEventListener("track",K),clearTimeout(V),void k($.track)};g.peerConnection.addEventListener("track",K)}),y=g.remoteSDP.toString();yield g.peerConnection.setRemoteDescription({type:"offer",sdp:y});const N=yield g.peerConnection.createAnswer();return yield g.peerConnection.setLocalDescription(N),{track:yield C,id:v}}catch(v){throw new ea(_t.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(v.toString()))}})()}stopReceiving(n){var i=this;return l(function*(){try{if(!i.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");i.remoteSDP.stopSending(n);const c=i.remoteSDP.toString();yield i.peerConnection.setRemoteDescription({type:"offer",sdp:c});const h=yield i.peerConnection.createAnswer();yield i.peerConnection.setLocalDescription(h)}catch(c){throw new ea(_t.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(c.toString()))}})()}muteRemote(n){return l(function*(){})()}unmuteRemote(n){return l(function*(){})()}muteLocal(n){var i=this;return l(function*(){try{if(!i.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const c=i.peerConnection.getSenders().filter(h=>{var g;return-1!==n.indexOf((null===(g=h.track)||void 0===g?void 0:g.id)||"")});if(c.length!==n.length)throw new Error("sender' length doesn't match mids' length.");c.map(h=>{if(L_()&&h.track)h.track.enabled=!1;else{const g=h.getParameters();g.encodings.forEach(v=>v.active=!1),h.setParameters(g)}})}catch(c){throw new ea(_t.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(c.toString()))}})()}unmuteLocal(n){var i=this;return l(function*(){try{if(!i.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const c=i.peerConnection.getSenders().filter(v=>{var m;return-1!==n.indexOf((null===(m=v.track)||void 0===m?void 0:m.id)||"")});if(c.length!==n.length)throw new Error("Senders' length doesn't match mids' length.");c.map(function(){var v=l(function*(m){if(L_()&&m.track)m.track.enabled=!0;else{const C=m.getParameters();C.encodings.forEach(y=>y.active=!0),yield m.setParameters(C)}});return function(m){return v.apply(this,arguments)}}());const h=yield i.peerConnection.createOffer();yield i.peerConnection.setLocalDescription(h);const g=i.remoteSDP.toString();yield i.peerConnection.setRemoteDescription({type:"answer",sdp:g})}catch(c){throw new ea(_t.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(c.toString()))}})()}restartICE(){var n=this;return aR(function*(){const i=yield Lf(n.mutex.lock("From P2PConnection.restartICE"));try{const c=yield Lf(n.peerConnection.createOffer({iceRestart:!0}));if(!c.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const h=mj(c.sdp),{remoteIceParameters:g}=yield h.iceParameters;if(!n.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");n.remoteSDP.restartICE(g);const v=n.remoteSDP.toString();yield Lf(n.peerConnection.setLocalDescription(c)),yield Lf(n.peerConnection.setRemoteDescription({type:"answer",sdp:v}))}catch(c){de.warning("restart ICE failed, abort operation",c)}finally{i()}})()}close(){var n;this.peerConnection.close(),null===(n=this.onConnectionStateChange)||void 0===n||n.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(n){return this.statsFilter.getVideoIsReady(n)}updateEncoderConfig(n,i){var c=this;return l(function*(){try{if(!c.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const h=yield c.peerConnection.createOffer(),g=c.mungSendOfferSDP(h.sdp,[i]);c.remoteSDP.updateRecvMedia(i._mediaStreamTrack.kind,i);const v=c.remoteSDP.toString();yield c.peerConnection.setLocalDescription({type:"offer",sdp:g}),yield c.peerConnection.setRemoteDescription({type:"answer",sdp:v})}catch(h){throw new ea(_t.EXCHANGE_SDP_FAILED,h.toString())}})()}updateSendParameters(n,i){var c=this;return l(function*(){const h=c.peerConnection.getSenders().filter(g=>{var v;return(null===(v=g.track)||void 0===v?void 0:v.id)===n});1===h.length&&(yield c.applySendEncodings(h,[i]))})()}setStatsRemoteVideoIsReady(n,i){this.statsFilter.setVideoIsReady2(n,i)}replaceTrack(n,i){var c=this;return l(function*(){const h=c.peerConnection.getSenders().find(g=>{var v;return(null===(v=g.track)||void 0===v?void 0:v.id)===i});h&&(yield h.replaceTrack(n._mediaStreamTrack))})()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var n;null===(n=this.onICEConnectionStateChange)||void 0===n||n.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var n;null===(n=this.onConnectionStateChange)||void 0===n||n.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=n=>{n.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,de.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,de.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},ya("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(n){const i={iceServers:[],sdpSemantics:"plan-b"};return n.iceServers?i.iceServers=n.iceServers:n.turnServer&&"off"!==n.turnServer.mode&&(j4(n.turnServer.servers)?i.iceServers=n.turnServer.servers:(i.iceServers&&i.iceServers.push(...rie.turnServerConfigToIceServers(n.turnServer.servers)),ya("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&n.turnServer.serversFromGateway&&i.iceServers.push(...rie.turnServerConfigToIceServers(n.turnServer.serversFromGateway)),n.turnServer.servers.concat(n.turnServer.serversFromGateway||[]).forEach(c=>{c.forceturn&&(i.iceTransportPolicy="relay")}))),i}static turnServerConfigToIceServers(n){const i=[];return n.forEach(c=>{c.security?c.tcpport&&i.push({username:c.username,credential:c.password,credentialType:"password",urls:"turns:".concat(c.turnServerURL,":").concat(c.tcpport,"?transport=tcp")}):(c.udpport&&i.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.udpport,"?transport=udp")}),c.tcpport&&i.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.tcpport,"?transport=tcp")}))}),i}applySendEncodings(n,i){return l(function*(){try{if(!dy().supportSetRtpSenderParameters||n.length!==i.length)return;for(let h=0;h<n.length;h++){var c;const g=n[h],v=i[h];if(!v)continue;const m={},C={};if(v instanceof ty)switch(v._optimizationMode){case"motion":m.degradationPreference="maintain-framerate";break;case"detail":m.degradationPreference="maintain-resolution";break;default:m.degradationPreference="balanced"}if(ya("DSCP_TYPE")&&jM()){const k=ya("DSCP_TYPE");["very-low","low","medium","high"].includes(k)&&(C.networkPriority=k)}const y=g.getParameters(),N=null===(c=y.encodings)||void 0===c?void 0:c[0];N&&Object.assign(N,C),Object.assign(y,m),yield g.setParameters(y)}}catch(h){de.debug("Apply RTPSendEncodings failed.")}})()}mungSendOfferSDP(n,i){const c=ny.exports.parse(n);return i.forEach((h,g)=>{const v=h._mediaStreamTrack,m=c.mediaDescriptions.find(C=>C.attributes.mid===v.kind);m&&eV(m,h)}),ny.exports.print(c)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=n=>{var i;null===(i=this.onFirstAudioReceived)||void 0===i||i.call(this,n)},this.statsFilter.onFirstVideoReceived=n=>{var i;null===(i=this.onFirstVideoReceived)||void 0===i||i.call(this,n)},this.statsFilter.onFirstAudioDecoded=n=>{var i;null===(i=this.onFirstAudioDecoded)||void 0===i||i.call(this,n)},this.statsFilter.onFirstVideoDecoded=(n,i,c)=>{var h;null===(h=this.onFirstVideoDecoded)||void 0===h||h.call(this,n,i,c)},this.statsFilter.onSelectedLocalCandidateChanged=(n,i)=>{var c;null===(c=this.onSelectedLocalCandidateChanged)||void 0===c||c.call(this,n,i)},this.statsFilter.onSelectedRemoteCandidateChanged=(n,i)=>{var c;null===(c=this.onSelectedRemoteCandidateChanged)||void 0===c||c.call(this,n,i)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}batchReceive(n){var i=this;return l(function*(){try{if(!i.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const c=i.remoteSDP.batchSend(n).map((v,m)=>{let{id:C,mslabel:y}=v;const{kind:N}=n[m];return new _l((k,U)=>{const V=setTimeout(()=>{U(new Error("Cannot receive track, id: ".concat(C)))},1e4),K=$=>{const Z=Yp();if("Safari"===Z.name&&11===Number(Z.version)&&$.track.id!==C&&$.streams[0].id===y){var ye;const be=$.streams[0].getTracks()[0];return null===(ye=i.remoteSDP)||void 0===ye||ye.updateTrackLabel(N,C,$.track.id),i.peerConnection.removeEventListener("track",K),clearTimeout(V),void k({track:be,id:C})}if($.track.id===C)return i.peerConnection.removeEventListener("track",K),clearTimeout(V),void k({track:$.track,id:C})};i.peerConnection.addEventListener("track",K)})}),h=i.remoteSDP.toString();yield i.peerConnection.setRemoteDescription({type:"offer",sdp:h});const g=yield i.peerConnection.createAnswer();return yield i.peerConnection.setLocalDescription(g),yield _l.all(c)}catch(c){throw new ea(_t.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(c.toString()))}})()}getRemoteSSRC(n){var i=this;return l(function*(){if(!i.remoteSDP)return;const c=i.remoteSDP.getSSRC(n);return null==c?void 0:c[0].ssrcId})()}}).prototype,"connect",[fT],Object.getOwnPropertyDescriptor(yg.prototype,"connect"),yg.prototype),Cl(yg.prototype,"stopSending",[fT],Object.getOwnPropertyDescriptor(yg.prototype,"stopSending"),yg.prototype),Cl(yg.prototype,"receive",[fT],Object.getOwnPropertyDescriptor(yg.prototype,"receive"),yg.prototype),Cl(yg.prototype,"stopReceiving",[fT],Object.getOwnPropertyDescriptor(yg.prototype,"stopReceiving"),yg.prototype),Cl(yg.prototype,"muteRemote",[fT],Object.getOwnPropertyDescriptor(yg.prototype,"muteRemote"),yg.prototype),Cl(yg.prototype,"unmuteRemote",[fT],Object.getOwnPropertyDescriptor(yg.prototype,"unmuteRemote"),yg.prototype),Cl(yg.prototype,"muteLocal",[fT],Object.getOwnPropertyDescriptor(yg.prototype,"muteLocal"),yg.prototype),Cl(yg.prototype,"unmuteLocal",[fT],Object.getOwnPropertyDescriptor(yg.prototype,"unmuteLocal"),yg.prototype),Cl(yg.prototype,"close",[fT],Object.getOwnPropertyDescriptor(yg.prototype,"close"),yg.prototype),Cl(yg.prototype,"updateEncoderConfig",[fT],Object.getOwnPropertyDescriptor(yg.prototype,"updateEncoderConfig"),yg.prototype),Cl(yg.prototype,"updateSendParameters",[fT],Object.getOwnPropertyDescriptor(yg.prototype,"updateSendParameters"),yg.prototype),Cl(yg.prototype,"replaceTrack",[fT],Object.getOwnPropertyDescriptor(yg.prototype,"replaceTrack"),yg.prototype),Cl(yg.prototype,"getRemoteSSRC",[fT],Object.getOwnPropertyDescriptor(yg.prototype,"getRemoteSSRC"),yg.prototype),yg);function fT(e,n,i){const c=e[n];if("function"!=typeof c)throw new Error("Cannot use mutex on object property.");return i.value=l(function*(){const h=this.mutex,g=yield h.lock("Locking from P2PConnection.".concat(n));try{for(var v=arguments.length,m=new Array(v),C=0;C<v;C++)m[C]=arguments[C];return yield c.apply(this,m)}finally{g()}}),i}var uve;let bCe=uy("RemoteSDP")(uve=class{get localCapabilities(){return V0(this._localCapabilities)}get rtpCapabilities(){return V0(this._rtpCapabilities)}get candidates(){return V0(this._candidates)}get iceParameters(){return V0(this._iceParameters)}get dtlsParameters(){return V0(this._dtlsParameters)}constructor(e){Y(this,"sessionDesc",void 0),Y(this,"_localCapabilities",void 0),Y(this,"_rtpCapabilities",void 0),Y(this,"_candidates",void 0),Y(this,"_iceParameters",void 0),Y(this,"_dtlsParameters",void 0),Y(this,"setup",void 0),Y(this,"currentMidIndex",void 0),Y(this,"cname",void 0),Y(this,"firefoxSsrcMidMap",new Map),e=V0(e);const{remoteIceParameters:n,remoteDtlsParameters:i,candidates:c,remoteRTPCapabilities:h,remoteSetup:g,localCapabilities:v,cname:m}=e,C=ny.exports.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=ice-lite\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n");this._rtpCapabilities=h,this._candidates=c,this._iceParameters=n,this._dtlsParameters=i,this._localCapabilities=v,this.setup=g,this.cname=m;const y=this.rtpCapabilities.send;for(const N of C.mediaDescriptions){if(N.attributes.iceUfrag=n.iceUfrag,N.attributes.icePwd=n.icePwd,N.attributes.fingerprints=i.fingerprints,N.attributes.candidates=c,N.attributes.setup=g,"video"===N.media.mediaType&&(N.media.fmts=y.videoCodecs.map(k=>k.payloadType.toString(10)),N.attributes.payloads=y.videoCodecs,N.attributes.extmaps=y.videoExtensions,ya("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:k,ssrcGroups:U}=hT([{ssrcId:4e4,rtx:ya("USE_RTX")?40001:void 0}],this.cname);N.attributes.ssrcs=k,N.attributes.ssrcGroups=U}if("audio"===N.media.mediaType&&(N.media.fmts=y.audioCodecs.map(k=>k.payloadType.toString(10)),N.attributes.payloads=y.audioCodecs,N.attributes.extmaps=y.audioExtensions,d3(N),ya("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:k,ssrcGroups:U}=hT([{ssrcId:2e4}],this.cname);N.attributes.ssrcs=k,N.attributes.ssrcGroups=U}}this.sessionDesc=C,this.currentMidIndex=C.mediaDescriptions.length-1}preloadRemoteMedia(){const e=ya("PRELOAD_MEDIA_COUNT");Gc("debug",this,"preloadRemoteMedia",e);const n=this.candidates,i=this.dtlsParameters,c=this.iceParameters,h=this.rtpCapabilities.send;for(let g=1;g<e;g++){const v=2*g+2e4,m=2*g+4e4,{ssrcs:C,ssrcGroups:y}=hT([{ssrcId:v}],this.cname),{ssrcs:N,ssrcGroups:k}=hT([{ssrcId:m,rtx:ya("USE_RTX")?m+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:h.videoCodecs.map(U=>U.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:c.iceUfrag,icePwd:c.icePwd,unrecognized:[],candidates:n,extmaps:h.videoExtensions,fingerprints:i.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:N,ssrcGroups:k,rtcpFeedbackWildcards:[],payloads:h.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*g)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:h.audioCodecs.map(U=>U.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:c.iceUfrag,icePwd:c.icePwd,unrecognized:[],candidates:n,extmaps:h.audioExtensions,fingerprints:i.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:C,ssrcGroups:y,rtcpFeedbackWildcards:[],payloads:h.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*g+1)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return ny.exports.print(this.sessionDesc)}send(e,n,i,c){const{ssrcs:h,ssrcGroups:g}=hT(n,this.cname,i),v=this.findPreloadMediaDesc(h);if(v){if(h0()&&this.firefoxSsrcMidMap.set(h[0].ssrcId,v.attributes.mid),c&&(c.tcc||c.remb)){const m=this.sessionDesc.mediaDescriptions.indexOf(v);return this.sessionDesc.mediaDescriptions[m]=this.mungSendMediaDesc(v,c),{mid:v.attributes.mid,needExchangeSDP:!0}}return{mid:v.attributes.mid,needExchangeSDP:!1}}{const m=this.findAvailableMediaIndex(e,h);if(L_()||OW()||Q8()){if(-1!==m&&1!==m){const C=V0(this.sessionDesc.mediaDescriptions[m]);return C.attributes.direction="sendonly",C.attributes.ssrcs=h,C.attributes.ssrcGroups=g,this.sessionDesc.mediaDescriptions[m]=this.mungSendMediaDesc(C,c),{mid:C.attributes.mid,needExchangeSDP:!0}}{const C=this.createOrRecycleSendMedia(e,h,g,"sendonly",c);return this.updateBundleMids(),{mid:C.attributes.mid,needExchangeSDP:!0}}}if(-1!==m){const C=V0(this.sessionDesc.mediaDescriptions[m]);return C.attributes.direction="sendonly",C.attributes.ssrcs=h,C.attributes.ssrcGroups=g,this.sessionDesc.mediaDescriptions[m]=this.mungSendMediaDesc(C,c),h0()&&this.firefoxSsrcMidMap.set(h[0].ssrcId,C.attributes.mid),{mid:C.attributes.mid,needExchangeSDP:!0}}{const C=this.createOrRecycleSendMedia(e,h,g,"sendonly",c);return this.updateBundleMids(),h0()&&this.firefoxSsrcMidMap.set(h[0].ssrcId,C.attributes.mid),{mid:C.attributes.mid,needExchangeSDP:!0}}}}batchSend(e){const n=e.map(h=>{let{kind:g,ssrcMsg:v,mslabel:m}=h;return this.send(g,v,m)}),i=[];let c=!1;return n.forEach(h=>{let{mid:g,needExchangeSDP:v}=h;v&&(c=!0),i.push(g)}),{mids:i,needExchangeSDP:c}}stopSending(e){const n=this.sessionDesc.mediaDescriptions.filter(i=>i.attributes.mid&&-1!==e.indexOf(i.attributes.mid));if(n.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");n.forEach(i=>{"0"===i.attributes.mid||h0()||L_()||OW()||Q8()?i.attributes.ssrcs=[]:(i.attributes.ssrcs=[],i.attributes.direction="inactive",i.media.port="0")}),this.updateBundleMids()}mute(e){const n=this.sessionDesc.mediaDescriptions.find(i=>i.attributes.mid===e);if(!n)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));n.attributes.direction="inactive"}unmute(e){const n=this.sessionDesc.mediaDescriptions.find(i=>i.attributes.mid===e);if(!n)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));n.attributes.direction="sendonly"}muteRemote(e){const n=this.sessionDesc.mediaDescriptions.filter(i=>e.includes(i.attributes.mid||""));if(n.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");n.forEach(i=>{i.attributes.direction="inactive"})}unmuteRemote(e){const n=this.sessionDesc.mediaDescriptions.filter(i=>e.includes(i.attributes.mid||""));if(n.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");n.forEach(i=>{i.attributes.direction="recvonly"})}receive(e,n,i,c){e.forEach((h,g)=>{this.createOrRecycleRecvMedia(h,[],"recvonly",n,i,c[g])}),this.updateBundleMids()}stopReceiving(e){const n=this.sessionDesc.mediaDescriptions.filter(i=>-1!==e.indexOf(i.attributes.mid));if(n.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");n.forEach(i=>{i.media.port="0",i.attributes.direction="inactive"}),this.updateBundleMids()}restartICE(e){e=V0(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach(n=>{n.attributes.iceUfrag=e.iceUfrag,n.attributes.icePwd=e.icePwd})}predictReceivingMids(e){const n=[];for(let i=0;i<e;i++)n.push((this.currentMidIndex+i+1).toString(10));return n}findAvailableMediaIndex(e,n){return this.sessionDesc.mediaDescriptions.findIndex(i=>{const c=i.media.mediaType===e&&"0"!==i.media.port&&("sendonly"===i.attributes.direction||"sendrecv"===i.attributes.direction)&&0===i.attributes.ssrcs.length;if(h0()){if(c){const h=this.firefoxSsrcMidMap.get(n[0].ssrcId);return!(h||"0"!==i.attributes.mid&&"1"!==i.attributes.mid)||!(!h||h!==i.attributes.mid)}return!1}return c})}createOrRecycleRecvMedia(e,n,i,c,h,g){const v=e._mediaStreamTrack.kind,m=this.rtpCapabilities.recv,C=this.localCapabilities.send;let y=[];if(v===Sh.VIDEO){var N,k;if(ya("H264_PROFILE_LEVEL_ID")&&"h264"===c&&(y=m.videoCodecs.filter(Z=>{var ye,be;return((null===(ye=Z.rtpMap)||void 0===ye?void 0:ye.encodingName.toLowerCase())||"").includes(c)&&(null==Z||null===(be=Z.fmtp)||void 0===be?void 0:be.parameters["profile-level-id"])===ya("H264_PROFILE_LEVEL_ID")})),!y||0===(null===(N=y)||void 0===N?void 0:N.length)){const Z=C.videoCodecs.filter(ye=>{var be;return((null===(be=ye.rtpMap)||void 0===be?void 0:be.encodingName.toLowerCase())||"").includes(c)});0!==Z.length&&(y=m.videoCodecs.filter(ye=>Z.some(be=>be.payloadType===ye.payloadType)))}if(ya("USE_RTX")){const Z=y.map(be=>be.payloadType.toString()),ye=m.videoCodecs.filter(be=>{var _s,ua;return"rtx"===(null===(_s=be.rtpMap)||void 0===_s?void 0:_s.encodingName)&&Z.includes((null===(ua=be.fmtp)||void 0===ua?void 0:ua.parameters.apt)||"")});y=[...y,...ye]}0===y.length&&(de.warning("codec ".concat(c," not included in rtpCapabilities, fallback to default payloads: ").concat(null===(k=m.videoCodecs[0].rtpMap)||void 0===k?void 0:k.encodingName)),y=m.videoCodecs)}else y=m.audioCodecs.filter(Z=>{var ye;return((null===(ye=Z.rtpMap)||void 0===ye?void 0:ye.encodingName.toLowerCase())||"").includes(h)}),0===y.length&&(de.warning("codec ".concat(h," not included in rtpCapabilities, fallback to opus")),y=m.audioCodecs.filter(Z=>{var ye;return((null===(ye=Z.rtpMap)||void 0===ye?void 0:ye.encodingName.toLowerCase())||"").includes("opus")}));const U=v===Sh.VIDEO?m.videoExtensions:m.audioExtensions;this.currentMidIndex+=1;const V="".concat(this.currentMidIndex);let K={media:{mediaType:v,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:y.map(Z=>Z.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:U,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:n,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:y,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:i,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(V)}};K=this.mungRecvMediaDsec(K,e,g);const $=this.findFirstClosedMedia(v);if($){const Z=this.sessionDesc.mediaDescriptions.indexOf($);this.sessionDesc.mediaDescriptions[Z]=K}else this.sessionDesc.mediaDescriptions.push(K);return K}createOrRecycleSendMedia(e,n,i,c,h){const g=this.rtpCapabilities.send,v=e===Sh.VIDEO?g.videoCodecs:g.audioCodecs,m=e===Sh.VIDEO?g.videoExtensions:g.audioExtensions;this.currentMidIndex+=1;const C="".concat(this.currentMidIndex);let y={media:{mediaType:e,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:v.map(k=>k.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:m,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:n,ssrcGroups:i,rtcpFeedbackWildcards:[],payloads:v,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:c,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(C)}};y=this.mungSendMediaDesc(y,h);const N=this.findFirstClosedMedia(e);if(N){const k=this.sessionDesc.mediaDescriptions.indexOf(N);this.sessionDesc.mediaDescriptions[k]=y}else this.sessionDesc.mediaDescriptions.push(y);return y}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(e=>"0"!==e.media.port).map(e=>e.attributes.mid)}mungRecvMediaDsec(e,n,i){const c=V0(e);return Xde(c),eV(c,n),$de(c,n),zEe(c),qre(c,i,this.localCapabilities.send),c}mungSendMediaDesc(e,n){const i=V0(e);return qre(i,n,this.localCapabilities.recv),d3(i),i}updateRecvMedia(e,n){const i=this.sessionDesc.mediaDescriptions.findIndex(c=>c.attributes.mid===e);if(-1!==i){const c=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[i],n);this.sessionDesc.mediaDescriptions[i]=c}}bumpMid(e){this.currentMidIndex+=e}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find(n=>h0()?"0"===n.media.port&&n.media.mediaType===e:"0"===n.media.port)}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find(n=>{var i,c;return(null===(i=n.attributes)||void 0===i||null===(c=i.ssrcs[0])||void 0===c?void 0:c.ssrcId)===e[0].ssrcId})}getSSRC(e){var n;return null===(n=this.sessionDesc.mediaDescriptions.find(i=>i.attributes.mid===e))||void 0===n?void 0:n.attributes.ssrcs}})||uve;var dve,_g;function hve(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);n&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),i.push.apply(i,c)}return i}function fve(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?hve(Object(i),!0).forEach(function(c){Y(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):hve(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}let CCe=uy("P2PConnection","store.p2pId")((Cl((_g=class iie extends JN{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}constructor(n,i){super(n,i),Y(this,"store",void 0),Y(this,"peerConnection",void 0),Y(this,"remoteSDP",void 0),Y(this,"initialOffer",void 0),Y(this,"transportEventReceiver",void 0),Y(this,"statsFilter",void 0),Y(this,"useRTX",ya("USE_RTX")),Y(this,"localCapabilities",void 0),Y(this,"localCandidateCount",0),Y(this,"allCandidatesReceived",!1),Y(this,"mutex",new _I("P2PConnection-mutex")),this.store=i,this.peerConnection=new RTCPeerConnection(iie.resolvePCConfiguration(n),{optional:[{googDscp:!0}]}),this.statsFilter=she(this.peerConnection,void 0,void 0,h0()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}establish(){var n=this;return l(function*(){try{n.peerConnection.addTransceiver("video",{direction:"recvonly"}),n.peerConnection.addTransceiver("audio",{direction:"recvonly"});const i=yield n.peerConnection.createOffer();if(!i.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const c=mj(i.sdp),h=yield $Ee(!n.useRTX,ya("FILTER_VIDEO_FEC"),ya("FILTER_AUDIO_FEC"));return n.localCapabilities=ehe(h),n.initialOffer=i,fve(fve({},c),{},{rtpCapabilities:h,offerSDP:i.sdp})}catch(i){throw new ea(_t.GET_LOCAL_CONNECTION_PARAMS_FAILED,i.toString())}})()}connect(n,i,c,h,g,v){var m=this;return l(function*(){try{if(!m.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");m.remoteSDP=new bCe({remoteIceParameters:n,remoteDtlsParameters:i,candidates:c,remoteRTPCapabilities:h,remoteSetup:g,localCapabilities:m.localCapabilities,cname:v});const C=m.remoteSDP.toString(),y=ny.exports.parse(m.initialOffer.sdp),N=y.mediaDescriptions.find(K=>"audio"===K.media.mediaType);N&&d3(N);const k=ny.exports.print(y),U=m.logSDPExchange(k||"","offer","local","connect");yield m.peerConnection.setLocalDescription({type:"offer",sdp:k}),null==U||U(C),yield m.peerConnection.setRemoteDescription({type:"answer",sdp:C});const V=m.peerConnection.getTransceivers()[0];if(null!=V&&V.receiver&&m.tryBindTransportEvents(V.receiver),ya("PRELOAD_MEDIA_COUNT")>0){m.remoteSDP.preloadRemoteMedia();const K=m.remoteSDP.toString();yield m.peerConnection.setRemoteDescription({type:"offer",sdp:K});const $=yield m.peerConnection.createAnswer();yield m.peerConnection.setLocalDescription($)}}catch(C){throw new ea(_t.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(C.toString()))}})()}send(n,i,c){var h=this;return aR(function*(){const g=yield Lf(h.mutex.lock("From P2PConnection.send"));try{if(!h.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const v=[];n.forEach($=>{const Z=h.peerConnection.addTransceiver($._mediaStreamTrack,{direction:"sendonly"});v.push(Z)}),h0()&&!0===ya("SIMULCAST")&&(pl("debug",h,"apply simulcast for firefox"),yield Lf(h.applySimulcastForFirefox(v,n)));const m=yield Lf(h.peerConnection.createOffer()),C=h.remoteSDP.predictReceivingMids(n.length),y=h.mungSendOfferSDP(m.sdp,n,C),N=ny.exports.parse(y),k=C.map($=>{const Z=N.mediaDescriptions.find(ye=>ye.attributes.mid===$);if(!Z)throw new Error("Cannot extract ssrc from mediaDescription.");return YEe(Z,h.useRTX)});let U;try{U=yield k}catch($){U=[],h.remoteSDP.receive(n,i,c,U);const Z=h.remoteSDP.toString();throw yield Lf(h.peerConnection.setLocalDescription({type:"offer",sdp:y})),yield Lf(h.peerConnection.setRemoteDescription({type:"answer",sdp:Z})),yield Lf(h.stopSending(C,!0)),$}h.remoteSDP.receive(n,i,c,U);const V=h.remoteSDP.toString(),K=h.logSDPExchange(y,"offer","local","send");return yield Lf(h.peerConnection.setLocalDescription({type:"offer",sdp:y})),yield Lf(h.applySimulcastEncodings(v,n)),yield Lf(h.applySendEncodings(v,n)),null==K||K(V),yield Lf(h.peerConnection.setRemoteDescription({type:"answer",sdp:V})),v.map(($,Z)=>({localSSRC:k[Z],id:C[Z],transceiver:$}))}catch(v){throw v instanceof ea?v:new ea(_t.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(v.toString()))}finally{g()}})()}stopSending(n,i){var c=this;return l(function*(){const h=i?void 0:yield c.mutex.lock("From P2PConnection.stopSending");try{if(!c.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const g=c.peerConnection.getTransceivers().filter(y=>-1!==n.indexOf(y.mid));if(g.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");g.map(y=>{var N;y.direction="inactive",null===(N=y.stop)||void 0===N||N.call(y)});const v=yield c.peerConnection.createOffer(),m=c.logSDPExchange(v.sdp||"","offer","local","stopSending");yield c.peerConnection.setLocalDescription(v),c.remoteSDP.stopReceiving(n);const C=c.remoteSDP.toString();null==m||m(C),yield c.peerConnection.setRemoteDescription({type:"answer",sdp:C})}catch(g){throw new ea(_t.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(g.toString()))}finally{h&&h()}})()}receive(n,i,c,h){var g=this;return l(function*(){try{if(!g.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(n," before remoteSDP created."));const{mid:v,needExchangeSDP:m}=g.remoteSDP.send(n,i,c,h);if(m){const y=g.remoteSDP.toString(),N=g.logSDPExchange(y,"offer","remote","receive");yield g.peerConnection.setRemoteDescription({type:"offer",sdp:y});const k=yield g.peerConnection.createAnswer(),U=g.mungReceiveAnswerSDP(k.sdp,v,n);null==N||N(U||""),yield g.peerConnection.setLocalDescription({type:"answer",sdp:U}),de.debug("[P2PConnection] receive ".concat(n," by exchanging SDP."))}else de.debug("[P2PConnection] receive ".concat(n," no need to exchange SDP."));const C=g.peerConnection.getTransceivers().find(y=>y.mid===v);if(!C)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:C.receiver.track,id:v}}catch(v){throw new ea(_t.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(v.toString()))}})()}batchReceive(n){var i=this;return l(function*(){try{if(!i.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const{mids:c,needExchangeSDP:h}=i.remoteSDP.batchSend(n);if(h){const g=i.remoteSDP.toString(),v=i.logSDPExchange(g,"offer","remote","receive");yield i.peerConnection.setRemoteDescription({type:"offer",sdp:g});const m=yield i.peerConnection.createAnswer();null==v||v(m.sdp||""),yield i.peerConnection.setLocalDescription(m),de.debug("[P2PConnection] batchReceive by exchanging SDP.")}else de.debug("[P2PConnection] batchReceive no need to exchange SDP.");return c.map(g=>{const v=i.peerConnection.getTransceivers().find(m=>m.mid===g);if(!v)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:v.receiver.track,id:g}})}catch(c){throw new ea(_t.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(c.toString()))}})()}stopReceiving(n){var i=this;return l(function*(){try{if(!i.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");i.remoteSDP.stopSending(n);const c=i.remoteSDP.toString(),h=i.logSDPExchange(c,"offer","remote","stopReceiving");yield i.peerConnection.setRemoteDescription({type:"offer",sdp:c});const g=yield i.peerConnection.createAnswer();null==h||h(g.sdp||""),yield i.peerConnection.setLocalDescription(g)}catch(c){throw new ea(_t.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(c.toString()))}})()}muteRemote(n){var i=this;return l(function*(){try{if(!i.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(n," before remote SDP created."));i.remoteSDP.mute(n);const c=i.remoteSDP.toString(),h=i.logSDPExchange(c,"offer","remote","muteRemote");yield i.peerConnection.setRemoteDescription({type:"offer",sdp:c});const g=yield i.peerConnection.createAnswer();null==h||h(g.sdp||""),yield i.peerConnection.setLocalDescription(g)}catch(c){throw new ea(_t.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(c.toString()))}})()}unmuteRemote(n){var i=this;return l(function*(){try{if(!i.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(n," before remote SDP created."));i.remoteSDP.unmute(n);const c=i.remoteSDP.toString(),h=i.logSDPExchange(c,"offer","remote","unmuteRemote");yield i.peerConnection.setRemoteDescription({type:"offer",sdp:c});const g=yield i.peerConnection.createAnswer();null==h||h(g.sdp||""),yield i.peerConnection.setLocalDescription(g)}catch(c){throw new ea(_t.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(c.toString()))}})()}muteLocal(n){var i=this;return l(function*(){try{if(!i.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const c=i.peerConnection.getTransceivers().filter(m=>m.mid&&-1!==n.indexOf(m.mid));if(c.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length.");c.map(m=>{m.direction="inactive"});const h=yield i.peerConnection.createOffer(),g=i.logSDPExchange(h.sdp||"","offer","local","muteLocal");yield i.peerConnection.setLocalDescription(h),i.remoteSDP.muteRemote(n);const v=i.remoteSDP.toString();null==g||g(v),yield i.peerConnection.setRemoteDescription({type:"answer",sdp:v})}catch(c){throw new ea(_t.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(c.toString()))}})()}unmuteLocal(n){var i=this;return l(function*(){try{if(!i.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const c=i.peerConnection.getTransceivers().filter(m=>m.mid&&-1!==n.indexOf(m.mid));if(c.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length.");c.map(function(){var m=l(function*(C,y){C.direction="sendonly"});return function(C,y){return m.apply(this,arguments)}}());const h=yield i.peerConnection.createOffer(),g=i.logSDPExchange(h.sdp||"","offer","local","unmuteLocal");yield i.peerConnection.setLocalDescription(h),i.remoteSDP.unmuteRemote(n);const v=i.remoteSDP.toString();null==g||g(v),yield i.peerConnection.setRemoteDescription({type:"answer",sdp:v})}catch(c){throw new ea(_t.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(c.toString()))}})()}restartICE(){var n=this;return aR(function*(){const i=yield Lf(n.mutex.lock("From P2PConnection.restartICE"));try{const c=yield Lf(n.peerConnection.createOffer({iceRestart:!0}));if(!c.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const h=mj(c.sdp),{remoteIceParameters:g}=yield h.iceParameters;if(!n.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");n.remoteSDP.restartICE(g);const v=n.remoteSDP.toString(),m=n.logSDPExchange(c.sdp||"","offer","local","restartICE");yield Lf(n.peerConnection.setLocalDescription(c)),null==m||m(v),yield Lf(n.peerConnection.setRemoteDescription({type:"answer",sdp:v}))}catch(c){de.warning("restart ICE failed, abort operation",c)}finally{i()}})()}close(){var n;this.peerConnection.close(),null===(n=this.onConnectionStateChange)||void 0===n||n.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(n){return this.statsFilter.getVideoIsReady(n)}updateEncoderConfig(n,i){var c=this;return l(function*(){try{if(!c.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const h=yield c.peerConnection.createOffer(),g=c.mungSendOfferSDP(h.sdp,[i],[n]);c.remoteSDP.updateRecvMedia(n,i);const v=c.remoteSDP.toString(),m=c.logSDPExchange(g,"offer","local","updateEncoderConfig");yield c.peerConnection.setLocalDescription({type:"offer",sdp:g}),null==m||m(v),yield c.peerConnection.setRemoteDescription({type:"answer",sdp:v})}catch(h){throw new ea(_t.EXCHANGE_SDP_FAILED,h.toString())}})()}updateSendParameters(n,i){var c=this;return l(function*(){const h=c.peerConnection.getTransceivers().filter(g=>g.mid===n);1===h.length&&(c.isVP8Simulcast(i)?h0()||(yield c.applySimulcastEncodings(h,[i])):yield c.applySendEncodings(h,[i]))})()}setStatsRemoteVideoIsReady(n,i){this.statsFilter.setVideoIsReady2(n,i)}replaceTrack(n,i){var c=this;return l(function*(){const h=c.peerConnection.getTransceivers().find(g=>g.mid===i);h&&(yield h.sender.replaceTrack(n._mediaStreamTrack))})()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var n;null===(n=this.onICEConnectionStateChange)||void 0===n||n.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var n;null===(n=this.onConnectionStateChange)||void 0===n||n.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=n=>{n.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,de.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,de.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},ya("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(n){const i={iceServers:[]};return n.iceServers?i.iceServers=n.iceServers:n.turnServer&&"off"!==n.turnServer.mode&&(j4(n.turnServer.servers)?i.iceServers=n.turnServer.servers:(i.iceServers&&i.iceServers.push(...iie.turnServerConfigToIceServers(n.turnServer.servers)),ya("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&n.turnServer.serversFromGateway&&i.iceServers.push(...iie.turnServerConfigToIceServers(n.turnServer.serversFromGateway)),ya("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":n.turnServer.servers.concat(n.turnServer.serversFromGateway||[]).forEach(c=>{c.forceturn&&(i.iceTransportPolicy="relay")}))),i}static turnServerConfigToIceServers(n){const i=[];return n.forEach(c=>{c.security?c.tcpport&&i.push({username:c.username,credential:c.password,credentialType:"password",urls:"turns:".concat(Ere(c.turnServerURL),":").concat(c.tcpport,"?transport=tcp")}):(c.udpport&&!ya("FORCE_TURN_TCP")&&i.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.udpport,"?transport=udp")}),c.tcpport&&i.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.tcpport,"?transport=tcp")}))}),i}tryBindTransportEvents(n){n.transport&&(this.transportEventReceiver=n,n.transport.onstatechange=()=>{var i,c;null!==(i=n.transport)&&void 0!==i&&i.state&&(null===(c=this.onDTLSTransportStateChange)||void 0===c||c.call(this,n.transport.state))},n.transport.onerror=i=>{var c;null===(c=this.onDTLSTransportError)||void 0===c||c.call(this,i.error)},n.transport.iceTransport&&(n.transport.iceTransport.onstatechange=()=>{var i,c,h;null!==(i=n.transport)&&void 0!==i&&i.iceTransport.state&&(null===(c=this.onICETransportStateChange)||void 0===c||c.call(this,null===(h=n.transport)||void 0===h?void 0:h.iceTransport.state))}))}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}applySendEncodings(n,i){var c=this;return l(function*(){try{if(!dy().supportSetRtpSenderParameters||n.length!==i.length)return;for(let N=0;N<n.length;N++){const k=n[N],U=i[N];if(U&&U instanceof ty){var h,g;if(c.isVP8Simulcast(U))continue;const V={},K={};switch(U._optimizationMode){case"motion":V.degradationPreference="maintain-framerate";break;case"detail":V.degradationPreference="maintain-resolution";break;default:V.degradationPreference="balanced"}var v,m,C,y;if(null!==(h=U._encoderConfig)&&void 0!==h&&h.bitrateMax&&(K.maxBitrate=1e3*(null===(v=U._encoderConfig)||void 0===v?void 0:v.bitrateMax)),U._hints.includes(vy.LOW_STREAM)&&(null!==(m=U._encoderConfig)&&void 0!==m&&m.frameRate&&(K.maxFramerate=_k(U._encoderConfig.frameRate)),null!==(C=U._encoderConfig)&&void 0!==C&&C.scaleResolutionDownBy&&(null===(y=U._encoderConfig)||void 0===y?void 0:y.scaleResolutionDownBy)>1&&(K.scaleResolutionDownBy=U._encoderConfig.scaleResolutionDownBy)),ya("DSCP_TYPE")&&jM()){const ye=ya("DSCP_TYPE");["very-low","low","medium","high"].includes(ye)&&(K.networkPriority=ye)}const $=k.sender.getParameters(),Z=null===(g=$.encodings)||void 0===g?void 0:g[0];h0()&&!Z&&(V.encodings=[K]),Z&&Object.assign(Z,K),Object.assign($,V),yield k.sender.setParameters($)}}}catch(N){de.debug("Apply RTPSendEncodings failed.")}})()}mungSendOfferSDP(n,i,c){const h=ny.exports.parse(n);return i.forEach((g,v)=>{const m=c[v],C=h.mediaDescriptions.find(y=>y.attributes.mid===m);C&&(eV(C,g),XEe(C,g,this.store.codec))}),ny.exports.print(h)}mungReceiveAnswerSDP(n,i,c){const h=ny.exports.parse(n),g=h.mediaDescriptions.find(v=>v.attributes.mid===i);return g&&c===Sh.AUDIO&&"audio"===g.media.mediaType&&d3(g),ny.exports.print(h)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=n=>{var i;null===(i=this.onFirstAudioReceived)||void 0===i||i.call(this,n)},this.statsFilter.onFirstVideoReceived=n=>{var i;null===(i=this.onFirstVideoReceived)||void 0===i||i.call(this,n)},this.statsFilter.onFirstAudioDecoded=n=>{var i;null===(i=this.onFirstAudioDecoded)||void 0===i||i.call(this,n)},this.statsFilter.onFirstVideoDecoded=(n,i,c)=>{var h;null===(h=this.onFirstVideoDecoded)||void 0===h||h.call(this,n,i,c)},this.statsFilter.onSelectedLocalCandidateChanged=(n,i)=>{var c;null===(c=this.onSelectedLocalCandidateChanged)||void 0===c||c.call(this,n,i)},this.statsFilter.onSelectedRemoteCandidateChanged=(n,i)=>{var c;null===(c=this.onSelectedRemoteCandidateChanged)||void 0===c||c.call(this,n,i)},this.statsFilter.onFirstVideoDecodedTimeout=n=>{var i;null===(i=this.onFirstVideoDecodedTimeout)||void 0===i||i.call(this,n)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}applySimulcastForFirefox(n,i){var c=this;return l(function*(){if(n.length===i.length)for(let C=0;C<n.length;C++){var h,g,v,m;const y=n[C],N=i[C];if(N instanceof ty&&!N._hints.includes(vy.LOW_STREAM)&&null!==(h=N._encoderConfig)&&void 0!==h&&h.bitrateMax&&(null===(g=N._encoderConfig)||void 0===g?void 0:g.bitrateMax)>200&&null!==(v=N._scalabiltyMode)&&void 0!==v&&v.numSpatialLayers&&(null===(m=N._scalabiltyMode)||void 0===m?void 0:m.numSpatialLayers)>1&&"vp8"===c.store.codec){const k={},U={high:1e3*(N._encoderConfig.bitrateMax-50),medium:5e4};k.encodings=[{rid:"m",active:!0,maxBitrate:U.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:U.high}];const V=y.sender.getParameters();yield y.sender.setParameters(Object.assign(V,k))}}})()}applySimulcastEncodings(n,i){var c=this;return l(function*(){if(!h0()&&n.length===i.length)for(let h=0;h<n.length;h++){const g=i[h];if(g instanceof ty&&c.isVP8Simulcast(g)){const v=n[h],m={},C={high:1e3*(g._encoderConfig.bitrateMax-50),medium:5e4};m.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:C.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:C.medium,scaleResolutionDownBy:4}];const y=v.sender.getParameters();yield v.sender.setParameters(Object.assign(y,m))}}})()}isVP8Simulcast(n){var i,c,h,g;return!!(n instanceof ty&&ya("SIMULCAST")&&"vp8"===this.store.codec&&!n._hints.includes(vy.LOW_STREAM)&&null!==(i=n._encoderConfig)&&void 0!==i&&i.bitrateMax&&(null===(c=n._encoderConfig)||void 0===c?void 0:c.bitrateMax)>200&&null!==(h=n._scalabiltyMode)&&void 0!==h&&h.numSpatialLayers&&(null===(g=n._scalabiltyMode)||void 0===g?void 0:g.numSpatialLayers)>1)}logSDPExchange(n,i,c,h){if(ya("SDP_LOGGING"))return de.upload("exchanging ".concat(c," ").concat(i," SDP during P2PConnection.").concat(h,"\n"),n),"offer"===i?g=>{this.logSDPExchange(g,"answer","local"===c?"remote":"local",h)}:void 0}getRemoteSSRC(n){var i=this;return l(function*(){if(!i.remoteSDP)return;const c=i.remoteSDP.getSSRC(n);return null==c?void 0:c[0].ssrcId})()}}).prototype,"connect",[pT],Object.getOwnPropertyDescriptor(_g.prototype,"connect"),_g.prototype),Cl(_g.prototype,"receive",[pT],Object.getOwnPropertyDescriptor(_g.prototype,"receive"),_g.prototype),Cl(_g.prototype,"batchReceive",[pT],Object.getOwnPropertyDescriptor(_g.prototype,"batchReceive"),_g.prototype),Cl(_g.prototype,"stopReceiving",[pT],Object.getOwnPropertyDescriptor(_g.prototype,"stopReceiving"),_g.prototype),Cl(_g.prototype,"muteRemote",[pT],Object.getOwnPropertyDescriptor(_g.prototype,"muteRemote"),_g.prototype),Cl(_g.prototype,"unmuteRemote",[pT],Object.getOwnPropertyDescriptor(_g.prototype,"unmuteRemote"),_g.prototype),Cl(_g.prototype,"muteLocal",[pT],Object.getOwnPropertyDescriptor(_g.prototype,"muteLocal"),_g.prototype),Cl(_g.prototype,"unmuteLocal",[pT],Object.getOwnPropertyDescriptor(_g.prototype,"unmuteLocal"),_g.prototype),Cl(_g.prototype,"close",[pT],Object.getOwnPropertyDescriptor(_g.prototype,"close"),_g.prototype),Cl(_g.prototype,"updateEncoderConfig",[pT],Object.getOwnPropertyDescriptor(_g.prototype,"updateEncoderConfig"),_g.prototype),Cl(_g.prototype,"updateSendParameters",[pT],Object.getOwnPropertyDescriptor(_g.prototype,"updateSendParameters"),_g.prototype),Cl(_g.prototype,"replaceTrack",[pT],Object.getOwnPropertyDescriptor(_g.prototype,"replaceTrack"),_g.prototype),Cl(_g.prototype,"getRemoteSSRC",[pT],Object.getOwnPropertyDescriptor(_g.prototype,"getRemoteSSRC"),_g.prototype),dve=_g))||dve;function pT(e,n,i){const c=e[n];if("function"!=typeof c)throw new Error("Cannot use mutex on object property.");return i.value=l(function*(){const h=this.mutex,g=yield h.lock("From P2PConnection.".concat(n));try{for(var v=arguments.length,m=new Array(v),C=0;C<v;C++)m[C]=arguments[C];return yield c.apply(this,m)}finally{g()}}),i}function pve(e,n){let i=document.createElement("video"),c=document.createElement("canvas");i.setAttribute("style","display:none"),c.setAttribute("style","display:none"),i.setAttribute("muted",""),i.muted=!0,i.setAttribute("autoplay",""),i.autoplay=!0,i.setAttribute("playsinline",""),c.width=_k(n.width),c.height=_k(n.height);const h=_k(n.framerate||15);document.body.append(i),document.body.append(c);let g=e._mediaStreamTrack;i.srcObject=new MediaStream([g]),i.play();const v=c.getContext("2d");if(!v)throw new ea(_t.UNEXPECTED_ERROR,"can not get canvas context");const m=dy(),C=c.captureStream(m.supportRequestFrame?0:h).getVideoTracks()[0],y=ble(()=>(()=>{if(i.paused&&i.play(),i.videoHeight>2&&i.videoWidth>2){const V=c.width*(i.videoHeight/i.videoWidth);Math.abs(V-c.height)>=2&&(de.debug("adjust low stream resolution","".concat(c.width,"x").concat(c.height," -> ").concat(c.width,"x").concat(V)),c.height=V)}v.drawImage(i,0,0,c.width,c.height),C.requestFrame&&C.requestFrame(),g!==e._mediaStreamTrack&&(g=e._mediaStreamTrack,i.srcObject=new MediaStream([g]))})(),h),N=C.stop;return C.stop=()=>{N.call(C),y(),i&&(i.remove(),i=null),c&&(c.width=0,c.remove(),c=null),de.debug("clean low stream renderer")},C}var gve,Ave;function mve(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);n&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),i.push.apply(i,c)}return i}function Yre(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?mve(Object(i),!0).forEach(function(c){Y(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):mve(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}class Eve extends Kpe{getUserId(){return this._userId}constructor(n,i,c,h){super(n,"track-".concat(n.kind,"-").concat(i,"-").concat(h.clientId,"_").concat(x0(5,""))),Y(this,"_userId",void 0),Y(this,"_uintId",void 0),Y(this,"_isDestroyed",!1),Y(this,"store",void 0),Y(this,"processor",void 0),Y(this,"processorContext",void 0),this._userId=i,this._uintId=c,this.store=h}_updateOriginMediaStreamTrack(n){this._originMediaStreamTrack=n,this._mediaStreamTrack=n,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}_destroy(){this._isDestroyed=!0,de.info("[".concat(this.getTrackId(),"] is destroyed")),Gc("info",this,"_destroy"),this.stop(),super.close()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}let Jre=uy("RemoteVideoTrack","getTrackId")(gve=class extends Eve{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==Wy.PLAYING)}constructor(e,n,i,c){super(e,n,i,c),Y(this,"_videoVisibleTimer",null),Y(this,"_previousVideoVisibleStatus",void 0),Y(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),Y(this,"trackMediaType","video"),Y(this,"_videoWidth",void 0),Y(this,"_videoHeight",void 0),Y(this,"_player",void 0),Y(this,"processorDestination",void 0),Y(this,"processorContext",void 0),Gc("info",this,"constructor",{userId:n}),this.updateMediaStreamTrackResolution(),this.processorContext=new Pge(this.getTrackId(),"remote"),this.processorDestination=new Lge(this.processorContext),this.bindProcessorDestinationEvents()}getStats(){return jY(()=>{de.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead"),pl("warning",this,"[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")},"remoteVideoTrackGetStatsWarning"),N2(this,md.GET_STATS)||Yre({},cY)}play(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.REMOTE_VIDEO_TRACK_PLAY,options:[this.getTrackId(),"string"==typeof e?e:"HTMLElement",n]});if("string"==typeof e){const h=document.getElementById(e);h?e=h:(de.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),pl("warning",this,'can not find "#'.concat(e,'" element, use document.body')),e=document.body)}de.debug("[".concat(this.getTrackId(),"] start video playback"),JSON.stringify(n)),Gc("debug",this,"play",n);const c=Yre(Yre({fit:"cover"},n),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(c):(this._player=new kme(c),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,Date.now()),this.emit(eR.FIRST_FRAME_DECODED)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const h=this.getVideoElementVisibleStatus();this.emit(eR.VIDEO_ELEMENT_VISIBLE_STATUS,h)}catch(h){}},ya("CHECK_VIDEO_VISIBLE_INTERVAL")),i.onSuccess()}stop(){const e=qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.REMOTE_VIDEO_TRACK_STOP,options:[this.getTrackId()]});if(!this._player)return e.onSuccess();this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,de.debug("[".concat(this.getTrackId(),"] stop video playback")),Gc("debug",this,"stop"),e.onSuccess()}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){Kge(this._originMediaStreamTrack).then(e=>{let[n,i]=e;this._videoHeight=i,this._videoWidth=n}).catch(vre)}_updatePlayerSource(){de.debug("[".concat(this.getTrackId(),"] update player source track")),Gc("debug",this,"_updatePlayerSource"),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var e,n;const i=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),c={track:this,element:null==this||null===(n=this._player)||void 0===n?void 0:n.getVideoElement(),slot:null==i?void 0:i.parentElement},{element:h,slot:g}=c;if(this.isPlaying&&h instanceof HTMLVideoElement&&g instanceof HTMLElement){const v=lEe.checkOneElementVisible(h),m=Object.assign({},v);if(m.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=m.visible;qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]}).onSuccess(m.visible?"Video is visible":"Invisible because of ".concat(m.reason))}return m}return}catch(i){throw new ea(_t.GET_VIDEO_ELEMENT_VISIBLE_ERROR,i.message)}}pipe(e){if(this.processor===e)return e;if(e._source)throw new ea(_t.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}unpipe(){if(!this.processor)return;const e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}bindProcessorDestinationEvents(){var e=this;this.processorDestination.on(Yy.ON_TRACK,function(){var n=l(function*(i){i?i!==e._mediaStreamTrack&&(e._mediaStreamTrack=i,e._updatePlayerSource()):e._mediaStreamTrack!==e._originMediaStreamTrack&&(e._mediaStreamTrack=e._originMediaStreamTrack,e._updatePlayerSource())});return function(i){return n.apply(this,arguments)}}())}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Yy.ON_TRACK)}_destroy(){super._destroy(),this.unbindProcessorDestinationEvents()}})||gve,zre=uy("RemoteAudioTrack","getTrackId")(Ave=class extends Eve{get isPlaying(){return this._useAudioElement?eS.isPlaying(this.getTrackId()):this._source.isPlayed}constructor(e,n,i,c){super(e,n,i,c),Y(this,"trackMediaType","audio"),Y(this,"_source",void 0),Y(this,"_useAudioElement",!0),Y(this,"_volume",100),Y(this,"processorContext",void 0),Y(this,"processorDestination",void 0),Y(this,"_played",!1),Y(this,"_bypassWebAudio",!1),Gc("info",this,"constructor",{userId:n}),ya("DISABLE_WEBAUDIO")?(this._source=new Bge,this._bypassWebAudio=!0,this._useAudioElement=!0):(this._source=new $pe(e,!0),ya("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1)),this._source.once(g_.RECEIVE_TRACK_BUFFER,()=>{this.emit(eR.FIRST_FRAME_DECODED)}),this.processorContext=new Mge(this._source.context,this.getTrackId(),"remote"),this.processorDestination=new xge(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(g_.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})}setAudioFrameCallback(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!e)return this._source.removeAllListeners(g_.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(n),this._source.removeAllListeners(g_.ON_AUDIO_BUFFER),this._source.on(g_.ON_AUDIO_BUFFER,i=>e(i))}setVolume(e){const n=qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.REMOTE_AUDIO_SET_VOLUME,options:[this.getTrackId(),e]},300);this._volume=e,this._useAudioElement?eS.setVolume(this.getTrackId(),e):this._source.setVolume(e/100),n.onSuccess()}setPlaybackDevice(e){var n=this;return l(function*(){const i=qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.REMOTE_AUDIO_SET_OUTPUT_DEVICE,options:[n.getTrackId(),e]});if(!n._useAudioElement)throw new ea(_t.NOT_SUPPORTED,"your browser does not support setting the audio output device");try{yield eS.setSinkID(n.getTrackId(),e)}catch(c){throw i.onError(c),c}i.onSuccess()})()}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return jY(()=>{de.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead"),pl("warning",this,"[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")},"remoteAudioTrackGetStatsWarning"),N2(this,md.GET_STATS)||Yre({},mQ)}play(){const e=qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.REMOTE_AUDIO_TRACK_PLAY,options:[this.getTrackId()]});de.debug("[".concat(this.getTrackId(),"] start audio playback")),Gc("debug",this,"play"),this._played=!0,this._useAudioElement?(de.debug("[".concat(this.getTrackId(),"] use audio element to play")),pl("debug",this,"use audio element to play"),eS.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play(),e.onSuccess()}stop(){const e=qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.REMOTE_AUDIO_TRACK_STOP,options:[this.getTrackId()]});de.debug("[".concat(this.getTrackId(),"] stop audio playback")),Gc("debug",this,"stop"),this._played=!1,this._useAudioElement?eS.stop(this.getTrackId()):this._source.stop(),e.onSuccess()}_destroy(){super._destroy(),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];de.debug("[".concat(this.getTrackId(),"] update player source track")),Gc("debug",this,"_updatePlayerSource"),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&eS.updateTrack(this.getTrackId(),this._mediaStreamTrack)}pipe(e){if(this._bypassWebAudio)throw new ea(_t.NOT_SUPPORTED,"can not pipe extension when WebAudio disabled");if(this.processor===e)return e;if(e._source)throw new ea(_t.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(this._bypassWebAudio)throw new ea(_t.NOT_SUPPORTED,"can not unpipe extension when WebAudio disabled");if(!this.processor)return;const n=this.processor;null===(e=this._source.processSourceNode)||void 0===e||e.disconnect(),this.processor._source=!1,this.processor=void 0,n.reset()}bindProcessorDestinationEvents(){var e=this;this.processorDestination.on(Yy.ON_TRACK,function(){var n=l(function*(i){i?i!==e._mediaStreamTrack&&(e._mediaStreamTrack=i,e._updatePlayerSource(!1),e._source.processedNode=e._source.createMediaStreamSourceNode(i)):e._mediaStreamTrack!==e._originMediaStreamTrack&&(e._mediaStreamTrack=e._originMediaStreamTrack,e._updatePlayerSource())});return function(i){return n.apply(this,arguments)}}()),this.processorDestination.on(Yy.ON_NODE,n=>{this._source.processedNode=n;const i=!n;this._useAudioElement!==i&&(this._played?(this.stop(),this._useAudioElement=i,this.play()):this._useAudioElement=i)})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Yy.ON_TRACK),this.processorDestination.removeAllListeners(Yy.ON_NODE)}})||Ave;function vve(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);n&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),i.push.apply(i,c)}return i}function yve(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?vve(Object(i),!0).forEach(function(c){Y(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):vve(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}class SCe extends f0{constructor(){super(),Y(this,"uplinkStatsUploadInterval",void 0),Y(this,"uplinkStatsUploadSlowInterval",void 0),Y(this,"uplinkRelatedStatsUploadInterval",void 0),Y(this,"uplinkDenoiserStatsUploadInterval",void 0),Y(this,"transportStatsUploadInterval",void 0),Y(this,"uplinkExtensionStatsUploadInterval",void 0),Y(this,"downlinkExtensionStatsUploadInterval",void 0),Y(this,"extensionUsageStatsUploadInterval",void 0),Y(this,"downlinkStatsUploadInterval",void 0),Y(this,"downlinkStatsUploadSlowInterval",void 0),Y(this,"downlinkRelatedStatsUploadInterval",void 0),Y(this,"lastStats",void 0),Y(this,"uploadUnplinkStarted",!1),Y(this,"uploadDownlinkStarted",!1),Y(this,"uploadTransportStarted",!1),Y(this,"uploadExtensionUsageStarted",!1),Y(this,"requestStats",void 0),Y(this,"requestLocalMedia",void 0),Y(this,"requestRemoteMedia",void 0),Y(this,"requestAllTracks",void 0),Y(this,"requestVideoIsReady",void 0),Y(this,"requestUpload",void 0)}startUploadTransportStats(){this.uploadTransportStarted||(this.uploadTransportStarted=!0,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=window.setInterval(()=>{var n;const i=null===(n=this.requestStats)||void 0===n?void 0:n.call(this);i&&this.uploadTransportStats(i)},6e3))}startUploadExtensionUsageStats(){var n=this;if(this.uploadExtensionUsageStarted)return;this.uploadExtensionUsageStarted=!0,this.extensionUsageStatsUploadInterval&&window.clearInterval(this.extensionUsageStatsUploadInterval);const i=new Map;this.extensionUsageStatsUploadInterval=window.setInterval(l(function*(){var c,h,g;const v=Date.now(),m={connectionInterval:ya("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3,details:[],lts:v};let C=[];const y=(null===(c=n.requestAllTracks)||void 0===c?void 0:c.call(n))||[];for(const V of y)!V.muted&&V.enabled&&(C=C.concat(yield V.getProcessorUsage()));const N=(null===(h=n.requestRemoteMedia)||void 0===h?void 0:h.call(n))||[];for(const[V,K]of N)K.has(Sh.VIDEO)&&V.videoTrack&&(C=C.concat(yield V.videoTrack.getProcessorUsage())),K.has(Sh.AUDIO)&&V.audioTrack&&(C=C.concat(yield V.audioTrack.getProcessorUsage()));if(0===C.length)return;m.details=function(V,K){const $={};for(const{id:ye,value:be,level:_s,direction:ua}of V)if($[ye])2===be&&($[ye].value=be),_s>$[ye].level&&($[ye].level=_s),"remote"===ua&&($[ye].remoteUidCount+=1);else{var Z;const ma=null!==(Z=K.get(ye))&&void 0!==Z?Z:0;$[ye]={value:be,level:_s,remoteUidCount:"local"===ua?0:1,totalTs:ma};const pc=2===be?ma+ya("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3:ma;K.set(ye,pc)}return Object.keys($).map(ye=>{const{level:be,value:_s,totalTs:ua}=$[ye];return{id:ye,level:be,value:_s,totalTs:ua}})}(C,i);const k=Date.now();null===(g=n.requestUpload)||void 0===g||g.call(n,p_.EXTENSION_USAGE_STATS,{usageStats:m,sendTs:k>v?k:v+1})}),ya("EXTENSION_USAGE_UPLOAD_INTERVAL"))}startUploadUplinkStats(){this.uploadUnplinkStarted||(this.uploadUnplinkStarted=!0,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkStatsUploadInterval=window.setInterval(()=>{var n;const i=null===(n=this.requestStats)||void 0===n?void 0:n.call(this);i&&(this.uploadUplinkStats(i,this.lastStats),this.lastStats=i)},3e3),this.uplinkStatsUploadSlowInterval&&window.clearInterval(this.uplinkStatsUploadSlowInterval),this.uplinkStatsUploadSlowInterval=window.setInterval(()=>{var n;const i=null===(n=this.requestStats)||void 0===n?void 0:n.call(this);i&&this.uploadSlowUplinkStats(i)},6e4),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkRelatedStatsUploadInterval=window.setInterval(()=>{var n;const i=null===(n=this.requestStats)||void 0===n?void 0:n.call(this);i&&this.uploadRelatedUplinkStats(i,this.lastStats),this.lastStats=i},1e3),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval=window.setInterval(()=>{var n;const i=null===(n=this.requestAllTracks)||void 0===n?void 0:n.call(this);i&&this.uploadDenoiserStats(i)},2e3),this.uplinkExtensionStatsUploadInterval&&window.clearInterval(this.uplinkExtensionStatsUploadInterval),this.uplinkExtensionStatsUploadInterval=window.setInterval(()=>{var n;const i=null===(n=this.requestAllTracks)||void 0===n?void 0:n.call(this);i&&this.uploadExtensionStats(i)},2e3))}uploadTransportStats(n){uT(()=>{var i;null===(i=this.requestUpload)||void 0===i||i.call(this,p_.TRANSPORT_STATS,function(c){const h={connectionType:100};if("relay"===c.selectedCandidatePair.localCandidate.candidateType){const g=c.selectedCandidatePair.localCandidate.relayProtocol;"udp"===g&&(h.connectionType=101),"tcp"===g&&(h.connectionType=103),"tls"===g&&(h.connectionType=104)}return h}(n))})}uploadUplinkStats(n,i){var c;((null===(c=this.requestLocalMedia)||void 0===c?void 0:c.call(this))||[]).forEach(h=>{let[g,{track:v,ssrcs:m}]=h;switch(g){case yl.LocalVideoLowTrack:case yl.LocalVideoTrack:{const y=function(k,U,V){var K;const $=U.videoSend.find(ye=>ye.ssrc===k);if(!$)return null;const Z={id:x0(10,""),timestamp:new Date(U.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:$.ssrc.toString()};switch(Z.A_vstd=V._originMediaStreamTrack&&!V._originMediaStreamTrack.enabled||V._mediaStreamTrack&&!V._mediaStreamTrack.enabled?"1":"0",$.sentFrame&&(Z.A_fhs=$.sentFrame.height.toString(),Z.A_frs=$.sentFrame.frameRate.toString(),Z.A_fws=$.sentFrame.width.toString()),$.adaptionChangeReason){case"none":Z.A_ac="0";break;case"cpu":Z.A_ac="1";break;case"bandwidth":Z.A_ac="2";break;case"other":Z.A_ac="3"}return Z.A_lvps=pQ[V._player?V._player.videoElementStatus:"uninit"].toString(),Z.A_nr=null===(K=$.nacksCount)||void 0===K?void 0:K.toString(),$.avgEncodeMs&&(Z.A_aem=$.avgEncodeMs.toFixed(0).toString()),Z}(m[0].ssrcId,n,v),N=Hge(m[0].ssrcId,n,i);y&&uT(()=>{var k;return null===(k=this.requestUpload)||void 0===k?void 0:k.call(this,p_.PUBLISH_STATS,{stream_type:g===yl.LocalVideoLowTrack?"low":"high",stats:yve(yve({},y),N)})});break}case yl.LocalAudioTrack:{const y=function(N,k,U){const V=k.audioSend.find($=>$.ssrc===N);if(!V)return null;const K={id:x0(10,""),timestamp:new Date(k.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:V.ssrc.toString()};return K.A_astd=U._originMediaStreamTrack.enabled&&U._mediaStreamTrack.enabled?"0":"1",K.A_ail=V.inputLevel?Math.round(100*V.inputLevel).toString():Math.round(100*U._source.getAccurateVolumeLevel()).toString(),K.A_apil=Math.round(100*U._source.getAccurateVolumeLevel()).toString(),V.aecReturnLoss&&(K.A_ecrl=Math.round(V.aecReturnLoss).toString()),V.aecReturnLossEnhancement&&(K.A_ecrle=Math.round(V.aecReturnLossEnhancement).toString()),K}(m[0].ssrcId,n,v);y&&uT(()=>{var N;return null===(N=this.requestUpload)||void 0===N?void 0:N.call(this,p_.PUBLISH_STATS,{stream_type:"high",stats:y})});break}}const C=function(y){const N={id:"bweforvideo",timestamp:new Date(y.timestamp).toISOString(),type:"VideoBwe"};return y.bitrate.retransmit&&(N.A_rb=y.bitrate.retransmit.toString()),y.bitrate.targetEncoded&&(N.A_teb=y.bitrate.targetEncoded.toString()),N.A_aeb=y.bitrate.actualEncoded.toString(),N.A_tb=y.bitrate.transmit.toString(),void 0!==y.sendBandwidth&&(N.A_asb=y.sendBandwidth.toString()),N}(n);C&&uT(()=>{var y;return null===(y=this.requestUpload)||void 0===y?void 0:y.call(this,p_.PUBLISH_STATS,{stream_type:g===yl.LocalVideoLowTrack?"low":"high",stats:C})})})}uploadSlowUplinkStats(n){var i;((null===(i=this.requestLocalMedia)||void 0===i?void 0:i.call(this))||[]).filter(c=>{let[h]=c;return h===yl.LocalVideoLowTrack||h===yl.LocalVideoTrack}).forEach(c=>{let[h,{ssrcs:g}]=c;const v=Hge(g[0].ssrcId,n);v&&uT(()=>{var m;return null===(m=this.requestUpload)||void 0===m?void 0:m.call(this,p_.PUBLISH_STATS,{stream_type:h===yl.LocalVideoLowTrack?"low":"high",stats:v})})})}uploadRelatedUplinkStats(n,i){var c;((null===(c=this.requestLocalMedia)||void 0===c?void 0:c.call(this))||[]).filter(h=>{let[g]=h;return g===yl.LocalVideoLowTrack||g===yl.LocalVideoTrack}).forEach(h=>{let[g,{ssrcs:v}]=h;const m=function(C,y){const N=y.videoSend.find(k=>k.ssrc===C);return N?{mediaType:"video",isVideoMute:!1,frameRateInput:N.inputFrame&&N.inputFrame.frameRate.toString(),frameRateSent:N.sentFrame&&N.sentFrame.frameRate.toString(),googRtt:N.rttMs.toString(),qpSumPerFrame:Math.floor(N.qpSumPerFrame).toString()}:null}(v[0].ssrcId,n);m&&uT(()=>{var C;null===(C=this.requestUpload)||void 0===C||C.call(this,p_.PUBLISH_RELATED_STATS,{stream_type:g===yl.LocalVideoLowTrack?"low":"high",stats:m})})})}uploadDenoiserStats(n){for(let g=0;g<n.length;g++){const v=n[g];if(v instanceof Are){var i,c,h;const m=null===(i=(c=v._external).getDenoiserStats)||void 0===i?void 0:i.call(c);return void(m&&(null===(h=this.requestUpload)||void 0===h||h.call(this,p_.DENOISER_STATS,m)))}}}uploadExtensionStats(n){for(let i=0;i<n.length;i++)n[i].getProcessorStats().forEach(c=>{var h;null===(h=this.requestUpload)||void 0===h||h.call(this,c.type,c.stats)})}stopUploadUplinkStats(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkStatsUploadInterval=void 0,this.uplinkRelatedStatsUploadInterval=void 0,this.uplinkDenoiserStatsUploadInterval=void 0)}startUploadDownlinkStats(){this.uploadDownlinkStarted||(this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkStatsUploadInterval=window.setInterval(()=>{var n;const i=null===(n=this.requestStats)||void 0===n?void 0:n.call(this);i&&(this.uploadDownlinkStats(i,this.lastStats),this.lastStats=i)},3e3),this.downlinkStatsUploadSlowInterval&&window.clearInterval(this.downlinkStatsUploadSlowInterval),this.downlinkStatsUploadSlowInterval=window.setInterval(()=>{var n;const i=null===(n=this.requestStats)||void 0===n?void 0:n.call(this);i&&this.uploadSlowDownlinkStats(i)},6e4),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkRelatedStatsUploadInterval=window.setInterval(()=>{var n;const i=null===(n=this.requestStats)||void 0===n?void 0:n.call(this);i&&(this.uploadRelatedDownlinkStats(i,this.lastStats),this.lastStats=i)},1e3),this.downlinkExtensionStatsUploadInterval&&window.clearInterval(this.downlinkExtensionStatsUploadInterval),this.downlinkExtensionStatsUploadInterval=window.setInterval(()=>{var n;const i=null===(n=this.requestRemoteMedia)||void 0===n?void 0:n.call(this);i&&this.uploadDownlinkExtensionStats(i)},2e3))}uploadDownlinkStats(n,i){var c;((null===(c=this.requestRemoteMedia)||void 0===c?void 0:c.call(this))||[]).forEach(h=>{let[g,v]=h;if(v.has(Sh.VIDEO)&&g.videoTrack){const m=g.videoTrack?function(C,y,N){const k=y.videoRecv.find($=>$.ssrc===C);if(!k)return null;const U={id:x0(10,""),timestamp:new Date(y.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:k.ssrc.toString()};var V,K;return U.bytesReceived=k.bytes.toString(),U.packetsLost=k.packetsLost.toString(),U.packetsReceived=k.packets.toString(),k.framesRateFirefox&&(U.A_frr=k.framesRateFirefox.toString()),k.receivedFrame?(U.A_frr=k.receivedFrame.frameRate.toString(),U.A_fhr=k.receivedFrame.height.toString(),U.A_fwr=k.receivedFrame.width.toString()):(U.A_fhr=null===(V=N._videoHeight)||void 0===V?void 0:V.toString(),U.A_fwr=null===(K=N._videoWidth)||void 0===K?void 0:K.toString()),U.A_frd=k.decodeFrameRate.toString(),k.outputFrame&&(U.A_fro=k.outputFrame.frameRate.toString()),void 0!==k.jitterBufferMs&&(U.A_jbm=Math.floor(k.jitterBufferMs).toString()),void 0!==k.currentDelayMs&&(U.A_cdm=Math.floor(k.currentDelayMs).toString()),U.A_fs=k.firsCount.toString(),U.A_ns=k.nacksCount.toString(),U.A_ps=k.plisCount.toString(),N&&(U.A_vrtd=N._originMediaStreamTrack.enabled&&N._mediaStreamTrack.enabled?"0":"1"),N._player&&N._player.freezeTimeCounterList.length>0&&(U.A_vrft=N._player.freezeTimeCounterList.splice(0,1)[0].toString()),U.A_rvps=pQ[N._player?N._player.videoElementStatus:"uninit"].toString(),U}(g._videoSSRC,n,g.videoTrack):void 0;m&&uT(()=>{var C;return null===(C=this.requestUpload)||void 0===C?void 0:C.call(this,p_.SUBSCRIBE_STATS,{stream_id:g.uid,stats:m})})}if(v.has(Sh.AUDIO)&&g.audioTrack){const m=g.audioTrack?function(C,y,N){const k=y.audioRecv.find(V=>V.ssrc===C);if(!k)return null;const U={id:x0(10,""),timestamp:new Date(y.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:k.ssrc.toString()};return U.bytesReceived=k.bytes.toString(),U.packetsLost=k.packetsLost.toString(),U.packetsReceived=k.packets.toString(),U.A_aol=k.outputLevel?Math.round(100*k.outputLevel).toString():Math.round(100*N._source.getAccurateVolumeLevel()).toString(),U.A_apol=Math.round(100*N._source.getAccurateVolumeLevel()).toString(),N&&(U.A_artd=N._originMediaStreamTrack.enabled&&N._mediaStreamTrack.enabled?"0":"1"),U.A_jr=k.jitterMs.toString(),U.A_jbm=Math.floor(k.jitterBufferMs).toString(),U.A_cdm=Math.floor(k.jitterBufferMs).toString(),U.A_raps=pQ[eS.getPlayerState(N.getTrackId())].toString(),U}(g._audioSSRC,n,g.audioTrack):void 0;m&&uT(()=>{var C;return null===(C=this.requestUpload)||void 0===C?void 0:C.call(this,p_.SUBSCRIBE_STATS,{stream_id:g.uid,stats:m})})}})}uploadSlowDownlinkStats(n){}uploadRelatedDownlinkStats(n,i){var c;((null===(c=this.requestRemoteMedia)||void 0===c?void 0:c.call(this))||[]).forEach(h=>{let[g,v]=h;if(v.has(Sh.VIDEO)&&g.videoTrack){var m;const C=!0===(g._videoSSRC&&(null===(m=this.requestVideoIsReady)||void 0===m?void 0:m.call(this,g._videoSSRC))||!1),y=function(N,k,U,V,K,$){const Z=U.videoRecv.find(ua=>ua.ssrc===N),ye=K?K.videoRecv.find(ua=>ua.ssrc===N):void 0;if(!Z)return null;const be=FQ.isRemoteVideoFreeze($,Z,ye)&&k,_s={mediaType:"video",isVideoMute:!1,peerId:V,frameRateReceived:Z.receivedFrame&&Z.receivedFrame.frameRate.toString(),frameRateDecoded:Z.decodedFrame&&Z.decodedFrame.frameRate.toString(),isFreeze:be,bytesReceived:Z.bytes.toString(),packetsReceived:Z.packets.toString(),packetsLost:Z.packetsLost.toString(),qpSumPerFrame:Math.floor(Z.qpSumPerFrame).toString()};return Z.framesRateFirefox&&(_s.frameRateDecoded=Z.framesRateFirefox.toString(),_s.frameRateReceived=Z.framesRateFirefox.toString()),_s}(g._videoSSRC,C,n,g.uid,i,g.videoTrack);y&&uT(()=>{var N;null===(N=this.requestUpload)||void 0===N||N.call(this,p_.SUBSCRIBE_RELATED_STATS,{stream_id:g.uid,stats:y})})}if(v.has(Sh.AUDIO)&&g.audioTrack){const C=function(y,N,k,U){const V=N.audioRecv.find($=>$.ssrc===y);if(!V)return null;const K=FQ.isRemoteAudioFreeze(U);return{mediaType:"audio",isAudioMute:!1,peerId:k,googJitterReceived:V.jitterMs.toString(),isFreeze:K,bytesReceived:V.bytes.toString(),packetsReceived:V.packets.toString(),packetsLost:V.packetsLost.toString(),frameReceived:V.receivedFrames.toString(),frameDropped:V.droppedFrames.toString()}}(g._audioSSRC,n,g.uid,g.audioTrack);C&&uT(()=>{var y;null===(y=this.requestUpload)||void 0===y||y.call(this,p_.SUBSCRIBE_RELATED_STATS,{stream_id:g.uid,stats:C})})}})}stopUploadDownlinkStats(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkStatsUploadInterval=void 0,this.downlinkRelatedStatsUploadInterval=void 0)}stopUploadTransportStats(){this.uploadTransportStarted&&(this.uploadTransportStarted=!1,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=void 0)}stopUploadExtensionUsageStats(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.extensionUsageStatsUploadInterval&&window.clearInterval(this.extensionUsageStatsUploadInterval),this.extensionUsageStatsUploadInterval=void 0)}uploadDownlinkExtensionStats(n){n.forEach(i=>{let[c,h]=i;h.has(Sh.VIDEO)&&c.videoTrack&&c.videoTrack.getProcessorStats().forEach(g=>{var v;null===(v=this.requestUpload)||void 0===v||v.call(this,g.type,g.stats)}),h.has(Sh.AUDIO)&&c.audioTrack&&c.audioTrack.getProcessorStats().forEach(g=>{var v;null===(v=this.requestUpload)||void 0===v||v.call(this,g.type,g.stats)})})}}var _ve;const Ive="v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0\na=msid-semantic: WMS\na=ice-lite\nm=application 9 UDP/DTLS/SCTP webrtc-datachannel\nc=IN IP4 127.0.0.1\na=mid:0\n";let TCe=uy("RemoteSDP")(_ve=class{get localCapabilities(){return V0(this._localCapabilities)}get rtpCapabilities(){return V0(this._rtpCapabilities)}get candidates(){return V0(this._candidates)}get iceParameters(){return V0(this._iceParameters)}get dtlsParameters(){return V0(this._dtlsParameters)}constructor(e){Y(this,"sessionDesc",void 0),Y(this,"_localCapabilities",void 0),Y(this,"_rtpCapabilities",void 0),Y(this,"_candidates",void 0),Y(this,"_iceParameters",void 0),Y(this,"_dtlsParameters",void 0),Y(this,"setup",void 0),Y(this,"currentMidIndex",void 0),Y(this,"cname",void 0),Y(this,"firefoxSsrcMidMap",new Map),e=V0(e);const{remoteIceParameters:n,remoteDtlsParameters:i,candidates:c,remoteRTPCapabilities:h,remoteSetup:g,localCapabilities:v,cname:m}=e,C=ny.exports.parse(Ive);this._rtpCapabilities=h,this._candidates=c,this._iceParameters=n,this._dtlsParameters=i,this._localCapabilities=v,this.setup=g,this.cname=m;const y=this.rtpCapabilities.send;for(const N of C.mediaDescriptions){if(N.attributes.iceUfrag=n.iceUfrag,N.attributes.icePwd=n.icePwd,N.attributes.fingerprints=i.fingerprints,N.attributes.candidates=c,N.attributes.setup=g,"application"===N.media.mediaType&&(N.attributes.sctpPort="5000"),"video"===N.media.mediaType&&(N.media.fmts=y.videoCodecs.map(k=>k.payloadType.toString(10)),N.attributes.payloads=y.videoCodecs,N.attributes.extmaps=y.videoExtensions,ya("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:k,ssrcGroups:U}=hT([{ssrcId:4e4,rtx:ya("USE_RTX")?40001:void 0}],this.cname);N.attributes.ssrcs=k,N.attributes.ssrcGroups=U}if("audio"===N.media.mediaType&&(N.media.fmts=y.audioCodecs.map(k=>k.payloadType.toString(10)),N.attributes.payloads=y.audioCodecs,N.attributes.extmaps=y.audioExtensions,d3(N),ya("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:k,ssrcGroups:U}=hT([{ssrcId:2e4}],this.cname);N.attributes.ssrcs=k,N.attributes.ssrcGroups=U}}this.sessionDesc=C,this.currentMidIndex=C.mediaDescriptions.length-1}updateRemoteRTPCapabilities(e){const n=ny.exports.parse(Ive);this._rtpCapabilities=e;const i=this.rtpCapabilities.send;for(const c of n.mediaDescriptions){if(c.attributes.iceUfrag=this._iceParameters.iceUfrag,c.attributes.icePwd=this._iceParameters.icePwd,c.attributes.fingerprints=this._dtlsParameters.fingerprints,c.attributes.candidates=this._candidates,c.attributes.setup=this.setup,"application"===c.media.mediaType&&(c.attributes.sctpPort="5000"),"video"===c.media.mediaType&&(c.media.fmts=i.videoCodecs.map(h=>h.payloadType.toString(10)),c.attributes.payloads=i.videoCodecs,c.attributes.extmaps=i.videoExtensions,ya("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:h,ssrcGroups:g}=hT([{ssrcId:4e4,rtx:ya("USE_RTX")?40001:void 0}],this.cname);c.attributes.ssrcs=h,c.attributes.ssrcGroups=g}if("audio"===c.media.mediaType&&(c.media.fmts=i.audioCodecs.map(h=>h.payloadType.toString(10)),c.attributes.payloads=i.audioCodecs,c.attributes.extmaps=i.audioExtensions,ya("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:h,ssrcGroups:g}=hT([{ssrcId:2e4}],this.cname);c.attributes.ssrcs=h,c.attributes.ssrcGroups=g}}this.sessionDesc=n,this.currentMidIndex=n.mediaDescriptions.length-1}preloadRemoteMedia(e){const n=this.candidates,i=this.dtlsParameters,c=this.iceParameters,h=this.rtpCapabilities.send;for(let g=1;g<e;g++){const v=2*g+2e4,m=2*g+4e4,{ssrcs:C,ssrcGroups:y}=hT([{ssrcId:v}],this.cname),{ssrcs:N,ssrcGroups:k}=hT([{ssrcId:m,rtx:ya("USE_RTX")?m+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:h.videoCodecs.map(U=>U.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:c.iceUfrag,icePwd:c.icePwd,unrecognized:[],candidates:n,extmaps:h.videoExtensions,fingerprints:i.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:N,ssrcGroups:k,rtcpFeedbackWildcards:[],payloads:h.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*g-1)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:h.audioCodecs.map(U=>U.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:c.iceUfrag,icePwd:c.icePwd,unrecognized:[],candidates:n,extmaps:h.audioExtensions,fingerprints:i.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:C,ssrcGroups:y,rtcpFeedbackWildcards:[],payloads:h.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*g)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return ny.exports.print(this.sessionDesc)}send(e,n,i,c){const{ssrcs:h,ssrcGroups:g}=hT(n,this.cname,i),v=this.findPreloadMediaDesc(h);if(v){if(h0()&&this.firefoxSsrcMidMap.set(h[0].ssrcId,v.attributes.mid),c&&(c.tcc||c.remb)){const m=this.sessionDesc.mediaDescriptions.indexOf(v);return this.sessionDesc.mediaDescriptions[m]=this.mungSendMediaDesc(v,c),{mid:v.attributes.mid,needExchangeSDP:!0}}return{mid:v.attributes.mid,needExchangeSDP:!1}}{const m=this.findAvailableMediaIndex(e,h);if(L_()||OW()||Q8()){if(-1!==m&&2!==m){const C=V0(this.sessionDesc.mediaDescriptions[m]);return C.attributes.direction="sendonly",C.attributes.ssrcs=h,C.attributes.ssrcGroups=g,this.sessionDesc.mediaDescriptions[m]=this.mungSendMediaDesc(C,c),{mid:C.attributes.mid,needExchangeSDP:!0}}{const C=this.createOrRecycleSendMedia(e,h,g,"sendonly",c);return this.updateBundleMids(),{mid:C.attributes.mid,needExchangeSDP:!0}}}if(-1!==m){const C=V0(this.sessionDesc.mediaDescriptions[m]);return C.attributes.direction="sendonly",C.attributes.ssrcs=h,C.attributes.ssrcGroups=g,this.sessionDesc.mediaDescriptions[m]=this.mungSendMediaDesc(C,c),h0()&&this.firefoxSsrcMidMap.set(h[0].ssrcId,C.attributes.mid),{mid:C.attributes.mid,needExchangeSDP:!0}}{const C=this.createOrRecycleSendMedia(e,h,g,"sendonly",c);return this.updateBundleMids(),h0()&&this.firefoxSsrcMidMap.set(h[0].ssrcId,C.attributes.mid),{mid:C.attributes.mid,needExchangeSDP:!0}}}}batchSend(e){const n=e.map(h=>{let{kind:g,ssrcMsg:v,mslabel:m}=h;return this.send(g,v,m)}),i=[];let c=!1;return n.forEach(h=>{let{mid:g,needExchangeSDP:v}=h;v&&(c=!0),i.push(g)}),{mids:i,needExchangeSDP:c}}stopSending(e){const n=this.sessionDesc.mediaDescriptions.filter(i=>i.attributes.mid&&-1!==e.indexOf(i.attributes.mid));if(n.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");n.forEach(i=>{"0"===i.attributes.mid||h0()||L_()||OW()||Q8()?i.attributes.ssrcs=[]:(i.attributes.ssrcs=[],i.attributes.direction="inactive",i.media.port="0")}),this.updateBundleMids()}mute(e){const n=this.sessionDesc.mediaDescriptions.find(i=>i.attributes.mid===e);if(!n)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));n.attributes.direction="inactive"}unmute(e){const n=this.sessionDesc.mediaDescriptions.find(i=>i.attributes.mid===e);if(!n)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));n.attributes.direction="sendonly"}muteRemote(e){const n=this.sessionDesc.mediaDescriptions.filter(i=>e.includes(i.attributes.mid||""));if(n.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");n.forEach(i=>{i.attributes.direction="inactive"})}unmuteRemote(e){const n=this.sessionDesc.mediaDescriptions.filter(i=>e.includes(i.attributes.mid||""));if(n.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");n.forEach(i=>{i.attributes.direction="recvonly"})}receive(e,n,i,c){e.forEach((h,g)=>{this.createOrRecycleRecvMedia(h,[],"recvonly",n,i,c[g])}),this.updateBundleMids()}stopReceiving(e){const n=this.sessionDesc.mediaDescriptions.filter(i=>-1!==e.indexOf(i.attributes.mid));if(n.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");n.forEach(i=>{i.media.port="0",i.attributes.direction="inactive"}),this.updateBundleMids()}restartICE(e){e=V0(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach(n=>{n.attributes.iceUfrag=e.iceUfrag,n.attributes.icePwd=e.icePwd})}predictReceivingMids(e){const n=[];for(let i=0;i<e;i++)n.push((this.currentMidIndex+i+1).toString(10));return n}findAvailableMediaIndex(e,n){return this.sessionDesc.mediaDescriptions.findIndex(i=>{const c=i.media.mediaType===e&&"0"!==i.media.port&&("sendonly"===i.attributes.direction||"sendrecv"===i.attributes.direction)&&0===i.attributes.ssrcs.length;if(h0()){if(c){const h=this.firefoxSsrcMidMap.get(n[0].ssrcId);return!(h||"0"!==i.attributes.mid&&"1"!==i.attributes.mid)||!(!h||h!==i.attributes.mid)}return!1}return c})}createOrRecycleRecvMedia(e,n,i,c,h,g){const v=e._mediaStreamTrack.kind,m=this.rtpCapabilities.recv,C=this.localCapabilities.send;let y=[];if(v===Sh.VIDEO){var N,k;if(ya("H264_PROFILE_LEVEL_ID")&&"h264"===c&&(y=m.videoCodecs.filter(Z=>{var ye,be;return((null===(ye=Z.rtpMap)||void 0===ye?void 0:ye.encodingName.toLowerCase())||"").includes(c)&&(null==Z||null===(be=Z.fmtp)||void 0===be?void 0:be.parameters["profile-level-id"])===ya("H264_PROFILE_LEVEL_ID")})),!y||0===(null===(N=y)||void 0===N?void 0:N.length)){const Z=C.videoCodecs.filter(ye=>{var be;return((null===(be=ye.rtpMap)||void 0===be?void 0:be.encodingName.toLowerCase())||"").includes(c)});0!==Z.length&&(y=m.videoCodecs.filter(ye=>Z.some(be=>be.payloadType===ye.payloadType)))}if(ya("USE_RTX")){const Z=y.map(be=>be.payloadType.toString()),ye=m.videoCodecs.filter(be=>{var _s,ua;return"rtx"===(null===(_s=be.rtpMap)||void 0===_s?void 0:_s.encodingName)&&Z.includes((null===(ua=be.fmtp)||void 0===ua?void 0:ua.parameters.apt)||"")});y=[...y,...ye]}0===y.length&&(de.warning("codec ".concat(c," not included in rtpCapabilities, fallback to default payloads: ").concat(null===(k=m.videoCodecs[0].rtpMap)||void 0===k?void 0:k.encodingName)),y=m.videoCodecs)}else y=m.audioCodecs.filter(Z=>{var ye;return((null===(ye=Z.rtpMap)||void 0===ye?void 0:ye.encodingName.toLowerCase())||"").includes(h)}),0===y.length&&(de.warning("codec ".concat(h," not included in rtpCapabilities, fallback to opus")),y=m.audioCodecs.filter(Z=>{var ye;return((null===(ye=Z.rtpMap)||void 0===ye?void 0:ye.encodingName.toLowerCase())||"").includes("opus")}));const U=v===Sh.VIDEO?m.videoExtensions:m.audioExtensions;this.currentMidIndex+=1;const V="".concat(this.currentMidIndex);let K={media:{mediaType:v,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:y.map(Z=>Z.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:U,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:n,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:y,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:i,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(V)}};K=this.mungRecvMediaDsec(K,e,g);const $=this.findFirstClosedMedia(v);if($){const Z=this.sessionDesc.mediaDescriptions.indexOf($);this.sessionDesc.mediaDescriptions[Z]=K}else this.sessionDesc.mediaDescriptions.push(K);return K}createOrRecycleSendMedia(e,n,i,c,h){const g=this.rtpCapabilities.send,v=e===Sh.VIDEO?g.videoCodecs:g.audioCodecs,m=e===Sh.VIDEO?g.videoExtensions:g.audioExtensions;this.currentMidIndex+=1;const C="".concat(this.currentMidIndex);let y={media:{mediaType:e,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:v.map(k=>k.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:m,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:n,ssrcGroups:i,rtcpFeedbackWildcards:[],payloads:v,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:c,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(C)}};y=this.mungSendMediaDesc(y,h);const N=this.findFirstClosedMedia(e);if(N){const k=this.sessionDesc.mediaDescriptions.indexOf(N);this.sessionDesc.mediaDescriptions[k]=y}else this.sessionDesc.mediaDescriptions.push(y);return y}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(e=>"0"!==e.media.port).map(e=>e.attributes.mid)}mungRecvMediaDsec(e,n,i){const c=V0(e);return Xde(c),eV(c,n),$de(c,n),zEe(c),qre(c,i,this.localCapabilities.send),c}mungSendMediaDesc(e,n){const i=V0(e);return qre(i,n,this.localCapabilities.recv),d3(i),i}updateRecvMedia(e,n){const i=this.sessionDesc.mediaDescriptions.findIndex(c=>c.attributes.mid===e);if(-1!==i){const c=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[i],n);this.sessionDesc.mediaDescriptions[i]=c}}bumpMid(e){this.currentMidIndex+=e}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find(n=>h0()?"0"===n.media.port&&n.media.mediaType===e:"0"===n.media.port)}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find(n=>{var i,c;return(null===(i=n.attributes)||void 0===i||null===(c=i.ssrcs[0])||void 0===c?void 0:c.ssrcId)===e[0].ssrcId})}getSSRC(e){var n;return null===(n=this.sessionDesc.mediaDescriptions.find(i=>i.attributes.mid===e))||void 0===n?void 0:n.attributes.ssrcs}})||_ve;var bve,Qp;function Cve(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);n&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),i.push.apply(i,c)}return i}function $re(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Cve(Object(i),!0).forEach(function(c){Y(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Cve(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}let wCe=uy("NVExtentionsConnection","store.p2pId")((Cl((Qp=class Ihe extends JN{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}constructor(n,i,c){super(n,i),Y(this,"store",void 0),Y(this,"peerConnection",void 0),Y(this,"remoteSDP",void 0),Y(this,"initialOffer",void 0),Y(this,"transportEventReceiver",void 0),Y(this,"statsFilter",void 0),Y(this,"useRTX",ya("USE_RTX")),Y(this,"localCapabilities",void 0),Y(this,"localCandidateCount",0),Y(this,"allCandidatesReceived",!1),Y(this,"mutex",new _I("NVExtentionsConnection-mutex")),Y(this,"rtcMedia",void 0),this.store=i,this.peerConnection=c,this.statsFilter=she(this.peerConnection,void 0,void 0,h0()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}establish(n){var i=this;return l(function*(){try{const c=yield i.peerConnection.createOffer();if(!c.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const h=mj(c.sdp),g=yield $Ee(!i.useRTX,ya("FILTER_VIDEO_FEC"),ya("FILTER_AUDIO_FEC"));return i.localCapabilities=g,i.initialOffer=c,$re($re({},h),{},{rtpCapabilities:g,offerSDP:c.sdp})}catch(c){throw new ea(_t.GET_LOCAL_CONNECTION_PARAMS_FAILED,c.toString())}})()}connect(n,i,c,h,g,v){var m=this;return l(function*(){try{if(!m.initialOffer)throw new Error("Cannot establish NVConnection without initial offer.");m.remoteSDP=new TCe({remoteIceParameters:n,remoteDtlsParameters:i,candidates:c,remoteRTPCapabilities:h,remoteSetup:g,localCapabilities:ehe(m.localCapabilities),cname:v});const C=m.remoteSDP.toString(),y=ny.exports.parse(m.initialOffer.sdp),N=y.mediaDescriptions.find(V=>"audio"===V.media.mediaType);N&&d3(N);const k=ny.exports.print(y),U=m.logSDPExchange(k||"","offer","local","connect");yield m.peerConnection.setLocalDescription({type:"offer",sdp:k}),null==U||U(C),yield m.peerConnection.setRemoteDescription({type:"answer",sdp:C})}catch(C){throw new ea(_t.EXCHANGE_SDP_FAILED,"NV.connect failed; ".concat(C.toString()))}})()}updateRemoteConnect(n){var i=this;return l(function*(){var c,h,g;null===(c=i.remoteSDP)||void 0===c||c.updateRemoteRTPCapabilities(n),null===(h=i.remoteSDP)||void 0===h||h.preloadRemoteMedia(2);const v=null===(g=i.remoteSDP)||void 0===g?void 0:g.toString();yield i.peerConnection.setRemoteDescription({type:"offer",sdp:v});const m=yield i.peerConnection.createAnswer();yield i.peerConnection.setLocalDescription(m),de.debug("[NVExtentionsConnection] updateRemoteRTPCapabilities by exchanging SDP.")})()}send(n,i,c){var h=this;return aR(function*(){const g=yield Lf(h.mutex.lock("From NVExtentionsConnection.send"));try{if(!h.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.send before remote SDP created");const v=[];n.forEach($=>{const Z=h.peerConnection.addTransceiver($._mediaStreamTrack,{direction:"sendonly"});v.push(Z)}),h0()&&!0===ya("SIMULCAST")&&(pl("debug",h,"apply simulcast for firefox"),yield Lf(h.applySimulcastForFirefox(v,n)));const m=yield Lf(h.peerConnection.createOffer()),C=h.remoteSDP.predictReceivingMids(n.length),y=h.mungSendOfferSDP(m.sdp,n,C),N=ny.exports.parse(y),k=C.map($=>{const Z=N.mediaDescriptions.find(ye=>ye.attributes.mid===$);if(!Z)throw new Error("Cannot extract ssrc from mediaDescription.");return YEe(Z,h.useRTX)});let U;try{U=yield k}catch($){U=[],h.remoteSDP.receive(n,i,c,U);const Z=h.remoteSDP.toString();throw yield Lf(h.peerConnection.setLocalDescription({type:"offer",sdp:y})),yield Lf(h.peerConnection.setRemoteDescription({type:"answer",sdp:Z})),yield Lf(h.stopSending(C,!0)),$}h.remoteSDP.receive(n,i,c,U);const V=h.remoteSDP.toString(),K=h.logSDPExchange(y,"offer","local","send");return yield Lf(h.peerConnection.setLocalDescription({type:"offer",sdp:y})),yield Lf(h.applySimulcastEncodings(v,n)),yield Lf(h.applySendEncodings(v,n)),null==K||K(V),yield Lf(h.peerConnection.setRemoteDescription({type:"answer",sdp:V})),v.map(($,Z)=>({localSSRC:k[Z],id:C[Z],transceiver:$}))}catch(v){throw v instanceof ea?v:new ea(_t.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.send failed; ".concat(v.toString()))}finally{g()}})()}stopSending(n,i){var c=this;return l(function*(){const h=i?void 0:yield c.mutex.lock("From NVExtentionsConnection.stopSending");try{if(!c.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.stopSending before remote SDP created");const g=c.peerConnection.getTransceivers().filter(y=>-1!==n.indexOf(y.mid));if(g.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call NVExtentionsConnection.stopSending.");g.map(y=>{var N;y.direction="inactive",null===(N=y.stop)||void 0===N||N.call(y)});const v=yield c.peerConnection.createOffer(),m=c.logSDPExchange(v.sdp||"","offer","local","stopSending");yield c.peerConnection.setLocalDescription(v),c.remoteSDP.stopReceiving(n);const C=c.remoteSDP.toString();null==m||m(C),yield c.peerConnection.setRemoteDescription({type:"answer",sdp:C})}catch(g){throw new ea(_t.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.stopSending failed; ".concat(g.toString()))}finally{h&&h()}})()}receive(n,i,c,h){var g=this;return l(function*(){try{if(!g.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.receive ".concat(n," before remoteSDP created."));const{mid:v,needExchangeSDP:m}=g.remoteSDP.send(n,i,c,h);if(m){const y=g.remoteSDP.toString(),N=g.logSDPExchange(y,"offer","remote","receive");yield g.peerConnection.setRemoteDescription({type:"offer",sdp:y});const k=yield g.peerConnection.createAnswer(),U=g.mungReceiveAnswerSDP(k.sdp,v,n);null==N||N(U||""),yield g.peerConnection.setLocalDescription({type:"answer",sdp:U}),de.debug("[NVExtentionsConnection] receive ".concat(n," by exchanging SDP."))}else de.debug("[NVExtentionsConnection] receive ".concat(n," no need to exchange SDP."));const C=g.peerConnection.getTransceivers().find(y=>y.mid===v);if(!C)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:C.receiver.track,id:v}}catch(v){throw new ea(_t.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(v.toString()))}})()}batchReceive(n){var i=this;return l(function*(){try{if(!i.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.batchReceive before remoteSDP created.");const{mids:c,needExchangeSDP:h}=i.remoteSDP.batchSend(n);if(h){const g=i.remoteSDP.toString(),v=i.logSDPExchange(g,"offer","remote","receive");yield i.peerConnection.setRemoteDescription({type:"offer",sdp:g});const m=yield i.peerConnection.createAnswer();null==v||v(m.sdp||""),yield i.peerConnection.setLocalDescription(m),de.debug("[NVExtentionsConnection] batchReceive by exchanging SDP.")}else de.debug("[NVExtentionsConnection] batchReceive no need to exchange SDP.");return c.map(g=>{const v=i.peerConnection.getTransceivers().find(m=>m.mid===g);if(!v)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:v.receiver.track,id:g}})}catch(c){throw new ea(_t.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(c.toString()))}})()}stopReceiving(n){var i=this;return l(function*(){try{if(!i.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.stopReceiving before remote SDP created.");i.remoteSDP.stopSending(n);const c=i.remoteSDP.toString(),h=i.logSDPExchange(c,"offer","remote","stopReceiving");yield i.peerConnection.setRemoteDescription({type:"offer",sdp:c});const g=yield i.peerConnection.createAnswer();null==h||h(g.sdp||""),yield i.peerConnection.setLocalDescription(g)}catch(c){throw new ea(_t.EXCHANGE_SDP_FAILED,"NVExtentionsConnection stopReceiving failed; ".concat(c.toString()))}})()}muteRemote(n){var i=this;return l(function*(){try{if(!i.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.muteRemote mid=".concat(n," before remote SDP created."));i.remoteSDP.mute(n);const c=i.remoteSDP.toString(),h=i.logSDPExchange(c,"offer","remote","muteRemote");yield i.peerConnection.setRemoteDescription({type:"offer",sdp:c});const g=yield i.peerConnection.createAnswer();null==h||h(g.sdp||""),yield i.peerConnection.setLocalDescription(g)}catch(c){throw new ea(_t.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteRemote failed; ".concat(c.toString()))}})()}unmuteRemote(n){var i=this;return l(function*(){try{if(!i.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.unmuteRemote mid=".concat(n," before remote SDP created."));i.remoteSDP.unmute(n);const c=i.remoteSDP.toString(),h=i.logSDPExchange(c,"offer","remote","unmuteRemote");yield i.peerConnection.setRemoteDescription({type:"offer",sdp:c});const g=yield i.peerConnection.createAnswer();null==h||h(g.sdp||""),yield i.peerConnection.setLocalDescription(g)}catch(c){throw new ea(_t.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteRemote failed; ".concat(c.toString()))}})()}muteLocal(n){var i=this;return l(function*(){try{if(!i.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.muteLocal before remote SDP created.");const c=i.peerConnection.getTransceivers().filter(m=>m.mid&&-1!==n.indexOf(m.mid));if(c.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length.");c.map(m=>{m.direction="inactive"});const h=yield i.peerConnection.createOffer(),g=i.logSDPExchange(h.sdp||"","offer","local","muteLocal");yield i.peerConnection.setLocalDescription(h),i.remoteSDP.muteRemote(n);const v=i.remoteSDP.toString();null==g||g(v),yield i.peerConnection.setRemoteDescription({type:"answer",sdp:v})}catch(c){throw new ea(_t.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteLocal failed; ".concat(c.toString()))}})()}unmuteLocal(n){var i=this;return l(function*(){try{if(!i.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.unmuteLocal before remote SDP created.");const c=i.peerConnection.getTransceivers().filter(m=>m.mid&&-1!==n.indexOf(m.mid));if(c.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length.");c.map(function(){var m=l(function*(C,y){C.direction="sendonly"});return function(C,y){return m.apply(this,arguments)}}());const h=yield i.peerConnection.createOffer(),g=i.logSDPExchange(h.sdp||"","offer","local","unmuteLocal");yield i.peerConnection.setLocalDescription(h),i.remoteSDP.unmuteRemote(n);const v=i.remoteSDP.toString();null==g||g(v),yield i.peerConnection.setRemoteDescription({type:"answer",sdp:v})}catch(c){throw new ea(_t.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteLocal failed; ".concat(c.toString()))}})()}restartICE(){var n=this;return aR(function*(){const i=yield Lf(n.mutex.lock("From NVExtentionsConnection.restartICE"));try{const c=yield Lf(n.peerConnection.createOffer({iceRestart:!0}));if(!c.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const h=mj(c.sdp),{remoteIceParameters:g}=yield h.iceParameters;if(!n.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");n.remoteSDP.restartICE(g);const v=n.remoteSDP.toString(),m=n.logSDPExchange(c.sdp||"","offer","local","restartICE");yield Lf(n.peerConnection.setLocalDescription(c)),null==m||m(v),yield Lf(n.peerConnection.setRemoteDescription({type:"answer",sdp:v}))}catch(c){de.warning("restart ICE failed, abort operation",c)}finally{i()}})()}close(){var n;null===(n=this.onConnectionStateChange)||void 0===n||n.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(n){return this.statsFilter.getVideoIsReady(n)}updateEncoderConfig(n,i){var c=this;return l(function*(){try{if(!c.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.updateEncoderConfig before remote SDP created.");const h=yield c.peerConnection.createOffer(),g=c.mungSendOfferSDP(h.sdp,[i],[n]);c.remoteSDP.updateRecvMedia(n,i);const v=c.remoteSDP.toString(),m=c.logSDPExchange(g,"offer","local","updateEncoderConfig");yield c.peerConnection.setLocalDescription({type:"offer",sdp:g}),null==m||m(v),yield c.peerConnection.setRemoteDescription({type:"answer",sdp:v})}catch(h){throw new ea(_t.EXCHANGE_SDP_FAILED,h.toString())}})()}updateSendParameters(n,i){var c=this;return l(function*(){const h=c.peerConnection.getTransceivers().filter(g=>g.mid===n);1===h.length&&(c.isVP8Simulcast(i)?h0()||(yield c.applySimulcastEncodings(h,[i])):yield c.applySendEncodings(h,[i]))})()}setStatsRemoteVideoIsReady(n,i){this.statsFilter.setVideoIsReady2(n,i)}replaceTrack(n,i){var c=this;return l(function*(){const h=c.peerConnection.getTransceivers().find(g=>g.mid===i);h&&(yield h.sender.replaceTrack(n._mediaStreamTrack))})()}getP2PConnectionParams(){var n;if(null===(n=this.peerConnection.currentLocalDescription)||void 0===n||!n.sdp||!this.localCapabilities)throw new Error;return $re($re({},mj(this.peerConnection.currentLocalDescription.sdp)),{},{rtpCapabilities:this.localCapabilities})}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var n;null===(n=this.onICEConnectionStateChange)||void 0===n||n.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var n;null===(n=this.onConnectionStateChange)||void 0===n||n.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=n=>{n.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,de.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,de.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},ya("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(n){const i={iceServers:[]};return n.iceServers?i.iceServers=n.iceServers:n.turnServer&&"off"!==n.turnServer.mode&&(j4(n.turnServer.servers)?i.iceServers=n.turnServer.servers:(i.iceServers&&i.iceServers.push(...Ihe.turnServerConfigToIceServers(n.turnServer.servers)),ya("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&n.turnServer.serversFromGateway&&i.iceServers.push(...Ihe.turnServerConfigToIceServers(n.turnServer.serversFromGateway)),ya("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":n.turnServer.servers.concat(n.turnServer.serversFromGateway||[]).forEach(c=>{c.forceturn&&(i.iceTransportPolicy="relay")}))),i}static turnServerConfigToIceServers(n){const i=[];return n.forEach(c=>{c.security?c.tcpport&&i.push({username:c.username,credential:c.password,credentialType:"password",urls:"turns:".concat(Ere(c.turnServerURL),":").concat(c.tcpport,"?transport=tcp")}):(c.udpport&&!ya("FORCE_TURN_TCP")&&i.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.udpport,"?transport=udp")}),c.tcpport&&i.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.tcpport,"?transport=tcp")}))}),i}applySendEncodings(n,i){var c=this;return l(function*(){try{if(!dy().supportSetRtpSenderParameters||n.length!==i.length)return;for(let N=0;N<n.length;N++){const k=n[N],U=i[N];if(U&&U instanceof ty){var h,g;if(c.isVP8Simulcast(U))continue;const V={},K={};switch(U._optimizationMode){case"motion":V.degradationPreference="maintain-framerate";break;case"detail":V.degradationPreference="maintain-resolution";break;default:V.degradationPreference="balanced"}var v,m,C,y;if(null!==(h=U._encoderConfig)&&void 0!==h&&h.bitrateMax&&(K.maxBitrate=1e3*(null===(v=U._encoderConfig)||void 0===v?void 0:v.bitrateMax)),U._hints.includes(vy.LOW_STREAM)&&(null!==(m=U._encoderConfig)&&void 0!==m&&m.frameRate&&(K.maxFramerate=_k(U._encoderConfig.frameRate)),null!==(C=U._encoderConfig)&&void 0!==C&&C.scaleResolutionDownBy&&(null===(y=U._encoderConfig)||void 0===y?void 0:y.scaleResolutionDownBy)>1&&(K.scaleResolutionDownBy=U._encoderConfig.scaleResolutionDownBy)),ya("DSCP_TYPE")&&jM()){const ye=ya("DSCP_TYPE");["very-low","low","medium","high"].includes(ye)&&(K.networkPriority=ye)}const $=k.sender.getParameters(),Z=null===(g=$.encodings)||void 0===g?void 0:g[0];h0()&&!Z&&(V.encodings=[K]),Z&&Object.assign(Z,K),Object.assign($,V),yield k.sender.setParameters($)}}}catch(N){de.debug("Apply RTPSendEncodings failed.")}})()}mungSendOfferSDP(n,i,c){const h=ny.exports.parse(n);return i.forEach((g,v)=>{const m=c[v],C=h.mediaDescriptions.find(y=>y.attributes.mid===m);C&&(eV(C,g),XEe(C,g,this.store.codec))}),ny.exports.print(h)}mungReceiveAnswerSDP(n,i,c){const h=ny.exports.parse(n),g=h.mediaDescriptions.find(v=>v.attributes.mid===i);return g&&c===Sh.AUDIO&&"audio"===g.media.mediaType&&d3(g),ny.exports.print(h)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=n=>{var i;null===(i=this.onFirstAudioReceived)||void 0===i||i.call(this,n)},this.statsFilter.onFirstVideoReceived=n=>{var i;null===(i=this.onFirstVideoReceived)||void 0===i||i.call(this,n)},this.statsFilter.onFirstAudioDecoded=n=>{var i;null===(i=this.onFirstAudioDecoded)||void 0===i||i.call(this,n)},this.statsFilter.onFirstVideoDecoded=(n,i,c)=>{var h;null===(h=this.onFirstVideoDecoded)||void 0===h||h.call(this,n,i,c)},this.statsFilter.onSelectedLocalCandidateChanged=(n,i)=>{var c;null===(c=this.onSelectedLocalCandidateChanged)||void 0===c||c.call(this,n,i)},this.statsFilter.onSelectedRemoteCandidateChanged=(n,i)=>{var c;null===(c=this.onSelectedRemoteCandidateChanged)||void 0===c||c.call(this,n,i)},this.statsFilter.onFirstVideoDecodedTimeout=n=>{var i;null===(i=this.onFirstVideoDecodedTimeout)||void 0===i||i.call(this,n)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}applySimulcastForFirefox(n,i){var c=this;return l(function*(){if(n.length===i.length)for(let C=0;C<n.length;C++){var h,g,v,m;const y=n[C],N=i[C];if(N instanceof ty&&!N._hints.includes(vy.LOW_STREAM)&&null!==(h=N._encoderConfig)&&void 0!==h&&h.bitrateMax&&(null===(g=N._encoderConfig)||void 0===g?void 0:g.bitrateMax)>200&&null!==(v=N._scalabiltyMode)&&void 0!==v&&v.numSpatialLayers&&(null===(m=N._scalabiltyMode)||void 0===m?void 0:m.numSpatialLayers)>1&&"vp8"===c.store.codec){const k={},U={high:1e3*(N._encoderConfig.bitrateMax-50),medium:5e4};k.encodings=[{rid:"m",active:!0,maxBitrate:U.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:U.high}];const V=y.sender.getParameters();yield y.sender.setParameters(Object.assign(V,k))}}})()}applySimulcastEncodings(n,i){var c=this;return l(function*(){if(!h0()&&n.length===i.length)for(let h=0;h<n.length;h++){const g=i[h];if(g instanceof ty&&c.isVP8Simulcast(g)){const v=n[h],m={},C={high:1e3*(g._encoderConfig.bitrateMax-50),medium:5e4};m.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:C.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:C.medium,scaleResolutionDownBy:4}];const y=v.sender.getParameters();yield v.sender.setParameters(Object.assign(y,m))}}})()}isVP8Simulcast(n){var i,c,h,g;return!!(n instanceof ty&&ya("SIMULCAST")&&"vp8"===this.store.codec&&!n._hints.includes(vy.LOW_STREAM)&&null!==(i=n._encoderConfig)&&void 0!==i&&i.bitrateMax&&(null===(c=n._encoderConfig)||void 0===c?void 0:c.bitrateMax)>200&&null!==(h=n._scalabiltyMode)&&void 0!==h&&h.numSpatialLayers&&(null===(g=n._scalabiltyMode)||void 0===g?void 0:g.numSpatialLayers)>1)}logSDPExchange(n,i,c,h){if(ya("SDP_LOGGING"))return de.upload("exchanging ".concat(c," ").concat(i," SDP during NVExtentionsConnection.").concat(h,"\n"),n),"offer"===i?g=>{this.logSDPExchange(g,"answer","local"===c?"remote":"local",h)}:void 0}getRemoteSSRC(n){var i=this;return l(function*(){if(!i.remoteSDP)return;const c=i.remoteSDP.getSSRC(n);return null==c?void 0:c[0].ssrcId})()}}).prototype,"connect",[SS],Object.getOwnPropertyDescriptor(Qp.prototype,"connect"),Qp.prototype),Cl(Qp.prototype,"updateRemoteConnect",[SS],Object.getOwnPropertyDescriptor(Qp.prototype,"updateRemoteConnect"),Qp.prototype),Cl(Qp.prototype,"receive",[SS],Object.getOwnPropertyDescriptor(Qp.prototype,"receive"),Qp.prototype),Cl(Qp.prototype,"batchReceive",[SS],Object.getOwnPropertyDescriptor(Qp.prototype,"batchReceive"),Qp.prototype),Cl(Qp.prototype,"stopReceiving",[SS],Object.getOwnPropertyDescriptor(Qp.prototype,"stopReceiving"),Qp.prototype),Cl(Qp.prototype,"muteRemote",[SS],Object.getOwnPropertyDescriptor(Qp.prototype,"muteRemote"),Qp.prototype),Cl(Qp.prototype,"unmuteRemote",[SS],Object.getOwnPropertyDescriptor(Qp.prototype,"unmuteRemote"),Qp.prototype),Cl(Qp.prototype,"muteLocal",[SS],Object.getOwnPropertyDescriptor(Qp.prototype,"muteLocal"),Qp.prototype),Cl(Qp.prototype,"unmuteLocal",[SS],Object.getOwnPropertyDescriptor(Qp.prototype,"unmuteLocal"),Qp.prototype),Cl(Qp.prototype,"close",[SS],Object.getOwnPropertyDescriptor(Qp.prototype,"close"),Qp.prototype),Cl(Qp.prototype,"updateEncoderConfig",[SS],Object.getOwnPropertyDescriptor(Qp.prototype,"updateEncoderConfig"),Qp.prototype),Cl(Qp.prototype,"updateSendParameters",[SS],Object.getOwnPropertyDescriptor(Qp.prototype,"updateSendParameters"),Qp.prototype),Cl(Qp.prototype,"replaceTrack",[SS],Object.getOwnPropertyDescriptor(Qp.prototype,"replaceTrack"),Qp.prototype),Cl(Qp.prototype,"getRemoteSSRC",[SS],Object.getOwnPropertyDescriptor(Qp.prototype,"getRemoteSSRC"),Qp.prototype),bve=Qp))||bve;function SS(e,n,i){const c=e[n];if("function"!=typeof c)throw new Error("Cannot use mutex on object property.");return i.value=l(function*(){const h=this.mutex,g=yield h.lock("From NVExtentionsConnection.".concat(n));try{for(var v=arguments.length,m=new Array(v),C=0;C<v;C++)m[C]=arguments[C];return yield c.apply(this,m)}finally{g()}}),i}var Sve,_m;function Tve(e){var n,i,c,h=2;for("undefined"!=typeof Symbol&&(i=HEe,c=Symbol.iterator);h--;){if(i&&null!=(n=e[i]))return n.call(e);if(c&&null!=(n=e[c]))return new uhe(n.call(e));i="@@asyncIterator",c="@@iterator"}throw new TypeError("Object is not async iterable")}function uhe(e){function n(i){if(Object(i)!==i)return _l.reject(new TypeError(i+" is not an object."));var c=i.done;return _l.resolve(i.value).then(function(h){return{value:h,done:c}})}return(uhe=function(i){this.s=i,this.n=i.next}).prototype={s:null,n:null,next:function(){return n(this.n.apply(this.s,arguments))},return:function(i){var c=this.s.return;return void 0===c?_l.resolve({value:i,done:!0}):n(c.apply(this.s,arguments))},throw:function(i){var c=this.s.return;return void 0===c?_l.reject(i):n(c.apply(this.s,arguments))}},new uhe(e)}let lhe=uy("DataChannelConnection","store.dcId")((Cl((_m=class oie extends JN{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}constructor(n,i){super(n,i),Y(this,"store",void 0),Y(this,"peerConnection",void 0),Y(this,"cname",void 0),Y(this,"mutex",new _I("DataChannelConnection-mutex")),Y(this,"dataChannel",void 0),Y(this,"_p2pConnection",void 0),Y(this,"_nvMedia",void 0),this.store=i,this.store.dcId=this.store.dcId+1,this.peerConnection=new RTCPeerConnection(oie.resolvePCConfiguration(n),{optional:[{googDscp:!0}]}),this.dataChannel=this.peerConnection.createDataChannel("agora-signal",{ordered:!1,maxPacketLifeTime:50}),this.dataChannel.binaryType="arraybuffer",this._p2pConnection=new wCe(n,i,this.peerConnection),this.bindPCEvents()}establish(){var n=this;return l(function*(){var i;const c=null===(i=n._nvMedia)||void 0===i?void 0:i.getLocalRtpCapabilities();return yield n._p2pConnection.establish(c)})()}getP2PConnectionParams(){return this._p2pConnection.getP2PConnectionParams()}connect(n,i,c,h,g,v){var m=this;return l(function*(){return m.cname=v,yield m._p2pConnection.connect(n,i,c,h,g,v),yield new _l((C,y)=>{const N=setTimeout(()=>{m.closeSignal(),y(new ea(_t.DATACHANNEL_CONNECTION_TIMEOUT,"Datachannel connection timed out, candidates: ".concat(JSON.stringify(c))))},2e3);m.dataChannel.onopen=()=>{if("open"===m.dataChannel.readyState)return clearTimeout(N),void C()},m.dataChannel.onerror=k=>{m.closeSignal(),y(k)}}),{transmitter:m.dataChannel,close:m.closeSignal.bind(m)}})()}send(n,i,c){var h=this;return aR(function*(){const g=yield Lf(h.mutex.lock("From DataChannelConnection.send"));try{return yield*rz(Tve(h._p2pConnection.send(n,i,c)),Lf)}finally{g()}})()}stopSending(n,i){var c=this;return l(function*(){return c._p2pConnection.stopSending(n,i)})()}receive(n,i,c,h){var g=this;return l(function*(){return g._nvMedia?(de.debug("[DataChannelConnection] receive ".concat(n," by DataChannel.")),yield g._nvMedia.reveiveByRTCMedia(n,i,g.cname)):(de.debug("[DataChannelConnection] receive ".concat(n," by WebRTC.")),yield g._p2pConnection.receive(n,i,c,h))})()}batchReceive(n){var i=this;return l(function*(){return[...yield i._p2pConnection.batchReceive(n)]})()}stopReceiving(n){var i=this;return l(function*(){return yield i._p2pConnection.stopReceiving(n)})()}muteRemote(n){var i=this;return l(function*(){return yield i._p2pConnection.muteRemote(n)})()}unmuteRemote(n){var i=this;return l(function*(){return yield i._p2pConnection.unmuteRemote(n)})()}muteLocal(n){var i=this;return l(function*(){return yield i._p2pConnection.muteLocal(n)})()}unmuteLocal(n){var i=this;return l(function*(){return yield i._p2pConnection.unmuteLocal(n)})()}restartICE(){var n=this;return aR(function*(){return yield*rz(Tve(n._p2pConnection.restartICE()),Lf)})()}close(){var n;null===(n=this._nvMedia)||void 0===n||n.close(),this._p2pConnection.close(),this.unbindConnectionEvents(this._p2pConnection)}getStats(){return this._p2pConnection.getStats()}getRemoteVideoIsReady(n){return this._p2pConnection.getRemoteVideoIsReady(n)}updateRemoteConnect(n){var i;null===(i=this._nvMedia)||void 0===i||i.setRemoteRtpCapabilities(n),this._p2pConnection.updateRemoteConnect(n)}updateEncoderConfig(n,i){var c=this;return l(function*(){return yield c._p2pConnection.updateEncoderConfig(n,i)})()}updateSendParameters(n,i){var c=this;return l(function*(){return yield c._p2pConnection.updateSendParameters(n,i)})()}setStatsRemoteVideoIsReady(n,i){this._p2pConnection.setStatsRemoteVideoIsReady(n,i)}replaceTrack(n,i){var c=this;return l(function*(){return yield c._p2pConnection.replaceTrack(n,i)})()}getRemoteSSRC(n){var i=this;return l(function*(){return i._p2pConnection.getRemoteSSRC(n)})()}logSDPExchange(n,i,c,h){if(ya("SDP_LOGGING"))return de.upload("exchanging ".concat(c," ").concat(i," SDP during DataChannelConnection.").concat(h,"\n"),n),"offer"===i?g=>{this.logSDPExchange(g,"answer","local"===c?"remote":"local",h)}:void 0}static resolvePCConfiguration(n){const i={iceServers:[]};return n.iceServers?i.iceServers=n.iceServers:n.turnServer&&"off"!==n.turnServer.mode&&(j4(n.turnServer.servers)?i.iceServers=n.turnServer.servers:(i.iceServers&&i.iceServers.push(...oie.turnServerConfigToIceServers(n.turnServer.servers)),ya("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&n.turnServer.serversFromGateway&&i.iceServers.push(...oie.turnServerConfigToIceServers(n.turnServer.serversFromGateway)),ya("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":n.turnServer.servers.concat(n.turnServer.serversFromGateway||[]).forEach(c=>{c.forceturn&&(i.iceTransportPolicy="relay")}))),i}static turnServerConfigToIceServers(n){const i=[];return n.forEach(c=>{c.security?c.tcpport&&i.push({username:c.username,credential:c.password,credentialType:"password",urls:"turns:".concat(Ere(c.turnServerURL),":").concat(c.tcpport,"?transport=tcp")}):(c.udpport&&!ya("FORCE_TURN_TCP")&&i.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.udpport,"?transport=udp")}),c.tcpport&&i.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.tcpport,"?transport=tcp")}))}),i}bindPCEvents(){this._p2pConnection.onICEConnectionStateChange=n=>{var i;return null===(i=this.onICEConnectionStateChange)||void 0===i?void 0:i.call(this,n)},this._p2pConnection.onConnectionStateChange=n=>{var i;return null===(i=this.onConnectionStateChange)||void 0===i?void 0:i.call(this,n)},this._p2pConnection.onDTLSTransportStateChange=n=>{var i;return null===(i=this.onDTLSTransportStateChange)||void 0===i?void 0:i.call(this,n)},this._p2pConnection.onDTLSTransportError=n=>{var i;return null===(i=this.onDTLSTransportError)||void 0===i?void 0:i.call(this,n)},this._p2pConnection.onICETransportStateChange=n=>{var i;return null===(i=this.onICETransportStateChange)||void 0===i?void 0:i.call(this,n)},this._p2pConnection.onFirstAudioReceived=n=>{var i;return null===(i=this.onFirstAudioReceived)||void 0===i?void 0:i.call(this,n)},this._p2pConnection.onFirstVideoReceived=n=>{var i;return null===(i=this.onFirstVideoReceived)||void 0===i?void 0:i.call(this,n)},this._p2pConnection.onFirstAudioDecoded=n=>{var i;return null===(i=this.onFirstAudioDecoded)||void 0===i?void 0:i.call(this,n)},this._p2pConnection.onFirstVideoDecoded=(n,i,c)=>{var h;return null===(h=this.onFirstVideoDecoded)||void 0===h?void 0:h.call(this,n,i,c)},this._p2pConnection.onFirstVideoDecodedTimeout=n=>{var i;return null===(i=this.onFirstVideoDecodedTimeout)||void 0===i?void 0:i.call(this,n)},this._p2pConnection.onSelectedLocalCandidateChanged=(n,i)=>{var c;return null===(c=this.onSelectedLocalCandidateChanged)||void 0===c?void 0:c.call(this,n,i)},this._p2pConnection.onSelectedRemoteCandidateChanged=(n,i)=>{var c;return null===(c=this.onSelectedRemoteCandidateChanged)||void 0===c?void 0:c.call(this,n,i)}}closeSignal(){this.dataChannel.close(),this.peerConnection.close()}unbindConnectionEvents(n){n.onConnectionStateChange=void 0,n.onICEConnectionStateChange=void 0,n.onICETransportStateChange=void 0,n.onDTLSTransportStateChange=void 0,n.onDTLSTransportError=void 0,n.onFirstAudioDecoded=void 0,n.onFirstAudioReceived=void 0,n.onFirstVideoDecoded=void 0,n.onFirstVideoReceived=void 0,n.onSelectedLocalCandidateChanged=void 0,n.onSelectedRemoteCandidateChanged=void 0,n.onFirstVideoDecodedTimeout=void 0}}).prototype,"connect",[lR],Object.getOwnPropertyDescriptor(_m.prototype,"connect"),_m.prototype),Cl(_m.prototype,"receive",[lR],Object.getOwnPropertyDescriptor(_m.prototype,"receive"),_m.prototype),Cl(_m.prototype,"stopReceiving",[lR],Object.getOwnPropertyDescriptor(_m.prototype,"stopReceiving"),_m.prototype),Cl(_m.prototype,"muteRemote",[lR],Object.getOwnPropertyDescriptor(_m.prototype,"muteRemote"),_m.prototype),Cl(_m.prototype,"unmuteRemote",[lR],Object.getOwnPropertyDescriptor(_m.prototype,"unmuteRemote"),_m.prototype),Cl(_m.prototype,"muteLocal",[lR],Object.getOwnPropertyDescriptor(_m.prototype,"muteLocal"),_m.prototype),Cl(_m.prototype,"unmuteLocal",[lR],Object.getOwnPropertyDescriptor(_m.prototype,"unmuteLocal"),_m.prototype),Cl(_m.prototype,"close",[lR],Object.getOwnPropertyDescriptor(_m.prototype,"close"),_m.prototype),Cl(_m.prototype,"updateEncoderConfig",[lR],Object.getOwnPropertyDescriptor(_m.prototype,"updateEncoderConfig"),_m.prototype),Cl(_m.prototype,"updateSendParameters",[lR],Object.getOwnPropertyDescriptor(_m.prototype,"updateSendParameters"),_m.prototype),Cl(_m.prototype,"replaceTrack",[lR],Object.getOwnPropertyDescriptor(_m.prototype,"replaceTrack"),_m.prototype),Cl(_m.prototype,"getRemoteSSRC",[lR],Object.getOwnPropertyDescriptor(_m.prototype,"getRemoteSSRC"),_m.prototype),Sve=_m))||Sve;function lR(e,n,i){const c=e[n];if("function"!=typeof c)throw new Error("Cannot use mutex on object property.");return i.value=l(function*(){const h=this.mutex,g=yield h.lock("From DataChannelConnection.".concat(n));try{for(var v=arguments.length,m=new Array(v),C=0;C<v;C++)m[C]=arguments[C];return yield c.apply(this,m)}finally{g()}}),i}var wve,Cp;function Rve(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);n&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),i.push.apply(i,c)}return i}function h3(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Rve(Object(i),!0).forEach(function(c){Y(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Rve(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}function dhe(e){var n,i,c,h=2;for("undefined"!=typeof Symbol&&(i=HEe,c=Symbol.iterator);h--;){if(i&&null!=(n=e[i]))return n.call(e);if(c&&null!=(n=e[c]))return new hhe(n.call(e));i="@@asyncIterator",c="@@iterator"}throw new TypeError("Object is not async iterable")}function hhe(e){function n(i){if(Object(i)!==i)return _l.reject(new TypeError(i+" is not an object."));var c=i.done;return _l.resolve(i.value).then(function(h){return{value:h,done:c}})}return(hhe=function(i){this.s=i,this.n=i.next}).prototype={s:null,n:null,next:function(){return n(this.n.apply(this.s,arguments))},return:function(i){var c=this.s.return;return void 0===c?_l.resolve({value:i,done:!0}):n(c.apply(this.s,arguments))},throw:function(i){var c=this.s.return;return void 0===c?_l.reject(i):n(c.apply(this.s,arguments))}},new hhe(e)}let RCe=uy("P2PChannel","store.p2pId")((Cl((Cp=class extends f0{get state(){return this._state}set state(e){const n=this._state;this._state=e,this.emit(Pf.StateChange,n,this._state)}constructor(e,n){var i;super(),i=this,Y(this,"store",void 0),Y(this,"statsUploader",void 0),Y(this,"connection",void 0),Y(this,"localTrackMap",new Map),Y(this,"remoteUserMap",new Map),Y(this,"pendingLocalTracks",[]),Y(this,"pendingRemoteTracks",[]),Y(this,"statsCollector",void 0),Y(this,"isPlanB",!1),Y(this,"iceFailedCount",0),Y(this,"dtlsFailedCount",0),Y(this,"mutex",new _I("P2PChannel-mutex")),Y(this,"_state",z_.Disconnected),Y(this,"handleMuteLocalTrack",function(){var c=l(function*(h,g,v){const m=yield i.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!i.connection)return void v(new ea(_t.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));Gc("debug",i,"handleMuteLocalTrack",h.getTrackId()),yield i.waitTillConnected();const C=i.filterTobeMutedTracks(h);if(0===C.length)return void g();const y=C.find(k=>"videoLowTrack"===k[0]);y&&y[1].track._originMediaStreamTrack.stop(),yield i.connection.muteLocal(C.map(k=>{let[,{id:U}]=k;return U}));const N=i.createMuteMessage(C);yield Q0(i,Pf.RequestMuteLocal,N),g()}catch(C){v(C)}finally{m()}});return function(h,g,v){return c.apply(this,arguments)}}()),Y(this,"handleUnmuteLocalTrack",function(){var c=l(function*(h,g,v){const m=yield i.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!i.connection)return void v(new ea(_t.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));Gc("debug",i,"handleUnmuteLocalTrack",h.getTrackId()),yield i.waitTillConnected();const C=i.filterTobeUnmutedTracks(h);if(0===C.length)return void g();const y=C.find(k=>"videoLowTrack"===k[0]);if(y){const k=y[1];if(k.track._originMediaStreamTrack.stop(),dy().supportDualStreamEncoding){const U=h._mediaStreamTrack.clone();k.track._mediaStreamTrack=U,k.track._originMediaStreamTrack=U}else{const U=pve(h,tj(i,Pf.RequestLowStreamParameter));k.track._mediaStreamTrack=U,k.track._originMediaStreamTrack=U}yield new _l((U,V)=>{i.handleReplaceTrack(k.track,U,V,!0)})}yield i.connection.unmuteLocal(C.map(k=>{let[,{id:U}]=k;return U}));const N=i.createUnmuteMessage(C);yield Q0(i,Pf.RequestUnmuteLocal,N),g()}catch(C){v(C)}finally{m()}});return function(h,g,v){return c.apply(this,arguments)}}()),Y(this,"handleUpdateVideoEncoder",function(){var c=l(function*(h,g,v){const m=yield i.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{const C=i.localTrackMap.get(yl.LocalVideoTrack);if(!i.connection||!C||C.track!==h)return void g();yield i.waitTillConnected();const{id:y,track:N}=C;yield i.connection.updateSendParameters(y,N),yield i.connection.updateEncoderConfig(y,N),i.emit(Pf.UpdateVideoEncoder,N),g()}catch(C){v(C)}finally{m()}});return function(h,g,v){return c.apply(this,arguments)}}()),Y(this,"handleSetOptimizationMode",function(){var c=l(function*(h,g,v){const m=yield i.mutex.lock("Locking from P2PChannel.handleSetOptimizationMode");try{const C=i.localTrackMap.get(yl.LocalVideoTrack);if(!i.connection||!C||C.track!==h)return;yield i.waitTillConnected();const{id:y,track:N}=C;yield i.connection.updateSendParameters(y,N),g()}catch(C){v(C)}finally{m()}});return function(h,g,v){return c.apply(this,arguments)}}()),Y(this,"handleReplaceTrack",function(){var c=l(function*(h,g,v,m){let C;de.debug("P2PChannel handleReplaceTrack for [track-id-".concat(h.getTrackId(),"]")),"boolean"==typeof m&&m||(C=yield i.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var y;const k=Array.from(i.localTrackMap.entries()).find(U=>{let[,{track:V}]=U;return h===V});if(!i.connection||!k)return void g();if(yield i.waitTillConnected(),yield null===(y=i.connection)||void 0===y?void 0:y.replaceTrack(h,k[1].id),i.isPlanB){const U=k[1];U.id=h._mediaStreamTrack.id,i.localTrackMap.set(k[0],U)}if(k[0]===yl.LocalVideoTrack&&dy().supportDualStreamEncoding){const U=i.localTrackMap.get(yl.LocalVideoLowTrack);if(U){const V=h._mediaStreamTrack.clone();U.track._originMediaStreamTrack.stop(),U.track._mediaStreamTrack=V,U.track._originMediaStreamTrack=V,yield new _l((K,$)=>{i.handleReplaceTrack(U.track,K,$,!0)})}}g()}catch(k){v(k)}finally{var N;null===(N=C)||void 0===N||N()}});return function(h,g,v,m){return c.apply(this,arguments)}}()),Y(this,"handleGetLocalVideoStats",c=>{c(this.statsCollector.getLocalVideoTrackStats())}),Y(this,"handleGetLocalAudioStats",c=>{c(this.statsCollector.getLocalAudioTrackStats())}),Y(this,"handleGetRemoteVideoStats",c=>this.statsCollector.getRemoteVideoTrackStats(c.uid)[c.uid]),Y(this,"handleGetRemoteAudioStats",c=>this.statsCollector.getRemoteAudioTrackStats(c.uid)[c.uid]),this.store=e,this.statsCollector=n,this.statsCollector.addP2PChannel(this),this.statsUploader=new SCe,this.bindStatsUploaderEvents(),this.isPlanB=!dy().supportUnifiedPlan||ya("CHROME_FORCE_PLAN_B")&&jM()}startP2PConnection(e,n){var i=this;return l(function*(){return i.state=z_.New,i.connection=n?new lhe(e,i.store):i.isPlanB?new ICe(e,i.store):new CCe(e,i.store),i.bindConnectionEvents(i.connection),i.connection.establish()})()}connect(e,n,i,c,h,g){var v=this;return l(function*(){if(!v.connection)throw new ea(_t.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");v.connection instanceof lhe?v.connection.updateRemoteConnect(c):(v.store.peerConnectionStart(),yield v.connection.connect(e,n,i,c,h,g),v.statsUploader.startUploadTransportStats(),v.statsUploader.startUploadExtensionUsageStats(),v.state=z_.Connected)})()}preConnect(e,n,i,c,h,g){var v=this;return l(function*(){if(!v.connection)throw new ea(_t.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");v.store.peerConnectionStart();const m=yield v.connection.connect(e,n,i,c,h,g);return v.statsUploader.startUploadTransportStats(),v.statsUploader.startUploadExtensionUsageStats(),v.state=z_.Connected,m})()}getEstablishParams(){if(this.connection instanceof lhe)return this.connection.getP2PConnectionParams();throw new Error("Only DataChannelConnection needs to obtain establishParams")}publish(e,n,i){var c=this;return aR(function*(){const h=yield Lf(c.mutex.lock("From P2PChannel.publish"));try{if(!c.connection){if(c.state===z_.Disconnected)throw new ea(_t.UNEXPECTED_ERROR,"PeerConnection already disconnected.");c.throwIfTrackTypeNotMatch(e);const v=e.filter(m=>-1===c.pendingLocalTracks.indexOf(m));return void(c.pendingLocalTracks=c.pendingLocalTracks.concat(v))}c.store.pubId=c.store.pubId+1,cT.markPublishStart(c.store.clientId,c.store.pubId),yield Lf(c.waitTillConnected());const g=c.filterTobePublishedTracks(e,n,i);if(0===g.length)return void(yield Lf(c.tryToUnmuteAudio(e)));yield*rz(dhe(c.doPublish(c.connection,g)),Lf)}finally{h()}})()}doPublish(e,n){var i=this;return aR(function*(){n.forEach(y=>{let{track:N,type:k}=y;const U=Date.now();i.store.publish(N.getTrackId(),k===yl.LocalAudioTrack?"audio":"video",U)}),i.bindLocalTrackEvents(n);const c=yield Lf(e.send(n.map(y=>{let{track:N}=y;return N}),i.store.codec,i.store.audioCodec)),h=(yield Lf(c.next())).value,g=i.createGatewayPublishMessage(n,h);let v;try{v=yield g}catch(y){throw pl("error",i,"doPublish yield error: ".concat(y.toString())),c.throw(y),(null==y?void 0:y.code)===_t.WS_ABORT&&n.forEach(N=>{let{track:k}=N;-1===i.pendingLocalTracks.indexOf(k)&&i.pendingLocalTracks.push(k)}),i.unbindLocalTrackEvents(n),y}const m=i.mapPubResToRemoteConfig(g,v);Gc("debug",i,"doPublish",{remoteConfigs:m,tracks:n.map(y=>{let{track:N}=y;return N.getTrackId()}),pubMsg:g,pubAns:v});const C=(yield Lf(c.next(m))).value;n.forEach(y=>{let{type:N}=y;i.statsCollector.addLocalStats(N)}),i.assignLocalTracks(n,C),i.statsUploader.startUploadUplinkStats(),n.forEach(y=>{let{track:N,type:k}=y;const U=Date.now();i.store.publish(N.getTrackId(),k===yl.LocalAudioTrack?"audio":"video",void 0,U)})})()}publishLowStream(e){var n=this;return aR(function*(){if(!n.connection)return;Gc("debug",n,"publishLowStream",e);const i=yield Lf(n.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const h=n.localTrackMap.get(yl.LocalVideoTrack);if(!h)throw new ea(_t.UNEXPECTED_ERROR,"Could not find high stream");if(n.localTrackMap.has(yl.LocalVideoLowTrack))throw new ea(_t.UNEXPECTED_ERROR,"[".concat(n.store.clientId,"] Can't publish low stream when stream already publish"));yield Lf(n.waitTillConnected());const g=[{track:n.getLowVideoTrack(h.track,e),type:yl.LocalVideoLowTrack}];if(yield*rz(dhe(n.doPublish(n.connection,g)),Lf),h.track.muted||!h.track.enabled){var c;const v=null===(c=n.localTrackMap.get(yl.LocalVideoLowTrack))||void 0===c?void 0:c.id;void 0!==v&&(yield Lf(n.connection.muteLocal([v])))}}finally{i()}})()}republish(){var e=this;return l(function*(){e.pendingLocalTracks.length>0&&(de.debug("Emit P2PChannelEvents.RequestRePublish to republish tracks."),Gc("debug",e,"republish",e.pendingLocalTracks.map(n=>n.getTrackId())),yield E_(e,Pf.RequestRePublish,e.pendingLocalTracks),e.emit(Pf.MediaReconnectEnd,e.store.uid),e.pendingLocalTracks=[])})()}reSubscribe(e){var n=this;return l(function*(){Gc("debug",n,"reSubscribe",n.pendingRemoteTracks.map(i=>{let{user:c}=i;return c.uid}));for(let i=n.pendingRemoteTracks.length-1;i>=0;i--){const{user:c,kind:h}=n.pendingRemoteTracks[i];(h!==Sh.AUDIO||c._audio_added_&&c._audioSSRC)&&(h!==Sh.VIDEO||c._video_added_&&c._videoSSRC)||n.pendingRemoteTracks.splice(i,1)}if(e)yield E_(n,Pf.RequestReSubscribe,n.pendingRemoteTracks);else for(const{user:i,kind:c}of n.pendingRemoteTracks)yield n.subscribe(i,c,c===Sh.VIDEO?i._videoSSRC:i._audioSSRC);n.pendingRemoteTracks.forEach(i=>{let{user:c}=i;n.emit(Pf.MediaReconnectEnd,c.uid)}),n.pendingRemoteTracks=[]})()}unpublish(e){var n=this;return l(function*(){if(!n.connection)return void e.forEach(h=>{const g=n.pendingLocalTracks.indexOf(h);-1!==g&&n.pendingLocalTracks.splice(g,1)});yield n.waitTillConnected();const i=n.filterTobeUnpublishedTracks(e);if(0===i.length)return;const c=i.find(h=>"videoLowTrack"===h[0]);return c&&c[1].track.close(),Gc("debug",n,"unpublish"),n.doUnpublish(n.connection,i)})()}unpublishLowStream(){var e=this;return l(function*(){if(!e.connection)return;Gc("debug",e,"unpublishLowStream");const n=e.localTrackMap.get(yl.LocalVideoLowTrack);return n?(yield e.waitTillConnected(),n.track.close(),e.doUnpublish(e.connection,[[yl.LocalVideoLowTrack,n]])):void 0})()}doUnpublish(e,n){var i=this;return l(function*(){const c=i.createGatewayUnpublishMessage(n);return yield e.stopSending(n.map(h=>{let[,{id:g}]=h;return g})),i.withdrawLocalTracks(n),i.unbindLocalTrackEvents(n.map(h=>{let[g,{track:v}]=h;return{type:g,track:v}})),n.forEach(h=>{let[g]=h;i.statsCollector.removeLocalStats(g)}),0===i.localTrackMap.size&&i.statsUploader.stopUploadUplinkStats(),c})()}subscribe(e,n,i,c,h){var g=this;return l(function*(){var v;if(!g.connection)throw new ea(_t.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if(Gc("debug",g,"subscribe",{uid:e.uid,mediaType:n,ssrcId:i}),null!==(v=g.remoteUserMap.get(e))&&void 0!==v&&v.has(n))return;let m,C;if(yield g.waitTillConnected(),h){const k=h.find(V=>{let{stream_type:K}=V;return K===n});if(!k)throw new ea(_t.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(n," for user: ").concat(e.uid," because subscribe answer from gateway does not contain stream_type: ").concat(n,"."));const U=yield g.connection.receive(n,k.ssrcs,String(e._uintid),k.attributes);m=U.track,C=U.id}else{const k=yield g.connection.receive(n,[{ssrcId:i,rtx:c}],String(e._uintid),void 0);m=k.track,C=k.id}n===Sh.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(m):(e._audioTrack=new zre(m,e.uid,e._uintid,g.store),de.info("[".concat(g.store.p2pId,"] create remote audio track: ").concat(e._audioTrack.getTrackId()))),g.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(m):(e._videoTrack=new Jre(m,e.uid,e._uintid,g.store),de.info("[".concat(g.store.p2pId,"] create remote video track: ").concat(e._videoTrack.getTrackId()))),g.bindRemoteTrackEvents(e,e._videoTrack));const y=g.remoteUserMap.get(e);y?y.set(n,C):g.remoteUserMap.set(e,new Map([[n,C]])),g.statsCollector.addRemoteStats(e.uid),g.statsUploader.startUploadDownlinkStats();const N=g.pendingRemoteTracks.findIndex(k=>{let{user:U,kind:V}=k;return U.uid===e.uid&&n===V});-1!==N&&(g.pendingRemoteTracks.splice(N,1),g.emit(Pf.MediaReconnectEnd,e.uid))})()}massSubscribe(e){var n=this;return l(function*(){return n.massSubscribeNoLock(e)})()}massSubscribeNoLock(e){var n=this;return l(function*(){if(!n.connection)throw new ea(_t.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");Gc("debug",n,"subscribeAll",e.map(c=>{let{user:h,mediaType:g,ssrcId:v}=c;return{uid:h.uid,mediaType:g,ssrcId:v}})),e=e.filter(c=>{var h;let{user:g,mediaType:v}=c;return!(null!==(h=n.remoteUserMap.get(g))&&void 0!==h&&h.has(v))}),yield n.waitTillConnected();const i=yield n.connection.batchReceive(e.map(c=>{let{user:h,mediaType:g,ssrcId:v,rtxSsrcId:m}=c;return{kind:g,ssrcMsg:[{ssrcId:v,rtx:m}],mslabel:String(h._uintid)}}));e.forEach((c,h)=>{let{user:g,mediaType:v}=c;const{track:m,id:C}=i[h];v===Sh.AUDIO?(g._audioTrack?g._audioTrack._updateOriginMediaStreamTrack(m):(g._audioTrack=new zre(m,g.uid,g._uintid,n.store),de.info("[".concat(n.store.p2pId,"] create remote audio track: ").concat(g._audioTrack.getTrackId()))),n.bindRemoteTrackEvents(g,g._audioTrack)):(g._videoTrack?g._videoTrack._updateOriginMediaStreamTrack(m):(g._videoTrack=new Jre(m,g.uid,g._uintid,n.store),de.info("[".concat(n.store.p2pId,"] create remote video track: ").concat(g._videoTrack.getTrackId()))),n.bindRemoteTrackEvents(g,g._videoTrack));const y=n.remoteUserMap.get(g);y?y.set(v,C):n.remoteUserMap.set(g,new Map([[v,C]])),n.statsCollector.addRemoteStats(g.uid),n.statsUploader.startUploadDownlinkStats();const N=n.pendingRemoteTracks.findIndex(k=>{let{user:U,kind:V}=k;return U.uid===g.uid&&v===V});-1!==N&&(n.pendingRemoteTracks.splice(N,1),n.emit(Pf.MediaReconnectEnd,g.uid))})})()}unsubscribe(e,n,i){var c=this;return l(function*(){const h=c.pendingRemoteTracks.filter(m=>{let{user:C,kind:y}=m;return void 0!==n?C.uid===e.uid&&n===y:C.uid===e.uid});if(h.forEach(m=>{const C=c.pendingRemoteTracks.indexOf(m);c.pendingRemoteTracks.splice(C,1)}),c.connection||i||h.forEach(m=>{let{kind:C}=m;var y;if(C===Sh.AUDIO)null===(y=e._audioTrack)||void 0===y||y._destroy(),e._audioTrack=void 0;else if(C===Sh.VIDEO){var N;null===(N=e._videoTrack)||void 0===N||N._destroy(),e._videoTrack=void 0}}),!c.connection)return;Gc("debug",c,"unsubscribe",{uid:e.uid,mediaType:n});const g=c.filterTobeUnSubscribedTracks(e,n);if(0===g.length)return;yield c.connection.stopReceiving(g.map(m=>{let[,{id:C}]=m;return C}));const v=c.createUnsubscribeMessage(g);return c.withdrawRemoteTracks(g),0===c.remoteUserMap.size&&c.statsUploader.stopUploadDownlinkStats(),g.forEach(m=>{let[C,{kind:y}]=m;var N,k;if(y===Sh.VIDEO&&C._videoSSRC&&(null===(N=c.connection)||void 0===N||N.setStatsRemoteVideoIsReady(C._videoSSRC,!1)),y===Sh.VIDEO)c.unbindRemoteTrackEvents(C._videoTrack),i||(null===(k=C._videoTrack)||void 0===k||k._destroy(),C._videoTrack=void 0);else if(y===Sh.AUDIO){var U;c.unbindRemoteTrackEvents(C._audioTrack),!i&&(null===(U=C._audioTrack)||void 0===U||U._destroy(),C._audioTrack=void 0)}}),v})()}massUnsubscribe(e){var n=this;return l(function*(){return n.massUnsubscribeNoLock(e)})()}massUnsubscribeNoLock(e){var n=this;return l(function*(){let i=[];for(const{user:g,mediaType:v}of e){const m=n.pendingRemoteTracks.filter(C=>{let{user:y,kind:N}=C;return void 0!==v?y.uid===g.uid&&v===N:y.uid===g.uid});m.forEach(C=>{const y=n.pendingRemoteTracks.indexOf(C);n.pendingRemoteTracks.splice(y,1)}),i=i.concat(m)}if(!n.connection)return void i.forEach(g=>{let{user:v,kind:m}=g;var C;if(m===Sh.AUDIO)null===(C=v._audioTrack)||void 0===C||C._destroy(),v._audioTrack=void 0;else if(m===Sh.VIDEO){var y;null===(y=v._videoTrack)||void 0===y||y._destroy(),v._videoTrack=void 0}});Gc("debug",n,"batchUnsubscribe",e.map(g=>{let{user:v,mediaType:m}=g;return{uid:v.uid,mediaType:m}}));const c=_A(e).call(e,(g,v)=>{let{user:m,mediaType:C}=v;const y=n.filterTobeUnSubscribedTracks(m,C);return g.concat(y)},[]);if(0===c.length)return;yield n.connection.stopReceiving(c.map(g=>{let[,{id:v}]=g;return v}));const h=n.createUnsubscribeAllMessage(c);return n.withdrawRemoteTracks(c),0===n.remoteUserMap.size&&n.statsUploader.stopUploadDownlinkStats(),c.forEach(g=>{let[v,{kind:m}]=g;var C,y;if(m===Sh.VIDEO&&v._videoSSRC&&(null===(C=n.connection)||void 0===C||C.setStatsRemoteVideoIsReady(v._videoSSRC,!1)),m===Sh.VIDEO)n.unbindRemoteTrackEvents(v._videoTrack),null===(y=v._videoTrack)||void 0===y||y._destroy(),v._videoTrack=void 0;else if(m===Sh.AUDIO){var N;n.unbindRemoteTrackEvents(v._audioTrack),null===(N=v._audioTrack)||void 0===N||N._destroy(),v._audioTrack=void 0}}),h})()}muteRemote(e,n){var i=this;return l(function*(){if(!i.connection)return;Gc("debug",i,"muteRemote",{uid:e.uid,kind:n});const c=i.remoteUserMap.get(e);if(!c)return de.warning("P2PChannel.muteRemote has no remote user ".concat(e.uid,".")),void pl("warning",i,"P2PChannel.muteRemote has no remote user ".concat(e.uid,"."));if(!c.get(n))return de.warning("P2PChannel.muteRemote has no remote user ".concat(e.uid," media type ").concat(n,".")),void pl("warning",i,"P2PChannel.muteRemote has no remote user ".concat(e.uid," media type ").concat(n,"."));const h=n===Sh.VIDEO?e._videoSSRC:e._audioSSRC;void 0!==h&&i.connection.setStatsRemoteVideoIsReady(h,!1)})()}unmuteRemote(e,n){var i=this;return l(function*(){return i.unmuteRemoteNoLock(e,n)})()}unmuteRemoteNoLock(e,n){var i=this;return l(function*(){if(!i.connection)return;Gc("debug",i,"unmuteRemote",{uid:e.uid,kind:n});const c=i.remoteUserMap.get(e);return c?c.get(n)?void 0:(de.warning("P2PChannel.unmuteRemote has no remote user ".concat(e.uid," media type ").concat(n,".")),void pl("warning",i,"unmuteRemote has no remote user ".concat(e.uid," media type ").concat(n))):(de.warning("P2PChannel.unmuteRemote has no remote user ".concat(e.uid,".")),void pl("warning",i,"unmuteRemote has no remote user ".concat(e.uid)))})()}getAllTracks(e){const n=this.localTrackMap.get(yl.LocalAudioTrack);if((null==n?void 0:n.track)instanceof aT){const i=n.track;return Array.from(this.localTrackMap.entries()).filter(c=>{let[h]=c;return h!==yl.LocalAudioTrack}).filter(c=>{let[h]=c;return!(e&&h===yl.LocalVideoLowTrack)}).map(c=>{let[,{track:h}]=c;return h}).concat(i.trackList)}return Array.from(this.localTrackMap.entries()).filter(i=>{let[c]=i;return!(e&&c===yl.LocalVideoLowTrack)}).map(i=>{let[,{track:c}]=i;return c})}reportPublishEvent(e,n,i,c,h){if(e){const v=this.localTrackMap.get(yl.LocalAudioTrack),m=this.localTrackMap.get(c?yl.LocalVideoLowTrack:yl.LocalVideoTrack);qc.publish(this.store.sessionId,{eventElapse:cT.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:n,audioName:null==v?void 0:v.track.getTrackLabel(),videoName:null==m?void 0:m.track.getTrackLabel(),screenshare:-1!==(null==m?void 0:m.track._hints.indexOf(vy.SCREEN_TRACK)),audio:!!v,video:!!m,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:h})}else{var g;i||(i=[]);const v=i.find(C=>C instanceof m_),m=c?null===(g=this.localTrackMap.get(yl.LocalVideoTrack))||void 0===g?void 0:g.track:i.find(C=>C instanceof ty);qc.publish(this.store.sessionId,{eventElapse:cT.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:n,audioName:null==v?void 0:v.getTrackLabel(),videoName:null==m?void 0:m.getTrackLabel(),screenshare:-1!==(null==m?void 0:m._hints.indexOf(vy.SCREEN_TRACK)),audio:!!v,video:!!m,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:h})}}reportSubscribeEvent(e,n,i,c){const h=c===Sh.VIDEO?i._videoSSRC:i._audioSSRC;h&&qc.subscribe(this.store.sessionId,{succ:e,ec:n,video:c===Sh.VIDEO,audio:c===Sh.AUDIO,peerid:i.uid,subscribeRequestid:c===Sh.VIDEO?i._videoSSRC:i._audioSSRC,p2pid:this.store.p2pId,eventElapse:cT.measureFromSubscribeStart(this.store.clientId,h)})}reset(){de.debug("P2PChannel.reset"),this.mutex=new _I("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.state=z_.Disconnected}getStats(){var e;return null===(e=this.connection)||void 0===e?void 0:e.getStats()}getRemoteVideoIsReady(e){var n;return(null===(n=this.connection)||void 0===n?void 0:n.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){const e=this.localTrackMap.get(yl.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){const e=this.localTrackMap.get(yl.LocalVideoTrack);if(e)return{width:e.track._videoWidth||0,height:e.track._videoHeight||0}}getEncoderConfig(e){const n=this.localTrackMap.get(e);return n&&n.track instanceof ty||n&&n.track instanceof m_?n.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,n){if(!e)return this.remoteUserMap.size>0;const i=this.remoteUserMap.get(e);return!!i&&(!n||i.has(n))}hasRemoteMediaWithLock(e,n){var i=this;return l(function*(){if(!e)return i.remoteUserMap.size>0;const c=i.remoteUserMap.get(e);return!!c&&(!n||c.has(n))})()}getRemoteMedia(e){var n;const i=Array.from(J4(n=this.remoteUserMap).call(n)).find(c=>c.uid===e);return i?{audioTrack:i.audioTrack,audioSSRC:i._audioSSRC,videoTrack:i.videoTrack,videoSSRC:i._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map(i=>{let[c]=i;return{uid:c.uid,level:c.audioTrack?100*c.audioTrack._source.getAccurateVolumeLevel():0}});const n=this.localTrackMap.get(yl.LocalAudioTrack);return n&&e.push({level:100*n.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=Eg(e).call(e,(i,c)=>i.level-c.level),e}disconnectForReconnect(){var e=this;return l(function*(){e.connection&&(Gc("debug",e,"disconnectForReconnect"),de.debug("P2PChannel.disconnectForReconnect closing P2PConnection"),e.state=z_.Reconnecting,e.connection.close(),e.unbindConnectionEvents(e.connection),e.connection=void 0,0!==e.localTrackMap.size&&(Array.from(e.localTrackMap.entries()).forEach(n=>{let[i,{track:c}]=n;switch(i){case yl.LocalVideoTrack:c._hints.includes(vy.LOW_STREAM)?c.close():e.pendingLocalTracks.push(c);break;case yl.LocalAudioTrack:c instanceof aT?e.pendingLocalTracks=e.pendingLocalTracks.concat(c.trackList):e.pendingLocalTracks.push(c)}}),e.emit(Pf.MediaReconnectStart,e.store.uid)),e.unbindLocalTrackEvents(),e.localTrackMap.clear(),0!==e.remoteUserMap.size&&Array.from(e.remoteUserMap.entries()).forEach(n=>{let[i,c]=n;Array.from(J4(c).call(c)).forEach(h=>{e.setPendingRemoteMedia(i,h)}),e.emit(Pf.MediaReconnectStart,i.uid)}),e.unbindAllRemoteTrackEvents(),e.remoteUserMap.clear(),e.statsUploader.stopUploadUplinkStats(),e.statsUploader.stopUploadDownlinkStats(),e.statsUploader.stopUploadTransportStats(),de.debug("P2PChannel disconnected, waiting to reconnect."))})()}hasPendingRemoteMedia(e,n){for(const i of this.pendingRemoteTracks){const{user:c,kind:h}=i;if((e instanceof kde?e.uid:e)===c.uid&&n===h)return!0}return!1}setPendingRemoteMedia(e,n){this.hasPendingRemoteMedia(e,n)||this.pendingRemoteTracks.push({user:e,kind:n})}restartICE(){var e=this;return aR(function*(){if(!e.connection)throw new Error;const n=yield Lf(e.mutex.lock("From P2PChannel.restartICE"));try{yield*rz(dhe(e.connection.restartICE()),Lf)}finally{n()}})()}getUplinkNetworkQuality(){if(!this.connection)return 0;const e=this.connection.getStats(),n=this.localTrackMap.get(yl.LocalVideoTrack),i=this.localTrackMap.get(yl.LocalAudioTrack),c=e.videoSend.find(V=>V.ssrc===(null==n?void 0:n.ssrcs[0].ssrcId)),h=e.audioSend.find(V=>V.ssrc===(null==i?void 0:i.ssrcs[0].ssrcId));if(!c||!h)return 1;const g=N2(this,Pf.NeedSignalRTT),v=c?c.rttMs:void 0,m=h?h.rttMs:void 0,C=v&&m?(v+m)/2:v||m,N=100*e.sendPacketLossRate*.7/50+.3*((C&&g?(C+g)/2:C||g)||0)/1500,k=N<.17?1:N<.36?2:N<.59?3:N<.1?4:5,U=null==n?void 0:n.track;if(U&&U._encoderConfig&&-1===U._hints.indexOf(vy.SCREEN_TRACK)){const V=U._encoderConfig.bitrateMax,K=e.bitrate.actualEncoded;if(V&&K){const $=(1e3*V-K)/(1e3*V);return gne[$<.15?0:$<.3?1:$<.45?2:$<.6?3:4][k]}}return k}getDownlinkNetworkQuality(){if(!this.connection)return 0;const e=this.connection.getStats();let n=0;return Array.from(this.remoteUserMap.entries()).forEach(i=>{let[c]=i;const h=c._audioSSRC,g=c._videoSSRC,v=e.audioRecv.find(K=>K.ssrc===h),m=e.videoRecv.find(K=>K.ssrc===g);if(!v&&!m)return void(n+=1);const C=N2(this,Pf.NeedSignalRTT),y=e.rtt,N=(y&&C?(y+C)/2:y||C)||0,k=v?v.jitterMs:void 0,U=e.recvPacketLossRate;let V=.7*U*100/50+.3*N/1500;k&&(V=.6*U*100/50+.2*N/1500+.2*k/400),n+=V<.1?1:V<.17?2:V<.36?3:V<.59?4:5}),this.remoteUserMap.size>0?Math.round(n/this.remoteUserMap.size):n}muteLocalTrack(e){var n=this;return l(function*(){return new _l((i,c)=>{n.handleMuteLocalTrack(e,i,c)})})()}filterTobePublishedTracks(e,n,i){const c=[],h=dy(),g=this.getAllTracks();e=Yge(e=e.filter(C=>-1===g.indexOf(C)));let v=!1,m=!1;for(const C of e){if(C instanceof ty&&(this.localTrackMap.has(yl.LocalVideoTrack)||v?new ea(_t.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(c.push({track:C,type:yl.LocalVideoTrack}),v=!0),n)){const y=this.getLowVideoTrack(C,i);c.push({track:y,type:yl.LocalVideoLowTrack})}if(C instanceof m_){const y=this.localTrackMap.get(yl.LocalAudioTrack);if(y){if(!(y.track instanceof aT))throw new ea(_t.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(C._bypassWebAudio)throw new ea(_t.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");y.track.addAudioTrack(C),this.bindLocalAudioTrackEvents(C,!0)}else if(m){const N=c.find(k=>{let{type:U}=k;return U===yl.LocalAudioTrack});if(!(N.track instanceof aT))throw new ea(_t.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(C._bypassWebAudio)throw new ea(_t.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");N.track.addAudioTrack(C)}else{if(!h.webAudioMediaStreamDest||C instanceof aT||C._bypassWebAudio)c.push({track:C,type:yl.LocalAudioTrack});else{const N=new aT;N.addAudioTrack(C),c.push({track:N,type:yl.LocalAudioTrack})}m=!0}}}return c}filterTobeUnpublishedTracks(e){const n=[],i=this.getAllTracks();e=Yge(e=e.filter(c=>-1!==i.indexOf(c)));for(const c of e){if(c instanceof m_){const h=this.localTrackMap.get(yl.LocalAudioTrack);if(!h)continue;h.track instanceof aT?(h.track.removeAudioTrack(c),this.unbindLocalAudioTrackEvents(c),0===h.track.trackList.length&&(n.push([yl.LocalAudioTrack,h]),h.track.close())):n.push([yl.LocalAudioTrack,h])}if(c instanceof ty){const h=this.localTrackMap.get(yl.LocalVideoTrack);if(!h)continue;n.push([yl.LocalVideoTrack,h]);const g=this.localTrackMap.get(yl.LocalVideoLowTrack);g&&n.push([yl.LocalVideoLowTrack,g])}}return n}bindLocalTrackEvents(e){e.forEach(n=>{let{track:i,type:c}=n;switch(c){case yl.LocalVideoTrack:i.addListener(md.GET_STATS,this.handleGetLocalVideoStats),i.addListener(md.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.addListener(md.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.addListener(md.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),i.addListener(md.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),i.addListener(md.NEED_REPLACE_TRACK,this.handleReplaceTrack),i.addListener(md.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.addListener(md.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case yl.LocalAudioTrack:this.bindLocalAudioTrackEvents(i)}})}bindLocalAudioTrackEvents(e,n){e instanceof aT?e.trackList.forEach(i=>{i.addListener(md.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.addListener(md.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.addListener(md.GET_STATS,this.handleGetLocalAudioStats),i.addListener(md.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.addListener(md.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.addListener(md.GET_STATS,this.handleGetLocalAudioStats),e.addListener(md.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(md.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(md.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(md.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),n||e.addListener(md.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map(n=>{let[i,{track:c}]=n;return{track:c,type:i}})),e.forEach(n=>{let{track:i,type:c}=n;switch(c){case yl.LocalVideoTrack:i.off(md.GET_STATS,this.handleGetLocalVideoStats),i.off(md.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.off(md.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.off(md.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),i.off(md.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),i.off(md.NEED_REPLACE_TRACK,this.handleReplaceTrack),i.off(md.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.off(md.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case yl.LocalAudioTrack:this.unbindLocalAudioTrackEvents(i)}})}unbindLocalAudioTrackEvents(e){e instanceof aT?e.trackList.forEach(n=>{n.off(md.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.off(md.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.off(md.GET_STATS,this.handleGetLocalAudioStats),n.off(md.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.off(md.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.off(md.GET_STATS,this.handleGetLocalAudioStats),e.off(md.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(md.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(md.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(md.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(md.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,n){n instanceof Jre&&n.addListener(md.GET_STATS,i=>{i(this.handleGetRemoteVideoStats(e))}),n instanceof zre&&n.addListener(md.GET_STATS,i=>{i(this.handleGetRemoteAudioStats(e))})}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(md.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(e=>{let[n,i]=e;i.has(Sh.AUDIO)&&this.unbindRemoteTrackEvents(n._audioTrack),i.has(Sh.VIDEO)&&this.unbindRemoteTrackEvents(n._videoTrack)})}createGatewayPublishMessage(e,n){return e.map((i,c)=>{let h,g,{track:v,type:m}=i;switch(m){case yl.LocalAudioTrack:h=a0.Audio,g={dtx:v instanceof Are&&v._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case yl.LocalVideoTrack:h=v._hints.includes(vy.SCREEN_TRACK)?a0.Screen:a0.High,g=h3(h3({},Gge(v)),{},{codec:this.store.codec});break;case yl.LocalVideoLowTrack:h=a0.Low,g=h3(h3({},Gge(v)),{},{codec:this.store.codec})}return{stream_type:h,attributes:g,ssrcs:n[c]}})}createGatewayUnpublishMessage(e){return e.map(n=>{let i,[c,{track:h,ssrcs:g,id:v}]=n;switch(c){case yl.LocalVideoTrack:i=h._hints.includes(vy.SCREEN_TRACK)?a0.Screen:a0.High;break;case yl.LocalAudioTrack:i=a0.Audio;break;case yl.LocalVideoLowTrack:i=a0.Low}return{stream_type:i,ssrcs:g,mid:v}})}assignLocalTracks(e,n){e.forEach((i,c)=>{let{track:h,type:g}=i;this.localTrackMap.set(g,{track:h,id:n[c].id,ssrcs:n[c].localSSRC})})}withdrawLocalTracks(e){e.forEach(n=>{let[i]=n;this.localTrackMap.delete(i)})}waitTillConnected(){var e=this;return l(function*(){return new _l((n,i)=>{switch(e.state){case z_.New:case z_.Reconnecting:{const c=(h,g)=>g===z_.Disconnected?(e.off(Pf.StateChange,c),void i(new ea(_t.UNEXPECTED_ERROR,"PeerConnection already disconnected."))):g===z_.Connected?(e.off(Pf.StateChange,c),void n(void 0)):void 0;e.on(Pf.StateChange,c);break}case z_.Connected:n(void 0);break;case z_.Disconnected:i(new ea(_t.UNEXPECTED_ERROR,"PeerConnection already disconnected."))}})})()}bindConnectionEvents(e){var n=this;e.onConnectionStateChange=function(){var i=l(function*(c){if(de.info("[p2pId: ".concat(n.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(c,")")),p0("info",n,"connectionStateChange",c),n.emit(Pf.PeerConnectionStateChange,c),"connected"!==c||n.store.keyMetrics.peerConnectionEnd||n.store.peerConnectionEnd(),"disconnected"===c&&"disconnected"===e.iceConnectionState)return setTimeout(()=>{"disconnected"===e.iceConnectionState&&ya("ICE_RESTART")&&"CONNECTED"===N2(n,Pf.QueryClientConnectionState)&&n.emit(Pf.RequestRestartICE)},800),void setTimeout(()=>{"disconnected"===e.peerConnectionState&&(de.debug("P2PConnection disconnected timeout 4000ms, force reconnect"),setTimeout(()=>n.emit(Pf.P2PLost),0),n.iceFailedCount+=1,n.requestReconnect())},4e3);"failed"===c&&(de.debug("P2PConnection state failed, force reconnect"),setTimeout(()=>n.emit(Pf.P2PLost),0),n.iceFailedCount+=1,yield n.requestReconnect())});return function(c){return i.apply(this,arguments)}}(),e.onICEConnectionStateChange=i=>{"connected"!==i||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),de.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(i,")")),p0("info",this,"iceConnectionStateChange",i),qc.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:i,tag:Gl.TRACER}).onSuccess(),this.emit(Pf.IceConnectionStateChange,i)},e.onICETransportStateChange=i=>{de.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(i,")")),p0("info",this,"ICETransportStateChange",i)},e.onDTLSTransportStateChange=i=>{de.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(i,")")),p0("info",this,"DTLSTransportStateChange",i)},e.onDTLSTransportError=i=>{de.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(i,")")),p0("info",this,"DTLSTransportError",i)},e.onFirstAudioDecoded=i=>{var c;const h=Array.from(J4(c=this.remoteUserMap).call(c)).find(v=>v._audioSSRC===i);var g;h&&(this.store.subscribe(h.uid,"audio",void 0,void 0,void 0,Date.now()),null===(g=h.audioTrack)||void 0===g||g.emit(eR.FIRST_FRAME_DECODED),qc.firstRemoteFrame(this.store.sessionId,Ky.FIRST_AUDIO_DECODE,s0.FIRST_AUDIO_DECODE,{peer:h._uintid,subscribeElapse:cT.measureFromSubscribeStart(this.store.clientId,i),subscribeRequestid:i,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=i=>{var c;const h=Array.from(J4(c=this.remoteUserMap).call(c)).find(g=>g._audioSSRC===i);h&&qc.firstRemoteFrame(this.store.sessionId,Ky.FIRST_AUDIO_RECEIVED,s0.FIRST_AUDIO_RECEIVED,{peer:h._uintid,subscribeElapse:cT.measureFromSubscribeStart(this.store.clientId,i),subscribeRequestid:i,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(i,c,h)=>{this.reportVideoFirstFrameDecoded(i,c,h)},e.onFirstVideoReceived=i=>{var c;const h=Array.from(J4(c=this.remoteUserMap).call(c)).find(g=>g._videoSSRC===i);h&&qc.firstRemoteFrame(this.store.sessionId,Ky.FIRST_VIDEO_RECEIVED,s0.FIRST_VIDEO_RECEIVED,{peer:h._uintid,subscribeElapse:cT.measureFromSubscribeStart(this.store.clientId,i),subscribeRequestid:i,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(i,c)=>{const h="relay"===i.candidateType;"unknown"!==c.candidateType&&h===("relay"===c.candidateType)||this.emit(Pf.ConnectionTypeChange,h),de.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(s3(c))," -> ").concat(JSON.stringify(s3(i)),")")),p0("info",this,"SelectedLocalCandidateChanged","".concat(JSON.stringify(s3(c))," -> ").concat(JSON.stringify(s3(i))))},e.onSelectedRemoteCandidateChanged=(i,c)=>{de.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(s3(c))," -> ").concat(JSON.stringify(s3(i)),")")),p0("info",this,"SelectedRemoteCandidateChanged","".concat(JSON.stringify(s3(c))," -> ").concat(JSON.stringify(s3(i))))},e.onFirstVideoDecodedTimeout=i=>{this.reportVideoFirstFrameDecoded(i,void 0,void 0,!0)}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0}filterTobeMutedTracks(e){const n=[];if(-1===this.getAllTracks().indexOf(e))return n;const i=this.localTrackMap.get(yl.LocalAudioTrack);if(e instanceof m_&&(null==i?void 0:i.track)instanceof aT)return i.track.isActive||n.push([yl.LocalAudioTrack,i]),n;const c=Array.from(this.localTrackMap.entries()).find(h=>{let[,{track:g}]=h;return e===g});if(c&&(n.push(c),c[0]===yl.LocalVideoTrack)){const h=this.localTrackMap.get(yl.LocalVideoLowTrack);h&&n.push([yl.LocalVideoLowTrack,h])}return n}filterTobeUnmutedTracks(e){const n=[],i=this.localTrackMap.get(yl.LocalAudioTrack);if(e instanceof m_&&(null==i?void 0:i.track)instanceof aT)return i.track.isActive&&n.push([yl.LocalAudioTrack,i]),n;const c=Array.from(this.localTrackMap.entries()).find(h=>{let[,{track:g}]=h;return e===g});if(c)if(c[0]===yl.LocalVideoTrack){n.push(c);const h=this.localTrackMap.get(yl.LocalVideoLowTrack);h&&n.push([yl.LocalVideoLowTrack,h])}else n.push(c);return n}createMuteMessage(e){return e.map(n=>{let i,[c,{track:h,ssrcs:g,id:v}]=n;switch(c){case yl.LocalAudioTrack:i=a0.Audio;break;case yl.LocalVideoTrack:i=h._hints.includes(vy.SCREEN_TRACK)?a0.Screen:a0.High;break;case yl.LocalVideoLowTrack:i=a0.Low}return{stream_type:i,ssrcs:g,mid:v}})}createUnmuteMessage(e){return e.map(n=>{let i,[c,{track:h,ssrcs:g,id:v}]=n;switch(c){case yl.LocalAudioTrack:i=a0.Audio;break;case yl.LocalVideoTrack:i=h._hints.includes(vy.SCREEN_TRACK)?a0.Screen:a0.High;break;case yl.LocalVideoLowTrack:i=a0.Low}return{stream_type:i,ssrcs:g,mid:v}})}filterTobeUnSubscribedTracks(e,n){const i=[],c=this.remoteUserMap.get(e);if(!c)return i;if(n){const h=c.get(n);if(!h)return i;i.push([e,{kind:n,id:h}])}else Array.from(c.entries()).forEach(h=>{let[g,v]=h;i.push([e,{kind:g,id:v}])});return i}createUnsubscribeMessage(e){const n=[];return e.forEach(i=>{let[c,{kind:h}]=i;switch(h){case Sh.VIDEO:return void(c._videoSSRC&&n.push({stream_type:Sh.VIDEO,ssrcId:c._videoSSRC}));case Sh.AUDIO:return void(c._audioSSRC&&n.push({stream_type:Sh.AUDIO,ssrcId:c._audioSSRC}))}}),n}createUnsubscribeAllMessage(e){const n=new Map;return e.forEach(i=>{let[c,{kind:h}]=i;if(n.has(c)){let g=n.get(c);g|=h===Sh.VIDEO?c0.Video:c0.Audio,n.set(c,g)}else n.set(c,h===Sh.VIDEO?c0.Video:c0.Audio)}),{users:Array.from(n.entries()).map(i=>{let[c,h]=i;return{stream_id:c.uid,stream_type:h}})}}withdrawRemoteTracks(e){e.forEach(n=>{let[i,{kind:c}]=n;const h=this.remoteUserMap.get(i);h&&(h.delete(c),0===Array.from(h.entries()).length&&this.remoteUserMap.delete(i))})}updateBitrateLimit(e){var n=this;return l(function*(){const i=n.localTrackMap.get(yl.LocalVideoTrack),c=n.localTrackMap.get(yl.LocalVideoLowTrack);i&&(yield i.track.setBitrateLimit(e.uplink)),c&&e.low_stream_uplink&&(yield c.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0}))})()}isP2PDisconnected(){return!this.connection||"connected"!==this.connection.peerConnectionState}mapPubResToRemoteConfig(e,n){return e.map((i,c)=>{var h;let{stream_type:g}=i;return null===(h=n.find(v=>{let{stream_type:m}=v;return g===m}))||void 0===h?void 0:h.attributes})}tryToUnmuteAudio(e){var n=this;return l(function*(){for(let c=0;c<e.length;c++)if(e[c]instanceof m_){var i;const h=n.filterTobeUnmutedTracks(e[c]);if(0===h.length)continue;yield null===(i=n.connection)||void 0===i?void 0:i.unmuteLocal(h.map(v=>{let[,{id:m}]=v;return m}));const g=n.createUnmuteMessage(h);return void(yield Q0(n,Pf.RequestUnmuteLocal,g))}})()}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var n;return!(null===(n=this.connection)||void 0===n||!n.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,n)=>this.emit(Pf.RequestUploadStats,e,n),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}requestReconnect(){var e=this;return l(function*(){e.dtlsFailedCount+=1,yield s_(KW(e.dtlsFailedCount,W0)),e.emit(Pf.RequestReconnect)})()}reconnectP2P(){var e=this;return l(function*(){const n=Array.from(e.localTrackMap.entries()),i=e.createGatewayUnpublishMessage(n);Array.from(e.remoteUserMap.entries()),i.length>0&&(yield E_(e,Pf.RequestUnpublishForReconnectPC,i)),e.disconnectForReconnect(),e.emit(Pf.RequestReconnectPC)})()}canPublishLowStream(){return this.localTrackMap.has(yl.LocalVideoTrack)||this.pendingLocalTracks.some(e=>e instanceof ty)}throwIfTrackTypeNotMatch(e){if(e.filter(n=>n instanceof ty).length>1)throw new ea(_t.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter(n=>n instanceof m_).length>1&&(e.some(n=>n instanceof m_&&n._bypassWebAudio)||!dy().webAudioMediaStreamDest))throw new ea(_t.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const n of e){if(n instanceof ty&&this.pendingLocalTracks.some(i=>i instanceof ty))throw new ea(_t.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(n instanceof m_&&this.pendingLocalTracks.some(i=>i instanceof m_)&&(!dy().webAudioMediaStreamDest||n._bypassWebAudio||this.pendingLocalTracks.some(i=>i instanceof m_&&i._bypassWebAudio)))throw new ea(_t.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,n){const i=dy().supportDualStreamEncoding,c=h3(h3({},{width:160,height:120,framerate:15,bitrate:50}),n);let h;h=i?e._mediaStreamTrack.clone():pve(e,c);const g=new ty(h,h3(h3({},i&&{scaleResolutionDownBy:Y_e(c,e)}),{},{frameRate:c.framerate,bitrateMax:c.bitrate,bitrateMin:c.bitrate}));return g._hints.push(vy.LOW_STREAM),e.addListener(md.NEED_CLOSE,()=>{g.close()}),g}globalLock(){var e=this;return l(function*(){return e.mutex.lock("From P2PChannel.globalLock")})()}reportVideoFirstFrameDecoded(e,n,i,c){var h;const g=Array.from(J4(h=this.remoteUserMap).call(h)).find(v=>v._videoSSRC===e);if(g){c||this.store.subscribe(g.uid,"video",void 0,void 0,void 0,void 0,Date.now());const v=this.store.keyMetrics,m=v.subscribe.find(C=>C.userId===g.uid&&"video"===C.type);qc.firstRemoteVideoDecode(this.store.sessionId,Ky.FIRST_VIDEO_DECODE,s0.FIRST_VIDEO_DECODE,{peer:g._uintid,videowidth:n,videoheight:i,subscribeElapse:cT.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:v.requestAPEnd||0,apStart:v.requestAPStart||0,joinGwEnd:v.joinGatewayEnd||0,joinGwStart:v.joinGatewayStart||0,pcEnd:v.peerConnectionEnd||0,pcStart:v.peerConnectionStart||0,subscriberEnd:(null==m?void 0:m.subscribeEnd)||0,subscriberStart:(null==m?void 0:m.subscribeStart)||0,videoAddNotify:(null==m?void 0:m.streamAdded)||0,state:c?1:0})}}remoteMediaSsrcChanged(e,n,i){var c=this;return l(function*(){if(!c.connection)return!1;const h=c.remoteUserMap.get(e);if(!h)return!1;const g=h.get(n);if(!g)return!1;const v=yield c.connection.getRemoteSSRC(g);return void 0!==v&&v!==i})()}}).prototype,"startP2PConnection",[tS],Object.getOwnPropertyDescriptor(Cp.prototype,"startP2PConnection"),Cp.prototype),Cl(Cp.prototype,"connect",[tS],Object.getOwnPropertyDescriptor(Cp.prototype,"connect"),Cp.prototype),Cl(Cp.prototype,"preConnect",[tS],Object.getOwnPropertyDescriptor(Cp.prototype,"preConnect"),Cp.prototype),Cl(Cp.prototype,"unpublish",[tS],Object.getOwnPropertyDescriptor(Cp.prototype,"unpublish"),Cp.prototype),Cl(Cp.prototype,"unpublishLowStream",[tS],Object.getOwnPropertyDescriptor(Cp.prototype,"unpublishLowStream"),Cp.prototype),Cl(Cp.prototype,"subscribe",[tS],Object.getOwnPropertyDescriptor(Cp.prototype,"subscribe"),Cp.prototype),Cl(Cp.prototype,"massSubscribe",[tS],Object.getOwnPropertyDescriptor(Cp.prototype,"massSubscribe"),Cp.prototype),Cl(Cp.prototype,"unsubscribe",[tS],Object.getOwnPropertyDescriptor(Cp.prototype,"unsubscribe"),Cp.prototype),Cl(Cp.prototype,"massUnsubscribe",[tS],Object.getOwnPropertyDescriptor(Cp.prototype,"massUnsubscribe"),Cp.prototype),Cl(Cp.prototype,"muteRemote",[tS],Object.getOwnPropertyDescriptor(Cp.prototype,"muteRemote"),Cp.prototype),Cl(Cp.prototype,"unmuteRemote",[tS],Object.getOwnPropertyDescriptor(Cp.prototype,"unmuteRemote"),Cp.prototype),Cl(Cp.prototype,"hasRemoteMediaWithLock",[tS],Object.getOwnPropertyDescriptor(Cp.prototype,"hasRemoteMediaWithLock"),Cp.prototype),Cl(Cp.prototype,"disconnectForReconnect",[tS],Object.getOwnPropertyDescriptor(Cp.prototype,"disconnectForReconnect"),Cp.prototype),Cl(Cp.prototype,"updateBitrateLimit",[tS],Object.getOwnPropertyDescriptor(Cp.prototype,"updateBitrateLimit"),Cp.prototype),Cl(Cp.prototype,"remoteMediaSsrcChanged",[tS],Object.getOwnPropertyDescriptor(Cp.prototype,"remoteMediaSsrcChanged"),Cp.prototype),wve=Cp))||wve;function tS(e,n,i){const c=e[n];if("function"!=typeof c)throw new Error("Cannot use mutex on object property.");return i.value=l(function*(){const h=this.mutex,g=yield h.lock("From P2PChannel.".concat(n));try{for(var v=arguments.length,m=new Array(v),C=0;C<v;C++)m[C]=arguments[C];return yield c.apply(this,m)}finally{g()}}),i}function dR(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Ep,Ove="function"==typeof Symbol&&Symbol.observable||"@@observable",fhe=function(){return Math.random().toString(36).substring(7).split("").join(".")},Dve={INIT:"@@redux/INIT"+fhe(),REPLACE:"@@redux/REPLACE"+fhe(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+fhe()}};function OCe(e){if("object"!=typeof e||null===e)return!1;for(var n=e;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}function Nve(e,n,i){var c;if("function"==typeof n&&"function"==typeof i||"function"==typeof i&&"function"==typeof arguments[3])throw new Error(dR(0));if("function"==typeof n&&void 0===i&&(i=n,n=void 0),void 0!==i){if("function"!=typeof i)throw new Error(dR(1));return i(Nve)(e,n)}if("function"!=typeof e)throw new Error(dR(2));var h=e,g=n,v=[],m=v,C=!1;function y(){m===v&&(m=v.slice())}function N(){if(C)throw new Error(dR(3));return g}function k($){if("function"!=typeof $)throw new Error(dR(4));if(C)throw new Error(dR(5));var Z=!0;return y(),m.push($),function(){if(Z){if(C)throw new Error(dR(6));Z=!1,y();var ye=m.indexOf($);m.splice(ye,1),v=null}}}function U($){if(!OCe($))throw new Error(dR(7));if(void 0===$.type)throw new Error(dR(8));if(C)throw new Error(dR(9));try{C=!0,g=h(g,$)}finally{C=!1}for(var Z=v=m,ye=0;ye<Z.length;ye++)(0,Z[ye])();return $}function V($){if("function"!=typeof $)throw new Error(dR(10));h=$,U({type:Dve.REPLACE})}function K(){var $,Z=k;return($={subscribe:function(ye){if("object"!=typeof ye||null===ye)throw new Error(dR(11));function be(){ye.next&&ye.next(N())}return be(),{unsubscribe:Z(be)}}})[Ove]=function(){return this},$}return U({type:Dve.INIT}),(c={dispatch:U,subscribe:k,getState:N,replaceReducer:V})[Ove]=K,c}function kve(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);n&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),i.push.apply(i,c)}return i}function Ul(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?kve(Object(i),!0).forEach(function(c){Y(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):kve(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}!function(e){e.SET_SESSION_ID="SET_SESSION_ID",e.SET_P2P_ID="SET_P2P_id",e.SET_DC_ID="SET_DC_id",e.SET_UID="SET_UID",e.SET_PUB_ID="SET_PUB_ID",e.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",e.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",e.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",e.AVOID_JOIN_START="AVOID_JOIN_START",e.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",e.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",e.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",e.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",e.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",e.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",e.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",e.KEY_METRIC_ICE_CONNECTION_END="KEY_METRIC_ICE_CONNECTION_END",e.KEY_METRIC_SIGNAL_CHANNEL_OPEN="KEY_METRIC_SIGNAL_CHANNEL_OPEN",e.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",e.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",e.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",e.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",e.RESET_KEY_METRICS="RESET_KEY_METRICS"}(Ep||(Ep={}));class DCe{constructor(n,i,c,h){Y(this,"store",void 0),Y(this,"reducer",void 0);const g={codec:n,audioCodec:i,mode:c,clientId:h,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled"};this.reducer=function(){let v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,m=arguments.length>1?arguments[1]:void 0;switch(m.type){case Ep.SET_SESSION_ID:return Ul(Ul({},v),{},{sessionId:m.sessionId});case Ep.SET_P2P_ID:return Ul(Ul({},v),{},{p2pId:m.p2pId});case Ep.SET_UID:return Ul(Ul({},v),{},{uid:m.uid});case Ep.SET_PUB_ID:return Ul(Ul({},v),{},{pubId:m.pubId});case Ep.KEY_METRIC_CLIENT_CREATED:return Ul(Ul({},v),{},{keyMetrics:Ul(Ul({},v.keyMetrics),{},{clientCreated:m.metric})});case Ep.KEY_METRIC_JOIN_START:return Ul(Ul({},v),{},{keyMetrics:Ul(Ul({},v.keyMetrics),{},{joinStart:m.metric})});case Ep.AVOID_JOIN_START:return Ul(Ul({},v),{},{avoidJoinStart:m.avoidJoinStart});case Ep.KEY_METRIC_JOIN_END:return Ul(Ul({},v),{},{keyMetrics:Ul(Ul({},v.keyMetrics),{},{joinEnd:m.metric})});case Ep.KEY_METRIC_REQUEST_AP_START:return Ul(Ul({},v),{},{keyMetrics:Ul(Ul({},v.keyMetrics),{},{requestAPStart:m.metric})});case Ep.KEY_METRIC_REQUEST_AP_END:return Ul(Ul({},v),{},{keyMetrics:Ul(Ul({},v.keyMetrics),{},{requestAPEnd:m.metric})});case Ep.KEY_METRIC_JOIN_GATEWAY_START:return Ul(Ul({},v),{},{keyMetrics:Ul(Ul({},v.keyMetrics),{},{joinGatewayStart:m.metric})});case Ep.KEY_METRIC_JOIN_GATEWAY_END:return Ul(Ul({},v),{},{keyMetrics:Ul(Ul({},v.keyMetrics),{},{joinGatewayEnd:m.metric})});case Ep.KEY_METRIC_PEER_CONNECTION_START:return Ul(Ul({},v),{},{keyMetrics:Ul(Ul({},v.keyMetrics),{},{peerConnectionStart:m.metric})});case Ep.KEY_METRIC_PEER_CONNECTION_END:return Ul(Ul({},v),{},{keyMetrics:Ul(Ul({},v.keyMetrics),{},{peerConnectionEnd:m.metric})});case Ep.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return Ul(Ul({},v),{},{keyMetrics:Ul(Ul({},v.keyMetrics),{},{signalChannelOpen:m.metric})});case Ep.KEY_METRIC_ICE_CONNECTION_END:return Ul(Ul({},v),{},{keyMetrics:Ul(Ul({},v.keyMetrics),{},{iceConnectionEnd:m.metric})});case Ep.KEY_METRIC_PUBLISH:{const C=v.keyMetrics.publish,y=C.findIndex(N=>N.trackId===m.metric.trackId);return-1!==y?(C[y]=Ul(Ul({},C[y]),m.metric),Ul(Ul({},v),{},{keyMetrics:Ul(Ul({},v.keyMetrics),{},{publish:[...C]})})):Ul(Ul({},v),{},{keyMetrics:Ul(Ul({},v.keyMetrics),{},{publish:[...v.keyMetrics.publish,m.metric]})})}case Ep.KEY_METRIC_SUBSCRIBE:{const C=v.keyMetrics.subscribe,y=C.findIndex(N=>N.userId===m.metric.userId&&N.type===m.metric.type);return-1!==y?(C[y]=Ul(Ul({},C[y]),m.metric),Ul(Ul({},v),{},{keyMetrics:Ul(Ul({},v.keyMetrics),{},{subscribe:[...C]})})):Ul(Ul({},v),{},{keyMetrics:Ul(Ul({},v.keyMetrics),{},{subscribe:[...v.keyMetrics.subscribe,m.metric]})})}case Ep.SET_CLOUD_PROXY_SERVER_MODE:return v.cloudProxyServerMode=m.mode,v;case Ep.RECORD_JOIN_CHANNEL_SERVICE:return"number"!=typeof m.index?v.joinChannelServiceRecords=[...v.joinChannelServiceRecords,m.record]:(v.joinChannelServiceRecords[m.index]=Ul(Ul({},v.joinChannelServiceRecords[m.index]),m.record),v.joinChannelServiceRecords=[...v.joinChannelServiceRecords]),v;case Ep.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return v.joinChannelServiceRecords=[],v;case Ep.RESET_KEY_METRICS:return v.keyMetrics={publish:[],subscribe:[]},v;default:return v}},this.store=Nve(this.reducer)}set sessionId(n){this.store.dispatch({type:Ep.SET_SESSION_ID,sessionId:n})}get sessionId(){return this.store.getState().sessionId}get codec(){return this.store.getState().codec}get audioCodec(){return this.store.getState().audioCodec}get clientId(){return this.store.getState().clientId}set p2pId(n){this.store.dispatch({type:Ep.SET_P2P_ID,p2pId:n})}get p2pId(){return this.store.getState().p2pId}set dcId(n){this.store.dispatch({type:Ep.SET_DC_ID,dcId:n})}get dcId(){return this.store.getState().dcId}set uid(n){this.store.dispatch({type:Ep.SET_UID,uid:n})}get uid(){return this.store.getState().uid}set pubId(n){this.store.dispatch({type:Ep.SET_PUB_ID,pubId:n})}get pubId(){return this.store.getState().pubId}set cloudProxyServerMode(n){this.store.dispatch({type:Ep.SET_CLOUD_PROXY_SERVER_MODE,mode:n})}get cloudProxyServerMode(){return this.store.getState().cloudProxyServerMode}clientCreated(){this.store.dispatch({type:Ep.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})}joinStart(){this.store.dispatch({type:Ep.KEY_METRIC_JOIN_START,metric:Date.now()})}joinEnd(){this.store.dispatch({type:Ep.KEY_METRIC_JOIN_END,metric:Date.now()})}requestAPStart(){this.store.dispatch({type:Ep.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})}requestAPEnd(){this.store.dispatch({type:Ep.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})}joinGatewayStart(){this.store.dispatch({type:Ep.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})}joinGatewayEnd(){this.store.dispatch({type:Ep.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})}peerConnectionStart(){this.store.dispatch({type:Ep.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})}peerConnectionEnd(){this.store.dispatch({type:Ep.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})}signalChannelOpen(){this.store.dispatch({type:Ep.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})}iceConnectionEnd(){this.store.dispatch({type:Ep.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})}publish(n,i,c,h){this.store.dispatch({type:Ep.KEY_METRIC_PUBLISH,metric:Ul(Ul({trackId:n,type:i},c&&{publishStart:c}),h&&{publishEnd:h})})}subscribe(n,i,c,h,g,v,m){this.store.dispatch({type:Ep.KEY_METRIC_SUBSCRIBE,metric:Ul(Ul(Ul(Ul(Ul({userId:n,type:i},c&&{subscribeStart:c}),h&&{subscribeEnd:h}),g&&{firstFrame:g}),v&&{streamAdded:v}),m&&{firstDecoded:m})})}massSubscribe(n,i,c,h){n.forEach(g=>{this.store.dispatch({type:Ep.KEY_METRIC_SUBSCRIBE,metric:Ul(Ul(Ul({userId:g.userId,type:g.type},i&&{subscribeStart:i}),c&&{subscribeEnd:c}),h&&{firstFrame:h})})})}get keyMetrics(){return this.store.getState().keyMetrics}recordJoinChannelService(n,i){"gateway"===n.service&&Array.isArray(n.urls)&&(n.urls=n.urls.map(c=>c.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2")));try{return"number"!=typeof i?(this.store.dispatch({type:Ep.RECORD_JOIN_CHANNEL_SERVICE,record:Ul(Ul({},n),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.store.getState().joinChannelServiceRecords.length-1):(i<0||i>=this.store.getState().joinChannelServiceRecords.length||this.store.dispatch({type:Ep.RECORD_JOIN_CHANNEL_SERVICE,record:n,index:i}),i)}catch(c){return 0}}resetJoinChannelServiceRecords(){this.store.dispatch({type:Ep.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.store.dispatch({type:Ep.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.store.getState().joinChannelServiceRecords}catch(n){return[]}}get avoidJoinStart(){return this.store.getState().avoidJoinStart}set avoidJoinStart(n){this.store.dispatch({type:Ep.AVOID_JOIN_START,avoidJoinStart:n})}}let Zre;const Lve=()=>void 0!==window.isSecureContext;function PCe(e){let n={};e:for(;!Bve(e);){let i=B2(e);switch(i>>>3){case 0:break e;case 1:n.requestId=Uve(e,B2(e));break;case 2:n.requestType=B2(e)>>>0;break;case 3:n.scorePorn=mhe(e);break;case 4:n.scoreSexy=mhe(e);break;case 5:n.scoreNeutral=mhe(e);break;case 6:n.requestScene=B2(e)>>>0;break;case 7:n.scene=B2(e)>>>0;break;default:Pve(e,7&i)}}return n}function xCe(e,n){let i=e.service;void 0!==i&&(Lp(n,8),Lp(n,i));let c=e.vendor;void 0!==c&&(Lp(n,16),Lp(n,c));let h=e.token;void 0!==h&&(Lp(n,26),M2(n,h));let g=e.callbackUrl;void 0!==g&&(Lp(n,34),M2(n,g))}function MCe(e){let n=B2(e),i=e.limit;return e.limit=e.offset+n,i}function Pve(e,n){switch(n){case 0:for(;128&Fve(e););break;case 2:ghe(e,B2(e));break;case 5:ghe(e,4);break;case 1:ghe(e,8);break;default:throw new Error("Unimplemented type: "+n)}}let BCe=new Float32Array(1);new Uint8Array(BCe.buffer);let phe=new Float64Array(1),N1=new Uint8Array(phe.buffer);function tV(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}let xve=[];function Mve(){const e=xve.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}function UCe(e){xve.push(e)}function ghe(e,n){if(e.offset+n>e.limit)throw new Error("Skip past limit");e.offset+=n}function Bve(e){return e.offset>=e.limit}function nV(e,n){let i=e.bytes,c=e.offset,h=e.limit,g=c+n;if(g>i.length){let v=new Uint8Array(2*g);v.set(i),e.bytes=v}return e.offset=g,g>h&&(e.limit=g),c}function Ahe(e,n){let i=e.offset;if(i+n>e.limit)throw new Error("Read past limit");return e.offset+=n,i}function Uve(e,n){let i=Ahe(e,n),c=String.fromCharCode,h=e.bytes,g="\ufffd",v="";for(let m=0;m<n;m++){let C,y,N,k,U=h[m+i];0==(128&U)?v+=c(U):192==(224&U)?m+1>=n?v+=g:(C=h[m+i+1],128!=(192&C)?v+=g:(k=(31&U)<<6|63&C,k<128?v+=g:(v+=c(k),m++))):224==(240&U)?m+2>=n?v+=g:(C=h[m+i+1],y=h[m+i+2],32896!=(49344&(C|y<<8))?v+=g:(k=(15&U)<<12|(63&C)<<6|63&y,k<2048||k>=55296&&k<=57343?v+=g:(v+=c(k),m+=2))):240==(248&U)?m+3>=n?v+=g:(C=h[m+i+1],y=h[m+i+2],N=h[m+i+3],8421504!=(12632256&(C|y<<8|N<<16))?v+=g:(k=(7&U)<<18|(63&C)<<12|(63&y)<<6|63&N,k<65536||k>1114111?v+=g:(k-=65536,v+=c(55296+(k>>10),56320+(1023&k)),m+=3))):v+=g}return v}function M2(e,n){let i=n.length,c=0;for(let v=0;v<i;v++){let m=n.charCodeAt(v);m>=55296&&m<=56319&&v+1<i&&(m=(m<<10)+n.charCodeAt(++v)-56613888),c+=m<128?1:m<2048?2:m<65536?3:4}Lp(e,c);let h=nV(e,c),g=e.bytes;for(let v=0;v<i;v++){let m=n.charCodeAt(v);m>=55296&&m<=56319&&v+1<i&&(m=(m<<10)+n.charCodeAt(++v)-56613888),m<128?g[h++]=m:(m<2048?g[h++]=m>>6&31|192:(m<65536?g[h++]=m>>12&15|224:(g[h++]=m>>18&7|240,g[h++]=m>>12&63|128),g[h++]=m>>6&63|128),g[h++]=63&m|128)}}function FCe(e,n){let i=nV(e,n.limit),c=e.bytes,h=n.bytes;for(let g=0,v=n.limit;g<v;g++)c[g+i]=h[g]}function Fve(e){return e.bytes[Ahe(e,1)]}function jve(e,n){let i=nV(e,1);e.bytes[i]=n}function mhe(e){let n=Ahe(e,8),i=e.bytes;return N1[0]=i[n++],N1[1]=i[n++],N1[2]=i[n++],N1[3]=i[n++],N1[4]=i[n++],N1[5]=i[n++],N1[6]=i[n++],N1[7]=i[n++],phe[0]}function Ehe(e,n){let i=nV(e,8),c=e.bytes;phe[0]=n,c[i++]=N1[0],c[i++]=N1[1],c[i++]=N1[2],c[i++]=N1[3],c[i++]=N1[4],c[i++]=N1[5],c[i++]=N1[6],c[i++]=N1[7]}function B2(e){let n,i=0,c=0;do{n=Fve(e),i<32&&(c|=(127&n)<<i),i+=7}while(128&n);return c}function Lp(e,n){for(n>>>=0;n>=128;)jve(e,127&n|128),n>>>=7;jve(e,n)}function f3(e,n){let i=n.low>>>0,c=(n.low>>>28|n.high<<4)>>>0,h=n.high>>>24,g=0===h?0===c?i<16384?i<128?1:2:i<1<<21?3:4:c<16384?c<128?5:6:c<1<<21?7:8:h<128?9:10,v=nV(e,g),m=e.bytes;switch(g){case 10:m[v+9]=h>>>7&1;case 9:m[v+8]=9!==g?128|h:127&h;case 8:m[v+7]=8!==g?c>>>21|128:c>>>21&127;case 7:m[v+6]=7!==g?c>>>14|128:c>>>14&127;case 6:m[v+5]=6!==g?c>>>7|128:c>>>7&127;case 5:m[v+4]=5!==g?128|c:127&c;case 4:m[v+3]=4!==g?i>>>21|128:i>>>21&127;case 3:m[v+2]=3!==g?i>>>14|128:i>>>14&127;case 2:m[v+1]=2!==g?i>>>7|128:i>>>7&127;case 1:m[v]=1!==g?128|i:127&i}}var Qve={};Object.defineProperty(Qve,"__esModule",{value:!0});var Vve=function(){function e(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}return e.hashStr=function(n,i){return void 0===i&&(i=!1),this.onePassHasher.start().appendStr(n).end(i)},e.hashAsciiStr=function(n,i){return void 0===i&&(i=!1),this.onePassHasher.start().appendAsciiStr(n).end(i)},e._hex=function(n){var i,c,h,g,v=e.hexChars,m=e.hexOut;for(g=0;g<4;g+=1)for(c=8*g,i=n[g],h=0;h<8;h+=2)m[c+1+h]=v.charAt(15&i),m[c+0+h]=v.charAt(15&(i>>>=4)),i>>>=4;return m.join("")},e._md5cycle=function(n,i){var c=n[0],h=n[1],g=n[2],v=n[3];h=((h+=((g=((g+=((v=((v+=((c=((c+=(h&g|~h&v)+i[0]-680876936|0)<<7|c>>>25)+h|0)&h|~c&g)+i[1]-389564586|0)<<12|v>>>20)+c|0)&c|~v&h)+i[2]+606105819|0)<<17|g>>>15)+v|0)&v|~g&c)+i[3]-1044525330|0)<<22|h>>>10)+g|0,h=((h+=((g=((g+=((v=((v+=((c=((c+=(h&g|~h&v)+i[4]-176418897|0)<<7|c>>>25)+h|0)&h|~c&g)+i[5]+1200080426|0)<<12|v>>>20)+c|0)&c|~v&h)+i[6]-1473231341|0)<<17|g>>>15)+v|0)&v|~g&c)+i[7]-45705983|0)<<22|h>>>10)+g|0,h=((h+=((g=((g+=((v=((v+=((c=((c+=(h&g|~h&v)+i[8]+1770035416|0)<<7|c>>>25)+h|0)&h|~c&g)+i[9]-1958414417|0)<<12|v>>>20)+c|0)&c|~v&h)+i[10]-42063|0)<<17|g>>>15)+v|0)&v|~g&c)+i[11]-1990404162|0)<<22|h>>>10)+g|0,h=((h+=((g=((g+=((v=((v+=((c=((c+=(h&g|~h&v)+i[12]+1804603682|0)<<7|c>>>25)+h|0)&h|~c&g)+i[13]-40341101|0)<<12|v>>>20)+c|0)&c|~v&h)+i[14]-1502002290|0)<<17|g>>>15)+v|0)&v|~g&c)+i[15]+1236535329|0)<<22|h>>>10)+g|0,h=((h+=((g=((g+=((v=((v+=((c=((c+=(h&v|g&~v)+i[1]-165796510|0)<<5|c>>>27)+h|0)&g|h&~g)+i[6]-1069501632|0)<<9|v>>>23)+c|0)&h|c&~h)+i[11]+643717713|0)<<14|g>>>18)+v|0)&c|v&~c)+i[0]-373897302|0)<<20|h>>>12)+g|0,h=((h+=((g=((g+=((v=((v+=((c=((c+=(h&v|g&~v)+i[5]-701558691|0)<<5|c>>>27)+h|0)&g|h&~g)+i[10]+38016083|0)<<9|v>>>23)+c|0)&h|c&~h)+i[15]-660478335|0)<<14|g>>>18)+v|0)&c|v&~c)+i[4]-405537848|0)<<20|h>>>12)+g|0,h=((h+=((g=((g+=((v=((v+=((c=((c+=(h&v|g&~v)+i[9]+568446438|0)<<5|c>>>27)+h|0)&g|h&~g)+i[14]-1019803690|0)<<9|v>>>23)+c|0)&h|c&~h)+i[3]-187363961|0)<<14|g>>>18)+v|0)&c|v&~c)+i[8]+1163531501|0)<<20|h>>>12)+g|0,h=((h+=((g=((g+=((v=((v+=((c=((c+=(h&v|g&~v)+i[13]-1444681467|0)<<5|c>>>27)+h|0)&g|h&~g)+i[2]-51403784|0)<<9|v>>>23)+c|0)&h|c&~h)+i[7]+1735328473|0)<<14|g>>>18)+v|0)&c|v&~c)+i[12]-1926607734|0)<<20|h>>>12)+g|0,h=((h+=((g=((g+=((v=((v+=((c=((c+=(h^g^v)+i[5]-378558|0)<<4|c>>>28)+h|0)^h^g)+i[8]-2022574463|0)<<11|v>>>21)+c|0)^c^h)+i[11]+1839030562|0)<<16|g>>>16)+v|0)^v^c)+i[14]-35309556|0)<<23|h>>>9)+g|0,h=((h+=((g=((g+=((v=((v+=((c=((c+=(h^g^v)+i[1]-1530992060|0)<<4|c>>>28)+h|0)^h^g)+i[4]+1272893353|0)<<11|v>>>21)+c|0)^c^h)+i[7]-155497632|0)<<16|g>>>16)+v|0)^v^c)+i[10]-1094730640|0)<<23|h>>>9)+g|0,h=((h+=((g=((g+=((v=((v+=((c=((c+=(h^g^v)+i[13]+681279174|0)<<4|c>>>28)+h|0)^h^g)+i[0]-358537222|0)<<11|v>>>21)+c|0)^c^h)+i[3]-722521979|0)<<16|g>>>16)+v|0)^v^c)+i[6]+76029189|0)<<23|h>>>9)+g|0,h=((h+=((g=((g+=((v=((v+=((c=((c+=(h^g^v)+i[9]-640364487|0)<<4|c>>>28)+h|0)^h^g)+i[12]-421815835|0)<<11|v>>>21)+c|0)^c^h)+i[15]+530742520|0)<<16|g>>>16)+v|0)^v^c)+i[2]-995338651|0)<<23|h>>>9)+g|0,h=((h+=((v=((v+=(h^((c=((c+=(g^(h|~v))+i[0]-198630844|0)<<6|c>>>26)+h|0)|~g))+i[7]+1126891415|0)<<10|v>>>22)+c|0)^((g=((g+=(c^(v|~h))+i[14]-1416354905|0)<<15|g>>>17)+v|0)|~c))+i[5]-57434055|0)<<21|h>>>11)+g|0,h=((h+=((v=((v+=(h^((c=((c+=(g^(h|~v))+i[12]+1700485571|0)<<6|c>>>26)+h|0)|~g))+i[3]-1894986606|0)<<10|v>>>22)+c|0)^((g=((g+=(c^(v|~h))+i[10]-1051523|0)<<15|g>>>17)+v|0)|~c))+i[1]-2054922799|0)<<21|h>>>11)+g|0,h=((h+=((v=((v+=(h^((c=((c+=(g^(h|~v))+i[8]+1873313359|0)<<6|c>>>26)+h|0)|~g))+i[15]-30611744|0)<<10|v>>>22)+c|0)^((g=((g+=(c^(v|~h))+i[6]-1560198380|0)<<15|g>>>17)+v|0)|~c))+i[13]+1309151649|0)<<21|h>>>11)+g|0,h=((h+=((v=((v+=(h^((c=((c+=(g^(h|~v))+i[4]-145523070|0)<<6|c>>>26)+h|0)|~g))+i[11]-1120210379|0)<<10|v>>>22)+c|0)^((g=((g+=(c^(v|~h))+i[2]+718787259|0)<<15|g>>>17)+v|0)|~c))+i[9]-343485551|0)<<21|h>>>11)+g|0,n[0]=c+n[0]|0,n[1]=h+n[1]|0,n[2]=g+n[2]|0,n[3]=v+n[3]|0},e.prototype.start=function(){return this._dataLength=0,this._bufferLength=0,this._state.set(e.stateIdentity),this},e.prototype.appendStr=function(n){var i,c,h=this._buffer8,g=this._buffer32,v=this._bufferLength;for(c=0;c<n.length;c+=1){if((i=n.charCodeAt(c))<128)h[v++]=i;else if(i<2048)h[v++]=192+(i>>>6),h[v++]=63&i|128;else if(i<55296||i>56319)h[v++]=224+(i>>>12),h[v++]=i>>>6&63|128,h[v++]=63&i|128;else{if((i=1024*(i-55296)+(n.charCodeAt(++c)-56320)+65536)>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");h[v++]=240+(i>>>18),h[v++]=i>>>12&63|128,h[v++]=i>>>6&63|128,h[v++]=63&i|128}v>=64&&(this._dataLength+=64,e._md5cycle(this._state,g),v-=64,g[0]=g[16])}return this._bufferLength=v,this},e.prototype.appendAsciiStr=function(n){for(var i,c=this._buffer8,h=this._buffer32,g=this._bufferLength,v=0;;){for(i=Math.min(n.length-v,64-g);i--;)c[g++]=n.charCodeAt(v++);if(g<64)break;this._dataLength+=64,e._md5cycle(this._state,h),g=0}return this._bufferLength=g,this},e.prototype.appendByteArray=function(n){for(var i,c=this._buffer8,h=this._buffer32,g=this._bufferLength,v=0;;){for(i=Math.min(n.length-v,64-g);i--;)c[g++]=n[v++];if(g<64)break;this._dataLength+=64,e._md5cycle(this._state,h),g=0}return this._bufferLength=g,this},e.prototype.getState=function(){var n=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[n[0],n[1],n[2],n[3]]}},e.prototype.setState=function(n){var i,c=n.buffer,h=n.state,g=this._state;for(this._dataLength=n.length,this._bufferLength=n.buflen,g[0]=h[0],g[1]=h[1],g[2]=h[2],g[3]=h[3],i=0;i<c.length;i+=1)this._buffer8[i]=c.charCodeAt(i)},e.prototype.end=function(n){void 0===n&&(n=!1);var i=this._bufferLength,c=this._buffer8,h=this._buffer32,g=1+(i>>2);this._dataLength+=i;var v=8*this._dataLength;if(c[i]=128,c[i+1]=c[i+2]=c[i+3]=0,h.set(e.buffer32Identity.subarray(g),g),i>55&&(e._md5cycle(this._state,h),h.set(e.buffer32Identity)),v<=4294967295)h[14]=v;else{var m=v.toString(16).match(/(.*?)(.{0,8})$/);if(null===m)return;var C=parseInt(m[2],16),y=parseInt(m[1],16)||0;h[14]=C,h[15]=y}return e._md5cycle(this._state,h),n?this._state:e._hex(this._state)},e.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),e.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),e.hexChars="0123456789abcdef",e.hexOut=[],e.onePassHasher=new e,e}(),jCe=Qve.Md5=Vve;if("5d41402abc4b2a76b9719d911017c592"!==Vve.hashStr("hello"))throw new Error("Md5 self test failed.");const QCe=function(){var e=l(function*(n,i,c){return yield(h=l(function*(g,v,m){const y=new Uint8Array(jCe.hashStr(""+v+m,!0).buffer).slice(0,16),N=y.slice(0,12),k=yield window.crypto.subtle.importKey("raw",y,"AES-GCM",!0,["encrypt"]);return new Uint8Array(yield window.crypto.subtle.encrypt({name:"AES-GCM",iv:N},k,g))}),function(g,v,m){return h.apply(this,arguments)})(n.buffer,i,c);var h});return function(i,c,h){return e.apply(this,arguments)}}();function Gve(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);n&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),i.push.apply(i,c)}return i}const VCe=new Map([["moderation",1],["supervise",2]]);class eie extends f0{get connectionState(){return this._connectionState}set connectionState(n){if(this._connectionState===n)return;const i=this._connectionState;this._connectionState=n,this.emit(w0.CONNECTION_STATE_CHANGE,i,n)}get inspectType(){return this._inspectType}set inspectType(n){var i;this._inspectMode=_A(i=n.map(c=>VCe.get(c)||0)).call(i,(c,h)=>c+h),this._inspectType=n}get quality(){return this._quality}set quality(n){this._quality=n>1?1:n<.1?.1:n,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this.qualityRatio},6e4))}constructor(n){super(),Y(this,"name","AgoraRTCVideoContentInspect"),Y(this,"_connectionState",O1.CONNECTING),Y(this,"_innerConnectionState",void 0),Y(this,"sequence",0),Y(this,"inspectStartTime",void 0),Y(this,"workerManagerConnection",void 0),Y(this,"workerConnection",void 0),Y(this,"workerMessageLengthLimit",void 0),Y(this,"inspectIntervalMinimum",void 0),Y(this,"qualityRatio",void 0),Y(this,"_connectInfo",void 0),Y(this,"_cancelTokenSource",r1.CancelToken.source()),Y(this,"_retryConfig",void 0),Y(this,"wmSequence",0),Y(this,"inspectInterval",void 0),Y(this,"inspectTimer",null),Y(this,"ossFilePrefix",void 0),Y(this,"extraInfo",void 0),Y(this,"_inspectType",void 0),Y(this,"_inspectMode",void 0),Y(this,"_quality",1),Y(this,"qualityTimer",null),Y(this,"_inspectId",void 0),Y(this,"_needWorkUrlOnly",!1),Y(this,"inspectImage",()=>{if(this.connectionState!==O1.CONNECTED)throw new ea(_t.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval(()=>{if(this.connectionState!==O1.CONNECTED)return de.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState),void pl("debug",this,"Inspect State is not connected , ".concat(this.connectionState));this.requestToInspectImage()},this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()}),this._inspectId=x0(5,"inspect-"),this.workerMessageLengthLimit=ya("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=ya("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=ya("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=n.interval,this.ossFilePrefix=n.ossFilePrefix,this.extraInfo=n.extraInfo,this.inspectType=n.inspectType,this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new JQ("worker-manager-"+this._inspectId,W0),this.on(w0.STATE_CHANGE,(i,c)=>{this._innerConnectionState=i,de.debug("[".concat(this._inspectId,"] Inspect operation :").concat(a1[i]," ").concat(c||"")),i1("debug",["Inspect",this._inspectId],w0.STATE_CHANGE,"".concat(a1[i]," ").concat(c||""))}),this.handleWorkerManagerEvents(),this.workerConnection=new JQ("worker-"+this._inspectId,W0),this.handleWorkerEvents()}init(n,i){var c=this;return l(function*(){c.emit(w0.STATE_CHANGE,a1.CONNECT_AP),c._connectInfo=n;const h=c._cancelTokenSource.token;return c._retryConfig=i,new _l((g,v)=>{c.on(w0.CONNECTION_STATE_CHANGE,(m,C)=>{C===O1.CONNECTED&&g()}),c.requestAP(n,h,i).then(m=>{c.connectWorkerManager(m)}).catch(m=>{v(m)})})})()}requestAP(n,i,c){var h=this;return l(function*(){const g=ya("WEBCS_DOMAIN").map(C=>"https://".concat(C,"/api/v1")),v=yield function(C,y,N,k){let{appId:U,areaCode:V,cname:K,sid:$,token:Z,uid:ye}=y;Ede++;const be="image_moderation_api",_s={service_name:be,json_body:JSON.stringify({appId:U,areaCode:V,cname:K,command:"allocateEdge",requestId:Ede,seq:Ede,sid:$,token:Z,ts:Date.now(),uid:ye+""})};let ua,ma,pc=C[0];return JT(l(function*(){ua=Date.now();const qa=yield iO(pc,{data:_s,cancelToken:N,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(ma=Date.now()-ua,0!==qa.code){const El=new ea(_t.UNEXPECTED_RESPONSE,"image inspect ap error, code"+qa.code,{retry:!0,responseTime:ma});throw de.error(El.toString()),Gc("error",["AjaxAPI"],"requestImageInspectAP",void 0,El.toString()),El}const Ua=JSON.parse(qa.json_body);if(200!==Ua.code){const El=new ea(_t.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(Ua.code,", reason: ").concat(Ua.reason),{code:Ua.code,responseTime:ma});throw de.error(El.toString()),Gc("error",["AjaxAPI"],"requestImageInspectAP",void 0,El.toString()),El}if(!Ua.servers||!Array.isArray(Ua.servers)||0===Ua.servers.length){const El=new ea(_t.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:Ua.code,responseTime:ma});throw de.error(El.toString()),Gc("error",["AjaxAPI"],"requestImageInspectAP",void 0,El.toString()),El}const nl=ya("VIDEO_INSPECT_WORKER_MANAGER_HOST"),Wc=ya("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:Ua.servers.map(El=>{let{address:Dl,wss:Kl}=El;if(Dl&&Kl)return"wss://".concat(Dl.replace(/\./g,"-"),".").concat(nl,":").concat(Wc||Kl)}).filter(El=>!!El),workerToken:Ua.workerToken,vid:Ua.vid,responseTime:ma}}),(qa,Ua)=>(qc.apworkerEvent($,{success:!0,sc:200,serviceName:be,responseDetail:JSON.stringify(qa.addressList),firstSuccess:0===Ua,responseTime:ma,serverIp:C[Ua%C.length]}),!1),(qa,Ua)=>(qc.apworkerEvent($,{success:!1,sc:qa.data&&qa.data.code||200,serviceName:be,responseTime:ma,serverIp:C[Ua%C.length]}),!!(qa.code!==_t.OPERATION_ABORTED&&qa.code!==_t.UNEXPECTED_RESPONSE||qa.data&&qa.data.retry)&&(pc=C[(Ua+1)%C.length],!0)),k)}(g,n,i,c);h.emit(w0.STATE_CHANGE,a1.AP_CONNECTED);const{addressList:m}=v;return h.wmSequence++,m})()}connectWorkerManager(n){var i=arguments,c=this;return l(function*(){c._needWorkUrlOnly=i.length>1&&void 0!==i[1]&&i[1],c.emit(w0.STATE_CHANGE,a1.CONNECT_WORKER_MANAGER),yield c.workerManagerConnection.init(n,1e4)})()}connectWorker(n){var i=this;return l(function*(){yield i.workerConnection.init([n])})()}handleWorkerManagerEvents(){var n=this;this.workerManagerConnection.on(Nh.CONNECTED,l(function*(){n.emit(w0.STATE_CHANGE,a1.WORKER_MANAGER_CONNECTED,n.workerManagerConnection.url),n.workerManagerConnection.sendMessage({appId:n._connectInfo.appId,cname:n._connectInfo.cname,uid:n._connectInfo.uid+"",sdkVersion:"4.15.1",sid:n._connectInfo.sid,seq:n.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)})),this.workerManagerConnection.on(Nh.CLOSED,()=>{this._innerConnectionState<a1.GET_WORKER_MANAGER_RESPONSE&&(de.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker")),i1("debug",["Inspect",this._inspectId],"workerManagerConnectionClosed"))}),this.workerManagerConnection.on(Nh.FAILED,()=>{this._innerConnectionState<a1.GET_WORKER_MANAGER_RESPONSE&&(de.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker")),i1("debug",["Inspect",this._inspectId],"workerManagerConnectionFailed"))}),this.workerManagerConnection.on(Nh.RECONNECTING,()=>{this._innerConnectionState<a1.GET_WORKER_MANAGER_RESPONSE&&(de.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker")),i1("debug",["Inspect",this._inspectId],"workerManagerConnectionReconnecting"))}),this.workerManagerConnection.on(Nh.ON_MESSAGE,function(){var i=l(function*(c){n.emit(w0.STATE_CHANGE,a1.GET_WORKER_MANAGER_RESPONSE);const h=n.workerManagerConnection.url;n.workerManagerConnection.close();const g=JSON.parse(c.data);if(200!==g.code)throw de.error("[".concat(n._inspectId,"] Unexpected code ").concat(g.code," from worker manager")),pl("error",n,"Unexpected code ".concat(g.code," from worker manager")),new ea(_t.UNEXPECTED_RESPONSE,"response code of worker is unexpected",g);if(!(g.serverResponse&&g.serverResponse.portWss&&h))throw de.error("[".concat(n._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(g))),pl("error",n,"Unexpected content from worker manager : "+JSON.stringify(g)),new ea(_t.UNEXPECTED_RESPONSE,"response content of worker is unexpected",g);{const v=ya("VIDEO_INSPECT_WORKER_PORT")||g.serverResponse.portWss,m=h.replace(/:\d+\/?$/,":".concat(v));n.emit(w0.STATE_CHANGE,a1.CONNECT_WORKER,m),n._needWorkUrlOnly?n.emit(w0.REQUEST_NEW_WORKER_URL,m):yield n.connectWorker(m)}});return function(c){return i.apply(this,arguments)}}()),this.workerManagerConnection.on(Nh.WILL_RECONNECT,(i,c)=>{c(i)}),this.workerManagerConnection.on(Nh.REQUEST_NEW_URLS,(i,c)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(i).catch(c)})}handleWorkerEvents(){var n=this;this.workerConnection.on(Nh.CONNECTED,l(function*(){n.emit(w0.STATE_CHANGE,a1.WORKER_CONNECTED,n.workerConnection.url),n.connectionState=O1.CONNECTED})),this.workerConnection.on(Nh.ON_MESSAGE,function(){var i=l(function*(c){if(c.data instanceof ArrayBuffer){const g=function LCe(e){return function(i){let c={};e:for(;!Bve(i);){let h=B2(i);switch(h>>>3){case 0:break e;case 1:c.code=B2(i);break;case 2:c.msg=Uve(i,B2(i));break;case 3:{let g=MCe(i);c.data=PCe(i),i.limit=g;break}default:Pve(i,7&h)}}return c}({bytes:n=e,offset:0,limit:n.length});var n}(new Uint8Array(c.data));if(ya("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&de.debug("[".concat(n._inspectId,"] Response message for worker of inspect content "),JSON.stringify(g)),200===g.code){if(Array.isArray(n.inspectType)&&1===n.inspectType.length&&"supervise"===n.inspectType[0])return void n.emit(w0.INSPECT_RESULT,void 0,void 0);if(g.data&&g.data.scorePorn&&g.data.scoreSexy&&g.data.scoreNeutral){var h;const v={porn:g.data.scorePorn,sexy:g.data.scoreSexy,neutral:g.data.scoreNeutral},m=_A(h=Object.keys(v)).call(h,(y,N)=>v[y]>v[N]?y:N,"porn"),C=Object.keys(v).find(y=>y===m);n.emit(w0.INSPECT_RESULT,C)}else n.emit(w0.INSPECT_RESULT,void 0,new ea(_t.UNEXPECTED_RESPONSE,g.code+"","There is an unexpected data on message"))}else n.emit(w0.INSPECT_RESULT,void 0,new ea(_t.UNEXPECTED_RESPONSE,g.code+"",g.msg))}else de.error("[".concat(n._inspectId,"] Unexpected message type from worker")),pl("error",n,"Unexpected message type from worker"),n.emit(w0.INSPECT_RESULT,void 0,new ea(_t.UNEXPECTED_RESPONSE,"invalid worker message type"))});return function(c){return i.apply(this,arguments)}}()),this.workerConnection.on(Nh.CLOSED,()=>{this.connectionState=O1.CLOSED}),this.workerConnection.on(Nh.FAILED,()=>{this.connectionState=O1.CLOSED}),this.workerConnection.on(Nh.RECONNECTING,()=>{this.connectionState=this.connectionState===O1.CONNECTED?O1.RECONNECTING:O1.CONNECTING}),this.workerConnection.on(Nh.WILL_RECONNECT,(i,c)=>{"recover"===i&&c(i),c("tryNext")}),this.workerConnection.on(Nh.REQUEST_NEW_URLS,(i,c)=>{this.workerManagerConnection.close(),this.once(w0.REQUEST_NEW_WORKER_URL,h=>{i([h])}),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(h=>{this.connectWorkerManager(h,!0)}).catch(h=>{c(h)})})}static intToLong(n){return{low:n|=0,high:n>>31,unsigned:n>=0}}requestToInspectImage(){var n=this;return l(function*(){n.sequence++;const i=N2(n,w0.CLIENT_LOCAL_VIDEO_TRACK),c={appId:n._connectInfo.appId,cname:n._connectInfo.cname,cid:n._connectInfo.cid,sid:n._connectInfo.sid,uid:n._connectInfo.uid,vid:n._connectInfo.vid};if(i){if(!i.isPlaying)return void n.emit(w0.INSPECT_RESULT,void 0,new ea(_t.INVALID_OPERATION,"Only the track being played can be inspected"));const h=yield n.generateRequestData(i,c);n.workerConnection.sendMessage(h,!0,!0)}else n.emit(w0.INSPECT_RESULT,void 0,new ea(_t.INVALID_OPERATION,"Only the track being published can be inspected"))})()}generateRequestData(n,i){var c=this;return l(function*(){let{appId:h,cname:g,cid:v,vid:m,sid:C,uid:y}=i;const N=Date.now(),k=yield n.getCurrentFrameImage("image/jpeg",c.quality),U=yield QCe(k,h,g),V=c.sequence+"-"+v+"-"+y+"-"+N+"-"+x0(12,""),K={appId:h,cid:v,cname:g,deviceId:"",elapse:eie.intToLong(Number(N-c.inspectStartTime)),fileSize:U.byteLength,jpgEncryption:2,height:k.height,width:k.width,jpg:U,networkType:6,osType:7,requestId:V,sdkVersion:"4.15.1",sequence:c.sequence,sid:C,timestamp:eie.intToLong(N),uid:y,vid:m,service:c._inspectMode,callbackData:c.extraInfo,ossFilePrefix:c.ossFilePrefix};void 0===c.extraInfo&&delete K.callbackData,void 0===c.ossFilePrefix&&delete K.ossFilePrefix;const $=function kCe(e){let n=Mve();return function(i,c){let h=i.appId;void 0!==h&&(Lp(c,10),M2(c,h));let g=i.cid;void 0!==g&&(Lp(c,16),Lp(c,g));let v=i.cname;void 0!==v&&(Lp(c,26),M2(c,v));let m=i.deviceId;void 0!==m&&(Lp(c,34),M2(c,m));let C=i.elapse;void 0!==C&&(Lp(c,40),f3(c,C));let y=i.fileSize;void 0!==y&&(Lp(c,48),f3(c,tV(y)));let N=i.height;void 0!==N&&(Lp(c,56),f3(c,tV(N)));let k=i.jpg;void 0!==k&&(Lp(c,66),Lp(c,k.length),function(Qa,ca){let Aa=nV(Qa,ca.length);Qa.bytes.set(ca,Aa)}(c,k));let U=i.networkType;void 0!==U&&(Lp(c,72),f3(c,tV(U)));let V=i.osType;void 0!==V&&(Lp(c,80),f3(c,tV(V)));let K=i.requestId;void 0!==K&&(Lp(c,90),M2(c,K));let $=i.sdkVersion;void 0!==$&&(Lp(c,98),M2(c,$));let Z=i.sequence;void 0!==Z&&(Lp(c,104),f3(c,tV(Z)));let ye=i.sid;void 0!==ye&&(Lp(c,114),M2(c,ye));let be=i.timestamp;void 0!==be&&(Lp(c,120),f3(c,be));let _s=i.uid;void 0!==_s&&(Lp(c,128),Lp(c,_s));let ua=i.vid;void 0!==ua&&(Lp(c,136),Lp(c,ua));let ma=i.width;void 0!==ma&&(Lp(c,144),f3(c,tV(ma)));let pc=i.service;void 0!==pc&&(Lp(c,152),Lp(c,pc));let qa=i.callbackData;void 0!==qa&&(Lp(c,162),M2(c,qa));let Ua=i.jpgEncryption;void 0!==Ua&&(Lp(c,168),Lp(c,Ua));let nl=i.requestType;void 0!==nl&&(Lp(c,176),Lp(c,nl));let Wc=i.scorePorn;void 0!==Wc&&(Lp(c,185),Ehe(c,Wc));let El=i.scoreSexy;void 0!==El&&(Lp(c,193),Ehe(c,El));let Dl=i.scoreNeutral;void 0!==Dl&&(Lp(c,201),Ehe(c,Dl));let Kl=i.scene;void 0!==Kl&&(Lp(c,208),Lp(c,Kl));let sl=i.ossFilePrefix;void 0!==sl&&(Lp(c,218),M2(c,sl));let _a=i.serviceVendor;if(void 0!==_a)for(let Qa of _a){Lp(c,226);let ca=Mve();xCe(Qa,ca),Lp(c,ca.limit),FCe(c,ca),UCe(ca)}}(e,n),function(i){let c=i.bytes,h=i.limit;return c.length===h?c:c.subarray(0,h)}(n)}(K);if($.byteLength<c.workerMessageLengthLimit){if(ya("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){const Z=function(ye){for(var be=1;be<arguments.length;be++){var _s=null!=arguments[be]?arguments[be]:{};be%2?Gve(Object(_s),!0).forEach(function(ua){Y(ye,ua,_s[ua])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ye,Object.getOwnPropertyDescriptors(_s)):Gve(Object(_s)).forEach(function(ua){Object.defineProperty(ye,ua,Object.getOwnPropertyDescriptor(_s,ua))})}return ye}({},K);delete Z.jpg,de.debug("[".concat(c._inspectId,"] Request message for worker of inspect content "),JSON.stringify(Z)),pl("debug",c,"Request message for worker of inspect content ".concat(JSON.stringify(Z)))}return $}return c.quality=c.quality*c.qualityRatio,yield c.generateRequestData(n,{appId:h,cname:g,cid:v,vid:m,sid:C,uid:y})})()}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=r1.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=O1.CLOSED,this.emit(w0.STATE_CHANGE,a1.CLOSED)}}var Hve,qve,Wve,Kve,Yve,Jve,zve,Xve,$ve,Zve,e0e,t0e,n0e,m0;function r0e(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);n&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),i.push.apply(i,c)}return i}function oz(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?r0e(Object(i),!0).forEach(function(c){Y(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r0e(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}let GCe=(Hve=uy("AgoraRTCClient","store.clientId"),qve=z4({report:qc}),Wve=z4(),Kve=z4(),Yve=z4({report:qc}),Jve=z4({report:qc}),zve=oO(),Xve=oO({report:qc}),$ve=oO({report:qc}),Zve=oO({report:qc}),e0e=z4({reportResult:!0,report:qc}),t0e=oO(),Hve((Cl((m0=class extends f0{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}constructor(e){var n;let i;if(super(),n=this,Y(this,"store",void 0),Y(this,"_uid",void 0),Y(this,"_channelName",void 0),Y(this,"_uintUid",void 0),Y(this,"_users",[]),Y(this,"_codec",void 0),Y(this,"_mode",void 0),Y(this,"_config",void 0),Y(this,"_clientId",void 0),Y(this,"_appId",void 0),Y(this,"_sessionId",null),Y(this,"_key",void 0),Y(this,"_joinInfo",void 0),Y(this,"_gateway",void 0),Y(this,"_statsCollector",void 0),Y(this,"_configDistribute",void 0),Y(this,"_leaveMutex",new _I("client-leave")),Y(this,"_publishMutex",new _I("client-publish")),Y(this,"_renewTokenMutex",new _I("client-renewtoken")),Y(this,"_subscribeMutex",new _I("client-subscribe")),Y(this,"_encryptionMode","none"),Y(this,"_encryptionSecret",null),Y(this,"_encryptionSalt",null),Y(this,"_proxyServer",void 0),Y(this,"_turnServer",{servers:[],mode:"auto"}),Y(this,"_cloudProxyServerMode","disabled"),Y(this,"_isDualStreamEnabled",!1),Y(this,"_defaultStreamFallbackType",void 0),Y(this,"_lowStreamParameter",void 0),Y(this,"_streamFallbackTypeCacheMap",new Map),Y(this,"_remoteStreamTypeCacheMap",new Map),Y(this,"_axiosCancelSource",r1.CancelToken.source()),Y(this,"_audioVolumeIndicationInterval",void 0),Y(this,"_networkQualityInterval",void 0),Y(this,"_userOfflineTimeout",void 0),Y(this,"_streamRemovedTimeout",void 0),Y(this,"_injectStreamingClient",void 0),Y(this,"_liveTranscodeStreamingClient",void 0),Y(this,"_liveRawStreamingClient",void 0),Y(this,"_channelMediaRelayClient",void 0),Y(this,"_networkQualitySensitivity","normal"),Y(this,"_p2pChannel",void 0),Y(this,"_useLocalAccessPoint",!1),Y(this,"_setLocalAPVersion",void 0),Y(this,"_joinAndNotLeaveYet",!1),Y(this,"_numberOfJoinCount",0),Y(this,"_remoteDefaultVideoStreamType",void 0),Y(this,"_inspect",void 0),Y(this,"_license",void 0),Y(this,"_handleLocalTrackEnable",(c,h,g)=>{this.publish(c,!1).then(h).catch(g)}),Y(this,"_handleLocalTrackDisable",(c,h,g)=>{this.unpublish(c).then(h).catch(g)}),Y(this,"_handleUserOnline",c=>{this.isStringUID&&"string"!=typeof c.uid&&(de.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID")),pl("error",this,"StringUID is Mixed with UintUID"));const h=this._users.find(g=>g.uid===c.uid);if(h)h._trust_in_room_=!0;else{const g=new kde(c.uid,c.uint_id||c.uid);this._users.push(g),de.debug("[".concat(this._clientId,"] user online"),c.uid),z1("info",this,"user-joined",{uid:c.uid}),this.emit(Vh.USER_JOINED,g)}}),Y(this,"_handleUserOffline",c=>{const h=this._users.find(g=>g.uid===c.uid);h&&(this._handleRemoveStream(c),xle(this._users,h),this._remoteStreamTypeCacheMap.delete(h.uid),this._streamFallbackTypeCacheMap.delete(h.uid),de.debug("[".concat(this._clientId,"] user offline"),c.uid,"reason:",c.reason),z1("info",this,"user-left",{reason:c.reason,uid:c.uid}),this.emit(Vh.USER_LEAVED,h,c.reason))}),Y(this,"_handleAddAudioOrVideoStream",(c,h,g,v,m,C,y)=>{const N=this._users.find(U=>U.uid===h);if(!N)return de.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)")),void p0("error",["AgoraRTCGateway",this._clientId],"add_".concat(c,"_stream"),"can not find target user!");de.debug("[".concat(this._clientId,"] stream added with uid ").concat(h,", type ").concat(c)),p0("debug",["AgoraRTCGateway",this._clientId],"add_".concat(c,"_stream"),{uid:h,mediaType:c}),this.store.subscribe(N.uid,c,void 0,void 0,void 0,Date.now());const k="audio"===c?N.hasAudio:N.hasVideo;N._uintid||(N._uintid=m||h),"audio"===c?N._trust_audio_stream_added_state_=!0:N._trust_video_stream_added_state_=!0,"audio"===c?(N._audio_added_=!0,void 0!==g&&(N._audioSSRC=g),void 0!==v&&(N._cname=v),C&&(N._audioOrtc=C)):(N._video_added_=!0,void 0!==g&&(N._videoSSRC=g),void 0!==v&&(N._cname=v),void 0!==y&&(N._rtxSsrcId=y),C&&(N._videoOrtc=C)),("audio"===c?N.hasAudio:N.hasVideo)&&!k&&(de.info("[".concat(this._clientId,"] remote user ").concat(N.uid," published ").concat(c)),pl("info",this,"remote user ".concat(N.uid," published ").concat(c)),z1("info",this,"user-published",{uid:N.uid,mediaType:c}),this.emit(Vh.USER_PUBLISHED,N,c)),"video"===c?qc.onGatewayStream(this._sessionId,Ky.ON_ADD_VIDEO_STREAM,s0.ON_ADD_VIDEO_STREAM,{peer:m||h}):qc.onGatewayStream(this._sessionId,Ky.ON_ADD_AUDIO_STREAM,s0.ON_ADD_AUDIO_STREAM,{peer:m||h}),this._p2pChannel.remoteMediaSsrcChanged(N,c,g).then(U=>{if(U)return de.debug("[".concat(this._clientId,"] resubscribe ").concat(c," for user ").concat(N.uid," after rejoin because SSRC id changed.")),this._p2pChannel.unsubscribe(N,c,!0).then(()=>this._subscribe(N,c,!0).catch(V=>{de.error("[".concat(this._clientId,"] resubscribe error"),V.toString()),pl("error",this,"resubscribe error: ".concat(V.toString()))}))}),this._p2pChannel.hasPendingRemoteMedia(N,c)&&(de.debug("[".concat(this._clientId,"] resubscribe ").concat(c," for user ").concat(N.uid," after reconnect.")),this._subscribe(N,c,!0).catch(U=>{de.error("[".concat(this._clientId,"] resubscribe error"),U.toString()),pl("error",this,"resubscribe error: ".concat(U.toString()))}))}),Y(this,"_handleRemoveStream",c=>{const h=this._users.find(v=>v.uid===c.uid);if(!h)return de.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)")),void p0("warning",["AgoraRTCGateway",this._clientId],"remove_stream",{uid:c.uid,info:"can not find target user!"});de.debug("[".concat(this._clientId,"] stream removed with uid ").concat(c.uid)),p0("debug",["AgoraRTCGateway",this._clientId],"remove_stream",{uid:c.uid});let g=()=>{};h.hasAudio&&h.hasVideo?g=()=>{de.info("[".concat(this._clientId,"] remote user ").concat(h.uid," unpublished audio track")),z1("info",this,"user-unpublished",{uid:h.uid,mediaType:"audio"}),this.emit(Vh.USER_UNPUBLISHED,h,"audio"),de.info("[".concat(this._clientId,"] remote user ").concat(h.uid," unpublished video track")),z1("info",this,"user-unpublished",{uid:h.uid,mediaType:"video"}),this.emit(Vh.USER_UNPUBLISHED,h,"video")}:h.hasVideo?g=()=>{de.info("[".concat(this._clientId,"] remote user ").concat(h.uid," unpublished video track")),z1("info",this,"user-unpublished",{uid:h.uid,mediaType:"video"}),this.emit(Vh.USER_UNPUBLISHED,h,"video")}:h.hasAudio&&(g=()=>{de.info("[".concat(this._clientId,"] remote user ").concat(h.uid," unpublished audio track")),z1("info",this,"user-unpublished",{uid:h.uid,mediaType:"audio"}),this.emit(Vh.USER_UNPUBLISHED,h,"audio")}),h._trust_audio_stream_added_state_=!0,h._trust_video_stream_added_state_=!0,h._audio_added_=!1,h._video_added_=!1,this._p2pChannel.unsubscribe(h).then(v=>{if(v)return this._gateway.unsubscribe(v,h.uid)}),h._audioSSRC=void 0,h._videoSSRC=void 0,h._audioOrtc=void 0,h._videoOrtc=void 0,h._rtxSsrcId=void 0,qc.onGatewayStream(this._sessionId,Ky.ON_REMOVE_STREAM,s0.ON_REMOVE_STREAM,{peer:c.uint_id||c.uid}),g()}),Y(this,"_handleSetStreamLocalEnable",(c,h,g)=>{const v=this._users.find(y=>y.uid===h);if(!v)return de.error("[".concat(this._clientId,"] can not find target user!(disable_local)")),void p0("error",this,"disable_local_video","can not find target user!(disable_local)");de.debug("[".concat(this._clientId,"] local ").concat(c," ").concat(g?"enabled":"disabled"," with uid ").concat(h)),p0("debug",this,"disable_local_video","local ".concat(c," ").concat(g?"enabled":"disabled"," with uid ").concat(h));const m="audio"===c?v.hasAudio:v.hasVideo;if("audio"===c){v._trust_audio_enabled_state_=!0;const y=v._audio_enabled_;if(v._audio_enabled_=g,v._audio_enabled_===y)return;{const N=v._audio_enabled_?"enable-local-audio":"disable-local-audio";de.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(h,", msg: ").concat(N)),Jl("debug",this,"user-info-updated",{uid:h,msg:N}),this.emit(Vh.USER_INFO_UPDATED,h,N)}}else{v._trust_video_enabled_state_=!0;const y=v._video_enabled_;if(v._video_enabled_=g,v._video_enabled_===y)return;{const N=v._video_enabled_?"enable-local-video":"disable-local-video";de.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(h,", msg: ").concat(N)),Jl("debug",this,"user-info-updated",{uid:h,msg:N}),this.emit(Vh.USER_INFO_UPDATED,h,N)}}const C="audio"===c?v.hasAudio:v.hasVideo;return m!==C?!m&&C?(de.info("[".concat(this._clientId,"] remote user ").concat(h," published ").concat(c)),z1("info",this,"user-published",{uid:h,mediaType:c}),void this.emit(Vh.USER_PUBLISHED,v,c)):("video"===c&&v._videoTrack&&v._videoTrack._destroy(),this._p2pChannel.muteRemote(v,c),de.info("[".concat(this._clientId,"] remote user ").concat(h," unpublished ").concat(c)),z1("info",this,"user-unpublished",{uid:h,mediaType:c}),void this.emit(Vh.USER_UNPUBLISHED,v,c)):void 0}),Y(this,"_handleMuteStream",(c,h,g)=>{de.debug("[".concat(this._clientId,"] receive mute message"),c,h,g),p0("debug",this,"mute_".concat(h),g);const v=this._users.find(y=>y.uid===c);if(!v)return de.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(c)),void p0("warning",this,"mute_".concat(h),"can not find remote user, ignore mute event, uid: ".concat(c));const m="audio"===h?v.hasAudio:v.hasVideo;if("audio"===h){v._trust_audio_mute_state_=!0;const y=v._audio_muted_;if(v._audio_muted_=g,v._audio_muted_===y)return;{const N=v._audio_muted_?"mute-audio":"unmute-audio";de.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(c,", msg: ").concat(N)),Jl("debug",this,"user-info-updated",{uid:c,msg:N}),this.emit(Vh.USER_INFO_UPDATED,c,N)}}else{v._trust_video_mute_state_=!0;const y=v._video_muted_;if(v._video_muted_=g,v._video_muted_===y)return;{const N=v._video_muted_?"mute-video":"unmute-video";de.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(c,", msg: ").concat(N)),Jl("debug",this,"user-info-updated",{uid:c,msg:N}),this.emit(Vh.USER_INFO_UPDATED,c,N)}}const C="audio"===h?v.hasAudio:v.hasVideo;if(m!==C){if(!m&&C)return("audio"===h?v._audioSSRC:v._videoSSRC)?(de.info("[".concat(this._clientId,"] remote user ").concat(c," published ").concat(h)),z1("info",this,"user-published",{uid:v.uid,mediaType:h}),void this.emit(Vh.USER_PUBLISHED,v,h)):void de.warning("[".concat(this._clientId,"] remote user ").concat(c," receive ").concat(h," unmute message  before add stream message, ").concat(h," SSRC doesn't exist yet."));"video"===h&&v._videoTrack&&v._videoTrack._destroy(),this._p2pChannel.muteRemote(v,h),de.info("[".concat(this._clientId,"] remote user ").concat(c," unpublished ").concat(h)),z1("info",this,"user-unpublished",{uid:c,mediaType:h}),this.emit(Vh.USER_UNPUBLISHED,v,h)}}),Y(this,"_handleP2PLost",function(){var c=l(function*(h){if(de.debug("[".concat(n._clientId,"] receive p2p lost"),h),p0("debug",n,"p2p_lost",h),parseInt(h.p2pid,10)!==n.store.p2pId)return de.warning("P2PLost stream not found",h),void p0("warning",n,"p2p_lost","P2PLost stream not found, ".concat(h));yield n._p2pChannel.requestReconnect()});return function(h){return c.apply(this,arguments)}}()),Y(this,"_handleTokenWillExpire",()=>{de.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),p0("debug",this,"token_privilege_will_expire"),this.emit(Vh.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)}),Y(this,"_handleBeforeUnload",c=>{"beforeunload"===c.type&&void 0!==c.returnValue&&""!==c.returnValue||(this.leave(),de.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")),i1("info",["window",this.store.clientId],L_()?"beforeunload":"pagehide"))}),Y(this,"_handleUpdateNetworkQuality",()=>{if("normal"===this._networkQualitySensitivity)return;if(navigator&&void 0!==navigator.onLine&&!navigator.onLine)return void this.emit(Vh.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const c={downlinkNetworkQuality:0,uplinkNetworkQuality:0};c.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),c.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.emit(Vh.NETWORK_QUALITY,c)}),this._codec=e.codec,this._mode=e.mode,this._clientId=x0(5,"client-"),this.store=new DCe(e.codec,e.audioCodec,e.mode,this._clientId),this.store.clientCreated(),e.proxyServer&&this.setProxyServer(e.proxyServer,!0),e.turnServer&&this.setTurnServer(e.turnServer,!0),de.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(o1," build: ").concat(oQ,", mode: ").concat(this._mode,", codec: ").concat(this._codec)),Jl("info",this,"constructor",{version:o1,build:oQ,mode:this._mode,codec:this._codec}),e.clientRoleOptions)try{xne(e.clientRoleOptions),i=Object.assign({},e.clientRoleOptions)}catch(c){de.warning("[".concat(this._clientId,"] ").concat(c.toString())),pl("warning",this,c.toString())}this._statsCollector=new FQ(this.store),this._statsCollector.onStatsException=(c,h,g)=>{de.debug("[".concat(this._clientId,"] receive exception msg, code: ").concat(c,", msg: ").concat(h,", uid: ").concat(g)),z1("debug",this,Vh.EXCEPTION,{code:c,message:h,uid:g}),this.emit(Vh.EXCEPTION,{code:c,msg:h,uid:g})},this._statsCollector.onUploadPublishDuration=(c,h,g,v)=>{const m=this._users.find(C=>C.uid===c);m&&qc.peerPublishStatus(this._sessionId,{subscribeElapse:v,audioPublishDuration:h,videoPublishDuration:g,peer:m._uintid})},this._gateway=new Mbe(this.store,{clientId:this._clientId,mode:this._mode,codec:this._codec,websocketRetryConfig:e.websocketRetryConfig||W0,httpRetryConfig:e.httpRetryConfig||W0,forceWaitGatewayResponse:void 0===e.forceWaitGatewayResponse||e.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:e.role,clientRoleOptions:i}),this._config=e,this._configDistribute=new qbe,this._p2pChannel=new RCe(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents(),this._handleGatewaySignalEvents()}join(e,n,i,c,h){var g=this;return l(function*(){const v=++g._numberOfJoinCount;g.store.joinStart(),c&&(g.store.uid=c);const m="HTTPS"===(Zre||Zre||(Zre=(window.location.protocol.split(":")[0]||"").toUpperCase(),Zre)),C=Lve()?window.isSecureContext:"Browser Not Support";if(!Lve()&&!m||!window.isSecureContext){const K="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser";de.warning(K),Gc("warning",g,K)}const y=Ple();"DISCONNECTED"===g.connectionState&&(g.store.avoidJoinStart=Math.round(Date.now()),de.debug("[".concat(g._clientId,"] set avoidJoinStart to ").concat(g.store.avoidJoinStart)),Gc("debug",g,"join",void 0,"[".concat(g._clientId,"] set avoidJoinStart to ").concat(g.store.avoidJoinStart)));const N=qc.reportApiInvoke(y,{name:zl.JOIN,options:[e,n,i,c],states:{isHttps:m,isSecureContext:C},tag:Gl.TRACER});qc.setAppId(e);try{if(!i&&null!==i)throw new ea(_t.INVALID_PARAMS,"Invalid token: ".concat(i,". If you don not use token, set it to null"));i&&By(i,"token",1,2047),By(e,"appid",1,2047),oY(n),c&&XM(c),h&&By(h,"optionalInfo",1,2047)}catch(K){throw N.onError(K),K}if(de.info("[".concat(g._clientId,"] start join channel ").concat(n,", join number: ").concat(v)),Jl("info",g,"join",{channel:n}),g._leaveMutex.isLocked&&(de.debug("[".concat(g._clientId,"] join: waiting leave operation")),pl("debug",g,"join: waiting leave operation"),(yield g._leaveMutex.lock())(),de.debug("[".concat(g._clientId,"] join: continue")),pl("debug",g,"join: continue")),g._joinAndNotLeaveYet=!0,"DISCONNECTED"!==g.connectionState){const K=new ea(_t.INVALID_OPERATION,"[".concat(g._clientId,"] Client already in connecting/connected state"));throw N.onError(K),K}g._sessionId||(g._sessionId=y,g.store.sessionId=g._sessionId),g._gateway.state="CONNECTING";const k=oz({clientId:g._clientId,appId:e,sid:g._sessionId,cname:n,uid:"string"!=typeof c?c:null,turnServer:g._turnServer,proxyServer:g._proxyServer,token:i||e,cloudProxyServer:g._cloudProxyServerMode,optionalInfo:h,license:g._license,useLocalAccessPoint:g._useLocalAccessPoint},void 0!==g._remoteDefaultVideoStreamType&&{defaultVideoStream:g._remoteDefaultVideoStreamType});if(g._useLocalAccessPoint&&(k.setLocalAPVersion=g._setLocalAPVersion),"string"==typeof c&&(k.stringUid=c,g._uintUid?(k.uid=g._uintUid,g._uintUid=void 0):k.uid=0),"none"!==g._encryptionMode&&g._encryptionSecret){if(k.aesmode=g._encryptionMode,k.aespassword=yield(K=l(function*($){const Z=Mle("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB"),ye=yield window.crypto.subtle.importKey("spki",Z,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),be=yle($),_s=yield window.crypto.subtle.encrypt({name:"RSA-OAEP"},ye,be);return yre(new Uint8Array(_s))}),function($){return K.apply(this,arguments)})(g._encryptionSecret),!g._joinAndNotLeaveYet)throw new ea(_t.INVALID_OPERATION,"[".concat(g._clientId,"] Client already left"));g._encryptionSalt&&(k.aessalt=g._encryptionSalt)}var K;g._startSession(g._sessionId,{channel:n,appId:e});const U=g._sessionId;setTimeout(()=>{"CONNECTING"===g.connectionState&&U===g._sessionId&&qc.joinChannelTimeout(g._sessionId,5)},5e3);try{let K;if(["proxy3","proxy4","proxy5"].includes(k.cloudProxyServer)){const be=ya("PROXY_SERVER_TYPE3");k.proxyServer=Array.isArray(be)?be[0]:be}if(qc.setProxyServer(k.proxyServer),de.setProxyServer(k.proxyServer),rQ(k.proxyServer),g.store.requestAPStart(),k.stringUid&&!k.uid){const be=yield yme(k.stringUid,k,g._axiosCancelSource.token,g._config.httpRetryConfig||W0,g.store);de.debug("getUserAccount Success ".concat(k.stringUid," => ").concat(be)),pl("debug",g,"getUserAccount Success ".concat(k.stringUid," => ").concat(be)),k.uid=be,K=yield vme(k,g._axiosCancelSource.token,g._config.httpRetryConfig||W0,!0,g.store)}else K=yield vme(k,g._axiosCancelSource.token,g._config.httpRetryConfig||W0,!0,g.store);if(!g._joinAndNotLeaveYet)throw new ea(_t.INVALID_OPERATION,"[".concat(g._clientId,"] Client already left"));g.store.requestAPEnd(),setTimeout(()=>{g._configDistribute.startGetConfigDistribute(k,g._axiosCancelSource.token),g._configDistribute.on(Q4.UPDATE_BITRATE_LIMIT,be=>{g._p2pChannel.updateBitrateLimit(be)})},0),g._key=i||e;const Z=K.gatewayInfo;g._joinInfo=oz(oz({},k),{},{cid:Z.cid,uid:k.uid?k.uid:Z.uid,vid:Z.vid,apResponse:Z.res,uni_lbs_ip:Z.uni_lbs_ip,gatewayAddrs:Z.gatewayAddrs});const ye=yield g._joinGateway();if(!g._joinAndNotLeaveYet)throw new ea(_t.INVALID_OPERATION,"[".concat(g._clientId,"] Client already left"));return N.onSuccess(ye),g._appId=e,g._channelName=k.cname,g._uid=ye,g.store.uid=ye,setTimeout(()=>{g._networkQualityInterval&&window.clearInterval(g._networkQualityInterval),g._networkQualityInterval=window.setInterval(g._handleUpdateNetworkQuality,2e3),window.addEventListener(L_()?"beforeunload":"pagehide",g._handleBeforeUnload)},0),de.info("[".concat(g._clientId,"] Joining channel success: ").concat(n)),Jl("info",g,"join",n,"success"),setTimeout(()=>{ya("USE_NEW_LOG")?iQ():de.startUpload()},5e3),g.store.joinEnd(),KM.includes(V=g)||KM.push(V),ye}catch(K){const $=Array.isArray(K)?K[0]:K;throw de.error("[".concat(g._clientId,"] join number: ").concat(v,", Joining channel failed, rollback"),$),Jl("error",g,"join",n,$.toString()),$.code!==_t.OPERATION_ABORTED&&g._numberOfJoinCount===v&&(g._gateway.state="DISCONNECTED",g._reset()),N.onError($),$}var V})()}_joinGateway(){if(!this._joinInfo||!this._key)throw new ea(_t.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!("disabled"!==this._joinInfo.cloudProxyServer||this._joinInfo.proxyServer||!ya("JOIN_WITH_FALLBACK_SIGNAL_PROXY"))).then(e=>e).catch(e=>{if(e.code===_t.INIT_WEBSOCKET_TIMEOUT)return this._gateway.leave(!0,Rp.FALLBACK),e;if(e.code===_t.INIT_DATACHANNEL_TIMEOUT)return this._gateway.leave(!0,Rp.FALLBACK),e;throw e}).then(e=>{if(e instanceof ea){if(e.code===_t.INIT_WEBSOCKET_TIMEOUT){if(de.info("[".concat(this._clientId,"] join timeout, fallback to proxy")),!this._joinInfo||!this._key)throw new ea(_t.INVALID_OPERATION);this._joinInfo.cloudProxyServer="fallback",this._cloudProxyServerMode="fallback",this.store.cloudProxyServerMode="fallback";const n=ya("PROXY_SERVER_TYPE3");if(Array.isArray(n))if(this._joinInfo.apUrl){const c=new YAe(this._joinInfo.apUrl).host.split("."),h=c.slice(c.length-2).join(".");n.forEach(g=>{this._joinInfo&&g.includes(h)&&(this._joinInfo.proxyServer=g)}),this._joinInfo.proxyServer||(this._joinInfo.proxyServer=n[0])}else this._joinInfo.proxyServer=n[0];else this._joinInfo.proxyServer=n;const i=ya("LOG_UPLOAD_SERVER").match(/.+:(\d{1,5})$/);return i&&i[1]&&"443"!==i[1]&&(de.setProxyServer(this._joinInfo.proxyServer),rQ(this._joinInfo.proxyServer)),"443"!==ya("STATS_COLLECTOR_PORT").toString()&&qc.setProxyServer(this._joinInfo.proxyServer),qc.reportApiInvoke(this._sessionId,{name:zl.JOIN_FALLBACK_TO_PROXY,options:[this._joinInfo.proxyServer],tag:Gl.TRACER}).onSuccess(),this.emit(Vh.JOIN_FALLBACK_TO_PROXY,this._joinInfo.proxyServer),this._gateway.join(this._joinInfo,this._key)}if(de.info("[".concat(this._clientId,"] join by datachannel timeout, fallback to websocket")),!this._joinInfo||!this._key)throw new ea(_t.INVALID_OPERATION);return qc.reportApiInvoke(this._sessionId,{name:zl.DATACHANNEL_FAILBACK,options:[this.store.clientId],tag:Gl.TRACER}).onSuccess(),this._joinGateway()}return e}).then(e=>e)}leave(){var e=this;return l(function*(){const n=qc.reportApiInvoke(e._sessionId,{name:zl.LEAVE,options:[],tag:Gl.TRACER});de.info("[".concat(e._clientId,"] Leaving channel")),Jl("info",e,"leave"),window.removeEventListener(L_()?"beforeunload":"pagehide",e._handleBeforeUnload),e._reset(),function(c){const h=KM.indexOf(c);-1!==h&&KM.splice(h,1)}(e);const i=yield e._leaveMutex.lock();if("DISCONNECTED"===e.connectionState)return de.info("[".concat(e._clientId,"] Leaving channel repeated, success")),i(),n.onSuccess();yield e._gateway.leave("CONNECTED"!==e.connectionState),de.info("[".concat(e._clientId,"] Leaving channel success")),Jl("info",e,"leave",void 0,"success"),e._joinAndNotLeaveYet=!1,e.store.resetJoinChannelServiceRecords(),i(),n.onSuccess()})()}publish(e){var n=arguments,i=this;return l(function*(){let c=!(n.length>1&&void 0!==n[1])||n[1];Array.isArray(e)||(e=[e]);const h=qc.reportApiInvoke(i._sessionId,{name:zl.PUBLISH,options:e.map(v=>v?Object(v).toString():"null"),tag:Gl.TRACER});if(0===e.length){const v=new ea(_t.INVALID_PARAMS,"track list is empty");return h.onError(v),v.throw()}if("audience"===i._gateway.role){const v=new ea(_t.INVALID_OPERATION,"audience can not publish stream");return h.onError(v),v.throw()}for(const v of e){if(!(v instanceof _le)){const m=new ea(_t.INVALID_PARAMS,"parameter is not local track");return h.onError(m),m.throw()}if(!v._enabled&&c){const m=new ea(_t.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(v.getTrackId()));return h.onError(m),m.throw()}}de.info("[".concat(i._clientId,"] Publishing tracks, id ").concat(e.map(v=>"".concat(v.getTrackId()," ")))),Jl("info",i,"publish",e.map(v=>"".concat(v.getTrackId()))),yield i._configDistribute.awaitConfigDistributeComplete(),c&&e.forEach(v=>{const m=i._configDistribute.getBitrateLimit();v instanceof ty&&m&&v.setBitrateLimit(m.uplink)});const g=yield i._publishMutex.lock();try{yield i._publishHighStream(e),h.onSuccess(e.map(v=>v.trackMediaType+":"+v.getTrackLabel()).toString()),de.info("[".concat(i._clientId,"] Publish success, id ").concat(e.map(v=>"".concat(v.getTrackId()," ")))),Jl("info",i,"publish",e.map(v=>"".concat(v.getTrackId())),"success")}catch(v){throw h.onError(v),de.error("[".concat(i._clientId,"] publish error"),v.toString()),Jl("error",i,"publish",void 0,v.toString()),v}finally{g()}})()}unpublish(e){var n=this;return l(function*(){if(!n._joinInfo||void 0===n._uid)throw new ea(_t.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");e?Array.isArray(e)||(e=[e]):e=n._p2pChannel.getAllTracks(!0);const i=qc.reportApiInvoke(n._sessionId,{name:zl.UNPUBLISH,options:e.map(h=>h.getTrackId()),tag:Gl.TRACER});de.info("[".concat(n._clientId,"] Unpublish tracks, tracks ").concat(e.map(h=>"".concat(h.getTrackId()," "))," ")),Jl("info",n,"unpublish",e.map(h=>"".concat(h.getTrackId())));const c=yield n._publishMutex.lock();try{const h=yield n._p2pChannel.unpublish(e);h&&(yield n._gateway.unpublish(h,n._uid)),de.info("[".concat(n._clientId,"] Unpublish success,tracks ").concat(e.map(g=>"".concat(g.getTrackId())))),Jl("info",n,"unpublish",e.map(g=>"".concat(g.getTrackId())),"success"),i.onSuccess()}catch(h){throw i.onError(h),de.error("[".concat(n._clientId,"] unpublish error"),h.toString()),Jl("error",n,"unpublish",void 0,h.toString()),h}finally{c&&c()}})()}subscribe(e,n){var i=this;return l(function*(){return i._subscribe(e,n)})()}_subscribe(e,n,i){var c=this;return l(function*(){qy(n,"mediaType",["audio","video"]);const h=qc.reportApiInvoke(c._sessionId,{name:zl.SUBSCRIBE,options:[e.uid,n],tag:Gl.TRACER});if(!c._joinInfo){const N=new ea(_t.INVALID_OPERATION,"Can't subscribe stream, not joined");throw h.onError(N),N}if("CONNECTED"!==c.connectionState&&"RECONNECTING"!==c.connectionState){const N=new ea(_t.INVALID_OPERATION,"Can't subscribe stream in ".concat(c.connectionState," state"));throw h.onError(N),N}if(!c._users.find(N=>N===e)){const N=new ea(_t.INVALID_REMOTE_USER,"user is not in the channel");throw de.error("[".concat(c._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),Jl("error",c,"subscribe",e.uid,"this user is not in the channel"),h.onError(N),N}if(!e.hasAudio&&!e.hasVideo){const N=new ea(_t.INVALID_REMOTE_USER,"user is not published");throw de.error("[".concat(c._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),Jl("error",c,"subscribe",e.uid,"this user is not published"),h.onError(N),N}if(!(i||("audio"!==n||e.hasAudio&&void 0!==e._audioSSRC)&&("video"!==n||e.hasVideo&&void 0!==e._videoSSRC))){const N=new ea(_t.REMOTE_USER_IS_NOT_PUBLISHED);throw de.error("[".concat(c._clientId,"] can not subscribe ").concat(e.uid," with mediaType ").concat(n,", remote track is not published")),Jl("error",c,"subscribe",e.uid,"mediaType ".concat(n,", remote track is not published")),h.onError(N),N}const g="audio"===n?e._audioSSRC:e._videoSSRC,v="audio"===n?e._audioOrtc:e._videoOrtc,m="video"===n?e._rtxSsrcId:void 0,C={stream_type:"audio"===n?Sh.AUDIO:Sh.VIDEO,ssrcId:g},y=yield c._subscribeMutex.lock();de.info("[".concat(c._clientId,"] subscribe user ").concat(e.uid,", mediaType: ").concat(n)),Jl("info",c,"subscribe",{uid:e.uid,mediaType:n});try{if(yield c._p2pChannel.hasRemoteMediaWithLock(e,n))yield c._p2pChannel.unmuteRemote(e,n);else try{cT.markSubscribeStart(c.store.clientId,g),c.store.subscribe(e.uid,n,Date.now()),yield c._p2pChannel.subscribe(e,n,g,m,v);try{yield c._gateway.subscribe(e.uid,C,!0)}catch(k){if((null==k?void 0:k.code)!==_t.WS_ABORT)throw yield c._p2pChannel.unsubscribe(e,n),k;yield c._p2pChannel.unsubscribe(e,n,!0),c._p2pChannel.setPendingRemoteMedia(e,n)}c.store.subscribe(e.uid,n,void 0,Date.now()),c._p2pChannel.reportSubscribeEvent(!0,null,e,n)}catch(k){throw c._p2pChannel.reportSubscribeEvent(!1,null==k?void 0:k.code,e,n),k}de.info("[".concat(c._clientId,"] subscribe success user ").concat(e.uid,", mediaType: ").concat(n)),Jl("info",c,"subscribe",{uid:e.uid,mediaType:n},"success"),c._defaultStreamFallbackType&&c.setStreamFallbackOption(e.uid,c._defaultStreamFallbackType).catch(k=>{de.warning("[".concat(c._clientId,"] auto set fallback failed"),k),pl("warning",c,"auto set fallback failed, ".concat(k.toString()))});const N="audio"===n?e._audioTrack:e._videoTrack;if(!N){const k=new ea(_t.UNEXPECTED_ERROR,"can not find remote track in user object");return h.onError(k),k.throw()}return h.onSuccess(N.getTrackId()),N}catch(N){throw h.onError(N),de.error("[".concat(c._clientId,"] subscribe user ").concat(e.uid," error"),N),Jl("error",c,"subscribe",{uid:e.uid,mediaType:n},N.toString()),N}finally{y()}})()}massSubscribe(e){var n=this;return l(function*(){$T(e,"subscribeList");const i=qc.reportApiInvoke(n._sessionId,{name:zl.MASS_SUBSCRIBE,options:e.map(y=>{let{user:N,mediaType:k}=y;return[null==N?void 0:N.uid,k]}),tag:Gl.TRACER});if(!n._joinInfo){const y=new ea(_t.INVALID_OPERATION,"Can't subscribe stream, not joined");throw i.onError(y),y}if("CONNECTED"!==n.connectionState&&"RECONNECTING"!==n.connectionState){const y=new ea(_t.INVALID_OPERATION,"Can't subscribe stream in ".concat(n.connectionState," state"));throw i.onError(y),y}const c=Date.now(),h=new Map,g=yield n._subscribeMutex.lock();de.info("[".concat(n._clientId,"]start massSubscribe user ").concat(e.map(y=>{let{user:N,mediaType:k}=y;return"user: ".concat(null==N?void 0:N.uid,", mediaType: ").concat(k)}).join("; "))),Jl("info",n,"massSubscribe",e);const v=(e=[...e]).map(y=>{let{user:N,mediaType:k}=y;return{user:N,mediaType:k}}),m=yield n._p2pChannel.globalLock();try{var C;for(let N=e.length-1;N>=0;N--){const k=e[N],{user:U,mediaType:V}=k;if(qy(V,"mediaType",["audio","video"]),!U){const Z=new ea(_t.INVALID_PARAMS,"user property does not exist in subscribeList item");throw de.error("[".concat(n._clientId,"] user property does not exist in subscribeList item")),i.onError(Z),Z}if(!n._users.find(Z=>Z===U)){const Z=new ea(_t.INVALID_REMOTE_USER,"user is not in the channel");de.error("[".concat(n._clientId,"] can not massSubscribe ").concat(U.uid,", this user is not in the channel")),Jl("error",n,"massSubscribe",U.uid,"this user is not in the channel"),v[N].error=Z,e.splice(N,1);continue}if("audio"===V&&(!U.hasAudio||void 0===U._audioSSRC)||"video"===V&&(!U.hasVideo||void 0===U._videoSSRC)){const Z=new ea(_t.REMOTE_USER_IS_NOT_PUBLISHED);de.error("[".concat(n._clientId,"] can not subscribe ").concat(U.uid," with mediaType ").concat(V,", remote user is not published")),Jl("error",n,"subscribe",U.uid,"mediaType ".concat(V,", remote user is not published")),v[N].error=Z,e.splice(N,1);continue}const K=c0.Video|c0.LwoVideo,$=h.get(U);if($){if("video"===V?$&K:$&c0.Audio){e.splice(N,1),de.warning("repeat massSubscribe user:".concat(U.uid,", mediaType:").concat(V," twice"));continue}h.set(U,$|("video"===V?K:c0.Audio))}else h.set(U,"video"===V?K:c0.Audio)}for(let N=e.length-1;N>=0;N--){const k=e[N],{user:U,mediaType:V}=k,K=c0.Video|c0.LwoVideo;if(n._p2pChannel.hasRemoteMedia(U,V)){yield n._p2pChannel.unmuteRemoteNoLock(U,V);const $=h.get(U);h.set(U,"video"===V?$^K:$^c0.Audio),e.splice(N,1)}}n.store.massSubscribe(e.map(N=>({userId:N.user.uid,type:N.mediaType})),c);const y=_A(C=Array.from(h.entries())).call(C,(N,k)=>{let[U,V]=k;if(0===V)return N;const K={stream_id:U.uid,stream_type:V};return V&c0.Audio&&(K.audio_ssrc=U._audioSSRC),V&c0.Video&&(K.video_ssrc=U._videoSSRC),N.push(K),N},[]);try{e.length>0&&(yield n._p2pChannel.massSubscribeNoLock(e.map(k=>{let{user:U,mediaType:V}=k;return{user:U,mediaType:V,ssrcId:V===Sh.VIDEO?U._videoSSRC:U._audioSSRC,rtxSsrcId:U._rtxSsrcId}})));const N=new Map;if(y.length>0){const k=yield n._gateway.subscribeAll(y,!0);((null==k?void 0:k.users)||[]).forEach(U=>{let{stream_id:V,video_error_code:K,audio_error_code:$,error_code:Z}=U;(K||$||Z)&&N.set(V,{video_error_code:K,audio_error_code:$,error_code:Z})})}if(Array.from(N.entries()).length>0){const k=Array.from(N.entries()).map(U=>{let V,[K,$]=U;return $.error_code||$.video_error_code&&$.audio_error_code?V=void 0:$.video_error_code?V=Sh.VIDEO:$.audio_error_code&&(V=Sh.AUDIO),{user:n.remoteUsers.find(Z=>Z.uid===K),mediaType:V}});yield n._p2pChannel.massUnsubscribeNoLock(k)}for(const k of v){const U=N.get(k.user.uid);if(U){const V=U.error_code||"audio"===k.mediaType&&U.audio_error_code||"video"===k.mediaType&&U.video_error_code;if(V){const K=JY(V);de.error("user:".concat(k.user.uid," mediaType:").concat(k.mediaType," has massSubscribe error ").concat(K.desc)),k.error=new ea(_t.SUBSCRIBE_FAILED,"code ".concat(V,": ").concat(K.desc))}}k.error||(k.track="video"===k.mediaType?k.user.videoTrack:k.user.audioTrack)}return n.store.massSubscribe(v.filter(k=>!k.error).map(k=>({userId:k.user.uid,type:k.mediaType})),void 0,Date.now()),v.forEach(k=>{var U;qc.subscribe(n.store.sessionId,{succ:!!k.error,ec:(null===(U=k.error)||void 0===U?void 0:U.code)||null,video:k.mediaType===Sh.VIDEO,audio:k.mediaType===Sh.AUDIO,peerid:k.user.uid,subscribeRequestid:k.mediaType===Sh.VIDEO?k.user._videoSSRC:k.user._audioSSRC,p2pid:n.store.p2pId,eventElapse:Math.floor(performance.now()-c)},!0)}),i.onSuccess(),de.info("[".concat(n._clientId,"] massSubscribe success ").concat(e.map(k=>{let{user:U,mediaType:V}=k;return"user: ".concat(null==U?void 0:U.uid,", mediaType: ").concat(V)}).join("; "))),Jl("info",n,"massSubscribe",e,"success"),v}catch(N){throw yield n._p2pChannel.massUnsubscribeNoLock(e),i.onError(N),N}}finally{m(),g()}})()}unsubscribe(e,n){var i=this;return l(function*(){if(n&&qy(n,"mediaType",["audio","video"]),!i._joinInfo)throw new ea(_t.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");const c=qc.reportApiInvoke(i._sessionId,{name:zl.UNSUBSCRIBE,options:[e.uid,n],tag:Gl.TRACER});if(!i._users.find(h=>h===e)){const h=new ea(_t.INVALID_REMOTE_USER,"user is not in the channel");throw de.error("[".concat(i._clientId,"] can not unsubscribe ").concat(e.uid,", user is not in the channel")),Jl("error",i,"unsubscribe",{uid:e.uid,mediaType:n},"user is not in the channel"),c.onError(h),h}de.info("[".concat(i._clientId,"] unsubscribe uid: ").concat(e.uid,", mediaType: ").concat(n)),Jl("info",i,"unsubscribe",{uid:e.uid,mediaType:n});try{const h=yield i._p2pChannel.unsubscribe(e,n);h&&(yield i._gateway.unsubscribe(h,e.uid)),de.info("[".concat(i._clientId,"] unsubscribe success uid: ").concat(e.uid,", mediaType: ").concat(n)),Jl("info",i,"unsubscribe",{uid:e.uid,mediaType:n},"success"),c.onSuccess()}catch(h){if(h.code===_t.DISCONNECT_P2P)return de.warning("disconnecting p2p, abort unsubscribe request."),void c.onSuccess();throw de.error("[".concat(i._clientId,"] unsubscribe user ").concat(e.uid," error"),h.toString()),Jl("error",i,"unsubscribe",{uid:e.uid,mediaType:n},h.toString()),c.onError(h),h}})()}massUnsubscribe(e){var n=this;return l(function*(){$T(e,"unsubscribeList");const i=qc.reportApiInvoke(n._sessionId,{name:zl.UNSUBSCRIBE,options:e.map(h=>{let{user:g,mediaType:v}=h;return{uid:null==g?void 0:g.uid,mediaType:v}}),tag:Gl.TRACER});if(!n._joinInfo){const h=new ea(_t.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");throw i.onError(h),h}de.info("[".concat(n._clientId,"] start massUnsubscribe ").concat(e.map(h=>{let{user:g,mediaType:v}=h;return"user: ".concat(null==g?void 0:g.uid,", mediaType: ").concat(v,";")}).join())),Jl("info",n,"massUnsubscribe",e),e=[...e];const c=new Map;for(let h=e.length-1;h>=0;h--){const{user:g,mediaType:v}=e[h];if(!g){const C=new ea(_t.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw de.error("[".concat(n._clientId,"] user property does not exist in unsubscribeList item")),i.onError(C),C}if(qy(v,"mediaType",["video","audio",void 0]),!n._users.find(C=>C===g)){de.warning("[".concat(n._clientId,"] can not unsubscribe ").concat(g.uid,", user is not in the channel")),Jl("error",n,"unsubscribe",{uid:g.uid,mediaType:v},"user is not in the channel"),e.splice(h,1);continue}const m=c0.Video|c0.LwoVideo;if(c.has(g)){const C=c.get(g);let y;switch(v){case"video":y=C&m;break;case"audio":y=C&c0.Audio;break;default:y=C&(c0.Audio|m)}if(y){de.warning("repeat massUnsubscribe user:".concat(g.uid,",mediaType:").concat(v," twice.")),e.splice(h,1);continue}v?"audio"===v?c.set(g,C|c0.Audio):"video"===v&&c.set(g,C|m):c.set(g,C|c0.Audio|m)}else v?"audio"===v?c.set(g,c0.Audio):"video"===v&&c.set(g,m):c.set(g,c0.Audio|m)}try{const h=yield n._p2pChannel.massUnsubscribe(e);h&&(yield n._gateway.massUnsubscribe(h)),de.info("[".concat(n._clientId,"] massUnsubscribe success ").concat(e.map(g=>{let{user:v,mediaType:m}=g;return"user: ".concat(null==v?void 0:v.uid,", mediaType: ").concat(m,";")}).join())),Jl("info",n,"massUnsubscribe",e,"success"),i.onSuccess()}catch(h){if(h.code===_t.DISCONNECT_P2P)return de.warning("disconnecting p2p, abort unsubscribe request."),void i.onSuccess();throw de.error("[".concat(n._clientId,"] massUnsubscribe error"),h.toString()),Jl("error",n,"massUnsubscribe",e,h.toString()),i.onError(h),h}})()}setLowStreamParameter(e){!function(c){if(!c)throw new ea(_t.INVALID_PARAMS);Fg(c.width)||iY(c.width,"streamParameter.width"),Fg(c.height)||iY(c.height,"streamParameter.height"),Fg(c.framerate)||iY(c.framerate,"streamParameter.framerate"),Fg(c.bitrate)||yp(c.bitrate,"streamParameter.bitrate")}(e);const n=qc.reportApiInvoke(this._sessionId,{name:zl.SET_LOW_STREAM_PARAMETER,options:[e],tag:Gl.TRACER});(!e.width&&e.height||e.width&&!e.height)&&(de.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),pl("warning",this,"The width and height parameters take effect only when both are set")),de.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(e)),Jl("info",this,"setLowStreamParameter",e);const i=this._configDistribute.getLowStreamConfigDistribute();i&&i.bitrate&&e.bitrate&&i.bitrate<e.bitrate&&(e.bitrate=i.bitrate),this._lowStreamParameter=e,n.onSuccess()}enableDualStream(){var e=this;return l(function*(){const n=qc.reportApiInvoke(e._sessionId,{name:zl.ENABLE_DUAL_STREAM,options:[],tag:Gl.TRACER});if(!dy().supportDualStream){qc.streamSwitch(e._sessionId,{lts:Date.now(),isdual:!0,succ:!1});const i=new ea(_t.NOT_SUPPORTED,"Your browser is not support dual stream");throw n.onError(i),i}if(e._isDualStreamEnabled){const i=new ea(_t.INVALID_OPERATION,"Dual stream is already enabled");throw n.onError(i),i}if(e._p2pChannel.canPublishLowStream())try{yield e._publishLowStream()}catch(i){throw qc.streamSwitch(e._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),n.onError(i),i}e._isDualStreamEnabled=!0,qc.streamSwitch(e._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),de.info("[".concat(e._clientId,"] enable dual stream")),Jl("info",e,"enableDualStream"),n.onSuccess()})()}disableDualStream(){var e=this;return l(function*(){if(!e._isDualStreamEnabled)return;if(!e._joinInfo)throw new ea(_t.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");const n=qc.reportApiInvoke(e._sessionId,{name:zl.DISABLE_DUAL_STREAM,options:[],tag:Gl.TRACER});if(e._p2pChannel.getLocalMedia(yl.LocalVideoLowTrack))try{const i=yield e._p2pChannel.unpublishLowStream();i&&(yield e._gateway.unpublish(i,e._joinInfo.stringUid||e._joinInfo.uid))}catch(i){throw qc.streamSwitch(e._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),n.onError(i),i}e._isDualStreamEnabled=!1,qc.streamSwitch(e._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),de.info("[".concat(e._clientId,"] disable dual stream")),Jl("info",e,"disableDualStream"),n.onSuccess()})()}setClientRole(e,n){var i=this;return l(function*(){var h;qy(h=e,"role",["audience","host"]),n&&xne(n);const c=qc.reportApiInvoke(i._sessionId,{name:zl.SET_CLIENT_ROLE,options:[e,n],tag:Gl.TRACER});if("rtc"===i._mode){de.warning("[".concat(i._clientId,"]rtc mode can not use setClientRole")),Jl("warning",i,"setClientRole",e,"rtc mode can not use setClientRole");const h=new ea(_t.INVALID_OPERATION,"rtc mode can not use setClientRole");return c.onError(h),h.throw()}if(n&&n.level&&"host"===e){const h=new ea(_t.INVALID_OPERATION,"host mode can not set audience latency level");return c.onError(h),h.throw()}try{if("audience"===e&&i._p2pChannel.hasLocalMedia()){const h=new ea(_t.INVALID_OPERATION,"can not set client role to audience when publishing stream");return c.onError(h),h.throw()}yield i._gateway.setClientRole(e,n),de.info("[".concat(i._clientId,"] set client role to ").concat(e,", level: ").concat(n&&n.level)),Jl("info",i,"setClientRole",{role:e,level:n&&n.level}),c.onSuccess()}catch(h){throw c.onError(h),h}})()}setProxyServer(e,n){if(By(e,"proxyServer"),!n){if("DISCONNECTED"!==this.connectionState)throw new ea(_t.INVALID_OPERATION,"Set proxy server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new ea(_t.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=e,qc.setProxyServer(this._proxyServer),de.setProxyServer(this._proxyServer),rQ(this._proxyServer),de.info("[".concat(this._clientId,"] Set proxy server ").concat(n?"by initialize call":""," success.")),Jl("info",this,"setProxyServer",[...arguments],"success")}setTurnServer(e,n){if(Array.isArray(e)||(e=[e]),!n){if("DISCONNECTED"!==this.connectionState)throw new ea(_t.INVALID_OPERATION,"Set turn server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new ea(_t.INVALID_OPERATION,"You have already set the proxy")}if(j4(e))return this._turnServer={servers:e,mode:"original-manual"},de.info("[".concat(this._clientId,"] Set original turnserver ").concat(n?"by initialize call":""," success: ").concat(e.map(i=>i.urls).join(","),".")),void Jl("info",this,"setOriginalTurnServer",[...arguments],"success");e.forEach(i=>Pne(i)),this._turnServer={servers:e,mode:"manual"},de.info("[".concat(this._clientId,"] Set turnserver ").concat(n?"by initialize call":""," success.")),Jl("info",this,"setTurnServer",[...arguments],"success")}setLicense(e){if("DISCONNECTED"!==this.connectionState)throw new ea(_t.INVALID_OPERATION,"you should set license before join channel");if(By(e,"license",32,32),!/^[A-Za-z\d]+$/.test(e))throw new ea(_t.INVALID_PARAMS,"license should only contains characters from A-Z a-z 0-9");this._license=e,de.info("[".concat(this._clientId,"] set license success"),e)}startProxyServer(e){const n=qc.reportApiInvoke(this._sessionId,{name:zl.START_PROXY_SERVER,options:[],tag:Gl.TRACER});if("DISCONNECTED"!==this.connectionState){const h=new ea(_t.INVALID_OPERATION,"Start proxy server before join channel");throw n.onError(h),h}if(this._proxyServer||"manual"===this._turnServer.mode||this._useLocalAccessPoint){const h=new ea(_t.INVALID_OPERATION,"You have already set the proxy");throw n.onError(h),h}const i=[3,4,5];let c;switch(void 0===e&&(e=3),e){case 1:case 2:throw new ea(_t.NOT_SUPPORTED,"proxy mode 1/2 has been deprecated and not supported.");case 3:c="proxy3";break;case 4:c="proxy4";break;case 5:c="proxy5";break;default:{const h=new ea(_t.INVALID_PARAMS,"proxy server mode must be ".concat(i.join("|")));throw n.onError(h),h}}this._cloudProxyServerMode=c,this.store.cloudProxyServerMode=c,de.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),Jl("info",this,"startProxyServer",this._cloudProxyServerMode),n.onSuccess()}stopProxyServer(){const e=qc.reportApiInvoke(this._sessionId,{name:zl.STOP_PROXY_SERVER,options:[],tag:Gl.TRACER});if("DISCONNECTED"!==this.connectionState)throw new ea(_t.INVALID_OPERATION,"Stop proxy server after leave channel");qc.setProxyServer(),de.setProxyServer(),rQ(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",de.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),Jl("info",this,"stopProxyServer",this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]},e.onSuccess()}setLocalAccessPointsV2(e){if(!e.accessPoints)throw new ea(_t.INVALID_PARAMS,"accessPoints is required.");$T(e.accessPoints.serverList,"accessPoints.serverList"),By(e.accessPoints.domain,"accessPoints.domain");const n=(U,V)=>{yp(U,V,0,65535,!0)};let i=443;if(e.accessPoints.port&&(n(e.accessPoints.port,"accessPoints.port"),i=e.accessPoints.port),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new ea(_t.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");ya("CLOSE_AFB_FOR_LOCAL_AP")&&(Ag("JOIN_WITH_FALLBACK_SIGNAL_PROXY",!1),Ag("JOIN_WITH_FALLBACK_MEDIA_PROXY",!1));const c=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,h=e.accessPoints.domain,g=e.accessPoints.serverList.map(U=>c.test(U)?"".concat(U.replace(/\./g,"-"),".").concat(h):U),v=g.map(U=>"".concat(U,":").concat(i));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,Ag("WEBCS_DOMAIN",v),Ag("WEBCS_DOMAIN_BACKUP_LIST",v),Ag("GATEWAY_DOMAINS",[h]),e.report&&e.report.hostname&&Array.isArray(e.report.hostname)&&e.report.hostname.length?($T(e.report.hostname,"report.hostname"),Ag("EVENT_REPORT_DOMAIN",e.report.hostname[0]),Ag("EVENT_REPORT_BACKUP_DOMAIN",e.report.hostname[1]||e.report.hostname[0])):(Ag("EVENT_REPORT_DOMAIN",g[0]),Ag("EVENT_REPORT_BACKUP_DOMAIN",g[1]||g[0]));let m=6443;e.report&&e.report.port&&(n(e.report.port,"report.port"),m=e.report.port),Ag("STATS_COLLECTOR_PORT",m),Ag("ENABLE_EVENT_REPORT",!!e.report);let C="";e.log&&e.log.hostname&&Array.isArray(e.log.hostname)&&e.log.hostname.length?($T(e.log.hostname,"log.hostname"),C=e.log.hostname[0]):C=g[0];let y=6444;e.log&&e.log.port&&(n(e.log.port,"log.port"),y=e.log.port),Ag("LOG_UPLOAD_SERVER","".concat(C,":").concat(y));let N=[];e.cds&&e.cds.hostname&&Array.isArray(e.cds.hostname)&&e.cds.hostname.length?($T(e.cds.hostname,"cds.hostname"),N=e.cds.hostname):N=g;let k=443;e.cds&&e.cds.port&&(n(e.cds.port,"cds.port"),k=e.cds.port),Ag("CDS_AP",N.map(U=>"".concat(U,":").concat(k))),Ag("ENABLE_CONFIG_DISTRIBUTE",!!e.cds),de.info("set local access point v2 success"),Jl("info",this,"setLocalAccessPointsV2")}setLocalAccessPoints(e,n){if($T(e,"serverList"),By(n,"domain"),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new ea(_t.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const i=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;e=e.map(c=>i.test(c)?"".concat(c.replace(/\./g,"-"),".").concat(n):c),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,Ag("WEBCS_DOMAIN",e),Ag("WEBCS_DOMAIN_BACKUP_LIST",e),Ag("GATEWAY_DOMAINS",[n]),Ag("EVENT_REPORT_DOMAIN",e[0]),Ag("EVENT_REPORT_BACKUP_DOMAIN",e[1]||e[0]),Ag("LOG_UPLOAD_SERVER","".concat(e[0],":6444")),de.info("set local access point success"),Jl("info",this,"setLocalAccessPoints")}setRemoteDefaultVideoStreamType(e){var n=this;return l(function*(){if(qy(e,"streamType",[0,1]),n._remoteDefaultVideoStreamType=e,n._joinInfo)try{yield n._gateway.setDefaultRemoteVideoStreamType(e),n._joinInfo.defaultVideoStream=n._remoteDefaultVideoStreamType}catch(i){throw de.error("[".concat(n._clientId,"] set default remote video stream type error"),i.toString()),i}else de.debug("haven't joined yet, cache remoteDefaultVideoStreamType ".concat(e))})()}setRemoteVideoStreamType(e,n){var i=this;return l(function*(){qy(n,"streamType",[0,1]);const c=qc.reportApiInvoke(i._sessionId,{name:zl.SET_REMOTE_VIDEO_STREAM_TYPE,options:[e,n],tag:Gl.TRACER});try{yield i._gateway.setRemoteVideoStreamType(e,n),setTimeout(()=>{const h=i._users.find(g=>g.uid===e);h&&h.videoTrack&&h.videoTrack.updateMediaStreamTrackResolution()},2e3)}catch(h){throw c.onError(h),de.error("[".concat(i._clientId,"] set remote video stream type error"),h.toString()),Jl("error",i,"setRemoteVideoStreamType",void 0,h.toString()),h}de.info("[".concat(i._clientId,"] set remote ").concat(e," video stream type to ").concat(n)),Jl("info",i,"setRemoteVideoStreamType",{uid:e,streamType:n}),i._remoteStreamTypeCacheMap.set(e,n),c.onSuccess()})()}setStreamFallbackOption(e,n){var i=this;return l(function*(){qy(n,"fallbackType",[0,1,2]);const c=qc.reportApiInvoke(i._sessionId,{name:zl.SET_STREAM_FALLBACK_OPTION,options:["too long to show",n],tag:Gl.TRACER});try{yield i._gateway.setStreamFallbackOption(e,n)}catch(h){throw c.onError(h),de.error("[".concat(i._clientId,"] set stream fallback option"),h.toString()),Jl("error",i,"setStreamFallbackOption",void 0,h.toString()),h}de.info("[".concat(i._clientId,"] set remote ").concat(e," stream fallback type to ").concat(n)),Jl("info",i,"setStreamFallbackOption",{uid:e,fallbackType:n}),i._streamFallbackTypeCacheMap.set(e,n),c.onSuccess()})()}setEncryptionConfig(e,n,i){const c=qc.reportApiInvoke(this._sessionId,{name:zl.SET_ENCRYPTION_CONFIG,options:[e],tag:Gl.TRACER});try{if(qy(h=e,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"]),By(n,"secret"),["aes-128-gcm2","aes-256-gcm2"].includes(e)){if(!i||!(i instanceof Uint8Array&&32===i.length))throw new ea(_t.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(i)throw new ea(_t.INVALID_PARAMS,"current encrypt mode does not need salt");new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'\"|{}\\[\\]])(?=.{8,})").test(n)||(de.warning("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      "),pl("warning",this,"The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      ")),this._encryptionMode=e,this._encryptionSecret=n,i&&(this._encryptionSalt=yre(i)),c.onSuccess()}catch(h){throw c.onError(h),h}var h}renewToken(e){var n=this;return l(function*(){By(e,"token",1,2047);const i=qc.reportApiInvoke(n._sessionId,{name:zl.RENEW_TOKEN,options:[e],tag:Gl.TRACER});if(!n._key||!n._joinInfo){const g=new ea(_t.INVALID_OPERATION,"renewToken should not be called before user join");return i.onError(g),g.throw()}const c=n._key;n._key=e,n._joinInfo&&(n._joinInfo.token=e);const h=yield n._renewTokenMutex.lock();try{if(ya("USE_NEW_TOKEN")){de.debug("start renew token with ticket from unilbs"),Jl("debug",n,"renewToken","unilbs");const g=yield function Hbe(e,n,i){return Rde.apply(this,arguments)}(n._joinInfo,n._axiosCancelSource.token,n._config.httpRetryConfig||W0);de.debug("[".concat(n._clientId,"] get ticket from unilbs success")),Jl("debug",n,"renewToken","unilbs","success"),yield n._gateway.renewToken({token:e,ticket:g})}else de.debug("start renew token without ticket"),Jl("debug",n,"renewToken"),yield n._gateway.renewToken({token:e});de.debug("[".concat(n._clientId,"] renewToken success")),Jl("debug",n,"renewToken",void 0,"success"),i.onSuccess()}catch(g){throw n._key=c,n._joinInfo.token=c,i.onError(g),de.error("[".concat(n._clientId,"] renewToken failed"),g.toString()),Jl("error",n,"renewToken",void 0,g.toString()),g}finally{h()}})()}enableAudioVolumeIndicator(){const e=qc.reportApiInvoke(this._sessionId,{name:zl.ENABLE_AUDIO_VOLUME_INDICATOR,options:[],tag:Gl.TRACER});if(this._audioVolumeIndicationInterval)return de.warning("you have already enabled audio volume indicator!"),Jl("warning",this,"enableAudioVolumeIndicator","you have already enabled audio volume indicator!"),e.onSuccess();this._audioVolumeIndicationInterval=window.setInterval(()=>{const n=this._p2pChannel.getAudioLevels();this.emit(Vh.VOLUME_INDICATOR,n)},ya("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3),e.onSuccess()}getRTCStats(){const e=this._statsCollector.getRTCStats(),n=this._gateway.getInChannelInfo();return e.Duration=Math.round(n.duration/1e3),e}startLiveStreaming(e,n){const i=qc.reportApiInvoke(this._sessionId,{name:zl.START_LIVE_STREAMING,options:[e,n],tag:Gl.TRACER});if(!n){if("h264"!==this._codec){const h=new ea(_t.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");return i.onError(h),_l.reject(h)}if(!this._p2pChannel.hasLocalMedia()){const h=new ea(_t.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming");return i.onError(h),_l.reject(h)}}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(e)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(e)){const h=new ea(_t.LIVE_STREAMING_TASK_CONFLICT);return i.onError(h),_l.reject(h)}const c=n?P0.TRANSCODE:P0.RAW;return this._createLiveStreamingClient(c).startLiveStreamingTask(e,c).then(()=>i.onSuccess()).catch(h=>{throw i.onError(h),h})}setLiveTranscoding(e){const n=qc.reportApiInvoke(this._sessionId,{name:zl.SET_LIVE_TRANSCODING,options:[e],tag:Gl.TRACER});return this._createLiveStreamingClient(P0.TRANSCODE).setTranscodingConfig(e).then(()=>n.onSuccess()).catch(i=>{throw n.onError(i),i})}stopLiveStreaming(e){const n=qc.reportApiInvoke(this._sessionId,{name:zl.STOP_LIVE_STREAMING,options:[e],tag:Gl.TRACER}),i=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter(c=>c&&c.hasUrl(e));if(!i.length){const c=new ea(_t.INVALID_PARAMS,"can not find live streaming url to stop");return n.onError(c),_l.reject(c)}return _l.all(i.map(c=>c&&c.stopLiveStreamingTask(e))).then(()=>n.onSuccess()).catch(c=>{throw n.onError(c),c})}addInjectStreamUrl(e,n){var i=this;return l(function*(){const c=qc.reportApiInvoke(i._sessionId,{name:zl.ADD_INJECT_STREAM_URL,options:[e,n],tag:Gl.TRACER});try{if(!i._joinInfo)throw new ea(_t.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");const h=i._createLiveStreamingClient(P0.INJECT);h.setInjectStreamConfig(n,0),yield h.startLiveStreamingTask(e,P0.INJECT)}catch(h){throw c.onError(h),h}c.onSuccess()})()}removeInjectStreamUrl(){var e=this;return l(function*(){const n=qc.reportApiInvoke(e._sessionId,{name:zl.REMOVE_INJECT_STREAM_URL,options:[],tag:Gl.TRACER});try{var i;const c=e._createLiveStreamingClient(P0.INJECT),h=Array.from(ZN(i=c.streamingTasks).call(i)).find(g=>g.mode===P0.INJECT);if(!e._joinInfo||!h)throw new ea(_t.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");yield c.stopLiveStreamingTask(h.url)}catch(c){throw n.onError(c),c}n.onSuccess()})()}startChannelMediaRelay(e){var n=this;return l(function*(){const i=qc.reportApiInvoke(n._sessionId,{name:zl.START_CHANNEL_MEDIA_RELAY,options:[e],tag:Gl.TRACER});try{Ome(e),yield n._createChannelMediaRelayClient().startChannelMediaRelay(e)}catch(c){return i.onError(c),c.throw()}i.onSuccess()})()}updateChannelMediaRelay(e){var n=this;return l(function*(){const i=qc.reportApiInvoke(n._sessionId,{name:zl.UPDATE_CHANNEL_MEDIA_RELAY,options:[e],tag:Gl.TRACER});try{Ome(e),yield n._createChannelMediaRelayClient().updateChannelMediaRelay(e)}catch(c){return i.onError(c),c.throw()}i.onSuccess()})()}stopChannelMediaRelay(){var e=this;return l(function*(){const n=qc.reportApiInvoke(e._sessionId,{name:zl.STOP_CHANNEL_MEDIA_RELAY,options:[],tag:Gl.TRACER});try{yield e._createChannelMediaRelayClient().stopChannelMediaRelay()}catch(i){return n.onError(i),i.throw()}n.onSuccess()})()}sendStreamMessage(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this._joinInfo)throw new ea(_t.INVALID_OPERATION,"can not send data stream, not joined");if("string"==typeof e&&(e=(new TextEncoder).encode(e)),new Blob([e]).size>1024)throw new ea(_t.INVALID_PARAMS,"stream message out of range.");return this._gateway.signal.request(ql.DATA_STREAM,{payload:yre(e)},!n)}sendMetadata(e){if(!this._joinInfo)throw new ea(_t.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([e]).size>1024)throw new ea(_t.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(ql.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:yre(e)})}sendCustomReportMessage(e){var n=this;return l(function*(){Array.isArray(e)||(e=[e]),e.forEach(Iue);const i=qc.reportApiInvoke(n._sessionId,{name:zl.SEND_CUSTOM_REPORT_MESSAGE,options:[JSON.stringify(e)],tag:Gl.TRACER});if(!n._joinInfo){const c=new ea(_t.INVALID_OPERATION,"can not send custom report, not joined");return i.onError(c),c.throw()}yield qc.sendCustomReportMessage(n._joinInfo.sid,e),i.onSuccess()})()}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}pickSVCLayer(e,n){var i=this;return l(function*(){qy(n.spatialLayer,"spatialLayer",[0,1,2,3]),qy(n.temporalLayer,"temporalLayer",[0,1,2,3]);try{yield i._gateway.pickSVCLayer(e,n)}catch(c){throw de.error("[".concat(i._clientId,"] pick SVC layer failed"),c.toString()),Gc("error",i,"pickSVCLayer",n,c.toString()),c}})()}_reset(){if(de.debug("[".concat(this._clientId,"] reset client")),Gc("debug",this,"_reset"),this._axiosCancelSource.cancel(),this._axiosCancelSource=r1.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._users.forEach(e=>{e._audioTrack&&e._audioTrack._destroy(),e._videoTrack&&e._videoTrack._destroy()}),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),"fallback"===this._cloudProxyServerMode&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new _I("client-publish"),this._subscribeMutex=new _I("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch(e){}}_startSession(e,n){const i=e||Ple();de.debug(e?"[".concat(this._clientId,"] new Session ").concat(i):"[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(i)),Gc("debug",this,"_startSession",{newSid:i,sid:this._sessionId}),this._sessionId=i,this.store.sessionId=i,n?qc.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:n.channel,appid:n.appId,mode:this._mode}):this._joinInfo?qc.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._joinInfo.cname,appid:this._joinInfo.appId,mode:this._mode}):this._gateway.joinInfo&&qc.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId,mode:this._mode}),this._joinInfo&&(this._joinInfo.sid=i),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=i)}_publishHighStream(e){var n=this;return l(function*(){if(!n._joinInfo||void 0===n._uid)throw new ea(_t.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==n.connectionState&&"RECONNECTING"!==n.connectionState)throw new ea(_t.INVALID_OPERATION,"can not publish stream in ".concat(n.connectionState," state"));if("auto"===n._turnServer.mode&&ya("FORCE_TURN")&&!ya("TURN_ENABLE_TCP")&&!ya("TURN_ENABLE_UDP"))throw new ea(_t.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");de.debug("[".concat(n._clientId,"] publish high stream")),Gc("debug",n,"_publishHighStream");try{const c=yield n._p2pChannel.publish(e,n._isDualStreamEnabled,n._lowStreamParameter),h=(yield c.next()).value;if(h){var i;let g;try{g=yield n._gateway.publish(n._uid,h,!0)}catch(v){if(v.code!==_t.DISCONNECT_P2P)throw c.throw(v),v}yield c.next((null===(i=g)||void 0===i?void 0:i.ortc)||[])}n._p2pChannel.reportPublishEvent(!0,null);for(const g of e)g instanceof ty&&g._encoderConfig&&n._gateway.setVideoProfile(g._encoderConfig),!g.muted&&g.enabled||(yield n._p2pChannel.muteLocalTrack(g))}catch(c){if(n._p2pChannel.reportPublishEvent(!1,null==c?void 0:c.code,e),(null==c?void 0:c.code)===_t.WS_ABORT)return;throw c}})()}_publishLowStream(){var e=this;return l(function*(){if(!e._joinInfo||void 0===e._uid)throw new ea(_t.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==e.connectionState&&"RECONNECTING"!==e.connectionState)throw new ea(_t.INVALID_OPERATION,"can not publish stream in ".concat(e.connectionState," state"));de.debug("[".concat(e._clientId,"] publish low stream")),Gc("debug",e,"_publishLowStream");const n=e._configDistribute.getLowStreamConfigDistribute();n&&n.bitrate&&(e._lowStreamParameter||(e._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),e._lowStreamParameter&&e._lowStreamParameter.bitrate&&n.bitrate<e._lowStreamParameter.bitrate&&(e._lowStreamParameter.bitrate=n.bitrate));try{const c=yield e._p2pChannel.publishLowStream(e._lowStreamParameter),h=(yield c.next()).value;if(h){var i;let g;try{g=yield e._gateway.publish(e._uid,h,!0)}catch(v){if(v.code!==_t.DISCONNECT_P2P)throw c.throw(v),v}c.next((null===(i=g)||void 0===i?void 0:i.ortc)||[]),e._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(c){if(e._p2pChannel.reportPublishEvent(!1,null==c?void 0:c.code,void 0,!0),(null==c?void 0:c.code)===_t.WS_ABORT)return;throw c}})()}_createLiveStreamingClient(e){if(!this._joinInfo||!this._appId)return new ea(_t.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const n=()=>new Kbe(this._joinInfo,this._config.websocketRetryConfig||W0,this._config.httpRetryConfig||W0),i=c=>{c.onLiveStreamError=(h,g)=>{qc.reportApiInvoke(this._sessionId,{name:zl.ON_LIVE_STREAM_ERROR,options:[h,g],tag:Gl.TRACER}).onSuccess(),this.emit(Vh.LIVE_STREAMING_ERROR,h,g)},c.onLiveStreamWarning=(h,g)=>{qc.reportApiInvoke(this._sessionId,{name:zl.ON_LIVE_STREAM_WARNING,options:[h,g],tag:Gl.TRACER}).onSuccess(),this.emit(Vh.LIVE_STREAMING_WARNING,h,g)},c.on(ZM.REQUEST_WORKER_MANAGER_LIST,(h,g,v)=>{if(!this._joinInfo)return v(new ea(_t.INVALID_OPERATION,"can not find join info to get worker manager"));Ime(h,this._joinInfo,this._axiosCancelSource.token,W0).then(g).catch(v)})};switch(e){case P0.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=n(),i(this._liveRawStreamingClient)),this._liveRawStreamingClient;case P0.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=n(),i(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case P0.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=n(),this._injectStreamingClient.on(ZM.REQUEST_WORKER_MANAGER_LIST,(c,h,g)=>{if(!this._joinInfo)return g(new ea(_t.INVALID_OPERATION,"can not find join info to get worker manager"));Ime(c,this._joinInfo,this._axiosCancelSource.token,W0).then(h).catch(g)}),this._injectStreamingClient.onInjectStatusChange=(c,h,g)=>{this.emit(Vh.INJECT_STREAM_STATUS,c,h,g)}),this._injectStreamingClient}}_createChannelMediaRelayClient(){return this._joinInfo?(this._channelMediaRelayClient||(this._channelMediaRelayClient=new Jbe(this._joinInfo,this._clientId,this._config.websocketRetryConfig||W0,this._config.httpRetryConfig||W0),this._channelMediaRelayClient.on("state",e=>{e===M_.RELAY_STATE_FAILURE&&this._channelMediaRelayClient&&this._channelMediaRelayClient.dispose(),this.emit(Vh.CHANNEL_MEDIA_RELAY_STATE,e)}),this._channelMediaRelayClient.on("event",e=>{this.emit(Vh.CHANNEL_MEDIA_RELAY_EVENT,e)})),this._channelMediaRelayClient):new ea(_t.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw()}_handleGatewayEvents(){var e=this;this._gateway.on(g0.DISCONNECT_P2P,l(function*(){yield e._p2pChannel.disconnectForReconnect()})),this._gateway.on(g0.CONNECTION_STATE_CHANGE,(n,i,c)=>{var h;if(c===Rp.FALLBACK)return;const g=()=>{this.emit(Vh.CONNECTION_STATE_CHANGE,n,i,c)};if(qc.reportApiInvoke(this._sessionId||(null===(h=this._gateway.joinInfo)||void 0===h?void 0:h.sid)||null,{name:zl.CONNECTION_STATE_CHANGE,options:[n,i,c],tag:Gl.TRACER}).onSuccess(JSON.stringify({cur:n,prev:i,reason:c})),de.info("[".concat(this._clientId,"] connection state change: ").concat(i," -> ").concat(n)),p0("info",this,"connection-state-change","".concat(i," -> ").concat(n)),"DISCONNECTED"===n)return this._reset(),void g();if("RECONNECTING"===n)this._users.forEach(m=>{m._trust_in_room_=!1,m._trust_audio_enabled_state_=!1,m._trust_video_enabled_state_=!1,m._trust_audio_mute_state_=!1,m._trust_video_mute_state_=!1,m._trust_audio_stream_added_state_=!1,m._trust_video_stream_added_state_=!1,m._audioSSRC=void 0,m._videoSSRC=void 0,m._videoOrtc=void 0,m._audioOrtc=void 0,m._cname=void 0,m._rtxSsrcId=void 0}),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if("CONNECTED"===n){var v;this._streamFallbackTypeCacheMap.forEach((m,C)=>{this._gateway.setStreamFallbackOption(C,m).catch(y=>{de.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),y),pl("warning",this,"auto set stream fallback option failed, ".concat(y.toString()))})}),this._remoteStreamTypeCacheMap.forEach((m,C)=>{this._gateway.setRemoteVideoStreamType(C,m).catch(y=>{de.warning("[".concat(this._clientId,"] auto set remote stream type failed"),y),pl("warning",this,"auto set remote stream type failed, ".concat(y.toString()))})}),void 0!==this._remoteDefaultVideoStreamType&&void 0===(null===(v=this._joinInfo)||void 0===v?void 0:v.defaultVideoStream)&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then(()=>{de.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))}).catch(m=>{de.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(m))}),this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout(()=>{"CONNECTED"===this.connectionState&&(this._userOfflineTimeout=void 0,this._users.filter(m=>!m._trust_in_room_).forEach(m=>{de.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(m.uid)),pl("debug",this,"user offline timeout, emit user offline ".concat(m.uid)),this._handleUserOffline({uid:m.uid})}))},3e3),this._streamRemovedTimeout=window.setTimeout(()=>{"CONNECTED"===this.connectionState&&(this._streamRemovedTimeout=void 0,this._users.forEach(m=>{m._trust_audio_mute_state_||(de.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(m.uid)),pl("debug",this,"auto dispatch audio unmute event ".concat(m.uid)),this._handleMuteStream(m.uid,"audio",!1)),m._trust_video_mute_state_||(de.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(m.uid)),pl("debug",this,"auto dispatch video unmute event ".concat(m.uid)),this._handleMuteStream(m.uid,"video",!1)),m._trust_audio_enabled_state_||(de.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(m.uid)),pl("debug",this,"auto dispatch enable local audio ".concat(m.uid)),this._handleSetStreamLocalEnable("audio",m.uid,!0)),m._trust_video_enabled_state_||(de.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(m.uid)),pl("debug",this,"auto dispatch enable local video ".concat(m.uid)),this._handleSetStreamLocalEnable("video",m.uid,!0)),m._trust_video_stream_added_state_||(de.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(m.uid)),this._handleResetAddStream(m,"video")),m._trust_audio_stream_added_state_||(de.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(m.uid)),this._handleResetAddStream(m,"audio")),m._video_added_||m._audio_added_||(de.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(m.uid)),pl("debug",this,"auto dispatch stream remove ".concat(m.uid)),this._handleRemoveStream({uid:m.uid,uint_id:m._uintid}))}))},1e3)}g()}),this._gateway.on(g0.REQUEST_NEW_GATEWAY_LIST,(n,i)=>{if(!this._joinInfo)return i(new ea(_t.UNEXPECTED_ERROR,"can not recover, no join info"));yde(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||W0,this.store).then(c=>{this._joinInfo&&(this._joinInfo.apResponse=c.gatewayInfo.res,this._joinInfo.gatewayAddrs=c.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=c.gatewayInfo.uni_lbs_ip),n(c.gatewayInfo.gatewayAddrs.map(h=>{if(this._joinInfo&&this._joinInfo.proxyServer){const g=h.address.split(":");return"wss://".concat(this._joinInfo.proxyServer,"/ws/?h=").concat(g[0],"&p=").concat(g[1])}return"wss://".concat(h.address)}))}).catch(i)}),this._gateway.on(g0.NETWORK_QUALITY,n=>{"normal"===this._networkQualitySensitivity&&this.emit(Vh.NETWORK_QUALITY,n)}),this._gateway.on(g0.STREAM_TYPE_CHANGE,(n,i)=>{this.emit(Vh.STREAM_TYPE_CHANGED,n,i),qc.reportApiInvoke(this._sessionId,{name:zl.STREAM_TYPE_CHANGE,options:[n,i],tag:Gl.TRACER}).onSuccess(JSON.stringify({uid:n,streamType:i}))}),this._gateway.on(g0.IS_P2P_DISCONNECTED,n=>{this._p2pChannel.isP2PDisconnected()?n(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?n(!1):n(!0)}),this._gateway.on(g0.NEED_RENEW_SESSION,()=>{this._startSession()}),this._gateway.on(g0.REQUEST_P2P_CONNECTION_PARAMS,function(){var n=l(function*(i,c,h){try{c(yield e._p2pChannel.startP2PConnection(i))}catch(g){h(g)}});return function(i,c,h){return n.apply(this,arguments)}}()),this._gateway.on(g0.JOIN_RESPONSE,(n,i)=>{const{dtlsParameters:c,iceParameters:h,candidates:g,rtpCapabilities:v,setup:m,cname:C}=JEe(n.ortc,i);this._p2pChannel.connect(h,c,g,v,m,C)}),this._gateway.on(g0.REQUEST_DC_CONNECTION_PARAMS,n=>{n(this._p2pChannel.getEstablishParams())}),this._gateway.on(g0.RESET_CONNECTION_EVENTS,()=>{this._handleGatewaySignalEvents()}),this._gateway.on(g0.DATACHANNEL_FAILBACK,()=>{this._joinGateway()}),this._gateway.on(g0.DATACHANNEL_PRECONNECT,function(){var n=l(function*(i,c,h,g){var v,m,C,y,N,k;yield e._p2pChannel.startP2PConnection({turnServer:null===(v=e._joinInfo)||void 0===v?void 0:v.turnServer},!0);const U=function(V,K){let $;return K&&K.ip&&"number"==typeof K.port?($=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:K.ip,port:K.port.toString(),type:"host",extension:{}}],de.debug("Using remote candidate from AP ".concat(K.ip,":").concat(K.port)),pl("debug",[],"Using remote candidate from AP ".concat(K.ip,":").concat(K.port)),K.ip6&&($.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:K.ip6,port:K.port.toString(),type:"host",extension:{}}),de.debug("Using IPV6 remote candidate from AP ".concat(K.ip6,":").concat(K.port)),pl("debug",[],"Using IPV6 remote candidate from AP ".concat(K.ip6,":").concat(K.port)))):$=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:V.ip,port:V.port.toString(),type:"host",extension:{}}],$}(i,c);return e._p2pChannel.preConnect({iceUfrag:"".concat(null===(m=e._joinInfo)||void 0===m?void 0:m.apResponse.cid,"_").concat(null===(C=e._joinInfo)||void 0===C?void 0:C.apResponse.cert),icePwd:"".concat(null===(y=e._joinInfo)||void 0===y?void 0:y.apResponse.cid,"_").concat(null===(N=e._joinInfo)||void 0===N?void 0:N.apResponse.cert)},{fingerprints:[{hashFunction:"sha-256",fingerprint:null!==(k=ya("FINGERPRINT"))&&void 0!==k?k:i.fingerprint}]},U,{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},"active","o/i14u9pJrxRKAsu").then(h).catch(g)});return function(i,c,h,g){return n.apply(this,arguments)}}())}_handleGatewaySignalEvents(){this._gateway.signal.on(Kh.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(Kh.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(Kh.ON_ADD_AUDIO_STREAM,e=>this._handleAddAudioOrVideoStream("audio",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc)),this._gateway.signal.on(Kh.ON_ADD_VIDEO_STREAM,e=>this._handleAddAudioOrVideoStream("video",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc,e.rtxSsrcId)),this._gateway.signal.on(Kh.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(Kh.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(Kh.MUTE_AUDIO,e=>(p0("debug",["AgoraRTCGateway",this._clientId],"mute_audio",{uid:e.uid}),this._handleMuteStream(e.uid,"audio",!0))),this._gateway.signal.on(Kh.UNMUTE_AUDIO,e=>(p0("debug",["AgoraRTCGateway",this._clientId],"unmute_audio",{uid:e.uid}),this._handleMuteStream(e.uid,"audio",!1))),this._gateway.signal.on(Kh.MUTE_VIDEO,e=>(p0("debug",["AgoraRTCGateway",this._clientId],"mute_video",{uid:e.uid}),this._handleMuteStream(e.uid,"video",!0))),this._gateway.signal.on(Kh.UNMUTE_VIDEO,e=>(p0("debug",["AgoraRTCGateway",this._clientId],"unmute_video",{uid:e.uid}),this._handleMuteStream(e.uid,"video",!1))),this._gateway.signal.on(Kh.RECEIVE_METADATA,e=>{const n=Mle(e.metadata);this.emit(Vh.RECEIVE_METADATA,e.uid,n)}),this._gateway.signal.on(Kh.ON_DATA_STREAM,e=>{e.seq&&delete e.seq,e.payload=Mle(e.payload),this.emit(Vh.STREAM_MESSAGE,e.uid,e.payload),this.onStreamMessage&&this.onStreamMessage(e)}),this._gateway.signal.on(Kh.ON_CRYPT_ERROR,()=>{jY(()=>{de.warning("[".concat(this._clientId,"] on crypt error")),p0("warning",this,"crypt_error"),this.emit(Vh.CRYPT_ERROR)},this._sessionId)}),this._gateway.signal.on(Kh.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(Kh.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{de.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),p0("warning",this,"token_privilege_did_expire"),this._gateway.leave(!0),this.emit(Vh.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()}),this._gateway.signal.on(Kh.ON_STREAM_FALLBACK_UPDATE,e=>{de.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(e.stream_id,", attr: ").concat(e.stream_type)),p0("debug",this,"stream_fallback_update",{peerId:e.stream_id,attr:e.stream_type}),this.emit(Vh.STREAM_FALLBACK,e.stream_id,1===e.stream_type?"fallback":"recover")}),this._gateway.signal.on(Kh.ON_PUBLISH_STREAM,e=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:e.proxy})),de.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(e))),p0("info",this,"publish_stream",e))}),this._gateway.signal.on(Kh.ENABLE_LOCAL_VIDEO,e=>{this._handleSetStreamLocalEnable("video",e.uid,!0)}),this._gateway.signal.on(Kh.DISABLE_LOCAL_VIDEO,e=>{this._handleSetStreamLocalEnable("video",e.uid,!1)}),this._gateway.signal.on(Ll.REQUEST_TIMEOUT,(e,n)=>{if(this._joinInfo)switch(e){case ql.PUBLISH:{if(!n)return;const v=n.ortc;if(v){var i,c,h,g;const m=v.some(N=>{let{stream_type:k}=N;return k===a0.Audio}),C=v.some(N=>{let{stream_type:k}=N;return k!==a0.Audio}),y=v.some(N=>{let{stream_type:k}=N;return k===a0.Screen||k===a0.ScreenLow});"offer"===n.state&&qc.publish(this._joinInfo.sid,{eventElapse:cT.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:_t.TIMEOUT,audio:m,video:C,p2pid:n.p2p_id,publishRequestid:this.store.pubId,screenshare:y,audioName:m?null===(i=v.find(N=>{let{stream_type:k}=N;return k===a0.Audio}))||void 0===i||null===(c=i.ssrcs[0])||void 0===c?void 0:c.ssrcId.toString():void 0,videoName:C?null===(h=v.find(N=>{let{stream_type:k}=N;return k!==a0.Audio}))||void 0===h||null===(g=h.ssrcs[0])||void 0===g?void 0:g.ssrcId.toString():void 0})}break}case ql.SUBSCRIBE:n&&qc.subscribe(this._joinInfo.sid,{succ:!1,ec:_t.TIMEOUT,audio:n.stream_type===Sh.AUDIO,video:n.stream_type===Sh.VIDEO,peerid:n.stream_id,subscribeRequestid:n.ssrcId,p2pid:this.store.p2pId,eventElapse:cT.measureFromSubscribeStart(this.store.clientId,n.ssrcId)})}}),this._gateway.signal.on(Kh.ON_P2P_OK,e=>{}),this._gateway.signal.on(Kh.ON_PUBLISHED_USER_LIST,e=>{if(null==e||!e.users)return;const n=[],i=[];for(const c of e.users){let h=this._users.find(y=>y.uid===c.stream_id);h?h._trust_in_room_=!0:(h=new kde(c.stream_id,c.stream_id),this._users.push(h),0===this.getListeners(Vh.PUBLISHED_USER_LIST).length&&(de.debug("[".concat(this._clientId,"] user online"),c.stream_id),z1("info",this,"user-joined",{uid:c.stream_id}),this.emit(Vh.USER_JOINED,h)));const g=c0.Audio&c.stream_type,v=(c0.Video|c0.LwoVideo)&c.stream_type,m=g&&h.hasAudio,C=v&&h.hasVideo;v&&(h._trust_video_stream_added_state_=!0,h._video_added_=!0,h._videoSSRC=c.video_ssrc),g&&(h._trust_audio_stream_added_state_=!0,h._audio_added_=!0,h._audioSSRC=c.audio_ssrc),g&&!m&&0===this.getListeners(Vh.PUBLISHED_USER_LIST).length&&(de.info("[".concat(this._clientId,"] remote user ").concat(h.uid," published audio")),pl("info",this,"remote user ".concat(h.uid," published audio")),this.emit(Vh.USER_PUBLISHED,h,"audio")),v&&!C&&0===this.getListeners(Vh.PUBLISHED_USER_LIST).length&&(de.info("[".concat(this._clientId,"] remote user ").concat(h.uid," published video")),pl("info",this,"remote user ".concat(h.uid," published video")),this.emit(Vh.USER_PUBLISHED,h,"video")),(g&&!m||v&&!C)&&n.push(h),v&&this._p2pChannel.hasPendingRemoteMedia(h,"video")&&i.push({user:h,mediaType:"video"}),g&&this._p2pChannel.hasPendingRemoteMedia(h,"audio")&&i.push({user:h,mediaType:"audio"})}i.length>0&&(de.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(i.map(c=>"user: ".concat(c.user.uid,", mediaType: ").concat(c.mediaType)).join("; ")," ")),this.massSubscribe(i).catch(c=>{de.error("[".concat(this._clientId,"] mass resubscribe error"),c.toString())})),this.getListeners(Vh.PUBLISHED_USER_LIST).length>0?(de.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(n.map(c=>c.uid).join(", "))),this.emit(Vh.PUBLISHED_USER_LIST,n)):de.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(n.map(c=>c.uid).join(", ")))})}_handleP2PChannelEvents(){var e=this;this._p2pChannel.on(Pf.RequestMuteLocal,function(){var n=l(function*(i,c,h){if(e._joinInfo)try{yield e._gateway.muteLocal(i,e._joinInfo.stringUid||e._joinInfo.uid),c()}catch(g){g.code===_t.DISCONNECT_P2P?c():h(g)}else c()});return function(i,c,h){return n.apply(this,arguments)}}()),this._p2pChannel.on(Pf.RequestUnmuteLocal,function(){var n=l(function*(i,c,h){if(e._joinInfo)try{yield e._gateway.unmuteLocal(i,e._joinInfo.stringUid||e._joinInfo.uid),c()}catch(g){g.code===_t.DISCONNECT_P2P?c():h(g)}else c()});return function(i,c,h){return n.apply(this,arguments)}}()),this._p2pChannel.on(Pf.RequestRePublish,(n,i,c)=>{this.publish(n,!1).then(i).catch(c)}),this._p2pChannel.on(Pf.RequestReSubscribe,function(){var n=l(function*(i,c,h){try{for(const{user:g,kind:v}of i)v===Sh.VIDEO?yield e.subscribe(g,"video"):yield e.subscribe(g,"audio");c()}catch(g){h(g)}});return function(i,c,h){return n.apply(this,arguments)}}()),this._p2pChannel.on(Pf.RequestUploadStats,(n,i)=>{this._gateway.uploadStats(n,i)}),this._p2pChannel.on(Pf.MediaReconnectStart,n=>{this.emit(Vh.MEDIA_RECONNECT_START,n)}),this._p2pChannel.on(Pf.MediaReconnectEnd,n=>{this.emit(Vh.MEDIA_RECONNECT_END,n)}),this._p2pChannel.on(Pf.NeedSignalRTT,n=>{n(this._gateway.getSignalRTT())}),this._p2pChannel.on(Pf.RequestRestartICE,l(function*(){const n=yield e._p2pChannel.restartICE(),i=yield n.next();if(i.done)return;const c=i.value;let h;try{h=yield e._gateway.restartICE({iceParameters:c})}catch(v){return void n.throw(v)}const{iceParameters:g}=function(v){const m=v.iceParameters;return{iceParameters:{iceUfrag:m.iceUfrag,icePwd:m.icePwd}}}(h);yield n.next({remoteIceParameters:g})})),this._p2pChannel.on(Pf.RequestReconnect,l(function*(){e._gateway.reconnect()})),this._p2pChannel.on(Pf.RequestReconnectPC,l(function*(){var n;const{iceParameters:i,dtlsParameters:c,rtpCapabilities:h}=yield e._p2pChannel.startP2PConnection({turnServer:null===(n=e._joinInfo)||void 0===n?void 0:n.turnServer}),{gatewayEstablishParams:g,gatewayAddress:v}=yield e._gateway.reconnectPC({iceParameters:i,dtlsParameters:c,rtpCapabilities:h}),{dtlsParameters:m,iceParameters:C,candidates:y,rtpCapabilities:N,setup:k,cname:U}=JEe(g,v);yield e._p2pChannel.connect(C,m,y,N,k,U),yield e._p2pChannel.republish(),yield e._p2pChannel.reSubscribe()})),this._p2pChannel.on(Pf.RequestUnpublishForReconnectPC,function(){var n=l(function*(i,c,h){e._joinInfo&&void 0!==e._uid?(yield e._gateway.unpublish(i,e._uid),c()):h()});return function(i,c,h){return n.apply(this,arguments)}}()),this._p2pChannel.on(Pf.P2PLost,()=>{this.emit(Vh.P2P_LOST,this.store.uid)}),this._p2pChannel.on(Pf.UpdateVideoEncoder,n=>{n._encoderConfig&&this._gateway.setVideoProfile(n._encoderConfig)}),this._p2pChannel.on(Pf.ConnectionTypeChange,n=>{this.emit(Vh.IS_USING_CLOUD_PROXY,n)}),this._p2pChannel.on(Pf.RequestLowStreamParameter,n=>{n(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})}),this._p2pChannel.on(Pf.QueryClientConnectionState,n=>{n(this.connectionState)})}getKeyMetrics(){return this.store.keyMetrics}enableContentInspect(e){var n=this;return l(function*(){if("CONNECTED"!==n.connectionState||!n._joinInfo)throw new ea(_t.INVALID_OPERATION,"[".concat(n._clientId,"] Client did not join channel"));if(n._inspect)throw new ea(_t.INVALID_OPERATION,"[".concat(n._clientId,"] Inspect content service already in connecting/connected state"));if(!e)throw new ea(_t.INVALID_PARAMS,"[".concat(n._clientId,"] inspectConfig is necessary"));if(!e.inspectType||!Array.isArray(e.inspectType))throw new ea(_t.INVALID_PARAMS,"[".concat(n._clientId,"] inspectConfig.inspectType is necessary and is an instance of Array."));{const i=[...new Set(e.inspectType)];i.forEach(c=>{if(!["supervise","moderation"].includes(c))throw new ea(_t.INVALID_PARAMS,"[".concat(n._clientId,"] ").concat(c," is not a valid inspect type."))}),e.inspectType=i}if(e&&e.extraInfo&&e.extraInfo.length>1024)throw new ea(_t.INVALID_PARAMS,"[".concat(n._clientId,"] inspectConfig.extraInfo length cannot exceed 1024 bytes"));try{const i=new eie(e);n._inspect=i,n.handleVideoInspectEvents(n._inspect),yield i.init({appId:n._joinInfo.appId,areaCode:"",cname:n._joinInfo.cname,sid:n._joinInfo.sid,token:n._joinInfo.token,uid:n._joinInfo.uid,cid:n._joinInfo.cid,vid:n._joinInfo.vid?Number(n._joinInfo.vid):0},W0)}catch(i){throw Array.isArray(i)?i[0]:i}})()}disableContentInspect(){var e=this;return l(function*(){if(!e._inspect)throw new ea(_t.INVALID_OPERATION,"[".concat(e._clientId,"] inspectVideoContent not started"));try{e._inspect.close(),e._inspect=void 0}catch(n){throw Array.isArray(n)?n[0]:n}})()}handleVideoInspectEvents(e){e.on(w0.CONNECTION_STATE_CHANGE,(n,i)=>{if(this.emit(Vh.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,n,i),i===O1.CONNECTED){if("CONNECTED"!==this.connectionState)return void this.emit(Vh.CONTENT_INSPECT_ERROR,new ea(_t.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));e.inspectImage()}}),e.on(w0.INSPECT_RESULT,(n,i)=>{var c;if((null==i?void 0:i.code)===_t.INVALID_OPERATION&&"DISCONNECTED"===this.connectionState)return de.debug("Stop inspect content because that has left channel"),null==this||null===(c=this._inspect)||void 0===c||c.close(),void(this._inspect=void 0);this.emit(Vh.CONTENT_INSPECT_RESULT,n,i)}),e.on(w0.CLIENT_LOCAL_VIDEO_TRACK,n=>{n(this.localTracks.filter(i=>"video"===i.trackMediaType)[0])})}getJoinChannelServiceRecords(){return de.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}setPublishAudioFilterEnabled(e){var n=this;return l(function*(){ZR(e,"enabled"),Ag("ENABLE_PUBLISH_AUDIO_FILTER",e),n._joinInfo&&(yield n._gateway.setPublishAudioFilterEnabled(e))})()}_handleResetAddStream(e,n){switch(n){case"audio":e._audio_added_=!1,e._trust_audio_stream_added_state_=!0;break;case"video":e._video_added_=!1,e._trust_video_stream_added_state_=!0}}}).prototype,"setProxyServer",[qve],Object.getOwnPropertyDescriptor(m0.prototype,"setProxyServer"),m0.prototype),Cl(m0.prototype,"setTurnServer",[Wve],Object.getOwnPropertyDescriptor(m0.prototype,"setTurnServer"),m0.prototype),Cl(m0.prototype,"setLicense",[Kve],Object.getOwnPropertyDescriptor(m0.prototype,"setLicense"),m0.prototype),Cl(m0.prototype,"setLocalAccessPointsV2",[Yve],Object.getOwnPropertyDescriptor(m0.prototype,"setLocalAccessPointsV2"),m0.prototype),Cl(m0.prototype,"setLocalAccessPoints",[Jve],Object.getOwnPropertyDescriptor(m0.prototype,"setLocalAccessPoints"),m0.prototype),Cl(m0.prototype,"setRemoteDefaultVideoStreamType",[zve],Object.getOwnPropertyDescriptor(m0.prototype,"setRemoteDefaultVideoStreamType"),m0.prototype),Cl(m0.prototype,"pickSVCLayer",[Xve],Object.getOwnPropertyDescriptor(m0.prototype,"pickSVCLayer"),m0.prototype),Cl(m0.prototype,"enableContentInspect",[$ve],Object.getOwnPropertyDescriptor(m0.prototype,"enableContentInspect"),m0.prototype),Cl(m0.prototype,"disableContentInspect",[Zve],Object.getOwnPropertyDescriptor(m0.prototype,"disableContentInspect"),m0.prototype),Cl(m0.prototype,"getJoinChannelServiceRecords",[e0e],Object.getOwnPropertyDescriptor(m0.prototype,"getJoinChannelServiceRecords"),m0.prototype),Cl(m0.prototype,"setPublishAudioFilterEnabled",[t0e],Object.getOwnPropertyDescriptor(m0.prototype,"setPublishAudioFilterEnabled"),m0.prototype),n0e=m0))||n0e);class HCe extends Xpe{set currentState(n){n!==this._currentState&&(this._currentState=n,this.emit(g_.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),Y(this,"audioBuffer",void 0),Y(this,"sourceNode",void 0),Y(this,"startPlayTime",0),Y(this,"startPlayOffset",0),Y(this,"pausePlayTime",0),Y(this,"options",void 0),Y(this,"currentLoopCount",0),Y(this,"_currentState","stopped"),this.audioBuffer=n,this.options=i,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer.duration}get currentTime(){return"stopped"===this.currentState?0:"paused"===this.currentState?this.pausePlayTime:(this.context.currentTime-this.startPlayTime+this.startPlayOffset)%this.audioBuffer.duration}updateOptions(n){"stopped"===this.currentState?(this.options=n,this.startPlayOffset=this.options.startPlayTime||0):de.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&"playing"===this.currentState&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(n){this.sourceNode&&(this.sourceNode.onended=null,"playing"===this.currentState&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),"playing"===this.currentState?(this.startPlayOffset=n,this.startSourceNode()):"paused"===this.currentState&&(this.pausePlayTime=n))}resumeProcessAudioBuffer(){"paused"===this.currentState&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch(n){}this.reset()}}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const n=this.context.createBufferSource();return n.buffer=this.audioBuffer,n.loop=!!this.options.loop,n.connect(this.outputNode),n}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const i0e=new Map;function vhe(){return vhe=l(function*(e,n){let i=null;if("string"==typeof e){const h=i0e.get(e);if(h)return de.debug("use cached audio resource: ",e),h;try{i=(yield JT(()=>r1.get(e,{responseType:"arraybuffer"}),void 0,void 0,{maxRetryCount:3})).data}catch(g){throw new ea(_t.FETCH_AUDIO_FILE_FAILED,g.toString())}}else i=yield new _l((g,v)=>{const m=new FileReader;m.onload=C=>{C.target?g(C.target.result):v(new ea(_t.READ_LOCAL_AUDIO_FILE_ERROR))},m.onerror=()=>{v(new ea(_t.READ_LOCAL_AUDIO_FILE_ERROR))},m.readAsArrayBuffer(e)});const c=yield function(h){const g=BQ();return new _l((v,m)=>{g.decodeAudioData(h,C=>{v(C)},C=>{m(new ea(_t.DECODE_AUDIO_FILE_FAILED,C.toString()))})})}(i);return"string"==typeof e&&n&&i0e.set(e,c),c}),vhe.apply(this,arguments)}function o0e(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);n&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),i.push.apply(i,c)}return i}function tie(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?o0e(Object(i),!0).forEach(function(c){Y(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o0e(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}function yhe(e,n,i,c){i.optimizationMode&&(c&&c.width&&c.height?(i.encoderConfig=tie(tie({},c),{},{bitrateMin:c.bitrateMin,bitrateMax:c.bitrateMax}),"motion"!==i.optimizationMode&&"detail"!==i.optimizationMode||(n.contentHint=i.optimizationMode,n.contentHint===i.optimizationMode?(de.debug("[".concat(e,"] set content hint to"),i.optimizationMode),Jl("debug",["AgoraRTC"],"videoTrackOptimizationModeProcess",[e,i,c])):(de.debug("[".concat(e,"] set content hint failed")),Jl("warning",["AgoraRTC"],"videoTrackOptimizationModeProcess",[e,i,c],"failed")))):(de.warning("[".concat(e,"] can not apply optimization mode bitrate config, no encoderConfig")),pl("warning",["AgoraRTC"],"[".concat(e,"] can not apply optimization mode bitrate config, no encoderConfig"))))}const WCe=Yp().name;function KCe(e,n,i,c){let h,g=0,v=null;return new _l((m,C)=>{setTimeout(()=>{h&&(h(),m(g))},n),h=ble(()=>{!function(){g>c&&h&&(h(),m(g));const y=i.getContext("2d");if(!y){const U=new ea(_t.UNEXPECTED_ERROR,"can not get canvas 2d context.");return de.error(U.toString()),void C(U)}y.drawImage(e,0,0,160,120);const N=y.getImageData(0,0,i.width,i.height),k=Math.floor(N.data.length/3);if(v){for(let U=0;U<k;U+=3)if(N.data[U]!==v[U])return g+=1,void(v=N.data);v=N.data}else v=N.data}()},30)})}class sz{constructor(n,i){Y(this,"id",0),Y(this,"element",void 0),Y(this,"peerPair",void 0),Y(this,"context",void 0),Y(this,"audioPlayerElement",void 0),Y(this,"audioTrack",void 0),sz.count+=1,this.id=sz.count,this.element=n,this.context=i}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=n=>{const i=document.createElement("audio");i.srcObject=new MediaStream([n.track]),i.play(),this.audioPlayerElement=i}}switchSdp(){var n=this;return l(function*(){if(!n.peerPair)return;const i=function(){var h=l(function*(g,v){const m="offer"===v?yield g.createOffer():yield g.createAnswer();return yield g.setLocalDescription(m),"complete"===g.iceGatheringState?g.localDescription:new _l(C=>{g.onicegatheringstatechange=()=>{"complete"===g.iceGatheringState&&C(g.localDescription)}})});return function(v,m){return h.apply(this,arguments)}}(),c=function(){var h=l(function*(g,v){return yield g.setRemoteDescription(v)});return function(v,m){return h.apply(this,arguments)}}();try{const h=yield i(n.peerPair[0],"offer");yield c(n.peerPair[1],h);const g=yield i(n.peerPair[1],"answer");yield c(n.peerPair[0],g)}catch(h){throw new ea(_t.LOCAL_AEC_ERROR,h.toString()).print()}})()}getTracksFromMediaElement(n){var i=this;return l(function*(){if(i.audioTrack)return i.audioTrack;let c;try{n instanceof HTMLVideoElement&&(n.captureStream?n.captureStream():n.mozCaptureStream()),c=i.context.createMediaStreamDestination(),i.context.createMediaElementSource(n).connect(c)}catch(g){throw new ea(_t.LOCAL_AEC_ERROR,g.toString()).print()}if(!c)throw new ea(_t.LOCAL_AEC_ERROR,"no dest node when local aec").print();const h=c.stream.getAudioTracks()[0];return i.audioTrack=h,h})()}getElement(){return this.element}startEchoCancellation(){var n=this;return l(function*(){n.context.resume(),n.peerPair&&n.close(),n.initPeers();const i=n.element,c=yield n.getTracksFromMediaElement(i);n.peerPair&&n.peerPair[0].addTrack(c),yield n.switchSdp()})()}close(){de.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach(n=>{n.close()}),this.peerPair=void 0,this.audioPlayerElement=void 0}}var s0e,nie;Y(sz,"count",0);const YCe=window.AudioContext||window.webkitAudioContext,JCe=new(s0e=z4({report:qc}),Cl((nie=class{constructor(){Y(this,"units",[]),Y(this,"context",void 0)}processExternalMediaAEC(e){if(!this._doesEnvironmentNeedAEC())return de.debug("the system does not need to process local aec"),-1;this.context||(this.context=new YCe);let n=this.units.find(i=>i&&i.getElement()===e);return n||(n=new sz(e,this.context),this.units.push(n)),n.startEchoCancellation(),de.debug("start processing local audio echo cancellation, id is",n.id),n.id}_doesEnvironmentNeedAEC(){return Yp().name!==Kp.SAFARI}}).prototype,"processExternalMediaAEC",[s0e],Object.getOwnPropertyDescriptor(nie.prototype,"processExternalMediaAEC"),nie.prototype),nie);Ag("PROCESS_ID","process-".concat(x0(8,""),"-").concat(x0(4,""),"-").concat(x0(4,""),"-").concat(x0(4,""),"-").concat(x0(12,""))),function(){const e=Yp();o_.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),o_.getStreamFromExtension=e.name===Kp.CHROME&&Number(e.version)>34,o_.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const n=new RTCPeerConnection;let i=!1;try{n.addTransceiver("audio"),i=!0}catch(c){}return n.close(),i}(),o_.supportMinBitrate=e.name===Kp.CHROME||e.name===Kp.EDGE,o_.supportSetRtpSenderParameters=function(){const n=Yp();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!jM()||!(!L_()&&!j8())||n.name===Kp.FIREFOX&&Number(n.version)>=64)}(),e.name===Kp.SAFARI&&(o_.supportDualStream=Number(e.version)>=14),o_.webAudioMediaStreamDest=function(){const n=Yp();return!(n.name===Kp.SAFARI&&Number(n.version)<12)}(),o_.supportReplaceTrack=!!window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack,o_.supportWebGL="undefined"!=typeof WebGLRenderingContext,o_.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,jM()||(o_.webAudioWithAEC=!0),o_.supportShareAudio=function(){const n=Yp();return(n.os===My.WIN_10||n.os===My.WIN_81||n.os===My.WIN_7||n.os===My.LINUX||n.os===My.MAC_OS)&&n.name===Kp.CHROME&&Number(n.version)>=74}(),o_.supportDualStreamEncoding=function(){const n=Yp();return!!ya("DISABLE_WEBAUDIO")||"Safari"===n.name&&Number(n.version)>=14||!!("Chrome"===n.name&&/Windows/i.test(n.os||"")&&Number(n.version)>=100&&ya("CHROME_DUAL_STREAM_USE_ENCODING"))}(),o_.supportDataChannel=!!(function(n){const i=Yp();return!(i.name!==Kp.CHROME||!i.osVersion)&&Number(i.version)>=76}()||function(n){const i=Yp();return!(i.name!==Kp.FIREFOX||!i.osVersion)&&Number(i.version)>=68}()||function(n){const i=Yp();return!(i.name!==Kp.SAFARI||!i.osVersion)&&Number(i.version)>=14}()),de.info("browser compatibility",JSON.stringify(o_),JSON.stringify(e)),Gc("info",[],"updateAgoraRTCCompatibility",{browserCompatibility:o_,browserInfo:e})}(),function(){let e;try{e=window.localStorage.getItem("websdk_ng_global_parameter")}catch(n){return void de.error("Error loading sdk config",n.message)}if(e)try{const n=JSON.parse(window.atob(e)),i=Date.now();de.debug("Loading global parameters from cache",n),Gc("debug",[],"loadConfigFromLocalStorage",n),Object.keys(n).forEach(c=>{if(Object.prototype.hasOwnProperty.call(J_,c)){const{value:h,expires:g}=n[c];if(g&&g<=i)return;uQ[c]=h,J_[c]=h}})}catch(n){de.error("Error loading mutableParamsCache: ".concat(e),n.message)}}();const h1={__CLIENT_LIST__:KM,__TRACK_LIST__:XT,VERSION:o1,BUILD:oQ,setParameter:Ag,getParameter:ya,getSupportedCodec:function(){var e=l(function*(){let n={audio:[],video:[]};try{let i=new RTCPeerConnection;i.addTransceiver("video",{direction:"recvonly"}),i.addTransceiver("audio",{direction:"recvonly"});const c=(yield i.createOffer()).sdp;if(!c)return n;i.close(),i=null,n=function(h){const g={video:[],audio:[]};return h.match(/ VP8/i)&&g.video.push("VP8"),h.match(/ VP9/i)&&g.video.push("VP9"),h.match(/ AV1/i)&&g.video.push("AV1"),h.match(/ H264/i)&&g.video.push("H264"),h.match(/ opus/i)&&g.audio.push("OPUS"),h.match(/ PCMU/i)&&g.audio.push("PCMU"),h.match(/ PCMA/i)&&g.audio.push("PCMA"),h.match(/ G722/i)&&g.audio.push("G722"),g}(c)}catch(i){throw new ea(_t.CREATE_OFFER_FAILED,i.toString&&i.toString()).print()}return n});return function(){return e.apply(this,arguments)}}(),checkSystemRequirements:function(){const e=qc.reportApiInvoke(null,{name:zl.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:Gl.TRACER});let n=!1;try{const g=window.RTCPeerConnection,v=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,m=window.WebSocket;n=!!(g&&v&&m)}catch(g){return de.error("check system requirement failed: ",g),!1}let i=!1;const c=Yp();c.name===Kp.CHROME&&Number(c.version)>=58&&(!function Nce(){return"WebKit"===KR.engine.name}()||function Mte(){const e=Yp();if(j8()){if(e.os===My.MAC_OS)return!0;if(e.os===My.IOS){const n=KR.os.version&&KR.os.version.split(".");if(n&&14===Number(n[0])&&n[1]&&Number(n[1])>=3||n&&Number(n[0])>14)return!0}}return!1}())&&(i=!0),c.name===Kp.FIREFOX&&Number(c.version)>=56&&(i=!0),c.name===Kp.OPERA&&Number(c.version)>=45&&(i=!0),c.name===Kp.SAFARI&&Number(c.version)>=11&&(i=!0),(kce()||Yp().name===Kp.QQ)&&(i=!0),de.debug("checkSystemRequirements, api:",n,"browser",i);const h=n&&i;return e.onSuccess(h),h},getDevices:function(e){return _C.enumerateDevices(!0,!0,e)},getMicrophones:function(e){return _C.getRecordingDevices(e)},getCameras:function(e){return _C.getCamerasDevices(e)},getElectronScreenSources:ege,getPlaybackDevices:function(e){return _C.getSpeakers(e)},createClient:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"};const n=qc.reportApiInvoke(null,{name:zl.CREATE_CLIENT,options:[e],tag:Gl.TRACER});try{F4(e)}catch(i){throw n.onError(i),i}return void 0===e.audioCodec&&(e.audioCodec="opus"),n.onSuccess(),new GCe(oz(oz({forceWaitGatewayResponse:!0},e),{},{role:"rtc"===e.mode?"host":e.role}))},createCameraVideoTrack:function(){var e=l(function*(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{encoderConfig:"480p_1"};const i=qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.CREATE_CAM_VIDEO_TRACK,options:[tie({},n)]}),c=Nde(n),h=x0(8,"track-cam-");let g=null;de.info("start create camera video track with config",JSON.stringify(n),"trackId",h),Jl("info",["AgoraRTC"],"createCameraVideoTrack",n);try{g=(yield nR({video:c},h)).getVideoTracks()[0]||null}catch(m){throw i.onError(m),m}if(!g){const m=new ea(_t.UNEXPECTED_ERROR,"can not find track in media stream");return i.onError(m),m.throw()}n.optimizationMode&&yhe(h,g,n,n.encoderConfig&&C2(n.encoderConfig));const v=new hEe(g,n,c,n.scalabiltyMode?U4(n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},n.optimizationMode,h);return i.onSuccess(v.getTrackId()),de.info("create camera video success, trackId:",h),Jl("info",["AgoraRTC"],"createCameraVideoTrack",void 0,h),v});return function(){return e.apply(this,arguments)}}(),createCustomVideoTrack:function(e){const n=qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.CREATE_CUSTOM_VIDEO_TRACK,options:[e]}),i=new ty(e.mediaStreamTrack,{bitrateMax:e.bitrateMax,bitrateMin:e.bitrateMin},e.scalabiltyMode?U4(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode);return n.onSuccess(i.getTrackId()),de.info("create custom video track success with config",e,"trackId",i.getTrackId()),Jl("info",["AgoraRTC"],"createCustomVideoTrack",e,i.getTrackId()),i},createScreenVideoTrack:function(){var e=l(function*(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"disable";const c=qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.CREATE_SCREEN_VIDEO_TRACK,options:[tie({},n),i]});n.encoderConfig?"string"==typeof n.encoderConfig||n.encoderConfig.width&&n.encoderConfig.height||(n.encoderConfig.width={max:1920},n.encoderConfig.height={max:1080}):n.encoderConfig="1080p_2";const h=f1e(n),g=x0(8,"track-scr");let v=null,m=null;const C=dy();if(!C.supportShareAudio&&"enable"===i){const k=new ea(_t.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return c.onError(k),k.throw()}de.info("start create screen video track with config",n,"withAudio",i,"trackId",g),Jl("info",["AgoraRTC"],"createScreenVideoTrack",[n,i]);try{const k=yield nR({screen:h,screenAudio:"auto"===i?C.supportShareAudio:"enable"===i},g);v=k.getVideoTracks()[0]||null,m=k.getAudioTracks()[0]||null}catch(k){throw c.onError(k),k}if(!v){const k=new ea(_t.UNEXPECTED_ERROR,"can not find track in media stream");return c.onError(k),k.throw()}if(!m&&"enable"===i){v&&v.stop();const k=new ea(_t.SHARE_AUDIO_NOT_ALLOWED);return c.onError(k),k.throw()}n.optimizationMode||(n.optimizationMode="detail"),n.optimizationMode&&(yhe(g,v,n,n.encoderConfig&&cQ(n.encoderConfig)),n.encoderConfig&&"string"!=typeof n.encoderConfig&&(n.encoderConfig.bitrateMin=n.encoderConfig.bitrateMax));const y=new ty(v,n.encoderConfig?cQ(n.encoderConfig):{},n.scalabiltyMode?U4(n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},n.optimizationMode,g,[vy.SCREEN_TRACK]);if(!m)return c.onSuccess(y.getTrackId()),de.info("create screen video track success","video:",y.getTrackId()),Jl("info",["AgoraRTC"],"createScreenVideoTrack",void 0,{videoTrack:y.getTrackId()}),y;const N=new m_(m);return c.onSuccess([y.getTrackId(),N.getTrackId()]),de.info("create screen video track success","video:",y.getTrackId(),"audio:",N.getTrackId()),Jl("info",["AgoraRTC"],"createScreenVideoTrack",void 0,{videoTrack:y.getTrackId(),audioTrack:N.getTrackId()}),[y,N]});return function(){return e.apply(this,arguments)}}(),createMicrophoneAndCameraTracks:function(){var e=l(function*(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{encoderConfig:"480p_1"};const c=qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.CREATE_MIC_AND_CAM_TRACKS,options:[n,i]}),h=Nde(i),g=Fme(n),v=x0(8,"track-mic-"),m=x0(8,"track-cam-");let C=null,y=null;de.info("start create camera video track(".concat(m,") and microphone audio track(").concat(v,") with config, audio: ").concat(JSON.stringify(n),", video: ").concat(JSON.stringify(i))),Jl("info",["AgoraRTC"],"createMicrophoneAndCameraTracks",{videoConfig:i,audioConfig:n});try{const U=yield nR({audio:g,video:h},"".concat(v,"-").concat(m));C=U.getAudioTracks()[0],y=U.getVideoTracks()[0]}catch(U){throw c.onError(U),U}if(!C||!y){const U=new ea(_t.UNEXPECTED_ERROR,"can not find tracks in media stream");return c.onError(U),U.throw()}i.optimizationMode&&yhe(m,y,i,i.encoderConfig&&C2(i.encoderConfig));const N=new Are(C,n,g,v),k=new hEe(y,i,h,i.scalabiltyMode?U4(i.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},i.optimizationMode,m);return c.onSuccess([N.getTrackId(),k.getTrackId()]),de.info("create camera video track(".concat(m,") and microphone audio track(").concat(v,") success")),Jl("info",["AgoraRTC"],"createMicrophoneAndCameraTracks",void 0,{videoTrackId:m,audioTrackId:v}),[N,k]});return function(){return e.apply(this,arguments)}}(),createMicrophoneAudioTrack:function(){var e=l(function*(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.CREATE_MIC_AUDIO_TRACK,options:[n]}),c=Fme(n),h=x0(8,"track-mic-");let g=null;de.info("start create microphone audio track with config",JSON.stringify(n),"trackId",h),Jl("info",["AgoraRTC"],"createMicrophoneAudioTrack",n);try{g=(yield nR({audio:c},h)).getAudioTracks()[0]||null}catch(m){throw i.onError(m),m}if(!g){const m=new ea(_t.UNEXPECTED_ERROR,"can not find track in media stream");return i.onError(m),m.throw()}const v=new Are(g,n,c,h);return i.onSuccess(v.getTrackId()),de.info("create microphone audio track success, trackId:",h),Jl("info",["AgoraRTC"],"createMicrophoneAudioTrack",n,h),v});return function(){return e.apply(this,arguments)}}(),createCustomAudioTrack:function(e){const n=qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.CREATE_CUSTOM_AUDIO_TRACK,options:[e]}),i=new m_(e.mediaStreamTrack,e.encoderConfig?zT(e.encoderConfig):{});return de.info("create custom audio track success with config",e,"trackId",i.getTrackId()),Jl("info",["AgoraRTC"],"createCustomAudioTrack",e,i.getTrackId()),n.onSuccess(i.getTrackId()),i},createBufferSourceAudioTrack:function(){var e=l(function*(n){const i=qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.CREATE_BUFFER_AUDIO_TRACK,options:[n]});if(ya("DISABLE_WEBAUDIO"))throw new ea(_t.NOT_SUPPORTED,"can not create BufferSourceAudioTrack when WebAudio disabled");const c=x0(8,"track-buf-");de.info("start create buffer source audio track with config",JSON.stringify(n),"trackId",c),Jl("info",[],"createBufferSourceAudioTrack",n);const h=n.source;if(!(n.source instanceof AudioBuffer))try{n.source=yield function qCe(e,n){return vhe.apply(this,arguments)}(n.source,n.cacheOnlineFile)}catch(m){return i.onError(m),m.throw()}const g=new HCe(n.source),v=new q_e(h,g,n.encoderConfig?zT(n.encoderConfig):{},c);return de.info("create buffer source audio track success, trackId:",c),Jl("info",["AgoraRTC"],"createBufferSourceAudioTrack",void 0,c),i.onSuccess(v.getTrackId()),v});return function(i){return e.apply(this,arguments)}}(),setAppType:function(e){if(de.debug("setAppType: ".concat(e)),!(Number.isInteger(e)&&e>=0))throw de.debug("Invalid appType"),new ea(_t.INVALID_PARAMS,"invalid app type",e);Ag("APP_TYPE",Math.floor(e))},setLogLevel:function(e){ya("USE_NEW_LOG")?function(n){n=Math.min(Math.max(0,n),4),zW=n}(e):de.setLogLevel(e)},enableLogUpload:function(){ya("USE_NEW_LOG")?Ag("UPLOAD_LOG",!0):de.enableLogUpload()},disableLogUpload:function(){ya("USE_NEW_LOG")?Ag("UPLOAD_LOG",!1):de.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new Rme},checkAudioTrackIsActive:function(){var e=l(function*(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const c=qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[i]});if(!(n instanceof m_||n instanceof zre)){const y=new ea(_t.INVALID_TRACK,"the parameter is not a audio track");return c.onError(y),y.throw()}i&&i<1e3&&(i=1e3);const h=n instanceof m_?n.getTrackLabel():"remote_track",g=n.getVolumeLevel();let v=g,m=g;const C=Date.now();return new _l(y=>{const N=setInterval(()=>{const k=n.getVolumeLevel();v=k>v?k:v,m=k<m?k:m;const U=v-m>1e-4,V=Date.now()-C;if(U||V>i){clearInterval(N);const K=U,$={duration:V,deviceLabel:h,maxVolumeLevel:v,result:K};de.info("[track-".concat(n.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify($))),c.onSuccess($),y(K)}},200)})});return function(i){return e.apply(this,arguments)}}(),checkVideoTrackIsActive:function(){var e=l(function*(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const c=qc.reportApiInvoke(null,{tag:Gl.TRACER,name:zl.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[i]});if(!(n instanceof ty||n instanceof Jre)){const V=new ea(_t.INVALID_TRACK,"the parameter is not a video track");return c.onError(V),V.throw()}const h=4;i&&i<1e3&&(i=1e3);const g=n instanceof ty?n.getTrackLabel():"remote_track",v=n.getMediaStreamTrack(!0),m=document.createElement("video");m.style.width="1px",m.style.height="1px",m.setAttribute("muted",""),m.muted=!0,m.setAttribute("playsinline",""),m.controls=!1,(L_()||j8())&&(m.style.opacity="0.01",m.style.position="fixed",m.style.left="0",m.style.top="0",document.body.appendChild(m)),m.srcObject=new MediaStream([v]),m.play();const C=document.createElement("canvas");C.width=160,C.height=120;let y=0,N=0;try{const V=Date.now();y=yield KCe(m,i,C,h),N=Date.now()-V}catch(V){throw c.onError(V),V}WCe===Kp.SAFARI&&(m.pause(),m.remove()),m.srcObject=null;const k=y>h,U={duration:N,changedPicNum:y,deviceLabel:g,result:k};return de.info("[track-".concat(n.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(U))),c.onSuccess(U),k});return function(i){return e.apply(this,arguments)}}(),setArea:function(e){const n=qc.reportApiInvoke(null,{name:zl.SET_AREA,options:e,tag:Gl.TRACER});try{let i=[];if("string"==typeof e&&(i=[e]),Array.isArray(e)&&(e.forEach(h=>{if(!Tue.includes(h))throw new ea(_t.INVALID_PARAMS,"invalid area code")}),i=e),"[object Object]"===Object.prototype.toString.call(e)){const{areaCode:h,excludedArea:g}=e;if(!h)throw new ea(_t.INVALID_PARAMS,"area code is needed");let v=h;"string"==typeof h&&(v=[h]),i=g?function(e,n){let i=[];if(e.includes(_p.GLOBAL)){const g=[_p.GLOBAL,_p.OVERSEA],v=Object.keys(yQ);if(n===_p.GLOBAL)throw new ea(_t.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(n===_p.CHINA)i=[_p.OVERSEA];else if(vde.includes(n)){const m=Bre[_p.GLOBAL][n]||[],C=[...g,n,...m];i=v.filter(y=>!C.includes(y))}else if(function(m){let C=!1;return vde.forEach(y=>{Bre[_p.GLOBAL][y].includes(m)&&(C=!0)}),C}(n)){const m=function(y){let N;return vde.forEach(k=>{Bre[_p.GLOBAL][k].includes(y)&&(N=k)}),N}(n),C=[...g,m,n];i=v.filter(y=>!C.includes(y))}else i=e;i=function(m){const C=[];return Eme.forEach(y=>{m.includes(y)&&C.push(y)}),C.concat(m.filter(y=>!Eme.includes(y)))}(i)}else i=e;return i}(v,g):v}Ag("AREAS",i);const c=(h=>{const g={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return h.map(v=>{const m=yQ[v],C=Object.keys(m);C&&C.map(y=>{"CODE"!==y&&(g[y]=g[y].concat(m[y]))})}),g})(i);Object.keys(c).map(h=>{Ag(h,"LOG_UPLOAD_SERVER"===h||"EVENT_REPORT_DOMAIN"===h||"EVENT_REPORT_BACKUP_DOMAIN"===h||"PROXY_SERVER_TYPE3"===h?c[h][0]:c[h])}),de.debug("set area success:",i.join(","))}catch(i){throw n.onError(i),i}n.onSuccess()},audioElementPlayCenter:eS,processExternalMediaAEC:function(e){JCe.processExternalMediaAEC(e)},registerExtensions:function(e){e.forEach(n=>{const i=n;i.__registered__=!0,i.logger.hookLog=de.extLog,i.reporter.hookApiInvoke=qc.extApiInvoke,i.parameters&&Object.keys(i.parameters).forEach(c=>{i.parameters[c]=ya(c)})})},ChannelMediaRelayError:_w,ChannelMediaRelayEvent:tT,ChannelMediaRelayState:M_,RemoteStreamFallbackType:hY,RemoteStreamType:dY,ConnectionDisconnectedReason:Rp,AudienceLatencyLevelType:gQ,AREAS:_p},_he=window||document;return Object.defineProperties(h1,{onAudioAutoplayFailed:{get:()=>bS.onAudioAutoplayFailed,set:e=>{bS.onAudioAutoplayFailed=e}},onAutoplayFailed:{get:()=>bS.onAutoplayFailed,set:e=>{bS.onAutoplayFailed=e}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:()=>h1._onSecurityPolicyViolation,set(e){if(h1._onSecurityPolicyViolation=e,!_he)return;const n=c=>{if(!(c&&c.blockedURI&&h1.onSecurityPolicyViolation))return;const h=c.blockedURI;ya("CSP_DETECTED_HOSTNAME_LIST").some(g=>h.includes(g))&&h1.onSecurityPolicyViolation&&"function"==typeof h1.onSecurityPolicyViolation&&h1.onSecurityPolicyViolation(c)},i=h1._cspEventHandlerPointer;i&&_he.removeEventListener("securitypolicyviolation",i),e&&"function"==typeof e&&_he.addEventListener("securitypolicyviolation",n),h1._cspEventHandlerPointer=n}}}),_C.on(ZT.CAMERA_DEVICE_CHANGED,e=>{de.info("camera device changed",JSON.stringify(e)),h1.onCameraChanged&&h1.onCameraChanged(e)}),_C.on(ZT.RECORDING_DEVICE_CHANGED,e=>{de.info("microphone device changed",JSON.stringify(e)),h1.onMicrophoneChanged&&h1.onMicrophoneChanged(e)}),_C.on(ZT.PLAYOUT_DEVICE_CHANGED,e=>{de.debug("playout device changed",JSON.stringify(e)),h1.onPlaybackDeviceChanged&&h1.onPlaybackDeviceChanged(e)}),eS.onAutoplayFailed=()=>{de.info("detect audio element autoplay failed"),bS.onAudioAutoplayFailed&&bS.onAudioAutoplayFailed()},Mf.on("autoplay-failed",()=>{de.info("detect webaudio autoplay failed"),bS.onAudioAutoplayFailed&&bS.onAudioAutoplayFailed()}),window&&(window.__ARTC__=h1),h1}()},528:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var t;module=__webpack_require__.nmd(module),t=function(){function Jg(r,t){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);t&&(l=l.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),o.push.apply(o,l)}return o}function tb(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Jg(Object(o),!0).forEach(function(l){E(r,l,o[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):Jg(Object(o)).forEach(function(l){Object.defineProperty(r,l,Object.getOwnPropertyDescriptor(o,l))})}return r}function Ia(r){return(Ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function Zq(r,t,o,l,p,_,R){try{var M=r[_](R),P=M.value}catch(F){return void o(F)}M.done?t(P):Promise.resolve(P).then(l,p)}function za(r){return function(){var t=this,o=arguments;return new Promise(function(l,p){function _(P){Zq(M,l,p,_,R,"next",P)}function R(P){Zq(M,l,p,_,R,"throw",P)}var M=r.apply(t,o);_(void 0)})}}function ab(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function $q(r,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(r,l.key,l)}}function Qb(r,t,o){return t&&$q(r.prototype,t),o&&$q(r,o),r}function E(r,t,o){return t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o,r}function nb(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&ci(r,t)}function Tf(r){return(Tf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(r)}function ci(r,t){return(ci=Object.setPrototypeOf||function(o,l){return o.__proto__=l,o})(r,t)}function ar(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}function dm(r,t,o){return(dm=ar()?Reflect.construct:function(l,p,_){var R=[null];return R.push.apply(R,p),l=new(Function.bind.apply(l,R)),_&&ci(l,_.prototype),l}).apply(null,arguments)}function di(r){var t="function"==typeof Map?new Map:void 0;return(di=function(o){function l(){return dm(o,arguments,Tf(this).constructor)}if(null===o||-1===Function.toString.call(o).indexOf("[native code]"))return o;if("function"!=typeof o)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(o))return t.get(o);t.set(o,l)}return l.prototype=Object.create(o.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),ci(l,o)})(r)}function em(r,t){if(null==r)return{};if(null==r)var o={};else{o={};var l,p=Object.keys(r);for(l=0;l<p.length;l++){var _=p[l];0<=t.indexOf(_)||(o[_]=r[_])}}if(Object.getOwnPropertySymbols)for(l=Object.getOwnPropertySymbols(r),_=0;_<l.length;_++)0<=t.indexOf(p=l[_])||Object.prototype.propertyIsEnumerable.call(r,p)&&(o[p]=r[p]);return o}function L(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function ob(r){var t=ar();return function(){var o=Tf(r);if(t){var l=Tf(this).constructor;o=Reflect.construct(o,arguments,l)}else o=o.apply(this,arguments);return!o||"object"!=typeof o&&"function"!=typeof o?L(this):o}}function fm(r,t,o){return(fm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(l,p,_){for(;!Object.prototype.hasOwnProperty.call(l,p)&&null!==(l=Tf(l)););if(l)return(p=Object.getOwnPropertyDescriptor(l,p)).get?p.get.call(_):p.value})(r,t,o||r)}function Lb(r,t){var o=Array.isArray(r)?r:void 0;if(!o)if(null==(o=r&&("undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"])))o=void 0;else{var l,p=[],_=!0,R=!1;try{for(o=o.call(r);!(_=(l=o.next()).done)&&(p.push(l.value),!t||p.length!==t);_=!0);}catch(P){R=!0;var M=P}finally{try{_||null==o.return||o.return()}finally{if(R)throw M}}o=p}if(!(r=o||br(r,t)))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return r}function ra(r){var t=Array.isArray(r)?gm(r):void 0;if(t||(t="undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"]?Array.from(r):void 0),!(r=t||br(r)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return r}function br(r,t){if(r){if("string"==typeof r)return gm(r,t);var o=Object.prototype.toString.call(r).slice(8,-1);if("Object"===o&&r.constructor&&(o=r.constructor.name),"Map"===o||"Set"===o)return Array.from(r);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return gm(r,t)}}function gm(r,t){(null==t||t>r.length)&&(t=r.length);for(var o=0,l=Array(t);o<t;o++)l[o]=r[o];return l}function Na(r,t,o,l,p){var _={};return Object.keys(l).forEach(function(R){_[R]=l[R]}),_.enumerable=!!_.enumerable,_.configurable=!!_.configurable,("value"in _||_.initializer)&&(_.writable=!0),_=o.slice().reverse().reduce(function(R,M){return M(r,t,R)||R},_),p&&void 0!==_.initializer&&(_.value=_.initializer?_.initializer.call(p):void 0,_.initializer=void 0),void 0===_.initializer&&(Object.defineProperty(r,t,_),_=null),_}function kc(r){var t={exports:{}};return r(t,t.exports),t.exports}function Kg(r){r||(r={});var t=r.ua;if(t||"undefined"==typeof navigator||(t=navigator.userAgent),t&&t.headers&&"string"==typeof t.headers["user-agent"]&&(t=t.headers["user-agent"]),"string"!=typeof t)return!1;var o=JA.test(t)&&!KA.test(t)||!!r.tablet&&LA.test(t);return!o&&r.tablet&&r.featureDetect&&navigator&&1<navigator.maxTouchPoints&&-1!==t.indexOf("Macintosh")&&-1!==t.indexOf("Safari")&&(o=!0),o}function cr(r,t){var o,l=3>arguments.length?r:arguments[2];return ub(r)===l?r[t]:(o=pd.f(r,t))?Fa(o,"value")?o.value:void 0===o.get?void 0:o.get.call(l):fb(o=Md(r))?cr(o,t,l):void 0}function MA(r){var t=r.charCodeAt(0)<<24,o=0|NA(~t),l=0,p=0|r.length,_="";if(5>o&&p>=o){for(t=t<<o>>>24+o,l=1;l<o;l=l+1|0)t=t<<6|63&r.charCodeAt(l);65535>=t?_+=Uf(t):1114111>=t?_+=Uf(55296+((t=t-65536|0)>>10)|0,56320+(1023&t)|0):l=0}for(;l<p;l=l+1|0)_+="\ufffd";return _}function dr(){}function OA(r){var t=0|r.charCodeAt(0);if(55296<=t&&56319>=t){var o=0|r.charCodeAt(1);if(!(o==o&&56320<=o&&57343>=o))return Uf(239,191,189);if(65535<(t=(t-55296<<10)+o-56320+65536|0))return Uf(240|t>>>18,128|t>>>12&63,128|t>>>6&63,128|63&t)}return 127>=t?r:2047>=t?Uf(192|t>>>6,128|63&t):Uf(224|t>>>12,128|t>>>6&63,128|63&t)}function er(){}function kb(){kb.init.call(this)}function Cj(r){if("function"!=typeof r)throw new TypeError('The "listener" argument must be of type Function. Received type '+Ia(r))}function fr(r,t,o,l){Cj(o);var p=r._events;if(void 0===p)p=r._events=Object.create(null),r._eventsCount=0;else{void 0!==p.newListener&&(r.emit("newListener",t,o.listener?o.listener:o),p=r._events);var _=p[t]}return void 0===_?(p[t]=o,++r._eventsCount):("function"==typeof _?_=p[t]=l?[o,_]:[_,o]:l?_.unshift(o):_.push(o),0<(o=void 0===r._maxListeners?kb.defaultMaxListeners:r._maxListeners)&&_.length>o&&!_.warned&&(_.warned=!0,(o=Error("Possible EventEmitter memory leak detected. "+_.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",o.emitter=r,o.type=t,o.count=_.length,console&&console.warn&&console.warn(o))),r}function PA(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function gr(r,t,o){return(t=PA.bind(r={fired:!1,wrapFn:void 0,target:r,type:t,listener:o})).listener=o,r.wrapFn=t}function hr(r,t,o){if(void 0===(r=r._events))return[];if(void 0===(t=r[t]))return[];if("function"==typeof t)return o?[t.listener||t]:[t];if(o)for(o=Array(t.length),r=0;r<o.length;++r)o[r]=t[r].listener||t[r];else o=ir(t,t.length);return o}function jr(r){var t=this._events;if(void 0!==t){if("function"==typeof(r=t[r]))return 1;if(void 0!==r)return r.length}return 0}function ir(r,t){for(var o=Array(t),l=0;l<t;++l)o[l]=r[l];return o}function QA(r,t,o){"function"==typeof r.on&&kr(r,"error",t,o)}function kr(r,t,o,l){if("function"==typeof r.on)l.once?r.once(t,o):r.on(t,o);else{if("function"!=typeof r.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+Ia(r));r.addEventListener(t,function p(_){l.once&&r.removeEventListener(t,p),o(_)})}}function RA(r){return r?ra(r):SA(function(){return[]},function(t,o){return t.push(o),t})}function lr(r,t){var o,l,_;return W.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:o=mr(r)([nr,nr,function(M,P){return P}])[2],l=0;case 2:if(!(l<t.length)){R.next=17;break}if(!((_=o(hm,t[l]))instanceof Dj)){R.next=11;break}if((_=im(_.deref()))===hm){R.next=10;break}return R.next=10,_;case 10:return R.abrupt("return");case 11:if(_===hm){R.next=14;break}return R.next=14,_;case 14:l++,R.next=2;break;case 17:case"end":return R.stop()}},TA)}function Ej(r,t){return null!=t&&"function"==typeof t[Symbol.iterator]?lr(Ej(r),t):function(o){var l=o[2];return UA(o,function(p,_){return l(p,r(_))})}}function Be(r){return Object.prototype.toString.call(r).slice(8,-1)}function Lg(r){return"Object"===Be(r)&&r.constructor===Object&&Object.getPrototypeOf(r)===Object.prototype}function or(r){var t;return(t="Boolean"===Be(r)||"Null"===Be(r)||"Undefined"===Be(r))||(t="Number"===Be(r)&&!isNaN(r)),t||"String"===Be(r)||"Symbol"===Be(r)}function Vf(r){var t=-1,o=null==r?0:r.length;for(this.clear();++t<o;){var l=r[t];this.set(l[0],l[1])}}function Mg(r){var t=-1,o=null==r?0:r.length;for(this.clear();++t<o;){var l=r[t];this.set(l[0],l[1])}}function Ng(r){var t=-1,o=null==r?0:r.length;for(this.clear();++t<o;){var l=r[t];this.set(l[0],l[1])}}function ei(r){var t=-1,o=null==r?0:r.length;for(this.__data__=new Fj;++t<o;)this.add(r[t])}function Og(r){this.size=(this.__data__=new Gj(r)).size}function Pg(r,t,o,l,p,_){var R,M=1&t,P=2&t,F=4&t;if(o&&(R=p?o(r,l,p,_):o(r)),void 0!==R)return R;if(!Kc(r))return r;if(l=lc(r)){if(R=VA(r),!M)return jm(r,R)}else{var G=fi(r),z="[object Function]"==G||"[object GeneratorFunction]"==G;if(gi(r))return pr(r,M);if("[object Object]"==G||"[object Arguments]"==G||z&&!p){if(R=P||z?{}:qr(r),!M)return P?WA(r,XA(R,r)):YA(r,ZA(R,r))}else{if(!zb[G])return p?r:{};R=$A(r,G,M)}}if(_||(_=new Qg),p=_.get(r))return p;_.set(r,R),aB(r)?r.forEach(function(xe){R.add(Pg(xe,t,o,xe,r,_))}):bB(r)&&r.forEach(function(xe,_n){R.set(_n,Pg(xe,t,o,_n,r,_))}),P=F?P?rr:km:P?hi:Wf;var we=l?void 0:P(r);return cB(we||r,function(xe,_n){we&&(xe=r[_n=xe]),sr(R,_n,Pg(xe,t,o,_n,r,_))}),R}function lm(r,t){if("function"!=typeof r||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var o=function l(){var p=arguments,_=t?t.apply(this,p):p[0],R=l.cache;return R.has(_)?R.get(_):(p=r.apply(this,p),l.cache=R.set(_,p)||R,p)};return o.cache=new(lm.Cache||Fj),o}function tr(r){if("string"==typeof r)return r;if(lc(r))return Rg(r,tr)+"";if(Sg(r))return ur?ur.call(r):"";var t=r+"";return"0"==t&&1/r==-dB?"-0":t}function mm(r,t,o,l,p){var _=-1,R=r.length;for(o||(o=eB),p||(p=[]);++_<R;){var M=r[_];0<t&&o(M)?1<t?mm(M,t-1,o,l,p):nm(p,M):l||(p[p.length]=M)}return p}function Tg(r,t,o,l,p){if(r===t)t=!0;else if(null==r||null==t||!ee(r)&&!ee(t))t=r!=r&&t!=t;else e:{var _=lc(r),R=lc(t),M=_?"[object Array]":fi(r),P=R?"[object Array]":fi(t),F="[object Object]"==(M="[object Arguments]"==M?"[object Object]":M);if(R="[object Object]"==(P="[object Arguments]"==P?"[object Object]":P),(P=M==P)&&gi(r)){if(!gi(t)){t=!1;break e}_=!0,F=!1}if(P&&!F)p||(p=new Qg),t=_||om(r)?vr(r,t,o,l,Tg,p):fB(r,t,M,o,l,Tg,p);else{if(!(1&o)&&(_=F&&wr.call(r,"__wrapped__"),M=R&&wr.call(t,"__wrapped__"),_||M)){r=_?r.value():r,t=M?t.value():t,p||(p=new Qg),t=Tg(r,t,o,l,p);break e}if(P)t:if(p||(p=new Qg),_=1&o,M=km(r),R=M.length,P=km(t).length,R==P||_){for(P=R;P--;){var G=M[P];if(!(_?G in t:gB.call(t,G))){t=!1;break t}}if(F=p.get(r),G=p.get(t),F&&G)t=F==t&&G==r;else{F=!0,p.set(r,t),p.set(t,r);for(var z=_;++P<R;){var we=r[G=M[P]],xe=t[G];if(l)var _n=_?l(xe,we,G,t,r,p):l(we,xe,G,r,t,p);if(void 0===_n?we!==xe&&!Tg(we,xe,o,l,p):!_n){F=!1;break}z||(z="constructor"==G)}F&&!z&&(o=r.constructor)!=(l=t.constructor)&&"constructor"in r&&"constructor"in t&&!("function"==typeof o&&o instanceof o&&"function"==typeof l&&l instanceof l)&&(F=!1),p.delete(r),p.delete(t),t=F}}else t=!1;else t=!1}}return t}function Ab(r,t,o){this.low=0|r,this.high=0|t,this.unsigned=!!o}function Lc(r){return!0===(r&&r.__isLong__)}function Xf(r,t){var o;if(t){if((t=0<=(r>>>=0)&&256>r)&&(o=xr[r]))return o;o=Bb(r,0>(0|r)?-1:0,!0),t&&(xr[r]=o)}else{if((t=-128<=(r|=0)&&128>r)&&(o=yr[r]))return o;o=Bb(r,0>r?-1:0,!1),t&&(yr[r]=o)}return o}function qd(r,t){if(isNaN(r))return t?Yf:rd;if(t){if(0>r)return Yf;if(r>=zr)return Ar}else{if(r<=-Br)return Mc;if(r+1>=Br)return Cr}return 0>r?qd(-r,t).neg():Bb(r%Ug|0,r/Ug|0,t)}function Bb(r,t,o){return new Ab(r,t,o)}function pm(r,t,o){if(0===r.length)throw Error("empty string");if("NaN"===r||"Infinity"===r||"+Infinity"===r||"-Infinity"===r)return rd;if("number"==typeof t?(o=t,t=!1):t=!!t,2>(o=o||10)||36<o)throw RangeError("radix");var l;if(0<(l=r.indexOf("-")))throw Error("interior hyphen");if(0===l)return pm(r.substring(1),t,o).neg();l=qd(Hj(o,8));for(var p=rd,_=0;_<r.length;_+=8){var R=Math.min(8,r.length-_),M=parseInt(r.substring(_,_+R),o);8>R?(R=qd(Hj(o,R)),p=p.mul(R).add(qd(M))):p=(p=p.mul(l)).add(qd(M))}return p.unsigned=t,p}function Nd(r,t){return"number"==typeof r?qd(r,t):"string"==typeof r?pm(r,t):Bb(r.low,r.high,"boolean"==typeof t?t:r.unsigned)}function Ca(r,t){function o(){this.constructor=r}qm(r,t),r.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}function Vg(r){return"function"==typeof r}function Wg(r){setTimeout(function(){throw r},0)}function rm(r){return null!==r&&"object"===Ia(r)}function Dr(r){return r.reduce(function(t,o){return t.concat(o instanceof ii?o.errors:o)},[])}function sm(r){for(;r;){var t=r.destination;if(r.closed||r.isStopped)return!1;r=t&&t instanceof hb?t:null}return!0}function jf(r){return r}function tm(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return Er(r)}function Er(r){return 0===r.length?jf:1===r.length?r[0]:function(t){return r.reduce(function(o,l){return l(o)},t)}}function Fr(r){if(r||(r=sd.Promise||Promise),!r)throw Error("no Promise impl found");return r}function Gr(){return function(r){return r.lift(new hB(r))}}function ji(r){return r?iB(r):$c}function iB(r){return new Za(function(t){return r.schedule(function(){return t.complete()})})}function Ce(r){return r&&"function"==typeof r.schedule}function um(r,t){return new Za(function(o){var l=new dc,p=0;return l.add(t.schedule(function(){p===r.length?o.complete():(o.next(r[p++]),o.closed||l.add(this.schedule()))})),l})}function ki(r,t){return t?um(r,t):new Za(Hr(r))}function Wb(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return Ce(t=r[r.length-1])?(r.pop(),um(r,t)):ki(r)}function Va(r,t){return new Za(t?function(o){return t.schedule(jB,0,{error:r,subscriber:o})}:function(o){return o.error(r)})}function jB(r){r.subscriber.error(r.error)}function kB(r,t){return void 0===t&&(t=0),function(o){return o.lift(new lB(r,t))}}function Ir(r){return r in vm&&(delete vm[r],!0)}function fe(){}function Wa(r,t){return function(o){if("function"!=typeof r)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return o.lift(new mB(r,t))}}function Jr(r,t,o){if(t){if(!Ce(t))return function(){for(var l=[],p=0;p<arguments.length;p++)l[p]=arguments[p];return Jr(r,o).apply(void 0,l).pipe(Wa(function(_){return td(_)?t.apply(void 0,_):t(_)}))};o=t}return function(){for(var l=[],p=0;p<arguments.length;p++)l[p]=arguments[p];var _,R=this,M={context:R,subject:_,callbackFunc:r,scheduler:o};return new Za(function(P){if(o)return o.schedule(nB,0,{args:l,subscriber:P,params:M});if(!_){_=new li;try{r.apply(R,l.concat([function(){for(var F=[],G=0;G<arguments.length;G++)F[G]=arguments[G];_.next(1>=F.length?F[0]:F),_.complete()}]))}catch(F){sm(_)?_.error(F):console.warn(F)}}return _.subscribe(P)})}}function nB(r){var t=this,o=r.args,l=r.subscriber,p=r.params;r=p.callbackFunc;var _=p.context,R=p.scheduler,M=p.subject;if(!M){M=p.subject=new li,p=function(){for(var P=[],F=0;F<arguments.length;F++)P[F]=arguments[F];t.add(R.schedule(oB,0,{value:1>=P.length?P[0]:P,subject:M}))};try{r.apply(_,o.concat([p]))}catch(P){M.error(P)}}this.add(M.subscribe(l))}function oB(r){var t=r.subject;t.next(r.value),t.complete()}function Kr(r,t,o){if(t){if(!Ce(t))return function(){for(var l=[],p=0;p<arguments.length;p++)l[p]=arguments[p];return Kr(r,o).apply(void 0,l).pipe(Wa(function(_){return td(_)?t.apply(void 0,_):t(_)}))};o=t}return function(){for(var l=[],p=0;p<arguments.length;p++)l[p]=arguments[p];var _={subject:void 0,args:l,callbackFunc:r,scheduler:o,context:this};return new Za(function(R){var M=_.context,P=_.subject;if(o)return o.schedule(pB,0,{params:_,subscriber:R,context:M});if(!P){P=_.subject=new li;try{r.apply(M,l.concat([function(){for(var F=[],G=0;G<arguments.length;G++)F[G]=arguments[G];(G=F.shift())?P.error(G):(P.next(1>=F.length?F[0]:F),P.complete())}]))}catch(F){sm(P)?P.error(F):console.warn(F)}}return P.subscribe(R)})}}function pB(r){var t=this,o=r.params,l=r.subscriber;r=r.context;var p=o.callbackFunc,_=o.args,R=o.scheduler,M=o.subject;if(!M){M=o.subject=new li,o=function(){for(var P=[],F=0;F<arguments.length;F++)P[F]=arguments[F];(F=P.shift())?t.add(R.schedule(Lr,0,{err:F,subject:M})):t.add(R.schedule(qB,0,{value:1>=P.length?P[0]:P,subject:M}))};try{p.apply(r,_.concat([o]))}catch(P){this.add(R.schedule(Lr,0,{err:P,subject:M}))}}this.add(M.subscribe(l))}function qB(r){var t=r.subject;t.next(r.value),t.complete()}function Lr(r){r.subject.error(r.err)}function Mr(r){return!!r&&"function"!=typeof r.subscribe&&"function"==typeof r.then}function wm(r,t,o,l,p){if(void 0===p&&(p=new rB(r,o,l)),!p.closed)return t instanceof Za?t.subscribe(p):mi(t)(p)}function sB(r,t){return new Za(function(o){var l=new dc;return l.add(t.schedule(function(){var p=r[Xg]();l.add(p.subscribe({next:function(_){l.add(t.schedule(function(){return o.next(_)}))},error:function(_){l.add(t.schedule(function(){return o.error(_)}))},complete:function(){l.add(t.schedule(function(){return o.complete()}))}}))})),l})}function tB(r,t){return new Za(function(o){var l=new dc;return l.add(t.schedule(function(){return r.then(function(p){l.add(t.schedule(function(){o.next(p),l.add(t.schedule(function(){return o.complete()}))}))},function(p){l.add(t.schedule(function(){return o.error(p)}))})})),l})}function uB(r,t){if(!r)throw Error("Iterable cannot be null");return new Za(function(o){var l,p=new dc;return p.add(function(){l&&"function"==typeof l.return&&l.return()}),p.add(t.schedule(function(){l=r[kf](),p.add(t.schedule(function(){if(!o.closed){try{var _=l.next(),R=_.value,M=_.done}catch(P){return void o.error(P)}M?o.complete():(o.next(R),this.schedule())}}))})),p})}function Nr(r,t){if(null!=r){if(r&&"function"==typeof r[Xg])return sB(r,t);if(Mr(r))return tB(r,t);if(Or(r))return um(r,t);if(r&&"function"==typeof r[kf]||"string"==typeof r)return uB(r,t)}throw new TypeError((null!==r&&Ia(r)||r)+" is not observable")}function ge(r,t){return t?Nr(r,t):r instanceof Za?r:new Za(mi(r))}function De(r,t){if(!t.closed){if(r instanceof Za)return r.subscribe(t);try{var o=mi(r)(t)}catch(l){t.error(l)}return o}}function Ac(r,t,o){return void 0===o&&(o=Number.POSITIVE_INFINITY),"function"==typeof t?function(l){return l.pipe(Ac(function(p,_){return ge(r(p,_)).pipe(Wa(function(R,M){return t(p,R,_,M)}))},o))}:("number"==typeof t&&(o=t),function(l){return l.lift(new vB(r,o))})}function Ij(r){return void 0===r&&(r=Number.POSITIVE_INFINITY),Ac(jf,r)}function Pr(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return Ij(1)(Wb.apply(void 0,r))}function lf(r){return new Za(function(t){try{var o=r()}catch(l){return void t.error(l)}return(o?ge(o):ji()).subscribe(t)})}function Jj(r,t){return new Za(function(o){var l=r.length;if(0===l)o.complete();else for(var p=Array(l),_=0,R=0,M=function(F){var G=ge(r[F]),z=!1;o.add(G.subscribe({next:function(we){z||(z=!0,R++),p[F]=we},error:function(we){return o.error(we)},complete:function(){++_!==l&&z||(R===l&&o.next(t?t.reduce(function(we,xe,_n){return we[xe]=p[_n],we},{}):p),o.complete())}}))},P=0;P<l;P++)M(P)})}function Bc(r,t,o,l){return Vg(o)&&(l=o,o=void 0),l?Bc(r,t,o).pipe(Wa(function(p){return td(p)?l.apply(void 0,p):l(p)})):new Za(function(p){Qr(r,t,function(_){p.next(1<arguments.length?Array.prototype.slice.call(arguments):_)},p,o)})}function Qr(r,t,o,l,p){if(r&&"function"==typeof r.addEventListener&&"function"==typeof r.removeEventListener){r.addEventListener(t,o,p);var _=function(){return r.removeEventListener(t,o,p)}}else if(r&&"function"==typeof r.on&&"function"==typeof r.off)r.on(t,o),_=function(){return r.off(t,o)};else if(r&&"function"==typeof r.addListener&&"function"==typeof r.removeListener)r.addListener(t,o),_=function(){return r.removeListener(t,o)};else{if(!r||!r.length)throw new TypeError("Invalid event target");for(var R=0,M=r.length;R<M;R++)Qr(r[R],t,o,l,p)}l.add(_)}function Rr(r,t,o){return o?Rr(r,t).pipe(Wa(function(l){return td(l)?o.apply(void 0,l):o(l)})):new Za(function(l){var p=function(){for(var R=[],M=0;M<arguments.length;M++)R[M]=arguments[M];return l.next(1===R.length?R[0]:R)};try{var _=r(p)}catch(R){return void l.error(R)}if(Vg(t))return function(){return t(p,_)}})}function wB(r){var t=r.subscriber,o=r.condition;if(!t.closed){if(r.needIterate)try{r.state=r.iterate(r.state)}catch(_){return void t.error(_)}else r.needIterate=!0;if(o){var l=void 0;try{l=o(r.state)}catch(_){return void t.error(_)}if(!l)return void t.complete();if(t.closed)return}try{var p=r.resultSelector(r.state)}catch(_){return void t.error(_)}if(!t.closed&&(t.next(p),!t.closed))return this.schedule(r)}}function xm(r){return!td(r)&&0<=r-parseFloat(r)+1}function Yg(r,t){return void 0===r&&(r=0),void 0===t&&(t=Ee),(!xm(r)||0>r)&&(r=0),t&&"function"==typeof t.schedule||(t=Ee),new Za(function(o){return o.add(t.schedule(xB,r,{subscriber:o,counter:0,period:r})),o})}function xB(r){var t=r.subscriber,o=r.counter;r=r.period,t.next(o),this.schedule({subscriber:t,counter:o+1,period:r},r)}function Nc(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];t=Number.POSITIVE_INFINITY;var o=null,l=r[r.length-1];return Ce(l)?(o=r.pop(),1<r.length&&"number"==typeof r[r.length-1]&&(t=r.pop())):"number"==typeof l&&(t=r.pop()),null===o&&1===r.length&&r[0]instanceof Za?r[0]:Ij(t)(ki(r,o))}function ym(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(0===r.length)return $c;var o=r[0],l=r.slice(1);return 1===r.length&&td(o)?ym.apply(void 0,o):new Za(function(p){var _=function(){return p.add(ym.apply(void 0,l).subscribe(p))};return ge(o).subscribe({next:function(R){p.next(R)},error:_,complete:_})})}function yB(r){var t=r.keys,o=r.index,l=r.subscriber,p=r.subscription;if(r=r.obj,!l.closed)if(o<t.length){var _=t[o];l.next([_,r[_]]),p.add(this.schedule({keys:t,index:o+1,subscriber:l,subscription:p,obj:r}))}else l.complete()}function zB(r,t){function o(){return!o.pred.apply(o.thisArg,arguments)}return o.pred=r,o.thisArg=t,o}function sc(r,t){return function(o){return o.lift(new AB(r,t))}}function bb(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(1===r.length){if(!td(r[0]))return r[0];r=r[0]}return ki(r,void 0).lift(new BB)}function CB(r){var t=r.start,o=r.index,l=r.subscriber;o>=r.count?l.complete():(l.next(t),l.closed||(r.index=o+1,r.start=t+1,this.schedule(r)))}function Fe(r,t,o){void 0===r&&(r=0);var l=-1;return xm(t)?l=1>Number(t)?1:Number(t):Ce(t)&&(o=t),Ce(o)||(o=Ee),new Za(function(p){var _=xm(r)?r:+r-o.now();return o.schedule(DB,_,{index:0,period:l,subscriber:p})})}function DB(r){var t=r.index,o=r.period,l=r.subscriber;if(l.next(t),!l.closed){if(-1===o)return l.complete();r.index=t+1,this.schedule(r,o)}}function zm(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return"function"==typeof(t=r[r.length-1])&&r.pop(),ki(r,void 0).lift(new EB(t))}function Kj(r){var t=arguments.length,o=Ee;Ce(arguments[arguments.length-1])&&(o=arguments[arguments.length-1],t--);var l=null;2<=t&&(l=arguments[1]);var p=Number.POSITIVE_INFINITY;return 3<=t&&(p=arguments[2]),function(_){return _.lift(new FB(r,l,p,o))}}function Sr(r){var t=r.subscriber,o=r.context;o&&t.closeContext(o),t.closed||(r.context=t.openContext(),r.context.closeAction=this.schedule(r,r.bufferTimeSpan))}function GB(r){var t=r.bufferCreationInterval,o=r.bufferTimeSpan,l=r.subscriber,p=r.scheduler,_=l.openContext();l.closed||(l.add(_.closeAction=p.schedule(Tr,o,{subscriber:l,context:_})),this.schedule(r,t))}function Tr(r){r.subscriber.closeContext(r.context)}function Rb(r){return function(t){var o=new HB(r);return t=t.lift(o),o.caught=t}}function Am(r,t){return Ac(r,t,1)}function Ur(r){return void 0===r&&(r=null),function(t){return t.lift(new IB(r))}}function mf(r,t){void 0===t&&(t=Ee);var o=r instanceof Date&&!isNaN(+r)?+r-t.now():Math.abs(r);return function(l){return l.lift(new JB(o,t))}}function Vr(r,t){return function(o){return o.lift(new KB(r,t))}}function Zf(r){return void 0===r&&(r=LB),function(t){return t.lift(new MB(r))}}function LB(){return new Lj}function Xb(r){return function(t){return 0===r?ji():t.lift(new NB(r))}}function Mj(r){return function(t){return t.lift(new OB(r))}}function La(r,t){var o=2<=arguments.length;return function(l){return l.pipe(r?sc(function(p,_){return r(p,_,l)}):jf,Xb(1),o?Ur(t):Zf(function(){return new Lj}))}}function PB(){return function(r){return r.lift(new QB)}}function Wr(r){return function(t){return 0===r?ji():t.lift(new RB(r))}}function ni(r){return function(t){return t.lift(new SB(r))}}function Nj(r,t){var o=!1;return 2<=arguments.length&&(o=!0),function(l){return l.lift(new TB(r,t,o))}}function Xr(r,t){return 2<=arguments.length?function(o){return tm(Nj(r,t),Wr(1),Ur(t))(o)}:function(o){return tm(Nj(function(l,p,_){return r(l,p,_+1)}),Wr(1))(o)}}function UB(r,t){return function(o){var l="function"==typeof r?r:function(){return r};if("function"==typeof t)return o.lift(new VB(l,t));var p=Object.create(o,WB);return p.source=o,p.subjectFactory=l,p}}function Zg(r){return function(t){return t.lift(new XB(r,t))}}function YB(){return new ec}function $g(){return function(r){return Gr()(UB(YB)(r))}}function Yr(r,t,o){var l=r&&"object"===Ia(r)?r:{bufferSize:r,windowTime:t,refCount:!1,scheduler:o};return function(p){return p.lift(ZB(l))}}function ZB(r){var t,o,l=r.bufferSize,p=void 0===l?Number.POSITIVE_INFINITY:l,_=void 0===(l=r.windowTime)?Number.POSITIVE_INFINITY:l,R=r.refCount,M=r.scheduler,P=0,F=!1,G=!1;return function(z){if(P++,!t||F){F=!1;var we=(t=new ah(p,_,M)).subscribe(this);o=z.subscribe({next:function(xe){t.next(xe)},error:function(xe){F=!0,t.error(xe)},complete:function(){G=!0,o=void 0,t.complete()}}),G&&(o=void 0)}else we=t.subscribe(this);this.add(function(){P--,we.unsubscribe(),we=void 0,o&&!G&&R&&0===P&&(o.unsubscribe(),t=o=void 0)})}}function Cc(r,t){return"function"==typeof t?function(o){return o.pipe(Cc(function(l,p){return ge(r(l,p)).pipe(Wa(function(_,R){return t(l,_,p,R)}))}))}:function(o){return o.lift(new $B(r))}}function he(r){return function(t){return t.lift(new aC(r))}}function Ka(r,t,o){return function(l){return l.lift(new bC(r,t,o))}}function cC(r,t,o){return void 0===t&&(t=Ee),void 0===o&&(o=dC),function(l){return l.lift(new eC(r,t,o.leading,o.trailing))}}function fC(r){r.subscriber.clearThrottle()}function gC(r,t,o){return void 0===o&&(o=Ee),function(l){var p=r instanceof Date&&!isNaN(+r),_=p?+r-o.now():Math.abs(r);return l.lift(new hC(_,p,t,o))}}function Oc(r,t){return void 0===t&&(t=Ee),gC(r,Va(new ad),t)}function iC(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(o){var l;return"function"==typeof r[r.length-1]&&(l=r.pop()),o.lift(new jC(r,l))}}function Zr(r){(Bm||r)&&($r.abort(),r&&($r=new AbortController),Bm=r)}function as(r,t,o,l,p){r!==t&&bs(t,function(_,R){if(p||(p=new Qg),Kc(_)){_=p;var M=Cm(r,R),P=Cm(t,R),F=_.get(P);if(F)Dm(r,R,F);else{var G=void 0===(F=l?l(M,P,R+"",r,t,_):void 0);if(G){var z=lc(P),we=!z&&gi(P),xe=!z&&!we&&om(P);F=P,z||we||xe?lc(M)?F=M:ee(M)&&$f(M)?F=jm(M):we?(G=!1,F=pr(P,!0)):xe?(G=!1,F=cs(P,!0)):F=[]:ds(P)||oi(P)?(F=M,oi(M)?F=bh(M,hi(M)):Kc(M)&&!Em(M)||(F=qr(P))):G=!1}G&&(_.set(P,F),as(F,P,o,l,_),_.delete(P)),Dm(r,R,F)}}else void 0===(M=l?l(Cm(r,R),_,R+"",r,t,p):void 0)&&(M=_),Dm(r,R,M)},hi)}function kC(r){var t=1,o=Fm;1==(1>=arguments.length?0:arguments.length-1)?"number"==typeof(1>=arguments.length?void 0:arguments[1])?t=1>=arguments.length?void 0:arguments[1]:o=1>=arguments.length?void 0:arguments[1]:2==(1>=arguments.length?0:arguments.length-1)&&(t=1>=arguments.length?void 0:arguments[1],o=2>=arguments.length?void 0:arguments[2]);var l=t||1;return function(p){return p.pipe(Nj(function(_,R){var M=o.now(),P=M-r;if((_=_.filter(function(z){return z.until>P})).length>=l){var F=_[_.length-1],G=_[0].until+r*Math.floor(_.length/l);_.push({delay:F.until<M?G-M:G-F.until,until:G,value:R})}else _.push({delay:0,until:M,value:R});return _},[]),Wa(function(_){return _[_.length-1]}),Am(function(_){var R=Wb(_.value);return _.delay?R.pipe(mf(_.delay,o)):R}))}}function lC(r,t){var o=(t=void 0===t?{protocols:es,makeWebSocket:fs}:t).protocols,l=void 0===o?es:o,p=void 0===(t=t.makeWebSocket)?fs:t;return new Za(function(_){var R,M=new ec,P=p(r,l),F=!1,G=!1,z=!1,we=function(xe){if(R)throw F=!0,xe=Error("Web socket message factory function called more than once"),_.error(xe),xe;return R=xe.subscribe(function(_n){P.send(_n)}),M};return P.onopen=function(){z=!0,G?(F=!0,P.close()):_.next(we)},P.onmessage=function(xe){M.next(xe.data)},P.onerror=function(xe){F=!0,_.error(Error(xe.message))},P.onclose=function(xe){F||(F=!0,G?(_.complete(),M.complete()):_.error(Error(1e3===xe.code?"Normal closure":xe.reason)))},function(){G=!0,R&&R.unsubscribe(),F||(F=!0,z&&P.close())}})}function Oj(){this._listeners={}}function gs(r){return"undefined"!=typeof Float32Array?function(){function t(P,F,G){_[0]=P,F[G]=R[0],F[G+1]=R[1],F[G+2]=R[2],F[G+3]=R[3]}function o(P,F,G){_[0]=P,F[G]=R[3],F[G+1]=R[2],F[G+2]=R[1],F[G+3]=R[0]}function l(P,F){return R[0]=P[F],R[1]=P[F+1],R[2]=P[F+2],R[3]=P[F+3],_[0]}function p(P,F){return R[3]=P[F],R[2]=P[F+1],R[1]=P[F+2],R[0]=P[F+3],_[0]}var _=new Float32Array([-0]),R=new Uint8Array(_.buffer),M=128===R[3];r.writeFloatLE=M?t:o,r.writeFloatBE=M?o:t,r.readFloatLE=M?l:p,r.readFloatBE=M?p:l}():function(){function t(l,p,_,R){var M=0>p?1:0;if(M&&(p=-p),0===p)l(0<1/p?0:2147483648,_,R);else if(isNaN(p))l(2143289344,_,R);else if(34028234663852886e22<p)l((M<<31|2139095040)>>>0,_,R);else if(11754943508222875e-54>p)l((M<<31|Math.round(p/1401298464324817e-60))>>>0,_,R);else{var P=Math.floor(Math.log(p)/Math.LN2);l((M<<31|P+127<<23|8388607&Math.round(p*Math.pow(2,-P)*8388608))>>>0,_,R)}}function o(l,p,_){return _=l(p,_),l=2*(_>>31)+1,p=_>>>23&255,_&=8388607,255===p?_?NaN:1/0*l:0===p?1401298464324817e-60*l*_:l*Math.pow(2,p-150)*(_+8388608)}r.writeFloatLE=t.bind(null,hs),r.writeFloatBE=t.bind(null,is),r.readFloatLE=o.bind(null,js),r.readFloatBE=o.bind(null,ks)}(),"undefined"!=typeof Float64Array?function(){function t(P,F,G){_[0]=P,F[G]=R[0],F[G+1]=R[1],F[G+2]=R[2],F[G+3]=R[3],F[G+4]=R[4],F[G+5]=R[5],F[G+6]=R[6],F[G+7]=R[7]}function o(P,F,G){_[0]=P,F[G]=R[7],F[G+1]=R[6],F[G+2]=R[5],F[G+3]=R[4],F[G+4]=R[3],F[G+5]=R[2],F[G+6]=R[1],F[G+7]=R[0]}function l(P,F){return R[0]=P[F],R[1]=P[F+1],R[2]=P[F+2],R[3]=P[F+3],R[4]=P[F+4],R[5]=P[F+5],R[6]=P[F+6],R[7]=P[F+7],_[0]}function p(P,F){return R[7]=P[F],R[6]=P[F+1],R[5]=P[F+2],R[4]=P[F+3],R[3]=P[F+4],R[2]=P[F+5],R[1]=P[F+6],R[0]=P[F+7],_[0]}var _=new Float64Array([-0]),R=new Uint8Array(_.buffer),M=128===R[7];r.writeDoubleLE=M?t:o,r.writeDoubleBE=M?o:t,r.readDoubleLE=M?l:p,r.readDoubleBE=M?p:l}():function(){function t(l,p,_,R,M,P){var F=0>R?1:0;if(F&&(R=-R),0===R)l(0,M,P+p),l(0<1/R?0:2147483648,M,P+_);else if(isNaN(R))l(0,M,P+p),l(2146959360,M,P+_);else if(17976931348623157e292<R)l(0,M,P+p),l((F<<31|2146435072)>>>0,M,P+_);else if(22250738585072014e-324>R)l((R/=5e-324)>>>0,M,P+p),l((F<<31|R/4294967296)>>>0,M,P+_);else{var G=Math.floor(Math.log(R)/Math.LN2);1024===G&&(G=1023),l(4503599627370496*(R*=Math.pow(2,-G))>>>0,M,P+p),l((F<<31|G+1023<<20|1048576*R&1048575)>>>0,M,P+_)}}function o(l,p,_,R,M){return p=l(R,M+p),R=l(R,M+_),l=2*(R>>31)+1,p=4294967296*(1048575&R)+p,2047==(_=R>>>20&2047)?p?NaN:1/0*l:0===_?5e-324*l*p:l*Math.pow(2,_-1075)*(p+4503599627370496)}r.writeDoubleLE=t.bind(null,hs,0,4),r.writeDoubleBE=t.bind(null,is,4,0),r.readDoubleLE=o.bind(null,js,0,4),r.readDoubleBE=o.bind(null,ks,4,0)}(),r}function hs(r,t,o){t[o]=255&r,t[o+1]=r>>>8&255,t[o+2]=r>>>16&255,t[o+3]=r>>>24}function is(r,t,o){t[o]=r>>>24,t[o+1]=r>>>16&255,t[o+2]=r>>>8&255,t[o+3]=255&r}function js(r,t){return(r[t]|r[t+1]<<8|r[t+2]<<16|r[t+3]<<24)>>>0}function ks(r,t){return(r[t]<<24|r[t+1]<<16|r[t+2]<<8|r[t+3])>>>0}function mc(r,t){this.lo=r>>>0,this.hi=t>>>0}function pi(r,t,o){this.fn=r,this.len=t,this.next=void 0,this.val=o}function Gm(){}function mC(r){this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states}function ib(){this.len=0,this.tail=this.head=new pi(Gm,0,0),this.states=null}function Hm(r,t,o){t[o]=255&r}function Im(r,t){this.len=r,this.next=void 0,this.val=t}function Jm(r,t,o){for(;r.hi;)t[o++]=127&r.lo|128,r.lo=(r.lo>>>7|r.hi<<25)>>>0,r.hi>>>=7;for(;127<r.lo;)t[o++]=127&r.lo|128,r.lo>>>=7;t[o++]=r.lo}function Km(r,t,o){t[o]=255&r,t[o+1]=r>>>8&255,t[o+2]=r>>>16&255,t[o+3]=r>>>24}function ie(){Lm.call(this)}function nC(r,t,o){40>r.length?Ra.utf8.write(r,t,o):t.utf8Write?t.utf8Write(r,o):t.write(r,o)}function Od(r,t){return RangeError("index out of range: "+r.pos+" + "+(t||1)+" > "+r.len)}function Yb(r){this.buf=r,this.pos=0,this.len=r.length}function Mm(){var r=new ls(0,0),t=0;if(!(4<this.len-this.pos)){for(;3>t;++t){if(this.pos>=this.len)throw Od(this);if(r.lo=(r.lo|(127&this.buf[this.pos])<<7*t)>>>0,128>this.buf[this.pos++])return r}return r.lo=(r.lo|(127&this.buf[this.pos++])<<7*t)>>>0,r}for(;4>t;++t)if(r.lo=(r.lo|(127&this.buf[this.pos])<<7*t)>>>0,128>this.buf[this.pos++])return r;if(r.lo=(r.lo|(127&this.buf[this.pos])<<28)>>>0,r.hi=(r.hi|(127&this.buf[this.pos])>>4)>>>0,128>this.buf[this.pos++])return r;if(t=0,4<this.len-this.pos){for(;5>t;++t)if(r.hi=(r.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,128>this.buf[this.pos++])return r}else for(;5>t;++t){if(this.pos>=this.len)throw Od(this);if(r.hi=(r.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,128>this.buf[this.pos++])return r}throw Error("invalid varint encoding")}function Pj(r,t){return(r[t-4]|r[t-3]<<8|r[t-2]<<16|r[t-1]<<24)>>>0}function ms(){if(this.pos+8>this.len)throw Od(this,8);return new ls(Pj(this.buf,this.pos+=4),Pj(this.buf,this.pos+=4))}function ag(r){Nm.call(this,r)}function qi(r,t,o){if("function"!=typeof r)throw TypeError("rpcImpl must be a function");Ra.EventEmitter.call(this),this.rpcImpl=r,this.requestDelimited=!!t,this.responseDelimited=!!o}function yb(r){return"string"==typeof r&&/^[\s\w!#$%&()+,.:;<=>?@[\]^{|}~-]{1,64}$/.test(r)&&"null"!==r}function ns(r){try{var t=r.split(".").map(function(l){return Number(l)})}catch(l){return!1}if(4!==t.length||0===t[0])return!1;for(r=0;r<t.length;r++){var o=t[r];if(!Number.isInteger(o)||0>o||255<o)return!1}return!0}function os(r,t){if(!Array.isArray(t)||0===t.length||32<t.length||t.some(function(o){return 0===o.length||32<o.length}))throw new ja("arguments is not valid",Ub);if(!yb(r))throw new ja("ID is invalid",Ub)}function ri(r){var t=r.attributes,o=r.attrSizeMap,l=r.maxAttrsCount,p=r.maxAttrValueSize;if(r=r.maxTotalSize,!Lg(t))throw new ja("attributes must be an object",Ub);if(Object.keys(t).length>l)throw new Dc("Exceed the limit of ".concat(l," attributes"),ch);if(0===Object.keys(t).length)throw new ja("The attributes is an empty object",Ub);var _=0,R=0;for(t=Object.entries(t);R<t.length;R++){var M=Lb(t[R],2),P=M[1];M=new Blob([M[0]]).size;var F=new Blob([P]).size;if(0===M||32<M)throw new ja("Invalid attribute key",Ub);if(F>p)throw new Dc("Invalid attribute value, over the limit of ".concat(p," bytes"),ch);if("string"!=typeof P||0===P.length)throw new ja("Invalid attribute value",Ub);_+=M,_+=F}if(_>r)throw new Dc("The attributes size overflow",ch);if(void 0!==o){if(Object.keys(o).length>l)throw new Dc("Exceed the limit of ".concat(l," attributes"),ch);for(_=l=0,o=Object.entries(o);_<o.length;_++){if(R=(t=Lb(o[_],2))[1],0===(t=new Blob([t[0]]).size))throw new ja("Invalid attribute key",Ub);if(R>p)throw new Dc("Invalid attribute value, over the limit of ".concat(p," bytes"),ch);l+=t,l+=R}if(l>r)throw new Dc("The attributes size overflow",ch)}}function nf(r){var t=r.items,o=r.maxMetaDataCount,l=r.maxMetaValueSize;if(r=r.type,!Array.isArray(t))throw new ja("params must be an MetadataItem array",Mb);var p=t.map(function(F){return[F.getKey(),F.getValue()]});if(p.length>o)throw new Dc("Exceed the limit of ".concat(o," metadata items"),Om);if(0===p.length)throw new ja("The metadata is empty ",Mb);if(("Update"===r||"Delete"===r)&&t.map(function(F){return F.getRevision()}).includes(0))throw new ja("The operation limit metadata revision can not set 0 ",of);for(o=0;o<p.length;o++){var _=Lb(p[o],2),R=_[0];_=_[1];var M=new Blob([null!=R?R:""]).size,P=new Blob([null!=_?_:""]).size;if("_"===(null==R?void 0:R[0]))throw new ja("Invalid metaData key",Mb);if(0===M||32<M)throw new ja("Invalid metaData key",Om);if("string"!=typeof _)throw new ja("Invalid metadata value",Mb);if("Delete"!==r&&P>l)throw new Dc("Invalid metadata value, over the limit of ".concat(l," bytes"),Om)}if(new Set(t.map(function(F){return F.getKey()})).size!==t.map(function(F){return F.getKey()}).length)throw new ja("meta data params key must be key must be unique",oC)}function Qj(r,t){return Math.floor(Math.random()*(Math.floor(t)-Math.ceil(r)+1))+r}function Rj(){var r=Qj(0,4294967295),t=Qj(1,4294967295);return new D(r,t,!0)}function fc(r){return r.toString().padEnd(32,"0")}function ps(r,t){return new TypeError("Unexpected ".concat(r,": ").concat(t))}function qs(r,t){return r=r.split(".").map(function(o){return Number(o)}),t=t.split(".").map(function(o){return Number(o)}),Math.sqrt(1e3*Math.pow(r[0]-t[0],2)+100*Math.pow(r[1]-t[1],2)+10*Math.pow(r[2]-t[2],2)+1*Math.pow(r[3]-t[3],2))}function rs(r){return r.lessThanOrEqual(Number.MAX_SAFE_INTEGER)?r.toNumber():r.toString()}function Pm(r,t){t="".concat(r).concat(t||"");var o=ss.get(t)||1;return ss.set(t,o+1),"".concat(r).concat(o)}function ts(r,t){var o="number"==typeof t?t:void 0!==t&&"string"!=typeof t?t.code:void 0;return t="number"!=typeof t&&"string"!=typeof t&&void 0!==t&&void 0!==t.serverCode?t.serverCode:void 0,o="".concat(void 0!==o?" Error Code ".concat(o):"").concat(void 0!==t?", server Code ".concat(t):""),r="string"==typeof r&&r?Sj(r):Array.isArray(r)&&"string"==typeof r[0]&&r[0]?Sj(us.apply(void 0,[r[0]].concat(ra(r.slice(1))))):"","".concat(""===o?"":"".concat(o," - ")).concat(r)}function pC(r,t){return Qm.apply(this,arguments)}function Qm(){return(Qm=za(W.mark(function r(t,o){return W.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!o||!o.aborted){l.next=2;break}return l.abrupt("return");case 2:return l.abrupt("return",new Promise(function(p){setTimeout(p,t),null==o||o.addEventListener("abort",p)}));case 3:case"end":return l.stop()}},r)}))).apply(this,arguments)}function Tj(r,t,o){return Rm.apply(this,arguments)}function Rm(){return(Rm=za(W.mark(function r(t,o,l){var p,_,R,M,P,F,G,z,we,xe,_n,fa,da,Ta,Da,Ja,Vl,xl,kd,E0,Ha,Rl;return W.wrap(function(ic){for(;;)switch(ic.prev=ic.next){case 0:if(p=o.body,R=void 0===(_=o.headers)?{}:_,P=void 0===(M=o.timeout)?1e4:M,F=o.signal,z=void 0!==(G=o.withCredentials)&&G,xe=void 0!==(we=(l||{}).useBinaryResponse)&&we,(_n=new XMLHttpRequest).open("POST",t,!0),_n.responseType=xe?"arraybuffer":"text",_n.withCredentials=z,_n.timeout=P,fa=p instanceof FormData,da=p instanceof Uint8Array,!(1<(Ta=Object.keys(R).filter(function(wc){return"content-type"===wc.toLowerCase()})).length)){ic.next=14;break}throw new RangeError("multiple content-type");case 14:0===Ta.length&&(da?R["Content-Type"]="application/octet-stream":fa||(R["Content-Type"]="application/json"));case 15:if("setRequestHeader"in _n){ic.next=46;break}return _n.abort(),ic.next=19,fetch(t,{body:fa||da?p:JSON.stringify(p),cache:"no-cache",credentials:z?"include":"same-origin",headers:R,method:"POST",mode:"cors",referrer:"no-referrer",signal:F});case 19:if(!(200<=(Ja=(Da=ic.sent).status)&&300>Ja||304===Ja)){ic.next=31;break}if(!xe){ic.next=27;break}return ic.next=25,Da.arrayBuffer();case 25:return ic.abrupt("return",{status:Ja,responseData:ic.sent});case 27:return ic.next=29,Da.text();case 29:return ic.abrupt("return",{status:Ja,responseText:ic.sent});case 31:return Vl=new Pa(["Post XHR failure, status %d",Ja]),ic.prev=32,ic.next=35,Da.text();case 35:throw xl=ic.sent,Vl.statusCode=Ja,Vl.message=xl||"Request failed, status ".concat(Ja),Vl;case 41:throw ic.prev=41,ic.t0=ic.catch(32),Vl.statusCode=Ja,Vl.message="Request failed, status ".concat(Ja),Vl;case 46:if(0!==Object.keys(R).length)for(kd=0,E0=Object.entries(R);kd<E0.length;kd++)Ha=Lb(E0[kd],2),_n.setRequestHeader(Ha[0],Ha[1]);return void 0!==F&&(Rl=function wc(){_n.abort(),F.removeEventListener("abort",wc)},F.addEventListener("abort",Rl)),_n.send(fa||da?p:JSON.stringify(p)),ic.abrupt("return",new Promise(function(wc,tl){_n.onload=function(){var Sl=_n.status;if(200<=Sl&&300>Sl||304===Sl)wc(xe?{status:Sl,responseData:_n.response}:{status:Sl,responseText:_n.responseText});else{var kl=new Pa(["Post XHR failure, status %d",Sl]);kl.statusCode=Sl,kl.message=_n.response||"Request failed, status ".concat(_n.status),tl(kl)}},_n.ontimeout=function(Sl){tl(new Pc(["XHR request timed out after %d ms",P],{originalError:Sl}))},_n.onerror=function(){var Sl=new Pa(["Post XHR failure, status %d",_n.status]);Sl.statusCode=_n.status,Sl.message=_n.response||"Request failed, status ".concat(_n.status),tl(Sl)},_n.onabort=function(){try{tl(new DOMException("The request aborted.","AbortError"))}catch(kl){var Sl=Error("The request aborted.");Sl.name="AbortError",tl(Sl)}}}));case 50:case"end":return ic.stop()}},r,null,[[32,41]])}))).apply(this,arguments)}function vs(r,t){if(!Lg(r))throw new ja("message object is not a plain object",t);if(void 0===r.messageType)if(r.rawMessage instanceof Uint8Array){if(r.messageType="RAW",void 0!==r.text)throw new ja("Raw messages cannot have text property. Use description instead",t)}else{if("string"!=typeof r.text)throw new ja("messageType is undefined",t);if(r.messageType="TEXT",void 0!==r.rawMessage)throw new ja("Text messages cannot have rawMessage property",t)}}function Uj(r){return Sm.apply(this,arguments)}function Sm(){return(Sm=za(W.mark(function r(t){var o,l,p,_,R,M,P,F,G,z,we,xe,_n,fa,da,Ta,Da,Ja,rl,Nl,Vl;return W.wrap(function(xl){for(;;)switch(xl.prev=xl.next){case 0:if(o=t.message,l=t.peerId,p=t.toPeer,R=t.errorCodes,M=t.diff,P=t.logger,void 0!==(_=t.session)){xl.next=3;break}throw new ia("The client is not logged in. Cannot do the operation",R.NOT_LOGGED_IN);case 3:if(F=!1,G=p?"TEXT"===o.messageType?vb.P2pSMsgNoOfflineFlag:vb.P2pRMsgNoOfflineFlag:"TEXT"===o.messageType?vb.ChannelSMsg:vb.ChannelRMsg,"TEXT"!==o.messageType||!o.text.startsWith("AgoraRTMLegacyEndcallCompatibleMessagePrefix")||!p){xl.next=14;break}if(z=o.text.split("_"),we=Lb(z,3),xe=we[0],_n=we[1],void 0!==we[2]&&yb(_n)&&"AgoraRTMLegacyEndcallCompatibleMessagePrefix"===xe){xl.next=13;break}throw _.emit("messageCount",{messageCategory:G,type:"common",key:"sentcount"}),_.emit("messageCount",{messageCategory:G,type:"common",key:"invalidmessagecount"}),new ja("Message is not valid",si);case 13:F=!0;case 14:if(fa=Date.now(),!((Ta=_.messageSentTimes[da=_.messageSentTimes.length-1])&&Ta+3e3<fa)){xl.next=21;break}_.messageSentTimes=[fa],xl.next=34;break;case 21:Da=da;case 22:if(!(0<=Da)){xl.next=33;break}if(!(_.messageSentTimes[Da]+3e3<fa)){xl.next=26;break}return _.messageSentTimes=_.messageSentTimes.slice(Da+1,da+1),xl.abrupt("break",33);case 26:if(!(180<=da-Da+1)){xl.next=30;break}throw _.emit("messageCount",{messageCategory:G,type:"common",key:"sentcount"}),_.emit("messageCount",{messageCategory:G,type:"common",key:"toooftencount"}),new Dc("Message sent failed, exceeded the 180 message in 3 seconds",R.TOO_OFTEN);case 30:Da--,xl.next=22;break;case 33:_.messageSentTimes.push(fa);case 34:xl.t0=o.messageType,xl.next="TEXT"===xl.t0?37:"RAW"===xl.t0?42:44;break;case 37:if(!F){xl.next=41;break}return Ja=o.text.split("_"),rl=Lb(Ja,3),Nl=rl[1],Vl=rl[2],P.info("[rtm-API] EndCall message send api is called"),xl.abrupt("return",_.sendInvitationMessage({peerId:l,type:"CallCancel",extra:Vl,channelId:Nl,callId:"0"}));case 41:return xl.abrupt("return",_.sendTextMessage(o.text,l,p,1e4-M));case 42:return void 0===o.description&&(o.description=""),xl.abrupt("return",_.sendRawMessage(o.rawMessage,o.description,l,p,1e4-M));case 44:throw _.emit("messageCount",{messageCategory:G,type:"common",key:"sentcount"}),_.emit("messageCount",{messageCategory:G,type:"common",key:"invalidmessagecount"}),new ja("Invalid message type",si);case 47:case"end":return xl.stop()}},r)}))).apply(this,arguments)}function qC(r){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],o=r.replace(/(https?:\/\/)?(www.)?/i,"");return t||(o=o.split(".").slice(r.length-2).join(".")),-1!==o.indexOf("/")?o.split("/")[0]:o}function wb(r){if("string"!=typeof r)return"[Sensitive Info]";var t=Math.floor(.7*r.length),o=r.length;return ws(r,t,o,"*".repeat(o-t))}function xs(r,t,o){function l(p){if(void 0===r)return r;if(or(p))return p;if(Array.isArray(p))return p.map(l);var _={},R=0;for(p=Vj(p);R<p.length;R++){var M=Lb(p[R],2),P=M[0];if("string"==typeof(M=M[1])&&o.includes(P)){_[P]="string"==typeof M?wb(M):"[Sensitive Info]";break}_[P]=t.includes(P)?"[Hidden Info]":null==M?M:o.includes(P)?"[Sensitive Info]":l(M)}return _}return Array.isArray(r)?r.map(l):l(r)}function ys(r){return Object.getOwnPropertyNames(r).forEach(function(t){"object"==Ia(t=r[t])&&null!==t&&ys(t)}),Object.freeze(r)}function ti(r){return new TextDecoder("utf-8").decode(r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength))}function Wj(r){return(new TextEncoder).encode(r).length}function zs(){for(var r=0,t=arguments.length,o=Array(t),l=0;l<t;l++)o[l]=arguments[l];for(t=0;t<o.length;t++)r+=o[t].length;for(r=new Uint8Array(r),l=t=0;l<o.length;l++){var p=o[l];r.set(p,t),t+=p.length}return r}function dh(r,t,o){var l=r.match(/([^?#]+)(\?[^#]*)?(#.*)?/);if(r=null==l?void 0:l[1],l=null==l?void 0:l[2]){var p;for(l=l.substr(1).split("&"),p=0;p<l.length;p++)if(l[p].split("=")[0]==t){l[p]=t+"="+encodeURIComponent(o);break}return p==l.length&&l.push(t+"="+encodeURIComponent(o)),r+"?"+l.join("&")}return r+"?"+t+"="+encodeURIComponent(o)}function ws(r,t,o,l){return"string"!=typeof r?"[Sensitive Info]":r.substring(0,t)+l+r.substring(o)}function ui(r){return"string"==typeof r&&0!==r.length&&"false"!==r&&"null"!==r&&"undefined"!==r}function As(r){var t=[];return function o(l){if(null===l||"object"!==Ia(l))return l;if(-1!==t.indexOf(l))return"[Circular]";if(t.push(l),"function"==typeof l.toJSON)try{var p=o(l.toJSON());return t.pop(),p}catch(_){return"[Throws: "+(_?_.message:"?")+"]"}return Array.isArray(l)?(p=l.map(o),t.pop(),p):(p=Object.keys(l).reduce(function(_,R){e:{if(rC.call(l,R))try{var M=l[R];break e}catch(P){M="[Throws: "+(P?P.message:"?")+"]";break e}M=l[R]}return _[R]=o(M),_},{}),t.pop(),p)}(r)}function sC(r){if(!(100<(r=String(r)).length)&&(r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r))){var t=parseFloat(r[1]);switch((r[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*t;case"weeks":case"week":case"w":return 6048e5*t;case"days":case"day":case"d":return 864e5*t;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*t;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*t;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t}}}function Xj(r,t,o,l){return Math.round(r/o)+" "+l+(t>=1.5*o?"s":"")}function tC(r){var t=r.areas,o=r.excludedArea;if(1===t.length&&t[0]===oa.GLOBAL&&o===oa.CHINA)return eh([oa.OVERSEA]);if(t.includes(oa.GLOBAL)){if(r=vi(Yj).filter(function(_){return _!==oa.GLOBAL&&_!==oa.OVERSEA}),o in wi){var l=[].concat(ra(null!=(t=wi[o])?t:[]),[o]);return eh(r.filter(function(_){return!l.includes(_)}))}if(Bs(o)){var p=uC(o);return eh(r.filter(function(_){return _!==o&&_!==p}))}}if(Bs(o)||o in wi)return eh(t);throw new ja("Invalid excludedArea area config")}function gb(r,t,o){void 0===o&&(o=Object.getOwnPropertyDescriptor(r,t));var l=o.value;return o.value=function(){for(var p=this,_=arguments.length,R=Array(_),M=0;M<_;M++)R[M]=arguments[M];this.invokeTracker.apply(this,["%s: ".concat(0<R.length?"%s with args: ".concat(R.map(function(){return"%o"})):"%s"),this.name,t].concat(ra(R.map(fh))));try{var P=l.apply(this,R)}catch(G){throw this.logError.apply(this,["".concat(void 0!==G.code?"Error Code ".concat(G.code,": "):"","%s failed").concat(0<R.length?" with args: ".concat(R.map(function(){return"%o"})):""),t].concat(ra(R.map(fh)))),G.originalError&&this.logError(G.originalError),this.errorTracker(G),G}var F=Date.now();return za(W.mark(function G(){var z,we;return W.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return xe.prev=0,xe.next=3,P;case 3:z=xe.sent,xe.next=12;break;case 6:return xe.prev=6,xe.t0=xe.catch(0),p.logError.apply(p,["".concat(void 0!==xe.t0.code?"Error Code ".concat(xe.t0.code,": "):"","%s failed").concat(0<R.length?" with args: ".concat(R.map(function(){return"%o"})):""),t].concat(ra(R.map(fh)))),xe.t0.originalError&&p.logError(xe.t0.originalError),p.errorTracker(xe.t0),xe.abrupt("return");case 12:z!==P?void 0===z?p.resultTracker("%s promise resolves after %dms",t,Date.now()-F):p.resultTracker("%s promise resolves after %dms, result is %o",t,Date.now()-F,fh(z)):"Object"!==Be(z)||Lg(z)?p.resultTracker("%s result is %o",t,fh(z)):p.resultTracker("%s result is %s",t,z.name||(null===(we=z.constructor)||void 0===we?void 0:we.name));case 13:case"end":return xe.stop()}},G,null,[[0,6]])}))(),P},o}function je(r,t,o){void 0===o&&(o=Object.getOwnPropertyDescriptor(r,t));var l=o.value;return o.value=function(){for(var p=this,_=arguments.length,R=Array(_),M=0;M<_;M++)R[M]=arguments[M];this.invokeTracker.apply(this,["%s: ".concat(0<R.length?"%s with args: ".concat(R.map(function(){return"%o"})):"%s"),this.name,t].concat(R));try{var P=l.apply(this,R)}catch(G){throw this.logError.apply(this,["".concat(void 0!==G.code?"Error Code ".concat(G.code,": "):"","%s failed").concat(0<R.length?" with args: ".concat(R.map(function(){return"%o"})):""),t].concat(R)),G.originalError&&this.logError(G.originalError),this.errorTracker(G),G}var F=Date.now();return za(W.mark(function G(){var z,we;return W.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return xe.prev=0,xe.next=3,P;case 3:z=xe.sent,xe.next=12;break;case 6:return xe.prev=6,xe.t0=xe.catch(0),p.logError.apply(p,["".concat(void 0!==xe.t0.code?"Error Code ".concat(xe.t0.code,": "):"","%s failed").concat(0<R.length?" with args: ".concat(R.map(function(){return"%o"})):""),t].concat(R)),xe.t0.originalError&&p.logError(xe.t0.originalError),p.errorTracker(xe.t0),xe.abrupt("return");case 12:z!==P?void 0===z?p.resultTracker("%s promise resolves after %dms",t,Date.now()-F):p.resultTracker("%s promise resolves after %dms, result is %o",t,Date.now()-F,z):"Object"!==Be(z)||Lg(z)?p.resultTracker("%s result is %o",t,z):p.resultTracker("%s result is %s",t,z.name||(null===(we=z.constructor)||void 0===we?void 0:we.name));case 13:case"end":return xe.stop()}},G,null,[[0,6]])}))(),P},o}function vC(r,t){var o="".concat(r,"Uri");if("number"!=typeof(o=Tm[o])||0===o)throw new TypeError("Got Unknown URI Name");return t=new(r=Cs[r])(t),t=r.encode(t).finish(),new wC({uri:o,data:t})}function Ds(r,t){var o=ui(null);return"".concat(r.split(".").join("-"),".edge.").concat(o?null:t?"sd-rtn.com":"agora.io")}function $a(r,t,o){return Um.apply(this,arguments)}function Um(){return(Um=za(W.mark(function r(t,o,l){var p,_,R,M=arguments;return W.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return p=3<M.length&&void 0!==M[3]&&M[3],_=xC[t].encode(o).finish(),R=function(){var F=za(W.mark(function G(z){var we,xe,_n,fa=arguments;return W.wrap(function(da){for(;;)switch(da.prev=da.next){case 0:if(!(3<(xe=1<fa.length&&void 0!==fa[1]?fa[1]:0))){da.next=3;break}return da.abrupt("return");case 3:if(_n=dh(_n=l?"https://".concat(null!==(we=null==Ba?void 0:Ba.PROXY_NGINX[0])&&void 0!==we?we:"webrtc-cloud-proxy.sd-rtn.com","/rs/?h=").concat(z,"&p=443&d=events/proto-raw"):"https://".concat(z,"/events/proto-raw"),"sentTs",Math.ceil(Date.now()/1e3).toString()),_n=dh(_n,"id",yC[t].toString()),!p){da.next=9;break}return da.next=9,pC(1e4);case 9:return da.next=11,Tj(_n,{body:_,timeout:2e4,headers:{"Content-Type":"application/octet-stream"}}).catch(function(Ta){return R(z,xe+1)});case 11:case"end":return da.stop()}},G)}));return function(G){return F.apply(this,arguments)}}(),P.prev=3,P.next=6,R((null==Ba?void 0:Ba.EVENT_REPORT_DOMAIN[0])||ui(null)&&null||"webcollector-rtm.agora.io");case 6:P.next=12;break;case 8:return P.prev=8,P.t0=P.catch(3),P.next=12,R(Ba&&Es(1<(null==Ba?void 0:Ba.EVENT_REPORT_DOMAIN.length)?null==Ba?void 0:Ba.EVENT_REPORT_DOMAIN.slice(1):null==Ba?void 0:Ba.EVENT_REPORT_DOMAIN)||"rtm.statscollector.sd-rtn.com");case 12:case"end":return P.stop()}},r,null,[[3,8]])}))).apply(this,arguments)}function Nb(r){return D.fromNumber(void 0===r?0:Date.now()-r)}function Zj(r,t){return D.fromValue(r).eq(t)}function ak(r,t){var o=void 0===t?r.val:t,l=r.isBoolean,p=r.oneof,_=r.len;if(2!==[l,t=r.isNumber,p].filter(function(R){return!R}).length)throw new TypeError("invalid field type");if(void 0!==o&&(r=!1,void 0!==p&&(p=Vm(p),zC(p,Zj).length===p.length&&void 0!==AC(p,function(R){return Zj(o,R)})&&(r=!0)),l=void 0!==l&&(0===o||1===o)&&1===_,t=void 0!==t&&o.toString(2).length<=_,!(r||l||t)))throw Error("invalid field value")}function pf(r,t){t=E({},Ge.STATE_REVISION,void 0!==t&&0<=t?t:void 0);for(var o=0;o<r.length;o++){var l=r[o];t[l.getKey()]=l.getValue(),t["".concat(Ge.STATE_REVISION_KEY_PREFIX).concat(l.getKey())]=0<=l.getRevision()||-2===l.getRevision()?l.getRevision():void 0}return Pd.omitBy(t,Pd.isUndefined)}function Wm(r){var t=JSON.parse(r);r={majorRevision:t[Ge.STATE_REVISION],items:[]};var o=Pd.omit(t,Ge.STATE_REVISION);return t=Object.keys(o).filter(function(l){return"_"!==l[0]}),r.items=t.map(function(l){return new Fs({key:l,value:o[l],revision:o["".concat(Ge.STATE_REVISION_KEY_PREFIX).concat(l)],updateTs:o["".concat(Ge.STATE_TIMESTAMP_PREFIX).concat(l)],authorUserId:o["".concat(Ge.STATE_AUTHOR_PREFIX).concat(l)]})}),r}function ud(r){var t=bd;return r!==bg.StateOk&&r!==bg.DuplicatedOperation&&(t=r===bg.OutdateRevision?of:r===bg.TimeOutError?cd:r===bg.ArgumentError?Mb:He),t}function Gs(r){return r.reduce(function(t,o){return t.concat(o instanceof bk.UnsubscriptionError?o.errors:o)},[])}function BC(r,t){do{2147483647==xi?xi=0:xi++}while(gh.hasOwnProperty(xi));var o=xi;return gh[o]={callback:r,parameters:Array.prototype.slice.call(arguments,2)},Xm.postMessage({name:"setInterval",fakeId:o,time:t}),o}function Hs(r){return function(){var t=r();if(!t)throw new ia("Client is not logged in. Cannot do the operation");return t}}var qb="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ck=function(r){return r&&r.Math==Math&&r},na=ck("object"==typeof globalThis&&globalThis)||ck("object"==typeof window&&window)||ck("object"==typeof self&&self)||ck("object"==typeof qb&&qb)||function(){return this}()||Function("return this")(),Ga=function(r){try{return!!r()}catch(t){return!0}},cb=!Ga(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),Is={}.propertyIsEnumerable,Js=Object.getOwnPropertyDescriptor,yi=Js&&!Is.call({1:2},1)?function(r){return!!(r=Js(this,r))&&r.enumerable}:Is,ke=function(r,t){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:t}},CC={}.toString,Qd=function(r){return CC.call(r).slice(8,-1)},DC="".split,zi=Ga(function(){return!Object("z").propertyIsEnumerable(0)})?function(r){return"String"==Qd(r)?DC.call(r,""):Object(r)}:Object,Ec=function(r){if(null==r)throw TypeError("Can't call method on "+r);return r},Qc=function(r){return zi(Ec(r))},fb=function(r){return"object"==typeof r?null!==r:"function"==typeof r},le=function(r,t){if(!fb(r))return r;var o,l;if(t&&"function"==typeof(o=r.toString)&&!fb(l=o.call(r))||"function"==typeof(o=r.valueOf)&&!fb(l=o.call(r))||!t&&"function"==typeof(o=r.toString)&&!fb(l=o.call(r)))return l;throw TypeError("Can't convert object to primitive value")},Zb=function(r){return Object(Ec(r))},EC={}.hasOwnProperty,Fa=function(r,t){return EC.call(Zb(r),t)},hh=na.document,dk=fb(hh)&&fb(hh.createElement),Ks=!cb&&!Ga(function(){return 7!=Object.defineProperty(dk?hh.createElement("div"):{},"a",{get:function(){return 7}}).a}),Ls=Object.getOwnPropertyDescriptor,pd={f:cb?Ls:function(r,t){if(r=Qc(r),t=le(t,!0),Ks)try{return Ls(r,t)}catch(o){}if(Fa(r,t))return ke(!yi.call(r,t),r[t])}},ub=function(r){if(!fb(r))throw TypeError(String(r)+" is not an object");return r},Ms=Object.defineProperty,$b={f:cb?Ms:function(r,t,o){if(ub(r),t=le(t,!0),ub(o),Ks)try{return Ms(r,t,o)}catch(l){}if("get"in o||"set"in o)throw TypeError("Accessors not supported");return"value"in o&&(r[t]=o.value),r}},ac=cb?function(r,t,o){return $b.f(r,t,ke(1,o))}:function(r,t,o){return r[t]=o,r},Ym=function(r,t){try{ac(na,r,t)}catch(o){na[r]=t}return t},qf=na["__core-js_shared__"]||Ym("__core-js_shared__",{}),FC=Function.toString;"function"!=typeof qf.inspectSource&&(qf.inspectSource=function(r){return FC.call(r)});var Zm=qf.inspectSource,Ns=na.WeakMap,GC="function"==typeof Ns&&/native code/.test(Zm(Ns)),rf=kc(function(r){(r.exports=function(t,o){return qf[t]||(qf[t]=void 0!==o?o:{})})("versions",[]).push({version:"3.12.1",mode:"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})}),HC=0,IC=Math.random(),ih=function(r){return"Symbol("+String(void 0===r?"":r)+")_"+(++HC+IC).toString(36)},Os=rf("keys"),ek=function(r){return Os[r]||(Os[r]=ih(r))},jh={},JC=na.WeakMap;if(GC||qf.state)var cg=qf.state||(qf.state=new JC),KC=cg.get,Ps=cg.has,LC=cg.set,$m=function(r,t){if(Ps.call(cg,r))throw new TypeError("Object already initialized");return t.facade=r,LC.call(cg,r,t),t},fk=function(r){return KC.call(cg,r)||{}},an=function(r){return Ps.call(cg,r)};else{var kh=ek("state");jh[kh]=!0,$m=function(r,t){if(Fa(r,kh))throw new TypeError("Object already initialized");return t.facade=r,ac(r,kh,t),t},fk=function(r){return Fa(r,kh)?r[kh]:{}},an=function(r){return Fa(r,kh)}}var Sb={set:$m,get:fk,has:an,enforce:function(r){return an(r)?fk(r):$m(r,{})},getterFor:function(r){return function(t){var o;if(!fb(t)||(o=fk(t)).type!==r)throw TypeError("Incompatible receiver, "+r+" required");return o}}},Ob=kc(function(r){var t=Sb.get,o=Sb.enforce,l=String(String).split("String");(r.exports=function(p,_,R,M){var P=!!M&&!!M.unsafe,F=!!M&&!!M.enumerable;if(M=!!M&&!!M.noTargetGet,"function"==typeof R){"string"!=typeof _||Fa(R,"name")||ac(R,"name",_);var G=o(R);G.source||(G.source=l.join("string"==typeof _?_:""))}p===na?F?p[_]=R:Ym(_,R):(P?!M&&p[_]&&(F=!0):delete p[_],F?p[_]=R:ac(p,_,R))})(Function.prototype,"toString",function(){return"function"==typeof this&&t(this).source||Zm(this)})}),Qs=function(r){return"function"==typeof r?r:void 0},me=function(r,t){return 2>arguments.length?Qs(na[r])||Qs(na[r]):na[r]&&na[r][t]||na[r]&&na[r][t]},MC=Math.ceil,NC=Math.floor,Rd=function(r){return isNaN(r=+r)?0:(0<r?NC:MC)(r)},OC=Math.min,xb=function(r){return 0<r?OC(Rd(r),9007199254740991):0},PC=Math.max,QC=Math.min,dd=function(r,t){return 0>(r=Rd(r))?PC(r+t,0):QC(r,t)},Rs=function(r){return function(t,o,l){t=Qc(t);var p=xb(t.length);if(l=dd(l,p),r&&o!=o){for(;p>l;)if((o=t[l++])!=o)return!0}else for(;p>l;l++)if((r||l in t)&&t[l]===o)return r||l||0;return!r&&-1}},Ss=Rs(!0),bn=Rs(!1),Ts=function(r,t){r=Qc(r);var o,l=0,p=[];for(o in r)!Fa(jh,o)&&Fa(r,o)&&p.push(o);for(;t.length>l;)Fa(r,o=t[l++])&&(~bn(p,o)||p.push(o));return p},gk="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),RC=gk.concat("length","prototype"),dg={f:Object.getOwnPropertyNames||function(r){return Ts(r,RC)}},Ai={f:Object.getOwnPropertySymbols},Us=me("Reflect","ownKeys")||function(r){var t=dg.f(ub(r)),o=Ai.f;return o?t.concat(o(r)):t},Vs=function(r,t){for(var o=Us(t),l=$b.f,p=pd.f,_=0;_<o.length;_++){var R=o[_];Fa(r,R)||l(r,R,p(t,R))}},SC=/#|\.prototype\./,ne=function(r,t){return(r=TC[UC(r)])==VC||r!=WC&&("function"==typeof t?Ga(t):!!t)},UC=ne.normalize=function(r){return String(r).replace(SC,".").toLowerCase()},TC=ne.data={},WC=ne.NATIVE="N",VC=ne.POLYFILL="P",XC=pd.f,wa=function(r,t){var o,l,p,_=r.target,R=r.global,M=r.stat;if(l=R?na:M?na[_]||Ym(_,{}):(na[_]||{}).prototype)for(p in t){var P=t[p],F=r.noTargetGet?(o=XC(l,p))&&o.value:l[p];if(!(o=ne(R?p:_+(M?".":"#")+p,r.forced))&&void 0!==F){if(typeof P==typeof F)continue;Vs(P,F)}(r.sham||F&&F.sham)&&ac(P,"sham",!0);try{Ob(l,p,P,r)}catch(G){}}},hk=function(){var r=ub(this),t="";return r.global&&(t+="g"),r.ignoreCase&&(t+="i"),r.multiline&&(t+="m"),r.dotAll&&(t+="s"),r.unicode&&(t+="u"),r.sticky&&(t+="y"),t},Sd=Ga(function(){var r=/a/y;return r.lastIndex=2,null!=r.exec("abcd")}),YC=Ga(function(){var r=/^r/gy;return r.lastIndex=2,null!=r.exec("str")}),ik=RegExp.prototype.exec,ZC=rf("native-string-replace",String.prototype.replace),Ws=ik,cn=(d=/a/,b=/b*/g,ik.call(d,"a"),ik.call(b,"a"),0!==d.lastIndex||0!==b.lastIndex),Xs=Sd||YC,dn=void 0!==/()??/.exec("")[1],d,b;(cn||dn||Xs)&&(Ws=function(r){var t,o=Xs&&this.sticky,l=hk.call(this),p=this.source,_=0,R=r;if(o){-1===(l=l.replace("y","")).indexOf("g")&&(l+="g"),R=String(r).slice(this.lastIndex),0<this.lastIndex&&(!this.multiline||this.multiline&&"\n"!==r[this.lastIndex-1])&&(p="(?: "+p+")",R=" "+R,_++);var M=new RegExp("^(?:"+p+")",l)}if(dn&&(M=new RegExp("^"+p+"$(?!\\s)",l)),cn)var P=this.lastIndex;var F=ik.call(o?M:this,R);return o?F?(F.input=F.input.slice(_),F[0]=F[0].slice(_),F.index=this.lastIndex,this.lastIndex+=F[0].length):this.lastIndex=0:cn&&F&&(this.lastIndex=this.global?F.index+F[0].length:P),dn&&F&&1<F.length&&ZC.call(F[0],M,function(){for(t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(F[t]=void 0)}),F});var Bi=Ws;wa({target:"RegExp",proto:!0,forced:/./.exec!==Bi},{exec:Bi});var lh=me("navigator","userAgent")||"",Ys=na.process,Zs=Ys&&Ys.versions,$s=Zs&&Zs.v8;if($s)var sf=$s.split("."),en=4>sf[0]?1:sf[0]+sf[1];else lh&&(sf=lh.match(/Edge\/(\d+)/),(!sf||74<=sf[1])&&(sf=lh.match(/Chrome\/(\d+)/))&&(en=sf[1]));var oe=en&&+en,pe=!!Object.getOwnPropertySymbols&&!Ga(function(){return!String(Symbol())||!Symbol.sham&&oe&&41>oe}),at=pe&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ci=rf("wks"),Di=na.Symbol,$C=at?Di:Di&&Di.withoutSetter||ih,mb=function(r){return Fa(Ci,r)&&(pe||"string"==typeof Ci[r])||(Ci[r]=pe&&Fa(Di,r)?Di[r]:$C("Symbol."+r)),Ci[r]},aD=mb("species"),fn=RegExp.prototype,bD=!Ga(function(){var r=/./;return r.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(r,"$<a>")}),bt="$0"==="a".replace(/./,"$0"),ct=mb("replace"),dt=!!/./[ct]&&""===/./[ct]("a","$0"),cD=!Ga(function(){var r=/(?:)/,t=r.exec;return r.exec=function(){return t.apply(this,arguments)},2!==(r="ab".split(r)).length||"a"!==r[0]||"b"!==r[1]}),jk=function(r,t,o,l){var p=mb(r),_=!Ga(function(){var F={};return F[p]=function(){return 7},7!=""[r](F)}),R=_&&!Ga(function(){var F=!1,G=/a/;return"split"===r&&((G={constructor:{}}).constructor[aD]=function(){return G},G.flags="",G[p]=/./[p]),G.exec=function(){return F=!0,null},G[p](""),!F});if(!_||!R||"replace"===r&&(!bD||!bt||dt)||"split"===r&&!cD){var M=/./[p],P=(o=o(p,""[r],function(F,G,z,we,xe){var _n=G.exec;return _n===Bi||_n===fn.exec?_&&!xe?{done:!0,value:M.call(G,z,we)}:{done:!0,value:F.call(z,G,we)}:{done:!1}},{REPLACE_KEEPS_$0:bt,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:dt}))[1];Ob(String.prototype,r,o[0]),Ob(fn,p,2==t?function(F,G){return P.call(F,this,G)}:function(F){return P.call(F,this)})}l&&ac(fn[p],"sham",!0)},dD=mb("match"),gn=function(r){var t;return fb(r)&&(void 0!==(t=r[dD])?!!t:"RegExp"==Qd(r))},Rc=function(r){if("function"!=typeof r)throw TypeError(String(r)+" is not a function");return r},eD=mb("species"),eg=function(r,t){var o;return void 0===(r=ub(r).constructor)||null==(o=ub(r)[eD])?t:Rc(o)},et=function(r){return function(t,o){t=String(Ec(t)),o=Rd(o);var l,p=t.length;if(0>o||o>=p)return r?"":void 0;var _=t.charCodeAt(o);return 55296>_||56319<_||o+1===p||56320>(l=t.charCodeAt(o+1))||57343<l?r?t.charAt(o):_:r?t.slice(o,o+2):l-56320+(_-55296<<10)+65536}},fD=et(!1),ft=et(!0),hn=function(r,t,o){return t+(o?ft(r,t).length:1)},mh=function(r,t){var o=r.exec;if("function"==typeof o){if("object"!=typeof(r=o.call(r,t)))throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==Qd(r))throw TypeError("RegExp#exec called on incompatible receiver");return Bi.call(r,t)},gD=[].push,hD=Math.min;jk("split",2,function(r,t,o){var l="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(p,_){var R=String(Ec(this));if(0==(_=void 0===_?4294967295:_>>>0))return[];if(void 0===p)return[R];if(!gn(p))return t.call(R,p,_);var M,P,F,G=[],z=0;for(p=new RegExp(p.source,(p.ignoreCase?"i":"")+(p.multiline?"m":"")+(p.unicode?"u":"")+(p.sticky?"y":"")+"g");(M=Bi.call(p,R))&&!((P=p.lastIndex)>z&&(G.push(R.slice(z,M.index)),1<M.length&&M.index<R.length&&gD.apply(G,M.slice(1)),F=M[0].length,z=P,G.length>=_));)p.lastIndex===M.index&&p.lastIndex++;return z===R.length?(F||!p.test(""))&&G.push(""):G.push(R.slice(z)),G.length>_?G.slice(0,_):G}:"0".split(void 0,0).length?function(p,_){return void 0===p&&0===_?[]:t.call(this,p,_)}:t;return[function(p,_){var R=Ec(this),M=null==p?void 0:p[r];return void 0!==M?M.call(p,R,_):l.call(String(R),p,_)},function(p,_){var R=o(l,p,this,_,l!==t);if(R.done)return R.value;var M=ub(p);p=String(this);var P=eg(M,RegExp);if(R=M.unicode,M=new P(Sd?"^(?:"+M.source+")":M,(M.ignoreCase?"i":"")+(M.multiline?"m":"")+(M.unicode?"u":"")+(Sd?"g":"y")),0==(_=void 0===_?4294967295:_>>>0))return[];if(0===p.length)return null===mh(M,p)?[p]:[];var F=0,G=0;for(P=[];G<p.length;){M.lastIndex=Sd?0:G;var z,we=mh(M,Sd?p.slice(G):p);if(null===we||(z=hD(xb(M.lastIndex+(Sd?G:0)),p.length))===F)G=hn(p,G,R);else{if(P.push(p.slice(F,G)),P.length===_)return P;for(F=1;F<=we.length-1;F++)if(P.push(we[F]),P.length===_)return P;G=F=z}}return P.push(p.slice(F)),P}]},Sd);var iD=/^[\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*/,jD=/[\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*$/,jn=function(r){return function(t){return t=String(Ec(t)),1&r&&(t=t.replace(iD,"")),2&r&&(t=t.replace(jD,"")),t}},kD=jn(1),lD=jn(2),kk=jn(3),lk=na.parseInt,mD=/^[+-]?0[Xx]/,gt=8!==lk("\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff08")||22!==lk("\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff0x16")?function(r,t){return r=kk(String(r)),lk(r,t>>>0||(mD.test(r)?16:10))}:lk;wa({global:!0,forced:parseInt!=gt},{parseInt:gt});var tf=function(r,t,o){if(Rc(r),void 0===t)return r;switch(o){case 0:return function(){return r.call(t)};case 1:return function(l){return r.call(t,l)};case 2:return function(l,p){return r.call(t,l,p)};case 3:return function(l,p,_){return r.call(t,l,p,_)}}return function(){return r.apply(t,arguments)}},uf=Array.isArray||function(r){return"Array"==Qd(r)},nD=mb("species"),Ei=function(r,t){if(uf(r)){var o=r.constructor;"function"!=typeof o||o!==Array&&!uf(o.prototype)?fb(o)&&null===(o=o[nD])&&(o=void 0):o=void 0}return new(void 0===o?Array:o)(0===t?0:t)},ht=[].push,vf=function(r){var t=1==r,o=2==r,l=3==r,p=4==r,_=6==r,R=7==r,M=5==r||_;return function(P,F,G,z){var we=Zb(P),xe=zi(we);F=tf(F,G,3),G=xb(xe.length);var _n,fa=0;for(z=z||Ei,P=t?z(P,G):o||R?z(P,0):void 0;G>fa;fa++)if((M||fa in xe)&&(_n=F(z=xe[fa],fa,we),r))if(t)P[fa]=_n;else if(_n)switch(r){case 3:return!0;case 5:return z;case 6:return fa;case 2:ht.call(P,z)}else switch(r){case 4:return!1;case 7:ht.call(P,z)}return _?-1:l||p?p:P}},fg=vf(0),it=vf(1),jt=vf(2),oD=vf(3),pD=vf(4),kt=vf(5),lt=vf(6);vf(7);var qD=mb("species"),Fi=function(r){return 51<=oe||!Ga(function(){var t=[];return(t.constructor={})[qD]=function(){return{foo:1}},1!==t[r](Boolean).foo})},rD=Fi("filter");wa({target:"Array",proto:!0,forced:!rD},{filter:function(r){return jt(this,r,1<arguments.length?arguments[1]:void 0)}});var Ie=Object.keys||function(r){return Ts(r,gk)},sD=Ga(function(){Ie(1)});wa({target:"Object",stat:!0,forced:sD},{keys:function(r){return Ie(Zb(r))}});var gg=function(r,t){var o=[][r];return!!o&&Ga(function(){o.call(null,t||function(){throw 1},1)})},tD=[].join,uD=zi!=Object,vD=gg("join",",");wa({target:"Array",proto:!0,forced:uD||!vD},{join:function(r){return tD.call(Qc(this),void 0===r?",":r)}});var wD=Fi("map");wa({target:"Array",proto:!0,forced:!wD},{map:function(r){return it(this,r,1<arguments.length?arguments[1]:void 0)}});var kn=function(r){var t=r.return;if(void 0!==t)return ub(t.call(r)).value},nh={},xD=mb("iterator"),yD=Array.prototype,ln=function(r){return void 0!==r&&(nh.Array===r||yD[xD]===r)},oh=function(r,t,o){(t=le(t))in r?$b.f(r,t,ke(0,o)):r[t]=o},zD=mb("toStringTag"),mt={};mt[zD]="z";var mn="[object z]"===String(mt),AD=mb("toStringTag"),BD="Arguments"==Qd(function(){return arguments}()),ph=mn?Qd:function(r){var t;if(void 0===r)var o="Undefined";else{if(null===r)var l="Null";else{e:{var p=r=Object(r);try{l=p[AD];break e}catch(_){}l=void 0}l="string"==typeof(o=l)?o:BD?Qd(r):"Object"==(t=Qd(r))&&"function"==typeof r.callee?"Arguments":t}o=l}return o},CD=mb("iterator"),Gi=function(r){if(null!=r)return r[CD]||r["@@iterator"]||nh[ph(r)]},hg=function(r){var t,o=Zb(r),l="function"==typeof this?this:Array,p=arguments.length,_=1<p?arguments[1]:void 0,R=void 0!==_,M=Gi(o),P=0;if(R&&(_=tf(_,2<p?arguments[2]:void 0,2)),null==M||l==Array&&ln(M)){var F=xb(o.length);for(l=new l(F);F>P;P++)M=R?_(o[P],P):o[P],oh(l,P,M)}else for(p=(o=M.call(o)).next,l=new l;!(t=p.call(o)).done;P++){if(R){M=o;var G=_;t=[t.value,P];try{F=G(ub(t)[0],t[1])}catch(z){throw kn(M),z}}else F=t.value;oh(l,P,M=F)}return l.length=P,l},nt=mb("iterator"),ot=!1;try{var DD=0,pt={next:function(){return{done:!!DD++}},return:function(){ot=!0}};pt[nt]=function(){return this},Array.from(pt,function(){throw 2})}catch(r){}var mk=function(r,t){if(!t&&!ot)return!1;var o=!1;try{(t={})[nt]=function(){return{next:function(){return{done:o=!0}}}},r(t)}catch(l){}return o},ED=!mk(function(r){Array.from(r)});wa({target:"Array",stat:!0,forced:ED},{from:hg});var qt=!Ga(function(){function r(){}return r.prototype.constructor=null,Object.getPrototypeOf(new r)!==r.prototype}),rt=ek("IE_PROTO"),FD=Object.prototype,Md=qt?Object.getPrototypeOf:function(r){return r=Zb(r),Fa(r,rt)?r[rt]:"function"==typeof r.constructor&&r instanceof r.constructor?r.constructor.prototype:r instanceof Object?FD:null},nn=mb("iterator"),st=!1,GD=function(){return this},ig;if([].keys){var tt=[].keys();if("next"in tt){var ut=Md(Md(tt));ut!==Object.prototype&&(ig=ut)}else st=!0}(null==ig||Ga(function(){var r={};return ig[nn].call(r)!==r}))&&(ig={}),Fa(ig,nn)||ac(ig,nn,GD);var nk=ig,ok=st,vt=cb?Object.defineProperties:function(r,t){ub(r);for(var o,l=Ie(t),p=l.length,_=0;p>_;)$b.f(r,o=l[_++],t[o]);return r},on=me("document","documentElement"),wt=ek("IE_PROTO"),pn=function(){},qn,pk=function(){try{qn=document.domain&&new ActiveXObject("htmlfile")}catch(t){}if(qn){var r=qn;r.write("<script><\/script>"),r.close(),r=r.parentWindow.Object}else(r=dk?hh.createElement("iframe"):{}).style.display="none",on.appendChild(r),r.src="javascript:",(r=r.contentWindow.document).open(),r.write("<script>document.F=Object<\/script>"),r.close(),r=r.F;for(pk=r,r=gk.length;r--;)delete pk.prototype[gk[r]];return pk()};jh[wt]=!0;var vd=Object.create||function(r,t){if(null!==r){pn.prototype=ub(r);var o=new pn;pn.prototype=null,o[wt]=r}else o=pk();return void 0===t?o:vt(o,t)},HD=$b.f,xt=mb("toStringTag"),Td=function(r,t,o){r&&!Fa(r=o?r:r.prototype,xt)&&HD(r,xt,{configurable:!0,value:t})},ID=function(){return this},yt=function(r,t,o){return t+=" Iterator",r.prototype=vd(nk,{next:ke(1,o)}),Td(r,t,!1),nh[t]=ID,r},gc=Object.setPrototypeOf||("__proto__"in{}?function(){var r=!1,t={};try{var o=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set;o.call(t,[]),r=t instanceof Array}catch(l){}return function(l,p){if(ub(l),!fb(p)&&null!==p)throw TypeError("Can't set "+String(p)+" as a prototype");return r?o.call(l,p):l.__proto__=p,l}}():void 0),Hi=mb("iterator"),JD=function(){return this},rn=function(r,t,o,l,p,_,R){yt(o,t,l),l=function(fa){if(fa===p&&we)return we;if(!ok&&fa in G)return G[fa];switch(fa){case"keys":case"values":case"entries":return function(){return new o(this,fa)}}return function(){return new o(this)}};var M,P=t+" Iterator",F=!1,G=r.prototype,z=G[Hi]||G["@@iterator"]||p&&G[p],we=!ok&&z||l(p),xe="Array"==t&&G.entries||z;if(xe&&(r=Md(xe.call(new r)),nk!==Object.prototype&&r.next&&(Md(r)!==nk&&(gc?gc(r,nk):"function"!=typeof r[Hi]&&ac(r,Hi,JD)),Td(r,P,!0))),"values"==p&&z&&"values"!==z.name&&(F=!0,we=function(){return z.call(this)}),G[Hi]!==we&&ac(G,Hi,we),nh[t]=we,p){var _n={values:l("values"),keys:_?we:l("keys"),entries:l("entries")};if(R)for(M in _n)!ok&&!F&&M in G||Ob(G,M,_n[M]);else wa({target:t,proto:!0,forced:ok||F},_n)}return _n},KD=Sb.set,LD=Sb.getterFor("String Iterator");rn(String,"String",function(r){KD(this,{type:"String Iterator",string:String(r),index:0})},function(){var r=LD(this),t=r.string,o=r.index;return o>=t.length?{value:void 0,done:!0}:(t=ft(t,o),r.index+=t.length,{value:t,done:!1})});var sn=mb("unscopables"),tn=Array.prototype;null==tn[sn]&&$b.f(tn,sn,{configurable:!0,value:vd(null)});var wf=function(r){tn[sn][r]=!0},zt=!0;"find"in[]&&Array(1).find(function(){zt=!1}),wa({target:"Array",proto:!0,forced:zt},{find:function(r){return kt(this,r,1<arguments.length?arguments[1]:void 0)}}),wf("find");var At=function(r){var t=String(Ec(this)),o="";if(0>(r=Rd(r))||1/0==r)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(t+=t))1&r&&(o+=t);return o};wa({target:"String",proto:!0},{repeat:At});var Bt=[].indexOf,Ct=!!Bt&&0>1/[1].indexOf(1,-0),MD=gg("indexOf");wa({target:"Array",proto:!0,forced:Ct||!MD},{indexOf:function(r){return Ct?Bt.apply(this,arguments)||0:bn(this,r,1<arguments.length?arguments[1]:void 0)}});var JA=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,KA=/CrOS/,LA=/android|ipad|playbook|silk/i;Kg.isMobile=Kg,Kg.default=Kg,wa({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991}),wa({target:"Number",stat:!0},{isNaN:function(r){return r!=r}});var ND=mn?{}.toString:function(){return"[object "+ph(this)+"]"};mn||Ob(Object.prototype,"toString",ND,{unsafe:!0});var qk=na.Promise,qh=function(r,t,o){for(var l in t)Ob(r,l,t[l],o);return r},Dt=mb("species"),Ii=function(r){r=me(r),cb&&r&&!r[Dt]&&(0,$b.f)(r,Dt,{configurable:!0,get:function(){return this}})},Ud=function(r,t,o){if(!(r instanceof t))throw TypeError("Incorrect "+(o?o+" ":"")+"invocation");return r},Ji=function(r,t){this.stopped=r,this.result=t},rk=function(r,t,o){var l,p=!(!o||!o.AS_ENTRIES),_=!(!o||!o.IS_ITERATOR),R=!(!o||!o.INTERRUPTED),M=tf(t,o&&o.that,1+p+R),P=function(G){return F&&kn(F),new Ji(!0,G)};if(t=function(G){return p?(ub(G),R?M(G[0],G[1],P):M(G[0],G[1])):R?M(G,P):M(G)},_)var F=r;else{if("function"!=typeof(_=Gi(r)))throw TypeError("Target is not iterable");if(ln(_)){for(_=0,o=xb(r.length);o>_;_++)if((l=t(r[_]))&&l instanceof Ji)return l;return new Ji(!1)}F=_.call(r)}for(r=F.next;!(_=r.call(F)).done;){try{l=t(_.value)}catch(G){throw kn(F),G}if("object"==typeof l&&l&&l instanceof Ji)return l}return new Ji(!1)},Et=/(?:iphone|ipod|ipad).*applewebkit/i.test(lh),qe="process"==Qd(na.process),sk=na.location,un=na.setImmediate,Ft=na.clearImmediate,OD=na.process,Gt=na.MessageChannel,vn=na.Dispatch,wn=0,Ki={},xn=function(r){if(Ki.hasOwnProperty(r)){var t=Ki[r];delete Ki[r],t()}},yn=function(r){return function(){xn(r)}},Ht=function(r){xn(r.data)},It=function(r){na.postMessage(r+"",sk.protocol+"//"+sk.host)};if(!un||!Ft)if(un=function(r){for(var t=[],o=1;arguments.length>o;)t.push(arguments[o++]);return Ki[++wn]=function(){("function"==typeof r?r:Function(r)).apply(void 0,t)},Li(wn),wn},Ft=function(r){delete Ki[r]},qe)var Li=function(r){OD.nextTick(yn(r))};else if(vn&&vn.now)Li=function(r){vn.now(yn(r))};else if(Gt&&!Et){var Jt=new Gt,Kt=Jt.port2;Jt.port1.onmessage=Ht,Li=tf(Kt.postMessage,Kt,1)}else na.addEventListener&&"function"==typeof postMessage&&!na.importScripts&&sk&&"file:"!==sk.protocol&&!Ga(It)?(Li=It,na.addEventListener("message",Ht,!1)):Li="onreadystatechange"in(dk?hh.createElement("script"):{})?function(r){on.appendChild(dk?hh.createElement("script"):{}).onreadystatechange=function(){on.removeChild(this),xn(r)}}:function(r){setTimeout(yn(r),0)};var zn=un,PD=/web0s(?!.*chrome)/i.test(lh),QD=pd.f,Lt=na.MutationObserver||na.WebKitMutationObserver,Mt=na.document,Nt=na.process,tk=na.Promise,Ot=QD(na,"queueMicrotask"),Pt=Ot&&Ot.value,jg,Mi;if(!Pt){var vk=function(){var r;for(qe&&(r=Nt.domain)&&r.exit();jg;){var t=jg.fn;jg=jg.next;try{t()}catch(o){throw jg?uk():Mi=void 0,o}}Mi=void 0,r&&r.enter()};if(Et||qe||PD||!Lt||!Mt)if(tk&&tk.resolve){var An=tk.resolve(void 0);An.constructor=tk;var RD=An.then,uk=function(){RD.call(An,vk)}}else uk=qe?function(){Nt.nextTick(vk)}:function(){zn.call(na,vk)};else{var Qt=!0,Rt=Mt.createTextNode("");new Lt(vk).observe(Rt,{characterData:!0}),uk=function(){Rt.data=Qt=!Qt}}}var St=Pt||function(r){r={fn:r,next:void 0},Mi&&(Mi.next=r),jg||(jg=r,uk()),Mi=r},SD=function(r){var t,o;this.promise=new r(function(l,p){if(void 0!==t||void 0!==o)throw TypeError("Bad Promise constructor");t=l,o=p}),this.resolve=Rc(t),this.reject=Rc(o)},Bn={f:function(r){return new SD(r)}},TD=function(r,t){var o=na.console;o&&o.error&&(1===arguments.length?o.error(r):o.error(r,t))},Cn=function(r){try{return{error:!1,value:r()}}catch(t){return{error:!0,value:t}}},UD="object"==typeof window,VD=mb("species"),Tt=Sb.get,WD=Sb.set,XD=Sb.getterFor("Promise"),kg=qk&&qk.prototype,ed=qk,wk=kg,Ut=na.TypeError,Dn=na.document,En=na.process,rh=Bn.f,YD=rh,ZD=!!(Dn&&Dn.createEvent&&na.dispatchEvent),Vt="function"==typeof PromiseRejectionEvent,Wt=!1,Ni=ne("Promise",function(){var r=Zm(ed)!==String(ed);if(!r&&66===oe)return!0;if(51<=oe&&/native code/.test(ed))return!1;var t=new ed(function(l){l(1)}),o=function(l){l(function(){},function(){})};return(t.constructor={})[VD]=o,!(Wt=t.then(function(){})instanceof o)||!r&&UD&&!Vt}),$D=Ni||!mk(function(r){ed.all(r).catch(function(){})}),Xt=function(r){var t;return!(!fb(r)||"function"!=typeof(t=r.then))&&t},Fn=function(r,t){if(!r.notified){r.notified=!0;var o=r.reactions;St(function(){for(var l=r.value,p=1==r.state,_=0;o.length>_;){var R,M=o[_++],P=p?M.ok:M.fail,F=M.resolve,G=M.reject,z=M.domain;try{if(P){if(p||(2===r.rejection&&aE(r),r.rejection=1),!0===P)var we=l;else if(z&&z.enter(),we=P(l),z){z.exit();var xe=!0}we===M.promise?G(Ut("Promise-chain cycle")):(R=Xt(we))?R.call(we,F,G):F(we)}else G(l)}catch(_n){z&&!xe&&z.exit(),G(_n)}}r.reactions=[],r.notified=!1,t&&!r.rejection&&bE(r)})}},Yt=function(r,t,o){var l;if(ZD){var p=Dn.createEvent("Event");p.promise=t,p.reason=o,p.initEvent(r,!1,!0),na.dispatchEvent(p)}else p={promise:t,reason:o};!Vt&&(l=na["on"+r])?l(p):"unhandledrejection"===r&&TD("Unhandled promise rejection",o)},bE=function(r){zn.call(na,function(){var t=r.facade,o=r.value;if(1!==r.rejection&&!r.parent){var l=Cn(function(){qe?En.emit("unhandledRejection",o,t):Yt("unhandledrejection",t,o)});if(r.rejection=qe||1!==r.rejection&&!r.parent?2:1,l.error)throw l.value}})},aE=function(r){zn.call(na,function(){var t=r.facade;qe?En.emit("rejectionHandled",t):Yt("rejectionhandled",t,r.value)})},sh=function(r,t,o){return function(l){r(t,l,o)}},th=function(r,t,o){r.done||(r.done=!0,o&&(r=o),r.value=t,r.state=2,Fn(r,!0))},Gn=function(r,t,o){if(!r.done){r.done=!0,o&&(r=o);try{if(r.facade===t)throw Ut("Promise can't be resolved itself");var l=Xt(t);l?St(function(){var p={done:!1};try{l.call(t,sh(Gn,p,r),sh(th,p,r))}catch(_){th(p,_,r)}}):(r.value=t,r.state=1,Fn(r,!1))}catch(p){th({done:!1},p,r)}}};if(Ni){ed=function(r){Ud(this,ed,"Promise"),Rc(r),Hn.call(this);var t=Tt(this);try{r(sh(Gn,t),sh(th,t))}catch(o){th(t,o)}},wk=ed.prototype;var Hn=function(r){WD(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})};Hn.prototype=qh(wk,{then:function(r,t){var o=XD(this),l=rh(eg(this,ed));return l.ok="function"!=typeof r||r,l.fail="function"==typeof t&&t,l.domain=qe?En.domain:void 0,o.parent=!0,o.reactions.push(l),0!=o.state&&Fn(o,!1),l.promise},catch:function(r){return this.then(void 0,r)}});var cE=function(){var r=new Hn,t=Tt(r);this.promise=r,this.resolve=sh(Gn,t),this.reject=sh(th,t)};if(Bn.f=rh=function(r){return r===ed||r===dE?new cE(r):YD(r)},"function"==typeof qk&&kg!==Object.prototype){var eE=kg.then;Wt||(Ob(kg,"then",function(r,t){var o=this;return new ed(function(l,p){eE.call(o,l,p)}).then(r,t)},{unsafe:!0}),Ob(kg,"catch",wk.catch,{unsafe:!0}));try{delete kg.constructor}catch(r){}gc&&gc(kg,wk)}}wa({global:!0,wrap:!0,forced:Ni},{Promise:ed}),Td(ed,"Promise",!1),Ii("Promise");var dE=me("Promise");wa({target:"Promise",stat:!0,forced:Ni},{reject:function(r){var t=rh(this);return t.reject.call(void 0,r),t.promise}}),wa({target:"Promise",stat:!0,forced:Ni},{resolve:function(r){if(ub(this),!fb(r)||r.constructor!==this){var t=Bn.f(this);(0,t.resolve)(r),r=t.promise}return r}}),wa({target:"Promise",stat:!0,forced:$D},{all:function(r){var t=this,o=rh(t),l=o.resolve,p=o.reject,_=Cn(function(){var R=Rc(t.resolve),M=[],P=0,F=1;rk(r,function(G){var z=P++,we=!1;M.push(void 0),F++,R.call(t,G).then(function(xe){we||(we=!0,M[z]=xe,--F||l(M))},p)}),--F||l(M)});return _.error&&p(_.value),o.promise},race:function(r){var t=this,o=rh(t),l=o.reject,p=Cn(function(){var _=Rc(t.resolve);rk(r,function(R){_.call(t,R).then(o.resolve,l)})});return p.error&&l(p.value),o.promise}});var fE=Math.floor,gE="".replace,hE=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,iE=/\$([$&'`]|\d{1,2})/g,jE=function(r,t,o,l,p,_){var R=o+r.length,M=l.length,P=iE;return void 0!==p&&(p=Zb(p),P=hE),gE.call(_,P,function(F,G){switch(G.charAt(0)){case"$":return"$";case"&":return r;case"`":return t.slice(0,o);case"'":return t.slice(R);case"<":F=p[G.slice(1,-1)];break;default:var z=+G;if(0===z)return F;if(z>M)return 0===(z=fE(z/10))?F:z<=M?void 0===l[z-1]?G.charAt(1):l[z-1]+G.charAt(1):F;F=l[z-1]}return void 0===F?"":F})},kE=Math.max,lE=Math.min;jk("replace",2,function(r,t,o,l){var p=l.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,_=l.REPLACE_KEEPS_$0,R=p?"$":"$0";return[function(M,P){var F=Ec(this),G=null==M?void 0:M[r];return void 0!==G?G.call(M,F,P):t.call(String(F),M,P)},function(M,P){if(!p&&_||"string"==typeof P&&-1===P.indexOf(R)){var F=o(t,M,this,P);if(F.done)return F.value}var G=ub(M);M=String(this),(F="function"==typeof P)||(P=String(P));var z=G.global;if(z){var we=G.unicode;G.lastIndex=0}for(var xe=[];;){var _n=mh(G,M);if(null===_n||(xe.push(_n),!z))break;""===String(_n[0])&&(G.lastIndex=hn(M,xb(G.lastIndex),we))}for(we="",z=G=0;z<xe.length;z++){_n=xe[z];for(var fa=String(_n[0]),da=kE(lE(Rd(_n.index),M.length),0),Ta=[],Da=1;Da<_n.length;Da++){var rl=_n[Da];Ta.push.call(Ta,void 0===rl?rl:String(rl))}_n=_n.groups,F?(Ta=[fa].concat(Ta,da,M),void 0!==_n&&Ta.push(_n),_n=String(P.apply(void 0,Ta))):_n=jE(fa,M,da,Ta,_n,P),da>=G&&(we+=M.slice(G,da)+_n,G=da+fa.length)}return we+M.slice(G)}]});var mE=Fi("slice"),nE=mb("species"),oE=[].slice,pE=Math.max;wa({target:"Array",proto:!0,forced:!mE},{slice:function(r,t){var o=Qc(this),l=xb(o.length);if(r=dd(r,l),t=dd(void 0===t?l:t,l),uf(o)){var p=o.constructor;if("function"!=typeof p||p!==Array&&!uf(p.prototype)?fb(p)&&null===(p=p[nE])&&(p=void 0):p=void 0,p===Array||void 0===p)return oE.call(o,r,t)}for(p=new(void 0===p?Array:p)(pE(t-r,0)),l=0;r<t;r++,l++)r in o&&oh(p,l,o[r]);return p.length=l,p}});var qE=Sb.set,rE=Sb.getterFor("Array Iterator"),xf=rn(Array,"Array",function(r,t){qE(this,{type:"Array Iterator",target:Qc(r),index:0,kind:t})},function(){var r=rE(this),t=r.target,o=r.kind,l=r.index++;return!t||l>=t.length?(r.target=void 0,{value:void 0,done:!0}):"keys"==o?{value:l,done:!1}:"values"==o?{value:t[l],done:!1}:{value:[l,t[l]],done:!1}},"values");nh.Arguments=nh.Array,wf("keys"),wf("values"),wf("entries");var Zt="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,uh=function(r){if(void 0===r)return 0;r=Rd(r);var t=xb(r);if(r!==t)throw RangeError("Wrong length or index");return t},sE=Math.abs,Je=Math.pow,tE=Math.floor,uE=Math.log,vE=Math.LN2,In=function(r){var t=Zb(this),o=xb(t.length),l=arguments.length,p=dd(1<l?arguments[1]:void 0,o);for(o=void 0===(l=2<l?arguments[2]:void 0)?o:dd(l,o);o>p;)t[p++]=r;return t},wE=dg.f,xE=$b.f,vh=Sb.get,$t=Sb.set,Vd=na.ArrayBuffer,fd=Vd,Wd=na.DataView,xk=Wd&&Wd.prototype,au=Object.prototype,yk=na.RangeError,bu=function(r,t,o){var l,p=Array(o),_=(1<<(o=8*o-t-1))-1,R=_>>1,M=23===t?Je(2,-24)-Je(2,-77):0,P=0>r||0===r&&0>1/r?1:0,F=0;if((r=sE(r))!=r||1/0===r){r=r!=r?1:0;var G=_}else G=tE(uE(r)/vE),1>r*(l=Je(2,-G))&&(G--,l*=2),2<=(r=1<=G+R?r+M/l:r+M*Je(2,1-R))*l&&(G++,l/=2),G+R>=_?(r=0,G=_):1<=G+R?(r=(r*l-1)*Je(2,t),G+=R):(r=r*Je(2,R-1)*Je(2,t),G=0);for(;8<=t;p[F++]=255&r,r/=256,t-=8);for(G=G<<t|r,o+=t;0<o;p[F++]=255&G,G/=256,o-=8);return p[--F]|=128*P,p},cu=function(r,t){var o=r.length,l=8*o-t-1,p=(1<<l)-1,_=p>>1;l-=7,--o;var R=r[o--],M=127&R;for(R>>=7;0<l;M=256*M+r[o],o--,l-=8);var P=M&(1<<-l)-1;for(M>>=-l,l+=t;0<l;P=256*P+r[o],o--,l-=8);if(0===M)M=1-_;else{if(M===p)return P?NaN:R?-1/0:1/0;P+=Je(2,t),M-=_}return(R?-1:1)*P*Je(2,M-t)},du=function(r){return[255&r]},eu=function(r){return[255&r,r>>8&255]},fu=function(r){return[255&r,r>>8&255,r>>16&255,r>>24&255]},gu=function(r){return r[3]<<24|r[2]<<16|r[1]<<8|r[0]},yE=function(r){return bu(r,23,4)},zE=function(r){return bu(r,52,8)},zk=function(r,t){xE(r.prototype,t,{get:function(){return vh(this)[t]}})},yf=function(r,t,o,l){o=uh(o);var p=vh(r);if(o+t>p.byteLength)throw yk("Wrong index");return t=(r=vh(p.buffer).bytes).slice(o+=p.byteOffset,o+t),l?t:t.reverse()},zf=function(r,t,o,l,p,_){o=uh(o);var R=vh(r);if(o+t>R.byteLength)throw yk("Wrong index");for(r=vh(R.buffer).bytes,o+=R.byteOffset,l=l(+p),p=0;p<t;p++)r[o+p]=l[_?p:t-p-1]};if(Zt){if(!Ga(function(){Vd(1)})||!Ga(function(){new Vd(-1)})||Ga(function(){return new Vd,new Vd(1.5),new Vd(NaN),"ArrayBuffer"!=Vd.name})){fd=function(r){return Ud(this,fd),new Vd(uh(r))};for(var AE=fd.prototype=Vd.prototype,hu=wE(Vd),iu=0,Jn;hu.length>iu;)(Jn=hu[iu++])in fd||ac(fd,Jn,Vd[Jn]);AE.constructor=fd}gc&&Md(xk)!==au&&gc(xk,au);var Ak=new Wd(new fd(2)),ju=xk.setInt8;Ak.setInt8(0,2147483648),Ak.setInt8(1,2147483649),!Ak.getInt8(0)&&Ak.getInt8(1)||qh(xk,{setInt8:function(r,t){ju.call(this,r,t<<24>>24)},setUint8:function(r,t){ju.call(this,r,t<<24>>24)}},{unsafe:!0})}else fd=function(r){Ud(this,fd,"ArrayBuffer"),r=uh(r),$t(this,{bytes:In.call(Array(r),0),byteLength:r}),cb||(this.byteLength=r)},Wd=function(r,t,o){Ud(this,Wd,"DataView"),Ud(r,fd,"DataView");var l=vh(r).byteLength;if(0>(t=Rd(t))||t>l)throw yk("Wrong offset");if(t+(o=void 0===o?l-t:xb(o))>l)throw yk("Wrong length");$t(this,{buffer:r,byteLength:o,byteOffset:t}),cb||(this.buffer=r,this.byteLength=o,this.byteOffset=t)},cb&&(zk(fd,"byteLength"),zk(Wd,"buffer"),zk(Wd,"byteLength"),zk(Wd,"byteOffset")),qh(Wd.prototype,{getInt8:function(r){return yf(this,1,r)[0]<<24>>24},getUint8:function(r){return yf(this,1,r)[0]},getInt16:function(r){var t=yf(this,2,r,1<arguments.length?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(r){var t=yf(this,2,r,1<arguments.length?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(r){return gu(yf(this,4,r,1<arguments.length?arguments[1]:void 0))},getUint32:function(r){return gu(yf(this,4,r,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(r){return cu(yf(this,4,r,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(r){return cu(yf(this,8,r,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(r,t){zf(this,1,r,du,t)},setUint8:function(r,t){zf(this,1,r,du,t)},setInt16:function(r,t){zf(this,2,r,eu,t,2<arguments.length?arguments[2]:void 0)},setUint16:function(r,t){zf(this,2,r,eu,t,2<arguments.length?arguments[2]:void 0)},setInt32:function(r,t){zf(this,4,r,fu,t,2<arguments.length?arguments[2]:void 0)},setUint32:function(r,t){zf(this,4,r,fu,t,2<arguments.length?arguments[2]:void 0)},setFloat32:function(r,t){zf(this,4,r,yE,t,2<arguments.length?arguments[2]:void 0)},setFloat64:function(r,t){zf(this,8,r,zE,t,2<arguments.length?arguments[2]:void 0)}});Td(fd,"ArrayBuffer"),Td(Wd,"DataView");var Oi={ArrayBuffer:fd,DataView:Wd},Kn=Oi.ArrayBuffer,ku=Oi.DataView,lu=Kn.prototype.slice,BE=Ga(function(){return!new Kn(2).slice(1,void 0).byteLength});wa({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:BE},{slice:function(r,t){if(void 0!==lu&&void 0===t)return lu.call(ub(this),r);var o=ub(this).byteLength;r=dd(r,o),t=dd(void 0===t?o:t,o),o=new(eg(this,Kn))(xb(t-r));for(var l=new ku(this),p=new ku(o),_=0;r<t;)p.setUint8(_++,l.getUint8(r++));return o}});var CE=$b.f,Bk=na.Int8Array,Ln=Bk&&Bk.prototype,mu=na.Uint8ClampedArray,nu=mu&&mu.prototype,re=Bk&&Md(Bk),Xd=Ln&&Md(Ln),ou=Object.prototype,pu=ou.isPrototypeOf,qu=mb("toStringTag"),Mn=ih("TYPED_ARRAY_TAG"),Ke=Zt&&!!gc&&"Opera"!==ph(na.opera),ru=!1,gd,se={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},DE={BigInt64Array:8,BigUint64Array:8},Ck=function(r){return!!fb(r)&&(r=ph(r),Fa(se,r)||Fa(DE,r))};for(gd in se)na[gd]||(Ke=!1);if((!Ke||"function"!=typeof re||re===Function.prototype)&&(re=function(){throw TypeError("Incorrect invocation")},Ke))for(gd in se)na[gd]&&gc(na[gd],re);if((!Ke||!Xd||Xd===ou)&&(Xd=re.prototype,Ke))for(gd in se)na[gd]&&gc(na[gd].prototype,Xd);if(Ke&&Md(nu)!==Xd&&gc(nu,Xd),cb&&!Fa(Xd,qu))for(gd in ru=!0,CE(Xd,qu,{get:function(){return fb(this)?this[Mn]:void 0}}),se)na[gd]&&ac(na[gd],Mn,gd);var Pi=Ke,su=ru&&Mn,Gb=function(r){if(Ck(r))return r;throw TypeError("Target is not a typed array")},wh=function(r){if(gc){if(pu.call(re,r))return r}else for(var t in se)if(Fa(se,gd)){var o=na[t];if(o&&(r===o||pu.call(o,r)))return r}throw TypeError("Target is not a typed array constructor")},Cb=function(r,t,o){if(cb){if(o)for(var l in se){var p=na[l];if(p&&Fa(p.prototype,r))try{delete p.prototype[r]}catch(_){}}Xd[r]&&!o||Ob(Xd,r,o?t:Ke&&Ln[r]||t)}},tu=function(r,t,o){var l,p;if(cb){if(gc){if(o)for(l in se)if((p=na[l])&&Fa(p,r))try{delete p[r]}catch(_){}if(re[r]&&!o)return;try{return Ob(re,r,o?t:Ke&&re[r]||t)}catch(_){}}for(l in se)!(p=na[l])||p[r]&&!o||Ob(p,r,t)}},uu=re,Qi=Xd,EE=na.ArrayBuffer,lg=na.Int8Array,Nn=!Pi||!Ga(function(){lg(1)})||!Ga(function(){new lg(-1)})||!mk(function(r){new lg,new lg(null),new lg(1.5),new lg(r)},!0)||Ga(function(){return 1!==new lg(new EE(2),1,void 0).length}),Dk=function(r,t){if(0>(r=Rd(r)))throw RangeError("The argument can't be less than 0");if(r%t)throw RangeError("Wrong offset");return r},On=function(r){var t=Zb(r),o=arguments.length,l=1<o?arguments[1]:void 0,p=void 0!==l,_=Gi(t);if(null!=_&&!ln(_)){var R=_.call(t),M=R.next;for(t=[];!(_=M.call(R)).done;)t.push(_.value)}for(p&&2<o&&(l=tf(l,arguments[2],2)),_=xb(t.length),R=new(wh(this))(_),o=0;_>o;o++)R[o]=p?l(t[o],o):t[o];return R},Ek=function(r,t,o){var l,p;return gc&&"function"==typeof(l=t.constructor)&&l!==o&&fb(p=l.prototype)&&p!==o.prototype&&gc(r,p),r},Ri=kc(function(r){var t=dg.f,o=Sb.get,l=Sb.set,p=$b.f,_=pd.f,R=Math.round,M=na.RangeError,P=Oi.ArrayBuffer,F=Oi.DataView,G=function(da,Ta){var Da=0,Ja=Ta.length;for(da=new(wh(da))(Ja);Ja>Da;)da[Da]=Ta[Da++];return da},z=function(da,Ta){p(da,Ta,{get:function(){return o(this)[Ta]}})},we=function(da){var Ta;return da instanceof P||"ArrayBuffer"==(Ta=ph(da))||"SharedArrayBuffer"==Ta},xe=function(da,Ta){return Ck(da)&&"symbol"!=typeof Ta&&Ta in da&&String(+Ta)==String(Ta)},_n=function(da,Ta){return xe(da,Ta=le(Ta,!0))?ke(2,da[Ta]):_(da,Ta)},fa=function(da,Ta,Da){return!(xe(da,Ta=le(Ta,!0))&&fb(Da)&&Fa(Da,"value"))||Fa(Da,"get")||Fa(Da,"set")||Da.configurable||Fa(Da,"writable")&&!Da.writable||Fa(Da,"enumerable")&&!Da.enumerable?p(da,Ta,Da):(da[Ta]=Da.value,da)};cb?(Pi||(pd.f=_n,$b.f=fa,z(Qi,"buffer"),z(Qi,"byteOffset"),z(Qi,"byteLength"),z(Qi,"length")),wa({target:"Object",stat:!0,forced:!Pi},{getOwnPropertyDescriptor:_n,defineProperty:fa}),r.exports=function(da,Ta,Da){var Ja=da.match(/\d+$/)[0]/8,rl=da+(Da?"Clamped":"")+"Array",Nl="get"+da,Vl="set"+da,xl=na[rl],kd=xl;da=kd&&kd.prototype;var E0={},Ha=function(_u,ul){p(_u,ul,{get:function(){var Rl=o(this);return Rl.view[Nl](ul*Ja+Rl.byteOffset,!0)},set:function(Rl){var ic=o(this);Da&&(Rl=0>(Rl=R(Rl))?0:255<Rl?255:255&Rl),ic.view[Vl](ul*Ja+ic.byteOffset,Rl,!0)},enumerable:!0})};Pi?Nn&&(kd=Ta(function(_u,ul,Rl,ic){return Ud(_u,kd,rl),Ek(fb(ul)?we(ul)?void 0!==ic?new xl(ul,Dk(Rl,Ja),ic):void 0!==Rl?new xl(ul,Dk(Rl,Ja)):new xl(ul):Ck(ul)?G(kd,ul):On.call(kd,ul):new xl(uh(ul)),_u,kd)}),gc&&gc(kd,uu),fg(t(xl),function(_u){_u in kd||ac(kd,_u,xl[_u])}),kd.prototype=da):(kd=Ta(function(_u,ul,Rl,ic){Ud(_u,kd,rl);var wc=0,tl=0;if(fb(ul)){if(!we(ul))return Ck(ul)?G(kd,ul):On.call(kd,ul);var Sl=ul;if(tl=Dk(Rl,Ja),ul=ul.byteLength,void 0===ic){if(ul%Ja||0>(ic=ul-tl))throw M("Wrong length")}else if((ic=xb(ic)*Ja)+tl>ul)throw M("Wrong length");ul=ic/Ja}else ul=uh(ul),Sl=new P(ic=ul*Ja);for(l(_u,{buffer:Sl,byteOffset:tl,byteLength:ic,length:ul,view:new F(Sl)});wc<ul;)Ha(_u,wc++)}),gc&&gc(kd,uu),da=kd.prototype=vd(Qi)),da.constructor!==kd&&ac(da,"constructor",kd),su&&ac(da,su,rl),E0[rl]=kd,wa({global:!0,forced:kd!=xl,sham:!Pi},E0),"BYTES_PER_ELEMENT"in kd||ac(kd,"BYTES_PER_ELEMENT",Ja),"BYTES_PER_ELEMENT"in da||ac(da,"BYTES_PER_ELEMENT",Ja),Ii(rl)}):r.exports=function(){}});Ri("Uint8",function(r){return function(t,o,l){return r(this,t,o,l)}});var FE=Math.min,GE=[].copyWithin||function(r,t){var o=Zb(this),l=xb(o.length),p=dd(r,l),_=dd(t,l),R=2<arguments.length?arguments[2]:void 0;for(l=FE((void 0===R?l:dd(R,l))-_,l-p),R=1,_<p&&p<_+l&&(R=-1,_+=l-1,p+=l-1);0<l--;)_ in o?o[p]=o[_]:delete o[p],p+=R,_+=R;return o};Cb("copyWithin",function(r,t){return GE.call(Gb(this),r,t,2<arguments.length?arguments[2]:void 0)}),Cb("every",function(r){return pD(Gb(this),r,1<arguments.length?arguments[1]:void 0)}),Cb("fill",function(r){return In.apply(Gb(this),arguments)}),Cb("filter",function(r){var t=jt(Gb(this),r,1<arguments.length?arguments[1]:void 0),o=eg(this,this.constructor),l=0,p=t.length;for(o=new(wh(o))(p);p>l;)o[l]=t[l++];return o}),Cb("find",function(r){return kt(Gb(this),r,1<arguments.length?arguments[1]:void 0)}),Cb("findIndex",function(r){return lt(Gb(this),r,1<arguments.length?arguments[1]:void 0)}),Cb("forEach",function(r){fg(Gb(this),r,1<arguments.length?arguments[1]:void 0)}),Cb("includes",function(r){return Ss(Gb(this),r,1<arguments.length?arguments[1]:void 0)}),Cb("indexOf",function(r){return bn(Gb(this),r,1<arguments.length?arguments[1]:void 0)});var vu=mb("iterator"),wu=na.Uint8Array,HE=xf.values,IE=xf.keys,JE=xf.entries,Pn=wu&&wu.prototype[vu],xu=!!Pn&&("values"==Pn.name||null==Pn.name),yu=function(){return HE.call(Gb(this))};Cb("entries",function(){return JE.call(Gb(this))}),Cb("keys",function(){return IE.call(Gb(this))}),Cb("values",yu,!xu),Cb(vu,yu,!xu);var KE=[].join;Cb("join",function(r){return KE.apply(Gb(this),arguments)});var LE=Math.min,Qn=[].lastIndexOf,zu=!!Qn&&0>1/[1].lastIndexOf(1,-0),ME=gg("lastIndexOf"),Rn=zu||!ME?function(r){if(zu)return Qn.apply(this,arguments)||0;var t=Qc(this),o=xb(t.length),l=o-1;for(1<arguments.length&&(l=LE(l,Rd(arguments[1]))),0>l&&(l=o+l);0<=l;l--)if(l in t&&t[l]===r)return l||0;return-1}:Qn;Cb("lastIndexOf",function(r){return Rn.apply(Gb(this),arguments)}),Cb("map",function(r){return it(Gb(this),r,1<arguments.length?arguments[1]:void 0,function(t,o){return new(wh(eg(t,t.constructor)))(o)})});var Au=function(r){return function(t,o,l,p){Rc(o),t=Zb(t);var _=zi(t),R=xb(t.length),M=r?R-1:0,P=r?-1:1;if(2>l)for(;;){if(M in _){p=_[M],M+=P;break}if(M+=P,r?0>M:R<=M)throw TypeError("Reduce of empty array with no initial value")}for(;r?0<=M:R>M;M+=P)M in _&&(p=o(p,_[M],M,t));return p}},Bu=Au(!1),Cu=Au(!0);Cb("reduce",function(r){return Bu(Gb(this),r,arguments.length,1<arguments.length?arguments[1]:void 0)}),Cb("reduceRight",function(r){return Cu(Gb(this),r,arguments.length,1<arguments.length?arguments[1]:void 0)});var NE=Math.floor;Cb("reverse",function(){for(var r,t=Gb(this).length,o=NE(t/2),l=0;l<o;)r=this[l],this[l++]=this[--t],this[t]=r;return this});var OE=Ga(function(){new Int8Array(1).set({})});Cb("set",function(r){Gb(this);var t=Dk(1<arguments.length?arguments[1]:void 0,1),o=this.length,l=Zb(r),p=xb(l.length),_=0;if(p+t>o)throw RangeError("Wrong length");for(;_<p;)this[t+_]=l[_++]},OE);var PE=[].slice,QE=Ga(function(){new Int8Array(1).slice()});Cb("slice",function(r,t){r=PE.call(Gb(this),r,t);var o=eg(this,this.constructor);t=0;var l=r.length;for(o=new(wh(o))(l);l>t;)o[t]=r[t++];return o},QE),Cb("some",function(r){return oD(Gb(this),r,1<arguments.length?arguments[1]:void 0)});var RE=[].sort;Cb("sort",function(r){return RE.call(Gb(this),r)}),Cb("subarray",function(r,t){var o=Gb(this),l=o.length;return r=dd(r,l),new(eg(o,o.constructor))(o.buffer,o.byteOffset+r*o.BYTES_PER_ELEMENT,xb((void 0===t?l:dd(t,l))-r))});var Fk=na.Int8Array,Du=[].toLocaleString,SE=[].slice,TE=!!Fk&&Ga(function(){Du.call(new Fk(1))}),UE=Ga(function(){return[1,2].toLocaleString()!=new Fk([1,2]).toLocaleString()})||!Ga(function(){Fk.prototype.toLocaleString.call([1,2])});Cb("toLocaleString",function(){return Du.apply(TE?SE.call(Gb(this)):Gb(this),arguments)},UE);var Eu=na.Uint8Array,VE=Eu&&Eu.prototype||{},Gk=[].toString,WE=[].join;Ga(function(){Gk.call({})})&&(Gk=function(){return WE.call(this)}),Cb("toString",Gk,VE.toString!=Gk);var Fu=Oi.ArrayBuffer;wa({global:!0,forced:na.ArrayBuffer!==Fu},{ArrayBuffer:Fu}),Ii("ArrayBuffer");var XE=$b.f,Sn=Function.prototype,YE=Sn.toString,ZE=/^\s*function ([^ (]*)/;!cb||"name"in Sn||XE(Sn,"name",{configurable:!0,get:function(){try{return YE.call(this).match(ZE)[1]}catch(r){return""}}});var Gu=RegExp.prototype,Hu=Gu.toString,$E=Ga(function(){return"/a/b"!=Hu.call({source:"a",flags:"b"})}),aF="toString"!=Hu.name;($E||aF)&&Ob(RegExp.prototype,"toString",function(){var r=ub(this),t=String(r.source),o=r.flags;return"/"+t+"/"+String(void 0===o&&r instanceof RegExp&&!("flags"in Gu)?hk.call(r):o)},{unsafe:!0});var bF=Fi("splice"),cF=Math.max,dF=Math.min;wa({target:"Array",proto:!0,forced:!bF},{splice:function(r,t){var o,l,p=Zb(this),_=xb(p.length),R=dd(r,_),M=arguments.length;if(0===M?M=o=0:1===M?(M=0,o=_-R):(M-=2,o=dF(cF(Rd(t),0),_-R)),9007199254740991<_+M-o)throw TypeError("Maximum allowed length exceeded");var P=Ei(p,o);for(l=0;l<o;l++){var F=R+l;F in p&&oh(P,l,p[F])}if(P.length=o,M<o){for(l=R;l<_-o;l++){var G=l+M;(F=l+o)in p?p[G]=p[F]:delete p[G]}for(l=_;l>_-o+M;l--)delete p[l-1]}else if(M>o)for(l=_-o;l>R;l--)G=l+M-1,(F=l+o-1)in p?p[G]=p[F]:delete p[G];for(l=0;l<M;l++)p[l+R]=arguments[l+2];return p.length=_-o+M,P}});var Tn={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Un=mb("iterator"),Iu=mb("toStringTag"),Vn=xf.values,Hk;for(Hk in Tn){var Ju=na[Hk],Le=Ju&&Ju.prototype;if(Le){if(Le[Un]!==Vn)try{ac(Le,Un,Vn)}catch(r){Le[Un]=Vn}if(Le[Iu]||ac(Le,Iu,Hk),Tn[Hk])for(var xh in xf)if(Le[xh]!==xf[xh])try{ac(Le,xh,xf[xh])}catch(r){Le[xh]=xf[xh]}}}var Ku=Object.is||function(r,t){return r===t?0!==r||1/r==1/t:r!=r&&t!=t};jk("search",1,function(r,t,o){return[function(l){var p=Ec(this),_=null==l?void 0:l[r];return void 0!==_?_.call(l,p):new RegExp(l)[r](String(p))},function(l){var p=o(t,l,this);if(p.done)return p.value;l=ub(l);var _=String(this);return Ku(p=l.lastIndex,0)||(l.lastIndex=0),_=mh(l,_),Ku(l.lastIndex,p)||(l.lastIndex=p),null===_?-1:_.index}]}),kc(function(r){var t,o;t="undefined"!=typeof self?self:qb,o=function(t){function o(Ha){return btoa(Ha).replace(/=+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}function l(Ha){return Ha=(Ha+="===").slice(0,-Ha.length%4),atob(Ha.replace(/-/g,"+").replace(/_/g,"/"))}function p(Ha){for(var _u=new Uint8Array(Ha.length),ul=0;ul<Ha.length;ul++)_u[ul]=Ha.charCodeAt(ul);return _u}function _(Ha){return Ha instanceof ArrayBuffer&&(Ha=new Uint8Array(Ha)),String.fromCharCode.apply(String,Ha)}function R(Ha){var _u={name:(Ha.name||Ha||"").toUpperCase().replace("V","v")};switch(_u.name){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;case"AES-CBC":case"AES-GCM":case"AES-KW":Ha.length&&(_u.length=Ha.length);break;case"HMAC":Ha.hash&&(_u.hash=R(Ha.hash)),Ha.length&&(_u.length=Ha.length);break;case"RSAES-PKCS1-v1_5":Ha.publicExponent&&(_u.publicExponent=new Uint8Array(Ha.publicExponent)),Ha.modulusLength&&(_u.modulusLength=Ha.modulusLength);break;case"RSASSA-PKCS1-v1_5":case"RSA-OAEP":Ha.hash&&(_u.hash=R(Ha.hash)),Ha.publicExponent&&(_u.publicExponent=new Uint8Array(Ha.publicExponent)),Ha.modulusLength&&(_u.modulusLength=Ha.modulusLength);break;default:throw new SyntaxError("Bad algorithm name")}return _u}function M(Ha){return{HMAC:{"SHA-1":"HS1","SHA-256":"HS256","SHA-384":"HS384","SHA-512":"HS512"},"RSASSA-PKCS1-v1_5":{"SHA-1":"RS1","SHA-256":"RS256","SHA-384":"RS384","SHA-512":"RS512"},"RSAES-PKCS1-v1_5":{"":"RSA1_5"},"RSA-OAEP":{"SHA-1":"RSA-OAEP","SHA-256":"RSA-OAEP-256"},"AES-KW":{128:"A128KW",192:"A192KW",256:"A256KW"},"AES-GCM":{128:"A128GCM",192:"A192GCM",256:"A256GCM"},"AES-CBC":{128:"A128CBC",192:"A192CBC",256:"A256CBC"}}[Ha.name][(Ha.hash||{}).name||Ha.length||""]}function P(Ha){(Ha instanceof ArrayBuffer||Ha instanceof Uint8Array)&&(Ha=JSON.parse(decodeURIComponent(escape(_(Ha)))));var _u={kty:Ha.kty,alg:Ha.alg,ext:Ha.ext||Ha.extractable};switch(_u.kty){case"oct":_u.k=Ha.k;case"RSA":"n e d p q dp dq qi oth".split(" ").forEach(function(ul){ul in Ha&&(_u[ul]=Ha[ul])});break;default:throw new TypeError("Unsupported key type")}return _u}function F(Ha){return Ha=P(Ha),Nl&&(Ha.extractable=Ha.ext,delete Ha.ext),p(unescape(encodeURIComponent(JSON.stringify(Ha)))).buffer}function G(Ha){var _u=z(Ha),ul=!1;if("1.2.840.113549.1.1.1"!==(2<_u.length&&(ul=!0,_u.shift()),Ha={ext:!0},_u[0][0]))throw new TypeError("Unsupported key type");var Rl="n e d p q dp dq qi".split(" ");for(_u=z(_u[1]),ul&&_u.shift(),ul=0;ul<_u.length;ul++)_u[ul][0]||(_u[ul]=_u[ul].subarray(1)),Ha[Rl[ul]]=o(_(_u[ul]));return Ha.kty="RSA",Ha}function z(Ha,_u){if(Ha instanceof ArrayBuffer&&(Ha=new Uint8Array(Ha)),_u||(_u={pos:0,end:Ha.length}),2>_u.end-_u.pos||_u.end>Ha.length)throw new RangeError("Malformed DER");var ul=Ha[_u.pos++],Rl=Ha[_u.pos++];if(128<=Rl){if(_u.end-_u.pos<(Rl&=127))throw new RangeError("Malformed DER");for(var ic=0;Rl--;)ic<<=8,ic|=Ha[_u.pos++];Rl=ic}if(_u.end-_u.pos<Rl)throw new RangeError("Malformed DER");switch(ul){case 2:ul=Ha.subarray(_u.pos,_u.pos+=Rl);break;case 3:if(Ha[_u.pos++])throw Error("Unsupported bit string");Rl--;case 4:ul=new Uint8Array(Ha.subarray(_u.pos,_u.pos+=Rl)).buffer;break;case 5:ul=null;break;case 6:if(!((Ha=btoa(_(Ha.subarray(_u.pos,_u.pos+=Rl))))in xl))throw Error("Unsupported OBJECT ID "+Ha);ul=xl[Ha];break;case 48:for(ul=[],Rl=_u.pos+Rl;_u.pos<Rl;)ul.push(z(Ha,_u));break;default:throw Error("Unsupported DER tag 0x"+ul.toString(16))}return ul}function we(Ha,_u){_u||(_u=[]);var ul=_u.length+2;if(_u.push(0,0),Ha instanceof Uint8Array)for(var Rl=2,ic=Ha.length,wc=0;wc<ic;wc++)_u.push(Ha[wc]);else if(Ha instanceof ArrayBuffer)for(Rl=4,ic=Ha.byteLength,Ha=new Uint8Array(Ha),wc=0;wc<ic;wc++)_u.push(Ha[wc]);else if(null===Ha)Rl=5,ic=0;else if("string"==typeof Ha&&Ha in kd)for(Rl=6,ic=(Ha=p(atob(kd[Ha]))).length,wc=0;wc<ic;wc++)_u.push(Ha[wc]);else if(Ha instanceof Array){for(wc=0;wc<Ha.length;wc++)we(Ha[wc],_u);Rl=48,ic=_u.length-ul}else{if(!("object"===Ia(Ha)&&3===Ha.tag&&Ha.value instanceof ArrayBuffer))throw Error("Unsupported DER value "+Ha);for(Rl=3,ic=(Ha=new Uint8Array(Ha.value)).byteLength,_u.push(0),wc=0;wc<ic;wc++)_u.push(Ha[wc]);ic++}if(128<=ic){for(wc=ic,ic=4,_u.splice(ul,0,wc>>24&255,wc>>16&255,wc>>8&255,255&wc);1<ic&&!(wc>>24);)wc<<=8,ic--;4>ic&&_u.splice(ul,4-ic),ic|=128}return _u.splice(ul-2,2,Rl,ic),_u}function xe(Ha,_u,ul,Rl){Object.defineProperties(this,{_key:{value:Ha},type:{value:Ha.type,enumerable:!0},extractable:{value:void 0===ul?Ha.extractable:ul,enumerable:!0},algorithm:{value:void 0===_u?Ha.algorithm:_u,enumerable:!0},usages:{value:void 0===Rl?Ha.usages:Rl,enumerable:!0}})}function _n(Ha){return"verify"===Ha||"encrypt"===Ha||"wrapKey"===Ha}function fa(Ha){return"sign"===Ha||"decrypt"===Ha||"unwrapKey"===Ha}if("function"!=typeof Promise)throw"Promise support required";var da=t.crypto||t.msCrypto;if(da){var Ta=da.subtle||da.webkitSubtle;if(Ta){var Da=t.Crypto||da.constructor||Object,Ja=t.SubtleCrypto||Ta.constructor||Object,rl=-1<t.navigator.userAgent.indexOf("Edge/"),Nl=!!t.msCrypto&&!rl,Vl=!da.subtle&&!!da.webkitSubtle;if(Nl||Vl){var xl={KoZIhvcNAQEB:"1.2.840.113549.1.1.1"},kd={"1.2.840.113549.1.1.1":"KoZIhvcNAQEB"};if(["generateKey","importKey","unwrapKey"].forEach(function(Ha){var _u=Ta[Ha];Ta[Ha]=function(ul,Rl,ic){var wc=[].slice.call(arguments);switch(Ha){case"generateKey":var tl=R(ul),Sl=Rl,kl=ic;break;case"importKey":tl=R(ic),Sl=wc[3],kl=wc[4],"jwk"===ul&&((Rl=P(Rl)).alg||(Rl.alg=M(tl)),Rl.key_ops||(Rl.key_ops="oct"!==Rl.kty?kl.filter("d"in Rl?fa:_n):kl.slice()),wc[1]=F(Rl));break;case"unwrapKey":tl=wc[4],Sl=wc[5],kl=wc[6],wc[2]=ic._key}if("generateKey"===Ha&&"HMAC"===tl.name&&tl.hash)return tl.length=tl.length||{"SHA-1":512,"SHA-256":512,"SHA-384":1024,"SHA-512":1024}[tl.hash.name],Ta.importKey("raw",da.getRandomValues(new Uint8Array(tl.length+7>>3)),tl,Sl,kl);if(Vl&&"generateKey"===Ha&&"RSASSA-PKCS1-v1_5"===tl.name&&(!tl.modulusLength||2048<=tl.modulusLength))return(ul=R(ul)).name="RSAES-PKCS1-v1_5",delete ul.hash,Ta.generateKey(ul,!0,["encrypt","decrypt"]).then(function(Bl){return Promise.all([Ta.exportKey("jwk",Bl.publicKey),Ta.exportKey("jwk",Bl.privateKey)])}).then(function(Bl){return Bl[0].alg=Bl[1].alg=M(tl),Bl[0].key_ops=kl.filter(_n),Bl[1].key_ops=kl.filter(fa),Promise.all([Ta.importKey("jwk",Bl[0],tl,!0,Bl[0].key_ops),Ta.importKey("jwk",Bl[1],tl,Sl,Bl[1].key_ops)])}).then(function(Bl){return{publicKey:Bl[0],privateKey:Bl[1]}});if((Vl||Nl&&"SHA-1"===(tl.hash||{}).name)&&"importKey"===Ha&&"jwk"===ul&&"HMAC"===tl.name&&"oct"===Rl.kty)return Ta.importKey("raw",p(l(Rl.k)),ic,wc[3],wc[4]);if(Vl&&"importKey"===Ha&&("spki"===ul||"pkcs8"===ul))return Ta.importKey("jwk",G(Rl),ic,wc[3],wc[4]);if(Nl&&"unwrapKey"===Ha)return Ta.decrypt(wc[3],ic,Rl).then(function(Bl){return Ta.importKey(ul,Bl,wc[4],wc[5],wc[6])});try{var Fd=_u.apply(Ta,wc)}catch(Bl){return Promise.reject(Bl)}return Nl&&(Fd=new Promise(function(Bl,Jp){Fd.onabort=Fd.onerror=function(Th){Jp(Th)},Fd.oncomplete=function(Th){Bl(Th.target.result)}})),Fd=Fd.then(function(Bl){return"HMAC"!==tl.name||tl.length||(tl.length=8*Bl.algorithm.length),0==tl.name.search("RSA")&&(tl.modulusLength||(tl.modulusLength=(Bl.publicKey||Bl).algorithm.modulusLength),tl.publicExponent||(tl.publicExponent=(Bl.publicKey||Bl).algorithm.publicExponent)),Bl.publicKey&&Bl.privateKey?{publicKey:new xe(Bl.publicKey,tl,Sl,kl.filter(_n)),privateKey:new xe(Bl.privateKey,tl,Sl,kl.filter(fa))}:new xe(Bl,tl,Sl,kl)})}}),["exportKey","wrapKey"].forEach(function(Ha){var _u=Ta[Ha];Ta[Ha]=function(ul,Rl,ic){var wc=[].slice.call(arguments);switch(Ha){case"exportKey":wc[1]=Rl._key;break;case"wrapKey":wc[1]=Rl._key,wc[2]=ic._key}if((Vl||Nl&&"SHA-1"===(Rl.algorithm.hash||{}).name)&&"exportKey"===Ha&&"jwk"===ul&&"HMAC"===Rl.algorithm.name&&(wc[0]="raw"),!Vl||"exportKey"!==Ha||"spki"!==ul&&"pkcs8"!==ul||(wc[0]="jwk"),Nl&&"wrapKey"===Ha)return Ta.exportKey(ul,Rl).then(function(Sl){return"jwk"===ul&&(Sl=p(unescape(encodeURIComponent(JSON.stringify(P(Sl)))))),Ta.encrypt(wc[3],ic,Sl)});try{var tl=_u.apply(Ta,wc)}catch(Sl){return Promise.reject(Sl)}return Nl&&(tl=new Promise(function(Sl,kl){tl.onabort=tl.onerror=function(Fd){kl(Fd)},tl.oncomplete=function(Fd){Sl(Fd.target.result)}})),"exportKey"===Ha&&"jwk"===ul&&(tl=tl.then(function(Sl){return(Vl||Nl&&"SHA-1"===(Rl.algorithm.hash||{}).name)&&"HMAC"===Rl.algorithm.name?{kty:"oct",alg:M(Rl.algorithm),key_ops:Rl.usages.slice(),ext:!0,k:o(_(Sl))}:((Sl=P(Sl)).alg||(Sl.alg=M(Rl.algorithm)),Sl.key_ops||(Sl.key_ops="public"===Rl.type?Rl.usages.filter(_n):"private"===Rl.type?Rl.usages.filter(fa):Rl.usages.slice()),Sl)})),!Vl||"exportKey"!==Ha||"spki"!==ul&&"pkcs8"!==ul||(tl=tl.then(function(Sl){var kl=[["",null]],Fd=!1;if("RSA"!==(Sl=P(Sl)).kty)throw new TypeError("Unsupported key type");for(var Bl="n e d p q dp dq qi".split(" "),Jp=[],Th=0;Th<Bl.length&&Bl[Th]in Sl;Th++){var H0=Jp[Th]=p(l(Sl[Bl[Th]]));128&H0[0]&&(Jp[Th]=new Uint8Array(H0.length+1),Jp[Th].set(H0,1))}return 2<Jp.length&&(Fd=!0,Jp.unshift(new Uint8Array([0]))),kl[0][0]="1.2.840.113549.1.1.1",kl.push(new Uint8Array(we(Jp)).buffer),Fd?kl.unshift(new Uint8Array([0])):kl[1]={tag:3,value:kl[1]},new Uint8Array(we(kl)).buffer})),tl}}),["encrypt","decrypt","sign","verify"].forEach(function(Ha){var _u=Ta[Ha];Ta[Ha]=function(ul,Rl,ic,wc){if(Nl&&(!ic.byteLength||wc&&!wc.byteLength))throw Error("Empty input is not allowed");var tl=[].slice.call(arguments),Sl=R(ul);if(!Nl||"sign"!==Ha&&"verify"!==Ha||"RSASSA-PKCS1-v1_5"!==ul&&"HMAC"!==ul||(tl[0]={name:ul}),Nl&&Rl.algorithm.hash&&(tl[0].hash=tl[0].hash||Rl.algorithm.hash),Nl&&"decrypt"===Ha&&"AES-GCM"===Sl.name){var kl=ul.tagLength>>3;tl[2]=(ic.buffer||ic).slice(0,ic.byteLength-kl),ul.tag=(ic.buffer||ic).slice(ic.byteLength-kl)}Nl&&"AES-GCM"===Sl.name&&void 0===tl[0].tagLength&&(tl[0].tagLength=128),tl[1]=Rl._key;try{var Fd=_u.apply(Ta,tl)}catch(Bl){return Promise.reject(Bl)}return Nl&&(Fd=new Promise(function(Bl,Jp){Fd.onabort=Fd.onerror=function(Th){Jp(Th)},Fd.oncomplete=function(Th){if(Th=Th.target.result,"encrypt"===Ha&&Th instanceof AesGcmEncryptResult){var H0=Th.ciphertext,ba=Th.tag;(Th=new Uint8Array(H0.byteLength+ba.byteLength)).set(new Uint8Array(H0),0),Th.set(new Uint8Array(ba),H0.byteLength),Th=Th.buffer}Bl(Th)}})),Fd}}),Nl){var E0=Ta.digest;Ta.digest=function(Ha,_u){if(!_u.byteLength)throw Error("Empty input is not allowed");try{var ul=E0.call(Ta,Ha,_u)}catch(Rl){return Promise.reject(Rl)}return ul=new Promise(function(Rl,ic){ul.onabort=ul.onerror=function(wc){ic(wc)},ul.oncomplete=function(wc){Rl(wc.target.result)}})},t.crypto=Object.create(da,{getRandomValues:{value:function(Ha){return da.getRandomValues(Ha)}},subtle:{value:Ta}}),t.CryptoKey=xe}Vl&&(da.subtle=Ta,t.Crypto=Da,t.SubtleCrypto=Ja,t.CryptoKey=xe)}}}},r.exports?r.exports=o(t):o(t)}),function(r){r.console||(r.console={}),r=r.console;for(var t,o=function(){},l=["memory"],p="assert clear count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profiles profileEnd show table time timeEnd timeline timelineEnd timeStamp trace warn".split(" ");t=l.pop();)r[t]||(r[t]={});for(;t=p.pop();)r[t]||(r[t]=o)}("undefined"==typeof window?qb:window),wa({target:"Object",stat:!0},{setPrototypeOf:gc});var eF=Ga(function(){Md(1)});wa({target:"Object",stat:!0,forced:eF,sham:!qt},{getPrototypeOf:function(r){return Md(Zb(r))}});var Lu=[].slice,Wn={},fF=Function.bind||function(r){var t=Rc(this),o=Lu.call(arguments,1),l=function(){var p=o.concat(Lu.call(arguments));if(this instanceof l){var _=p.length;if(!(_ in Wn)){for(var R=[],M=0;M<_;M++)R[M]="a["+M+"]";Wn[_]=Function("C,a","return new C("+R.join(",")+")")}p=Wn[_](t,p)}else p=t.apply(r,p);return p};return fb(t.prototype)&&(l.prototype=t.prototype),l},Xn=me("Reflect","construct"),Mu=Ga(function(){function r(){}return!(Xn(function(){},[],r)instanceof r)}),Nu=!Ga(function(){Xn(function(){})}),Ou=Mu||Nu;wa({target:"Reflect",stat:!0,forced:Ou,sham:Ou},{construct:function(r,t){Rc(r),ub(t);var o=3>arguments.length?r:Rc(arguments[2]);if(Nu&&!Mu)return Xn(r,t,o);if(r==o){switch(t.length){case 0:return new r;case 1:return new r(t[0]);case 2:return new r(t[0],t[1]);case 3:return new r(t[0],t[1],t[2]);case 4:return new r(t[0],t[1],t[2],t[3])}return(o=[null]).push.apply(o,t),new(fF.apply(r,o))}o=vd(fb(o=o.prototype)?o:Object.prototype);var l=Function.apply.call(r,o,t);return fb(l)?l:o}}),wa({target:"Reflect",stat:!0},{get:cr});var Pu=pd.f,gF=Ga(function(){Pu(1)});wa({target:"Object",stat:!0,forced:!cb||gF,sham:!cb},{getOwnPropertyDescriptor:function(r,t){return Pu(Qc(r),t)}});var Qu=dg.f,hF={}.toString,Ru="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Yn=function(r){if(Ru&&"[object Window]"==hF.call(r))try{var t=Qu(r)}catch(o){t=Ru.slice()}else t=Qu(Qc(r));return t},Su={f:mb},iF=$b.f,Ik=function(r){var t=na.Symbol||(na.Symbol={});Fa(t,r)||iF(t,r,{value:Su.f(r)})},Sc=ek("hidden"),Tu=mb("toPrimitive"),jF=Sb.set,Uu=Sb.getterFor("Symbol"),wd=Object.prototype,Tc=na.Symbol,Si=me("JSON","stringify"),Vu=pd.f,Af=$b.f,Wu=Yn,kF=yi,Me=rf("symbols"),Ti=rf("op-symbols"),Zn=rf("string-to-symbol-registry"),$n=rf("symbol-to-string-registry"),lF=rf("wks"),ao=na.QObject,bo=!ao||!ao.prototype||!ao.prototype.findChild,co=cb&&Ga(function(){return 7!=vd(Af({},"a",{get:function(){return Af(this,"a",{value:7}).a}})).a})?function(r,t,o){var l=Vu(wd,t);l&&delete wd[t],Af(r,t,o),l&&r!==wd&&Af(wd,t,l)}:Af,eo=function(r,t){var o=Me[r]=vd(Tc.prototype);return jF(o,{type:"Symbol",tag:r,description:t}),cb||(o.description=t),o},fo=at?function(r){return"symbol"==typeof r}:function(r){return Object(r)instanceof Tc},Jk=function(r,t,o){return r===wd&&Jk(Ti,t,o),ub(r),t=le(t,!0),ub(o),Fa(Me,t)?(o.enumerable?(Fa(r,Sc)&&r[Sc][t]&&(r[Sc][t]=!1),o=vd(o,{enumerable:ke(0,!1)})):(Fa(r,Sc)||Af(r,Sc,ke(1,{})),r[Sc][t]=!0),co(r,t,o)):Af(r,t,o)},Xu=function(r,t){ub(r);var o=Qc(t);return t=Ie(o).concat(go(o)),fg(t,function(l){cb&&!ho.call(o,l)||Jk(r,l,o[l])}),r},ho=function(r){r=le(r,!0);var t=kF.call(this,r);return!(this===wd&&Fa(Me,r)&&!Fa(Ti,r))&&(!(t||!Fa(this,r)||!Fa(Me,r)||Fa(this,Sc)&&this[Sc][r])||t)},Yu=function(r,t){if(r=Qc(r),t=le(t,!0),r!==wd||!Fa(Me,t)||Fa(Ti,t)){var o=Vu(r,t);return!o||!Fa(Me,t)||Fa(r,Sc)&&r[Sc][t]||(o.enumerable=!0),o}},Zu=function(r){r=Wu(Qc(r));var t=[];return fg(r,function(o){Fa(Me,o)||Fa(jh,o)||t.push(o)}),t},go=function(r){var t=r===wd;r=Wu(t?Ti:Qc(r));var o=[];return fg(r,function(l){!Fa(Me,l)||t&&!Fa(wd,l)||o.push(Me[l])}),o};if(pe||(Tc=function(){if(this instanceof Tc)throw TypeError("Symbol is not a constructor");var r=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=ih(r),o=function(l){this===wd&&o.call(Ti,l),Fa(this,Sc)&&Fa(this[Sc],t)&&(this[Sc][t]=!1),co(this,t,ke(1,l))};return cb&&bo&&co(wd,t,{configurable:!0,set:o}),eo(t,r)},Ob(Tc.prototype,"toString",function(){return Uu(this).tag}),Ob(Tc,"withoutSetter",function(r){return eo(ih(r),r)}),yi=ho,$b.f=Jk,pd.f=Yu,dg.f=Yn=Zu,Ai.f=go,Su.f=function(r){return eo(mb(r),r)},cb&&(Af(Tc.prototype,"description",{configurable:!0,get:function(){return Uu(this).description}}),Ob(wd,"propertyIsEnumerable",ho,{unsafe:!0}))),wa({global:!0,wrap:!0,forced:!pe,sham:!pe},{Symbol:Tc}),fg(Ie(lF),function(r){Ik(r)}),wa({target:"Symbol",stat:!0,forced:!pe},{for:function(r){if(r=String(r),Fa(Zn,r))return Zn[r];var t=Tc(r);return Zn[r]=t,$n[t]=r,t},keyFor:function(r){if(!fo(r))throw TypeError(r+" is not a symbol");if(Fa($n,r))return $n[r]},useSetter:function(){bo=!0},useSimple:function(){bo=!1}}),wa({target:"Object",stat:!0,forced:!pe,sham:!cb},{create:function(r,t){return void 0===t?vd(r):Xu(vd(r),t)},defineProperty:Jk,defineProperties:Xu,getOwnPropertyDescriptor:Yu}),wa({target:"Object",stat:!0,forced:!pe},{getOwnPropertyNames:Zu,getOwnPropertySymbols:go}),wa({target:"Object",stat:!0,forced:Ga(function(){Ai.f(1)})},{getOwnPropertySymbols:function(r){return Ai.f(Zb(r))}}),Si){var mF=!pe||Ga(function(){var r=Tc();return"[null]"!=Si([r])||"{}"!=Si({a:r})||"{}"!=Si(Object(r))});wa({target:"JSON",stat:!0,forced:mF},{stringify:function(r,t,o){for(var l,p=[r],_=1;arguments.length>_;)p.push(arguments[_++]);if(l=t,(fb(t)||void 0!==r)&&!fo(r))return uf(t)||(t=function(R,M){if("function"==typeof l&&(M=l.call(this,R,M)),!fo(M))return M}),p[1]=t,Si.apply(null,p)}})}Tc.prototype[Tu]||ac(Tc.prototype,Tu,Tc.prototype.valueOf),Td(Tc,"Symbol"),jh[Sc]=!0;var nF=$b.f,Ne=na.Symbol;if(cb&&"function"==typeof Ne&&(!("description"in Ne.prototype)||void 0!==Ne().description)){var $u={},Ui=function(){var r=1>arguments.length||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof Ui?new Ne(r):void 0===r?Ne():Ne(r);return""===r&&($u[t]=!0),t};Vs(Ui,Ne);var io=Ui.prototype=Ne.prototype;io.constructor=Ui;var oF=io.toString,pF="Symbol(test)"==String(Ne("test")),qF=/^Symbol\((.*)\)[^)]+$/;nF(io,"description",{configurable:!0,get:function(){var r=fb(this)?this.valueOf():this,t=oF.call(r);return Fa($u,r)?"":""===(r=pF?t.slice(7,-1):t.replace(qF,"$1"))?void 0:r}}),wa({global:!0,forced:!0},{Symbol:Ui})}Ik("toStringTag"),Td(na.JSON,"JSON",!0),Td(Math,"Math",!0),function(){function r(z,we){if(!(z instanceof we))throw new TypeError("Cannot call a class as a function")}function t(z,we){for(var xe=0;xe<we.length;xe++){var _n=we[xe];_n.enumerable=_n.enumerable||!1,_n.configurable=!0,"value"in _n&&(_n.writable=!0),Object.defineProperty(z,_n.key,_n)}}function o(z,we,xe){return we&&t(z.prototype,we),xe&&t(z,xe),z}function l(z){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(we){return we.__proto__||Object.getPrototypeOf(we)})(z)}function p(z,we){return(p=Object.setPrototypeOf||function(xe,_n){return xe.__proto__=_n,xe})(z,we)}function _(z){if(void 0===z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z}function M(z,we,xe){return(M="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(_n,fa,da){for(;!Object.prototype.hasOwnProperty.call(_n,fa)&&null!==(_n=l(_n)););if(_n)return(fa=Object.getOwnPropertyDescriptor(_n,fa)).get?fa.get.call(da):fa.value})(z,we,xe||z)}var P=function(){function z(){r(this,z),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return o(z,[{key:"addEventListener",value:function(we,xe,_n){we in this.listeners||(this.listeners[we]=[]),this.listeners[we].push({callback:xe,options:_n})}},{key:"removeEventListener",value:function(we,xe){if(we in this.listeners)for(var _n=0,fa=(we=this.listeners[we]).length;_n<fa;_n++)if(we[_n].callback===xe){we.splice(_n,1);break}}},{key:"dispatchEvent",value:function(we){if(we.type in this.listeners){for(var xe=this.listeners[we.type].slice(),_n=0,fa=xe.length;_n<fa;_n++){var da=xe[_n];try{da.callback.call(this,we)}catch(Ta){Promise.resolve().then(function(){throw Ta})}da.options&&da.options.once&&this.removeEventListener(we.type,da.callback)}return!we.defaultPrevented}}}]),z}(),F=function(z){function we(){r(this,we);var _n=xe.call(this);return _n.listeners||P.call(_(_n)),Object.defineProperty(_(_n),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(_(_n),"onabort",{value:null,writable:!0,configurable:!0}),_n}!function(_n,fa){if("function"!=typeof fa&&null!==fa)throw new TypeError("Super expression must either be null or a function");_n.prototype=Object.create(fa&&fa.prototype,{constructor:{value:_n,writable:!0,configurable:!0}}),fa&&p(_n,fa)}(we,z);var xe=function R(z){var we=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(xe){return!1}}();return function(){var xe=l(z);if(we){var _n=l(this).constructor;xe=Reflect.construct(xe,arguments,_n)}else xe=xe.apply(this,arguments);return!xe||"object"!==Ia(xe)&&"function"!=typeof xe?_(this):xe}}(we);return o(we,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(_n){"abort"===_n.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,_n)),M(l(we.prototype),"dispatchEvent",this).call(this,_n)}}]),we}(P),G=function(){function z(){r(this,z),Object.defineProperty(this,"signal",{value:new F,writable:!0,configurable:!0})}return o(z,[{key:"abort",value:function(){try{var we=new Event("abort")}catch(xe){"undefined"!=typeof document?document.createEvent?(we=document.createEvent("Event")).initEvent("abort",!1,!1):(we=document.createEventObject()).type="abort":we={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(we)}},{key:"toString",value:function(){return"[object AbortController]"}}]),z}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(G.prototype[Symbol.toStringTag]="AbortController",F.prototype[Symbol.toStringTag]="AbortSignal"),function(z){if(z.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL){console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill");var we=!0}else we="function"==typeof z.Request&&!z.Request.prototype.hasOwnProperty("signal")||!z.AbortController;we&&(z.AbortController=G,z.AbortSignal=F)}("undefined"!=typeof self?self:qb)}();var rF=Math.floor,sF=Math.log,tF=Math.LOG2E;wa({target:"Math",stat:!0},{clz32:function(r){return(r>>>=0)?31-rF(sF(r+.5)*tF):32}});var uF=Math.log,vF=Math.LN2,NA=Math.clz32||function(r){return 31-uF(r>>>0)/vF|0},Uf=String.fromCharCode,av={}.toString,jo=window.Uint8Array,ko=jo||Array,wF=av.call((window.ArrayBuffer||ko).prototype),lo,r,t,o,l,p,_,R,M,P,F,G,z,we,xe,_n;dr.prototype.decode=function(r){if(av.call(r=r&&r.buffer||r)!==wF)throw Error("Failed to execute 'decode' on 'TextDecoder': The provided value is not of type '(ArrayBuffer or ArrayBufferView)'");for(var t="",o=0,l=0|(r=jo?new ko(r):r).length;o<l;o=o+32768|0)t+=Uf.apply(0,r[jo?"slice":"subarray"](o,o+32768|0));return t.replace(/[\xc0-\xff][\x80-\xbf]*/g,MA)},window.TextDecoder||(window.TextDecoder=dr),er.prototype.encode=function(r){for(var t=0|(r=void 0===r?"":(""+r).replace(/[\x80-\uD7ff\uDC00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,OA)).length,o=new ko(t),l=0;l<t;l=l+1|0)o[l]=r.charCodeAt(l);return o},window.TextEncoder||(window.TextEncoder=er),r=lo||(lo={}),(o=t||(t={})).LOGIN="LOGIN",o.LOGIN_SUCCESS="LOGIN_SUCCESS",o.LOGIN_FAILURE="LOGIN_FAILURE",o.LOGIN_TIMEOUT="LOGIN_TIMEOUT",o.INTERRUPTED="INTERRUPTED",o.LOGOUT="LOGOUT",o.BANNED_BY_SERVER="BANNED_BY_SERVER",o.REMOTE_LOGIN="REMOTE_LOGIN",o.TOKEN_EXPIRED="TOKEN_EXPIRED",r.ConnectionChangeReason=t,(_n=l||(l={})).DISCONNECTED="DISCONNECTED",_n.CONNECTING="CONNECTING",_n.CONNECTED="CONNECTED",_n.RECONNECTING="RECONNECTING",_n.ABORTED="ABORTED",r.ConnectionState=l,function(_n){_n.IDLE="IDLE",_n.SENT_TO_REMOTE="SENT_TO_REMOTE",_n.RECEIVED_BY_REMOTE="RECEIVED_BY_REMOTE",_n.ACCEPTED_BY_REMOTE="ACCEPTED_BY_REMOTE",_n.REFUSED_BY_REMOTE="REFUSED_BY_REMOTE",_n.CANCELED="CANCELED",_n.FAILURE="FAILURE"}(p||(p={})),r.LocalInvitationState=p,function(_n){_n.INVITATION_RECEIVED="INVITATION_RECEIVED",_n.ACCEPT_SENT_TO_LOCAL="ACCEPT_SENT_TO_LOCAL",_n.REFUSED="REFUSED",_n.ACCEPTED="ACCEPTED",_n.CANCELED="CANCELED",_n.FAILURE="FAILURE"}(_||(_={})),r.RemoteInvitationState=_,function(_n){_n.UNKNOWN="UNKNOWN",_n.PEER_NO_RESPONSE="PEER_NO_RESPONSE",_n.INVITATION_EXPIRE="INVITATION_EXPIRE",_n.PEER_OFFLINE="PEER_OFFLINE",_n.NOT_LOGGEDIN="NOT_LOGGEDIN"}(R||(R={})),r.LocalInvitationFailureReason=R,function(_n){_n.UNKNOWN="UNKNOWN",_n.PEER_OFFLINE="PEER_OFFLINE",_n.ACCEPT_FAILURE="ACCEPT_FAILURE",_n.INVITATION_EXPIRE="INVITATION_EXPIRE"}(M||(M={})),r.RemoteInvitationFailureReason=M,function(_n){_n.ONLINE="ONLINE",_n.UNREACHABLE="UNREACHABLE",_n.OFFLINE="OFFLINE"}(P||(P={})),r.PeerOnlineState=P,function(_n){_n.UNSUBSCRIBED="UNSUBSCRIBED",_n.SUBSCRIBED="SUBSCRIBED"}(F||(F={})),r.subscribedState=F,(G||(G={})).ONLINE_STATUS="ONLINE_STATUS",r.PeerSubscriptionOption=G,function(_n){_n.TEXT="TEXT",_n.RAW="RAW"}(z||(z={})),r.MessageType=z,function(_n){_n.CN="CN",_n.NA="NA",_n.EU="EU",_n.AS="AS",_n.JP="JP",_n.IN="IN",_n.GLOB="GLOB",_n.OC="OC",_n.SA="SA",_n.AF="AF",_n.OVS="OVS"}(we||(we={})),r.LegacyAreaCode=we,function(_n){_n.GLOBAL="GLOBAL",_n.INDIA="INDIA",_n.JAPAN="JAPAN",_n.ASIA="ASIA",_n.EUROPE="EUROPE",_n.CHINA="CHINA",_n.NORTH_AMERICA="NORTH_AMERICA"}(xe||(xe={})),r.AreaCode=xe;var Oa=lo;wa({target:"Array",proto:!0},{includes:function(r){return Ss(this,r,1<arguments.length?arguments[1]:void 0)}}),wf("includes");var mo=function(r){if(gn(r))throw TypeError("The method doesn't accept regular expressions");return r},xF=mb("match"),no=function(r){var t=/./;try{"/./"[r](t)}catch(o){try{return t[xF]=!1,"/./"[r](t)}catch(l){}}return!1};wa({target:"String",proto:!0,forced:!no("includes")},{includes:function(r){return!!~String(Ec(this)).indexOf(mo(r),1<arguments.length?arguments[1]:void 0)}});var Yd={RECONNECTING_AP_INTERVAL:2500,RECONNECTING_AP_NUM:2,DISABLE_MESSAGE_COMPRESSION:!1,LOG_UPLOAD_INTERVAL:3e3,LOG_HANDLER:void 0,ENABLE_EDGE_AUTO_FALLBACK:!0};Ik("iterator"),Ik("asyncIterator");var oo=gg("forEach")?[].forEach:function(r){return fg(this,r,1<arguments.length?arguments[1]:void 0)},bv;for(bv in Tn){var cv=na[bv],Kk=cv&&cv.prototype;if(Kk&&Kk.forEach!==oo)try{ac(Kk,"forEach",oo)}catch(r){Kk.forEach=oo}}var yF=[].reverse,dv=[1,2];wa({target:"Array",proto:!0,forced:String(dv)===String(dv.reverse())},{reverse:function(){return uf(this)&&(this.length=this.length),yF.call(this)}});var W=kc(function(r){r=function(t){function o(ic,wc,tl){return Object.defineProperty(ic,wc,{value:tl,enumerable:!0,configurable:!0,writable:!0}),ic[wc]}function l(ic,wc,tl,Sl){return wc=Object.create((wc&&wc.prototype instanceof _?wc:_).prototype),Sl=new xe(Sl||[]),wc._invoke=(kl=ic,Fd=tl,Bl=Sl,Jp=xl,function(Th,H0){if(Jp===E0)throw Error("Generator is already running");if(Jp===Ha){if("throw"===Th)throw H0;return fa()}for(Bl.method=Th,Bl.arg=H0;;){if((Th=Bl.delegate)&&(Th=G(Th,Bl))){if(Th===_u)continue;return Th}if("next"===Bl.method)Bl.sent=Bl._sent=Bl.arg;else if("throw"===Bl.method){if(Jp===xl)throw Jp=Ha,Bl.arg;Bl.dispatchException(Bl.arg)}else"return"===Bl.method&&Bl.abrupt("return",Bl.arg);if(Jp=E0,"normal"===(Th=p(kl,Fd,Bl)).type){if(Jp=Bl.done?Ha:kd,Th.arg===_u)continue;return{value:Th.arg,done:Bl.done}}"throw"===Th.type&&(Jp=Ha,Bl.method="throw",Bl.arg=Th.arg)}}),wc;var kl,Fd,Bl,Jp}function p(ic,wc,tl){try{return{type:"normal",arg:ic.call(wc,tl)}}catch(Sl){return{type:"throw",arg:Sl}}}function _(){}function R(){}function M(){}function P(ic){["next","throw","return"].forEach(function(wc){o(ic,wc,function(tl){return this._invoke(wc,tl)})})}function F(ic,wc){function tl(kl,Fd,Bl,Jp){if("throw"!==(kl=p(ic[kl],ic,Fd)).type){var Th=kl.arg;return(kl=Th.value)&&"object"===Ia(kl)&&Da.call(kl,"__await")?wc.resolve(kl.__await).then(function(H0){tl("next",H0,Bl,Jp)},function(H0){tl("throw",H0,Bl,Jp)}):wc.resolve(kl).then(function(H0){Th.value=H0,Bl(Th)},function(H0){return tl("throw",H0,Bl,Jp)})}Jp(kl.arg)}var Sl;this._invoke=function(kl,Fd){function Bl(){return new wc(function(Jp,Th){tl(kl,Fd,Jp,Th)})}return Sl=Sl?Sl.then(Bl,Bl):Bl()}}function G(ic,wc){var tl=ic.iterator[wc.method];if(tl===da){if(wc.delegate=null,"throw"===wc.method){if(ic.iterator.return&&(wc.method="return",wc.arg=da,G(ic,wc),"throw"===wc.method))return _u;wc.method="throw",wc.arg=new TypeError("The iterator does not provide a 'throw' method")}return _u}return"throw"===(tl=p(tl,ic.iterator,wc.arg)).type?(wc.method="throw",wc.arg=tl.arg,wc.delegate=null,_u):(tl=tl.arg)?tl.done?(wc[ic.resultName]=tl.value,wc.next=ic.nextLoc,"return"!==wc.method&&(wc.method="next",wc.arg=da),wc.delegate=null,_u):tl:(wc.method="throw",wc.arg=new TypeError("iterator result is not an object"),wc.delegate=null,_u)}function z(ic){var wc={tryLoc:ic[0]};1 in ic&&(wc.catchLoc=ic[1]),2 in ic&&(wc.finallyLoc=ic[2],wc.afterLoc=ic[3]),this.tryEntries.push(wc)}function we(ic){var wc=ic.completion||{};wc.type="normal",delete wc.arg,ic.completion=wc}function xe(ic){this.tryEntries=[{tryLoc:"root"}],ic.forEach(z,this),this.reset(!0)}function _n(ic){if(ic){var wc=ic[rl];if(wc)return wc.call(ic);if("function"==typeof ic.next)return ic;if(!isNaN(ic.length)){var tl=-1;return(wc=function Sl(){for(;++tl<ic.length;)if(Da.call(ic,tl))return Sl.value=ic[tl],Sl.done=!1,Sl;return Sl.value=da,Sl.done=!0,Sl}).next=wc}}return{next:fa}}function fa(){return{value:da,done:!0}}var da,Ta=Object.prototype,Da=Ta.hasOwnProperty,Ja="function"==typeof Symbol?Symbol:{},rl=Ja.iterator||"@@iterator",Nl=Ja.asyncIterator||"@@asyncIterator",Vl=Ja.toStringTag||"@@toStringTag";try{o({},"")}catch(ic){o=function(wc,tl,Sl){return wc[tl]=Sl}}t.wrap=l;var xl="suspendedStart",kd="suspendedYield",E0="executing",Ha="completed",_u={};o(Ja={},rl,function(){return this});var ul=Object.getPrototypeOf;(ul=ul&&ul(ul(_n([]))))&&ul!==Ta&&Da.call(ul,rl)&&(Ja=ul);var Rl=M.prototype=_.prototype=Object.create(Ja);return R.prototype=M,o(Rl,"constructor",M),o(M,"constructor",R),R.displayName=o(M,Vl,"GeneratorFunction"),t.isGeneratorFunction=function(ic){return!!(ic="function"==typeof ic&&ic.constructor)&&(ic===R||"GeneratorFunction"===(ic.displayName||ic.name))},t.mark=function(ic){return Object.setPrototypeOf?Object.setPrototypeOf(ic,M):(ic.__proto__=M,o(ic,Vl,"GeneratorFunction")),ic.prototype=Object.create(Rl),ic},t.awrap=function(ic){return{__await:ic}},P(F.prototype),o(F.prototype,Nl,function(){return this}),t.AsyncIterator=F,t.async=function(ic,wc,tl,Sl,kl){void 0===kl&&(kl=Promise);var Fd=new F(l(ic,wc,tl,Sl),kl);return t.isGeneratorFunction(wc)?Fd:Fd.next().then(function(Bl){return Bl.done?Bl.value:Fd.next()})},P(Rl),o(Rl,Vl,"Generator"),o(Rl,rl,function(){return this}),o(Rl,"toString",function(){return"[object Generator]"}),t.keys=function(ic){var wc,tl=[];for(wc in ic)tl.push(wc);return tl.reverse(),function Sl(){for(;tl.length;){var kl=tl.pop();if(kl in ic)return Sl.value=kl,Sl.done=!1,Sl}return Sl.done=!0,Sl}},t.values=_n,xe.prototype={constructor:xe,reset:function(ic){if(this.next=this.prev=0,this.sent=this._sent=da,this.done=!1,this.delegate=null,this.method="next",this.arg=da,this.tryEntries.forEach(we),!ic)for(var wc in this)"t"===wc.charAt(0)&&Da.call(this,wc)&&!isNaN(+wc.slice(1))&&(this[wc]=da)},stop:function(){this.done=!0;var ic=this.tryEntries[0].completion;if("throw"===ic.type)throw ic.arg;return this.rval},dispatchException:function(ic){function wc(Th,H0){return Fd.type="throw",Fd.arg=ic,tl.next=Th,H0&&(tl.method="next",tl.arg=da),!!H0}if(this.done)throw ic;for(var tl=this,Sl=this.tryEntries.length-1;0<=Sl;--Sl){var kl=this.tryEntries[Sl],Fd=kl.completion;if("root"===kl.tryLoc)return wc("end");if(kl.tryLoc<=this.prev){var Bl=Da.call(kl,"catchLoc"),Jp=Da.call(kl,"finallyLoc");if(Bl&&Jp){if(this.prev<kl.catchLoc)return wc(kl.catchLoc,!0);if(this.prev<kl.finallyLoc)return wc(kl.finallyLoc)}else if(Bl){if(this.prev<kl.catchLoc)return wc(kl.catchLoc,!0)}else{if(!Jp)throw Error("try statement without catch or finally");if(this.prev<kl.finallyLoc)return wc(kl.finallyLoc)}}}},abrupt:function(ic,wc){for(var tl=this.tryEntries.length-1;0<=tl;--tl){var Sl=this.tryEntries[tl];if(Sl.tryLoc<=this.prev&&Da.call(Sl,"finallyLoc")&&this.prev<Sl.finallyLoc){var kl=Sl;break}}return kl&&("break"===ic||"continue"===ic)&&kl.tryLoc<=wc&&wc<=kl.finallyLoc&&(kl=null),(tl=kl?kl.completion:{}).type=ic,tl.arg=wc,kl?(this.method="next",this.next=kl.finallyLoc,_u):this.complete(tl)},complete:function(ic,wc){if("throw"===ic.type)throw ic.arg;return"break"===ic.type||"continue"===ic.type?this.next=ic.arg:"return"===ic.type?(this.rval=this.arg=ic.arg,this.method="return",this.next="end"):"normal"===ic.type&&wc&&(this.next=wc),_u},finish:function(ic){for(var wc=this.tryEntries.length-1;0<=wc;--wc){var tl=this.tryEntries[wc];if(tl.finallyLoc===ic)return this.complete(tl.completion,tl.afterLoc),we(tl),_u}},catch:function(ic){for(var wc=this.tryEntries.length-1;0<=wc;--wc){var tl=this.tryEntries[wc];if(tl.tryLoc===ic){if("throw"===(ic=tl.completion).type){var Sl=ic.arg;we(tl)}return Sl}}throw Error("illegal catch attempt")},delegateYield:function(ic,wc,tl){return this.delegate={iterator:_n(ic),resultName:wc,nextLoc:tl},"next"===this.method&&(this.arg=da),_u}},t}(r.exports);try{regeneratorRuntime=r}catch(t){"object"===("undefined"==typeof globalThis?"undefined":Ia(globalThis))?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}),ev=!Ga(function(){return Object.isExtensible(Object.preventExtensions({}))}),po=kc(function(r){var t=$b.f,o=ih("meta"),l=0,p=Object.isExtensible||function(){return!0},_=function(M){t(M,o,{value:{objectID:"O"+ ++l,weakData:{}}})},R=r.exports={REQUIRED:!1,fastKey:function(M,P){if(!fb(M))return"symbol"==typeof M?M:("string"==typeof M?"S":"P")+M;if(!Fa(M,o)){if(!p(M))return"F";if(!P)return"E";_(M)}return M[o].objectID},getWeakData:function(M,P){if(!Fa(M,o)){if(!p(M))return!0;if(!P)return!1;_(M)}return M[o].weakData},onFreeze:function(M){return ev&&R.REQUIRED&&p(M)&&!Fa(M,o)&&_(M),M}};jh[o]=!0}),fv=function(r,t,o){var l=-1!==r.indexOf("Map"),p=-1!==r.indexOf("Weak"),_=l?"set":"add",R=na[r],M=R&&R.prototype,P=R,F={},G=function(da){var Ta=M[da];Ob(M,da,"add"==da?function(Da){return Ta.call(this,0===Da?0:Da),this}:"delete"==da?function(Da){return!(p&&!fb(Da))&&Ta.call(this,0===Da?0:Da)}:"get"==da?function(Da){return p&&!fb(Da)?void 0:Ta.call(this,0===Da?0:Da)}:"has"==da?function(Da){return!(p&&!fb(Da))&&Ta.call(this,0===Da?0:Da)}:function(Da,Ja){return Ta.call(this,0===Da?0:Da,Ja),this})};if(ne(r,"function"!=typeof R||!(p||M.forEach&&!Ga(function(){(new R).entries().next()}))))P=o.getConstructor(t,r,l,_),po.REQUIRED=!0;else if(ne(r,!0)){var z=new P,we=z[_](p?{}:-0,1)!=z,xe=Ga(function(){z.has(1)}),_n=mk(function(da){new R(da)}),fa=!p&&Ga(function(){for(var da=new R,Ta=5;Ta--;)da[_](Ta,Ta);return!da.has(-0)});_n||((P=t(function(da,Ta){return Ud(da,P,r),da=Ek(new R,da,P),null!=Ta&&rk(Ta,da[_],{that:da,AS_ENTRIES:l}),da})).prototype=M,M.constructor=P),(xe||fa)&&(G("delete"),G("has"),l&&G("get")),(fa||we)&&G(_),p&&M.clear&&delete M.clear}return F[r]=P,wa({global:!0,forced:P!=R},F),Td(P,r),p||o.setStrong(P,r,l),P},zF=$b.f,gv=po.fastKey,hv=Sb.set,qo=Sb.getterFor,iv={getConstructor:function(r,t,o,l){var p=r(function(P,F){Ud(P,p,t),hv(P,{type:t,index:vd(null),first:void 0,last:void 0,size:0}),cb||(P.size=0),null!=F&&rk(F,P[l],{that:P,AS_ENTRIES:o})}),_=qo(t),R=function(P,F,G){var z,we=_(P),xe=M(P,F);return xe?xe.value=G:(we.last=xe={index:z=gv(F,!0),key:F,value:G,previous:F=we.last,next:void 0,removed:!1},we.first||(we.first=xe),F&&(F.next=xe),cb?we.size++:P.size++,"F"!==z&&(we.index[z]=xe)),P},M=function(P,F){P=_(P);var G=gv(F);if("F"!==G)return P.index[G];for(P=P.first;P;P=P.next)if(P.key==F)return P};return qh(p.prototype,{clear:function(){for(var P=_(this),F=P.index,G=P.first;G;)G.removed=!0,G.previous&&(G.previous=G.previous.next=void 0),delete F[G.index],G=G.next;P.first=P.last=void 0,cb?P.size=0:this.size=0},delete:function(P){var F=_(this);if(P=M(this,P)){var G=P.next,z=P.previous;delete F.index[P.index],P.removed=!0,z&&(z.next=G),G&&(G.previous=z),F.first==P&&(F.first=G),F.last==P&&(F.last=z),cb?F.size--:this.size--}return!!P},forEach:function(P){for(var F,G=_(this),z=tf(P,1<arguments.length?arguments[1]:void 0,3);F=F?F.next:G.first;)for(z(F.value,F.key,this);F&&F.removed;)F=F.previous},has:function(P){return!!M(this,P)}}),qh(p.prototype,o?{get:function(P){return(P=M(this,P))&&P.value},set:function(P,F){return R(this,0===P?0:P,F)}}:{add:function(P){return R(this,P=0===P?0:P,P)}}),cb&&zF(p.prototype,"size",{get:function(){return _(this).size}}),p},setStrong:function(r,t,o){var l=t+" Iterator",p=qo(t),_=qo(l);rn(r,t,function(R,M){hv(this,{type:l,target:R,state:p(R),kind:M,last:void 0})},function(){for(var R=_(this),M=R.kind,P=R.last;P&&P.removed;)P=P.previous;return R.target&&(R.last=P=P?P.next:R.state.first)?"keys"==M?{value:P.key,done:!1}:"values"==M?{value:P.value,done:!1}:{value:[P.key,P.value],done:!1}:(R.target=void 0,{value:void 0,done:!0})},o?"entries":"values",!o,!0),Ii(t)}};fv("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},iv);var AF=yi,jv=function(r){return function(t){t=Qc(t);for(var o,l=Ie(t),p=l.length,_=0,R=[];p>_;)o=l[_++],cb&&!AF.call(t,o)||R.push(r?[o,t[o]]:t[o]);return R}},BF=jv(!0),CF=jv(!1);wa({target:"Object",stat:!0},{values:function(r){return CF(r)}});var ro=me("Reflect","apply"),DF=Function.apply,EF=!Ga(function(){ro(function(){})});wa({target:"Reflect",stat:!0,forced:EF},{apply:function(r,t,o){return Rc(r),ub(o),ro?ro(r,t,o):DF.call(r,t,o)}}),wa({target:"Reflect",stat:!0},{ownKeys:Us});var kv=mb("isConcatSpreadable"),FF=51<=oe||!Ga(function(){var r=[];return r[kv]=!1,r.concat()[0]!==r}),GF=Fi("concat");wa({target:"Array",proto:!0,forced:!FF||!GF},{concat:function(r){var t,o=Zb(this),l=Ei(o,0),p=0,_=-1;for(t=arguments.length;_<t;_++){var R=-1===_?o:arguments[_],M=R;if(fb(M)){var P=M[kv];M=void 0!==P?!!P:uf(M)}else M=!1;if(M){if(9007199254740991<p+(P=xb(R.length)))throw TypeError("Maximum allowed index exceeded");for(M=0;M<P;M++,p++)M in R&&oh(l,p,R[M])}else{if(9007199254740991<=p)throw TypeError("Maximum allowed index exceeded");oh(l,p++,R)}}return l.length=p,l}});var HF=Yn,IF=Ga(function(){return!Object.getOwnPropertyNames(1)});wa({target:"Object",stat:!0,forced:IF},{getOwnPropertyNames:HF});var JF=dg.f,KF=pd.f,LF=$b.f,Bf=na.Number,Lk=Bf.prototype,MF="Number"==Qd(vd(Lk)),lv=function(r){var t,o=le(r,!1);if("string"==typeof o&&2<o.length)if(43===(r=(o=kk(o)).charCodeAt(0))||45===r){if(88===(r=o.charCodeAt(2))||120===r)return NaN}else if(48===r){switch(o.charCodeAt(1)){case 66:case 98:r=2;var l=49;break;case 79:case 111:r=8,l=55;break;default:return+o}var p=(o=o.slice(2)).length;for(t=0;t<p;t++){var _=o.charCodeAt(t);if(48>_||_>l)return NaN}return parseInt(o,r)}return+o};if(ne("Number",!Bf(" 0o1")||!Bf("0b1")||Bf("+0x1"))){for(var mg=function(r){var t=1>arguments.length?0:r,o=this;return o instanceof mg&&(MF?Ga(function(){Lk.valueOf.call(o)}):"Number"!=Qd(o))?Ek(new Bf(lv(t)),o,mg):lv(t)},mv=cb?JF(Bf):"MAX_VALUE MIN_VALUE NaN NEGATIVE_INFINITY POSITIVE_INFINITY EPSILON isFinite isInteger isNaN isSafeInteger MAX_SAFE_INTEGER MIN_SAFE_INTEGER parseFloat parseInt isInteger fromString range".split(" "),so=0,Mk;mv.length>so;so++)Fa(Bf,Mk=mv[so])&&!Fa(mg,Mk)&&LF(mg,Mk,KF(Bf,Mk));mg.prototype=Lk,Lk.constructor=mg,Ob(na,"Number",mg)}var yh="object"===("undefined"==typeof Reflect?"undefined":Ia(Reflect))?Reflect:null,nv=yh&&"function"==typeof yh.apply?yh.apply:function(r,t,o){return Function.prototype.apply.call(r,t,o)},NF=yh&&"function"==typeof yh.ownKeys?yh.ownKeys:Object.getOwnPropertySymbols?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:function(r){return Object.getOwnPropertyNames(r)},ov=Number.isNaN||function(r){return r!=r};kb.EventEmitter=kb,kb.prototype._events=void 0,kb.prototype._eventsCount=0,kb.prototype._maxListeners=void 0;var pv=10;Object.defineProperty(kb,"defaultMaxListeners",{enumerable:!0,get:function(){return pv},set:function(r){if("number"!=typeof r||0>r||ov(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");pv=r}}),kb.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},kb.prototype.setMaxListeners=function(r){if("number"!=typeof r||0>r||ov(r))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this},kb.prototype.getMaxListeners=function(){return void 0===this._maxListeners?kb.defaultMaxListeners:this._maxListeners},kb.prototype.emit=function(r){for(var t=[],o=1;o<arguments.length;o++)t.push(arguments[o]);o="error"===r;var p,l=this._events;if(void 0!==l)o=o&&void 0===l.error;else if(!o)return!1;if(o)throw 0<t.length&&(p=t[0]),p instanceof Error?p:((t=Error("Unhandled error."+(p?" ("+p.message+")":""))).context=p,t);if(void 0===(o=l[r]))return!1;if("function"==typeof o)nv(o,this,t);else for(l=ir(o,p=o.length),o=0;o<p;++o)nv(l[o],this,t);return!0},kb.prototype.addListener=function(r,t){return fr(this,r,t,!1)},kb.prototype.on=kb.prototype.addListener,kb.prototype.prependListener=function(r,t){return fr(this,r,t,!0)},kb.prototype.once=function(r,t){return Cj(t),this.on(r,gr(this,r,t)),this},kb.prototype.prependOnceListener=function(r,t){return Cj(t),this.prependListener(r,gr(this,r,t)),this},kb.prototype.removeListener=function(r,t){var o;Cj(t);var l=this._events;if(void 0===l)return this;var p=l[r];if(void 0===p)return this;if(p===t||p.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete l[r],l.removeListener&&this.emit("removeListener",r,p.listener||t));else if("function"!=typeof p){var _=-1;for(o=p.length-1;0<=o;o--)if(p[o]===t||p[o].listener===t){var R=p[o].listener;_=o;break}if(0>_)return this;if(0===_)p.shift();else{for(;_+1<p.length;_++)p[_]=p[_+1];p.pop()}1===p.length&&(l[r]=p[0]),void 0!==l.removeListener&&this.emit("removeListener",r,R||t)}return this},kb.prototype.off=kb.prototype.removeListener,kb.prototype.removeAllListeners=function(r){var t=this._events;if(void 0===t)return this;if(void 0===t.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==t[r]&&(0==--this._eventsCount?this._events=Object.create(null):delete t[r]),this;if(0===arguments.length){var o=Object.keys(t);for(t=0;t<o.length;++t){var l=o[t];"removeListener"!==l&&this.removeAllListeners(l)}return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(o=t[r]))this.removeListener(r,o);else if(void 0!==o)for(t=o.length-1;0<=t;t--)this.removeListener(r,o[t]);return this},kb.prototype.listeners=function(r){return hr(this,r,!0)},kb.prototype.rawListeners=function(r){return hr(this,r,!1)},kb.listenerCount=function(r,t){return"function"==typeof r.listenerCount?r.listenerCount(t):jr.call(r,t)},kb.prototype.listenerCount=jr,kb.prototype.eventNames=function(){return 0<this._eventsCount?NF(this._events):[]},kb.once=function(r,t){return new Promise(function(o,l){function p(R){r.removeListener(t,_),l(R)}function _(){"function"==typeof r.removeListener&&r.removeListener("error",p),o([].slice.call(arguments))}kr(r,t,_,{once:!0}),"error"!==t&&QA(r,p,{once:!0})})};var zh=Object.assign,qv=Object.defineProperty,Vi=!zh||Ga(function(){if(cb&&1!==zh({b:1},zh(qv({},"a",{enumerable:!0,get:function(){qv(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var r={},t={},o=Symbol();return r[o]=7,"abcdefghijklmnopqrst".split("").forEach(function(l){t[l]=l}),7!=zh({},r)[o]||"abcdefghijklmnopqrst"!=Ie(zh({},t)).join("")})?function(r,t){for(var o=Zb(r),l=arguments.length,p=1,_=Ai.f,R=yi;l>p;)for(var M,P=zi(arguments[p++]),F=_?Ie(P).concat(_(P)):Ie(P),G=F.length,z=0;G>z;)M=F[z++],(!cb||R.call(P,M))&&(o[M]=P[M]);return o}:zh;wa({target:"Object",stat:!0,forced:Object.assign!==Vi},{assign:Vi}),fv("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},iv);var OF=Math.log,PF=Math.LN2;wa({target:"Math",stat:!0},{log2:function(r){return OF(r)/PF}});var QF=$b.f,RF=dg.f,SF=Sb.enforce,TF=mb("match"),te=na.RegExp,to=te.prototype,Wi=/a/g,uo=/a/g,vo=new te(Wi)!==Wi;if(cb&&ne("RegExp",!vo||Sd||Ga(function(){return uo[TF]=!1,te(Wi)!=Wi||te(uo)==uo||"/a/i"!=te(Wi,"i")}))){for(var Oe=function(r,t){var o,l=this instanceof Oe,p=gn(r),_=void 0===t;return!l&&p&&r.constructor===Oe&&_||(vo?p&&!_&&(r=r.source):r instanceof Oe&&(_&&(t=hk.call(r)),r=r.source),Sd&&(o=!!t&&-1<t.indexOf("y"))&&(t=t.replace(/y/g,"")),r=Ek(vo?new te(r,t):te(r,t),l?this:to,Oe),Sd&&o&&(SF(r).sticky=!0)),r},UF=function(r){r in Oe||QF(Oe,r,{configurable:!0,get:function(){return te[r]},set:function(t){te[r]=t}})},rv=RF(te),sv=0;rv.length>sv;)UF(rv[sv++]);to.constructor=Oe,Oe.prototype=to,Ob(na,"RegExp",Oe)}Ii("RegExp"),Ri("Float32",function(r){return function(t,o,l){return r(this,t,o,l)}}),Ri("Float64",function(r){return function(t,o,l){return r(this,t,o,l)}}),Ri("Uint32",function(r){return function(t,o,l){return r(this,t,o,l)}}),Ri("Uint16",function(r){return function(t,o,l){return r(this,t,o,l)}});var wo=function(r,t){return r===t?0:null==r?null==t?0:-1:null==t?null==r?0:1:"function"==typeof r.compare?r.compare(t):"function"==typeof t.compare?-t.compare(r):r<t?-1:r>t?1:0},xo=[],tv=xo.sort,VF=Ga(function(){xo.sort(void 0)}),WF=Ga(function(){xo.sort(null)}),XF=gg("sort");wa({target:"Array",proto:!0,forced:VF||!WF||!XF},{sort:function(r){return void 0===r?tv.call(Zb(this)):tv.call(Zb(this),Rc(r))}});var uv=Object.getPrototypeOf({}),Xi=function(r,t){var o;return r===t||(null==r?r==t:"function"===Ia(r.equiv)?r.equiv(t):null==t?r==t:"function"===Ia(t.equiv)?t.equiv(r):"string"!==Ia(r)&&"string"!==Ia(t)&&(null!=(o=Object.getPrototypeOf(r))&&o!==uv||null!=(o=Object.getPrototypeOf(t))&&o!==uv?"function"!==Ia(r)&&void 0!==r.length&&"function"!==Ia(t)&&void 0!==t.length?ZF(r,t):r instanceof Set&&t instanceof Set?$F(r,t):r instanceof Map&&t instanceof Map?aG(r,t):r instanceof Date&&t instanceof Date?r.getTime()===t.getTime():r instanceof RegExp&&t instanceof RegExp?r.toString()===t.toString():r!=r&&t!=t:YF(r,t)))},ZF=function(r,t){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Xi,l=r.length;if(l===t.length)for(;0<=--l&&o(r[l],t[l]););return 0>l},$F=function(r,t){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Xi;return r.size===t.size&&o(ra(r.keys()).sort(),ra(t.keys()).sort())},aG=function(r,t){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Xi;return r.size===t.size&&o(ra(r).sort(),ra(t).sort())},YF=function(r,t){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Xi;if(Object.keys(r).length!==Object.keys(t).length)return!1;for(var l in r)if(!t.hasOwnProperty(l)||!o(r[l],t[l]))return!1;return!0},vv=function(r){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(o){return void 0!==o?": "+o:""};return function(o){function l(_){return ab(this,l),p.call(this,r(_)+t(_))}nb(l,o);var p=ob(l);return l}(di(Error))},bG=vv(function(){return"illegal argument(s)"}),Nk=function(r){throw new bG(r)},yo=vv(function(){return"index out of bounds"}),wv=1/4294967295,cG=function(){function r(){ab(this,r)}return Qb(r,[{key:"float",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return this.int()*wv*t}},{key:"norm",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return 2*(this.int()*wv-.5)*t}},{key:"minmax",value:function(t,o){return this.float()*(o-t)+t}}]),r}(),zo=Math.random,dG=new(function(r){function t(){return ab(this,t),o.apply(this,arguments)}nb(t,r);var o=ob(t);return Qb(t,[{key:"int",value:function(){return 4294967296*zo()>>>0}},{key:"float",value:function(){var l=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return zo()*l}},{key:"norm",value:function(){var l=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return 2*(zo()-.5)*l}}]),t}(cG)),hm=Symbol(),nr=function(){},eG=po.onFreeze,Ao=Object.freeze,fG=Ga(function(){Ao(1)});wa({target:"Object",stat:!0,forced:fG,sham:!ev},{freeze:function(r){return Ao&&fb(r)?Ao(eG(r)):r}});var gG=gg("reduce"),hG=!qe&&79<oe&&83>oe;wa({target:"Array",proto:!0,forced:!gG||hG},{reduce:function(r){return Bu(this,r,arguments.length,1<arguments.length?arguments[1]:void 0)}});var mr=function(r){return null!=r&&"function"==typeof r.xform?r.xform():r},Dj=function(){function r(t){ab(this,r),this.value=t}return Qb(r,[{key:"deref",value:function(){return this.value}}]),r}(),im=function(r){return r instanceof Dj?r.deref():r},SA=function(r,t){return[r,function(o){return o},t]},iG=W.mark(function(r,t){var o,l,p,_,M;return W.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:o=mr(r)(RA()),l=o[1],p=o[2],_=0;case 4:if(!(_<t.length)){P.next=15;break}if(!((M=p([],t[_]))instanceof Dj)){P.next=10;break}return P.delegateYield(im(l(M.deref())),"t0",9);case 9:return P.abrupt("return");case 10:if(!M.length){P.next=12;break}return P.delegateYield(M,"t1",12);case 12:_++,P.next=4;break;case 15:return P.delegateYield(im(l([])),"t2",16);case 16:case"end":return P.stop()}},iG)}),TA=W.mark(lr),UA=function(r,t){return[r[0],r[1],t]},xv=!0;"findIndex"in[]&&Array(1).findIndex(function(){xv=!1}),wa({target:"Array",proto:!0,forced:xv},{findIndex:function(r){return lt(this,r,1<arguments.length?arguments[1]:void 0)}}),wf("findIndex"),wa({target:"Array",proto:!0},{fill:In}),wf("fill");var jG=function(){function r(t){ab(this,r),this._length=0,t&&this.into(t)}return Qb(r,[{key:"length",get:function(){return this._length}},{key:"copy",value:function(){return new r(this)}},{key:"empty",value:function(){return new r}},{key:"clear",value:function(){this.release()}},{key:"release",value:function(){for(var t,o=this.head;o;)t=o.next,delete o.value,delete o.prev,delete o.next,o=t;return delete this.head,delete this.tail,this._length=0,!0}},{key:"compare",value:function(t){var o=this._length;if(o<t._length)return-1;if(o>t._length)return 1;if(0===o)return 0;o=this.head,t=t.head;for(var l=0;o&&0==l;)l=wo(o.value,t.value),o=o.next,t=t.next;return l}},{key:"equiv",value:function(t){if(!(t instanceof r||null!=t&&"function"!=typeof t&&void 0!==t.length)||this._length!==t.length)return!1;if(!this._length||this===t)return!0;for(var o=this.head,l=0;l<t.length;l++){if(!Xi(o.value,t[l]))return!1;o=o.next}return!0}},{key:Symbol.iterator,value:W.mark(function t(){var o;return W.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:o=this.head;case 1:if(!o){l.next=7;break}return l.next=4,o.value;case 4:o=o.next,l.next=1;break;case 7:case"end":return l.stop()}},t,this)})},{key:"seq",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length;if(!(t>=o||0>t)){t=this.nthCell(t);var l=this.nthCell(o-1);return o=function p(_){return{first:function(){return _.value},next:function(){return _!==l&&_.next?p(_.next):void 0}}},t?o(t):void 0}}},{key:"cycle",value:W.mark(function t(){return W.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.delegateYield(this,"t0",2);case 2:o.next=0;break;case 4:case"end":return o.stop()}},t,this)})},{key:"$reduce",value:function(t,o){for(var l=this.head;l&&!(o instanceof Dj);)o=t(o,l.value),l=l.next;return o}},{key:"drop",value:function(){var t=this.head;if(t)return(this.head=t.next)?delete this.head.prev:delete this.tail,this._length--,t.value}},{key:"cons",value:function(t){return t={value:t,next:this.head},this.head?this.head.prev=t:this.tail=t,this.head=t,this._length++,this}},{key:"insertBefore",value:function(t,o){return t||Nk("cell is undefined"),o={value:o,next:t,prev:t.prev},t.prev?t.prev.next=o:this.head=o,t.prev=o,this._length++,this}},{key:"insertAfter",value:function(t,o){return t||Nk("cell is undefined"),o={value:o,next:t.next,prev:t},t.next?t.next.prev=o:this.tail=o,t.next=o,this._length++,this}},{key:"insertBeforeNth",value:function(t,o){if(0>t&&(t+=this._length),0>=t)return this.cons(o);if(0>t||t>=this._length)throw new yo(t);return this.insertBefore(this.nthCellUnsafe(t),o)}},{key:"insertAfterNth",value:function(t,o){if(0>t&&(t+=this._length),t>=this._length-1)return this.push(o);if(0>t||t>=this._length)throw new yo(t);return this.insertAfter(this.nthCellUnsafe(t),o)}},{key:"insertSorted",value:function(t,o){o=o||wo;for(var l=this.head;l;){if(0>=o(t,l.value))return this.insertBefore(l,t);l=l.next}return this.push(t)}},{key:"find",value:function(t){for(var o=this.head;o;){if(o.value===t)return o;o=o.next}}},{key:"findWith",value:function(t){for(var o=this.head;o;){if(t(o.value))return o;o=o.next}}},{key:"concat",value:function(){for(var t=this.copy(),o=arguments.length,l=Array(o),p=0;p<o;p++)l[p]=arguments[p];for(o=0;o<l.length;o++)t.into(l[o]);return t}},{key:"into",value:function(t){for(var o=0;o<t.length;o++)this.push(t[o])}},{key:"slice",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length;o=0>o?o+this._length:o,(0>(t=0>t?t+this._length:t)||0>o)&&Nk("invalid indices: ${from} / ${to}");for(var l=new r,p=this.nthCell(t);p&&++t<=o;)l.push(p.value),p=p.next;return l}},{key:"splice",value:function(t){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,l=2<arguments.length?arguments[2]:void 0;if("number"==typeof t){if(0>t&&(t+=this._length),0>t||t>=this._length)throw new yo(t);var p=this.nthCellUnsafe(t)}else p=t;var _=new r;if(0<o)for(;p&&0<o--;)this.remove(p),_.push(p.value),p=p.next;else p&&(p=p.next);if(l)if(p)for(o=0;o<l.length;o++)this.insertBefore(p,l[o]);else for(p=0;p<l.length;p++)this.push(l[p]);return _}},{key:"remove",value:function(t){return t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev,this._length--,this}},{key:"swap",value:function(t,o){if(t!==o){var l=t.value;t.value=o.value,o.value=l}return this}},{key:"push",value:function(t){return this.tail?(this.tail=this.tail.next=t={value:t,prev:this.tail},this._length++,this):this.cons(t)}},{key:"pop",value:function(){var t=this.tail;if(t)return(this.tail=t.prev)?delete this.tail.next:delete this.head,this._length--,t.value}},{key:"first",value:function(){return this.head&&this.head.value}},{key:"peek",value:function(){return this.tail&&this.tail.value}},{key:"setHead",value:function(t){return this.head?(this.head.value=t,this):this.cons(t)}},{key:"setTail",value:function(t){return this.tail?(this.tail.value=t,this):this.push(t)}},{key:"setNth",value:function(t,o){var l=this.nthCell(t);return!l&&Nk("index out of bounds: ".concat(t)),l.value=o,this}},{key:"nth",value:function(t,o){return(t=this.nthCell(t))?t.value:o}},{key:"nthCell",value:function(t){if(0>t&&(t+=this._length),!(0>t||t>=this._length))return this.nthCellUnsafe(t)}},{key:"rotateLeft",value:function(){switch(this._length){case 0:case 1:return this;case 2:return this.swap(this.head,this.tail);default:return this.push(this.drop())}}},{key:"rotateRight",value:function(){switch(this._length){case 0:case 1:return this;case 2:return this.swap(this.head,this.tail);default:var t=this.peek();return this.pop(),this.cons(t)}}},{key:"map",value:function(t){for(var o=new r,l=this.head;l;)o.push(t(l.value)),l=l.next;return o}},{key:"filter",value:function(t){for(var o=new r,l=this.head;l;)t(l.value)&&o.push(l.value),l=l.next;return o}},{key:"reduce",value:function(t,o){for(var l=this.head;l;)o=t(o,l.value),l=l.next;return o}},{key:"shuffle",value:function(t){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:dG;if(2>this._length)return this;for(t=null!=t?t:Math.ceil(1.5*Math.log2(this._length));0<t;t--)for(var l=this.head;l;){var p=l.next;.5>o.float()?this.asHead(l):this.asTail(l),l=p}return this}},{key:"sort",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:wo;if(!this._length)return this;for(var o=1;;){var l=this.head;this.tail=this.head=void 0;for(var p=0;l;){p++;for(var _=l,R=0,M=0;M<o&&(R++,_=_.next);M++);for(M=o;0<R||0<M&&_;){if(0===R){var P=_;_=_.next,M--}else _&&0!==M?0>=t(l.value,_.value)?(P=l,l=l.next,R--):(P=_,_=_.next,M--):(P=l,l=l.next,R--);this.tail?this.tail.next=P:this.head=P,P.prev=this.tail,this.tail=P}l=_}if(this.tail.next=void 0,1>=p)return this;o*=2}}},{key:"reverse",value:function(){for(var t=this.head,o=this.tail,l=(this._length>>>1)+(1&this._length);t&&o&&0<l;){var p=t.value;t.value=o.value,o.value=p,t=t.next,o=o.prev,l--}return this}},{key:"asHead",value:function(t){return t===this.head||(this.remove(t),this.head.prev=t,t.next=this.head,t.prev=void 0,this.head=t,this._length++),this}},{key:"asTail",value:function(t){return t===this.tail||(this.remove(t),this.tail.next=t,t.prev=this.tail,t.next=void 0,this.tail=t,this._length++),this}},{key:"toString",value:function(){for(var t=[],o=this.head;o;)t.push(String(o.value)),o=o.next;return t.join(", ")}},{key:"toJSON",value:function(){return ra(this)}},{key:"nthCellUnsafe",value:function(t){if(t<=this._length>>1)var o=this.head,l="next";else o=this.tail,l="prev",t=this._length-t-1;for(;0<t--&&o;)o=o[l];return o}}]),r}(),ue=function(){function r(t,o){ab(this,r),o=Object.assign({maxlen:1/0,maxsize:1/0,map:function(){return new Map},ksize:function(){return 0},vsize:function(){return 0}},o),this.map=o.map(),this.items=new jG,this._size=0,this.opts=o,t&&this.into(t)}return Qb(r,[{key:"length",get:function(){return this.items.length}},{key:"size",get:function(){return this._size}},{key:Symbol.iterator,value:function(){return this.entries()}},{key:"entries",value:function(){return Ej(function(t){return[t.k,t]},this.items)}},{key:"keys",value:function(){return Ej(function(t){return t.k},this.items)}},{key:"values",value:function(){return Ej(function(t){return t.v},this.items)}},{key:"copy",value:function(){var t=this.empty();t.items=this.items.copy();for(var o=t.items.head;o;)t.map.set(o.value.k,o),o=o.next;return t}},{key:"empty",value:function(){return new r(null,this.opts)}},{key:"release",value:function(){this._size=0,this.map.clear();var t=this.opts.release;if(t){for(var o;o=this.items.drop();)t(o.k,o.v);return!0}return this.items.release()}},{key:"has",value:function(t){return this.map.has(t)}},{key:"get",value:function(t,o){return(t=this.map.get(t))?this.resetEntry(t):o}},{key:"set",value:function(t,o){var l=this.opts.ksize(t)+this.opts.vsize(o),p=this.map.get(t);return this._size+=Math.max(0,l-(p?p.value.s:0)),this.ensureSize()&&this.doSetEntry(p,t,o,l),o}},{key:"into",value:function(t){for(var o=0;o<t.length;o++){var l=t[o];this.set(l[0],l[1])}return this}},{key:"getSet",value:function(t,o){var l=this,p=this.map.get(t);return p?Promise.resolve(this.resetEntry(p)):o().then(function(_){return l.set(t,_)})}},{key:"delete",value:function(t){return!!(t=this.map.get(t))&&(this.removeEntry(t),!0)}},{key:"resetEntry",value:function(t){return this.items.asTail(t),t.value.v}},{key:"ensureSize",value:function(){for(var t=this.opts.release,o=this.opts.maxsize,l=this.opts.maxlen;this._size>o||this.length>=l;){var p=this.items.drop();if(!p)return!1;this.map.delete(p.k),t&&t(p.k,p.v),this._size-=p.s}return!0}},{key:"removeEntry",value:function(t){var o=t.value;this.map.delete(o.k),this.items.remove(t),this.opts.release&&this.opts.release(o.k,o.v),this._size-=o.s}},{key:"doSetEntry",value:function(t,o,l,p){t?(t.value.v=l,t.value.s=p,this.items.asTail(t)):(this.items.push({k:o,v:l,s:p}),this.map.set(o,this.items.tail))}}]),r}(),kG=function(r){function t(l,p){return ab(this,t),p=Object.assign({ttl:36e5},p),o.call(this,l,p)}nb(t,r);var o=ob(t);return Qb(t,[{key:"empty",value:function(){return new t(null,this.opts)}},{key:"has",value:function(l){return void 0!==this.get(l)}},{key:"get",value:function(l,p){if(l=this.map.get(l)){if(l.value.t>=Date.now())return this.resetEntry(l);this.removeEntry(l)}return p}},{key:"set",value:function(l,p){var _=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.opts.ttl,R=this.opts.ksize(l)+this.opts.vsize(p),M=this.map.get(l);return this._size+=Math.max(0,R-(M?M.value.s:0)),this.ensureSize()&&(_=Date.now()+_,M?(M.value.v=p,M.value.s=R,M.value.t=_,this.items.asTail(M)):(this.items.push({k:l,v:p,s:R,t:_}),this.map.set(l,this.items.tail))),p}},{key:"getSet",value:function(l,p){var _=this,R=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.opts.ttl,M=this.get(l);return M?Promise.resolve(M):p().then(function(P){return _.set(l,P,R)})}},{key:"prune",value:function(){for(var l=Date.now(),p=this.items.head;p;)p.value.t<l&&this.removeEntry(p),p=p.next}},{key:"ensureSize",value:function(){for(var l=this.opts.maxsize,p=this.opts.maxlen,_=Date.now(),R=this.items.head;R&&(this._size>l||this.length>=p);)R.value.t<_&&this.removeEntry(R),R=R.next;return fm(Tf(t.prototype),"ensureSize",this).call(this)}}]),t}(ue),yv="object"==Ia(qb)&&qb&&qb.Object===Object&&qb,lG="object"==("undefined"==typeof self?"undefined":Ia(self))&&self&&self.Object===Object&&self,hd=yv||lG||Function("return this")(),xd=hd.Symbol,zv=Object.prototype,mG=zv.hasOwnProperty,nG=zv.toString,Yi=xd?xd.toStringTag:void 0,oG=Object.prototype.toString,Av=xd?xd.toStringTag:void 0,ng=function(r){if(null==r)r=void 0===r?"[object Undefined]":"[object Null]";else if(Av&&Av in Object(r)){var t=mG.call(r,Yi),o=r[Yi];try{r[Yi]=void 0;var l=!0}catch(_){}var p=nG.call(r);l&&(t?r[Yi]=o:delete r[Yi]),r=p}else r=oG.call(r);return r},Kc=function(r){var t=Ia(r);return null!=r&&("object"==t||"function"==t)},Em=function(r){return!!Kc(r)&&("[object Function]"==(r=ng(r))||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r)},Bo=hd["__core-js_shared__"],Bv=function(){var r=/[^.]+$/.exec(Bo&&Bo.keys&&Bo.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),pG=Function.prototype.toString,og=function(r){if(null!=r){try{return pG.call(r)}catch(t){}return r+""}return""},qG=/^\[object .+?Constructor\]$/,rG=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pg=function(r,t){return!Kc(r=null==r?void 0:r[t])||Bv&&Bv in r||!(Em(r)?rG:qG).test(og(r))?void 0:r},Zi=pg(Object,"create"),sG=Object.prototype.hasOwnProperty,tG=Object.prototype.hasOwnProperty;Vf.prototype.clear=function(){this.__data__=Zi?Zi(null):{},this.size=0},Vf.prototype.delete=function(r){return r=this.has(r)&&delete this.__data__[r],this.size-=r?1:0,r},Vf.prototype.get=function(r){var t=this.__data__;return Zi?"__lodash_hash_undefined__"===(r=t[r])?void 0:r:sG.call(t,r)?t[r]:void 0},Vf.prototype.has=function(r){var t=this.__data__;return Zi?void 0!==t[r]:tG.call(t,r)},Vf.prototype.set=function(r,t){var o=this.__data__;return this.size+=this.has(r)?0:1,o[r]=Zi&&void 0===t?"__lodash_hash_undefined__":t,this};var $i=function(r,t){return r===t||r!=r&&t!=t},Ok=function(r,t){for(var o=r.length;o--;)if($i(r[o][0],t))return o;return-1},uG=Array.prototype.splice;Mg.prototype.clear=function(){this.__data__=[],this.size=0},Mg.prototype.delete=function(r){var t=this.__data__;return!(0>(r=Ok(t,r))||(r==t.length-1?t.pop():uG.call(t,r,1),--this.size,0))},Mg.prototype.get=function(r){var t=this.__data__;return 0>(r=Ok(t,r))?void 0:t[r][1]},Mg.prototype.has=function(r){return-1<Ok(this.__data__,r)},Mg.prototype.set=function(r,t){var o=this.__data__,l=Ok(o,r);return 0>l?(++this.size,o.push([r,t])):o[l][1]=t,this};var Gj=Mg,aj=pg(hd,"Map"),Pk=function(r,t){r=r.__data__;var o=Ia(t);return("string"==o||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==t:null===t)?r["string"==typeof t?"string":"hash"]:r.map};Ng.prototype.clear=function(){this.size=0,this.__data__={hash:new Vf,map:new(aj||Gj),string:new Vf}},Ng.prototype.delete=function(r){return r=Pk(this,r).delete(r),this.size-=r?1:0,r},Ng.prototype.get=function(r){return Pk(this,r).get(r)},Ng.prototype.has=function(r){return Pk(this,r).has(r)},Ng.prototype.set=function(r,t){var o=Pk(this,r),l=o.size;return o.set(r,t),this.size+=o.size==l?0:1,this};var Fj=Ng;ei.prototype.add=ei.prototype.push=function(r){return this.__data__.set(r,"__lodash_hash_undefined__"),this},ei.prototype.has=function(r){return this.__data__.has(r)};var Cv=function(r,t,o,l){var p=r.length;for(o+=l?1:-1;l?o--:++o<p;)if(t(r[o],o,r))return o;return-1},vG=function(r){return r!=r},wG=function(r,t){var o;if(o=!(null==r||!r.length)){if(t==t)e:{o=-1;for(var l=r.length;++o<l;)if(r[o]===t){r=o;break e}r=-1}else r=Cv(r,vG,0);o=-1<r}return o},xG=function(r,t,o){for(var l=-1,p=null==r?0:r.length;++l<p;)if(o(t,r[l]))return!0;return!1},yG=function(r,t){return r.has(t)},Ah=pg(hd,"Set"),zG=function(){},Co=function(r){var t=-1,o=Array(r.size);return r.forEach(function(l){o[++t]=l}),o},AG=1/0,BG=Ah&&1/Co(new Ah([,-0]))[1]==AG?function(r){return new Ah(r)}:zG,Do=function(r,t,o){var l=-1,p=wG,_=r.length,R=!0,M=[],P=M;if(o)R=!1,p=xG;else if(200<=_){if(p=t?null:BG(r))return Co(p);R=!1,p=yG,P=new ei}else P=t?[]:M;e:for(;++l<_;){var F=r[l],G=t?t(F):F;if(F=o||0!==F?F:0,R&&G==G){for(var z=P.length;z--;)if(P[z]===G)continue e;t&&P.push(G),M.push(F)}else p(P,G,o)||(P!==M&&P.push(G),M.push(F))}return M},Dv=function(r){for(var t=-1,o=null==r?0:r.length,l={};++t<o;){var p=r[t];l[p[0]]=p[1]}return l},Rg=function(r,t){for(var o=-1,l=null==r?0:r.length,p=Array(l);++o<l;)p[o]=t(r[o],o,r);return p};Og.prototype.clear=function(){this.__data__=new Gj,this.size=0},Og.prototype.delete=function(r){var t=this.__data__;return r=t.delete(r),this.size=t.size,r},Og.prototype.get=function(r){return this.__data__.get(r)},Og.prototype.has=function(r){return this.__data__.has(r)},Og.prototype.set=function(r,t){var o=this.__data__;if(o instanceof Gj){var l=o.__data__;if(!aj||199>l.length)return l.push([r,t]),this.size=++o.size,this;o=this.__data__=new Fj(l)}return o.set(r,t),this.size=o.size,this};var Qg=Og,cB=function(r,t){for(var o=-1,l=null==r?0:r.length;++o<l&&!1!==t(r[o],o,r););return r},Qk=function(){try{var r=pg(Object,"defineProperty");return r({},"",{}),r}catch(t){}}(),bj=function(r,t,o){"__proto__"==t&&Qk?Qk(r,t,{configurable:!0,enumerable:!0,value:o,writable:!0}):r[t]=o},CG=Object.prototype.hasOwnProperty,sr=function(r,t,o){var l=r[t];CG.call(r,t)&&$i(l,o)&&(void 0!==o||t in r)||bj(r,t,o)},bh=function(r,t,o,l){var p=!o;o||(o={});for(var _=-1,R=t.length;++_<R;){var M=t[_],P=l?l(o[M],r[M],M,o,r):void 0;void 0===P&&(P=r[M]),p?bj(o,M,P):sr(o,M,P)}return o},ee=function(r){return null!=r&&"object"==Ia(r)},Ev=function(r){return ee(r)&&"[object Arguments]"==ng(r)},Fv=Object.prototype,DG=Fv.hasOwnProperty,EG=Fv.propertyIsEnumerable,oi=Ev(function(){return arguments}())?Ev:function(r){return ee(r)&&DG.call(r,"callee")&&!EG.call(r,"callee")},lc=Array.isArray,FG=function(){return!1},gi=kc(function(r,t){var o=(t=t&&!t.nodeType&&t)&&r&&!r.nodeType&&r;r.exports=((t=o&&o.exports===t?hd.Buffer:void 0)?t.isBuffer:void 0)||FG}),GG=/^(?:0|[1-9]\d*)$/,Eo=function(r,t){var o=Ia(r);return!!(t=null==t?9007199254740991:t)&&("number"==o||"symbol"!=o&&GG.test(r))&&-1<r&&r%1==0&&r<t},Fo=function(r){return"number"==typeof r&&-1<r&&r%1==0&&9007199254740991>=r},Hb={};Hb["[object Float32Array]"]=Hb["[object Float64Array]"]=Hb["[object Int8Array]"]=Hb["[object Int16Array]"]=Hb["[object Int32Array]"]=Hb["[object Uint8Array]"]=Hb["[object Uint8ClampedArray]"]=Hb["[object Uint16Array]"]=Hb["[object Uint32Array]"]=!0,Hb["[object Arguments]"]=Hb["[object Array]"]=Hb["[object ArrayBuffer]"]=Hb["[object Boolean]"]=Hb["[object DataView]"]=Hb["[object Date]"]=Hb["[object Error]"]=Hb["[object Function]"]=Hb["[object Map]"]=Hb["[object Number]"]=Hb["[object Object]"]=Hb["[object RegExp]"]=Hb["[object Set]"]=Hb["[object String]"]=Hb["[object WeakMap]"]=!1;var HG=function(r){return ee(r)&&Fo(r.length)&&!!Hb[ng(r)]},Rk=function(r){return function(t){return r(t)}},Bh=kc(function(r,t){var o=t&&!t.nodeType&&t;o=(t=o&&r&&!r.nodeType&&r)&&t.exports===o&&yv.process;e:{try{var l=t&&t.require&&t.require("util").types;if(l){var p=l;break e}p=o&&o.binding&&o.binding("util");break e}catch(_){}p=void 0}r.exports=p}),Gv=Bh&&Bh.isTypedArray,om=Gv?Rk(Gv):HG,IG=Object.prototype.hasOwnProperty,Hv=function(r,t){var o=lc(r),l=!o&&oi(r),p=!o&&!l&&gi(r),_=!o&&!l&&!p&&om(r);if(o=o||l||p||_){l=r.length;for(var R=String,M=-1,P=Array(l);++M<l;)P[M]=R(M);l=P}else l=[];for(var F in R=l.length,r)!t&&!IG.call(r,F)||o&&("length"==F||p&&("offset"==F||"parent"==F)||_&&("buffer"==F||"byteLength"==F||"byteOffset"==F)||Eo(F,R))||l.push(F);return l},JG=Object.prototype,Go=function(r){var t=r&&r.constructor;return r===("function"==typeof t&&t.prototype||JG)},Iv=function(r,t){return function(o){return r(t(o))}},KG=Iv(Object.keys,Object),LG=Object.prototype.hasOwnProperty,$f=function(r){return null!=r&&Fo(r.length)&&!Em(r)},Wf=function(r){if($f(r))r=Hv(r);else if(Go(r)){var t,o=[];for(t in Object(r))LG.call(r,t)&&"constructor"!=t&&o.push(t);r=o}else r=KG(r);return r},ZA=function(r,t){return r&&bh(t,Wf(t),r)},MG=Object.prototype.hasOwnProperty,hi=function(r){if($f(r))r=Hv(r,!0);else if(Kc(r)){var t=Go(r),o=[];for(l in r)("constructor"!=l||!t&&MG.call(r,l))&&o.push(l);r=o}else{var l=[];if(null!=r)for(t in Object(r))l.push(t);r=l}return r},XA=function(r,t){return r&&bh(t,hi(t),r)},pr=kc(function(r,t){var o=(t=t&&!t.nodeType&&t)&&r&&!r.nodeType&&r,l=(t=o&&o.exports===t?hd.Buffer:void 0)?t.allocUnsafe:void 0;r.exports=function(p,_){return _?p.slice():(_=p.length,_=l?l(_):new p.constructor(_),p.copy(_),_)}}),jm=function(r,t){var o=-1,l=r.length;for(t||(t=Array(l));++o<l;)t[o]=r[o];return t},NG=function(r,t){for(var o=-1,l=null==r?0:r.length,p=0,_=[];++o<l;){var R=r[o];t(R,o,r)&&(_[p++]=R)}return _},Jv=function(){return[]},OG=Object.prototype.propertyIsEnumerable,Kv=Object.getOwnPropertySymbols,Ho=Kv?function(r){return null==r?[]:(r=Object(r),NG(Kv(r),function(t){return OG.call(r,t)}))}:Jv,YA=function(r,t){return bh(r,Ho(r),t)},nm=function(r,t){for(var o=-1,l=t.length,p=r.length;++o<l;)r[p+o]=t[o];return r},Io=Iv(Object.getPrototypeOf,Object),Lv=Object.getOwnPropertySymbols?function(r){for(var t=[];r;)nm(t,Ho(r)),r=Io(r);return t}:Jv,WA=function(r,t){return bh(r,Lv(r),t)},Mv=function(r,t,o){return t=t(r),lc(r)?t:nm(t,o(r))},km=function(r){return Mv(r,Wf,Ho)},rr=function(r){return Mv(r,hi,Lv)},Jo=pg(hd,"DataView"),Ko=pg(hd,"Promise"),Lo=pg(hd,"WeakMap"),PG=og(Jo),QG=og(aj),RG=og(Ko),SG=og(Ah),TG=og(Lo),qg=ng;(Jo&&"[object DataView]"!=qg(new Jo(new ArrayBuffer(1)))||aj&&"[object Map]"!=qg(new aj)||Ko&&"[object Promise]"!=qg(Ko.resolve())||Ah&&"[object Set]"!=qg(new Ah)||Lo&&"[object WeakMap]"!=qg(new Lo))&&(qg=function(r){var t=ng(r);if(r=(r="[object Object]"==t?r.constructor:void 0)?og(r):"")switch(r){case PG:return"[object DataView]";case QG:return"[object Map]";case RG:return"[object Promise]";case SG:return"[object Set]";case TG:return"[object WeakMap]"}return t});var fi=qg,UG=Object.prototype.hasOwnProperty,VA=function(r){var t=r.length,o=new r.constructor(t);return t&&"string"==typeof r[0]&&UG.call(r,"index")&&(o.index=r.index,o.input=r.input),o},Sk=hd.Uint8Array,Mo=function(r){var t=new r.constructor(r.byteLength);return new Sk(t).set(new Sk(r)),t},VG=/\w*$/,Nv=xd?xd.prototype:void 0,Ov=Nv?Nv.valueOf:void 0,cs=function(r,t){return t=t?Mo(r.buffer):r.buffer,new r.constructor(t,r.byteOffset,r.length)},$A=function(r,t,o){var l=r.constructor;switch(t){case"[object ArrayBuffer]":return Mo(r);case"[object Boolean]":case"[object Date]":return new l(+r);case"[object DataView]":return t=o?Mo(r.buffer):r.buffer,new r.constructor(t,r.byteOffset,r.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return cs(r,o);case"[object Map]":case"[object Set]":return new l;case"[object Number]":case"[object String]":return new l(r);case"[object RegExp]":return(t=new r.constructor(r.source,VG.exec(r))).lastIndex=r.lastIndex,t;case"[object Symbol]":return Ov?Object(Ov.call(r)):{}}},Pv=Object.create,WG=function(){function r(){}return function(t){return Kc(t)?Pv?Pv(t):(r.prototype=t,t=new r,r.prototype=void 0,t):{}}}(),qr=function(r){return"function"!=typeof r.constructor||Go(r)?{}:WG(Io(r))},XG=function(r){return ee(r)&&"[object Map]"==fi(r)},Qv=Bh&&Bh.isMap,bB=Qv?Rk(Qv):XG,YG=function(r){return ee(r)&&"[object Set]"==fi(r)},Rv=Bh&&Bh.isSet,aB=Rv?Rk(Rv):YG,zb={};zb["[object Arguments]"]=zb["[object Array]"]=zb["[object ArrayBuffer]"]=zb["[object DataView]"]=zb["[object Boolean]"]=zb["[object Date]"]=zb["[object Float32Array]"]=zb["[object Float64Array]"]=zb["[object Int8Array]"]=zb["[object Int16Array]"]=zb["[object Int32Array]"]=zb["[object Map]"]=zb["[object Number]"]=zb["[object Object]"]=zb["[object RegExp]"]=zb["[object Set]"]=zb["[object String]"]=zb["[object Symbol]"]=zb["[object Uint8Array]"]=zb["[object Uint8ClampedArray]"]=zb["[object Uint16Array]"]=zb["[object Uint32Array]"]=!0,zb["[object Error]"]=zb["[object Function]"]=zb["[object WeakMap]"]=!1;var Sg=function(r){return"symbol"==Ia(r)||ee(r)&&"[object Symbol]"==ng(r)},ZG=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$G=/^\w*$/,No=function(r,t){if(lc(r))return!1;var o=Ia(r);return!("number"!=o&&"symbol"!=o&&"boolean"!=o&&null!=r&&!Sg(r))||$G.test(r)||!ZG.test(r)||null!=t&&r in Object(t)};lm.Cache=Fj;var aH=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bH=/\\(\\)?/g,cH=function(r){var t=(r=lm(r,function(o){return 500===t.size&&t.clear(),o})).cache;return r}(function(r){var t=[];return 46===r.charCodeAt(0)&&t.push(""),r.replace(aH,function(o,l,p,_){t.push(p?_.replace(bH,"$1"):l||o)}),t}),dB=1/0,Sv=xd?xd.prototype:void 0,ur=Sv?Sv.toString:void 0,Tk=function(r,t){return lc(r)?r:No(r,t)?[r]:cH(null==r?"":tr(r))},dH=1/0,cj=function(r){if("string"==typeof r||Sg(r))return r;var t=r+"";return"0"==t&&1/r==-dH?"-0":t},Uk=function(r,t){for(var o=0,l=(t=Tk(t,r)).length;null!=r&&o<l;)r=r[cj(t[o++])];return o&&o==l?r:void 0},eH=function(r,t){if(!(2>(t=Tk(t,r)).length)){var o=t,l=0,p=-1,_=-1,R=o.length;for(0>l&&(l=-l>R?0:R+l),0>(p=p>R?R:p)&&(p+=R),R=l>p?0:p-l>>>0,l>>>=0,p=Array(R);++_<R;)p[_]=o[_+l];r=Uk(r,p)}return(o=null==r)||(o=delete r[cj((o=null==t?0:t.length)?t[o-1]:void 0)]),o},Tv=Function.prototype.toString,fH=Object.prototype.hasOwnProperty,gH=Tv.call(Object),ds=function(r){return!(!ee(r)||"[object Object]"!=ng(r))&&(null===(r=Io(r))||"function"==typeof(r=fH.call(r,"constructor")&&r.constructor)&&r instanceof r&&Tv.call(r)==gH)},hH=function(r){return ds(r)?void 0:r},Uv=xd?xd.isConcatSpreadable:void 0,eB=function(r){return lc(r)||oi(r)||!!(Uv&&r&&r[Uv])},iH=function(r){return null!=r&&r.length?mm(r,1):[]},jH=function(r,t,o){switch(o.length){case 0:return r.call(t);case 1:return r.call(t,o[0]);case 2:return r.call(t,o[0],o[1]);case 3:return r.call(t,o[0],o[1],o[2])}return r.apply(t,o)},Vv=Math.max,Wv=function(r,t,o){return t=Vv(void 0===t?r.length-1:t,0),function(){for(var l=arguments,p=-1,_=Vv(l.length-t,0),R=Array(_);++p<_;)R[p]=l[t+p];for(p=-1,_=Array(t+1);++p<t;)_[p]=l[p];return _[t]=o(R),jH(r,this,_)}},kH=function(r){return function(){return r}},Vk=function(r){return r},lH=Date.now,Xv=function(r){var t=0,o=0;return function(){var l=lH(),p=16-(l-o);if(o=l,0<p){if(800<=++t)return arguments[0]}else t=0;return r.apply(void 0,arguments)}}(Qk?function(r,t){return Qk(r,"toString",{configurable:!0,enumerable:!1,value:kH(t),writable:!0})}:Vk),Oo=function(r){return Xv(Wv(r,void 0,iH),r+"")}(function(r,t){var o={};if(null==r)return o;var l=!1;t=Rg(t,function(_){return _=Tk(_,r),l||(l=1<_.length),_}),bh(r,rr(r),o),l&&(o=Pg(o,7,hH));for(var p=t.length;p--;)eH(o,t[p]);return o}),mH=function(r,t,o,l){for(var p=-1,_=null==r?0:r.length;++p<_;){var R=r[p];t(l,R,o(R),r)}return l},bs=function(r,t,o){for(var l=-1,p=Object(r),_=(o=o(r)).length;_--;){var R=o[++l];if(!1===t(p[R],R,p))break}return r},Yv=function(r,t){return r&&bs(r,t,Wf)},Po=function(r,t){return function(o,l){if(null==o)return o;if(!$f(o))return r(o,l);for(var p=o.length,_=-1,R=Object(o);++_<p&&!1!==l(R[_],_,R););return o}}(Yv),nH=function(r,t,o,l){return Po(r,function(p,_,R){t(l,p,o(p),R)}),l},Zv=function(r,t){for(var o=-1,l=null==r?0:r.length;++o<l;)if(t(r[o],o,r))return!0;return!1},vr=function(r,t,o,l,p,_){var R=1&o,M=r.length,P=t.length;if(M!=P&&!(R&&P>M))return!1;P=_.get(r);var F=_.get(t);if(P&&F)return P==t&&F==r;P=-1,F=!0;var G=2&o?new ei:void 0;for(_.set(r,t),_.set(t,r);++P<M;){var z=r[P],we=t[P];if(l)var xe=R?l(we,z,P,t,r,_):l(z,we,P,r,t,_);if(void 0!==xe){if(xe)continue;F=!1;break}if(G){if(!Zv(t,function(_n,fa){if(!G.has(fa)&&(z===_n||p(z,_n,o,l,_)))return G.push(fa)})){F=!1;break}}else if(z!==we&&!p(z,we,o,l,_)){F=!1;break}}return _.delete(r),_.delete(t),F},oH=function(r){var t=-1,o=Array(r.size);return r.forEach(function(l,p){o[++t]=[p,l]}),o},$v=xd?xd.prototype:void 0,Qo=$v?$v.valueOf:void 0,fB=function(r,t,o,l,p,_,R){switch(o){case"[object DataView]":if(r.byteLength!=t.byteLength||r.byteOffset!=t.byteOffset)break;r=r.buffer,t=t.buffer;case"[object ArrayBuffer]":if(r.byteLength!=t.byteLength||!_(new Sk(r),new Sk(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return $i(+r,+t);case"[object Error]":return r.name==t.name&&r.message==t.message;case"[object RegExp]":case"[object String]":return r==t+"";case"[object Map]":var M=oH;case"[object Set]":if(M||(M=Co),r.size!=t.size&&!(1&l))break;return(o=R.get(r))?o==t:(l|=2,R.set(r,t),t=vr(M(r),M(t),l,p,_,R),R.delete(r),t);case"[object Symbol]":if(Qo)return Qo.call(r)==Qo.call(t)}return!1},gB=Object.prototype.hasOwnProperty,wr=Object.prototype.hasOwnProperty,pH=function(r,t,o,l){var p=o.length,_=p,R=!l;if(null==r)return!_;for(r=Object(r);p--;){var M=o[p];if(R&&M[2]?M[1]!==r[M[0]]:!(M[0]in r))return!1}for(;++p<_;){var P=(M=o[p])[0],F=r[P],G=M[1];if(R&&M[2]){if(void 0===F&&!(P in r))return!1}else{if(M=new Qg,l)var z=l(F,G,P,r,t,M);if(void 0===z?!Tg(G,F,3,l,M):!z)return!1}}return!0},qH=function(r){for(var t=Wf(r),o=t.length;o--;){var l=t[o],p=r[l];t[o]=[l,p,p==p&&!Kc(p)]}return t},aw=function(r,t){return function(o){return null!=o&&o[r]===t&&(void 0!==t||r in Object(o))}},rH=function(r){var t=qH(r);return 1==t.length&&t[0][2]?aw(t[0][0],t[0][1]):function(o){return o===r||pH(o,r,t)}},sH=function(r,t){return No(r)&&t==t&&!Kc(t)?aw(cj(r),t):function(o){var l=null==o?void 0:Uk(o,r);if(void 0===(l=void 0===l?void 0:l)&&l===t){if(l=null!=o){for(var p=-1,_=(l=Tk(l=r,o)).length,R=!1;++p<_;){var M=cj(l[p]);if(!(R=null!=o&&null!=o&&M in Object(o)))break;o=o[M]}l=R||++p!=_?R:!!(_=null==o?0:o.length)&&Fo(_)&&Eo(M,_)&&(lc(o)||oi(o))}M=l}else M=Tg(t,l,3);return M}},tH=function(r){return function(t){return null==t?void 0:t[r]}},uH=function(r){return function(t){return Uk(t,r)}},Ch=function(r){return"function"==typeof r?r:null==r?Vk:"object"==Ia(r)?lc(r)?sH(r[0],r[1]):rH(r):No(r)?tH(cj(r)):uH(r)},Ro=function(r,t){return function(o,l){return(lc(o)?mH:nH)(o,r,Ch(l),{})}}(function(r,t,o){bj(r,o,t)}),Pe=function(r,t){var o={};return t=Ch(t),Yv(r,function(l,p,_){bj(o,p,t(l,p,_))}),o};wa({target:"String",proto:!0,forced:Ga(function(){var r="".sub('"');return r!==r.toLowerCase()||3<r.split('"').length})},{sub:function(){return"<sub>"+String(Ec(this))+"</sub>"}});var D=Ab,yd=null;try{yd=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(r){}Object.defineProperty(Ab.prototype,"__isLong__",{value:!0}),Ab.isLong=Lc;var yr={},xr={};Ab.fromInt=Xf,Ab.fromNumber=qd,Ab.fromBits=Bb;var Hj=Math.pow;Ab.fromString=pm,Ab.fromValue=Nd;var Ug=4294967296,zr=Ug*Ug,Br=zr/2,bw=Xf(16777216),rd=Xf(0);Ab.ZERO=rd;var Yf=Xf(0,!0);Ab.UZERO=Yf;var Dh=Xf(1);Ab.ONE=Dh;var cw=Xf(1,!0);Ab.UONE=cw;var So=Xf(-1);Ab.NEG_ONE=So;var Cr=Bb(-1,2147483647,!1);Ab.MAX_VALUE=Cr;var Ar=Bb(-1,-1,!0);Ab.MAX_UNSIGNED_VALUE=Ar;var Mc=Bb(0,-2147483648,!1);Ab.MIN_VALUE=Mc;var sa=Ab.prototype;sa.toInt=function(){return this.unsigned?this.low>>>0:this.low},sa.toNumber=function(){return this.unsigned?(this.high>>>0)*Ug+(this.low>>>0):this.high*Ug+(this.low>>>0)},sa.toString=function(r){if(2>(r=r||10)||36<r)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(Mc)){var t=qd(r),o=this.div(t);return t=o.mul(t).sub(this),o.toString(r)+t.toInt().toString(r)}return"-"+this.neg().toString(r)}o=qd(Hj(r,6),this.unsigned),t=this;for(var l="";;){var p=t.div(o),_=(t.sub(p.mul(o)).toInt()>>>0).toString(r);if((t=p).isZero())return _+l;for(;6>_.length;)_="0"+_;l=""+_+l}},sa.getHighBits=function(){return this.high},sa.getHighBitsUnsigned=function(){return this.high>>>0},sa.getLowBits=function(){return this.low},sa.getLowBitsUnsigned=function(){return this.low>>>0},sa.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Mc)?64:this.neg().getNumBitsAbs();for(var r=0!=this.high?this.high:this.low,t=31;0<t&&0==(r&1<<t);t--);return 0!=this.high?t+33:t+1},sa.isZero=function(){return 0===this.high&&0===this.low},sa.eqz=sa.isZero,sa.isNegative=function(){return!this.unsigned&&0>this.high},sa.isPositive=function(){return this.unsigned||0<=this.high},sa.isOdd=function(){return 1==(1&this.low)},sa.isEven=function(){return 0==(1&this.low)},sa.equals=function(r){return Lc(r)||(r=Nd(r)),(this.unsigned===r.unsigned||this.high>>>31!=1||r.high>>>31!=1)&&this.high===r.high&&this.low===r.low},sa.eq=sa.equals,sa.notEquals=function(r){return!this.eq(r)},sa.neq=sa.notEquals,sa.ne=sa.notEquals,sa.lessThan=function(r){return 0>this.comp(r)},sa.lt=sa.lessThan,sa.lessThanOrEqual=function(r){return 0>=this.comp(r)},sa.lte=sa.lessThanOrEqual,sa.le=sa.lessThanOrEqual,sa.greaterThan=function(r){return 0<this.comp(r)},sa.gt=sa.greaterThan,sa.greaterThanOrEqual=function(r){return 0<=this.comp(r)},sa.gte=sa.greaterThanOrEqual,sa.ge=sa.greaterThanOrEqual,sa.compare=function(r){if(Lc(r)||(r=Nd(r)),this.eq(r))return 0;var t=this.isNegative(),o=r.isNegative();return t&&!o?-1:!t&&o?1:this.unsigned?r.high>>>0>this.high>>>0||r.high===this.high&&r.low>>>0>this.low>>>0?-1:1:this.sub(r).isNegative()?-1:1},sa.comp=sa.compare,sa.negate=function(){return!this.unsigned&&this.eq(Mc)?Mc:this.not().add(Dh)},sa.neg=sa.negate,sa.add=function(r){Lc(r)||(r=Nd(r));var t=this.high>>>16,l=this.low>>>16,p=r.high>>>16,_=65535&r.high,R=r.low>>>16;return l=(R=((r=(65535&this.low)+(65535&r.low))>>>16)+(l+R))>>>16,Bb((65535&R)<<16|65535&r,(t=((l+=(65535&this.high)+_)>>>16)+(t+p)&65535)<<16|65535&l,this.unsigned)},sa.subtract=function(r){return Lc(r)||(r=Nd(r)),this.add(r.neg())},sa.sub=sa.subtract,sa.multiply=function(r){if(this.isZero())return rd;if(Lc(r)||(r=Nd(r)),yd){var t=yd.mul(this.low,this.high,r.low,r.high);return Bb(t,yd.get_high(),this.unsigned)}if(r.isZero())return rd;if(this.eq(Mc))return r.isOdd()?Mc:rd;if(r.eq(Mc))return this.isOdd()?Mc:rd;if(this.isNegative())return r.isNegative()?this.neg().mul(r.neg()):this.neg().mul(r).neg();if(r.isNegative())return this.mul(r.neg()).neg();if(this.lt(bw)&&r.lt(bw))return qd(this.toNumber()*r.toNumber(),this.unsigned);var o=65535&this.high,l=this.low>>>16,p=65535&this.low,_=r.high>>>16,R=65535&r.high,M=r.low>>>16,P=p*(r=65535&r.low),F=(P>>>16)+l*r,G=F>>>16;G+=(F=(65535&F)+p*M)>>>16;var z=(G+=o*r)>>>16;return Bb((65535&F)<<16|65535&P,(z=(z+=(G=(65535&G)+l*M)>>>16)+((G=(65535&G)+p*R)>>>16)+((t=this.high>>>16)*r+o*M+l*R+p*_)&65535)<<16|65535&G,this.unsigned)},sa.mul=sa.multiply,sa.divide=function(r){if(Lc(r)||(r=Nd(r)),r.isZero())throw Error("division by zero");if(yd)return this.unsigned||-2147483648!==this.high||-1!==r.low||-1!==r.high?Bb(r=(this.unsigned?yd.div_u:yd.div_s)(this.low,this.high,r.low,r.high),yd.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?Yf:rd;if(this.unsigned){if(r.unsigned||(r=r.toUnsigned()),r.gt(this))return Yf;if(r.gt(this.shru(1)))return cw;var t=Yf}else{if(this.eq(Mc)){if(r.eq(Dh)||r.eq(So))return Mc;if(r.eq(Mc))return Dh;var o=this.shr(1).div(r).shl(1);if(o.eq(rd))return r.isNegative()?Dh:So;var l=this.sub(r.mul(o));return o.add(l.div(r))}if(r.eq(Mc))return this.unsigned?Yf:rd;if(this.isNegative())return r.isNegative()?this.neg().div(r.neg()):this.neg().div(r).neg();if(r.isNegative())return this.div(r.neg()).neg();t=rd}for(l=this;l.gte(r);){o=Math.max(1,Math.floor(l.toNumber()/r.toNumber()));var p=Math.ceil(Math.log(o)/Math.LN2);p=48>=p?1:Hj(2,p-48);for(var _=qd(o),R=_.mul(r);R.isNegative()||R.gt(l);)R=(_=qd(o-=p,this.unsigned)).mul(r);_.isZero()&&(_=Dh),t=t.add(_),l=l.sub(R)}return t},sa.div=sa.divide,sa.modulo=function(r){return Lc(r)||(r=Nd(r)),yd?Bb(r=(this.unsigned?yd.rem_u:yd.rem_s)(this.low,this.high,r.low,r.high),yd.get_high(),this.unsigned):this.sub(this.div(r).mul(r))},sa.mod=sa.modulo,sa.rem=sa.modulo,sa.not=function(){return Bb(~this.low,~this.high,this.unsigned)},sa.and=function(r){return Lc(r)||(r=Nd(r)),Bb(this.low&r.low,this.high&r.high,this.unsigned)},sa.or=function(r){return Lc(r)||(r=Nd(r)),Bb(this.low|r.low,this.high|r.high,this.unsigned)},sa.xor=function(r){return Lc(r)||(r=Nd(r)),Bb(this.low^r.low,this.high^r.high,this.unsigned)},sa.shiftLeft=function(r){return Lc(r)&&(r=r.toInt()),0==(r&=63)?this:32>r?Bb(this.low<<r,this.high<<r|this.low>>>32-r,this.unsigned):Bb(0,this.low<<r-32,this.unsigned)},sa.shl=sa.shiftLeft,sa.shiftRight=function(r){return Lc(r)&&(r=r.toInt()),0==(r&=63)?this:32>r?Bb(this.low>>>r|this.high<<32-r,this.high>>r,this.unsigned):Bb(this.high>>r-32,0<=this.high?0:-1,this.unsigned)},sa.shr=sa.shiftRight,sa.shiftRightUnsigned=function(r){if(Lc(r)&&(r=r.toInt()),0==(r&=63))return this;var t=this.high;return 32>r?Bb(this.low>>>r|t<<32-r,t>>>r,this.unsigned):Bb(32===r?t:t>>>r-32,0,this.unsigned)},sa.shru=sa.shiftRightUnsigned,sa.shr_u=sa.shiftRightUnsigned,sa.toSigned=function(){return this.unsigned?Bb(this.low,this.high,!1):this},sa.toUnsigned=function(){return this.unsigned?this:Bb(this.low,this.high,!0)},sa.toBytes=function(r){return r?this.toBytesLE():this.toBytesBE()},sa.toBytesLE=function(){var r=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&r,r>>>8&255,r>>>16&255,r>>>24]},sa.toBytesBE=function(){var r=this.high,t=this.low;return[r>>>24,r>>>16&255,r>>>8&255,255&r,t>>>24,t>>>16&255,t>>>8&255,255&t]},Ab.fromBytes=function(r,t,o){return o?Ab.fromBytesLE(r,t):Ab.fromBytesBE(r,t)},Ab.fromBytesLE=function(r,t){return new Ab(r[0]|r[1]<<8|r[2]<<16|r[3]<<24,r[4]|r[5]<<8|r[6]<<16|r[7]<<24,t)},Ab.fromBytesBE=function(r,t){return new Ab(r[4]<<24|r[5]<<16|r[6]<<8|r[7],r[0]<<24|r[1]<<16|r[2]<<8|r[3],t)};var qm=function(r,t){return(qm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var p in l)l.hasOwnProperty(p)&&(o[p]=l[p])})(r,t)},To=!1,sd={Promise:void 0,set useDeprecatedSynchronousErrorHandling(r){r?console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+Error().stack):To&&console.log("RxJS: Back to a better error behavior. Thank you. <3"),To=r},get useDeprecatedSynchronousErrorHandling(){return To}},Wk={closed:!0,next:function(r){},error:function(r){if(sd.useDeprecatedSynchronousErrorHandling)throw r;Wg(r)},complete:function(){}},td=Array.isArray||function(r){return r&&"number"==typeof r.length},ii=function(){function r(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(o,l){return l+1+") "+o.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return r.prototype=Object.create(Error.prototype),r}(),dc=function(){function r(t){this.closed=!1,this._subscriptions=this._parentOrParents=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return r.prototype.unsubscribe=function(){if(!this.closed){var t=this._parentOrParents,o=this._ctorUnsubscribe,l=this._unsubscribe,p=this._subscriptions;if(this.closed=!0,this._subscriptions=this._parentOrParents=null,t instanceof r)t.remove(this);else if(null!==t)for(var _=0;_<t.length;++_)t[_].remove(this);if(Vg(l)){o&&(this._unsubscribe=void 0);try{l.call(this)}catch(M){var R=M instanceof ii?Dr(M.errors):[M]}}if(td(p))for(_=-1,t=p.length;++_<t;)if(rm(o=p[_]))try{o.unsubscribe()}catch(M){R=R||[],M instanceof ii?R=R.concat(Dr(M.errors)):R.push(M)}if(R)throw new ii(R)}},r.prototype.add=function(t){var o=t;if(!t)return r.EMPTY;switch(Ia(t)){case"function":o=new r(t);case"object":if(o===this||o.closed||"function"!=typeof o.unsubscribe)return o;if(this.closed)return o.unsubscribe(),o;o instanceof r||(t=o,(o=new r)._subscriptions=[t]);break;default:throw Error("unrecognized teardown "+t+" added to Subscription.")}if(null===(t=o._parentOrParents))o._parentOrParents=this;else if(t instanceof r){if(t===this)return o;o._parentOrParents=[t,this]}else{if(-1!==t.indexOf(this))return o;t.push(this)}return null===(t=this._subscriptions)?this._subscriptions=[o]:t.push(o),o},r.prototype.remove=function(t){var o=this._subscriptions;o&&-1!==(t=o.indexOf(t))&&o.splice(t,1)},r.EMPTY=function(t){return t.closed=!0,t}(new r),r}(),Xk="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),hb=function(r){function t(o,l,p){var _=r.call(this)||this;switch(_.syncErrorValue=null,_.syncErrorThrown=!1,_.syncErrorThrowable=!1,_.isStopped=!1,arguments.length){case 0:_.destination=Wk;break;case 1:if(!o){_.destination=Wk;break}if("object"===Ia(o)){o instanceof t?(_.syncErrorThrowable=o.syncErrorThrowable,_.destination=o,o.add(_)):(_.syncErrorThrowable=!0,_.destination=new dw(_,o));break}default:_.syncErrorThrowable=!0,_.destination=new dw(_,o,l,p)}return _}return Ca(t,r),t.prototype[Xk]=function(){return this},t.create=function(o,l,p){return(o=new t(o,l,p)).syncErrorThrowable=!1,o},t.prototype.next=function(o){this.isStopped||this._next(o)},t.prototype.error=function(o){this.isStopped||(this.isStopped=!0,this._error(o))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this))},t.prototype._next=function(o){this.destination.next(o)},t.prototype._error=function(o){this.destination.error(o),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var o=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.isStopped=this.closed=!1,this._parentOrParents=o,this},t}(dc),dw=function(r){function t(o,l,p,_){var R=r.call(this)||this;if(R._parentSubscriber=o,o=R,Vg(l))var M=l;else l&&(M=l.next,p=l.error,_=l.complete,l!==Wk&&(Vg((o=Object.create(l)).unsubscribe)&&R.add(o.unsubscribe.bind(o)),o.unsubscribe=R.unsubscribe.bind(R)));return R._context=o,R._next=M,R._error=p,R._complete=_,R}return Ca(t,r),t.prototype.next=function(o){if(!this.isStopped&&this._next){var l=this._parentSubscriber;sd.useDeprecatedSynchronousErrorHandling&&l.syncErrorThrowable?this.__tryOrSetError(l,this._next,o)&&this.unsubscribe():this.__tryOrUnsub(this._next,o)}},t.prototype.error=function(o){if(!this.isStopped){var l=this._parentSubscriber,p=sd.useDeprecatedSynchronousErrorHandling;if(this._error)p&&l.syncErrorThrowable?this.__tryOrSetError(l,this._error,o):this.__tryOrUnsub(this._error,o),this.unsubscribe();else if(l.syncErrorThrowable)p?(l.syncErrorValue=o,l.syncErrorThrown=!0):Wg(o),this.unsubscribe();else{if(this.unsubscribe(),p)throw o;Wg(o)}}},t.prototype.complete=function(){var o=this;if(!this.isStopped){var l=this._parentSubscriber;if(this._complete){var p=function(){return o._complete.call(o._context)};sd.useDeprecatedSynchronousErrorHandling&&l.syncErrorThrowable?this.__tryOrSetError(l,p):this.__tryOrUnsub(p)}this.unsubscribe()}},t.prototype.__tryOrUnsub=function(o,l){try{o.call(this._context,l)}catch(p){if(this.unsubscribe(),sd.useDeprecatedSynchronousErrorHandling)throw p;Wg(p)}},t.prototype.__tryOrSetError=function(o,l,p){if(!sd.useDeprecatedSynchronousErrorHandling)throw Error("bad call");try{l.call(this._context,p)}catch(_){return sd.useDeprecatedSynchronousErrorHandling?(o.syncErrorValue=_,o.syncErrorThrown=!0):Wg(_),!0}return!1},t.prototype._unsubscribe=function(){var o=this._parentSubscriber;this._parentSubscriber=this._context=null,o.unsubscribe()},t}(hb),Xg="function"==typeof Symbol&&Symbol.observable||"@@observable",Za=function(){function r(t){this._isScalar=!1,t&&(this._subscribe=t)}return r.prototype.lift=function(t){var o=new r;return o.source=this,o.operator=t,o},r.prototype.subscribe=function(t,o,l){var p=this.operator;e:{if(t){if(t instanceof hb)break e;if(t[Xk]){t=t[Xk]();break e}}t=t||o||l?new hb(t,o,l):new hb(Wk)}if(t.add(p?p.call(t,this.source):this.source||sd.useDeprecatedSynchronousErrorHandling&&!t.syncErrorThrowable?this._subscribe(t):this._trySubscribe(t)),sd.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable&&(t.syncErrorThrowable=!1,t.syncErrorThrown))throw t.syncErrorValue;return t},r.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(o){sd.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=o),sm(t)?t.error(o):console.warn(o)}},r.prototype.forEach=function(t,o){var l=this;return new(o=Fr(o))(function(p,_){var R=l.subscribe(function(M){try{t(M)}catch(P){_(P),R&&R.unsubscribe()}},_,p)})},r.prototype._subscribe=function(t){var o=this.source;return o&&o.subscribe(t)},r.prototype[Xg]=function(){return this},r.prototype.pipe=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];return 0===t.length?this:Er(t)(this)},r.prototype.toPromise=function(t){var o=this;return new(t=Fr(t))(function(l,p){var _;o.subscribe(function(R){return _=R},function(R){return p(R)},function(){return l(_)})})},r.create=function(t){return new r(t)},r}(),Cf=function(){function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return r.prototype=Object.create(Error.prototype),r}(),ew=function(r){function t(o,l){var p=r.call(this)||this;return p.subject=o,p.subscriber=l,p.closed=!1,p}return Ca(t,r),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var o=this.subject,l=o.observers;this.subject=null,!l||0===l.length||o.isStopped||o.closed||-1!==(o=l.indexOf(this.subscriber))&&l.splice(o,1)}},t}(dc),fw=function(r){function t(o){var l=r.call(this,o)||this;return l.destination=o,l}return Ca(t,r),t}(hb),ec=function(r){function t(){var o=r.call(this)||this;return o.observers=[],o.closed=!1,o.isStopped=!1,o.hasError=!1,o.thrownError=null,o}return Ca(t,r),t.prototype[Xk]=function(){return new fw(this)},t.prototype.lift=function(o){var l=new gw(this,this);return l.operator=o,l},t.prototype.next=function(o){if(this.closed)throw new Cf;if(!this.isStopped){var l=this.observers,p=l.length;l=l.slice();for(var _=0;_<p;_++)l[_].next(o)}},t.prototype.error=function(o){if(this.closed)throw new Cf;this.hasError=!0,this.thrownError=o,this.isStopped=!0;var l=this.observers,p=l.length;l=l.slice();for(var _=0;_<p;_++)l[_].error(o);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new Cf;this.isStopped=!0;var o=this.observers,l=o.length;o=o.slice();for(var p=0;p<l;p++)o[p].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.closed=this.isStopped=!0,this.observers=null},t.prototype._trySubscribe=function(o){if(this.closed)throw new Cf;return r.prototype._trySubscribe.call(this,o)},t.prototype._subscribe=function(o){if(this.closed)throw new Cf;return this.hasError?(o.error(this.thrownError),dc.EMPTY):this.isStopped?(o.complete(),dc.EMPTY):(this.observers.push(o),new ew(this,o))},t.prototype.asObservable=function(){var o=new Za;return o.source=this,o},t.create=function(o,l){return new gw(o,l)},t}(Za),gw=function(r){function t(o,l){var p=r.call(this)||this;return p.destination=o,p.source=l,p}return Ca(t,r),t.prototype.next=function(o){var l=this.destination;l&&l.next&&l.next(o)},t.prototype.error=function(o){var l=this.destination;l&&l.error&&this.destination.error(o)},t.prototype.complete=function(){var o=this.destination;o&&o.complete&&this.destination.complete()},t.prototype._subscribe=function(o){return this.source?this.source.subscribe(o):dc.EMPTY},t}(ec),hB=function(){function r(t){this.connectable=t}return r.prototype.call=function(t,o){var l=this.connectable;return l._refCount++,t=new vH(t,l),o=o.subscribe(t),t.closed||(t.connection=l.connect()),o},r}(),vH=function(r){function t(o,l){return(o=r.call(this,o)||this).connectable=l,o}return Ca(t,r),t.prototype._unsubscribe=function(){var o=this.connectable;if(o){this.connectable=null;var l=o._refCount;0>=l?this.connection=null:(o._refCount=l-1,1<l?this.connection=null:(l=this.connection,o=o._connection,this.connection=null,!o||l&&o!==l||o.unsubscribe()))}else this.connection=null},t}(hb),hw=function(r){function t(o,l){var p=r.call(this)||this;return p.source=o,p.subjectFactory=l,p._refCount=0,p._isComplete=!1,p}return Ca(t,r),t.prototype._subscribe=function(o){return this.getSubject().subscribe(o)},t.prototype.getSubject=function(){var o=this._subject;return o&&!o.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var o=this._connection;return o||(this._isComplete=!1,(o=this._connection=new dc).add(this.source.subscribe(new wH(this.getSubject(),this))),o.closed&&(this._connection=null,o=dc.EMPTY)),o},t.prototype.refCount=function(){return Gr()(this)},t}(Za),WB=function(){var r=hw.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:r._subscribe},_isComplete:{value:r._isComplete,writable:!0},getSubject:{value:r.getSubject},connect:{value:r.connect},refCount:{value:r.refCount}}}(),wH=function(r){function t(o,l){return(o=r.call(this,o)||this).connectable=l,o}return Ca(t,r),t.prototype._error=function(o){this._unsubscribe(),r.prototype._error.call(this,o)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),r.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var o=this.connectable;if(o){this.connectable=null;var l=o._connection;o._refCount=0,o._subject=null,o._connection=null,l&&l.unsubscribe()}},t}(fw);(function(r){function t(o,l){return(o=r.call(this,o)||this).connectable=l,o}Ca(t,r),t.prototype._unsubscribe=function(){var o=this.connectable;if(o){this.connectable=null;var l=o._refCount;0>=l?this.connection=null:(o._refCount=l-1,1<l?this.connection=null:(l=this.connection,o=o._connection,this.connection=null,!o||l&&o!==l||o.unsubscribe()))}else this.connection=null}})(hb),function(r){function t(o,l,p,_,R){return(o=r.call(this,o)||this).keySelector=l,o.elementSelector=p,o.durationSelector=_,o.subjectSelector=R,o.groups=null,o.attemptedToUnsubscribe=!1,o.count=0,o}Ca(t,r),t.prototype._next=function(o){try{var l=this.keySelector(o)}catch(p){return void this.error(p)}this._group(o,l)},t.prototype._group=function(o,l){var p=this.groups;p||(p=this.groups=new Map);var _=p.get(l);if(this.elementSelector)try{var R=this.elementSelector(o)}catch(M){this.error(M)}else R=o;if(!_&&(_=this.subjectSelector?this.subjectSelector():new ec,p.set(l,_),o=new Uo(l,_,this),this.destination.next(o),this.durationSelector)){o=void 0;try{o=this.durationSelector(new Uo(l,_))}catch(M){return void this.error(M)}this.add(o.subscribe(new xH(l,_,this)))}_.closed||_.next(R)},t.prototype._error=function(o){var l=this.groups;l&&(l.forEach(function(p,_){p.error(o)}),l.clear()),this.destination.error(o)},t.prototype._complete=function(){var o=this.groups;o&&(o.forEach(function(l,p){l.complete()}),o.clear()),this.destination.complete()},t.prototype.removeGroup=function(o){this.groups.delete(o)},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&r.prototype.unsubscribe.call(this))}}(hb);var xH=function(r){function t(o,l,p){var _=r.call(this,l)||this;return _.key=o,_.group=l,_.parent=p,_}return Ca(t,r),t.prototype._next=function(o){this.complete()},t.prototype._unsubscribe=function(){var o=this.parent,l=this.key;this.key=this.parent=null,o&&o.removeGroup(l)},t}(hb),Uo=function(r){function t(o,l,p){var _=r.call(this)||this;return _.key=o,_.groupSubject=l,_.refCountSubscription=p,_}return Ca(t,r),t.prototype._subscribe=function(o){var l=new dc,p=this.refCountSubscription,_=this.groupSubject;return p&&!p.closed&&l.add(new yH(p)),l.add(_.subscribe(o)),l},t}(Za),yH=function(r){function t(o){var l=r.call(this)||this;return l.parent=o,o.count++,l}return Ca(t,r),t.prototype.unsubscribe=function(){var o=this.parent;o.closed||this.closed||(r.prototype.unsubscribe.call(this),--o.count,0===o.count&&o.attemptedToUnsubscribe&&o.unsubscribe())},t}(dc),zH=function(r){function t(o){var l=r.call(this)||this;return l._value=o,l}return Ca(t,r),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(o){var l=r.prototype._subscribe.call(this,o);return l&&!l.closed&&o.next(this._value),l},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Cf;return this._value},t.prototype.next=function(o){r.prototype.next.call(this,this._value=o)},t}(ec),dj=function(r){function t(o,l){var p=r.call(this,o,l)||this;return p.scheduler=o,p.work=l,p.pending=!1,p}return Ca(t,r),t.prototype.schedule=function(o,l){if(void 0===l&&(l=0),this.closed)return this;this.state=o;var p=this.scheduler;return null!=(o=this.id)&&(this.id=this.recycleAsyncId(p,o,l)),this.pending=!0,this.delay=l,this.id=this.id||this.requestAsyncId(p,this.id,l),this},t.prototype.requestAsyncId=function(o,l,p){return void 0===p&&(p=0),setInterval(o.flush.bind(o,this),p)},t.prototype.recycleAsyncId=function(o,l,p){if(void 0===p&&(p=0),null!==p&&this.delay===p&&!1===this.pending)return l;clearInterval(l)},t.prototype.execute=function(o,l){return this.closed?Error("executing a cancelled action"):(this.pending=!1,(o=this._execute(o,l))?o:void(!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))))},t.prototype._execute=function(o,l){l=!1;var p=void 0;try{this.work(o)}catch(_){l=!0,p=!!_&&_||Error(_)}if(l)return this.unsubscribe(),p},t.prototype._unsubscribe=function(){var o=this.id,l=this.scheduler,p=l.actions,_=p.indexOf(this);this.state=this.work=null,this.pending=!1,this.scheduler=null,-1!==_&&p.splice(_,1),null!=o&&(this.id=this.recycleAsyncId(l,o,null)),this.delay=null},t}(function(r){function t(o,l){return r.call(this)||this}return Ca(t,r),t.prototype.schedule=function(o,l){return this},t}(dc)),AH=function(r){function t(o,l){var p=r.call(this,o,l)||this;return p.scheduler=o,p.work=l,p}return Ca(t,r),t.prototype.schedule=function(o,l){return void 0===l&&(l=0),0<l?r.prototype.schedule.call(this,o,l):(this.delay=l,this.state=o,this.scheduler.flush(this),this)},t.prototype.execute=function(o,l){return 0<l||this.closed?r.prototype.execute.call(this,o,l):this._execute(o,l)},t.prototype.requestAsyncId=function(o,l,p){return void 0===p&&(p=0),null!==p&&0<p||null===p&&0<this.delay?r.prototype.requestAsyncId.call(this,o,l,p):o.flush(this)},t}(dj),Vo=function(){function r(t,o){void 0===o&&(o=r.now),this.SchedulerAction=t,this.now=o}return r.prototype.schedule=function(t,o,l){return void 0===o&&(o=0),new this.SchedulerAction(this,t).schedule(l,o)},r.now=function(){return Date.now()},r}(),ej=function(r){function t(o,l){void 0===l&&(l=Vo.now);var p=r.call(this,o,function(){return t.delegate&&t.delegate!==p?t.delegate.now():l()})||this;return p.actions=[],p.active=!1,p.scheduled=void 0,p}return Ca(t,r),t.prototype.schedule=function(o,l,p){return void 0===l&&(l=0),t.delegate&&t.delegate!==this?t.delegate.schedule(o,l,p):r.prototype.schedule.call(this,o,l,p)},t.prototype.flush=function(o){var l=this.actions;if(this.active)l.push(o);else{var p;this.active=!0;do{if(p=o.execute(o.state,o.delay))break}while(o=l.shift());if(this.active=!1,p){for(;o=l.shift();)o.unsubscribe();throw p}}},t}(Vo),fj=new(function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Ca(t,r),t}(ej))(AH),$c=new Za(function(r){return r.complete()}),Hr=function(r){return function(t){for(var o=0,l=r.length;o<l&&!t.closed;o++)t.next(r[o]);t.complete()}},Wo;!function(r){r.NEXT="N",r.ERROR="E",r.COMPLETE="C"}(Wo||(Wo={}));var Eh=function(){function r(t,o,l){this.kind=t,this.value=o,this.error=l,this.hasValue="N"===t}return r.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},r.prototype.do=function(t,o,l){switch(this.kind){case"N":return t&&t(this.value);case"E":return o&&o(this.error);case"C":return l&&l()}},r.prototype.accept=function(t,o,l){return t&&"function"==typeof t.next?this.observe(t):this.do(t,o,l)},r.prototype.toObservable=function(){switch(this.kind){case"N":return Wb(this.value);case"E":return Va(this.error);case"C":return ji()}throw Error("unexpected notification kind value")},r.createNext=function(t){return void 0!==t?new r("N",t):r.undefinedValueNotification},r.createError=function(t){return new r("E",void 0,t)},r.createComplete=function(){return r.completeNotification},r.completeNotification=new r("C"),r.undefinedValueNotification=new r("N",void 0),r}(),lB=function(){function r(t,o){void 0===o&&(o=0),this.scheduler=t,this.delay=o}return r.prototype.call=function(t,o){return o.subscribe(new iw(t,this.scheduler,this.delay))},r}(),iw=function(r){function t(o,l,p){return void 0===p&&(p=0),(o=r.call(this,o)||this).scheduler=l,o.delay=p,o}return Ca(t,r),t.dispatch=function(o){o.notification.observe(o.destination),this.unsubscribe()},t.prototype.scheduleMessage=function(o){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new BH(o,this.destination)))},t.prototype._next=function(o){this.scheduleMessage(Eh.createNext(o))},t.prototype._error=function(o){this.scheduleMessage(Eh.createError(o)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(Eh.createComplete()),this.unsubscribe()},t}(hb),BH=function(r,t){this.notification=r,this.destination=t},ah=function(r){function t(o,l,p){void 0===o&&(o=Number.POSITIVE_INFINITY),void 0===l&&(l=Number.POSITIVE_INFINITY);var _=r.call(this)||this;return _.scheduler=p,_._events=[],_._infiniteTimeWindow=!1,_._bufferSize=1>o?1:o,_._windowTime=1>l?1:l,l===Number.POSITIVE_INFINITY?(_._infiniteTimeWindow=!0,_.next=_.nextInfiniteTimeWindow):_.next=_.nextTimeWindow,_}return Ca(t,r),t.prototype.nextInfiniteTimeWindow=function(o){if(!this.isStopped){var l=this._events;l.push(o),l.length>this._bufferSize&&l.shift()}r.prototype.next.call(this,o)},t.prototype.nextTimeWindow=function(o){this.isStopped||(this._events.push(new CH(this._getNow(),o)),this._trimBufferThenGetEvents()),r.prototype.next.call(this,o)},t.prototype._subscribe=function(o){var l=this._infiniteTimeWindow,p=l?this._events:this._trimBufferThenGetEvents(),_=this.scheduler,R=p.length;if(this.closed)throw new Cf;if(this.isStopped||this.hasError)var M=dc.EMPTY;else this.observers.push(o),M=new ew(this,o);if(_&&o.add(o=new iw(o,_)),l)for(l=0;l<R&&!o.closed;l++)o.next(p[l]);else for(l=0;l<R&&!o.closed;l++)o.next(p[l].value);return this.hasError?o.error(this.thrownError):this.isStopped&&o.complete(),M},t.prototype._getNow=function(){return(this.scheduler||fj).now()},t.prototype._trimBufferThenGetEvents=function(){for(var o=this._getNow(),l=this._bufferSize,p=this._windowTime,_=this._events,R=_.length,M=0;M<R&&!(o-_[M].time<p);)M++;return R>l&&(M=Math.max(M,R-l)),0<M&&_.splice(0,M),_},t}(ec),CH=function(r,t){this.time=r,this.value=t},li=function(r){function t(){var o=null!==r&&r.apply(this,arguments)||this;return o.value=null,o.hasNext=!1,o.hasCompleted=!1,o}return Ca(t,r),t.prototype._subscribe=function(o){return this.hasError?(o.error(this.thrownError),dc.EMPTY):this.hasCompleted&&this.hasNext?(o.next(this.value),o.complete(),dc.EMPTY):r.prototype._subscribe.call(this,o)},t.prototype.next=function(o){this.hasCompleted||(this.value=o,this.hasNext=!0)},t.prototype.error=function(o){this.hasCompleted||r.prototype.error.call(this,o)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&r.prototype.next.call(this,this.value),r.prototype.complete.call(this)},t}(ec),DH=1,EH=Promise.resolve(),vm={},jw={setImmediate:function(r){var t=DH++;return vm[t]=!0,EH.then(function(){return Ir(t)&&r()}),t},clearImmediate:function(r){Ir(r)}},FH=function(r){function t(o,l){var p=r.call(this,o,l)||this;return p.scheduler=o,p.work=l,p}return Ca(t,r),t.prototype.requestAsyncId=function(o,l,p){return void 0===p&&(p=0),null!==p&&0<p?r.prototype.requestAsyncId.call(this,o,l,p):(o.actions.push(this),o.scheduled||(o.scheduled=jw.setImmediate(o.flush.bind(o,null))))},t.prototype.recycleAsyncId=function(o,l,p){if(void 0===p&&(p=0),null!==p&&0<p||null===p&&0<this.delay)return r.prototype.recycleAsyncId.call(this,o,l,p);0===o.actions.length&&(jw.clearImmediate(l),o.scheduled=void 0)},t}(dj),Fm=new(function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Ca(t,r),t.prototype.flush=function(o){this.active=!0,this.scheduled=void 0;var l,p=this.actions,_=-1,R=p.length;o=o||p.shift();do{if(l=o.execute(o.state,o.delay))break}while(++_<R&&(o=p.shift()));if(this.active=!1,l){for(;++_<R&&(o=p.shift());)o.unsubscribe();throw l}},t}(ej))(FH),GH=Fm,Xo=new ej(dj),Ee=Xo,HH=function(r){function t(o,l){var p=r.call(this,o,l)||this;return p.scheduler=o,p.work=l,p}return Ca(t,r),t.prototype.requestAsyncId=function(o,l,p){return void 0===p&&(p=0),null!==p&&0<p?r.prototype.requestAsyncId.call(this,o,l,p):(o.actions.push(this),o.scheduled||(o.scheduled=requestAnimationFrame(function(){return o.flush(null)})))},t.prototype.recycleAsyncId=function(o,l,p){if(void 0===p&&(p=0),null!==p&&0<p||null===p&&0<this.delay)return r.prototype.recycleAsyncId.call(this,o,l,p);0===o.actions.length&&(cancelAnimationFrame(l),o.scheduled=void 0)},t}(dj),kw=new(function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Ca(t,r),t.prototype.flush=function(o){this.active=!0,this.scheduled=void 0;var l,p=this.actions,_=-1,R=p.length;o=o||p.shift();do{if(l=o.execute(o.state,o.delay))break}while(++_<R&&(o=p.shift()));if(this.active=!1,l){for(;++_<R&&(o=p.shift());)o.unsubscribe();throw l}},t}(ej))(HH),IH=function(r){function t(o,l){void 0===o&&(o=lw),void 0===l&&(l=Number.POSITIVE_INFINITY);var p=r.call(this,o,function(){return p.frame})||this;return p.maxFrames=l,p.frame=0,p.index=-1,p}return Ca(t,r),t.prototype.flush=function(){for(var o,l,p=this.actions,_=this.maxFrames;(l=p[0])&&l.delay<=_&&(p.shift(),this.frame=l.delay,!(o=l.execute(l.state,l.delay))););if(o){for(;l=p.shift();)l.unsubscribe();throw o}},t.frameTimeFactor=10,t}(ej),lw=function(r){function t(o,l,p){void 0===p&&(p=o.index+=1);var _=r.call(this,o,l)||this;return _.scheduler=o,_.work=l,_.index=p,_.active=!0,_.index=o.index=p,_}return Ca(t,r),t.prototype.schedule=function(o,l){if(void 0===l&&(l=0),!this.id)return r.prototype.schedule.call(this,o,l);this.active=!1;var p=new t(this.scheduler,this.work);return this.add(p),p.schedule(o,l)},t.prototype.requestAsyncId=function(o,l,p){return void 0===p&&(p=0),this.delay=o.frame+p,(o=o.actions).push(this),o.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(o,l,p){},t.prototype._execute=function(o,l){if(!0===this.active)return r.prototype._execute.call(this,o,l)},t.sortActions=function(o,l){return o.delay===l.delay?o.index===l.index?0:o.index>l.index?1:-1:o.delay>l.delay?1:-1},t}(dj),Yo=function(){function r(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return r.prototype=Object.create(Error.prototype),r}(),Lj=function(){function r(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return r.prototype=Object.create(Error.prototype),r}(),ad=function(){function r(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return r.prototype=Object.create(Error.prototype),r}(),mB=function(){function r(t,o){this.project=t,this.thisArg=o}return r.prototype.call=function(t,o){return o.subscribe(new JH(t,this.project,this.thisArg))},r}(),JH=function(r){function t(o,l,p){return(o=r.call(this,o)||this).project=l,o.count=0,o.thisArg=p||o,o}return Ca(t,r),t.prototype._next=function(o){try{var l=this.project.call(this.thisArg,o,this.count++)}catch(p){return void this.destination.error(p)}this.destination.next(l)},t}(hb),Zo=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Ca(t,r),t.prototype.notifyNext=function(o,l,p,_,R){this.destination.next(l)},t.prototype.notifyError=function(o,l){this.destination.error(o)},t.prototype.notifyComplete=function(o){this.destination.complete()},t}(hb),rB=function(r){function t(o,l,p){var _=r.call(this)||this;return _.parent=o,_.outerValue=l,_.outerIndex=p,_.index=0,_}return Ca(t,r),t.prototype._next=function(o){this.parent.notifyNext(this.outerValue,o,this.outerIndex,this.index++,this)},t.prototype._error=function(o){this.parent.notifyError(o,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(hb),KH=function(r){return function(t){return r.then(function(o){t.closed||(t.next(o),t.complete())},function(o){return t.error(o)}).then(null,Wg),t}},kf="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",LH=function(r){return function(t){for(var o=r[kf]();;){var l=void 0;try{l=o.next()}catch(p){return t.error(p),t}if(l.done){t.complete();break}if(t.next(l.value),t.closed)break}return"function"==typeof o.return&&t.add(function(){o.return&&o.return()}),t}},MH=function(r){return function(t){var o=r[Xg]();if("function"!=typeof o.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return o.subscribe(t)}},Or=function(r){return r&&"number"==typeof r.length&&"function"!=typeof r},mi=function(r){if(r&&"function"==typeof r[Xg])return MH(r);if(Or(r))return Hr(r);if(Mr(r))return KH(r);if(r&&"function"==typeof r[kf])return LH(r);throw r=rm(r)?"an invalid object":"'"+r+"'",new TypeError("You provided "+r+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")},mw={},OH=function(){function r(t){this.resultSelector=t}return r.prototype.call=function(t,o){return o.subscribe(new NH(t,this.resultSelector))},r}(),NH=function(r){function t(o,l){return(o=r.call(this,o)||this).resultSelector=l,o.active=0,o.values=[],o.observables=[],o}return Ca(t,r),t.prototype._next=function(o){this.values.push(mw),this.observables.push(o)},t.prototype._complete=function(){var o=this.observables,l=o.length;if(0===l)this.destination.complete();else{this.toRespond=this.active=l;for(var p=0;p<l;p++)this.add(wm(this,o[p],void 0,p))}},t.prototype.notifyComplete=function(o){0==--this.active&&this.destination.complete()},t.prototype.notifyNext=function(o,l,p){var _=(o=this.values)[p];_=this.toRespond?_===mw?--this.toRespond:this.toRespond:0,o[p]=l,0===_&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},t.prototype._tryResultSelector=function(o){try{var l=this.resultSelector.apply(this,o)}catch(p){return void this.destination.error(p)}this.destination.next(l)},t}(Zo),Qe=function(r){function t(o){var l=r.call(this)||this;return l.parent=o,l}return Ca(t,r),t.prototype._next=function(o){this.parent.notifyNext(o)},t.prototype._error=function(o){this.parent.notifyError(o),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(hb);!function(r){function t(o,l,p){var _=r.call(this)||this;return _.parent=o,_.outerValue=l,_.outerIndex=p,_}Ca(t,r),t.prototype._next=function(o){this.parent.notifyNext(this.outerValue,o,this.outerIndex,this)},t.prototype._error=function(o){this.parent.notifyError(o),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()}}(hb);var Re=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Ca(t,r),t.prototype.notifyNext=function(o){this.destination.next(o)},t.prototype.notifyError=function(o){this.destination.error(o)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(hb);!function(r){function t(){return null!==r&&r.apply(this,arguments)||this}Ca(t,r),t.prototype.notifyNext=function(o,l,p,_){this.destination.next(l)},t.prototype.notifyError=function(o){this.destination.error(o)},t.prototype.notifyComplete=function(o){this.destination.complete()}}(hb);var vB=function(){function r(t,o){void 0===o&&(o=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=o}return r.prototype.call=function(t,o){return o.subscribe(new PH(t,this.project,this.concurrent))},r}(),PH=function(r){function t(o,l,p){return void 0===p&&(p=Number.POSITIVE_INFINITY),(o=r.call(this,o)||this).project=l,o.concurrent=p,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return Ca(t,r),t.prototype._next=function(o){this.active<this.concurrent?this._tryNext(o):this.buffer.push(o)},t.prototype._tryNext=function(o){var l=this.index++;try{var p=this.project(o,l)}catch(_){return void this.destination.error(_)}this.active++,this._innerSub(p)},t.prototype._innerSub=function(o){var l=new Qe(this),p=this.destination;p.add(l),(o=De(o,l))!==l&&p.add(o)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(o){this.destination.next(o)},t.prototype.notifyComplete=function(){var o=this.buffer;this.active--,0<o.length?this._next(o.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(Re),$o=na.parseFloat,nw=-1/0!=1/$o("\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff-0")?function(r){r=kk(String(r));var t=$o(r);return 0===t&&"-"==r.charAt(0)?-0:t}:$o;wa({global:!0,forced:parseFloat!=nw},{parseFloat:nw});var ap=new Za(fe),AB=function(){function r(t,o){this.predicate=t,this.thisArg=o}return r.prototype.call=function(t,o){return o.subscribe(new QH(t,this.predicate,this.thisArg))},r}(),QH=function(r){function t(o,l,p){return(o=r.call(this,o)||this).predicate=l,o.thisArg=p,o.count=0,o}return Ca(t,r),t.prototype._next=function(o){try{var l=this.predicate.call(this.thisArg,o,this.count++)}catch(p){return void this.destination.error(p)}l&&this.destination.next(o)},t}(hb),BB=function(){function r(){}return r.prototype.call=function(t,o){return o.subscribe(new RH(t))},r}(),RH=function(r){function t(o){return(o=r.call(this,o)||this).hasFirst=!1,o.observables=[],o.subscriptions=[],o}return Ca(t,r),t.prototype._next=function(o){this.observables.push(o)},t.prototype._complete=function(){var o=this.observables,l=o.length;if(0===l)this.destination.complete();else{for(var p=0;p<l&&!this.hasFirst;p++){var _=wm(this,o[p],void 0,p);this.subscriptions&&this.subscriptions.push(_),this.add(_)}this.observables=null}},t.prototype.notifyNext=function(o,l,p){if(!this.hasFirst){for(this.hasFirst=!0,o=0;o<this.subscriptions.length;o++)if(o!==p){var _=this.subscriptions[o];_.unsubscribe(),this.remove(_)}this.subscriptions=null}this.destination.next(l)},t}(Zo),EB=function(){function r(t){this.resultSelector=t}return r.prototype.call=function(t,o){return o.subscribe(new SH(t,this.resultSelector))},r}(),SH=function(r){function t(o,l,p){return(o=r.call(this,o)||this).resultSelector=l,o.iterators=[],o.active=0,o.resultSelector="function"==typeof l?l:void 0,o}return Ca(t,r),t.prototype._next=function(o){var l=this.iterators;td(o)?l.push(new TH(o)):l.push("function"==typeof o[kf]?new UH(o[kf]()):new VH(this.destination,this,o))},t.prototype._complete=function(){var o=this.iterators,l=o.length;if(this.unsubscribe(),0===l)this.destination.complete();else{this.active=l;for(var p=0;p<l;p++){var _=o[p];_.stillUnsubscribed?this.destination.add(_.subscribe()):this.active--}}},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var o=this.iterators,l=o.length,p=this.destination,_=0;_<l;_++){var R=o[_];if("function"==typeof R.hasValue&&!R.hasValue())return}var M=!1,P=[];for(_=0;_<l;_++){var F=(R=o[_]).next();if(R.hasCompleted()&&(M=!0),F.done)return void p.complete();P.push(F.value)}this.resultSelector?this._tryresultSelector(P):p.next(P),M&&p.complete()},t.prototype._tryresultSelector=function(o){try{var l=this.resultSelector.apply(this,o)}catch(p){return void this.destination.error(p)}this.destination.next(l)},t}(hb),UH=function(){function r(t){this.iterator=t,this.nextResult=t.next()}return r.prototype.hasValue=function(){return!0},r.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},r.prototype.hasCompleted=function(){var t=this.nextResult;return!(!t||!t.done)},r}(),TH=function(){function r(t){this.array=t,this.length=this.index=0,this.length=t.length}return r.prototype[kf]=function(){return this},r.prototype.next=function(t){return(t=this.index++)<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}},r.prototype.hasValue=function(){return this.array.length>this.index},r.prototype.hasCompleted=function(){return this.array.length===this.index},r}(),VH=function(r){function t(o,l,p){return(o=r.call(this,o)||this).parent=l,o.observable=p,o.stillUnsubscribed=!0,o.buffer=[],o.isComplete=!1,o}return Ca(t,r),t.prototype[kf]=function(){return this},t.prototype.next=function(){var o=this.buffer;return 0===o.length&&this.isComplete?{value:null,done:!0}:{value:o.shift(),done:!1}},t.prototype.hasValue=function(){return 0<this.buffer.length},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){0<this.buffer.length?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(o){this.buffer.push(o),this.parent.checkIterators()},t.prototype.subscribe=function(){return De(this.observable,new Qe(this))},t}(Re),WH=Object.freeze({__proto__:null,Observable:Za,ConnectableObservable:hw,GroupedObservable:Uo,observable:Xg,Subject:ec,BehaviorSubject:zH,ReplaySubject:ah,AsyncSubject:li,asap:GH,asapScheduler:Fm,async:Ee,asyncScheduler:Xo,queue:fj,queueScheduler:fj,animationFrame:kw,animationFrameScheduler:kw,VirtualTimeScheduler:IH,VirtualAction:lw,Scheduler:Vo,Subscription:dc,Subscriber:hb,Notification:Eh,get NotificationKind(){return Wo},pipe:tm,noop:fe,identity:jf,isObservable:function(r){return!!r&&(r instanceof Za||"function"==typeof r.lift&&"function"==typeof r.subscribe)},ArgumentOutOfRangeError:Yo,EmptyError:Lj,ObjectUnsubscribedError:Cf,UnsubscriptionError:ii,TimeoutError:ad,bindCallback:Jr,bindNodeCallback:Kr,combineLatest:function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var o=t=void 0;return Ce(r[r.length-1])&&(o=r.pop()),"function"==typeof r[r.length-1]&&(t=r.pop()),1===r.length&&td(r[0])&&(r=r[0]),ki(r,o).lift(new OH(t))},concat:Pr,defer:lf,empty:ji,forkJoin:function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(1===r.length){var o=r[0];if(td(o))return Jj(o,null);if(rm(o)&&Object.getPrototypeOf(o)===Object.prototype)return Jj((r=Object.keys(o)).map(function(p){return o[p]}),r)}if("function"==typeof r[r.length-1]){var l=r.pop();return Jj(r=1===r.length&&td(r[0])?r[0]:r,null).pipe(Wa(function(p){return l.apply(void 0,p)}))}return Jj(r,null)},from:ge,fromEvent:Bc,fromEventPattern:Rr,generate:function(r,t,o,l,p){if(1==arguments.length){var _=r.initialState;t=r.condition,o=r.iterate;var R=r.resultSelector||jf;p=r.scheduler}else void 0===l||Ce(l)?(_=r,R=jf,p=l):(_=r,R=l);return new Za(function(M){var P=_;if(p)return p.schedule(wB,0,{subscriber:M,iterate:o,condition:t,resultSelector:R,state:P});for(;;){if(t){var F=void 0;try{F=t(P)}catch(G){M.error(G);break}if(!F){M.complete();break}}F=void 0;try{F=R(P)}catch(G){M.error(G);break}if(M.next(F),M.closed)break;try{P=o(P)}catch(G){M.error(G);break}}})},iif:function(r,t,o){return void 0===t&&(t=$c),void 0===o&&(o=$c),lf(function(){return r()?t:o})},interval:Yg,merge:Nc,never:function(){return ap},of:Wb,onErrorResumeNext:ym,pairs:function(r,t){return new Za(t?function(o){var l=Object.keys(r),p=new dc;return p.add(t.schedule(yB,0,{keys:l,index:0,subscriber:o,subscription:p,obj:r})),p}:function(o){for(var l=Object.keys(r),p=0;p<l.length&&!o.closed;p++){var _=l[p];r.hasOwnProperty(_)&&o.next([_,r[_]])}o.complete()})},partition:function(r,t,o){return[sc(t,o)(new Za(mi(r))),sc(zB(t,o))(new Za(mi(r)))]},race:bb,range:function(r,t,o){return void 0===r&&(r=0),new Za(function(l){void 0===t&&(t=r,r=0);var p=0,_=r;if(o)return o.schedule(CB,0,{index:p,count:t,start:r,subscriber:l});for(;;){if(p++>=t){l.complete();break}if(l.next(_++),l.closed)break}})},throwError:Va,timer:Fe,using:function(r,t){return new Za(function(o){try{var l=r()}catch(R){return void o.error(R)}try{var p=t(l)}catch(R){return void o.error(R)}var _=(p?ge(p):$c).subscribe(o);return function(){_.unsubscribe(),l&&l.unsubscribe()}})},zip:zm,scheduled:Nr,EMPTY:$c,NEVER:ap,config:sd}),FB=function(){function r(t,o,l,p){this.bufferTimeSpan=t,this.bufferCreationInterval=o,this.maxBufferSize=l,this.scheduler=p}return r.prototype.call=function(t,o){return o.subscribe(new XH(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},r}(),YH=function(){this.buffer=[]},XH=function(r){function t(o,l,p,_,R){if((o=r.call(this,o)||this).bufferTimeSpan=l,o.bufferCreationInterval=p,o.maxBufferSize=_,o.scheduler=R,o.contexts=[],_=o.openContext(),o.timespanOnly=null==p||0>p,o.timespanOnly)o.add(_.closeAction=R.schedule(Sr,l,{subscriber:o,context:_,bufferTimeSpan:l}));else{var M={bufferTimeSpan:l,bufferCreationInterval:p,subscriber:o,scheduler:R};o.add(_.closeAction=R.schedule(Tr,l,{subscriber:o,context:_})),o.add(R.schedule(GB,p,M))}return o}return Ca(t,r),t.prototype._next=function(o){for(var l,p=this.contexts,_=p.length,R=0;R<_;R++){var M=p[R],P=M.buffer;P.push(o),P.length==this.maxBufferSize&&(l=M)}l&&this.onBufferFull(l)},t.prototype._error=function(o){this.contexts.length=0,r.prototype._error.call(this,o)},t.prototype._complete=function(){for(var o=this.contexts,l=this.destination;0<o.length;){var p=o.shift();l.next(p.buffer)}r.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.contexts=null},t.prototype.onBufferFull=function(o){if(this.closeContext(o),(o=o.closeAction).unsubscribe(),this.remove(o),!this.closed&&this.timespanOnly){o=this.openContext();var l=this.bufferTimeSpan;this.add(o.closeAction=this.scheduler.schedule(Sr,l,{subscriber:this,context:o,bufferTimeSpan:l}))}},t.prototype.openContext=function(){var o=new YH;return this.contexts.push(o),o},t.prototype.closeContext=function(o){this.destination.next(o.buffer);var l=this.contexts;0<=(l?l.indexOf(o):-1)&&l.splice(l.indexOf(o),1)},t}(hb),HB=function(){function r(t){this.selector=t}return r.prototype.call=function(t,o){return o.subscribe(new ZH(t,this.selector,this.caught))},r}(),ZH=function(r){function t(o,l,p){return(o=r.call(this,o)||this).selector=l,o.caught=p,o}return Ca(t,r),t.prototype.error=function(o){if(!this.isStopped){var l=void 0;try{l=this.selector(o,this.caught)}catch(p){return void r.prototype.error.call(this,p)}this._unsubscribeAndRecycle(),o=new Qe(this),this.add(o),(l=De(l,o))!==o&&this.add(l)}},t}(Re),IB=function(){function r(t){this.defaultValue=t}return r.prototype.call=function(t,o){return o.subscribe(new $H(t,this.defaultValue))},r}(),$H=function(r){function t(o,l){return(o=r.call(this,o)||this).defaultValue=l,o.isEmpty=!0,o}return Ca(t,r),t.prototype._next=function(o){this.isEmpty=!1,this.destination.next(o)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(hb),JB=function(){function r(t,o){this.delay=t,this.scheduler=o}return r.prototype.call=function(t,o){return o.subscribe(new aI(t,this.delay,this.scheduler))},r}(),aI=function(r){function t(o,l,p){return(o=r.call(this,o)||this).delay=l,o.scheduler=p,o.queue=[],o.active=!1,o.errored=!1,o}return Ca(t,r),t.dispatch=function(o){for(var l=o.source,p=l.queue,_=o.scheduler,R=o.destination;0<p.length&&0>=p[0].time-_.now();)p.shift().notification.observe(R);0<p.length?(l=Math.max(0,p[0].time-_.now()),this.schedule(o,l)):(this.unsubscribe(),l.active=!1)},t.prototype._schedule=function(o){this.active=!0,this.destination.add(o.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:o}))},t.prototype.scheduleNotification=function(o){if(!0!==this.errored){var l=this.scheduler;o=new bI(l.now()+this.delay,o),this.queue.push(o),!1===this.active&&this._schedule(l)}},t.prototype._next=function(o){this.scheduleNotification(Eh.createNext(o))},t.prototype._error=function(o){this.errored=!0,this.queue=[],this.destination.error(o),this.unsubscribe()},t.prototype._complete=function(){this.scheduleNotification(Eh.createComplete()),this.unsubscribe()},t}(hb),bI=function(r,t){this.time=r,this.notification=t},KB=function(){function r(t,o){this.keySelector=t,this.flushes=o}return r.prototype.call=function(t,o){return o.subscribe(new cI(t,this.keySelector,this.flushes))},r}(),cI=function(r){function t(o,l,p){return(o=r.call(this,o)||this).keySelector=l,o.values=new Set,p&&o.add(De(p,new Qe(o))),o}return Ca(t,r),t.prototype.notifyNext=function(){this.values.clear()},t.prototype.notifyError=function(o){this._error(o)},t.prototype._next=function(o){this.keySelector?this._useKeySelector(o):this._finalizeNext(o,o)},t.prototype._useKeySelector=function(o){var l=this.destination;try{var p=this.keySelector(o)}catch(_){return void l.error(_)}this._finalizeNext(p,o)},t.prototype._finalizeNext=function(o,l){var p=this.values;p.has(o)||(p.add(o),this.destination.next(l))},t}(Re),MB=function(){function r(t){this.errorFactory=t}return r.prototype.call=function(t,o){return o.subscribe(new dI(t,this.errorFactory))},r}(),dI=function(r){function t(o,l){return(o=r.call(this,o)||this).errorFactory=l,o.hasValue=!1,o}return Ca(t,r),t.prototype._next=function(o){this.hasValue=!0,this.destination.next(o)},t.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var o=void 0;try{o=this.errorFactory()}catch(l){o=l}this.destination.error(o)},t}(hb),NB=function(){function r(t){if(this.total=t,0>this.total)throw new Yo}return r.prototype.call=function(t,o){return o.subscribe(new eI(t,this.total))},r}(),eI=function(r){function t(o,l){return(o=r.call(this,o)||this).total=l,o.count=0,o}return Ca(t,r),t.prototype._next=function(o){var l=this.total,p=++this.count;p<=l&&(this.destination.next(o),p===l&&(this.destination.complete(),this.unsubscribe()))},t}(hb),OB=function(){function r(t){this.callback=t}return r.prototype.call=function(t,o){return o.subscribe(new fI(t,this.callback))},r}(),fI=function(r){function t(o,l){return(o=r.call(this,o)||this).add(new dc(l)),o}return Ca(t,r),t}(hb),QB=function(){function r(){}return r.prototype.call=function(t,o){return o.subscribe(new gI(t))},r}(),gI=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Ca(t,r),t.prototype._next=function(o){},t}(hb),RB=function(){function r(t){if(this.total=t,0>this.total)throw new Yo}return r.prototype.call=function(t,o){return o.subscribe(new hI(t,this.total))},r}(),hI=function(r){function t(o,l){return(o=r.call(this,o)||this).total=l,o.ring=[],o.count=0,o}return Ca(t,r),t.prototype._next=function(o){var l=this.ring,p=this.total,_=this.count++;l.length<p?l.push(o):l[_%p]=o},t.prototype._complete=function(){var o=this.destination,l=this.count;if(0<l)for(var p=this.count>=this.total?this.total:this.count,_=this.ring,R=0;R<p;R++){var M=l++%p;o.next(_[M])}o.complete()},t}(hb),SB=function(){function r(t){this.value=t}return r.prototype.call=function(t,o){return o.subscribe(new iI(t,this.value))},r}(),iI=function(r){function t(o,l){return(o=r.call(this,o)||this).value=l,o}return Ca(t,r),t.prototype._next=function(o){this.destination.next(this.value)},t}(hb),TB=function(){function r(t,o,l){void 0===l&&(l=!1),this.accumulator=t,this.seed=o,this.hasSeed=l}return r.prototype.call=function(t,o){return o.subscribe(new jI(t,this.accumulator,this.seed,this.hasSeed))},r}(),jI=function(r){function t(o,l,p,_){return(o=r.call(this,o)||this).accumulator=l,o._seed=p,o.hasSeed=_,o.index=0,o}return Ca(t,r),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(o){this.hasSeed=!0,this._seed=o},enumerable:!0,configurable:!0}),t.prototype._next=function(o){if(this.hasSeed)return this._tryNext(o);this.seed=o,this.destination.next(o)},t.prototype._tryNext=function(o){var l=this.index++;try{var p=this.accumulator(this.seed,o,l)}catch(_){this.destination.error(_)}this.seed=p,this.destination.next(p)},t}(hb),VB=function(){function r(t,o){this.subjectFactory=t,this.selector=o}return r.prototype.call=function(t,o){var l=this.selector,p=this.subjectFactory();return(t=l(p).subscribe(t)).add(o.subscribe(p)),t},r}(),XB=function(){function r(t,o){this.notifier=t,this.source=o}return r.prototype.call=function(t,o){return o.subscribe(new kI(t,this.notifier,this.source))},r}(),kI=function(r){function t(o,l,p){return(o=r.call(this,o)||this).notifier=l,o.source=p,o}return Ca(t,r),t.prototype.error=function(o){if(!this.isStopped){var l=this.errors,p=this.retries,_=this.retriesSubscription;if(p)this.retriesSubscription=this.errors=void 0;else{l=new ec;try{p=(0,this.notifier)(l)}catch(R){return r.prototype.error.call(this,R)}_=De(p,new Qe(this))}this._unsubscribeAndRecycle(),this.errors=l,this.retries=p,this.retriesSubscription=_,l.next(o)}},t.prototype._unsubscribe=function(){var o=this.errors,l=this.retriesSubscription;o&&(o.unsubscribe(),this.errors=void 0),l&&(l.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},t.prototype.notifyNext=function(){var o=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=o,this.source.subscribe(this)},t}(Re),$B=function(){function r(t){this.project=t}return r.prototype.call=function(t,o){return o.subscribe(new lI(t,this.project))},r}(),lI=function(r){function t(o,l){return(o=r.call(this,o)||this).project=l,o.index=0,o}return Ca(t,r),t.prototype._next=function(o){var l=this.index++;try{var p=this.project(o,l)}catch(_){return void this.destination.error(_)}this._innerSub(p)},t.prototype._innerSub=function(o){var l=this.innerSubscription;l&&l.unsubscribe(),l=new Qe(this);var p=this.destination;p.add(l),this.innerSubscription=De(o,l),this.innerSubscription!==l&&p.add(this.innerSubscription)},t.prototype._complete=function(){var o=this.innerSubscription;o&&!o.closed||r.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=void 0},t.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&r.prototype._complete.call(this)},t.prototype.notifyNext=function(o){this.destination.next(o)},t}(Re),aC=function(){function r(t){this.notifier=t}return r.prototype.call=function(t,o){t=new mI(t);var l=De(this.notifier,new Qe(t));return l&&!t.seenValue?(t.add(l),o.subscribe(t)):t},r}(),mI=function(r){function t(o){return(o=r.call(this,o)||this).seenValue=!1,o}return Ca(t,r),t.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(Re),bC=function(){function r(t,o,l){this.nextOrObserver=t,this.error=o,this.complete=l}return r.prototype.call=function(t,o){return o.subscribe(new nI(t,this.nextOrObserver,this.error,this.complete))},r}(),nI=function(r){function t(o,l,p,_){return(o=r.call(this,o)||this)._tapNext=fe,o._tapError=fe,o._tapComplete=fe,o._tapError=p||fe,o._tapComplete=_||fe,Vg(l)?(o._context=o,o._tapNext=l):l&&(o._context=l,o._tapNext=l.next||fe,o._tapError=l.error||fe,o._tapComplete=l.complete||fe),o}return Ca(t,r),t.prototype._next=function(o){try{this._tapNext.call(this._context,o)}catch(l){return void this.destination.error(l)}this.destination.next(o)},t.prototype._error=function(o){try{this._tapError.call(this._context,o)}catch(l){return void this.destination.error(l)}this.destination.error(o)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(o){return void this.destination.error(o)}return this.destination.complete()},t}(hb),dC={leading:!0,trailing:!1};!function(r){function t(o,l,p,_){var R=r.call(this,o)||this;return R.destination=o,R.durationSelector=l,R._leading=p,R._trailing=_,R._hasValue=!1,R}Ca(t,r),t.prototype._next=function(o){this._hasValue=!0,this._sendValue=o,this._throttled||(this._leading?this.send():this.throttle(o))},t.prototype.send=function(){var o=this._sendValue;this._hasValue&&(this.destination.next(o),this.throttle(o)),this._hasValue=!1,this._sendValue=void 0},t.prototype.throttle=function(o){(o=this.tryDurationSelector(o))&&this.add(this._throttled=De(o,new Qe(this)))},t.prototype.tryDurationSelector=function(o){try{return this.durationSelector(o)}catch(l){return this.destination.error(l),null}},t.prototype.throttlingDone=function(){var o=this._throttled,l=this._trailing;o&&o.unsubscribe(),this._throttled=void 0,l&&this.send()},t.prototype.notifyNext=function(){this.throttlingDone()},t.prototype.notifyComplete=function(){this.throttlingDone()}}(Re);for(var eC=function(){function r(t,o,l,p){this.duration=t,this.scheduler=o,this.leading=l,this.trailing=p}return r.prototype.call=function(t,o){return o.subscribe(new oI(t,this.duration,this.scheduler,this.leading,this.trailing))},r}(),oI=function(r){function t(o,l,p,_,R){return(o=r.call(this,o)||this).duration=l,o.scheduler=p,o.leading=_,o.trailing=R,o._hasTrailingValue=!1,o._trailingValue=null,o}return Ca(t,r),t.prototype._next=function(o){this.throttled?this.trailing&&(this._trailingValue=o,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(fC,this.duration,{subscriber:this})),this.leading?this.destination.next(o):this.trailing&&(this._trailingValue=o,this._hasTrailingValue=!0))},t.prototype._complete=function(){this._hasTrailingValue&&this.destination.next(this._trailingValue),this.destination.complete()},t.prototype.clearThrottle=function(){var o=this.throttled;o&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),o.unsubscribe(),this.remove(o),this.throttled=null)},t}(hb),hC=function(){function r(t,o,l,p){this.waitFor=t,this.absoluteTimeout=o,this.withObservable=l,this.scheduler=p}return r.prototype.call=function(t,o){return o.subscribe(new pI(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},r}(),pI=function(r){function t(o,l,p,_,R){return(o=r.call(this,o)||this).absoluteTimeout=l,o.waitFor=p,o.withObservable=_,o.scheduler=R,o.scheduleTimeout(),o}return Ca(t,r),t.dispatchTimeout=function(o){var l=o.withObservable;o._unsubscribeAndRecycle(),o.add(De(l,new Qe(o)))},t.prototype.scheduleTimeout=function(){var o=this.action;o?this.action=o.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(o){this.absoluteTimeout||this.scheduleTimeout(),r.prototype._next.call(this,o)},t.prototype._unsubscribe=function(){this.action=void 0,this.withObservable=this.scheduler=null},t}(Re),jC=function(){function r(t,o){this.observables=t,this.project=o}return r.prototype.call=function(t,o){return o.subscribe(new qI(t,this.observables,this.project))},r}(),qI=function(r){function t(o,l,p){(o=r.call(this,o)||this).observables=l,o.project=p,o.toRespond=[],p=l.length,o.values=Array(p);for(var _=0;_<p;_++)o.toRespond.push(_);for(_=0;_<p;_++)o.add(wm(o,l[_],void 0,_));return o}return Ca(t,r),t.prototype.notifyNext=function(o,l,p){this.values[p]=l,0<(o=this.toRespond).length&&-1!==(p=o.indexOf(p))&&o.splice(p,1)},t.prototype.notifyComplete=function(){},t.prototype._next=function(o){0===this.toRespond.length&&(o=[o].concat(this.values),this.project?this._tryProject(o):this.destination.next(o))},t.prototype._tryProject=function(o){try{var l=this.project.apply(this,o)}catch(p){return void this.destination.error(p)}this.destination.next(l)},t}(Zo),ow=kc(function(r){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var o=new Uint8Array(16);r.exports=function(){return t(o),o}}else{var l=Array(16);r.exports=function(){for(var p,_=0;16>_;_++)0==(3&_)&&(p=4294967296*Math.random()),l[_]=p>>>((3&_)<<3)&255;return l}}}),tc=[],Yk=0;256>Yk;++Yk)tc[Yk]=(Yk+256).toString(16).substr(1);var pw=function(r,t){return t=t||0,[tc[r[t++]],tc[r[t++]],tc[r[t++]],tc[r[t++]],"-",tc[r[t++]],tc[r[t++]],"-",tc[r[t++]],tc[r[t++]],"-",tc[r[t++]],tc[r[t++]],"-",tc[r[t++]],tc[r[t++]],tc[r[t++]],tc[r[t++]],tc[r[t++]],tc[r[t++]]].join("")},gj=function(r,t,o){if(o=t&&o||0,"string"==typeof r&&(t="binary"===r?Array(16):null,r=null),(r=(r=r||{}).random||(r.rng||ow)())[6]=15&r[6]|64,r[8]=63&r[8]|128,t)for(var l=0;16>l;++l)t[o+l]=r[l];return t||pw(r)},hj=gj(),Bm=!1,$r=new AbortController,Se,Df,bp,cp,Ef,rg,Zd,sg,zd,dp,Te,tg,Ue,Ve,We,Fh,Uc,$d;(function(r){r[r.ATTRIBUTE_OPERATION_ERR_FAILURE=2]="ATTRIBUTE_OPERATION_ERR_FAILURE",r[r.ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT=3]="ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT",r[r.ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW=4]="ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW",r[r.ATTRIBUTE_OPERATION_ERR_TOO_OFTEN=5]="ATTRIBUTE_OPERATION_ERR_TOO_OFTEN",r[r.ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND=6]="ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND",r[r.ATTRIBUTE_OPERATION_ERR_TIMEOUT=7]="ATTRIBUTE_OPERATION_ERR_TIMEOUT",r[r.ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN=102]="ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN"})(Se||(Se={})),function(r){r[r.CHANNEL_MESSAGE_ERR_FAILURE=1]="CHANNEL_MESSAGE_ERR_FAILURE",r[r.CHANNEL_MESSAGE_ERR_TIMEOUT=2]="CHANNEL_MESSAGE_ERR_TIMEOUT",r[r.CHANNEL_MESSAGE_ERR_TOO_OFTEN=3]="CHANNEL_MESSAGE_ERR_TOO_OFTEN",r[r.CHANNEL_MESSAGE_ERR_INVALID_MESSAGE=4]="CHANNEL_MESSAGE_ERR_INVALID_MESSAGE",r[r.CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL=5]="CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL",r[r.CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN=102]="CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN"}(Df||(Df={})),function(r){r[r.CREATE_CHANNEL_ERR_INVALID_ARGUMENT=1]="CREATE_CHANNEL_ERR_INVALID_ARGUMENT"}(bp||(bp={})),function(r){r[r.CREATE_INSTANCE_ERR_INVALID_ARGUMENT=1]="CREATE_INSTANCE_ERR_INVALID_ARGUMENT"}(cp||(cp={})),function(r){r[r.GET_MEMBERS_ERR_FAILURE=1]="GET_MEMBERS_ERR_FAILURE",r[r.GET_MEMBERS_ERR_REJECTED=2]="GET_MEMBERS_ERR_REJECTED",r[r.GET_MEMBERS_ERR_TIMEOUT=3]="GET_MEMBERS_ERR_TIMEOUT",r[r.GET_MEMBERS_ERR_TOO_OFTEN=4]="GET_MEMBERS_ERR_TOO_OFTEN",r[r.GET_MEMBERS_ERR_NOT_IN_CHANNEL=5]="GET_MEMBERS_ERR_NOT_IN_CHANNEL",r[r.GET_MEMBERS_ERR_USER_NOT_LOGGED_IN=102]="GET_MEMBERS_ERR_USER_NOT_LOGGED_IN"}(Ef||(Ef={})),function(r){r[r.INVITATION_API_CALL_ERR_INVALID_ARGUMENT=1]="INVITATION_API_CALL_ERR_INVALID_ARGUMENT",r[r.INVITATION_API_CALL_ERR_NOT_STARTED=2]="INVITATION_API_CALL_ERR_NOT_STARTED",r[r.INVITATION_API_CALL_ERR_ALREADY_END=3]="INVITATION_API_CALL_ERR_ALREADY_END",r[r.INVITATION_API_CALL_ERR_ALREADY_ACCEPT=4]="INVITATION_API_CALL_ERR_ALREADY_ACCEPT",r[r.INVITATION_API_CALL_ERR_ALREADY_SENT=5]="INVITATION_API_CALL_ERR_ALREADY_SENT"}(rg||(rg={})),function(r){r[r.JOIN_CHANNEL_ERR_FAILURE=1]="JOIN_CHANNEL_ERR_FAILURE",r[r.JOIN_CHANNEL_ERR_REJECTED=2]="JOIN_CHANNEL_ERR_REJECTED",r[r.JOIN_CHANNEL_ERR_INVALID_ARGUMENT=3]="JOIN_CHANNEL_ERR_INVALID_ARGUMENT",r[r.JOIN_CHANNEL_TIMEOUT=4]="JOIN_CHANNEL_TIMEOUT",r[r.JOIN_CHANNEL_ERR_EXCEED_LIMIT=5]="JOIN_CHANNEL_ERR_EXCEED_LIMIT",r[r.JOIN_CHANNEL_ERR_ALREADY_JOINED=6]="JOIN_CHANNEL_ERR_ALREADY_JOINED",r[r.JOIN_CHANNEL_ERR_TOO_OFTEN=7]="JOIN_CHANNEL_ERR_TOO_OFTEN",r[r.JOIN_CHANNEL_ERR_JOIN_SAME_CHANNEL_TOO_OFTEN=8]="JOIN_CHANNEL_ERR_JOIN_SAME_CHANNEL_TOO_OFTEN",r[r.JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN=102]="JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN",r[r.JOIN_CHANNEL_ERR_ABORTED_BY_LEAVE=201]="JOIN_CHANNEL_ERR_ABORTED_BY_LEAVE",r[r.JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID=202]="JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID"}(Zd||(Zd={})),function(r){r[r.LEAVE_CHANNEL_ERR_FAILURE=1]="LEAVE_CHANNEL_ERR_FAILURE",r[r.LEAVE_CHANNEL_ERR_REJECTED=2]="LEAVE_CHANNEL_ERR_REJECTED",r[r.LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL=3]="LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL",r[r.LEAVE_CHANNEL_ERR_KICKED=4]="LEAVE_CHANNEL_ERR_KICKED",r[r.LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN=102]="LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN"}(sg||(sg={})),function(r){r[r.LOGIN_ERR_UNKNOWN=1]="LOGIN_ERR_UNKNOWN",r[r.LOGIN_ERR_REJECTED=2]="LOGIN_ERR_REJECTED",r[r.LOGIN_ERR_INVALID_ARGUMENT=3]="LOGIN_ERR_INVALID_ARGUMENT",r[r.LOGIN_ERR_INVALID_APP_ID=4]="LOGIN_ERR_INVALID_APP_ID",r[r.LOGIN_ERR_INVALID_TOKEN=5]="LOGIN_ERR_INVALID_TOKEN",r[r.LOGIN_ERR_TOKEN_EXPIRED=6]="LOGIN_ERR_TOKEN_EXPIRED",r[r.LOGIN_ERR_NOT_AUTHORIZED=7]="LOGIN_ERR_NOT_AUTHORIZED",r[r.LOGIN_ERR_ALREADY_LOGIN=8]="LOGIN_ERR_ALREADY_LOGIN",r[r.LOGIN_ERR_TIMEOUT=9]="LOGIN_ERR_TIMEOUT",r[r.LOGIN_ERR_TOO_OFTEN=10]="LOGIN_ERR_TOO_OFTEN",r[r.LOGIN_ERR_ABORTED_BY_LOGOUT=201]="LOGIN_ERR_ABORTED_BY_LOGOUT"}(zd||(zd={})),function(r){r[r.LOGOUT_ERR_USER_NOT_LOGGED_IN=102]="LOGOUT_ERR_USER_NOT_LOGGED_IN"}(dp||(dp={})),function(r){r[r.PEER_MESSAGE_ERR_FAILURE=1]="PEER_MESSAGE_ERR_FAILURE",r[r.PEER_MESSAGE_ERR_TIMEOUT=2]="PEER_MESSAGE_ERR_TIMEOUT",r[r.PEER_MESSAGE_ERR_TOO_OFTEN=5]="PEER_MESSAGE_ERR_TOO_OFTEN",r[r.PEER_MESSAGE_ERR_INVALID_USERID=6]="PEER_MESSAGE_ERR_INVALID_USERID",r[r.PEER_MESSAGE_ERR_INVALID_MESSAGE=7]="PEER_MESSAGE_ERR_INVALID_MESSAGE",r[r.PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE=8]="PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE",r[r.PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN=102]="PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN"}(Te||(Te={})),function(r){r[r.QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT=2]="QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT",r[r.QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED=3]="QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED",r[r.QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT=4]="QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT",r[r.QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN=5]="QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN",r[r.QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN=102]="QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN"}(tg||(tg={})),function(r){r[r.RENEW_TOKEN_ERR_FAILURE=1]="RENEW_TOKEN_ERR_FAILURE",r[r.RENEW_TOKEN_ERR_INVALID_ARGUMENT=2]="RENEW_TOKEN_ERR_INVALID_ARGUMENT",r[r.RENEW_TOKEN_ERR_REJECTED=3]="RENEW_TOKEN_ERR_REJECTED",r[r.RENEW_TOKEN_ERR_TOO_OFTEN=4]="RENEW_TOKEN_ERR_TOO_OFTEN",r[r.RENEW_TOKEN_ERR_TOKEN_EXPIRED=5]="RENEW_TOKEN_ERR_TOKEN_EXPIRED",r[r.RENEW_TOKEN_ERR_INVALID_TOKEN=6]="RENEW_TOKEN_ERR_INVALID_TOKEN",r[r.RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN=102]="RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN",r[r.RENEW_TOKEN_ERR_ABORTED_BY_LOGOUT=201]="RENEW_TOKEN_ERR_ABORTED_BY_LOGOUT"}(Ue||(Ue={})),function(r){r[r.GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE=1]="GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE",r[r.GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT=2]="GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT",r[r.GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN=3]="GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN",r[r.GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT=4]="GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT",r[r.GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT=5]="GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT",r[r.GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED=101]="GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED",r[r.GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN=102]="GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN"}(Ve||(Ve={})),function(r){r[r.PEER_SUBSCRIPTION_STATUS_ERR_FAILURE=1]="PEER_SUBSCRIPTION_STATUS_ERR_FAILURE",r[r.PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT=2]="PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT",r[r.PEER_SUBSCRIPTION_STATUS_ERR_REJECTED=3]="PEER_SUBSCRIPTION_STATUS_ERR_REJECTED",r[r.PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT=4]="PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT",r[r.PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN=5]="PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN",r[r.PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW=6]="PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW",r[r.PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN=102]="PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN"}(We||(We={})),function(r){r[r.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE=1]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE",r[r.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT=2]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT",r[r.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN=3]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN",r[r.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN=102]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN"}(Fh||(Fh={})),function(r){r[r.METADATA_OPERATION_ERR_OK=0]="METADATA_OPERATION_ERR_OK",r[r.METADATA_OPERATION_ERR_FAILURE=1]="METADATA_OPERATION_ERR_FAILURE",r[r.METADATA_OPERATION_ERR_INVALID_USER_ID=2]="METADATA_OPERATION_ERR_INVALID_USER_ID",r[r.METADATA_OPERATION_ERR_INVALID_ARGUMENT=3]="METADATA_OPERATION_ERR_INVALID_ARGUMENT",r[r.METADATA_OPERATION_ERR_SIZE_OVERFLOW=4]="METADATA_OPERATION_ERR_SIZE_OVERFLOW",r[r.METADATA_OPERATION_ERR_DUPLICATE_KEY=5]="METADATA_OPERATION_ERR_DUPLICATE_KEY",r[r.METADATA_OPERATION_ERR_TOO_OFTEN=6]="METADATA_OPERATION_ERR_TOO_OFTEN",r[r.METADATA_OPERATION_ERR_TIMEOUT=7]="METADATA_OPERATION_ERR_TIMEOUT",r[r.METADATA_OPERATION_ERR_OUTDATE_REVISION=8]="METADATA_OPERATION_ERR_OUTDATE_REVISION",r[r.METADATA_OPERATION_ERR_NOT_IN_CHANNEL=9]="METADATA_OPERATION_ERR_NOT_IN_CHANNEL",r[r.METADATA_OPERATION_ERR_NOT_INITIALIZED=101]="METADATA_OPERATION_ERR_NOT_INITIALIZED",r[r.METADATA_OPERATION_ERR_USER_NOT_LOGGED_IN=102]="METADATA_OPERATION_ERR_USER_NOT_LOGGED_IN"}(Uc||(Uc={})),function(r){r[r.METADATA_SUBSCRIPTION_ERR_OK=0]="METADATA_SUBSCRIPTION_ERR_OK",r[r.METADATA_SUBSCRIPTION_ERR_FAILURE=1]="METADATA_SUBSCRIPTION_ERR_FAILURE",r[r.METADATA_SUBSCRIPTION_ERR_TIMEOUT=2]="METADATA_SUBSCRIPTION_ERR_TIMEOUT",r[r.METADATA_SUBSCRIPTION_ERR_INVALID_ARGUMENT=3]="METADATA_SUBSCRIPTION_ERR_INVALID_ARGUMENT",r[r.METADATA_SUBSCRIPTION_ERR_TOO_OFTEN=4]="METADATA_SUBSCRIPTION_ERR_TOO_OFTEN",r[r.METADATA_SUBSCRIPTION_ERR_OVERFLOW=5]="METADATA_SUBSCRIPTION_ERR_OVERFLOW",r[r.METADATA_SUBSCRIPTION_USER_NOT_SUBSCRIBED=6]="METADATA_SUBSCRIPTION_USER_NOT_SUBSCRIBED",r[r.METADATA_SUBSCRIPTION_ERR_NOT_INITIALIZED=101]="METADATA_SUBSCRIPTION_ERR_NOT_INITIALIZED",r[r.METADATA_SUBSCRIPTION_ERR_NOT_LOGGED_IN=102]="METADATA_SUBSCRIPTION_ERR_NOT_LOGGED_IN"}($d||($d={}));var Ad=Se.ATTRIBUTE_OPERATION_ERR_FAILURE,Ub=Se.ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT,ch=Se.ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW,qw=Se.ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND,Bd=Se.ATTRIBUTE_OPERATION_ERR_TIMEOUT,Cd=Se.ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN,Zk=Df.CHANNEL_MESSAGE_ERR_FAILURE,ep=Df.CHANNEL_MESSAGE_ERR_TIMEOUT,rw=Df.CHANNEL_MESSAGE_ERR_TOO_OFTEN,fp=Df.CHANNEL_MESSAGE_ERR_INVALID_MESSAGE,rI=Df.CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL,gp=Df.CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN,sI=bp.CREATE_CHANNEL_ERR_INVALID_ARGUMENT,sw=cp.CREATE_INSTANCE_ERR_INVALID_ARGUMENT,tw=Ve.GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT,uw=Ve.GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT,tI=Ve.GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT,uI=Ve.GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN,vI=Ef.GET_MEMBERS_ERR_FAILURE,wI=Ef.GET_MEMBERS_ERR_REJECTED,xI=Ef.GET_MEMBERS_ERR_NOT_IN_CHANNEL,yI=Ef.GET_MEMBERS_ERR_USER_NOT_LOGGED_IN,ve=rg.INVITATION_API_CALL_ERR_INVALID_ARGUMENT,zI=rg.INVITATION_API_CALL_ERR_NOT_STARTED,$k=rg.INVITATION_API_CALL_ERR_ALREADY_END,vw=rg.INVITATION_API_CALL_ERR_ALREADY_ACCEPT,AI=rg.INVITATION_API_CALL_ERR_ALREADY_SENT,ww=Zd.JOIN_CHANNEL_ERR_FAILURE,BI=Zd.JOIN_CHANNEL_ERR_INVALID_ARGUMENT,xw=Zd.JOIN_CHANNEL_TIMEOUT,yw=Zd.JOIN_CHANNEL_ERR_EXCEED_LIMIT,zw=Zd.JOIN_CHANNEL_ERR_ALREADY_JOINED,Aw=Zd.JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN,Bw=Zd.JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID,Cw=sg.LEAVE_CHANNEL_ERR_FAILURE,Dw=sg.LEAVE_CHANNEL_ERR_REJECTED,CI=sg.LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL,DI=sg.LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN,EI=sg.LEAVE_CHANNEL_ERR_KICKED,Ew=zd.LOGIN_ERR_UNKNOWN,ij=zd.LOGIN_ERR_REJECTED,al=zd.LOGIN_ERR_INVALID_ARGUMENT,Fw=zd.LOGIN_ERR_INVALID_APP_ID,Gw=zd.LOGIN_ERR_INVALID_TOKEN,bl=zd.LOGIN_ERR_TOKEN_EXPIRED,FI=zd.LOGIN_ERR_ALREADY_LOGIN,GI=zd.LOGIN_ERR_TIMEOUT,HI=zd.LOGIN_ERR_TOO_OFTEN,Hw=dp.LOGOUT_ERR_USER_NOT_LOGGED_IN,Iw=Te.PEER_MESSAGE_ERR_FAILURE,hp=Te.PEER_MESSAGE_ERR_TIMEOUT,Jw=Te.PEER_MESSAGE_ERR_TOO_OFTEN,Kw=Te.PEER_MESSAGE_ERR_INVALID_USERID,si=Te.PEER_MESSAGE_ERR_INVALID_MESSAGE,ip=Te.PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN,Lw=tg.QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT,II=tg.QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT,JI=tg.QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN,jp=Ue.RENEW_TOKEN_ERR_FAILURE,KI=Ue.RENEW_TOKEN_ERR_INVALID_ARGUMENT,LI=Ue.RENEW_TOKEN_ERR_TOKEN_EXPIRED,MI=Ue.RENEW_TOKEN_ERR_INVALID_TOKEN,Mw=Ue.RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN,Nw=We.PEER_SUBSCRIPTION_STATUS_ERR_FAILURE,jj=We.PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT,NI=We.PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT,Ow=We.PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW,kp=We.PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN,bd=Uc.METADATA_OPERATION_ERR_OK,He=Uc.METADATA_OPERATION_ERR_FAILURE,Mb=Uc.METADATA_OPERATION_ERR_INVALID_ARGUMENT,Om=Uc.METADATA_OPERATION_ERR_SIZE_OVERFLOW,oC=Uc.METADATA_OPERATION_ERR_DUPLICATE_KEY,Vc=Uc.METADATA_OPERATION_ERR_TOO_OFTEN,cd=Uc.METADATA_OPERATION_ERR_TIMEOUT,of=Uc.METADATA_OPERATION_ERR_OUTDATE_REVISION,oc=Uc.METADATA_OPERATION_ERR_USER_NOT_LOGGED_IN,kj=Uc.METADATA_OPERATION_ERR_NOT_IN_CHANNEL,Pw=$d.METADATA_SUBSCRIPTION_ERR_OK,lp=$d.METADATA_SUBSCRIPTION_ERR_FAILURE,cl=$d.METADATA_SUBSCRIPTION_ERR_TIMEOUT,dl=$d.METADATA_SUBSCRIPTION_ERR_INVALID_ARGUMENT,OI=$d.METADATA_SUBSCRIPTION_ERR_OVERFLOW,PI=$d.METADATA_SUBSCRIPTION_USER_NOT_SUBSCRIBED,QI=function(r,t){var o;return Po(r,function(l,p,_){return!(o=t(l,p,_))}),!!o},el=function(r,t,o){if(!Kc(o))return!1;var l=Ia(t);return!!("number"==l?$f(o)&&Eo(t,o.length):"string"==l&&t in o)&&$i(o[t],r)},mp=function(r,t,o){var l=lc(r)?Zv:QI;return o&&el(r,t,o)&&(t=void 0),l(r,Ch(t))},RI=function(r,t){var o=-1,l=$f(r)?Array(r.length):[];return Po(r,function(p,_,R){l[++o]=t(p,_,R)}),l},SI=function(r,t){var o=r.length;for(r.sort(t);o--;)r[o]=r[o].value;return r},TI=function(r,t,o){t=t.length?Rg(t,function(p){return lc(p)?function(_){return Uk(_,1===p.length?p[0]:p)}:p}):[Vk];var l=-1;return t=Rg(t,Rk(Ch)),r=RI(r,function(p,_,R){return{criteria:Rg(t,function(M){return M(p)}),index:++l,value:p}}),SI(r,function(p,_){e:{for(var R=-1,M=p.criteria,P=_.criteria,F=M.length,G=o.length;++R<F;){t:{var z=M[R],we=P[R];if(z!==we){var xe=void 0!==z,_n=null===z,fa=z==z,da=Sg(z),Ta=void 0!==we,Da=null===we,Ja=we==we,rl=Sg(we);if(!Da&&!rl&&!da&&z>we||da&&Ta&&Ja&&!Da&&!rl||_n&&Ta&&Ja||!xe&&Ja||!fa){z=1;break t}if(!_n&&!da&&!rl&&z<we||rl&&xe&&fa&&!_n&&!da||Da&&xe&&fa||!Ta&&fa||!Ja){z=-1;break t}}z=0}if(z){p=R>=G?z:z*("desc"==o[R]?-1:1);break e}}p=p.index-_.index}return p})},Qw=function(r,t){return Xv(Wv(r,t,Vk),r+"")},Rw=Qw(function(r,t){if(null==r)return[];var o=t.length;return 1<o&&el(r,t[0],t[1])?t=[]:2<o&&el(t[0],t[1],t[2])&&(t=[t[0]]),TI(r,mm(t,1),[])}),Sw=function(r){if(r.__esModule)return r;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(r).forEach(function(o){var l=Object.getOwnPropertyDescriptor(r,o);Object.defineProperty(t,o,l.get?l:{enumerable:!0,get:function(){return r[o]}})}),t}(WH),Tw=kc(function(r,t){Object.defineProperty(t,"__esModule",{value:!0});var o=[],l=function(p,_){return new WebSocket(p,_)};t.normalClosureMessage="Normal closure",t.default=function(p,_){var R=(_=void 0===_?{protocols:o,makeWebSocket:l}:_).protocols,M=void 0===R?o:R,P=void 0===(_=_.makeWebSocket)?l:_;return new Sw.Observable(function(F){var G,z=new Sw.Subject,we=P(p,M),xe=!1,_n=!1,fa=function(da){if(G)throw xe=!0,da=Error("Web socket message factory function called more than once"),F.error(da),da;return G=da.subscribe(function(Ta){we.send(Ta)}),z};return we.onopen=function(){_n?(xe=!0,we.close()):F.next(fa)},we.onmessage=function(da){z.next(da.data)},we.onerror=function(da){xe=!0,F.error(Error(da.message))},we.onclose=function(da){xe||(xe=!0,_n?(F.complete(),z.complete()):F.error(Error(1e3===da.code?t.normalClosureMessage:da.reason)))},function(){_n=!0,G&&G.unsubscribe(),xe||(xe=!0,we.close())}})}});!function(r){r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")}(Tw);var Dm=function(r,t,o){(void 0===o||$i(r[t],o))&&(void 0!==o||t in r)||bj(r,t,o)},Cm=function(r,t){if(("constructor"!==t||"function"!=typeof r[t])&&"__proto__"!=t)return r[t]},UI=function(r){return Qw(function(t,o){var l=-1,p=o.length,_=1<p?o[p-1]:void 0,R=2<p?o[2]:void 0;for(_=3<r.length&&"function"==typeof _?(p--,_):void 0,R&&el(o[0],o[1],R)&&(_=3>p?void 0:_,p=1),t=Object(t);++l<p;)(R=o[l])&&r(t,R,l,_);return t})}(function(r,t,o,l){as(r,t,o,l)}),VI=Math.floor,WI=Math.random,Uw=function(r,t){return r+VI(WI()*(t-r+1))},Vw=function(r){var t=r.length;return t?r[Uw(0,t-1)]:void 0},XI=function(r,t){return Rg(t,function(o){return r[o]})},Vm=function(r){return null==r?[]:XI(r,Wf(r))},YI=function(r){return Vw(Vm(r))},Es=function(r){return(lc(r)?Vw:YI)(r)},es=[],fs=function(r,t){return new WebSocket(r,t)};cb&&("g"!=/./g.flags||Sd)&&$b.f(RegExp.prototype,"flags",{configurable:!0,get:hk});var ZI=Math.floor;wa({target:"Number",stat:!0},{isInteger:function(r){return!fb(r)&&isFinite(r)&&ZI(r)===r}}),tu("from",On,Nn);var $I=function(r,t){for(var o=Array(arguments.length-1),l=0,p=2,_=!0;p<arguments.length;)o[l++]=arguments[p++];return new Promise(function(R,M){o[l]=function(P){if(_)if(_=!1,P)M(P);else{for(var F=Array(arguments.length-1),G=0;G<F.length;)F[G++]=arguments[G];R.apply(null,F)}};try{r.apply(t||null,o)}catch(P){_&&(_=!1,M(P))}})},aJ=kc(function(r,t){t.length=function(p){var _=p.length;if(!_)return 0;for(var R=0;1<--_%4&&"="===p.charAt(_);)++R;return Math.ceil(3*p.length)/4-R};var o=Array(64),l=Array(123);for(r=0;64>r;)l[o[r]=26>r?r+65:52>r?r+71:62>r?r-4:r-59|43]=r++;t.encode=function(p,_,R){for(var M,P=null,F=[],G=0,z=0;_<R;){var we=p[_++];switch(z){case 0:F[G++]=o[we>>2],M=(3&we)<<4,z=1;break;case 1:F[G++]=o[M|we>>4],M=(15&we)<<2,z=2;break;case 2:F[G++]=o[M|we>>6],F[G++]=o[63&we],z=0}8191<G&&((P||(P=[])).push(String.fromCharCode.apply(String,F)),G=0)}return z&&(F[G++]=o[M],F[G++]=61,1===z&&(F[G++]=61)),P?(G&&P.push(String.fromCharCode.apply(String,F.slice(0,G))),P.join("")):String.fromCharCode.apply(String,F.slice(0,G))},t.decode=function(p,_,R){for(var M,P=R,F=0,G=0;G<p.length;){var z=p.charCodeAt(G++);if(61===z&&1<F)break;if(void 0===(z=l[z]))throw Error("invalid encoding");switch(F){case 0:M=z,F=1;break;case 1:_[R++]=M<<2|(48&z)>>4,M=z,F=2;break;case 2:_[R++]=(15&M)<<4|(60&z)>>2,M=z,F=3;break;case 3:_[R++]=(3&M)<<6|z,F=0}}if(1===F)throw Error("invalid encoding");return R-P},t.test=function(p){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(p)}});Oj.prototype.on=function(r,t,o){return(this._listeners[r]||(this._listeners[r]=[])).push({fn:t,ctx:o||this}),this},Oj.prototype.off=function(r,t){if(void 0===r)this._listeners={};else if(void 0===t)this._listeners[r]=[];else{r=this._listeners[r];for(var o=0;o<r.length;)r[o].fn===t?r.splice(o,1):++o}return this},Oj.prototype.emit=function(r){var t=this._listeners[r];if(t){for(var o=[],l=1;l<arguments.length;)o.push(arguments[l++]);for(l=0;l<t.length;)t[l].fn.apply(t[l++].ctx,o)}return this};var bJ=gs(gs),cJ=function(d){try{var b=eval("quire".replace(/^/,"re"))(d);if(b&&(b.length||Object.keys(b).length))return b}catch(r){}return null},dJ=kc(function(r,t){t.length=function(o){for(var l,p=0,_=0;_<o.length;++_)128>(l=o.charCodeAt(_))?p+=1:2048>l?p+=2:55296==(64512&l)&&56320==(64512&o.charCodeAt(_+1))?(++_,p+=4):p+=3;return p},t.read=function(o,l,p){if(1>p-l)return"";for(var _,R=null,M=[],P=0;l<p;)128>(_=o[l++])?M[P++]=_:191<_&&224>_?M[P++]=(31&_)<<6|63&o[l++]:239<_&&365>_?(_=((7&_)<<18|(63&o[l++])<<12|(63&o[l++])<<6|63&o[l++])-65536,M[P++]=55296+(_>>10),M[P++]=56320+(1023&_)):M[P++]=(15&_)<<12|(63&o[l++])<<6|63&o[l++],8191<P&&((R||(R=[])).push(String.fromCharCode.apply(String,M)),P=0);return R?(P&&R.push(String.fromCharCode.apply(String,M.slice(0,P))),R.join("")):String.fromCharCode.apply(String,M.slice(0,P))},t.write=function(o,l,p){for(var _,R,M=p,P=0;P<o.length;++P)128>(_=o.charCodeAt(P))?l[p++]=_:(2048>_?l[p++]=_>>6|192:(55296==(64512&_)&&56320==(64512&(R=o.charCodeAt(P+1)))?(++P,l[p++]=(_=65536+((1023&_)<<10)+(1023&R))>>18|240,l[p++]=_>>12&63|128):l[p++]=_>>12|224,l[p++]=_>>6&63|128),l[p++]=63&_|128);return p-M}}),eJ=function(r,t,o){var l=o||8192,p=l>>>1,_=null,R=l;return function(M){return 1>M||M>p?r(M):(R+M>l&&(_=r(l),R=0),M=t.call(_,R,R+=M),7&R&&(R=1+(7|R)),M)}},ug=mc.zero=new mc(0,0);ug.toNumber=function(){return 0},ug.zzEncode=ug.zzDecode=function(){return this},ug.length=function(){return 1};var fJ=mc.zeroHash="\0\0\0\0\0\0\0\0";mc.fromNumber=function(r){if(0===r)return ug;var t=0>r;t&&(r=-r);var o=r>>>0;return r=(r-o)/4294967296>>>0,t&&(r=~r>>>0,o=~o>>>0,4294967295<++o&&(o=0,4294967295<++r&&(r=0))),new mc(o,r)},mc.from=function(r){if("number"==typeof r)return mc.fromNumber(r);if(Ra.isString(r)){if(!Ra.Long)return mc.fromNumber(parseInt(r,10));r=Ra.Long.fromString(r)}return r.low||r.high?new mc(r.low>>>0,r.high>>>0):ug},mc.prototype.toNumber=function(r){if(!r&&this.hi>>>31){var t=~this.hi>>>0;return(r=1+~this.lo>>>0)||(t=t+1>>>0),-(r+4294967296*t)}return this.lo+4294967296*this.hi},mc.prototype.toLong=function(r){return Ra.Long?new Ra.Long(0|this.lo,0|this.hi,!!r):{low:0|this.lo,high:0|this.hi,unsigned:!!r}};var Ff=String.prototype.charCodeAt;mc.fromHash=function(r){return r===fJ?ug:new mc((Ff.call(r,0)|Ff.call(r,1)<<8|Ff.call(r,2)<<16|Ff.call(r,3)<<24)>>>0,(Ff.call(r,4)|Ff.call(r,5)<<8|Ff.call(r,6)<<16|Ff.call(r,7)<<24)>>>0)},mc.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},mc.prototype.zzEncode=function(){var r=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^r)>>>0,this.lo=(this.lo<<1^r)>>>0,this},mc.prototype.zzDecode=function(){var r=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^r)>>>0,this.hi=(this.hi>>>1^r)>>>0,this},mc.prototype.length=function(){var r=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,o=this.hi>>>24;return 0===o?0===t?16384>r?128>r?1:2:2097152>r?3:4:16384>t?128>t?5:6:2097152>t?7:8:128>o?9:10};var Ra=kc(function(r,t){function o(p,_,R){for(var M=Object.keys(_),P=0;P<M.length;++P)void 0!==p[M[P]]&&R||(p[M[P]]=_[M[P]]);return p}function l(p){function _(R,M){if(!(this instanceof _))return new _(R,M);Object.defineProperty(this,"message",{get:function(){return R}}),Error.captureStackTrace?Error.captureStackTrace(this,_):Object.defineProperty(this,"stack",{value:Error().stack||""}),M&&o(this,M)}return(_.prototype=Object.create(Error.prototype)).constructor=_,Object.defineProperty(_.prototype,"name",{get:function(){return p}}),_.prototype.toString=function(){return this.name+": "+this.message},_}t.asPromise=$I,t.base64=aJ,t.EventEmitter=Oj,t.float=bJ,t.inquire=cJ,t.utf8=dJ,t.pool=eJ,t.LongBits=mc,t.isNode=!!(void 0!==qb&&qb&&qb.process&&qb.process.versions&&qb.process.versions.node),t.global=t.isNode&&qb||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||qb,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(p){return"number"==typeof p&&isFinite(p)&&Math.floor(p)===p},t.isString=function(p){return"string"==typeof p||p instanceof String},t.isObject=function(p){return p&&"object"===Ia(p)},t.isset=t.isSet=function(p,_){var R=p[_];return!(null==R||!p.hasOwnProperty(_))&&("object"!==Ia(R)||0<(Array.isArray(R)?R.length:Object.keys(R).length))},t.Buffer=function(){try{var p=t.inquire("buffer").Buffer;return p.prototype.utf8Write?p:null}catch(_){return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(p){return"number"==typeof p?t.Buffer?t._Buffer_allocUnsafe(p):new t.Array(p):t.Buffer?t._Buffer_from(p):"undefined"==typeof Uint8Array?p:new Uint8Array(p)},t.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(p){return p?t.LongBits.from(p).toHash():t.LongBits.zeroHash},t.longFromHash=function(p,_){return p=t.LongBits.fromHash(p),t.Long?t.Long.fromBits(p.lo,p.hi,_):p.toNumber(!!_)},t.merge=o,t.lcFirst=function(p){return p.charAt(0).toLowerCase()+p.substring(1)},t.newError=l,t.ProtocolError=l("ProtocolError"),t.oneOfGetter=function(p){for(var _={},R=0;R<p.length;++R)_[p[R]]=1;return function(){for(var M=Object.keys(this),P=M.length-1;-1<P;--P)if(1===_[M[P]]&&null!=this[M[P]])return M[P]}},t.oneOfSetter=function(p){return function(_){for(var R=0;R<p.length;++R)p[R]!==_&&delete this[p[R]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var p=t.Buffer;p?(t._Buffer_from=p.from!==Uint8Array.from&&p.from||function(_,R){return new p(_,R)},t._Buffer_allocUnsafe=p.allocUnsafe||function(_){return new p(_)}):t._Buffer_from=t._Buffer_allocUnsafe=null}}),Lm=ib,np,fl=Ra.LongBits,Ww=Ra.base64,Xw=Ra.utf8,Yw=function(){return Ra.Buffer?function(){return(ib.create=function(){return new np})()}:function(){return new ib}};ib.create=Yw(),ib.alloc=function(r){return new Ra.Array(r)},Ra.Array!==Array&&(ib.alloc=Ra.pool(ib.alloc,Ra.Array.prototype.subarray)),ib.prototype._push=function(r,t,o){return this.tail=this.tail.next=new pi(r,t,o),this.len+=t,this},Im.prototype=Object.create(pi.prototype),Im.prototype.fn=function(r,t,o){for(;127<r;)t[o++]=127&r|128,r>>>=7;t[o]=r},ib.prototype.uint32=function(r){return this.len+=(this.tail=this.tail.next=new Im(128>(r>>>=0)?1:16384>r?2:2097152>r?3:268435456>r?4:5,r)).len,this},ib.prototype.int32=function(r){return 0>r?this._push(Jm,10,fl.fromNumber(r)):this.uint32(r)},ib.prototype.sint32=function(r){return this.uint32((r<<1^r>>31)>>>0)},ib.prototype.uint64=function(r){return r=fl.from(r),this._push(Jm,r.length(),r)},ib.prototype.int64=ib.prototype.uint64,ib.prototype.sint64=function(r){return r=fl.from(r).zzEncode(),this._push(Jm,r.length(),r)},ib.prototype.bool=function(r){return this._push(Hm,1,r?1:0)},ib.prototype.fixed32=function(r){return this._push(Km,4,r>>>0)},ib.prototype.sfixed32=ib.prototype.fixed32,ib.prototype.fixed64=function(r){return r=fl.from(r),this._push(Km,4,r.lo)._push(Km,4,r.hi)},ib.prototype.sfixed64=ib.prototype.fixed64,ib.prototype.float=function(r){return this._push(Ra.float.writeFloatLE,4,r)},ib.prototype.double=function(r){return this._push(Ra.float.writeDoubleLE,8,r)};var gJ=Ra.Array.prototype.set?function(r,t,o){t.set(r,o)}:function(r,t,o){for(var l=0;l<r.length;++l)t[o+l]=r[l]};ib.prototype.bytes=function(r){var t=r.length>>>0;if(!t)return this._push(Hm,1,0);if(Ra.isString(r)){var o=ib.alloc(t=Ww.length(r));Ww.decode(r,o,0),r=o}return this.uint32(t)._push(gJ,t,r)},ib.prototype.string=function(r){var t=Xw.length(r);return t?this.uint32(t)._push(Xw.write,t,r):this._push(Hm,1,0)},ib.prototype.fork=function(){return this.states=new mC(this),this.head=this.tail=new pi(Gm,0,0),this.len=0,this},ib.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new pi(Gm,0,0),this.len=0),this},ib.prototype.ldelim=function(){var r=this.head,t=this.tail,o=this.len;return this.reset().uint32(o),o&&(this.tail.next=r.next,this.tail=t,this.len+=o),this},ib.prototype.finish=function(){for(var r=this.head.next,t=this.constructor.alloc(this.len),o=0;r;)r.fn(r.val,t,o),o+=r.len,r=r.next;return t},ib._configure=function(r){np=r,ib.create=Yw(),np._configure()},(ie.prototype=Object.create(Lm.prototype)).constructor=ie,ie._configure=function(){ie.alloc=Ra._Buffer_allocUnsafe,ie.writeBytesBuffer=Ra.Buffer&&Ra.Buffer.prototype instanceof Uint8Array&&"set"===Ra.Buffer.prototype.set.name?function(r,t,o){t.set(r,o)}:function(r,t,o){if(r.copy)r.copy(t,o,0,r.length);else for(var l=0;l<r.length;)t[o++]=r[l++]}},ie.prototype.bytes=function(r){Ra.isString(r)&&(r=Ra._Buffer_from(r,"base64"));var t=r.length>>>0;return this.uint32(t),t&&this._push(ie.writeBytesBuffer,t,r),this},ie.prototype.string=function(r){var t=Ra.Buffer.byteLength(r);return this.uint32(t),t&&this._push(nC,t,r),this},ie._configure();var Nm=Yb,op,ls=Ra.LongBits,hJ=Ra.utf8,Zw="undefined"!=typeof Uint8Array?function(r){if(r instanceof Uint8Array||Array.isArray(r))return new Yb(r);throw Error("illegal buffer")}:function(r){if(Array.isArray(r))return new Yb(r);throw Error("illegal buffer")},$w=function(){return Ra.Buffer?function(r){return(Yb.create=function(t){return Ra.Buffer.isBuffer(t)?new op(t):Zw(t)})(r)}:Zw};Yb.create=$w(),Yb.prototype._slice=Ra.Array.prototype.subarray||Ra.Array.prototype.slice,Yb.prototype.uint32=function(){var r=4294967295;return function(){if(r=(127&this.buf[this.pos])>>>0,128>this.buf[this.pos++]||(r=(r|(127&this.buf[this.pos])<<7)>>>0,128>this.buf[this.pos++])||(r=(r|(127&this.buf[this.pos])<<14)>>>0,128>this.buf[this.pos++])||(r=(r|(127&this.buf[this.pos])<<21)>>>0,128>this.buf[this.pos++])||(r=(r|(15&this.buf[this.pos])<<28)>>>0,128>this.buf[this.pos++]))return r;if((this.pos+=5)>this.len)throw this.pos=this.len,Od(this,10);return r}}(),Yb.prototype.int32=function(){return 0|this.uint32()},Yb.prototype.sint32=function(){var r=this.uint32();return r>>>1^-(1&r)|0},Yb.prototype.bool=function(){return 0!==this.uint32()},Yb.prototype.fixed32=function(){if(this.pos+4>this.len)throw Od(this,4);return Pj(this.buf,this.pos+=4)},Yb.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Od(this,4);return 0|Pj(this.buf,this.pos+=4)},Yb.prototype.float=function(){if(this.pos+4>this.len)throw Od(this,4);var r=Ra.float.readFloatLE(this.buf,this.pos);return this.pos+=4,r},Yb.prototype.double=function(){if(this.pos+8>this.len)throw Od(this,4);var r=Ra.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,r},Yb.prototype.bytes=function(){var r=this.uint32(),t=this.pos,o=this.pos+r;if(o>this.len)throw Od(this,r);return this.pos+=r,Array.isArray(this.buf)?this.buf.slice(t,o):t===o?new this.buf.constructor(0):this._slice.call(this.buf,t,o)},Yb.prototype.string=function(){var r=this.bytes();return hJ.read(r,0,r.length)},Yb.prototype.skip=function(r){if("number"==typeof r){if(this.pos+r>this.len)throw Od(this,r);this.pos+=r}else do{if(this.pos>=this.len)throw Od(this)}while(128&this.buf[this.pos++]);return this},Yb.prototype.skipType=function(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(r=7&this.uint32());)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+r+" at offset "+this.pos)}return this},Yb._configure=function(r){op=r,Yb.create=$w(),op._configure();var t=Ra.Long?"toLong":"toNumber";Ra.merge(Yb.prototype,{int64:function(){return Mm.call(this)[t](!1)},uint64:function(){return Mm.call(this)[t](!0)},sint64:function(){return Mm.call(this).zzDecode()[t](!1)},fixed64:function(){return ms.call(this)[t](!0)},sfixed64:function(){return ms.call(this)[t](!1)}})},(ag.prototype=Object.create(Nm.prototype)).constructor=ag,ag._configure=function(){Ra.Buffer&&(ag.prototype._slice=Ra.Buffer.prototype.slice)},ag.prototype.string=function(){var r=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+r,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+r,this.len))},ag._configure(),(qi.prototype=Object.create(Ra.EventEmitter.prototype)).constructor=qi,qi.prototype.rpcCall=function r(t,o,l,p,_){if(!p)throw TypeError("request must be specified");var R=this;if(!_)return Ra.asPromise(r,R,t,o,l,p);if(R.rpcImpl)try{return R.rpcImpl(t,o[R.requestDelimited?"encodeDelimited":"encode"](p).finish(),function(M,P){if(M)return R.emit("error",M,t),_(M);if(null!==P){if(!(P instanceof l))try{P=l[R.responseDelimited?"decodeDelimited":"decode"](P)}catch(F){return R.emit("error",F,t),_(F)}return R.emit("data",P,t),_(null,P)}R.end(!0)})}catch(M){R.emit("error",M,t),setTimeout(function(){_(M)},0)}else setTimeout(function(){_(Error("already ended"))},0)},qi.prototype.end=function(r){return this.rpcImpl&&(r||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};var iJ=kc(function(r,t){t.Service=qi}),jJ={},ae=kc(function(r,t){function o(){l.util._configure(),l.Writer._configure(l.BufferWriter),l.Reader._configure(l.BufferReader)}var l=t;l.build="minimal",l.Writer=Lm,l.BufferWriter=ie,l.Reader=Nm,l.BufferReader=ag,l.util=Ra,l.rpc=iJ,l.roots=jJ,l.configure=o,o()});ae.util.Long=D,ae.configure();var T=ae.Reader,ta=ae.Writer,I=ae.util,Q=ae.roots.default||(ae.roots.default={}),kJ=Q.URI=function(){var r={},t=Object.create(r);return t[r[0]="Unknown"]=0,t[r[1]="PingUri"]=1,t[r[2]="PongUri"]=2,t[r[11]="UserJoinUri"]=11,t[r[12]="UserRespUri"]=12,t[r[15]="UserTicketNearlyExpireUri"]=15,t[r[16]="UserRenewTokenReqUri"]=16,t[r[17]="UserRenewTokenRespUri"]=17,t[r[21]="UserQuitUri"]=21,t[r[22]="UserDropUri"]=22,t[r[31]="GroupEnterUri"]=31,t[r[32]="GroupLeaveUri"]=32,t[r[33]="GroupReplyUri"]=33,t[r[35]="GroupDropUri"]=35,t[r[36]="GroupEnterNoticeUri"]=36,t[r[37]="GroupLeaveNoticeUri"]=37,t[r[38]="GroupEventNoticeUri"]=38,t[r[39]="GroupCountNoticeUri"]=39,t[r[41]="UserStatusListUri"]=41,t[r[42]="UserStatusResultUri"]=42,t[r[51]="GroupStatusListUri"]=51,t[r[52]="GroupStatusResultUri"]=52,t[r[55]="GroupAllUsersListUri"]=55,t[r[56]="GroupAllUsersResultUri"]=56,t[r[100]="MessageUri"]=100,t[r[101]="AckUri"]=101,t[r[201]="UserJoinNoticeUri"]=201,t[r[202]="UserQuitNoticeUri"]=202,t[r[203]="UserWaitNoticeUri"]=203,t[r[301]="UserAttributeGetUri"]=301,t[r[302]="UserAttributeRetUri"]=302,t[r[303]="UserAttributeSetUri"]=303,t[r[304]="UserAttributeModUri"]=304,t[r[305]="UserAttributeDelUri"]=305,t[r[307]="UserAttributeRspUri"]=307,t[r[308]="UserAttributeErrUri"]=308,t[r[311]="UserAttributeKeysGetUri"]=311,t[r[312]="UserAttributeKeysRetUri"]=312,t[r[351]="GroupAttributeGetUri"]=351,t[r[352]="GroupAttributeRetUri"]=352,t[r[353]="GroupAttributeSetUri"]=353,t[r[354]="GroupAttributeModUri"]=354,t[r[355]="GroupAttributeDelUri"]=355,t[r[356]="GroupAttributeAltUri"]=356,t[r[357]="GroupAttributeRspUri"]=357,t[r[358]="GroupAttributeErrUri"]=358,t[r[361]="GroupAttributeKeysGetUri"]=361,t[r[362]="GroupAttributeKeysRetUri"]=362,t[r[401]="SubscribeUserStatusUri"]=401,t[r[402]="UnsubscribeUserStatusUri"]=402,t[r[499]="SubscribeResponseUri"]=499,t[r[601]="StateSubscribeUri"]=601,t[r[602]="StateUpdateUri"]=602,t[r[603]="StateSubscribeResultUri"]=603,t[r[604]="StateUnsubscribeUri"]=604,t[r[605]="StateSetUri"]=605,t[r[606]="StateModifyUri"]=606,t[r[607]="StateRequestResultUri"]=607,t[r[608]="StateGetUri"]=608,t[r[609]="StateGetResultUri"]=609,t[r[610]="StateLockAcquireUri"]=610,t[r[611]="StateLockReleaseUri"]=611,t[r[612]="StateLockAcquireResultUri"]=612,t[r[613]="StateLockUpdateUri"]=613,t[r[614]="StateLockReleaseResultUri"]=614,t[r[615]="StateLockDisableUri"]=615,t[r[616]="StateLockDisableResultUri"]=616,t}(),gl=Q.Wrapper=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.uri=0,r.prototype.data=I.newBuffer([]),r.encode=function(t,o){return o||(o=ta.create()),null!=t.uri&&Object.hasOwnProperty.call(t,"uri")&&o.uint32(8).int32(t.uri),null!=t.data&&Object.hasOwnProperty.call(t,"data")&&o.uint32(18).bytes(t.data),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.Wrapper;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.uri=t.int32();break;case 2:l.data=t.bytes();break;default:t.skipType(7&p)}}return l},r}(),lJ=Q.Ping=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.ms=I.Long?I.Long.fromBits(0,0,!0):0,r.encode=function(t,o){return o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.ms&&Object.hasOwnProperty.call(t,"ms")&&o.uint32(16).uint64(t.ms),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.Ping;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.ms=t.uint64();break;default:t.skipType(7&p)}}return l},r}(),mJ=Q.Pong=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.ms=I.Long?I.Long.fromBits(0,0,!0):0,r.encode=function(t,o){return o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.ms&&Object.hasOwnProperty.call(t,"ms")&&o.uint32(16).uint64(t.ms),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.Pong;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.ms=t.uint64();break;default:t.skipType(7&p)}}return l},r}(),nJ=Q.UserJoin=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.opt=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.instance=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.account="",r.prototype.ticket="",r.encode=function(t,o){return o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.opt&&Object.hasOwnProperty.call(t,"opt")&&o.uint32(16).uint64(t.opt),null!=t.instance&&Object.hasOwnProperty.call(t,"instance")&&o.uint32(24).uint64(t.instance),null!=t.account&&Object.hasOwnProperty.call(t,"account")&&o.uint32(34).string(t.account),null!=t.ticket&&Object.hasOwnProperty.call(t,"ticket")&&o.uint32(42).string(t.ticket),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.UserJoin;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.opt=t.uint64();break;case 3:l.instance=t.uint64();break;case 4:l.account=t.string();break;case 5:l.ticket=t.string();break;default:t.skipType(7&p)}}return l},r}(),oJ=Q.UserResp=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.account="",r.prototype.code=0,r.encode=function(t,o){return o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.account&&Object.hasOwnProperty.call(t,"account")&&o.uint32(18).string(t.account),null!=t.code&&Object.hasOwnProperty.call(t,"code")&&o.uint32(24).uint32(t.code),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.UserResp;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.account=t.string();break;case 3:l.code=t.uint32();break;default:t.skipType(7&p)}}return l},r}(),pJ=Q.UserQuit=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.encode=function(t,o){return o||(o=ta.create()),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.UserQuit;t.pos<o;){var p=t.uint32();t.skipType(7&p)}return l},r}(),qJ=Q.UserDrop=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.code=0,r.encode=function(t,o){return o||(o=ta.create()),null!=t.code&&Object.hasOwnProperty.call(t,"code")&&o.uint32(8).uint32(t.code),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.UserDrop;t.pos<o;){var p=t.uint32();p>>>3==1?l.code=t.uint32():t.skipType(7&p)}return l},r}(),rJ=Q.UserTicketNearlyExpire=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.expireTs=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.ticket="",r.encode=function(t,o){return o||(o=ta.create()),null!=t.expireTs&&Object.hasOwnProperty.call(t,"expireTs")&&o.uint32(8).uint64(t.expireTs),null!=t.ticket&&Object.hasOwnProperty.call(t,"ticket")&&o.uint32(18).string(t.ticket),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.UserTicketNearlyExpire;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.expireTs=t.uint64();break;case 2:l.ticket=t.string();break;default:t.skipType(7&p)}}return l},r}(),sJ=Q.UserRenewTokenReq=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.instance=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.account="",r.prototype.ticket="",r.encode=function(t,o){return o||(o=ta.create()),null!=t.instance&&Object.hasOwnProperty.call(t,"instance")&&o.uint32(8).uint64(t.instance),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(16).uint64(t.seq),null!=t.account&&Object.hasOwnProperty.call(t,"account")&&o.uint32(26).string(t.account),null!=t.ticket&&Object.hasOwnProperty.call(t,"ticket")&&o.uint32(34).string(t.ticket),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.UserRenewTokenReq;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.instance=t.uint64();break;case 2:l.seq=t.uint64();break;case 3:l.account=t.string();break;case 4:l.ticket=t.string();break;default:t.skipType(7&p)}}return l},r}(),tJ=Q.UserRenewTokenResp=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.code=0,r.encode=function(t,o){return o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.code&&Object.hasOwnProperty.call(t,"code")&&o.uint32(16).uint32(t.code),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.UserRenewTokenResp;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.code=t.uint32();break;default:t.skipType(7&p)}}return l},r}(),uJ=Q.GroupEnter=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.account="",r.encode=function(t,o){return o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.account&&Object.hasOwnProperty.call(t,"account")&&o.uint32(18).string(t.account),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.GroupEnter;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.account=t.string();break;default:t.skipType(7&p)}}return l},r}(),vJ=Q.GroupLeave=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.account="",r.encode=function(t,o){return o||(o=ta.create()),null!=t.account&&Object.hasOwnProperty.call(t,"account")&&o.uint32(10).string(t.account),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.GroupLeave;t.pos<o;){var p=t.uint32();p>>>3==1?l.account=t.string():t.skipType(7&p)}return l},r}(),wJ=Q.GroupReply=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.account="",r.prototype.code=0,r.encode=function(t,o){return o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.account&&Object.hasOwnProperty.call(t,"account")&&o.uint32(18).string(t.account),null!=t.code&&Object.hasOwnProperty.call(t,"code")&&o.uint32(24).uint32(t.code),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.GroupReply;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.account=t.string();break;case 3:l.code=t.uint32();break;default:t.skipType(7&p)}}return l},r}(),ax=Q.GroupLeaveNotice=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.user="",r.prototype.group="",r.prototype.instance=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.size=0,r.encode=function(t,o){return o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.user&&Object.hasOwnProperty.call(t,"user")&&o.uint32(18).string(t.user),null!=t.group&&Object.hasOwnProperty.call(t,"group")&&o.uint32(26).string(t.group),null!=t.instance&&Object.hasOwnProperty.call(t,"instance")&&o.uint32(32).uint64(t.instance),null!=t.size&&Object.hasOwnProperty.call(t,"size")&&o.uint32(40).uint32(t.size),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.GroupLeaveNotice;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.user=t.string();break;case 3:l.group=t.string();break;case 4:l.instance=t.uint64();break;case 5:l.size=t.uint32();break;default:t.skipType(7&p)}}return l},r}(),bx=Q.GroupEnterNotice=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.user="",r.prototype.group="",r.prototype.instance=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.size=0,r.encode=function(t,o){return o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.user&&Object.hasOwnProperty.call(t,"user")&&o.uint32(18).string(t.user),null!=t.group&&Object.hasOwnProperty.call(t,"group")&&o.uint32(26).string(t.group),null!=t.instance&&Object.hasOwnProperty.call(t,"instance")&&o.uint32(32).uint64(t.instance),null!=t.size&&Object.hasOwnProperty.call(t,"size")&&o.uint32(40).uint32(t.size),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.GroupEnterNotice;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.user=t.string();break;case 3:l.group=t.string();break;case 4:l.instance=t.uint64();break;case 5:l.size=t.uint32();break;default:t.skipType(7&p)}}return l},r}(),cx=Q.Message=function(){function r(t){if(this.MiscMap={},t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.instance=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.dialogue=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.sequence=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.options=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.src="",r.prototype.dst="",r.prototype.payload=I.newBuffer([]),r.prototype.MiscMap=I.emptyObject,r.prototype.ms=I.Long?I.Long.fromBits(0,0,!0):0,r.encode=function(t,o){if(o||(o=ta.create()),null!=t.instance&&Object.hasOwnProperty.call(t,"instance")&&o.uint32(8).uint64(t.instance),null!=t.dialogue&&Object.hasOwnProperty.call(t,"dialogue")&&o.uint32(16).uint64(t.dialogue),null!=t.sequence&&Object.hasOwnProperty.call(t,"sequence")&&o.uint32(24).uint64(t.sequence),null!=t.options&&Object.hasOwnProperty.call(t,"options")&&o.uint32(32).uint64(t.options),null!=t.src&&Object.hasOwnProperty.call(t,"src")&&o.uint32(42).string(t.src),null!=t.dst&&Object.hasOwnProperty.call(t,"dst")&&o.uint32(50).string(t.dst),null!=t.payload&&Object.hasOwnProperty.call(t,"payload")&&o.uint32(58).bytes(t.payload),null!=t.MiscMap&&Object.hasOwnProperty.call(t,"MiscMap"))for(var l=Object.keys(t.MiscMap),p=0;p<l.length;++p)o.uint32(66).fork().uint32(10).string(l[p]).uint32(18).bytes(t.MiscMap[l[p]]).ldelim();return null!=t.ms&&Object.hasOwnProperty.call(t,"ms")&&o.uint32(72).uint64(t.ms),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l,p,_=new Q.Message;t.pos<o;)switch(l=t.uint32(),l>>>3){case 1:_.instance=t.uint64();break;case 2:_.dialogue=t.uint64();break;case 3:_.sequence=t.uint64();break;case 4:_.options=t.uint64();break;case 5:_.src=t.string();break;case 6:_.dst=t.string();break;case 7:_.payload=t.bytes();break;case 8:_.MiscMap===I.emptyObject&&(_.MiscMap={});var R=t.uint32()+t.pos;for(l="",p=[];t.pos<R;){var M=t.uint32();switch(M>>>3){case 1:l=t.string();break;case 2:p=t.bytes();break;default:t.skipType(7&M)}}_.MiscMap[l]=p;break;case 9:_.ms=t.uint64();break;default:t.skipType(7&l)}return _},r}(),dx=Q.Ack=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.instance=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.dialogue=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.sequence=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.code=0,r.encode=function(t,o){return o||(o=ta.create()),null!=t.instance&&Object.hasOwnProperty.call(t,"instance")&&o.uint32(8).uint64(t.instance),null!=t.dialogue&&Object.hasOwnProperty.call(t,"dialogue")&&o.uint32(16).uint64(t.dialogue),null!=t.sequence&&Object.hasOwnProperty.call(t,"sequence")&&o.uint32(24).uint64(t.sequence),null!=t.code&&Object.hasOwnProperty.call(t,"code")&&o.uint32(32).uint32(t.code),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.Ack;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.instance=t.uint64();break;case 2:l.dialogue=t.uint64();break;case 3:l.sequence=t.uint64();break;case 4:l.code=t.uint32();break;default:t.skipType(7&p)}}return l},r}(),xJ=Q.GroupDrop=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.account="",r.prototype.code=0,r.encode=function(t,o){return o||(o=ta.create()),null!=t.account&&Object.hasOwnProperty.call(t,"account")&&o.uint32(10).string(t.account),null!=t.code&&Object.hasOwnProperty.call(t,"code")&&o.uint32(16).uint32(t.code),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.GroupDrop;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.account=t.string();break;case 2:l.code=t.uint32();break;default:t.skipType(7&p)}}return l},r}(),yJ=Q.GroupAllUsersList=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.group="",r.prototype.pageSize=0,r.prototype.pageNumber=0,r.encode=function(t,o){return o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.group&&Object.hasOwnProperty.call(t,"group")&&o.uint32(18).string(t.group),null!=t.pageSize&&Object.hasOwnProperty.call(t,"pageSize")&&o.uint32(24).uint32(t.pageSize),null!=t.pageNumber&&Object.hasOwnProperty.call(t,"pageNumber")&&o.uint32(32).uint32(t.pageNumber),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.GroupAllUsersList;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.group=t.string();break;case 3:l.pageSize=t.uint32();break;case 4:l.pageNumber=t.uint32();break;default:t.skipType(7&p)}}return l},r}(),zJ=Q.GroupAllUsersResult=function(){function r(t){if(this.memberInfos=[],t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.group="",r.prototype.totalSize=0,r.prototype.pageSize=0,r.prototype.pageNumber=0,r.prototype.memberInfos=I.emptyArray,r.encode=function(t,o){if(o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.group&&Object.hasOwnProperty.call(t,"group")&&o.uint32(18).string(t.group),null!=t.totalSize&&Object.hasOwnProperty.call(t,"totalSize")&&o.uint32(24).uint32(t.totalSize),null!=t.pageSize&&Object.hasOwnProperty.call(t,"pageSize")&&o.uint32(32).uint32(t.pageSize),null!=t.pageNumber&&Object.hasOwnProperty.call(t,"pageNumber")&&o.uint32(40).uint32(t.pageNumber),null!=t.memberInfos&&t.memberInfos.length)for(var l=0;l<t.memberInfos.length;++l)Q.GroupAllUsersResult.MemberInfo.encode(t.memberInfos[l],o.uint32(50).fork()).ldelim();return o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.GroupAllUsersResult;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.group=t.string();break;case 3:l.totalSize=t.uint32();break;case 4:l.pageSize=t.uint32();break;case 5:l.pageNumber=t.uint32();break;case 6:l.memberInfos&&l.memberInfos.length||(l.memberInfos=[]),l.memberInfos.push(Q.GroupAllUsersResult.MemberInfo.decode(t,t.uint32()));break;default:t.skipType(7&p)}}return l},r.MemberInfo=function(){function t(o){if(o)for(var l=Object.keys(o),p=0;p<l.length;++p)null!=o[l[p]]&&(this[l[p]]=o[l[p]])}return t.prototype.account="",t.prototype.ts=0,t.encode=function(o,l){return l||(l=ta.create()),null!=o.account&&Object.hasOwnProperty.call(o,"account")&&l.uint32(10).string(o.account),null!=o.ts&&Object.hasOwnProperty.call(o,"ts")&&l.uint32(16).uint32(o.ts),l},t.decode=function(o,l){o instanceof T||(o=T.create(o)),l=void 0===l?o.len:o.pos+l;for(var p=new Q.GroupAllUsersResult.MemberInfo;o.pos<l;){var _=o.uint32();switch(_>>>3){case 1:p.account=o.string();break;case 2:p.ts=o.uint32();break;default:o.skipType(7&_)}}return p},t}(),r}(),AJ=Q.UserStatusList=function(){function r(t){if(this.users=[],t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.users=I.emptyArray,r.encode=function(t,o){if(o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.users&&t.users.length)for(var l=0;l<t.users.length;++l)o.uint32(18).string(t.users[l]);return o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.UserStatusList;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.users&&l.users.length||(l.users=[]),l.users.push(t.string());break;default:t.skipType(7&p)}}return l},r}(),BJ=Q.UserStatusResult=function(){function r(t){if(this.userInfos=[],t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.userInfos=I.emptyArray,r.encode=function(t,o){if(o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.userInfos&&t.userInfos.length)for(var l=0;l<t.userInfos.length;++l)Q.UserStatusResult.UserStatusInfo.encode(t.userInfos[l],o.uint32(18).fork()).ldelim();return o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.UserStatusResult;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.userInfos&&l.userInfos.length||(l.userInfos=[]),l.userInfos.push(Q.UserStatusResult.UserStatusInfo.decode(t,t.uint32()));break;default:t.skipType(7&p)}}return l},r.UserStatusInfo=function(){function t(o){if(o)for(var l=Object.keys(o),p=0;p<l.length;++p)null!=o[l[p]]&&(this[l[p]]=o[l[p]])}return t.prototype.account="",t.prototype.ts=0,t.encode=function(o,l){return l||(l=ta.create()),null!=o.account&&Object.hasOwnProperty.call(o,"account")&&l.uint32(10).string(o.account),null!=o.ts&&Object.hasOwnProperty.call(o,"ts")&&l.uint32(16).uint32(o.ts),l},t.decode=function(o,l){o instanceof T||(o=T.create(o)),l=void 0===l?o.len:o.pos+l;for(var p=new Q.UserStatusResult.UserStatusInfo;o.pos<l;){var _=o.uint32();switch(_>>>3){case 1:p.account=o.string();break;case 2:p.ts=o.uint32();break;default:o.skipType(7&_)}}return p},t}(),r}(),CJ=Q.UserAttributeGet=function(){function r(t){if(this.attributes=[],t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.account="",r.prototype.attributes=I.emptyArray,r.encode=function(t,o){if(o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.account&&Object.hasOwnProperty.call(t,"account")&&o.uint32(18).string(t.account),null!=t.attributes&&t.attributes.length)for(var l=0;l<t.attributes.length;++l)o.uint32(26).string(t.attributes[l]);return o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.UserAttributeGet;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.account=t.string();break;case 3:l.attributes&&l.attributes.length||(l.attributes=[]),l.attributes.push(t.string());break;default:t.skipType(7&p)}}return l},r}(),DJ=Q.UserAttributeRet=function(){function r(t){if(this.attributeInfos=[],t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.attributeInfos=I.emptyArray,r.encode=function(t,o){if(o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.attributeInfos&&t.attributeInfos.length)for(var l=0;l<t.attributeInfos.length;++l)Q.UserAttributeRet.AttributeInfo.encode(t.attributeInfos[l],o.uint32(18).fork()).ldelim();return o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.UserAttributeRet;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.attributeInfos&&l.attributeInfos.length||(l.attributeInfos=[]),l.attributeInfos.push(Q.UserAttributeRet.AttributeInfo.decode(t,t.uint32()));break;default:t.skipType(7&p)}}return l},r.AttributeInfo=function(){function t(o){if(o)for(var l=Object.keys(o),p=0;p<l.length;++p)null!=o[l[p]]&&(this[l[p]]=o[l[p]])}return t.prototype.key="",t.prototype.value="",t.encode=function(o,l){return l||(l=ta.create()),null!=o.key&&Object.hasOwnProperty.call(o,"key")&&l.uint32(10).string(o.key),null!=o.value&&Object.hasOwnProperty.call(o,"value")&&l.uint32(18).string(o.value),l},t.decode=function(o,l){o instanceof T||(o=T.create(o)),l=void 0===l?o.len:o.pos+l;for(var p=new Q.UserAttributeRet.AttributeInfo;o.pos<l;){var _=o.uint32();switch(_>>>3){case 1:p.key=o.string();break;case 2:p.value=o.string();break;default:o.skipType(7&_)}}return p},t}(),r}(),EJ=Q.UserAttributeSet=function(){function r(t){if(this.attributeInfos=[],t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.account="",r.prototype.attributeInfos=I.emptyArray,r.encode=function(t,o){if(o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.account&&Object.hasOwnProperty.call(t,"account")&&o.uint32(18).string(t.account),null!=t.attributeInfos&&t.attributeInfos.length)for(var l=0;l<t.attributeInfos.length;++l)Q.UserAttributeSet.AttributeInfo.encode(t.attributeInfos[l],o.uint32(26).fork()).ldelim();return o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.UserAttributeSet;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.account=t.string();break;case 3:l.attributeInfos&&l.attributeInfos.length||(l.attributeInfos=[]),l.attributeInfos.push(Q.UserAttributeSet.AttributeInfo.decode(t,t.uint32()));break;default:t.skipType(7&p)}}return l},r.AttributeInfo=function(){function t(o){if(o)for(var l=Object.keys(o),p=0;p<l.length;++p)null!=o[l[p]]&&(this[l[p]]=o[l[p]])}return t.prototype.key="",t.prototype.value="",t.encode=function(o,l){return l||(l=ta.create()),null!=o.key&&Object.hasOwnProperty.call(o,"key")&&l.uint32(10).string(o.key),null!=o.value&&Object.hasOwnProperty.call(o,"value")&&l.uint32(18).string(o.value),l},t.decode=function(o,l){o instanceof T||(o=T.create(o)),l=void 0===l?o.len:o.pos+l;for(var p=new Q.UserAttributeSet.AttributeInfo;o.pos<l;){var _=o.uint32();switch(_>>>3){case 1:p.key=o.string();break;case 2:p.value=o.string();break;default:o.skipType(7&_)}}return p},t}(),r}(),FJ=Q.UserAttributeMod=function(){function r(t){if(this.attributeInfos=[],t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.account="",r.prototype.attributeInfos=I.emptyArray,r.encode=function(t,o){if(o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.account&&Object.hasOwnProperty.call(t,"account")&&o.uint32(18).string(t.account),null!=t.attributeInfos&&t.attributeInfos.length)for(var l=0;l<t.attributeInfos.length;++l)Q.UserAttributeMod.AttributeInfo.encode(t.attributeInfos[l],o.uint32(26).fork()).ldelim();return o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.UserAttributeMod;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.account=t.string();break;case 3:l.attributeInfos&&l.attributeInfos.length||(l.attributeInfos=[]),l.attributeInfos.push(Q.UserAttributeMod.AttributeInfo.decode(t,t.uint32()));break;default:t.skipType(7&p)}}return l},r.AttributeInfo=function(){function t(o){if(o)for(var l=Object.keys(o),p=0;p<l.length;++p)null!=o[l[p]]&&(this[l[p]]=o[l[p]])}return t.prototype.key="",t.prototype.value="",t.encode=function(o,l){return l||(l=ta.create()),null!=o.key&&Object.hasOwnProperty.call(o,"key")&&l.uint32(10).string(o.key),null!=o.value&&Object.hasOwnProperty.call(o,"value")&&l.uint32(18).string(o.value),l},t.decode=function(o,l){o instanceof T||(o=T.create(o)),l=void 0===l?o.len:o.pos+l;for(var p=new Q.UserAttributeMod.AttributeInfo;o.pos<l;){var _=o.uint32();switch(_>>>3){case 1:p.key=o.string();break;case 2:p.value=o.string();break;default:o.skipType(7&_)}}return p},t}(),r}(),GJ=Q.UserAttributeDel=function(){function r(t){if(this.attributes=[],t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.account="",r.prototype.attributes=I.emptyArray,r.encode=function(t,o){if(o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.account&&Object.hasOwnProperty.call(t,"account")&&o.uint32(18).string(t.account),null!=t.attributes&&t.attributes.length)for(var l=0;l<t.attributes.length;++l)o.uint32(26).string(t.attributes[l]);return o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.UserAttributeDel;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.account=t.string();break;case 3:l.attributes&&l.attributes.length||(l.attributes=[]),l.attributes.push(t.string());break;default:t.skipType(7&p)}}return l},r}(),HJ=Q.UserAttributeErr=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.code=0,r.encode=function(t,o){return o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.code&&Object.hasOwnProperty.call(t,"code")&&o.uint32(16).uint32(t.code),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.UserAttributeErr;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.code=t.uint32();break;default:t.skipType(7&p)}}return l},r}(),IJ=Q.UserAttributeKeysGet=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.account="",r.encode=function(t,o){return o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.account&&Object.hasOwnProperty.call(t,"account")&&o.uint32(18).string(t.account),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.UserAttributeKeysGet;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.account=t.string();break;default:t.skipType(7&p)}}return l},r}(),JJ=Q.UserAttributeKeysRet=function(){function r(t){if(this.keys=[],t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.keys=I.emptyArray,r.encode=function(t,o){if(o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.keys&&t.keys.length)for(var l=0;l<t.keys.length;++l)o.uint32(18).string(t.keys[l]);return o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.UserAttributeKeysRet;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.keys&&l.keys.length||(l.keys=[]),l.keys.push(t.string());break;default:t.skipType(7&p)}}return l},r}(),KJ=Q.UserAttributeRsp=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.encode=function(t,o){return o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.UserAttributeRsp;t.pos<o;){var p=t.uint32();p>>>3==1?l.seq=t.uint64():t.skipType(7&p)}return l},r}(),LJ=Q.GroupStatusList=function(){function r(t){if(this.groups=[],t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.groups=I.emptyArray,r.encode=function(t,o){if(o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.groups&&t.groups.length)for(var l=0;l<t.groups.length;++l)o.uint32(18).string(t.groups[l]);return o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.GroupStatusList;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.groups&&l.groups.length||(l.groups=[]),l.groups.push(t.string());break;default:t.skipType(7&p)}}return l},r}(),MJ=Q.GroupStatusResult=function(){function r(t){if(this.groupInfos=[],t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.groupInfos=I.emptyArray,r.encode=function(t,o){if(o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.groupInfos&&t.groupInfos.length)for(var l=0;l<t.groupInfos.length;++l)Q.GroupStatusResult.GroupInfo.encode(t.groupInfos[l],o.uint32(18).fork()).ldelim();return o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.GroupStatusResult;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.groupInfos&&l.groupInfos.length||(l.groupInfos=[]),l.groupInfos.push(Q.GroupStatusResult.GroupInfo.decode(t,t.uint32()));break;default:t.skipType(7&p)}}return l},r.GroupInfo=function(){function t(o){if(o)for(var l=Object.keys(o),p=0;p<l.length;++p)null!=o[l[p]]&&(this[l[p]]=o[l[p]])}return t.prototype.group="",t.prototype.memberCount=0,t.encode=function(o,l){return l||(l=ta.create()),null!=o.group&&Object.hasOwnProperty.call(o,"group")&&l.uint32(10).string(o.group),null!=o.memberCount&&Object.hasOwnProperty.call(o,"memberCount")&&l.uint32(16).uint32(o.memberCount),l},t.decode=function(o,l){o instanceof T||(o=T.create(o)),l=void 0===l?o.len:o.pos+l;for(var p=new Q.GroupStatusResult.GroupInfo;o.pos<l;){var _=o.uint32();switch(_>>>3){case 1:p.group=o.string();break;case 2:p.memberCount=o.uint32();break;default:o.skipType(7&_)}}return p},t}(),r}(),NJ=Q.GroupCountNotice=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.instance=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.group="",r.prototype.size=0,r.encode=function(t,o){return o||(o=ta.create()),null!=t.instance&&Object.hasOwnProperty.call(t,"instance")&&o.uint32(8).uint64(t.instance),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(16).uint64(t.seq),null!=t.group&&Object.hasOwnProperty.call(t,"group")&&o.uint32(26).string(t.group),null!=t.size&&Object.hasOwnProperty.call(t,"size")&&o.uint32(32).uint32(t.size),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.GroupCountNotice;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.instance=t.uint64();break;case 2:l.seq=t.uint64();break;case 3:l.group=t.string();break;case 4:l.size=t.uint32();break;default:t.skipType(7&p)}}return l},r}(),OJ=Q.GroupAttributeGet=function(){function r(t){if(this.attributes=[],t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.group="",r.prototype.attributes=I.emptyArray,r.encode=function(t,o){if(o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.group&&Object.hasOwnProperty.call(t,"group")&&o.uint32(18).string(t.group),null!=t.attributes&&t.attributes.length)for(var l=0;l<t.attributes.length;++l)o.uint32(26).string(t.attributes[l]);return o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.GroupAttributeGet;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.group=t.string();break;case 3:l.attributes&&l.attributes.length||(l.attributes=[]),l.attributes.push(t.string());break;default:t.skipType(7&p)}}return l},r}(),PJ=Q.GroupAttributeRet=function(){function r(t){if(this.attributeMaps=[],t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.attributeMaps=I.emptyArray,r.encode=function(t,o){if(o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.attributeMaps&&t.attributeMaps.length)for(var l=0;l<t.attributeMaps.length;++l)Q.GroupAttributeRet.AttributeMap.encode(t.attributeMaps[l],o.uint32(18).fork()).ldelim();return o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.GroupAttributeRet;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.attributeMaps&&l.attributeMaps.length||(l.attributeMaps=[]),l.attributeMaps.push(Q.GroupAttributeRet.AttributeMap.decode(t,t.uint32()));break;default:t.skipType(7&p)}}return l},r.AttributeMap=function(){function t(o){if(o)for(var l=Object.keys(o),p=0;p<l.length;++p)null!=o[l[p]]&&(this[l[p]]=o[l[p]])}return t.prototype.key="",t.prototype.value="",t.prototype.origin="",t.prototype.ms=I.Long?I.Long.fromBits(0,0,!0):0,t.encode=function(o,l){return l||(l=ta.create()),null!=o.key&&Object.hasOwnProperty.call(o,"key")&&l.uint32(10).string(o.key),null!=o.value&&Object.hasOwnProperty.call(o,"value")&&l.uint32(18).string(o.value),null!=o.origin&&Object.hasOwnProperty.call(o,"origin")&&l.uint32(26).string(o.origin),null!=o.ms&&Object.hasOwnProperty.call(o,"ms")&&l.uint32(32).uint64(o.ms),l},t.decode=function(o,l){o instanceof T||(o=T.create(o)),l=void 0===l?o.len:o.pos+l;for(var p=new Q.GroupAttributeRet.AttributeMap;o.pos<l;){var _=o.uint32();switch(_>>>3){case 1:p.key=o.string();break;case 2:p.value=o.string();break;case 3:p.origin=o.string();break;case 4:p.ms=o.uint64();break;default:o.skipType(7&_)}}return p},t}(),r}(),QJ=Q.GroupAttributeSet=function(){function r(t){if(this.attributeInfos=[],t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.group="",r.prototype.broadcast=!1,r.prototype.attributeInfos=I.emptyArray,r.encode=function(t,o){if(o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.group&&Object.hasOwnProperty.call(t,"group")&&o.uint32(18).string(t.group),null!=t.broadcast&&Object.hasOwnProperty.call(t,"broadcast")&&o.uint32(24).bool(t.broadcast),null!=t.attributeInfos&&t.attributeInfos.length)for(var l=0;l<t.attributeInfos.length;++l)Q.GroupAttributeSet.AttributeInfo.encode(t.attributeInfos[l],o.uint32(34).fork()).ldelim();return o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.GroupAttributeSet;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.group=t.string();break;case 3:l.broadcast=t.bool();break;case 4:l.attributeInfos&&l.attributeInfos.length||(l.attributeInfos=[]),l.attributeInfos.push(Q.GroupAttributeSet.AttributeInfo.decode(t,t.uint32()));break;default:t.skipType(7&p)}}return l},r.AttributeInfo=function(){function t(o){if(o)for(var l=Object.keys(o),p=0;p<l.length;++p)null!=o[l[p]]&&(this[l[p]]=o[l[p]])}return t.prototype.key="",t.prototype.value="",t.encode=function(o,l){return l||(l=ta.create()),null!=o.key&&Object.hasOwnProperty.call(o,"key")&&l.uint32(10).string(o.key),null!=o.value&&Object.hasOwnProperty.call(o,"value")&&l.uint32(18).string(o.value),l},t.decode=function(o,l){o instanceof T||(o=T.create(o)),l=void 0===l?o.len:o.pos+l;for(var p=new Q.GroupAttributeSet.AttributeInfo;o.pos<l;){var _=o.uint32();switch(_>>>3){case 1:p.key=o.string();break;case 2:p.value=o.string();break;default:o.skipType(7&_)}}return p},t}(),r}(),RJ=Q.GroupAttributeMod=function(){function r(t){if(this.attributeInfos=[],t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.group="",r.prototype.broadcast=!1,r.prototype.attributeInfos=I.emptyArray,r.encode=function(t,o){if(o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.group&&Object.hasOwnProperty.call(t,"group")&&o.uint32(18).string(t.group),null!=t.broadcast&&Object.hasOwnProperty.call(t,"broadcast")&&o.uint32(24).bool(t.broadcast),null!=t.attributeInfos&&t.attributeInfos.length)for(var l=0;l<t.attributeInfos.length;++l)Q.GroupAttributeMod.AttributeInfo.encode(t.attributeInfos[l],o.uint32(34).fork()).ldelim();return o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.GroupAttributeMod;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.group=t.string();break;case 3:l.broadcast=t.bool();break;case 4:l.attributeInfos&&l.attributeInfos.length||(l.attributeInfos=[]),l.attributeInfos.push(Q.GroupAttributeMod.AttributeInfo.decode(t,t.uint32()));break;default:t.skipType(7&p)}}return l},r.AttributeInfo=function(){function t(o){if(o)for(var l=Object.keys(o),p=0;p<l.length;++p)null!=o[l[p]]&&(this[l[p]]=o[l[p]])}return t.prototype.key="",t.prototype.value="",t.encode=function(o,l){return l||(l=ta.create()),null!=o.key&&Object.hasOwnProperty.call(o,"key")&&l.uint32(10).string(o.key),null!=o.value&&Object.hasOwnProperty.call(o,"value")&&l.uint32(18).string(o.value),l},t.decode=function(o,l){o instanceof T||(o=T.create(o)),l=void 0===l?o.len:o.pos+l;for(var p=new Q.GroupAttributeMod.AttributeInfo;o.pos<l;){var _=o.uint32();switch(_>>>3){case 1:p.key=o.string();break;case 2:p.value=o.string();break;default:o.skipType(7&_)}}return p},t}(),r}(),SJ=Q.GroupAttributeDel=function(){function r(t){if(this.attributes=[],t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.group="",r.prototype.broadcast=!1,r.prototype.attributes=I.emptyArray,r.encode=function(t,o){if(o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.group&&Object.hasOwnProperty.call(t,"group")&&o.uint32(18).string(t.group),null!=t.broadcast&&Object.hasOwnProperty.call(t,"broadcast")&&o.uint32(24).bool(t.broadcast),null!=t.attributes&&t.attributes.length)for(var l=0;l<t.attributes.length;++l)o.uint32(34).string(t.attributes[l]);return o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.GroupAttributeDel;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.group=t.string();break;case 3:l.broadcast=t.bool();break;case 4:l.attributes&&l.attributes.length||(l.attributes=[]),l.attributes.push(t.string());break;default:t.skipType(7&p)}}return l},r}(),TJ=Q.GroupAttributeAlt=function(){function r(t){if(this.attributeMaps=[],t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.group="",r.prototype.instance=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.attributeMaps=I.emptyArray,r.encode=function(t,o){if(o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.group&&Object.hasOwnProperty.call(t,"group")&&o.uint32(18).string(t.group),null!=t.instance&&Object.hasOwnProperty.call(t,"instance")&&o.uint32(24).uint64(t.instance),null!=t.attributeMaps&&t.attributeMaps.length)for(var l=0;l<t.attributeMaps.length;++l)Q.GroupAttributeAlt.AttributeMap.encode(t.attributeMaps[l],o.uint32(34).fork()).ldelim();return o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.GroupAttributeAlt;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.group=t.string();break;case 3:l.instance=t.uint64();break;case 4:l.attributeMaps&&l.attributeMaps.length||(l.attributeMaps=[]),l.attributeMaps.push(Q.GroupAttributeAlt.AttributeMap.decode(t,t.uint32()));break;default:t.skipType(7&p)}}return l},r.AttributeMap=function(){function t(o){if(o)for(var l=Object.keys(o),p=0;p<l.length;++p)null!=o[l[p]]&&(this[l[p]]=o[l[p]])}return t.prototype.key="",t.prototype.value="",t.prototype.origin="",t.prototype.ms=I.Long?I.Long.fromBits(0,0,!0):0,t.encode=function(o,l){return l||(l=ta.create()),null!=o.key&&Object.hasOwnProperty.call(o,"key")&&l.uint32(10).string(o.key),null!=o.value&&Object.hasOwnProperty.call(o,"value")&&l.uint32(18).string(o.value),null!=o.origin&&Object.hasOwnProperty.call(o,"origin")&&l.uint32(26).string(o.origin),null!=o.ms&&Object.hasOwnProperty.call(o,"ms")&&l.uint32(32).uint64(o.ms),l},t.decode=function(o,l){o instanceof T||(o=T.create(o)),l=void 0===l?o.len:o.pos+l;for(var p=new Q.GroupAttributeAlt.AttributeMap;o.pos<l;){var _=o.uint32();switch(_>>>3){case 1:p.key=o.string();break;case 2:p.value=o.string();break;case 3:p.origin=o.string();break;case 4:p.ms=o.uint64();break;default:o.skipType(7&_)}}return p},t}(),r}(),UJ=Q.GroupAttributeRsp=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.encode=function(t,o){return o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.GroupAttributeRsp;t.pos<o;){var p=t.uint32();p>>>3==1?l.seq=t.uint64():t.skipType(7&p)}return l},r}(),VJ=Q.GroupAttributeErr=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.code=0,r.encode=function(t,o){return o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.code&&Object.hasOwnProperty.call(t,"code")&&o.uint32(16).uint32(t.code),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.GroupAttributeErr;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.code=t.uint32();break;default:t.skipType(7&p)}}return l},r}(),WJ=Q.GroupAttributeKeysGet=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.group="",r.encode=function(t,o){return o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.group&&Object.hasOwnProperty.call(t,"group")&&o.uint32(18).string(t.group),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.GroupAttributeKeysGet;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.group=t.string();break;default:t.skipType(7&p)}}return l},r}(),XJ=Q.GroupAttributeKeysRet=function(){function r(t){if(this.keys=[],t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.keys=I.emptyArray,r.encode=function(t,o){if(o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.keys&&t.keys.length)for(var l=0;l<t.keys.length;++l)o.uint32(18).string(t.keys[l]);return o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.GroupAttributeKeysRet;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.keys&&l.keys.length||(l.keys=[]),l.keys.push(t.string());break;default:t.skipType(7&p)}}return l},r}(),YJ=Q.SubscribeUserStatus=function(){function r(t){if(this.users=[],t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.users=I.emptyArray,r.encode=function(t,o){if(o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.users&&t.users.length)for(var l=0;l<t.users.length;++l)o.uint32(18).string(t.users[l]);return o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.SubscribeUserStatus;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.users&&l.users.length||(l.users=[]),l.users.push(t.string());break;default:t.skipType(7&p)}}return l},r}(),ZJ=Q.UnsubscribeUserStatus=function(){function r(t){if(this.users=[],t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.users=I.emptyArray,r.encode=function(t,o){if(o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.users&&t.users.length)for(var l=0;l<t.users.length;++l)o.uint32(18).string(t.users[l]);return o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.UnsubscribeUserStatus;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.users&&l.users.length||(l.users=[]),l.users.push(t.string());break;default:t.skipType(7&p)}}return l},r}(),$J=Q.UserJoinNotice=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.instance=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.user="",r.encode=function(t,o){return o||(o=ta.create()),null!=t.instance&&Object.hasOwnProperty.call(t,"instance")&&o.uint32(8).uint64(t.instance),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(16).uint64(t.seq),null!=t.user&&Object.hasOwnProperty.call(t,"user")&&o.uint32(26).string(t.user),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.UserJoinNotice;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.instance=t.uint64();break;case 2:l.seq=t.uint64();break;case 3:l.user=t.string();break;default:t.skipType(7&p)}}return l},r}(),aK=Q.UserQuitNotice=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.instance=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.user="",r.encode=function(t,o){return o||(o=ta.create()),null!=t.instance&&Object.hasOwnProperty.call(t,"instance")&&o.uint32(8).uint64(t.instance),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(16).uint64(t.seq),null!=t.user&&Object.hasOwnProperty.call(t,"user")&&o.uint32(26).string(t.user),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.UserQuitNotice;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.instance=t.uint64();break;case 2:l.seq=t.uint64();break;case 3:l.user=t.string();break;default:t.skipType(7&p)}}return l},r}(),bK=Q.UserWaitNotice=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.instance=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.user="",r.encode=function(t,o){return o||(o=ta.create()),null!=t.instance&&Object.hasOwnProperty.call(t,"instance")&&o.uint32(8).uint64(t.instance),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(16).uint64(t.seq),null!=t.user&&Object.hasOwnProperty.call(t,"user")&&o.uint32(26).string(t.user),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.UserWaitNotice;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.instance=t.uint64();break;case 2:l.seq=t.uint64();break;case 3:l.user=t.string();break;default:t.skipType(7&p)}}return l},r}(),cK=Q.StateSubscribe=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.target="",r.prototype.subTarget="",r.prototype.sequence=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.flags=I.Long?I.Long.fromBits(0,0,!0):0,r.encode=function(t,o){return o||(o=ta.create()),null!=t.target&&Object.hasOwnProperty.call(t,"target")&&o.uint32(10).string(t.target),null!=t.subTarget&&Object.hasOwnProperty.call(t,"subTarget")&&o.uint32(18).string(t.subTarget),null!=t.sequence&&Object.hasOwnProperty.call(t,"sequence")&&o.uint32(24).uint64(t.sequence),null!=t.flags&&Object.hasOwnProperty.call(t,"flags")&&o.uint32(32).uint64(t.flags),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.StateSubscribe;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.target=t.string();break;case 2:l.subTarget=t.string();break;case 3:l.sequence=t.uint64();break;case 4:l.flags=t.uint64();break;default:t.skipType(7&p)}}return l},r}(),dK=Q.StateUpdate=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.target="",r.prototype.subTarget="",r.prototype.allStates="",r.prototype.flags=I.Long?I.Long.fromBits(0,0,!0):0,r.encode=function(t,o){return o||(o=ta.create()),null!=t.target&&Object.hasOwnProperty.call(t,"target")&&o.uint32(10).string(t.target),null!=t.subTarget&&Object.hasOwnProperty.call(t,"subTarget")&&o.uint32(18).string(t.subTarget),null!=t.allStates&&Object.hasOwnProperty.call(t,"allStates")&&o.uint32(26).string(t.allStates),null!=t.flags&&Object.hasOwnProperty.call(t,"flags")&&o.uint32(32).uint64(t.flags),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.StateUpdate;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.target=t.string();break;case 2:l.subTarget=t.string();break;case 3:l.allStates=t.string();break;case 4:l.flags=t.uint64();break;default:t.skipType(7&p)}}return l},r}(),eK=Q.StateSubscribeResult=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.target="",r.prototype.subTarget="",r.prototype.sequence=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.flags=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.code=0,r.encode=function(t,o){return o||(o=ta.create()),null!=t.target&&Object.hasOwnProperty.call(t,"target")&&o.uint32(10).string(t.target),null!=t.subTarget&&Object.hasOwnProperty.call(t,"subTarget")&&o.uint32(18).string(t.subTarget),null!=t.sequence&&Object.hasOwnProperty.call(t,"sequence")&&o.uint32(24).uint64(t.sequence),null!=t.flags&&Object.hasOwnProperty.call(t,"flags")&&o.uint32(32).uint64(t.flags),null!=t.code&&Object.hasOwnProperty.call(t,"code")&&o.uint32(40).uint32(t.code),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.StateSubscribeResult;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.target=t.string();break;case 2:l.subTarget=t.string();break;case 3:l.sequence=t.uint64();break;case 4:l.flags=t.uint64();break;case 5:l.code=t.uint32();break;default:t.skipType(7&p)}}return l},r}(),fK=Q.StateUnsubscribe=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.target="",r.prototype.subTarget="",r.prototype.sequence=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.flags=I.Long?I.Long.fromBits(0,0,!0):0,r.encode=function(t,o){return o||(o=ta.create()),null!=t.target&&Object.hasOwnProperty.call(t,"target")&&o.uint32(10).string(t.target),null!=t.subTarget&&Object.hasOwnProperty.call(t,"subTarget")&&o.uint32(18).string(t.subTarget),null!=t.sequence&&Object.hasOwnProperty.call(t,"sequence")&&o.uint32(24).uint64(t.sequence),null!=t.flags&&Object.hasOwnProperty.call(t,"flags")&&o.uint32(32).uint64(t.flags),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.StateUnsubscribe;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.target=t.string();break;case 2:l.subTarget=t.string();break;case 3:l.sequence=t.uint64();break;case 4:l.flags=t.uint64();break;default:t.skipType(7&p)}}return l},r}(),gK=Q.StateSet=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.target="",r.prototype.author="",r.prototype.value="",r.prototype.lock="",r.prototype.requestUuid="",r.prototype.sequence=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.flags=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.baseRevision=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.lockRev=I.Long?I.Long.fromBits(0,0,!0):0,r.encode=function(t,o){return o||(o=ta.create()),null!=t.target&&Object.hasOwnProperty.call(t,"target")&&o.uint32(10).string(t.target),null!=t.author&&Object.hasOwnProperty.call(t,"author")&&o.uint32(18).string(t.author),null!=t.value&&Object.hasOwnProperty.call(t,"value")&&o.uint32(26).string(t.value),null!=t.lock&&Object.hasOwnProperty.call(t,"lock")&&o.uint32(34).string(t.lock),null!=t.requestUuid&&Object.hasOwnProperty.call(t,"requestUuid")&&o.uint32(42).string(t.requestUuid),null!=t.sequence&&Object.hasOwnProperty.call(t,"sequence")&&o.uint32(48).uint64(t.sequence),null!=t.flags&&Object.hasOwnProperty.call(t,"flags")&&o.uint32(56).uint64(t.flags),null!=t.baseRevision&&Object.hasOwnProperty.call(t,"baseRevision")&&o.uint32(64).uint64(t.baseRevision),null!=t.lockRev&&Object.hasOwnProperty.call(t,"lockRev")&&o.uint32(72).uint64(t.lockRev),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.StateSet;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.target=t.string();break;case 2:l.author=t.string();break;case 3:l.value=t.string();break;case 4:l.lock=t.string();break;case 5:l.requestUuid=t.string();break;case 6:l.sequence=t.uint64();break;case 7:l.flags=t.uint64();break;case 8:l.baseRevision=t.uint64();break;case 9:l.lockRev=t.uint64();break;default:t.skipType(7&p)}}return l},r}(),hK=Q.StateModify=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.target="",r.prototype.author="",r.prototype.value="",r.prototype.lock="",r.prototype.requestUuid="",r.prototype.sequence=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.flags=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.baseRevision=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.lockRev=I.Long?I.Long.fromBits(0,0,!0):0,r.encode=function(t,o){return o||(o=ta.create()),null!=t.target&&Object.hasOwnProperty.call(t,"target")&&o.uint32(10).string(t.target),null!=t.author&&Object.hasOwnProperty.call(t,"author")&&o.uint32(18).string(t.author),null!=t.value&&Object.hasOwnProperty.call(t,"value")&&o.uint32(26).string(t.value),null!=t.lock&&Object.hasOwnProperty.call(t,"lock")&&o.uint32(34).string(t.lock),null!=t.requestUuid&&Object.hasOwnProperty.call(t,"requestUuid")&&o.uint32(42).string(t.requestUuid),null!=t.sequence&&Object.hasOwnProperty.call(t,"sequence")&&o.uint32(48).uint64(t.sequence),null!=t.flags&&Object.hasOwnProperty.call(t,"flags")&&o.uint32(56).uint64(t.flags),null!=t.baseRevision&&Object.hasOwnProperty.call(t,"baseRevision")&&o.uint32(64).uint64(t.baseRevision),null!=t.lockRev&&Object.hasOwnProperty.call(t,"lockRev")&&o.uint32(72).uint64(t.lockRev),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.StateModify;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.target=t.string();break;case 2:l.author=t.string();break;case 3:l.value=t.string();break;case 4:l.lock=t.string();break;case 5:l.requestUuid=t.string();break;case 6:l.sequence=t.uint64();break;case 7:l.flags=t.uint64();break;case 8:l.baseRevision=t.uint64();break;case 9:l.lockRev=t.uint64();break;default:t.skipType(7&p)}}return l},r}(),iK=Q.StateRequestResult=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.requestUuid="",r.prototype.sequence=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.code=0,r.encode=function(t,o){return o||(o=ta.create()),null!=t.requestUuid&&Object.hasOwnProperty.call(t,"requestUuid")&&o.uint32(10).string(t.requestUuid),null!=t.sequence&&Object.hasOwnProperty.call(t,"sequence")&&o.uint32(16).uint64(t.sequence),null!=t.code&&Object.hasOwnProperty.call(t,"code")&&o.uint32(24).uint32(t.code),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.StateRequestResult;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.requestUuid=t.string();break;case 2:l.sequence=t.uint64();break;case 3:l.code=t.uint32();break;default:t.skipType(7&p)}}return l},r}(),jK=Q.StateGet=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.target="",r.prototype.subTarget="",r.prototype.lock="",r.prototype.sequence=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.flags=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.lockRev=I.Long?I.Long.fromBits(0,0,!0):0,r.encode=function(t,o){return o||(o=ta.create()),null!=t.target&&Object.hasOwnProperty.call(t,"target")&&o.uint32(10).string(t.target),null!=t.subTarget&&Object.hasOwnProperty.call(t,"subTarget")&&o.uint32(18).string(t.subTarget),null!=t.lock&&Object.hasOwnProperty.call(t,"lock")&&o.uint32(26).string(t.lock),null!=t.sequence&&Object.hasOwnProperty.call(t,"sequence")&&o.uint32(32).uint64(t.sequence),null!=t.flags&&Object.hasOwnProperty.call(t,"flags")&&o.uint32(40).uint64(t.flags),null!=t.lockRev&&Object.hasOwnProperty.call(t,"lockRev")&&o.uint32(48).uint64(t.lockRev),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.StateGet;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.target=t.string();break;case 2:l.subTarget=t.string();break;case 3:l.lock=t.string();break;case 4:l.sequence=t.uint64();break;case 5:l.flags=t.uint64();break;case 6:l.lockRev=t.uint64();break;default:t.skipType(7&p)}}return l},r}(),kK=Q.StateGetResult=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.target="",r.prototype.subTarget="",r.prototype.allStates="",r.prototype.sequence=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.flags=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.code=0,r.encode=function(t,o){return o||(o=ta.create()),null!=t.target&&Object.hasOwnProperty.call(t,"target")&&o.uint32(10).string(t.target),null!=t.subTarget&&Object.hasOwnProperty.call(t,"subTarget")&&o.uint32(18).string(t.subTarget),null!=t.allStates&&Object.hasOwnProperty.call(t,"allStates")&&o.uint32(26).string(t.allStates),null!=t.sequence&&Object.hasOwnProperty.call(t,"sequence")&&o.uint32(32).uint64(t.sequence),null!=t.flags&&Object.hasOwnProperty.call(t,"flags")&&o.uint32(40).uint64(t.flags),null!=t.code&&Object.hasOwnProperty.call(t,"code")&&o.uint32(48).uint32(t.code),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.StateGetResult;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.target=t.string();break;case 2:l.subTarget=t.string();break;case 3:l.allStates=t.string();break;case 4:l.sequence=t.uint64();break;case 5:l.flags=t.uint64();break;case 6:l.code=t.uint32();break;default:t.skipType(7&p)}}return l},r}(),lK=Q.StateLockAcquire=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.target="",r.prototype.lock="",r.prototype.requestUuid="",r.prototype.flags=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.ttl=I.Long?I.Long.fromBits(0,0,!0):0,r.encode=function(t,o){return o||(o=ta.create()),null!=t.target&&Object.hasOwnProperty.call(t,"target")&&o.uint32(10).string(t.target),null!=t.lock&&Object.hasOwnProperty.call(t,"lock")&&o.uint32(18).string(t.lock),null!=t.requestUuid&&Object.hasOwnProperty.call(t,"requestUuid")&&o.uint32(26).string(t.requestUuid),null!=t.flags&&Object.hasOwnProperty.call(t,"flags")&&o.uint32(32).uint64(t.flags),null!=t.ttl&&Object.hasOwnProperty.call(t,"ttl")&&o.uint32(40).uint64(t.ttl),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.StateLockAcquire;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.target=t.string();break;case 2:l.lock=t.string();break;case 3:l.requestUuid=t.string();break;case 4:l.flags=t.uint64();break;case 5:l.ttl=t.uint64();break;default:t.skipType(7&p)}}return l},r}(),mK=Q.StateLockRelease=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.target="",r.prototype.lock="",r.prototype.requestUuid="",r.prototype.flags=I.Long?I.Long.fromBits(0,0,!0):0,r.encode=function(t,o){return o||(o=ta.create()),null!=t.target&&Object.hasOwnProperty.call(t,"target")&&o.uint32(10).string(t.target),null!=t.lock&&Object.hasOwnProperty.call(t,"lock")&&o.uint32(18).string(t.lock),null!=t.requestUuid&&Object.hasOwnProperty.call(t,"requestUuid")&&o.uint32(26).string(t.requestUuid),null!=t.flags&&Object.hasOwnProperty.call(t,"flags")&&o.uint32(32).uint64(t.flags),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.StateLockRelease;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.target=t.string();break;case 2:l.lock=t.string();break;case 3:l.requestUuid=t.string();break;case 4:l.flags=t.uint64();break;default:t.skipType(7&p)}}return l},r}(),nK=Q.StateLockAcquireResult=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.target="",r.prototype.lock="",r.prototype.requestUuid="",r.prototype.flags=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.lockRev=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.code=0,r.prototype.reason="",r.encode=function(t,o){return o||(o=ta.create()),null!=t.target&&Object.hasOwnProperty.call(t,"target")&&o.uint32(10).string(t.target),null!=t.lock&&Object.hasOwnProperty.call(t,"lock")&&o.uint32(18).string(t.lock),null!=t.requestUuid&&Object.hasOwnProperty.call(t,"requestUuid")&&o.uint32(26).string(t.requestUuid),null!=t.flags&&Object.hasOwnProperty.call(t,"flags")&&o.uint32(32).uint64(t.flags),null!=t.lockRev&&Object.hasOwnProperty.call(t,"lockRev")&&o.uint32(40).uint64(t.lockRev),null!=t.code&&Object.hasOwnProperty.call(t,"code")&&o.uint32(48).uint32(t.code),null!=t.reason&&Object.hasOwnProperty.call(t,"reason")&&o.uint32(58).string(t.reason),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.StateLockAcquireResult;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.target=t.string();break;case 2:l.lock=t.string();break;case 3:l.requestUuid=t.string();break;case 4:l.flags=t.uint64();break;case 5:l.lockRev=t.uint64();break;case 6:l.code=t.uint32();break;case 7:l.reason=t.string();break;default:t.skipType(7&p)}}return l},r}(),oK=Q.StateLockUpdate=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.target="",r.prototype.lock="",r.prototype.flags=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.code=0,r.encode=function(t,o){return o||(o=ta.create()),null!=t.target&&Object.hasOwnProperty.call(t,"target")&&o.uint32(10).string(t.target),null!=t.lock&&Object.hasOwnProperty.call(t,"lock")&&o.uint32(18).string(t.lock),null!=t.flags&&Object.hasOwnProperty.call(t,"flags")&&o.uint32(24).uint64(t.flags),null!=t.code&&Object.hasOwnProperty.call(t,"code")&&o.uint32(32).uint32(t.code),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.StateLockUpdate;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.target=t.string();break;case 2:l.lock=t.string();break;case 3:l.flags=t.uint64();break;case 4:l.code=t.uint32();break;default:t.skipType(7&p)}}return l},r}(),pK=Q.StateLockReleaseResult=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.target="",r.prototype.lock="",r.prototype.requestUuid="",r.prototype.flags=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.code=0,r.encode=function(t,o){return o||(o=ta.create()),null!=t.target&&Object.hasOwnProperty.call(t,"target")&&o.uint32(10).string(t.target),null!=t.lock&&Object.hasOwnProperty.call(t,"lock")&&o.uint32(18).string(t.lock),null!=t.requestUuid&&Object.hasOwnProperty.call(t,"requestUuid")&&o.uint32(26).string(t.requestUuid),null!=t.flags&&Object.hasOwnProperty.call(t,"flags")&&o.uint32(32).uint64(t.flags),null!=t.code&&Object.hasOwnProperty.call(t,"code")&&o.uint32(40).uint32(t.code),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.StateLockReleaseResult;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.target=t.string();break;case 2:l.lock=t.string();break;case 3:l.requestUuid=t.string();break;case 4:l.flags=t.uint64();break;case 5:l.code=t.uint32();break;default:t.skipType(7&p)}}return l},r}(),qK=Q.StateLockDisable=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.target="",r.prototype.lock="",r.prototype.userId="",r.prototype.requestUuid="",r.prototype.flags=I.Long?I.Long.fromBits(0,0,!0):0,r.encode=function(t,o){return o||(o=ta.create()),null!=t.target&&Object.hasOwnProperty.call(t,"target")&&o.uint32(10).string(t.target),null!=t.lock&&Object.hasOwnProperty.call(t,"lock")&&o.uint32(18).string(t.lock),null!=t.userId&&Object.hasOwnProperty.call(t,"userId")&&o.uint32(26).string(t.userId),null!=t.requestUuid&&Object.hasOwnProperty.call(t,"requestUuid")&&o.uint32(34).string(t.requestUuid),null!=t.flags&&Object.hasOwnProperty.call(t,"flags")&&o.uint32(40).uint64(t.flags),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.StateLockDisable;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.target=t.string();break;case 2:l.lock=t.string();break;case 3:l.userId=t.string();break;case 4:l.requestUuid=t.string();break;case 5:l.flags=t.uint64();break;default:t.skipType(7&p)}}return l},r}(),rK=Q.StateLockDisableResult=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.target="",r.prototype.lock="",r.prototype.requestUuid="",r.prototype.flags=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.code=0,r.encode=function(t,o){return o||(o=ta.create()),null!=t.target&&Object.hasOwnProperty.call(t,"target")&&o.uint32(10).string(t.target),null!=t.lock&&Object.hasOwnProperty.call(t,"lock")&&o.uint32(18).string(t.lock),null!=t.requestUuid&&Object.hasOwnProperty.call(t,"requestUuid")&&o.uint32(26).string(t.requestUuid),null!=t.flags&&Object.hasOwnProperty.call(t,"flags")&&o.uint32(32).uint64(t.flags),null!=t.code&&Object.hasOwnProperty.call(t,"code")&&o.uint32(40).uint32(t.code),o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.StateLockDisableResult;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.target=t.string();break;case 2:l.lock=t.string();break;case 3:l.requestUuid=t.string();break;case 4:l.flags=t.uint64();break;case 5:l.code=t.uint32();break;default:t.skipType(7&p)}}return l},r}(),sK=Q.SubscribeResponse=function(){function r(t){if(this.errors=[],t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.seq=I.Long?I.Long.fromBits(0,0,!0):0,r.prototype.errors=I.emptyArray,r.encode=function(t,o){if(o||(o=ta.create()),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(8).uint64(t.seq),null!=t.errors&&t.errors.length)for(var l=0;l<t.errors.length;++l)Q.SubscribeResponse.SubscribeErrorsType.encode(t.errors[l],o.uint32(18).fork()).ldelim();return o},r.decode=function(t,o){t instanceof T||(t=T.create(t)),o=void 0===o?t.len:t.pos+o;for(var l=new Q.SubscribeResponse;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:l.seq=t.uint64();break;case 2:l.errors&&l.errors.length||(l.errors=[]),l.errors.push(Q.SubscribeResponse.SubscribeErrorsType.decode(t,t.uint32()));break;default:t.skipType(7&p)}}return l},r.SubscribeErrorsType=function(){function t(o){if(o)for(var l=Object.keys(o),p=0;p<l.length;++p)null!=o[l[p]]&&(this[l[p]]=o[l[p]])}return t.prototype.account="",t.prototype.code=0,t.encode=function(o,l){return l||(l=ta.create()),null!=o.account&&Object.hasOwnProperty.call(o,"account")&&l.uint32(10).string(o.account),null!=o.code&&Object.hasOwnProperty.call(o,"code")&&l.uint32(16).uint32(o.code),l},t.decode=function(o,l){o instanceof T||(o=T.create(o)),l=void 0===l?o.len:o.pos+l;for(var p=new Q.SubscribeResponse.SubscribeErrorsType;o.pos<l;){var _=o.uint32();switch(_>>>3){case 1:p.account=o.string();break;case 2:p.code=o.uint32();break;default:o.skipType(7&_)}}return p},t}(),r}(),tK=Object.freeze({__proto__:null,URI:kJ,Wrapper:gl,Ping:lJ,Pong:mJ,UserJoin:nJ,UserResp:oJ,UserQuit:pJ,UserDrop:qJ,UserTicketNearlyExpire:rJ,UserRenewTokenReq:sJ,UserRenewTokenResp:tJ,GroupEnter:uJ,GroupLeave:vJ,GroupReply:wJ,GroupLeaveNotice:ax,GroupEnterNotice:bx,Message:cx,Ack:dx,GroupDrop:xJ,GroupAllUsersList:yJ,GroupAllUsersResult:zJ,UserStatusList:AJ,UserStatusResult:BJ,UserAttributeGet:CJ,UserAttributeRet:DJ,UserAttributeSet:EJ,UserAttributeMod:FJ,UserAttributeDel:GJ,UserAttributeErr:HJ,UserAttributeKeysGet:IJ,UserAttributeKeysRet:JJ,UserAttributeRsp:KJ,GroupStatusList:LJ,GroupStatusResult:MJ,GroupCountNotice:NJ,GroupAttributeGet:OJ,GroupAttributeRet:PJ,GroupAttributeSet:QJ,GroupAttributeMod:RJ,GroupAttributeDel:SJ,GroupAttributeAlt:TJ,GroupAttributeRsp:UJ,GroupAttributeErr:VJ,GroupAttributeKeysGet:WJ,GroupAttributeKeysRet:XJ,SubscribeUserStatus:YJ,UnsubscribeUserStatus:ZJ,UserJoinNotice:$J,UserQuitNotice:aK,UserWaitNotice:bK,StateSubscribe:cK,StateUpdate:dK,StateSubscribeResult:eK,StateUnsubscribe:fK,StateSet:gK,StateModify:hK,StateRequestResult:iK,StateGet:jK,StateGetResult:kK,StateLockAcquire:lK,StateLockRelease:mK,StateLockAcquireResult:nK,StateLockUpdate:oK,StateLockReleaseResult:pK,StateLockDisable:qK,StateLockDisableResult:rK,SubscribeResponse:sK,default:Q}),uK=Math.ceil,ex=function(r){return function(t,o,l){var p=(t=String(Ec(t))).length;return l=void 0===l?" ":String(l),(o=xb(o))<=p||""==l?t:((p=At.call(l,uK((o-=p)/l.length))).length>o&&(p=p.slice(0,o)),r?t+p:p+t)}},vK=ex(!1),wK=ex(!0),fx=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(lh);wa({target:"String",proto:!0,forced:fx},{padEnd:function(r){return wK(this,r,1<arguments.length?arguments[1]:void 0)}}),wa({target:"Object",stat:!0},{entries:function(r){return BF(r)}});var xK=pd.f,gx="".endsWith,yK=Math.min,hx=no("endsWith"),zK=!hx&&!!function(){var r=xK(String.prototype,"endsWith");return r&&!r.writable}();wa({target:"String",proto:!0,forced:!zK&&!hx},{endsWith:function(r){var t=String(Ec(this));mo(r);var o=1<arguments.length?arguments[1]:void 0,l=xb(t.length);return o=void 0===o?l:yK(xb(o),l),l=String(r),gx?gx.call(t,l,o):t.slice(o-l.length,o)===l}}),jk("match",1,function(r,t,o){return[function(l){var p=Ec(this),_=null==l?void 0:l[r];return void 0!==_?_.call(l,p):new RegExp(l)[r](String(p))},function(l){var p=o(t,l,this);if(p.done)return p.value;if(l=ub(l),p=String(this),!l.global)return mh(l,p);var _=l.unicode;l.lastIndex=0;for(var R,M=[],P=0;null!==(R=mh(l,p));)R=String(R[0]),M[P]=R,""===R&&(l.lastIndex=hn(p,xb(l.lastIndex),_)),P++;return 0===P?null:M}]});var AK=pd.f,ix="".startsWith,BK=Math.min,jx=no("startsWith"),CK=!jx&&!!function(){var r=AK(String.prototype,"startsWith");return r&&!r.writable}();wa({target:"String",proto:!0,forced:!CK&&!jx},{startsWith:function(r){var t=String(Ec(this));mo(r);var o=xb(BK(1<arguments.length?arguments[1]:void 0,t.length)),l=String(r);return ix?ix.call(t,l,o):t.slice(o,o+l.length)===l}});var us=function(r){var t=/(%?)(%([jds]))/g,o=Array.prototype.slice.call(arguments,1);return o.length&&(r=r.replace(t,function(l,p,_,R){switch(_=o.shift(),R){case"s":_=""+_;break;case"d":_=Number(_);break;case"j":_=JSON.stringify(_)}return p?(o.unshift(_),l):_})),o.length&&(r+=" "+o.join(" ")),""+r.replace(/%{2,2}/g,"%")},DK=/\s/,EK=/^\s+/,kx=NaN,FK=/^[-+]0x[0-9a-f]+$/i,GK=/^0b[01]+$/i,HK=/^0o[0-7]+$/i,IK=parseInt,hl=function(r){if("number"==typeof r)return r;if(Sg(r))return kx;if(Kc(r)&&(r="function"==typeof r.valueOf?r.valueOf():r,r=Kc(r)?r+"":r),"string"!=typeof r)return 0===r?r:+r;if(r){for(var t=r.slice,o=r.length;o--&&DK.test(r.charAt(o)););r=t.call(r,0,o+1).replace(EK,"")}return(t=GK.test(r))||HK.test(r)?IK(r.slice(2),t?2:8):FK.test(r)?kx:+r},JK=Math.max,KK=Math.min,LK=function(r,t,o){function l(Da){var Ja=P,rl=F;return P=F=void 0,xe=Da,G=r.apply(rl,Ja)}function p(Da){var Ja=Da-we;return Da-=xe,void 0===we||Ja>=t||0>Ja||fa&&Da>=Ta}function _(){var Da=hd.Date.now();if(p(Da))return R(Da);var Ja=setTimeout,rl=Da-xe;Da=t-(Da-we),rl=fa?KK(Da,Ta-rl):Da,z=Ja(_,rl)}function R(Da){return z=void 0,da&&P?l(Da):(P=F=void 0,G)}function M(){var Da=hd.Date.now(),Ja=p(Da);if(P=arguments,F=this,we=Da,Ja){if(void 0===z)return xe=Da=we,z=setTimeout(_,t),_n?l(Da):G;if(fa)return clearTimeout(z),z=setTimeout(_,t),l(we)}return void 0===z&&(z=setTimeout(_,t)),G}var P,F,G,z,we,xe=0,_n=!1,fa=!1,da=!0;if("function"!=typeof r)throw new TypeError("Expected a function");if(t=hl(t)||0,Kc(o)){_n=!!o.leading;var Ta=(fa="maxWait"in o)?JK(hl(o.maxWait)||0,t):Ta;da="trailing"in o?!!o.trailing:da}return M.cancel=function(){void 0!==z&&clearTimeout(z),xe=0,P=we=F=z=void 0},M.flush=function(){return void 0===z?G:R(hd.Date.now())},M},vb;!function(r){r[r.ChannelSMsg=1]="ChannelSMsg",r[r.ChannelRMsg=2]="ChannelRMsg",r[r.P2pSMsgOfflineFlag=3]="P2pSMsgOfflineFlag",r[r.P2pRMsgOfflineFlag=4]="P2pRMsgOfflineFlag",r[r.P2pSMsgNoOfflineFlag=5]="P2pSMsgNoOfflineFlag",r[r.P2pRMsgNoOfflineFlag=6]="P2pRMsgNoOfflineFlag",r[r.P2pCallInvitation=7]="P2pCallInvitation",r[r.P2pCallCancellation=8]="P2pCallCancellation",r[r.P2pCallAcceptance=9]="P2pCallAcceptance",r[r.P2pCallRefusal=10]="P2pCallRefusal"}(vb||(vb={}));var Xe=function(r){function t(l,p){return ab(this,t),E(L(l=o.call(this,ts(l,p))),"originalError",void 0),E(L(l),"code",void 0),E(L(l),"serverCode",void 0),"number"==typeof p?l.code=p:"string"==typeof p?l.name=p:void 0!==p&&(p.originalError&&(l.originalError=p.originalError),void 0!==p.code&&(l.code=p.code),void 0!==p.serverCode&&(l.serverCode=p.serverCode)),l}nb(t,r);var o=ob(t);return t}(di(Error)),Ib=function(r){function t(l,p){return ab(this,t),E(L(l=o.call(this,ts(l,p))),"name","RtmInternalError"),E(L(l),"code",void 0),l.code=p,l}nb(t,r);var o=ob(t);return t}(di(Error)),il=function(){return function(r){function t(l){ab(this,t);var p=Object.keys(l);return o.call(this,l[p[0]],p[0])}nb(t,r);var o=ob(t);return t}(Ib)},rb=il(),Pc=function(r){function t(){ab(this,t);for(var l=arguments.length,p=Array(l),_=0;_<l;_++)p[_]=arguments[_];return E(L(l=o.call.apply(o,[this].concat(p))),"name","RtmTimeoutError"),l}nb(t,r);var o=ob(t);return t}(Xe),ja=function(r){function t(){ab(this,t);for(var l=arguments.length,p=Array(l),_=0;_<l;_++)p[_]=arguments[_];return E(L(l=o.call.apply(o,[this].concat(p))),"name","RtmInvalidArgumentError"),l}nb(t,r);var o=ob(t);return t}(Xe),ia=function(r){function t(){ab(this,t);for(var l=arguments.length,p=Array(l),_=0;_<l;_++)p[_]=arguments[_];return E(L(l=o.call.apply(o,[this].concat(p))),"name","RtmInvalidStatusError"),l}nb(t,r);var o=ob(t);return t}(Xe),Dc=function(r){function t(){ab(this,t);for(var l=arguments.length,p=Array(l),_=0;_<l;_++)p[_]=arguments[_];return E(L(l=o.call.apply(o,[this].concat(p))),"name","RtmLimitExceededError"),l}nb(t,r);var o=ob(t);return t}(Xe),Fc=function(r){function t(){ab(this,t);for(var l=arguments.length,p=Array(l),_=0;_<l;_++)p[_]=arguments[_];return E(L(l=o.call.apply(o,[this].concat(p))),"name","RtmInvokeTooOftenError"),l}nb(t,r);var o=ob(t);return t}(Xe),Pa=function(r){function t(){ab(this,t);for(var l=arguments.length,p=Array(l),_=0;_<l;_++)p[_]=arguments[_];return E(L(l=o.call.apply(o,[this].concat(p))),"name","RtmUnavailableError"),E(L(l),"serverCode",void 0),E(L(l),"statusCode",void 0),l}nb(t,r);var o=ob(t);return t}(Xe),Gh=function(r){function t(){ab(this,t);for(var l=arguments.length,p=Array(l),_=0;_<l;_++)p[_]=arguments[_];return E(L(l=o.call.apply(o,[this].concat(p))),"name","RtmUnauthenticatedError"),E(L(l),"serverCode",void 0),l}nb(t,r);var o=ob(t);return t}(Xe),id=function(r){function t(){ab(this,t);for(var l=arguments.length,p=Array(l),_=0;_<l;_++)p[_]=arguments[_];return E(L(l=o.call.apply(o,[this].concat(p))),"name","RtmUnknownError"),l}nb(t,r);var o=ob(t);return t}(Xe),uc=function(r){return r instanceof Pc||r instanceof ad},Sa=function(r){return r instanceof Xe},vg=function(r,t,o){return['Executing "%s.%s" timed out after %ds',r,t,o/1e3]},ss=new Map,MK=function(){var r=new Date;return"".concat(r.toISOString().split("T")[1].replace(/\..+/,""),".").concat(r.getMilliseconds())},vi=Object.keys,Vj=Object.entries.bind(Object),Sj=function(r){return"string"==typeof r?r.endsWith(".")?r:"".concat(r,"."):r},NK=Ga(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})});wa({target:"Date",proto:!0,forced:NK},{toJSON:function(r){r=Zb(this);var t=le(r);return"number"!=typeof t||isFinite(t)?r.toISOString():null}}),wa({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});var rC=Object.prototype.hasOwnProperty,lx=function(r,t,o){return JSON.stringify(As(r),t,o)};lx.ensureProperties=As;var OK=function(r,t){t=t||{};var o=Ia(r);if("string"===o&&0<r.length)return sC(r);if("number"===o&&isFinite(r))return t.long?864e5<=(t=Math.abs(r))?Xj(r,t,864e5,"day"):36e5<=t?Xj(r,t,36e5,"hour"):6e4<=t?Xj(r,t,6e4,"minute"):1e3<=t?Xj(r,t,1e3,"second"):r+" ms":864e5<=(t=Math.abs(r))?Math.round(r/864e5)+"d":36e5<=t?Math.round(r/36e5)+"h":6e4<=t?Math.round(r/6e4)+"m":1e3<=t?Math.round(r/1e3)+"s":r+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))},PK=function(r){function t(p){function _(){for(var P=arguments.length,F=Array(P),G=0;G<P;G++)F[G]=arguments[G];if(_.enabled){P=Number(new Date),_.diff=P-(R||P),_.prev=R,R=_.curr=P,F[0]=t.coerce(F[0]),"string"!=typeof F[0]&&F.unshift("%O");var z=0;F[0]=F[0].replace(/%([a-zA-Z%])/g,function(we,xe){return"%%"===we?"%":(z++,"function"==typeof(xe=t.formatters[xe])&&(we=xe.call(_,F[z]),F.splice(z,1),z--),we)}),t.formatArgs.call(_,F),(_.log||t.log).apply(_,F)}}var R,M=null;return _.namespace=p,_.useColors=t.useColors(),_.color=t.selectColor(p),_.extend=o,_.destroy=t.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:function(){return null===M?t.enabled(p):M},set:function(P){M=P}}),"function"==typeof t.init&&t.init(_),_}function o(p,_){return(p=t(this.namespace+(void 0===_?":":_)+p)).log=this.log,p}function l(p){return p.toString().substring(2,p.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(p){return p instanceof Error?p.stack||p.message:p},t.disable=function(){var p=[].concat(ra(t.names.map(l)),ra(t.skips.map(l).map(function(_){return"-"+_}))).join(",");return t.enable(""),p},t.enable=function(p){t.save(p),t.names=[],t.skips=[];var _,R=("string"==typeof p?p:"").split(/[\s,]+/),M=R.length;for(_=0;_<M;_++)R[_]&&("-"===(p=R[_].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+p.substr(1)+"$")):t.names.push(new RegExp("^"+p+"$")))},t.enabled=function(p){if("*"===p[p.length-1])return!0;var _,R=0;for(_=t.skips.length;R<_;R++)if(t.skips[R].test(p))return!1;for(R=0,_=t.names.length;R<_;R++)if(t.names[R].test(p))return!0;return!1},t.humanize=OK,t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(r).forEach(function(p){t[p]=r[p]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(p){for(var _=0,R=0;R<p.length;R++)_=(_<<5)-_+p.charCodeAt(R),_|=0;return t.colors[Math.abs(_)%t.colors.length]},t.enable(t.load()),t},mx=kc(function(r,t){t.formatArgs=function(p){if(p[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+p[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),this.useColors){var _="color: "+this.color;p.splice(1,0,_,"color: inherit");var R=0,M=0;p[0].replace(/%[a-zA-Z%]/g,function(P){"%%"!==P&&(R++,"%c"===P&&(M=R))}),p.splice(M,0,_)}},t.save=function(p){try{p?t.storage.setItem("debug",p):t.storage.removeItem("debug")}catch(_){}},t.load=function(){try{var p=t.storage.getItem("debug")}catch(_){}return!p&&"undefined"!=typeof process&&"env"in process&&(p=process.env.DEBUG),p},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))};e:{try{var o=localStorage;break e}catch(p){}o=void 0}var l;t.storage=o,t.destroy=(l=!1,function(){l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),t.colors="#0000CC #0000FF #0033CC #0033FF #0066CC #0066FF #0099CC #0099FF #00CC00 #00CC33 #00CC66 #00CC99 #00CCCC #00CCFF #3300CC #3300FF #3333CC #3333FF #3366CC #3366FF #3399CC #3399FF #33CC00 #33CC33 #33CC66 #33CC99 #33CCCC #33CCFF #6600CC #6600FF #6633CC #6633FF #66CC00 #66CC33 #9900CC #9900FF #9933CC #9933FF #99CC00 #99CC33 #CC0000 #CC0033 #CC0066 #CC0099 #CC00CC #CC00FF #CC3300 #CC3333 #CC3366 #CC3399 #CC33CC #CC33FF #CC6600 #CC6633 #CC9900 #CC9933 #CCCC00 #CCCC33 #FF0000 #FF0033 #FF0066 #FF0099 #FF00CC #FF00FF #FF3300 #FF3333 #FF3366 #FF3399 #FF33CC #FF33FF #FF6600 #FF6633 #FF9900 #FF9933 #FFCC00 #FFCC33".split(" "),t.log=console.debug||console.log||function(){},r.exports=PK(t),r.exports.formatters.j=function(p){try{return JSON.stringify(p)}catch(_){return"[UnexpectedJSONParseError]: "+_.message}}}),nx=mx("RTM:DEBUG"),Hh;nx.enabled=!1,function(r){r[r.Uploading=0]="Uploading",r[r.Free=1]="Free"}(Hh||(Hh={}));var QK=function(){function r(t){ab(this,r),E(this,"uploadRequest",void 0),E(this,"uploadState",void 0),E(this,"uploadResendCount",void 0),E(this,"LogCache",void 0),E(this,"LogsToPost",void 0),E(this,"processId",void 0),E(this,"sdkVersion",void 0),E(this,"logId",void 0),E(this,"rtmConfig",void 0),this.processId=t.processId,this.sdkVersion=t.sdkVersion,this.rtmConfig=t.rtmConfig,this.uploadRequest=t.uploadRequest,this.uploadState=Hh.Free,this.uploadResendCount=0,this.LogCache=[],this.LogsToPost=[],this.logId=0}return Qb(r,[{key:"upload",value:function(t){this.LogCache.push(t),this.uploadState===Hh.Free&&(this.LogsToPost=this.LogCache.splice(0,40>this.LogCache.length?this.LogCache.length:40),this.postLog(this.LogsToPost))}},{key:"postLog",value:function(t){var o=this;this.uploadState=Hh.Uploading,setTimeout(za(W.mark(function l(){var p,_,R;return W.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return p={sdk_version:o.sdkVersion,process_id:o.processId,payload:JSON.stringify(t)},M.prev=1,M.next=4,o.uploadRequest(p,null!==(_=o.rtmConfig.enableCloudProxy)&&void 0!==_&&_);case 4:if(!Bm){M.next=6;break}throw Error("RTM is busy");case 6:M.next=13;break;case 8:return M.prev=8,M.t0=M.catch(1),R=2>o.uploadResendCount++?2e3:1e4,setTimeout(function(){return o.postLog(o.LogsToPost)},R),M.abrupt("return");case 13:if(nx('The logs uploaded for "process-'.concat(hj,'"')),0!==o.LogCache.length){M.next=17;break}return o.uploadState=Hh.Free,M.abrupt("return");case 17:o.uploadResendCount=0,o.LogsToPost=o.LogCache.splice(0,40>o.LogCache.length?o.LogCache.length:40),o.postLog(o.LogsToPost);case 20:case"end":return M.stop()}},l,null,[[1,8]])})),wg.getParameter("LOG_UPLOAD_INTERVAL"))}}]),r}(),ox=function(r,t,o,l,p,_,R,M){var P=0;for(R=!!R&&tf(R,M,3);P<l;){if(P in o){if(M=R?R(o[P],P,t):o[P],0<_&&uf(M))p=ox(r,t,M,xb(M.length),p,_-1)-1;else{if(9007199254740991<=p)throw TypeError("Exceed the acceptable array length");r[p]=M}p++}P++}return p},px=ox;wa({target:"Array",proto:!0},{flat:function(){var r=arguments.length?arguments[0]:void 0,t=Zb(this),o=xb(t.length),l=Ei(t,0);return l.length=px(l,t,t,o,0,void 0===r?1:Rd(r)),l}});var RK=["CODE"],jd,Gf,oa;!function(r){r.CHINA="CN",r.ASIA="AS",r.NORTH_AMERICA="NA",r.EUROPE="EU",r.JAPAN="JP",r.INDIA="IN",r.OCEANIA="OC",r.SOUTH_AMERICA="SA",r.AFRICA="AF",r.OVERSEA="OVERSEA",r.GLOBAL="GLOBAL"}(oa||(oa={}));var SK={CN:oa.CHINA,NA:oa.NORTH_AMERICA,EU:oa.EUROPE,AS:oa.ASIA,JP:oa.JAPAN,IN:oa.INDIA,GLOB:oa.GLOBAL,AF:oa.AFRICA,OC:oa.OVERSEA,OVS:oa.OVERSEA,SA:oa.SOUTH_AMERICA},Yj=ys((jd={},E(jd,oa.ASIA,{CODE:oa.ASIA,AP_DOMAINS:["ap-web-1-asia.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-asia.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_AP:["proxy-ap-web-asia.agora.io"],PROXY_NGINX:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]}),E(jd,oa.NORTH_AMERICA,{CODE:oa.NORTH_AMERICA,AP_DOMAINS:["ap-web-1-north-america.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-north-america.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_AP:["proxy-ap-web-america.agora.io"],PROXY_NGINX:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]}),E(jd,oa.EUROPE,{CODE:oa.EUROPE,AP_DOMAINS:["ap-web-1-europe.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-europe.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_AP:["proxy-ap-web-europe.agora.io"],PROXY_NGINX:["europe.webrtc-cloud-proxy.sd-rtn.com"]}),E(jd,oa.JAPAN,{CODE:oa.JAPAN,AP_DOMAINS:["ap-web-1-japan.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-japan.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_AP:["proxy-ap-web-japan.agora.io"],PROXY_NGINX:["japan.webrtc-cloud-proxy.sd-rtn.com"]}),E(jd,oa.INDIA,{CODE:oa.INDIA,AP_DOMAINS:["ap-web-1-india.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-india.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_AP:["proxy-ap-web-india.agora.io"],PROXY_NGINX:["india.webrtc-cloud-proxy.sd-rtn.com"]}),E(jd,oa.OVERSEA,{CODE:oa.OVERSEA,AP_DOMAINS:["ap-web-1-oversea.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_AP:["proxy-ap-web-oversea.agora.io"],PROXY_NGINX:["webrtc-cloud-proxy.agora.io"]}),E(jd,oa.GLOBAL,{CODE:oa.GLOBAL,AP_DOMAINS:["ap-web-1.agora.io","ap-web-2.agora.io"],AP_BACKUP_DOMAINS:["ap-web-3.agora.io","ap-web-4.agora.io"],EVENT_REPORT_DOMAIN:["webcollector-rtm.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["webcollector-1.agora.io"],LOG_UPLOAD_SERVER:["logservice-rtm.agora.io"],PROXY_AP:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],PROXY_NGINX:["webrtc-cloud-proxy.sd-rtn.com"]}),E(jd,oa.OCEANIA,{CODE:oa.OCEANIA,AP_DOMAINS:["ap-web-1-oceania.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-oceania.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_AP:["proxy-ap-web-oceania.agora.io"],PROXY_NGINX:["oceania.webrtc-cloud-proxy.sd-rtn.com"]}),E(jd,oa.SOUTH_AMERICA,{CODE:oa.SOUTH_AMERICA,AP_DOMAINS:["ap-web-1-south-america.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-south-america.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_AP:["proxy-ap-web-south-america.agora.io"],PROXY_NGINX:["south-america.webrtc-cloud-proxy.sd-rtn.com"]}),E(jd,oa.AFRICA,{CODE:oa.AFRICA,AP_DOMAINS:["ap-web-1-africa.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-africa.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_AP:["proxy-ap-web-africa.agora.io"],PROXY_NGINX:["africa.webrtc-cloud-proxy.sd-rtn.com"]}),E(jd,oa.CHINA,{CODE:oa.CHINA,AP_DOMAINS:["webrtc2-2.ap.sd-rtn.com"],AP_BACKUP_DOMAINS:["webrtc2-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_AP:["proxy-ap-web.agoraio.cn"],PROXY_NGINX:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),jd)),wi=(Gf={},E(Gf,oa.ASIA,[oa.CHINA,oa.JAPAN,oa.INDIA]),E(Gf,oa.EUROPE,[]),E(Gf,oa.NORTH_AMERICA,[]),E(Gf,oa.SOUTH_AMERICA,[]),E(Gf,oa.OCEANIA,[]),E(Gf,oa.AFRICA,[]),Gf),qx=[oa.OVERSEA,oa.GLOBAL,oa.CHINA,oa.NORTH_AMERICA,oa.EUROPE,oa.ASIA,oa.JAPAN,oa.INDIA,oa.OCEANIA,oa.SOUTH_AMERICA,oa.AFRICA],Bs=function(r){return Object.values(wi).flat().includes(r)},uC=function(r){var t;return null===(t=Vj(wi).find(function(o){return(o=Lb(o,2))[1].includes(r)}))||void 0===t?void 0:t[0]},TK=function(r){return r.sort(function(t,o){return qx.indexOf(t)-qx.indexOf(o)})},eh=function(r){var t=new Set;if(0===(r=TK(r).slice(0,3).map(function(o){var l=Yj[o];if(void 0===l)throw new Ib("invalid area key");return o=l.CODE,l=em(l,RK),t.add(o),l})).length)throw new Ib("areas cannot be empty");return tb({CODES:t},r.reduce(function(o,l){for(var p=0,_=Vj(o);p<_.length;p++){var R=Lb(_[p],2),M=R[0];R=R[1],o[M]=Array.from(new Set([].concat(ra(l[M]),ra(R))))}return o}))},Ba,rx=function(){var r=za(W.mark(function t(o,l){var p,_,R,M,P,F=arguments;return W.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(!(2<(_=2<F.length&&void 0!==F[2]?F[2]:0))){G.next=3;break}return G.abrupt("return");case 3:return R={withCredentials:!0,body:o,timeout:2e4},M=0<_?(null==Ba?void 0:Ba.LOG_UPLOAD_SERVER[0])||"rtm.logservice.sd-rtn.com":(null==Ba?void 0:Ba.LOG_UPLOAD_SERVER[0])||"logservice-rtm.agora.io",P=l?"https://".concat(null!==(p=null==Ba?void 0:Ba.PROXY_NGINX[0])&&void 0!==p?p:"webrtc-cloud-proxy.sd-rtn.com","/ls/?h=").concat(M,"&p=443&d=upload/v1"):"https://".concat(M,"/upload/v1"),G.next=8,Tj(P,R).catch(function(z){return rx(o,l,_+1)});case 8:case"end":return G.stop()}},t)}));return function(t,o){return r.apply(this,arguments)}}(),sx=new QK({processId:"process-".concat(hj),sdkVersion:"Agora_RTM_SDK_for_Web_".concat("v1.5.1-67-g0f6d3600"),uploadRequest:rx,rtmConfig:{}}),pp="text payload rawMessage thumbnail attributeInfos keys value extra".split(" "),tx="account ticket uid detail token account fileName cname user group key origin users src dst lastUpdateUserId channel cert wan_ip".split(" "),ux=["serverReceivedTs","hasPeerReceived","messageType","enableNotificationToChannelMembers","lastUpdateTs"],UK="ChannelMessage MemberLeft MessageFromPeer LocalInvitationRefused LocalInvitationAccepted RemoteInvitationCanceled PeersOnlineStatusChanged AttributesUpdated MemberJoined".split(" "),fh=function(r){if("string"==typeof r)return wb(r);if(Array.isArray(r)&&r.every(function(_){return"string"==typeof _}))return r.map(function(_){return wb(_)});if(!or(r)){for(var t={},o=0;o<ux.length;o++){var l=ux[o];l in r&&(t[l]=r[l])}if(0<Object.keys(t).length)return t;if(5>Object.keys(r).length){for(o=0,r=Object.entries(r);o<r.length;o++){var p=Lb(r[o],2);l=p[0],p=p[1],pp.includes(l)?t[l]="[Hidden Info]":t[wb(l)]="string"==typeof p?wb(p):"[Sensitive Info]"}return t}return"[Sensitive Info]"}return r},vx=function(r){return"object"===Ia(r)?Lg(r)?xs(Pg(r,5),pp,tx):r.constructor&&r.constructor.name:r},wx=function(r,t){return r instanceof Error?r.message:"string"!=typeof r?JSON.stringify(xs(Pg(r,5),pp,tx)):(t=t.map(function(o){return o instanceof Error?o.message:"object"===Ia(o)?lx(Array.isArray(o)?o.map(vx):vx(o)):o}),us.apply(void 0,[r.replace(/%[%Oo]/g,function(o){return"%%"===o?"%":"%o"===o||"%O"===o?"%s":o})].concat(ra(t))))},VK=1,xx=function(r,t,o){var l=mx(r);return l.enabled=!0,l.log=o,l.useColors=!1,function(p){for(var _=arguments.length,R=Array(1<_?_-1:0),M=1;M<_;M++)R[M-1]=arguments[M];if(t.enableLogUpload){_=Sj(p);var P=wx(_,R);sx.upload({log_item_id:"".concat(VK++),log_level:r,payload_str:"[".concat(MK(),"] ").concat(r," - ").concat(256<P.length?P.slice(0,256):P)})}switch(_=function(F){var G=P||wx(Sj(p),R),z=Yd.LOG_HANDLER;"function"==typeof z&&z({level:F,message:G}),l(G)},r){case"RTM:INFO":t.logFilter.info&&_("log");break;case"RTM:WARN":t.logFilter.warn&&_("warning");break;case"RTM:ERROR":t.logFilter.error&&_("error");break;case"RTM:TRACK":t.logFilter.track&&_("log");break;case"RTM:MSG:RECV":case"RTM:MSG:SEND":case"RTM:DEBUG":t.logFilter.debug&&_("debug")}}},qp,yx=function(r){return function(t){var o=1===qp||void 0===r?"":"Ins#".concat(r," ");return"".concat(o).concat(t)}},rp=function(r,t,o){var l=yx(qp);return xx("RTM:".concat(t),o,function(p){return r(l(p))})},Dd=function(){return function(r){function t(l,p){var _=2<arguments.length&&void 0!==arguments[2]&&arguments[2];ab(this,t);var R=o.call(this);if(E(L(R),"logError",void 0),E(L(R),"invokeTracker",void 0),E(L(R),"resultTracker",void 0),E(L(R),"errorTracker",void 0),E(L(R),"eventTracker",void 0),E(L(R),"info",void 0),E(L(R),"warn",void 0),E(L(R),"log",void 0),E(L(R),"genLogger",void 0),E(L(R),"loggerId",void 0),E(L(R),"logger",void 0),E(L(R),"name",void 0),R.logger=l,R.name=p,R.loggerId=l.loggerId,R.info=l.info,R.warn=l.warn,R.logError=l.logError,R.genLogger=l.genLogger,R.log=l.genLogger("RTM:DEBUG","<".concat(p,"> ")),R.invokeTracker=l.genTracker("Invoke"),R.eventTracker=l.genTracker("Event"),R.resultTracker=l.genTracker("Result"),R.errorTracker=l.genTracker("Error"),_){var M=R.emit.bind(L(R));R.emit=function(){for(var P=arguments.length,F=Array(P),G=0;G<P;G++)F[G]=arguments[G];P=F[0],G=F.slice(1);var z=UK.includes(P);R.eventTracker.apply(R,["%s: ".concat(0<G.length?"%s emitted with args: ".concat(G.map(function(){return"%o"})):"%s emitted"),p,P].concat(ra(z?G.map(fh):G)));try{M.apply(void 0,F)}catch(we){R.logError("Caught in the callback function of the event %s",P,we)}}}return R}nb(t,r);var o=ob(t);return t}(kb)},WK=function(r){return rp(console.log.bind(console),"INFO",r)},XK=function(r){return rp(console.warn.bind(console),"WARN",r)},YK=function(r){return rp(console.error.bind(console),"ERROR",r)},zx=function(r,t){return function(o){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",p=yx(r),_=console.debug.bind(console),R=xx(o,t,function(M){return _(p(M))});return function(M){for(var P=arguments.length,F=Array(1<P?P-1:0),G=1;G<P;G++)F[G-1]=arguments[G];return R.apply(void 0,[l+M].concat(F))}}},ZK=function(r,t){return function(o){return zx(r,t)("RTM:TRACK","[".concat(o,"] "))}},Tm=Q.URI,wC=gl,$K=em(tK,["Wrapper"]),Cs=Oo($K,"URI"),Ax=function(r,t){var o=-1,l=r.length,p=l-1;for(t=void 0===t?l:t;++o<t;){var _=r[l=Uw(o,p)];r[l]=r[o],r[o]=_}return r.length=t,r},aL=function(r){return Ax(jm(r))},bL=function(r){return Ax(Vm(r))},Ih=function(r){return(lc(r)?aL:bL)(r)},Jh={0:9591,1:9593},xg=function(r){var t=ui(null);return"https://".concat(t?null:r,"/api/v1")},cL=Wb.apply(void 0,ra(Ih(["web-1.ap.sd-rtn.com","web-2.ap.sd-rtn.com"].map(xg)))),dL=Wb.apply(void 0,ra(Ih(["ap-web-1.agora.io","ap-web-2.agora.io"].map(xg)))),eL=Wb.apply(void 0,ra(Ih(["web-3.ap.sd-rtn.com","web-4.ap.sd-rtn.com"].map(xg)))),fL=Wb.apply(void 0,ra(Ih(["ap-web-3.agora.io","ap-web-4.agora.io"].map(xg)))),vc=ae.Writer,O=ae.util,bc=ae.roots.default||(ae.roots.default={}),gL=bc.Session=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.sid="",r.prototype.userId="",r.prototype.lts=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.elapse=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.appId="",r.prototype.ver="",r.prototype.buildno=0,r.prototype.installId="",r.prototype.os=0,r.prototype.did="",r.prototype.index=null,r.prototype.token="",r.prototype.version=0,r.prototype.subVersion=0,r.encode=function(t,o){return o||(o=vc.create()),null!=t.sid&&Object.hasOwnProperty.call(t,"sid")&&o.uint32(10).string(t.sid),null!=t.userId&&Object.hasOwnProperty.call(t,"userId")&&o.uint32(18).string(t.userId),null!=t.lts&&Object.hasOwnProperty.call(t,"lts")&&o.uint32(24).int64(t.lts),null!=t.elapse&&Object.hasOwnProperty.call(t,"elapse")&&o.uint32(32).int64(t.elapse),null!=t.appId&&Object.hasOwnProperty.call(t,"appId")&&o.uint32(42).string(t.appId),null!=t.ver&&Object.hasOwnProperty.call(t,"ver")&&o.uint32(50).string(t.ver),null!=t.buildno&&Object.hasOwnProperty.call(t,"buildno")&&o.uint32(56).int32(t.buildno),null!=t.installId&&Object.hasOwnProperty.call(t,"installId")&&o.uint32(66).string(t.installId),null!=t.os&&Object.hasOwnProperty.call(t,"os")&&o.uint32(128).int32(t.os),null!=t.did&&Object.hasOwnProperty.call(t,"did")&&o.uint32(138).string(t.did),null!=t.index&&Object.hasOwnProperty.call(t,"index")&&bc.Session.CommonIndex.encode(t.index,o.uint32(162).fork()).ldelim(),null!=t.token&&Object.hasOwnProperty.call(t,"token")&&o.uint32(170).string(t.token),null!=t.version&&Object.hasOwnProperty.call(t,"version")&&o.uint32(176).int32(t.version),null!=t.subVersion&&Object.hasOwnProperty.call(t,"subVersion")&&o.uint32(184).int32(t.subVersion),o},r.CommonIndex=function(){function t(o){if(o)for(var l=Object.keys(o),p=0;p<l.length;++p)null!=o[l[p]]&&(this[l[p]]=o[l[p]])}return t.prototype.index1="",t.prototype.index2="",t.prototype.index3="",t.encode=function(o,l){return l||(l=vc.create()),null!=o.index1&&Object.hasOwnProperty.call(o,"index1")&&l.uint32(10).string(o.index1),null!=o.index2&&Object.hasOwnProperty.call(o,"index2")&&l.uint32(18).string(o.index2),null!=o.index3&&Object.hasOwnProperty.call(o,"index3")&&l.uint32(26).string(o.index3),l},t}(),r}(),hL=bc.ApEvent=function(){function r(t){if(this.linkServerList=[],t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.sid="",r.prototype.userId="",r.prototype.lts=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.elapse=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.apAddr="",r.prototype.linkServerList=O.emptyArray,r.prototype.errCode=0,r.prototype.serverErrCode=0,r.prototype.isp="",r.prototype.opId=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.envId=0,r.prototype.flag=0,r.prototype.area="",r.encode=function(t,o){if(o||(o=vc.create()),null!=t.sid&&Object.hasOwnProperty.call(t,"sid")&&o.uint32(10).string(t.sid),null!=t.userId&&Object.hasOwnProperty.call(t,"userId")&&o.uint32(18).string(t.userId),null!=t.lts&&Object.hasOwnProperty.call(t,"lts")&&o.uint32(24).int64(t.lts),null!=t.elapse&&Object.hasOwnProperty.call(t,"elapse")&&o.uint32(32).int64(t.elapse),null!=t.apAddr&&Object.hasOwnProperty.call(t,"apAddr")&&o.uint32(50).string(t.apAddr),null!=t.linkServerList&&t.linkServerList.length)for(var l=0;l<t.linkServerList.length;++l)o.uint32(58).string(t.linkServerList[l]);return null!=t.errCode&&Object.hasOwnProperty.call(t,"errCode")&&o.uint32(72).int32(t.errCode),null!=t.serverErrCode&&Object.hasOwnProperty.call(t,"serverErrCode")&&o.uint32(80).int32(t.serverErrCode),null!=t.isp&&Object.hasOwnProperty.call(t,"isp")&&o.uint32(90).string(t.isp),null!=t.opId&&Object.hasOwnProperty.call(t,"opId")&&o.uint32(96).int64(t.opId),null!=t.envId&&Object.hasOwnProperty.call(t,"envId")&&o.uint32(104).int32(t.envId),null!=t.flag&&Object.hasOwnProperty.call(t,"flag")&&o.uint32(112).int32(t.flag),null!=t.area&&Object.hasOwnProperty.call(t,"area")&&o.uint32(122).string(t.area),o},r}(),iL=bc.ApRequest=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.sid="",r.prototype.userId="",r.prototype.lts=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.elapse=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.apAddr="",r.prototype.opId=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.envId=0,r.prototype.flag=0,r.encode=function(t,o){return o||(o=vc.create()),null!=t.sid&&Object.hasOwnProperty.call(t,"sid")&&o.uint32(10).string(t.sid),null!=t.userId&&Object.hasOwnProperty.call(t,"userId")&&o.uint32(18).string(t.userId),null!=t.lts&&Object.hasOwnProperty.call(t,"lts")&&o.uint32(24).int64(t.lts),null!=t.elapse&&Object.hasOwnProperty.call(t,"elapse")&&o.uint32(32).int64(t.elapse),null!=t.apAddr&&Object.hasOwnProperty.call(t,"apAddr")&&o.uint32(42).string(t.apAddr),null!=t.opId&&Object.hasOwnProperty.call(t,"opId")&&o.uint32(48).int64(t.opId),null!=t.envId&&Object.hasOwnProperty.call(t,"envId")&&o.uint32(56).int32(t.envId),null!=t.flag&&Object.hasOwnProperty.call(t,"flag")&&o.uint32(64).int32(t.flag),o},r}(),jL=bc.LinkLoginRequest=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.sid="",r.prototype.userId="",r.prototype.lts=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.elapse=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.destServerIp="",r.prototype.linkId=0,r.encode=function(t,o){return o||(o=vc.create()),null!=t.sid&&Object.hasOwnProperty.call(t,"sid")&&o.uint32(10).string(t.sid),null!=t.userId&&Object.hasOwnProperty.call(t,"userId")&&o.uint32(18).string(t.userId),null!=t.lts&&Object.hasOwnProperty.call(t,"lts")&&o.uint32(24).int64(t.lts),null!=t.elapse&&Object.hasOwnProperty.call(t,"elapse")&&o.uint32(32).int64(t.elapse),null!=t.destServerIp&&Object.hasOwnProperty.call(t,"destServerIp")&&o.uint32(42).string(t.destServerIp),null!=t.linkId&&Object.hasOwnProperty.call(t,"linkId")&&o.uint32(48).int32(t.linkId),o},r}(),kL=bc.Link=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.sid="",r.prototype.userId="",r.prototype.lts=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.elapse=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.ec=0,r.prototype.sc=0,r.prototype.destServerIp="",r.prototype.ackedServerIp="",r.prototype.responseTime=0,r.encode=function(t,o){return o||(o=vc.create()),null!=t.sid&&Object.hasOwnProperty.call(t,"sid")&&o.uint32(10).string(t.sid),null!=t.userId&&Object.hasOwnProperty.call(t,"userId")&&o.uint32(18).string(t.userId),null!=t.lts&&Object.hasOwnProperty.call(t,"lts")&&o.uint32(24).int64(t.lts),null!=t.elapse&&Object.hasOwnProperty.call(t,"elapse")&&o.uint32(32).int64(t.elapse),null!=t.ec&&Object.hasOwnProperty.call(t,"ec")&&o.uint32(40).int32(t.ec),null!=t.sc&&Object.hasOwnProperty.call(t,"sc")&&o.uint32(48).int32(t.sc),null!=t.destServerIp&&Object.hasOwnProperty.call(t,"destServerIp")&&o.uint32(58).string(t.destServerIp),null!=t.ackedServerIp&&Object.hasOwnProperty.call(t,"ackedServerIp")&&o.uint32(66).string(t.ackedServerIp),null!=t.responseTime&&Object.hasOwnProperty.call(t,"responseTime")&&o.uint32(72).int32(t.responseTime),o},r}(),lL=bc.Logout=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.sid="",r.prototype.userId="",r.prototype.lts=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.elapse=O.Long?O.Long.fromBits(0,0,!1):0,r.encode=function(t,o){return o||(o=vc.create()),null!=t.sid&&Object.hasOwnProperty.call(t,"sid")&&o.uint32(10).string(t.sid),null!=t.userId&&Object.hasOwnProperty.call(t,"userId")&&o.uint32(18).string(t.userId),null!=t.lts&&Object.hasOwnProperty.call(t,"lts")&&o.uint32(24).int64(t.lts),null!=t.elapse&&Object.hasOwnProperty.call(t,"elapse")&&o.uint32(32).int64(t.elapse),o},r}(),mL=bc.KickedOff=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.sid="",r.prototype.userId="",r.prototype.lts=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.elapse=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.linkId=0,r.prototype.code=0,r.prototype.server="",r.prototype.serverCode=0,r.encode=function(t,o){return o||(o=vc.create()),null!=t.sid&&Object.hasOwnProperty.call(t,"sid")&&o.uint32(10).string(t.sid),null!=t.userId&&Object.hasOwnProperty.call(t,"userId")&&o.uint32(18).string(t.userId),null!=t.lts&&Object.hasOwnProperty.call(t,"lts")&&o.uint32(24).int64(t.lts),null!=t.elapse&&Object.hasOwnProperty.call(t,"elapse")&&o.uint32(32).int64(t.elapse),null!=t.linkId&&Object.hasOwnProperty.call(t,"linkId")&&o.uint32(48).int32(t.linkId),null!=t.code&&Object.hasOwnProperty.call(t,"code")&&o.uint32(56).int32(t.code),null!=t.server&&Object.hasOwnProperty.call(t,"server")&&o.uint32(66).string(t.server),null!=t.serverCode&&Object.hasOwnProperty.call(t,"serverCode")&&o.uint32(72).int32(t.serverCode),o},r}(),nL=bc.ChnJoin=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.sid="",r.prototype.userId="",r.prototype.lts=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.elapse=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.cname="",r.prototype.errCode=0,r.encode=function(t,o){return o||(o=vc.create()),null!=t.sid&&Object.hasOwnProperty.call(t,"sid")&&o.uint32(10).string(t.sid),null!=t.userId&&Object.hasOwnProperty.call(t,"userId")&&o.uint32(18).string(t.userId),null!=t.lts&&Object.hasOwnProperty.call(t,"lts")&&o.uint32(24).int64(t.lts),null!=t.elapse&&Object.hasOwnProperty.call(t,"elapse")&&o.uint32(32).int64(t.elapse),null!=t.cname&&Object.hasOwnProperty.call(t,"cname")&&o.uint32(50).string(t.cname),null!=t.errCode&&Object.hasOwnProperty.call(t,"errCode")&&o.uint32(56).int32(t.errCode),o},r}(),oL=bc.ChnJoinRes=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.sid="",r.prototype.userId="",r.prototype.lts=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.elapse=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.cname="",r.prototype.errCode=0,r.prototype.serverErrCode=0,r.encode=function(t,o){return o||(o=vc.create()),null!=t.sid&&Object.hasOwnProperty.call(t,"sid")&&o.uint32(10).string(t.sid),null!=t.userId&&Object.hasOwnProperty.call(t,"userId")&&o.uint32(18).string(t.userId),null!=t.lts&&Object.hasOwnProperty.call(t,"lts")&&o.uint32(24).int64(t.lts),null!=t.elapse&&Object.hasOwnProperty.call(t,"elapse")&&o.uint32(32).int64(t.elapse),null!=t.cname&&Object.hasOwnProperty.call(t,"cname")&&o.uint32(50).string(t.cname),null!=t.errCode&&Object.hasOwnProperty.call(t,"errCode")&&o.uint32(56).int32(t.errCode),null!=t.serverErrCode&&Object.hasOwnProperty.call(t,"serverErrCode")&&o.uint32(64).int32(t.serverErrCode),o},r}(),pL=bc.ChnLeave=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.sid="",r.prototype.userId="",r.prototype.lts=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.elapse=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.cname="",r.prototype.errCode=0,r.encode=function(t,o){return o||(o=vc.create()),null!=t.sid&&Object.hasOwnProperty.call(t,"sid")&&o.uint32(10).string(t.sid),null!=t.userId&&Object.hasOwnProperty.call(t,"userId")&&o.uint32(18).string(t.userId),null!=t.lts&&Object.hasOwnProperty.call(t,"lts")&&o.uint32(24).int64(t.lts),null!=t.elapse&&Object.hasOwnProperty.call(t,"elapse")&&o.uint32(32).int64(t.elapse),null!=t.cname&&Object.hasOwnProperty.call(t,"cname")&&o.uint32(50).string(t.cname),null!=t.errCode&&Object.hasOwnProperty.call(t,"errCode")&&o.uint32(56).int32(t.errCode),o},r}(),qL=bc.ConnectionStateChange=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.sid="",r.prototype.userId="",r.prototype.lts=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.elapse=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.oldState=0,r.prototype.newState=0,r.prototype.reason=0,r.prototype.reconnId=0,r.encode=function(t,o){return o||(o=vc.create()),null!=t.sid&&Object.hasOwnProperty.call(t,"sid")&&o.uint32(10).string(t.sid),null!=t.userId&&Object.hasOwnProperty.call(t,"userId")&&o.uint32(18).string(t.userId),null!=t.lts&&Object.hasOwnProperty.call(t,"lts")&&o.uint32(24).int64(t.lts),null!=t.elapse&&Object.hasOwnProperty.call(t,"elapse")&&o.uint32(32).int64(t.elapse),null!=t.oldState&&Object.hasOwnProperty.call(t,"oldState")&&o.uint32(40).int32(t.oldState),null!=t.newState&&Object.hasOwnProperty.call(t,"newState")&&o.uint32(48).int32(t.newState),null!=t.reason&&Object.hasOwnProperty.call(t,"reason")&&o.uint32(56).int32(t.reason),null!=t.reconnId&&Object.hasOwnProperty.call(t,"reconnId")&&o.uint32(64).int32(t.reconnId),o},r}(),Bx=bc.RtmSdkMessageCount=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.lts=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.vid=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.sid="",r.prototype.messagecategory=0,r.prototype.reportsequence=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.sentcount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.receivedcount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.peerack10mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.peerack25mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.peerack50mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.peerack75mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.peerack100mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.peerack150mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.peerack200mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.peerack250mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.peerack300mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.peerack400mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.peerack500mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.peerack600mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.peerack800mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.peerack1000mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.peerack2000mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.peerack3000mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.peerack5000mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.peerack7000mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.peerackslowcount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.norecipientack10mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.norecipientack25mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.norecipientack50mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.norecipientack75mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.norecipientack100mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.norecipientack150mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.norecipientack200mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.norecipientack250mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.norecipientack300mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.norecipientack400mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.norecipientack500mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.norecipientack600mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.norecipientack800mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.norecipientack1000mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.norecipientack2000mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.norecipientack3000mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.norecipientack5000mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.norecipientack7000mscount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.norecipientackslowcount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.acktimeoutcount=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.apimajorversion=0,r.prototype.apiminorversion=0,r.prototype.os=0,r.prototype.toooftencount=0,r.prototype.receiverofflinecount=0,r.prototype.invalidmessagecount=0,r.prototype.unknowerrorcount=0,r.prototype.servercachedcount=0,r.prototype.timeoutcount=0,r.prototype.successcount=0,r.prototype.userid="",r.encode=function(t,o){return o||(o=vc.create()),null!=t.lts&&Object.hasOwnProperty.call(t,"lts")&&o.uint32(8).int64(t.lts),null!=t.vid&&Object.hasOwnProperty.call(t,"vid")&&o.uint32(16).int64(t.vid),null!=t.sid&&Object.hasOwnProperty.call(t,"sid")&&o.uint32(26).string(t.sid),null!=t.messagecategory&&Object.hasOwnProperty.call(t,"messagecategory")&&o.uint32(32).int32(t.messagecategory),null!=t.reportsequence&&Object.hasOwnProperty.call(t,"reportsequence")&&o.uint32(40).int64(t.reportsequence),null!=t.sentcount&&Object.hasOwnProperty.call(t,"sentcount")&&o.uint32(48).int64(t.sentcount),null!=t.receivedcount&&Object.hasOwnProperty.call(t,"receivedcount")&&o.uint32(56).int64(t.receivedcount),null!=t.peerack10mscount&&Object.hasOwnProperty.call(t,"peerack10mscount")&&o.uint32(64).int64(t.peerack10mscount),null!=t.peerack25mscount&&Object.hasOwnProperty.call(t,"peerack25mscount")&&o.uint32(72).int64(t.peerack25mscount),null!=t.peerack50mscount&&Object.hasOwnProperty.call(t,"peerack50mscount")&&o.uint32(80).int64(t.peerack50mscount),null!=t.peerack75mscount&&Object.hasOwnProperty.call(t,"peerack75mscount")&&o.uint32(88).int64(t.peerack75mscount),null!=t.peerack100mscount&&Object.hasOwnProperty.call(t,"peerack100mscount")&&o.uint32(96).int64(t.peerack100mscount),null!=t.peerack150mscount&&Object.hasOwnProperty.call(t,"peerack150mscount")&&o.uint32(104).int64(t.peerack150mscount),null!=t.peerack200mscount&&Object.hasOwnProperty.call(t,"peerack200mscount")&&o.uint32(112).int64(t.peerack200mscount),null!=t.peerack250mscount&&Object.hasOwnProperty.call(t,"peerack250mscount")&&o.uint32(120).int64(t.peerack250mscount),null!=t.peerack300mscount&&Object.hasOwnProperty.call(t,"peerack300mscount")&&o.uint32(128).int64(t.peerack300mscount),null!=t.peerack400mscount&&Object.hasOwnProperty.call(t,"peerack400mscount")&&o.uint32(136).int64(t.peerack400mscount),null!=t.peerack500mscount&&Object.hasOwnProperty.call(t,"peerack500mscount")&&o.uint32(144).int64(t.peerack500mscount),null!=t.peerack600mscount&&Object.hasOwnProperty.call(t,"peerack600mscount")&&o.uint32(152).int64(t.peerack600mscount),null!=t.peerack800mscount&&Object.hasOwnProperty.call(t,"peerack800mscount")&&o.uint32(160).int64(t.peerack800mscount),null!=t.peerack1000mscount&&Object.hasOwnProperty.call(t,"peerack1000mscount")&&o.uint32(168).int64(t.peerack1000mscount),null!=t.peerack2000mscount&&Object.hasOwnProperty.call(t,"peerack2000mscount")&&o.uint32(176).int64(t.peerack2000mscount),null!=t.peerack3000mscount&&Object.hasOwnProperty.call(t,"peerack3000mscount")&&o.uint32(184).int64(t.peerack3000mscount),null!=t.peerack5000mscount&&Object.hasOwnProperty.call(t,"peerack5000mscount")&&o.uint32(192).int64(t.peerack5000mscount),null!=t.peerack7000mscount&&Object.hasOwnProperty.call(t,"peerack7000mscount")&&o.uint32(200).int64(t.peerack7000mscount),null!=t.peerackslowcount&&Object.hasOwnProperty.call(t,"peerackslowcount")&&o.uint32(208).int64(t.peerackslowcount),null!=t.norecipientack10mscount&&Object.hasOwnProperty.call(t,"norecipientack10mscount")&&o.uint32(216).int64(t.norecipientack10mscount),null!=t.norecipientack25mscount&&Object.hasOwnProperty.call(t,"norecipientack25mscount")&&o.uint32(224).int64(t.norecipientack25mscount),null!=t.norecipientack50mscount&&Object.hasOwnProperty.call(t,"norecipientack50mscount")&&o.uint32(232).int64(t.norecipientack50mscount),null!=t.norecipientack75mscount&&Object.hasOwnProperty.call(t,"norecipientack75mscount")&&o.uint32(240).int64(t.norecipientack75mscount),null!=t.norecipientack100mscount&&Object.hasOwnProperty.call(t,"norecipientack100mscount")&&o.uint32(248).int64(t.norecipientack100mscount),null!=t.norecipientack150mscount&&Object.hasOwnProperty.call(t,"norecipientack150mscount")&&o.uint32(256).int64(t.norecipientack150mscount),null!=t.norecipientack200mscount&&Object.hasOwnProperty.call(t,"norecipientack200mscount")&&o.uint32(264).int64(t.norecipientack200mscount),null!=t.norecipientack250mscount&&Object.hasOwnProperty.call(t,"norecipientack250mscount")&&o.uint32(272).int64(t.norecipientack250mscount),null!=t.norecipientack300mscount&&Object.hasOwnProperty.call(t,"norecipientack300mscount")&&o.uint32(280).int64(t.norecipientack300mscount),null!=t.norecipientack400mscount&&Object.hasOwnProperty.call(t,"norecipientack400mscount")&&o.uint32(288).int64(t.norecipientack400mscount),null!=t.norecipientack500mscount&&Object.hasOwnProperty.call(t,"norecipientack500mscount")&&o.uint32(296).int64(t.norecipientack500mscount),null!=t.norecipientack600mscount&&Object.hasOwnProperty.call(t,"norecipientack600mscount")&&o.uint32(304).int64(t.norecipientack600mscount),null!=t.norecipientack800mscount&&Object.hasOwnProperty.call(t,"norecipientack800mscount")&&o.uint32(312).int64(t.norecipientack800mscount),null!=t.norecipientack1000mscount&&Object.hasOwnProperty.call(t,"norecipientack1000mscount")&&o.uint32(320).int64(t.norecipientack1000mscount),null!=t.norecipientack2000mscount&&Object.hasOwnProperty.call(t,"norecipientack2000mscount")&&o.uint32(328).int64(t.norecipientack2000mscount),null!=t.norecipientack3000mscount&&Object.hasOwnProperty.call(t,"norecipientack3000mscount")&&o.uint32(336).int64(t.norecipientack3000mscount),null!=t.norecipientack5000mscount&&Object.hasOwnProperty.call(t,"norecipientack5000mscount")&&o.uint32(344).int64(t.norecipientack5000mscount),null!=t.norecipientack7000mscount&&Object.hasOwnProperty.call(t,"norecipientack7000mscount")&&o.uint32(352).int64(t.norecipientack7000mscount),null!=t.norecipientackslowcount&&Object.hasOwnProperty.call(t,"norecipientackslowcount")&&o.uint32(360).int64(t.norecipientackslowcount),null!=t.acktimeoutcount&&Object.hasOwnProperty.call(t,"acktimeoutcount")&&o.uint32(368).int64(t.acktimeoutcount),null!=t.apimajorversion&&Object.hasOwnProperty.call(t,"apimajorversion")&&o.uint32(376).int32(t.apimajorversion),null!=t.apiminorversion&&Object.hasOwnProperty.call(t,"apiminorversion")&&o.uint32(384).int32(t.apiminorversion),null!=t.os&&Object.hasOwnProperty.call(t,"os")&&o.uint32(392).int32(t.os),null!=t.toooftencount&&Object.hasOwnProperty.call(t,"toooftencount")&&o.uint32(400).int32(t.toooftencount),null!=t.receiverofflinecount&&Object.hasOwnProperty.call(t,"receiverofflinecount")&&o.uint32(408).int32(t.receiverofflinecount),null!=t.invalidmessagecount&&Object.hasOwnProperty.call(t,"invalidmessagecount")&&o.uint32(416).int32(t.invalidmessagecount),null!=t.unknowerrorcount&&Object.hasOwnProperty.call(t,"unknowerrorcount")&&o.uint32(424).int32(t.unknowerrorcount),null!=t.servercachedcount&&Object.hasOwnProperty.call(t,"servercachedcount")&&o.uint32(432).int32(t.servercachedcount),null!=t.timeoutcount&&Object.hasOwnProperty.call(t,"timeoutcount")&&o.uint32(440).int32(t.timeoutcount),null!=t.successcount&&Object.hasOwnProperty.call(t,"successcount")&&o.uint32(448).int32(t.successcount),null!=t.userid&&Object.hasOwnProperty.call(t,"userid")&&o.uint32(458).string(t.userid),o},r}(),rL=bc.SyncOperateEvent=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.lts=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.userid="",r.prototype.vid=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.sid="",r.prototype.requestts=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.replyts=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.target="",r.prototype.eventtype="",r.prototype.revision=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.uuid="",r.prototype.sdktype=0,r.prototype.flags=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.code=0,r.prototype.seq=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.index=null,r.prototype.lock="",r.prototype.lockrev=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.subtarget="",r.prototype.usersid="",r.encode=function(t,o){return o||(o=vc.create()),null!=t.lts&&Object.hasOwnProperty.call(t,"lts")&&o.uint32(8).int64(t.lts),null!=t.userid&&Object.hasOwnProperty.call(t,"userid")&&o.uint32(26).string(t.userid),null!=t.vid&&Object.hasOwnProperty.call(t,"vid")&&o.uint32(32).int64(t.vid),null!=t.sid&&Object.hasOwnProperty.call(t,"sid")&&o.uint32(42).string(t.sid),null!=t.requestts&&Object.hasOwnProperty.call(t,"requestts")&&o.uint32(48).int64(t.requestts),null!=t.replyts&&Object.hasOwnProperty.call(t,"replyts")&&o.uint32(56).int64(t.replyts),null!=t.target&&Object.hasOwnProperty.call(t,"target")&&o.uint32(66).string(t.target),null!=t.eventtype&&Object.hasOwnProperty.call(t,"eventtype")&&o.uint32(74).string(t.eventtype),null!=t.revision&&Object.hasOwnProperty.call(t,"revision")&&o.uint32(80).int64(t.revision),null!=t.uuid&&Object.hasOwnProperty.call(t,"uuid")&&o.uint32(90).string(t.uuid),null!=t.sdktype&&Object.hasOwnProperty.call(t,"sdktype")&&o.uint32(96).int32(t.sdktype),null!=t.flags&&Object.hasOwnProperty.call(t,"flags")&&o.uint32(104).int64(t.flags),null!=t.code&&Object.hasOwnProperty.call(t,"code")&&o.uint32(112).int32(t.code),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(120).int64(t.seq),null!=t.index&&Object.hasOwnProperty.call(t,"index")&&bc.CommonIndex.encode(t.index,o.uint32(130).fork()).ldelim(),null!=t.lock&&Object.hasOwnProperty.call(t,"lock")&&o.uint32(138).string(t.lock),null!=t.lockrev&&Object.hasOwnProperty.call(t,"lockrev")&&o.uint32(144).int64(t.lockrev),null!=t.subtarget&&Object.hasOwnProperty.call(t,"subtarget")&&o.uint32(154).string(t.subtarget),null!=t.usersid&&Object.hasOwnProperty.call(t,"usersid")&&o.uint32(162).string(t.usersid),o},r}(),sL=bc.SyncSubscribeEvent=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.lts=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.userid="",r.prototype.vid=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.sid="",r.prototype.target="",r.prototype.eventtype="",r.prototype.sdktype=0,r.prototype.flags=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.code=0,r.prototype.seq=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.requestts=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.replyts=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.index=null,r.prototype.subtarget="",r.prototype.usersid="",r.encode=function(t,o){return o||(o=vc.create()),null!=t.lts&&Object.hasOwnProperty.call(t,"lts")&&o.uint32(8).int64(t.lts),null!=t.userid&&Object.hasOwnProperty.call(t,"userid")&&o.uint32(26).string(t.userid),null!=t.vid&&Object.hasOwnProperty.call(t,"vid")&&o.uint32(32).int64(t.vid),null!=t.sid&&Object.hasOwnProperty.call(t,"sid")&&o.uint32(42).string(t.sid),null!=t.target&&Object.hasOwnProperty.call(t,"target")&&o.uint32(66).string(t.target),null!=t.eventtype&&Object.hasOwnProperty.call(t,"eventtype")&&o.uint32(74).string(t.eventtype),null!=t.sdktype&&Object.hasOwnProperty.call(t,"sdktype")&&o.uint32(96).int32(t.sdktype),null!=t.flags&&Object.hasOwnProperty.call(t,"flags")&&o.uint32(104).int64(t.flags),null!=t.code&&Object.hasOwnProperty.call(t,"code")&&o.uint32(112).int32(t.code),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&o.uint32(120).int64(t.seq),null!=t.requestts&&Object.hasOwnProperty.call(t,"requestts")&&o.uint32(128).int64(t.requestts),null!=t.replyts&&Object.hasOwnProperty.call(t,"replyts")&&o.uint32(136).int64(t.replyts),null!=t.index&&Object.hasOwnProperty.call(t,"index")&&bc.CommonIndex.encode(t.index,o.uint32(146).fork()).ldelim(),null!=t.subtarget&&Object.hasOwnProperty.call(t,"subtarget")&&o.uint32(154).string(t.subtarget),null!=t.usersid&&Object.hasOwnProperty.call(t,"usersid")&&o.uint32(162).string(t.usersid),o},r}(),tL=bc.SyncUpdateEvent=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.lts=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.userid="",r.prototype.vid=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.sid="",r.prototype.replyts=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.target="",r.prototype.eventtype="",r.prototype.revision=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.sdktype=0,r.prototype.flags=O.Long?O.Long.fromBits(0,0,!1):0,r.prototype.count=0,r.prototype.delta=0,r.prototype.code=0,r.prototype.index=null,r.prototype.subtarget="",r.encode=function(t,o){return o||(o=vc.create()),null!=t.lts&&Object.hasOwnProperty.call(t,"lts")&&o.uint32(8).int64(t.lts),null!=t.userid&&Object.hasOwnProperty.call(t,"userid")&&o.uint32(26).string(t.userid),null!=t.vid&&Object.hasOwnProperty.call(t,"vid")&&o.uint32(32).int64(t.vid),null!=t.sid&&Object.hasOwnProperty.call(t,"sid")&&o.uint32(42).string(t.sid),null!=t.replyts&&Object.hasOwnProperty.call(t,"replyts")&&o.uint32(56).int64(t.replyts),null!=t.target&&Object.hasOwnProperty.call(t,"target")&&o.uint32(66).string(t.target),null!=t.eventtype&&Object.hasOwnProperty.call(t,"eventtype")&&o.uint32(74).string(t.eventtype),null!=t.revision&&Object.hasOwnProperty.call(t,"revision")&&o.uint32(80).int64(t.revision),null!=t.sdktype&&Object.hasOwnProperty.call(t,"sdktype")&&o.uint32(96).int32(t.sdktype),null!=t.flags&&Object.hasOwnProperty.call(t,"flags")&&o.uint32(104).int64(t.flags),null!=t.count&&Object.hasOwnProperty.call(t,"count")&&o.uint32(112).int32(t.count),null!=t.delta&&Object.hasOwnProperty.call(t,"delta")&&o.uint32(120).int32(t.delta),null!=t.code&&Object.hasOwnProperty.call(t,"code")&&o.uint32(128).int32(t.code),null!=t.index&&Object.hasOwnProperty.call(t,"index")&&bc.CommonIndex.encode(t.index,o.uint32(138).fork()).ldelim(),null!=t.subtarget&&Object.hasOwnProperty.call(t,"subtarget")&&o.uint32(162).string(t.subtarget),o},r}(),uL=bc.CommonIndex=function(){function r(t){if(t)for(var o=Object.keys(t),l=0;l<o.length;++l)null!=t[o[l]]&&(this[o[l]]=t[o[l]])}return r.prototype.index1="",r.prototype.index2="",r.prototype.index3="",r.encode=function(t,o){return o||(o=vc.create()),null!=t.index1&&Object.hasOwnProperty.call(t,"index1")&&o.uint32(10).string(t.index1),null!=t.index2&&Object.hasOwnProperty.call(t,"index2")&&o.uint32(18).string(t.index2),null!=t.index3&&Object.hasOwnProperty.call(t,"index3")&&o.uint32(26).string(t.index3),o},r}(),xC=Object.freeze({__proto__:null,Session:gL,ApEvent:hL,ApRequest:iL,LinkLoginRequest:jL,Link:kL,Logout:lL,KickedOff:mL,ChnJoin:nL,ChnJoinRes:oL,ChnLeave:pL,ConnectionStateChange:qL,RtmSdkMessageCount:Bx,SyncOperateEvent:rL,SyncSubscribeEvent:sL,SyncUpdateEvent:tL,CommonIndex:uL,default:bc}),yC=Object.freeze({__proto__:null,Counter:1,ApiExec:154,Session:164,ApEvent:165,Link:166,Logout:167,TxMessage:168,RxMessage:169,KickedOff:170,TxMessageRes:171,ChnJoin:172,ChnJoinRes:173,ChnLeave:174,ChnGetMembers:175,ChnGetMembersRes:176,ChnMemberJoined:177,ChnMemberLeft:178,QueryPeersOnlineStatus:179,QueryPeersOnlineStatusRes:180,RenewToken:181,OperateAttribute:186,OperateAttributeRes:187,ApRequest:188,LinkTcpEvent:189,LinkLoginRequest:190,ConnectionStateChange:191,RtmSdkMessageCount:510,SyncOperateEvent:9654,SyncSubscribeEvent:9651,default:{Counter:1,ApiExec:154,Session:164,ApEvent:165,Link:166,Logout:167,TxMessage:168,RxMessage:169,KickedOff:170,TxMessageRes:171,ChnJoin:172,ChnJoinRes:173,ChnLeave:174,ChnGetMembers:175,ChnGetMembersRes:176,ChnMemberJoined:177,ChnMemberLeft:178,QueryPeersOnlineStatus:179,QueryPeersOnlineStatusRes:180,RenewToken:181,OperateAttribute:186,OperateAttributeRes:187,ApRequest:188,LinkTcpEvent:189,LinkLoginRequest:190,ConnectionStateChange:191,RtmSdkMessageCount:510,SyncOperateEvent:9654,SyncSubscribeEvent:9651}}),Cx=il(),sp=function(r){function t(l,p,_,R,M,P){var F,G;ab(this,t);var z=o.call(this,M,Pm("Socket-",M.loggerId));if(E(L(z),"isActiveClose",!1),E(L(z),"loggedIn",!1),E(L(z),"useNewDomain",void 0),E(L(z),"receivedPacket",new ec),E(L(z),"open$",void 0),E(L(z),"input$",new ec),E(L(z),"userJoin$",new ec),E(L(z),"attemptsSinceLastError",0),E(L(z),"message$",new ec),E(L(z),"socket$",void 0),E(L(z),"toClose",new ec),E(L(z),"toReconnect",new ec),E(L(z),"sendLogger",void 0),E(L(z),"receiveLogger",void 0),E(L(z),"ip",void 0),E(L(z),"env",void 0),E(L(z),"ticket",void 0),E(L(z),"context",void 0),E(L(z),"getDomain",function(){return Ds(z.ip,z.useNewDomain)}),E(L(z),"socketReconnector",function(_n){var fa=function(da){return z.attemptsSinceLastError+=1,z.warn("The %s of Env %d reconnecting %s",z.name,z.env,da.message),Fe(3e3)};return _n.pipe(Rb(function(da){return z.log("socket connection closed"),z.loggedIn=!1,2<=z.attemptsSinceLastError?(z.warn("socket connection failure"),z.emit("connectionFailure"),z.close(),Va(da)):z.isActiveClose?$c:(z.emit("reconnect"),z.useNewDomain=!z.useNewDomain,Va(da))}),Zg(function(da){return da.pipe(Cc(fa))}))}),z.ip=l,z.env=p,z.ticket=_,z.context=R,z.useNewDomain=null!=P?P:.5<=Math.random(),z.sendLogger=z.genLogger("RTM:MSG:SEND"),z.receiveLogger=z.genLogger("RTM:MSG:RECV"),0!==p&&1!==p)throw new Cx({ILLEGAL_RTM_ENV:"The env number is out of rtm env count"});var we=Jh[p];z.log("Opening websocket address %s for the Env %d",z.ip,z.env),$a("LinkLoginRequest",{sid:z.context.sid,userId:z.context.uid,lts:D.fromNumber(Date.now()),elapse:Nb(z.context.startTime),destServerIp:z.ip,linkId:z.env},null!==(F=z.context.config.enableCloudProxy||z.context.socketUseProxy)&&void 0!==F&&F),$a("LinkLoginRequest",{sid:z.context.sid,userId:z.context.uid,lts:D.fromNumber(Date.now()),elapse:Nb(z.context.startTime),destServerIp:z.ip,linkId:z.env},null!==(G=z.context.config.enableCloudProxy||z.context.socketUseProxy)&&void 0!==G&&G);var xe=Nc(z.input$,z.userJoin$.pipe(kC(2)),z.message$).pipe(Wa(function(_n){return gl.encode(_n).finish()}));return l=Nc(lC("",{protocols:[],makeWebSocket:function(){if(z.context.config.enableCloudProxy||z.context.socketUseProxy){if(0===z.context.cloudProxyServers.length)throw z.logError("No cloud proxy server to connect"),new Pa;var _n=ui(null)?JSON.parse(null.replace(/-/g,".")):z.context.cloudProxyServers;_n=dh(_n="wss://".concat(Ds(Es(_n),!1),"/"),"sid",z.context.sid),_n=dh(_n,"remote_port",we.toString()),_n=dh(_n,"remote_ip",z.ip),_n=dh(_n,"token",z.context.key),_n=new WebSocket(_n)}else _n=new WebSocket("wss://".concat(z.getDomain(),":").concat(we));return _n.binaryType="arraybuffer",_n}}),z.toReconnect),z.socket$=bb(l,ap.pipe(Oc(7e3),Rb(function(_n){return uc(_n)&&z.warn("socket open timed out"),Va(_n)}))).pipe(Wa(function(_n){if(_n instanceof Error)throw z.warn("Env_%d: Force reconnect the socket",z.env),_n;return _n(xe).pipe(Wa(function(fa){return gl.decode(new Uint8Array(fa))}))}),z.socketReconnector),z.open$=z.socket$.pipe(Ka(function(_n){z.log("Websocket opened",z.name),_n.subscribe(function(fa){var da=fa.data;fa=Tm[fa.uri].slice(0,-3),da=Cs[fa].decode(da);var Ta=UI({},Oo(da,"toJSON"),function(Nl,Vl){return Vl instanceof D?rs(Vl):Vl}),Da=!1;if((da instanceof bx||da instanceof ax)&&da.instance.lessThanOrEqual(4294967295)&&(Da=!0),da instanceof cx||da instanceof dx){var Ja=da.instance,rl=da.sequence;(da.dialogue.lessThanOrEqual(4294967295)||Ja.lessThanOrEqual(4294967295)||rl.lessThan(1))&&(Da=!0)}Da?z.warn("Env_%d: Illegal %s, abandoned %o",z.env,fa,Ta):("Pong"!==fa&&z.receiveLogger("Env_%d: %s %o",z.env,fa,Ta),z.receivedPacket.next([fa,da]))},function(){})}),ni(void 0),he(z.toClose),$g()),z}nb(t,r);var o=ob(t);return Qb(t,[{key:"address",get:function(){return"".concat(this.ip,":").concat(Jh[this.env])}},{key:"sendPacket",value:function(l,p){if("Ping"!==l){var _=Pe(p,function(R){return R instanceof D?rs(R):R});this.sendLogger("Env_%d: %s %o",this.env,l,_)}p=vC(l,p),"UserJoin"===l?this.userJoin$.next(p):"Message"===l?this.message$.next(p):this.input$.next(p)}},{key:"close",value:function(){this.isActiveClose=!0,this.loggedIn=!1,this.toClose.next()}},{key:"fromReceived",value:function(l){return this.receivedPacket.pipe(sc(function(p){return Lb(p,1)[0]===l}),Wa(function(p){return Lb(p,2)[1]}))}},{key:"forceReconnect",value:function(){this.toReconnect.next(new Cx({FORCE_RECONNECTING:"Connection seems broken, try force reconnecting"}))}}]),t}(Dd());wa({target:"String",proto:!0,forced:fx},{padStart:function(r){return vK(this,r,1<arguments.length?arguments[1]:void 0)}});var vL=function(r){var t=vi(Yj);r=qC(r);for(var o=0;o<t.length;o++){var l=Yj[t[o]];if(null!=l&&l.AP_DOMAINS.includes(r)||null!=l&&l.AP_BACKUP_DOMAINS.includes(r)||null!=l&&l.PROXY_AP.includes(r))return[l.CODE]}return[oa.CHINA,oa.GLOBAL]},wL={INVALID_APP_ID:"Illegal App ID",NO_AUTHORIZED:"Signature verification failed",TOKEN_TIMEOUT:"Dynamic key expired",INVALID_TOKEN_UID:"UID in the security key(token) is not valid",APP_ID_NO_ACTIVATED:"The vendor is not activated",DYNAMIC_KEY_NOT_ENABLED:"The vendor did not enable the dynamic key, but uses the dynamic key",DYNAMIC_ENABLED_BUT_STATIC_KEY:"The vendor enabled the dynamic key, but uses the static key",TOKEN_EXPIRED:"The token has expired",INVALID_USER_ID:"The user ID to login does not match the token",FORBIDDEN_REGION:"Forbidden to access the request in this area",CANNOT_MEET_AREA_DEMAND:"Cannot allocate to meet the requirements of the given area limit"},Dx={5:"INVALID_APP_ID",7:"INVALID_USER_ID",9:"NO_AUTHORIZED",10:"TOKEN_TIMEOUT",11:"APP_ID_NO_ACTIVATED",12:"INVALID_TOKEN_UID",13:"TOKEN_EXPIRED",14:"DYNAMIC_KEY_NOT_ENABLED",15:"DYNAMIC_ENABLED_BUT_STATIC_KEY",18:"FORBIDDEN_REGION",19:"CANNOT_MEET_AREA_DEMAND"},xL=[100,101,102],jl=/web-(\d)/,Ex=function(r){function t(l,p){var _=2<arguments.length&&void 0!==arguments[2]&&arguments[2];ab(this,t);var R=o.call(this,p,"AccessPoint");return E(L(R),"handleUniLbsError",function(M,P){var F=M;if(4<M.toString().length){var G=M.toString().padStart(8,"0"),z=parseInt(G.slice(0,4),10);if(G=parseInt(G.slice(4,8),10),201===z)F=G;else if(101===z&&!xL.includes(G))return Va(Error("service is currently unavailable"))}if(z=F.toString(),!Object.keys(Dx).includes(z))return(M=new Pa(["Login is rejected by the server. The response code is %d",M],ij)).serverCode=F,Va(M);switch(F=wL[z=Dx[z]],z){case"INVALID_APP_ID":case"APP_ID_NO_ACTIVATED":return(P=new Gh(F,Fw)).serverCode=M,Va(P);case"INVALID_USER_ID":return(P=new Gh(F,al)).serverCode=M,Va(P);case"TOKEN_EXPIRED":case"TOKEN_TIMEOUT":return(P=new Gh(F,bl)).serverCode=M,Va(P);case"NO_AUTHORIZED":case"INVALID_TOKEN_UID":case"DYNAMIC_KEY_NOT_ENABLED":case"DYNAMIC_ENABLED_BUT_STATIC_KEY":return(P=new Gh(F,Gw)).serverCode=M,Va(P);case"CANNOT_MEET_AREA_DEMAND":return(P=vL(P)).forEach(function(we){return R.failedAreas.add(we)}),R.failedAreas.size===(void 0===Ba?2:Ba.CODES.size)?((P=new ja(F,ij)).serverCode=M,Va(P)):Va(Error("ap ".concat(P.join(", ")," cannot meet requirement")));case"FORBIDDEN_REGION":return(P=new Pa(F,ij)).serverCode=M,Va(P);default:return Va(ps("ApResErrType",z))}}),E(L(R),"getApEdgeInfo$",void 0),E(L(R),"getApEdgeInfoEndFirst$",void 0),E(L(R),"apFinish$",new ec),E(L(R),"retryCount",0),E(L(R),"failedAreas",new Set),E(L(R),"usedUrl",[]),E(L(R),"newDomainUsed",!1),E(L(R),"backupNewDomainUsed",!1),E(L(R),"genUrl",function(){return void 0===Ba?zm.apply(void 0,ra(Ih([cL,dL]))).pipe(Am(function(M){return Wb.apply(void 0,ra(M))})):Wb.apply(void 0,ra(Ba.AP_DOMAINS.slice(0,3).map(xg)))}),E(L(R),"genBackupUrl",function(){return void 0===Ba?zm.apply(void 0,ra(Ih([eL,fL]))).pipe(Am(function(M){return Wb.apply(void 0,ra(M))})):Wb.apply(void 0,ra(Ba.AP_BACKUP_DOMAINS.slice(0,3).map(xg)))}),E(L(R),"getApUrl$",function(M){var P,F;return R.genUrl().pipe(sc(function(G){return!(R.newDomainUsed&&G.includes("sd-rtn.com")||(G.includes("sd-rtn.com")&&(R.newDomainUsed=!0),mp(R.usedUrl,function(z){var we;return z===(null===(we=G.match(jl))||void 0===we?void 0:we[1])})))}),Ka(function(G){var z;void 0===Ba&&"string"==typeof(G=null===(z=G.match(jl))||void 0===z?void 0:z[1])&&R.usedUrl.push(G)}),Xb(M?Math.max(Yd.RECONNECTING_AP_NUM,null!==(P=null==Ba?void 0:Ba.CODES.size)&&void 0!==P?P:0):null!==(F=null==Ba?void 0:Ba.CODES.size)&&void 0!==F?F:2),Zf(function(){return t.runOutOfUrlSymbol}),Rb(function(G,z){return R.newDomainUsed=!1,G===t.runOutOfUrlSymbol?(R.usedUrl=[],z):Va(G)}))}),E(L(R),"getBackupApUrl$",function(M){var P,F;return R.genBackupUrl().pipe(sc(function(G){return!(R.backupNewDomainUsed&&G.includes("sd-rtn.com")||(G.includes("sd-rtn.com")&&(R.backupNewDomainUsed=!0),mp(R.usedUrl,function(z){var we;return z===(null===(we=G.match(jl))||void 0===we?void 0:we[1])})))}),Ka(function(G){var z;void 0===Ba&&"string"==typeof(G=null===(z=G.match(jl))||void 0===z?void 0:z[1])&&R.usedUrl.push(G)}),Xb(M?Math.max(Yd.RECONNECTING_AP_NUM,null!==(P=null==Ba?void 0:Ba.CODES.size)&&void 0!==P?P:0):null!==(F=null==Ba?void 0:Ba.CODES.size)&&void 0!==F?F:2),Zf(function(){return t.runOutOfUrlSymbol}),Rb(function(G,z){return R.backupNewDomainUsed=!1,G===t.runOutOfUrlSymbol?(R.usedUrl=[],z):Va(G)}))}),E(L(R),"getProxyApUrl$",function(M){var P,F;return Wb.apply(void 0,ra(((null==Ba?void 0:Ba.PROXY_AP.slice(0,3))||["ap-proxy-1.agora.io","ap-proxy-2.agora.io"]).map(xg))).pipe(Xb(M?Math.max(Yd.RECONNECTING_AP_NUM,null!==(P=null==Ba?void 0:Ba.CODES.size)&&void 0!==P?P:0):null!==(F=null==Ba?void 0:Ba.CODES.size)&&void 0!==F?F:2))}),E(L(R),"context",void 0),E(L(R),"fetchCloudProxy",function(M,P){var F=Pm("AP-",R.loggerId);R.log("The AccessPoint requests %s(%s)",M,F);var G,z=new AbortController;return R.apFinish$.pipe(Xb(1)).subscribe(function(){return z.abort()}),lf(za(W.mark(function we(){var xe,_n;return W.wrap(function(fa){for(;;)switch(fa.prev=fa.next){case 0:return _n=Qj(0,Number.MAX_SAFE_INTEGER),R.log("%s request opid: %d",F,_n),$a("ApRequest",{sid:R.context.sid,userId:R.context.uid,lts:D.fromNumber(Date.now()),elapse:Nb(R.context.startTime),apAddr:M,opId:D.fromNumber(_n),envId:0,flag:128},null!==(xe=R.context.config.enableCloudProxy)&&void 0!==xe&&xe),fa.abrupt("return",Tj(M,{headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"90","Content-Type":"application/json"},body:{sid:R.context.sid,opid:_n,appid:R.context.appId,client_ts:Math.ceil(Date.now()/1e3),request_bodies:[{uri:22,buffer:{service_ids:[7,16],key:null!=P?P:R.context.key,cname:R.context.uid,uid:0,detail:tb({},void 0===Ba?{11:[oa.CHINA,oa.GLOBAL].join(),12:"1"}:{11:Array.from(Ba.CODES).map(function(da){return da===oa.OVERSEA?"".concat(oa.ASIA,",").concat(oa.EUROPE,",").concat(oa.AFRICA,",").concat(oa.NORTH_AMERICA,",").concat(oa.SOUTH_AMERICA,",").concat(oa.OCEANIA):da}).join(","),12:"1"})}}]},signal:z.signal}));case 4:case"end":return fa.stop()}},we)}))).pipe(Rb(function(we){return"AbortError"!==we.name&&(R.logError(we),R.warn("The AP server %s request failure",M,we)),$c}),Ac((G=za(W.mark(function we(xe){var fa,da,Ta,Da,Ja,rl,Nl,Vl,xl,kd,E0,Ha,_u,ul,Rl,ic,wc,tl;return W.wrap(function(Sl){for(;;)switch(Sl.prev=Sl.next){case 0:if(fa=JSON.parse(xe.responseText),R.log("The %s response is %o",F,fa),(void 0===(da=fa.response_body)||0===da.length||da.some(function(kl){var Fd;return void 0===(null===(Fd=kl.buffer)||void 0===Fd?void 0:Fd.code)||23!==kl.uri}))&&Va(new Pa("cloud proxy response_body not valid",ij)),0===(Ta=da.filter(function(kl){return 0!==kl.buffer.code})).length){Sl.next=14;break}if(void 0===(Da=Ta.find(function(kl){return 128===kl.buffer.flag}))){Sl.next=12;break}return Sl.abrupt("return",R.handleUniLbsError(Da.buffer.code,M));case 12:return R.logError("cloud proxy error response"),Sl.abrupt("return",R.handleUniLbsError(Ta[0].buffer.code,M));case 14:for(Ja=[],rl=0;rl<da.length;rl++)if(262144===(null==(xl=da[rl])||null===(Nl=xl.buffer)||void 0===Nl?void 0:Nl.flag))null===(kd=xl.buffer)||void 0===kd||null===(E0=kd.edges_services)||void 0===E0||null===(Ha=E0.forEach)||void 0===Ha||Ha.call(E0,function(kl){ns(kl=kl.ip)&&-1===R.context.cloudProxyServers.indexOf(kl)&&(R.log("got cloud proxy server: %s",kl),R.context.cloudProxyServers.push(kl))});else if(128===(null==xl||null===(Vl=xl.buffer)||void 0===Vl?void 0:Vl.flag)){for(ic=function(kl,Fd){var Bl=Fd[kl];Ja.some(function(Jp){return Jp.ip===Bl.ip})||Ja.push({ip:Bl.ip,ticket:xl.buffer.cert})},wc=0,tl=xl.buffer.edges_services;wc<tl.length;wc++)ic(wc,tl);R.context.rtmArea=null!==(_u=null===(ul=xl.buffer)||void 0===ul||null===(Rl=ul.detail)||void 0===Rl?void 0:Rl[9])&&void 0!==_u?_u:""}return Sl.abrupt("return",Wb.apply(void 0,ra(Ja).concat([fj])));case 19:case"end":return Sl.stop()}},we)})),function(we){return G.apply(this,arguments)})),Rb(function(we){return Sa(we)?Va(we):$c}),Ij(),sc(function(we){return void 0!==we&&"string"==typeof we.ip&&"string"==typeof we.ticket&&ns(we.ip)}))}),E(L(R),"fetchAp",function(M,P){var F=Pm("AP-",R.loggerId);R.log("The AccessPoint requests %s(%s)",M,F);var G=new AbortController;R.apFinish$.pipe(Xb(1)).subscribe(function(){return G.abort()});var z,we=Qj(0,Number.MAX_SAFE_INTEGER);return lf(za(W.mark(function xe(){var _n;return W.wrap(function(fa){for(;;)switch(fa.prev=fa.next){case 0:return R.log("%s request opid: %d",F,we),$a("ApRequest",{sid:R.context.sid,userId:R.context.uid,lts:D.fromNumber(Date.now()),elapse:Nb(R.context.startTime),apAddr:M,opId:D.fromNumber(we),envId:0,flag:128},null!==(_n=R.context.config.enableCloudProxy)&&void 0!==_n&&_n),fa.abrupt("return",Tj(M,{headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"69","Content-Type":"application/json"},body:{flag:128,opid:we,key:P||R.context.key,cname:R.context.uid,detail:tb({},void 0===Ba?{11:[oa.CHINA,oa.GLOBAL].join(),12:"1"}:{11:Array.from(Ba.CODES).map(function(da){return da===oa.OVERSEA?"".concat(oa.ASIA,",").concat(oa.EUROPE,",").concat(oa.AFRICA,",").concat(oa.NORTH_AMERICA,",").concat(oa.SOUTH_AMERICA,",").concat(oa.OCEANIA):da}).join(","),12:"1"}),uid:0,sid:R.context.sid},signal:G.signal}));case 3:case"end":return fa.stop()}},xe)}))).pipe(Rb(function(xe){return"AbortError"!==xe.name&&(R.logError(xe),R.warn("The AP server %s request failure",M,xe)),$c}),Ac((z=za(W.mark(function xe(_n){var fa,da,Da,Ja,rl,Nl,Vl,xl,kd;return W.wrap(function(E0){for(;;)switch(E0.prev=E0.next){case 0:if(Da=JSON.parse(_n.responseText),R.log("The %s response is %o",F,Da),rl=(Ja=Da).code,Nl=Ja.addresses,R.context.vid=null!==(fa=(Vl=Ja.detail)[8])&&void 0!==fa?fa:"",$a("ApEvent",{sid:R.context.sid,userId:R.context.uid,lts:D.fromNumber(Date.now()),elapse:Nb(R.context.startTime),apAddr:M,linkServerList:Nl.map(function(Ha){return Ha.ip}),serverErrCode:rl,flag:128,envId:0,opId:D.fromNumber(we),errCode:0,area:Vl[9],isp:Vl[2]},null!==(da=R.context.config.enableCloudProxy)&&void 0!==da&&da),R.info(Da),0===rl){E0.next=9;break}return E0.abrupt("return",R.handleUniLbsError(rl,M));case 9:if(xl=Nl,ui(null)&&(kd=JSON.parse(null.replace(/-/g,".")),xl=kd.map(function(Ha){return{ip:Ha,ticket:xl[0].ticket}})),0!==xl.length){E0.next=14;break}return E0.abrupt("return",Va(Error("No available edge address to connect")));case 14:return R.context.rtmArea=null==Vl?void 0:Vl[9],E0.abrupt("return",Wb.apply(void 0,ra(xl).concat([fj])));case 16:case"end":return E0.stop()}},xe)})),function(xe){return z.apply(this,arguments)})),Ij(),Rb(function(xe){return Sa(xe)?Va(xe):$c}),sc(function(xe){return void 0!==xe&&"string"==typeof xe.ip&&"string"==typeof xe.ticket}))}),R.context=l,R.getApEdgeInfoEndFirst$=function(){var M=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return Fe(0,M||_?Yd.RECONNECTING_AP_INTERVAL:2e3).pipe(Xb(1),Ka(function(){R.retryCount+=1}),Ac(function(){return R.context.config.enableCloudProxy||R.context.socketUseProxy?R.getProxyApUrl$(M||_):(4<=R.retryCount&&(R.retryCount=0),3>=R.retryCount?R.getApUrl$(M||_):R.getBackupApUrl$(M||_))}),Ac(function(P){return R.context.config.enableCloudProxy||R.context.socketUseProxy?R.fetchCloudProxy(P):R.fetchAp(P)}),Rb(function(P){return P instanceof ad&&R.warn("AP request timeout"),Va(P)}),Vr(function(P){return P.ip}),he(R.apFinish$))},R.getApEdgeInfo$=function(M){return Fe(0,M||_?Yd.RECONNECTING_AP_INTERVAL:2e3).pipe(Xb(8),Ka(function(){R.retryCount+=1}),Ac(function(){return R.context.config.enableCloudProxy||R.context.socketUseProxy?R.getProxyApUrl$(M||_):3>=R.retryCount?R.getApUrl$(M||_):R.getBackupApUrl$(M||_)}),Ac(function(P){return(R.context.config.enableCloudProxy||R.context.socketUseProxy?R.fetchCloudProxy(P):R.fetchAp(P)).pipe()}),Rb(function(P){return P instanceof ad&&R.warn("AP request timeout"),Va(P)}),Vr(function(P){return P.ip}),he(R.apFinish$))},R}nb(t,r);var o=ob(t);return Qb(t,[{key:"clearUp",value:function(){this.failedAreas.clear(),this.retryCount=0}}]),t}(Dd());E(Ex,"runOutOfUrlSymbol",Symbol("AP urls are used up"));var Fx=il(),Gx=function(r){function t(l,p,_){ab(this,t);var R=o.call(this,p,"Connection");E(L(R),"apClient",void 0),E(L(R),"lastOpenSockets",[new ah(1),new ah(1)]),E(L(R),"curOpenSockets",[void 0,void 0]),E(L(R),"ipIterator",0),E(L(R),"loginSocketOpenFailureCount",0),E(L(R),"firstEnv",.5<=Math.random()?1:0),E(L(R),"firstSocketOpener",void 0),E(L(R),"secondSocketOpener",void 0),E(L(R),"firstOpenKeeperSubject",new ec),E(L(R),"secondOpenKeeperSubject",new ec),E(L(R),"blacklistedIP",{}),E(L(R),"edgeInfoReplayed",void 0),E(L(R),"firstEnvOpenSocket",void 0),E(L(R),"firstOpenKeeperSub",void 0),E(L(R),"secondOpenKeeperSub",void 0),E(L(R),"context",void 0),E(L(R),"logger",void 0),R.context=l,R.logger=p,R.apClient=new Ex(R.context,p),R.apClient.apFinish$.subscribe(function(){R.log("Ap client fetch finished")});var M,P=[];return R.edgeInfoReplayed=R.apClient.getApEdgeInfo$(_).pipe(Zg(function(F){return F.pipe(Ka(function(G){if(Sa(G))throw G}),mf(_?wg.getParameter("RECONNECTING_AP_INTERVAL"):900),he(Fe(2e4)))}),sc(function(F){var G;return!mp(P,F)&&1>=(null!==(G=R.blacklistedIP[F.ip])&&void 0!==G?G:0)}),Zf(function(){return new Fx({AP_NO_AVAILABLE_EDGE:"No available edge address to connect"})}),Ka(function(F){P.push(F),R.log("An edge info got %o",F)}),Ka({error:function(F){R.emit("connectionInitFailure",F)}}),Mj(function(){R.apClient.clearUp()}),Yr()),R.firstEnvOpenSocket=R.edgeInfoReplayed.pipe(Ac(function(F){if(void 0===F)return Va(Error("Invalid edge info"));var G=new sp(F.ip,R.firstEnv,F.ticket,R.context,p,M);if(R.firstEnv=1===R.firstEnv?0:1,G.once("connectionFailure",function(){return R.onSocketConnectionFailure(G)}),!_&&Yd.ENABLE_EDGE_AUTO_FALLBACK&&!R.context.config.enableCloudProxy){var z,we=Date.now();G.on("reconnect",function(){var xe;R.loginSocketOpenFailureCount+=1,null!==(xe=z)&&void 0!==xe||(z=Date.now()-we),500>z&&1<R.loginSocketOpenFailureCount&&(R.context.socketUseProxy=!0)})}return M=!G.useNewDomain,G.open$.pipe(ni(G))}),Ka(function(F){R.log("The websocket of ENV_%d opened to %s:%d",F.env,F.ip,Jh[F.env]),R.curOpenSockets[F.env]=F,R.lastOpenSockets[F.env].next(F),R.firstEnv=F.env,R.openSecondSocket(F.env,F.ip,F.useNewDomain)}),Xb(1),$g()),R.firstSocketOpener=R.firstEnvOpenSocket.pipe(Ac(function(F){return F.open$.pipe(Ka(function(){R.log("The websocket of first ENV_%d re-opened to %s:%d",F.env,F.ip,Jh[F.env]),R.curOpenSockets[F.env]=F,R.lastOpenSockets[F.env].next(F)}))})),l=R.firstOpenKeeperSubject.pipe(Cc(jf)),R.firstOpenKeeperSub=l.subscribe({error:R.logError}),R}nb(t,r);var o=ob(t);return Qb(t,[{key:"initConnection",value:function(){this.firstOpenKeeperSubject.next(this.firstSocketOpener)}},{key:"closeSocket",value:function(l,p){if(![0,1].includes(l))throw new rb({INVALID_ENV:"The env argument is not 0 or 1"});var _=l===this.firstEnv?this.firstOpenKeeperSub:this.secondOpenKeeperSub;this.firstOpenKeeperSub=void 0;var R=this.curOpenSockets[l];this.curOpenSockets[l]=void 0,R&&(R.isActiveClose=!0,setTimeout(function(){R.close()},p)),void 0!==_&&setTimeout(function(){null==_||_.unsubscribe()},p)}},{key:"waitClosing",value:function(l){var p=this;return l.isActiveClose=!0,l.open$.pipe(PB(),Rb(function(_){return _.message===Tw.normalClosureMessage?$c:Va(_)}),Oc(5e3),Rb(function(_){return _ instanceof ad?(p.warn("Force closing the ENV_%d connection",l.env),$c):Va(_)}))}},{key:"onSocketConnectionFailure",value:function(l){var p=[0,1].filter(function(_){return _!==l.env})[0];(p=this.curOpenSockets[p])&&p.loggedIn?this.reopenSocketWithApRequest(l.env):this.emit("socketsFailure")}},{key:"openSecondSocket",value:function(l,p,_){var R=this,M=1===l?0:1;this.secondSocketOpener=this.edgeInfoReplayed.pipe(Xr(function(P,F){return[].concat(ra(P),[F])},[]),Wa(function(P){return Rw(P,function(F){return qs(p,F.ip)}).slice(-1)[0]}),Xb(1),Ac(function(P){if(void 0===P)return Va(Error("Invalid edge info"));var F=new sp(P.ip,M,P.ticket,R.context,R.logger,_);return F.on("connectionFailure",function(){return R.onSocketConnectionFailure(F)}),F.open$.pipe(Ka(function(){R.lastOpenSockets[M].next(F),R.curOpenSockets[M]=F}))}),$g()),this.secondOpenKeeperSub=this.secondOpenKeeperSubject.pipe(Cc(jf)).subscribe({error:this.logError}),this.secondOpenKeeperSubject.next(this.secondSocketOpener)}},{key:"reopenSocketWithApRequest",value:function(l){var p=this,_=[0,1].filter(function(P){return P!==l})[0];if(void 0!==(_=this.curOpenSockets[_])){var R,M=_.ip;_=this.apClient.getApEdgeInfoEndFirst$(!0).pipe(Zf(function(){return new Fx({AP_NO_AVAILABLE_EDGE:"No available edge address to connect"})}),Zg(function(P){return P.pipe(Ka(function(F){if(F.code===bl)p.emit("tokenExpired"),p.apClient.apFinish$.next(void 0);else if(Sa(F))throw F}),mf(wg.getParameter("RECONNECTING_AP_INTERVAL")),he(Fe(15e3)))}),Ka(function(P){p.log("An edge info got %o",P)}),Mj(function(){p.apClient.clearUp()})).pipe(Xr(function(P,F){return[].concat(ra(P),[F])},[]),Wa(function(P){return(P=Rw(P,function(F){return qs(M,F.ip)})).length-1>=p.ipIterator?P.slice(-p.ipIterator++-1)[0]:(p.ipIterator=0,P.slice(-1)[0])}),Zf(),Ac(function(P){if(void 0===P)return Va(Error("Invalid edge info"));var F=new sp(P.ip,l,P.ticket,p.context,p.logger,R);return F.on("connectionFailure",function(){return p.onSocketConnectionFailure(F)}),R=!F.useNewDomain,F.open$.pipe(ni(F))}),Ka(function(P){p.log("The websocket of ENV_%d re-opened to %s:%d using ap",P.env,P.ip,Jh[P.env]),p.curOpenSockets[l]=P,p.lastOpenSockets[l].next(P)}),Ac(function(P){return P.open$.pipe(Ka(function(){p.log("The websocket of ENV_%d re-opened to %s:%d",P.env,P.ip,Jh[P.env]),p.curOpenSockets[l]=P,p.lastOpenSockets[l].next(P)}))}),$g()),l===this.firstEnv?this.firstOpenKeeperSubject.next(_):this.secondOpenKeeperSubject.next(_)}}}]),t}(Dd()),yL=function(r){function t(l,p,_){return ab(this,t),E(L(_=o.call(this,_,"Context")),"_token",void 0),E(L(_),"config",void 0),E(L(_),"_uid",void 0),E(L(_),"_sid",void 0),E(L(_),"_vid",void 0),E(L(_),"_startTime",void 0),E(L(_),"_lastModifyMeteDataTime",-1),E(L(_),"_lastGetMetaDataTime",-1),E(L(_),"_lastSubscribeMetaDataTime",-1),E(L(_),"_area","CN"),E(L(_),"_socketUseProxy",!1),E(L(_),"appId",void 0),E(L(_),"enableCloudProxy",!1),E(L(_),"cloudProxyServers",[]),_.appId=l,_.config=p,_}nb(t,r);var o=ob(t);return Qb(t,[{key:"socketUseProxy",get:function(){return this._socketUseProxy&&Yd.ENABLE_EDGE_AUTO_FALLBACK},set:function(l){this.log("socketUseProxy is set to %s",l),this._socketUseProxy=l}},{key:"token",set:function(l){this._token="string"==typeof l&&l?l:void 0}},{key:"uid",get:function(){if("string"==typeof this._uid&&this._uid)return this._uid;throw new Ib("Cannot get illegal uid")},set:function(l){if(this.log("The user ID is set to %s",wb(l)),!yb(l))throw new Ib;this._uid=l}},{key:"vid",get:function(){if("string"==typeof this._vid)return this._vid;throw new Ib("Cannot get illegal vid")},set:function(l){if("string"!=typeof l)throw new Ib;this._vid=l}},{key:"key",get:function(){if("string"==typeof this._token&&this._token)return this._token;if("string"==typeof this.appId&&this.appId)return this.appId;throw new Ib("Cannot get illegal key")}},{key:"sid",get:function(){if("string"==typeof this._sid&&this._sid)return this._sid;throw new Ib("Cannot get illegal sid")},set:function(l){if(this.log("sid is set to %s",l),"string"!=typeof l||!l)throw new Ib;this._sid=l}},{key:"startTime",get:function(){if("number"==typeof this._startTime&&this._startTime)return this._startTime;throw new Ib("Cannot get illegal startTime")},set:function(l){if(this.log("startTime is set to %s",l),"number"!=typeof l||!l)throw new Ib;this._startTime=l}},{key:"rtmArea",get:function(){if("string"==typeof this._area&&this._area)return this._area;throw new Ib("Cannot get illegal area")},set:function(l){this.log("area is set to %s",l),"string"==typeof l&&l?this._area=l:this.warn("set area failed")}},{key:"lastModifyMeteDataTime",get:function(){if("number"==typeof this._lastModifyMeteDataTime&&this._lastModifyMeteDataTime)return this._lastModifyMeteDataTime;throw new Ib("Cannot get illegal lastModifyMeteDataTime")},set:function(l){if(this.log("lastModifyMeteDataTime is set to %s",l),"number"!=typeof l||!l)throw new Ib;this._lastModifyMeteDataTime=l}},{key:"lastGetMetaDataTime",get:function(){if("number"==typeof this._lastGetMetaDataTime&&this._lastGetMetaDataTime)return this._lastGetMetaDataTime;throw new Ib("Cannot get illegal lastGetMetaDataTime")},set:function(l){if(this.log("lastGetMetaDataTime is set to %s",l),"number"!=typeof l||!l)throw new Ib;this._lastGetMetaDataTime=l}},{key:"lastSubscribeMetaDataTime",get:function(){if("number"==typeof this._lastSubscribeMetaDataTime&&this._lastSubscribeMetaDataTime)return this._lastSubscribeMetaDataTime;throw new Ib("Cannot get illegal lastSubscribeMetaDataTime")},set:function(l){if(this.log("lastSubscribeMetaDataTime is set to %s",l),"number"!=typeof l||!l)throw new Ib;this._lastGetMetaDataTime=l}}]),t}(Dd());tu("of",function(){for(var r=0,t=arguments.length,o=new(wh(this))(t);t>r;)o[r]=arguments[r++];return o},Nn),wa({target:"Array",proto:!0,forced:Rn!==[].lastIndexOf},{lastIndexOf:Rn}),wa({target:"Array",proto:!0},{flatMap:function(r){var t=Zb(this),o=xb(t.length);Rc(r);var l=Ei(t,0);return l.length=px(l,t,t,o,0,1,r,1<arguments.length?arguments[1]:void 0),l}}),wf("flatMap");var zL=gg("reduceRight"),AL=!qe&&79<oe&&83>oe;wa({target:"Array",proto:!0,forced:!zL||AL},{reduceRight:function(r){return Cu(this,r,arguments.length,1<arguments.length?arguments[1]:void 0)}});var tp=function(r){return Ga(function(){return!!"\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"[r]()||"\u200b\x85\u180e"!="\u200b\x85\u180e"[r]()||"\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"[r].name!==r})};wa({target:"String",proto:!0,forced:tp("trim")},{trim:function(){return kk(this)}});var Hx=tp("trimEnd"),Ix=Hx?function(){return lD(this)}:"".trimEnd;wa({target:"String",proto:!0,forced:Hx},{trimEnd:Ix,trimRight:Ix});var Jx=tp("trimStart"),Kx=Jx?function(){return kD(this)}:"".trimStart;wa({target:"String",proto:!0,forced:Jx},{trimStart:Kx,trimLeft:Kx});var Pd=kc(function(r,t){(function(){function o(yc,ml,$e){switch($e.length){case 0:return yc.call(ml);case 1:return yc.call(ml,$e[0]);case 2:return yc.call(ml,$e[0],$e[1]);case 3:return yc.call(ml,$e[0],$e[1],$e[2])}return yc.apply(ml,$e)}function l(yc,ml,$e,Qh){for(var Hd=-1,Ph=null==yc?0:yc.length;++Hd<Ph;){var fy=yc[Hd];ml(Qh,fy,$e(fy),yc)}return Qh}function p(yc,ml){for(var $e=-1,Qh=null==yc?0:yc.length;++$e<Qh&&!1!==ml(yc[$e],$e,yc););return yc}function _(yc,ml){for(var $e=null==yc?0:yc.length;$e--&&!1!==ml(yc[$e],$e,yc););return yc}function R(yc,ml){for(var $e=-1,Qh=null==yc?0:yc.length;++$e<Qh;)if(!ml(yc[$e],$e,yc))return!1;return!0}function M(yc,ml){for(var $e=-1,Qh=null==yc?0:yc.length,Hd=0,Ph=[];++$e<Qh;){var fy=yc[$e];ml(fy,$e,yc)&&(Ph[Hd++]=fy)}return Ph}function P(yc,ml){return!(null==yc||!yc.length)&&-1<Ta(yc,ml,0)}function F(yc,ml,$e){for(var Qh=-1,Hd=null==yc?0:yc.length;++Qh<Hd;)if($e(ml,yc[Qh]))return!0;return!1}function G(yc,ml){for(var $e=-1,Qh=null==yc?0:yc.length,Hd=Array(Qh);++$e<Qh;)Hd[$e]=ml(yc[$e],$e,yc);return Hd}function z(yc,ml){for(var $e=-1,Qh=ml.length,Hd=yc.length;++$e<Qh;)yc[Hd+$e]=ml[$e];return yc}function we(yc,ml,$e,Qh){var Hd=-1,Ph=null==yc?0:yc.length;for(Qh&&Ph&&($e=yc[++Hd]);++Hd<Ph;)$e=ml($e,yc[Hd],Hd,yc);return $e}function xe(yc,ml,$e,Qh){var Hd=null==yc?0:yc.length;for(Qh&&Hd&&($e=yc[--Hd]);Hd--;)$e=ml($e,yc[Hd],Hd,yc);return $e}function _n(yc,ml){for(var $e=-1,Qh=null==yc?0:yc.length;++$e<Qh;)if(ml(yc[$e],$e,yc))return!0;return!1}function fa(yc,ml,$e){var Qh;return $e(yc,function(Hd,Ph,fy){if(ml(Hd,Ph,fy))return Qh=Ph,!1}),Qh}function da(yc,ml,$e,Qh){var Hd=yc.length;for($e+=Qh?1:-1;Qh?$e--:++$e<Hd;)if(ml(yc[$e],$e,yc))return $e;return-1}function Ta(yc,ml,$e){if(ml==ml)e:{--$e;for(var Qh=yc.length;++$e<Qh;)if(yc[$e]===ml){yc=$e;break e}yc=-1}else yc=da(yc,Ja,$e);return yc}function Da(yc,ml,$e,Qh){--$e;for(var Hd=yc.length;++$e<Hd;)if(Qh(yc[$e],ml))return $e;return-1}function Ja(yc){return yc!=yc}function rl(yc,ml){var $e=null==yc?0:yc.length;return $e?kd(yc,ml)/$e:R0}function Nl(yc){return function(ml){return null==ml?ba:ml[yc]}}function Vl(yc){return function(ml){return null==yc?ba:yc[ml]}}function xl(yc,ml,$e,Qh,Hd){return Hd(yc,function(Ph,fy,sb){$e=Qh?(Qh=!1,Ph):ml($e,Ph,fy,sb)}),$e}function kd(yc,ml){for(var $e,Qh=-1,Hd=yc.length;++Qh<Hd;){var Ph=ml(yc[Qh]);Ph!==ba&&($e=$e===ba?Ph:$e+Ph)}return $e}function E0(yc,ml){for(var $e=-1,Qh=Array(yc);++$e<yc;)Qh[$e]=ml($e);return Qh}function Ha(yc){return yc&&yc.slice(0,H0(yc)+1).replace(m3,"")}function _u(yc){return function(ml){return yc(ml)}}function ul(yc,ml){return G(ml,function($e){return yc[$e]})}function Rl(yc,ml){return yc.has(ml)}function ic(yc,ml){for(var $e=-1,Qh=yc.length;++$e<Qh&&-1<Ta(ml,yc[$e],0););return $e}function wc(yc,ml){for(var $e=yc.length;$e--&&-1<Ta(ml,yc[$e],0););return $e}function tl(yc){return"\\"+i6[yc]}function Sl(yc){var ml=-1,$e=Array(yc.size);return yc.forEach(function(Qh,Hd){$e[++ml]=[Hd,Qh]}),$e}function kl(yc,ml){return function($e){return yc(ml($e))}}function Fd(yc,ml){for(var $e=-1,Qh=yc.length,Hd=0,Ph=[];++$e<Qh;){var fy=yc[$e];fy!==ml&&"__lodash_placeholder__"!==fy||(yc[$e]="__lodash_placeholder__",Ph[Hd++]=$e)}return Ph}function Bl(yc){var ml=-1,$e=Array(yc.size);return yc.forEach(function(Qh){$e[++ml]=Qh}),$e}function Jp(yc){if(mT.test(yc)){for(var ml=E3.lastIndex=0;E3.test(yc);)++ml;yc=ml}else yc=_3(yc);return yc}function Th(yc){return mT.test(yc)?yc.match(E3)||[]:yc.split("")}function H0(yc){for(var ml=yc.length;ml--&&oV.test(yc.charAt(ml)););return ml}var ba,p1=1/0,R0=NaN,zy=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],u0=/\b__p \+= '';/g,p3=/\b(__p \+=) '' \+/g,v0=/(__e\(.*?\)|\b__t\)) \+\n'';/g,OL=/&(?:amp|lt|gt|quot|#39);/g,eb=/[&<>"']/g,TS=RegExp(OL.source),lO=RegExp(eb.source),rV=/<%-([\s\S]+?)%>/g,wj=/<%([\s\S]+?)%>/g,qj=/<%=([\s\S]+?)%>/g,$j=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,iV=/^\w*$/,g3=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,DL=/[\\^$.*+?()[\]{}|]/g,A3=RegExp(DL.source),m3=/^\s+/,oV=/\s/,sV=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,az=/\{\n\/\* \[wrapped with (.+)\] \*/,fR=/,? & /,aV=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,cz=/[()=,{}\[\]\/\s]/,cV=/\\(\\)?/g,e6=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,t6=/\w*$/,NL=/^[-+]0x[0-9a-f]+$/i,uz=/^0b[01]+$/i,lz=/^\[object .+?Constructor\]$/,dz=/^0o[0-7]+$/i,U2=/^(?:0|[1-9]\d*)$/,n6=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,AT=/($^)/,LL=/['\n\r\u2028\u2029\\]/g,PL=/['\u2019]/g,ML=/[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]/g,E3=/\ud83c[\udffb-\udfff](?=\ud83c[\udffb-\udfff])|(?:[^\ud800-\udfff][\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]?|[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,F2=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['\u2019](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,mT=/[\u200d\ud800-\udfff\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff\ufe0e\ufe0f]/,r6=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,BL="Array Buffer DataView Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Promise RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ clearTimeout isFinite parseInt setTimeout".split(" "),nS=-1,k0={};k0["[object Float32Array]"]=k0["[object Float64Array]"]=k0["[object Int8Array]"]=k0["[object Int16Array]"]=k0["[object Int32Array]"]=k0["[object Uint8Array]"]=k0["[object Uint8ClampedArray]"]=k0["[object Uint16Array]"]=k0["[object Uint32Array]"]=!0,k0["[object Arguments]"]=k0["[object Array]"]=k0["[object ArrayBuffer]"]=k0["[object Boolean]"]=k0["[object DataView]"]=k0["[object Date]"]=k0["[object Error]"]=k0["[object Function]"]=k0["[object Map]"]=k0["[object Number]"]=k0["[object Object]"]=k0["[object RegExp]"]=k0["[object Set]"]=k0["[object String]"]=k0["[object WeakMap]"]=!1;var C0={};C0["[object Arguments]"]=C0["[object Array]"]=C0["[object ArrayBuffer]"]=C0["[object DataView]"]=C0["[object Boolean]"]=C0["[object Date]"]=C0["[object Float32Array]"]=C0["[object Float64Array]"]=C0["[object Int8Array]"]=C0["[object Int16Array]"]=C0["[object Int32Array]"]=C0["[object Map]"]=C0["[object Number]"]=C0["[object Object]"]=C0["[object RegExp]"]=C0["[object Set]"]=C0["[object String]"]=C0["[object Symbol]"]=C0["[object Uint8Array]"]=C0["[object Uint8ClampedArray]"]=C0["[object Uint16Array]"]=C0["[object Uint32Array]"]=!0,C0["[object Error]"]=C0["[object Function]"]=C0["[object WeakMap]"]=!1;var i6={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},uV=parseFloat,o6=parseInt,ET="object"==Ia(qb)&&qb&&qb.Object===Object&&qb,lV="object"==("undefined"==typeof self?"undefined":Ia(self))&&self&&self.Object===Object&&self,B0=ET||lV||Function("return this")(),by=t&&!t.nodeType&&t,q0=by&&r&&!r.nodeType&&r,dO=q0&&q0.exports===by,k1=dO&&ET.process,L1=function(){try{return q0&&q0.require&&q0.require("util").types||k1&&k1.binding&&k1.binding("util")}catch(ml){}}(),UL=L1&&L1.isArrayBuffer,s6=L1&&L1.isDate,FL=L1&&L1.isMap,v3=L1&&L1.isRegExp,hO=L1&&L1.isSet,y3=L1&&L1.isTypedArray,_3=Nl("length"),fO=Vl({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),pR=Vl({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),a6=Vl({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),pO=function yc(ml){function $e(w){if(Y0(w)&&!vp(w)&&!(w instanceof Ph)){if(w instanceof Hd)return w;if(r0.call(w,"__wrapped__"))return gV(w)}return new Hd(w)}function Qh(){}function Hd(w,B){this.__wrapped__=w,this.__actions__=[],this.__chain__=!!B,this.__index__=0,this.__values__=ba}function Ph(w){this.__wrapped__=w,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function fy(w){var B=-1,H=null==w?0:w.length;for(this.clear();++B<H;){var _e=w[B];this.set(_e[0],_e[1])}}function sb(w){var B=-1,H=null==w?0:w.length;for(this.clear();++B<H;){var _e=w[B];this.set(_e[0],_e[1])}}function Dg(w){var B=-1,H=null==w?0:w.length;for(this.clear();++B<H;){var _e=w[B];this.set(_e[0],_e[1])}}function wS(w){var B=-1,H=null==w?0:w.length;for(this.__data__=new Dg;++B<H;)this.add(w[B])}function xp(w){this.size=(this.__data__=new sb(w)).size}function gR(w,B){var H,_e=vp(w),_o=!_e&&D_(w),la=!_e&&!_o&&dS(w),xa=!_e&&!_o&&!la&&N_(w),hc=(_o=(_e=_e||_o||la||xa)?E0(w.length,NT):[]).length;for(H in w)!B&&!r0.call(w,H)||_e&&("length"==H||la&&("offset"==H||"parent"==H)||xa&&("buffer"==H||"byteLength"==H||"byteOffset"==H)||wy(H,hc))||_o.push(H);return _o}function I3(w){var B=w.length;return B?w[B1(0,B-1)]:ba}function j2(w,B){return O3(l_(w),gO(B,0,w.length))}function Sp(w){return O3(l_(w))}function AR(w,B,H){(H===ba||G1(w[B],H))&&(H!==ba||B in w)||U0(w,B,H)}function QL(w,B,H){var _e=w[B];r0.call(w,B)&&G1(_e,H)&&(H!==ba||B in w)||U0(w,B,H)}function $p(w,B){for(var H=w.length;H--;)if(G1(w[H][0],B))return H;return-1}function b3(w,B,H,_e){return PT(w,function(_o,la,xa){B(_e,_o,H(_o),xa)}),_e}function up(w,B){return w&&U1(B,z0(B),w)}function U0(w,B,H){"__proto__"==B&&cS?cS(w,B,{configurable:!0,enumerable:!0,value:H,writable:!0}):w[B]=H}function C3(w,B){for(var H=-1,_e=B.length,_o=_E(_e),la=null==w;++H<_e;)_o[H]=la?ba:SP(w,B[H]);return _o}function gO(w,B,H){return w==w&&(H!==ba&&(w=w<=H?w:H),B!==ba&&(w=w>=B?w:B)),w}function P1(w,B,H,_e,_o,la){var xa,Pl,Uh,If,hc=1&B,xc=2&B,Yc=4&B;if(H&&(xa=_o?H(w,_e,_o,la):H(w)),xa!==ba)return xa;if(!I0(w))return w;if(_e=vp(w)){if(If=new(Pl=w).constructor(Uh=Pl.length),Uh&&"string"==typeof Pl[0]&&r0.call(Pl,"index")&&(If.index=Pl.index,If.input=Pl.input),xa=If,!hc)return l_(w,xa)}else{var ll=Ny(w),Ml="[object Function]"==ll||"[object GeneratorFunction]"==ll;if(dS(w))return u_(w,hc);if("[object Object]"==ll||"[object Arguments]"==ll||Ml&&!_o){if(xa=xc||Ml?{}:p6(w),!hc)return xc?function(Pl,Uh){return U1(Pl,LP(Pl),Uh)}(w,function(Pl,Uh){return Pl&&U1(Uh,L0(Uh),Pl)}(xa,w)):function(Pl,Uh){return U1(Pl,xT(Pl),Uh)}(w,up(xa,w))}else{if(!C0[ll])return _o?w:{};xa=function(Pl,Uh,If){var wp=Pl.constructor;switch(Uh){case"[object ArrayBuffer]":return J2(Pl);case"[object Boolean]":case"[object Date]":return new wp(+Pl);case"[object DataView]":return Uh=If?J2(Pl.buffer):Pl.buffer,new Pl.constructor(Uh,Pl.byteOffset,Pl.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return T3(Pl,If);case"[object Map]":case"[object Set]":return new wp;case"[object Number]":case"[object String]":return new wp(Pl);case"[object RegExp]":return(Uh=new Pl.constructor(Pl.source,t6.exec(Pl))).lastIndex=Pl.lastIndex,Uh;case"[object Symbol]":return FO?zc(FO.call(Pl)):{}}}(w,ll,hc)}}if(la||(la=new xp),_o=la.get(w))return _o;la.set(w,xa),Db(w)?w.forEach(function(Pl){xa.add(P1(Pl,B,H,Pl,w,la))}):x6(w)&&w.forEach(function(Pl,Uh){xa.set(Uh,P1(Pl,B,H,Uh,w,la))}),xc=Yc?xc?TT:IR:xc?L0:z0;var ld=_e?ba:xc(w);return p(ld||w,function(Pl,Uh){ld&&(Pl=w[Uh=Pl]),QL(xa,Uh,P1(Pl,B,H,Uh,w,la))}),xa}function Q2(w,B,H){var _e=H.length;if(null==w)return!_e;for(w=zc(w);_e--;){var _o=H[_e],xa=w[_o];if(xa===ba&&!(_o in w)||!(0,B[_o])(xa))return!1}return!0}function U_(w,B,H){if("function"!=typeof w)throw new n0("Expected a function");return GO(function(){w.apply(ba,H)},B)}function V2(w,B,H,_e){var _o=-1,la=P,xa=!0,hc=w.length,xc=[],Yc=B.length;if(!hc)return xc;H&&(B=G(B,_u(H))),_e?(la=F,xa=!1):200<=B.length&&(la=Rl,xa=!1,B=new wS(B));e:for(;++_o<hc;){var ll=w[_o],Ml=null==H?ll:H(ll);if(ll=_e||0!==ll?ll:0,xa&&Ml==Ml){for(var ld=Yc;ld--;)if(B[ld]===Ml)continue e;xc.push(ll)}else la(B,Ml,_e)||xc.push(ll)}return xc}function Xy(w,B){var H=!0;return PT(w,function(_e,_o,la){return H=!!B(_e,_o,la)}),H}function VL(w,B,H){for(var _e=-1,_o=w.length;++_e<_o;){var la=w[_e],xa=B(la);if(null!=xa&&(hc===ba?xa==xa&&!T_(xa):H(xa,hc)))var hc=xa,xc=la}return xc}function x1(w,B){var H=[];return PT(w,function(_e,_o,la){B(_e,_o,la)&&H.push(_e)}),H}function c_(w,B,H,_e,_o){var la=-1,xa=w.length;for(H||(H=pV),_o||(_o=[]);++la<xa;){var hc=w[la];0<B&&H(hc)?1<B?c_(hc,B-1,H,_e,_o):z(_o,hc):_e||(_o[_o.length]=hc)}return _o}function RS(w,B){return w&&uN(w,B,z0)}function c6(w,B){return w&&NP(w,B,z0)}function Fy(w,B){return M(B,function(H){return H1(w[H])})}function OS(w,B){for(var H=0,_e=(B=m1(B,w)).length;null!=w&&H<_e;)w=w[Q1(B[H++])];return H&&H==_e?w:ba}function dV(w,B,H){return B=B(w),vp(w)?B:z(B,H(w))}function y_(w){if(null==w)return w===ba?"[object Undefined]":"[object Null]";if(Oy&&Oy in zc(w)){var B=r0.call(w,Oy),H=w[Oy];try{w[Oy]=ba;var _e=!0}catch(la){}var _o=M3.call(w);_e&&(B?w[Oy]=H:delete w[Oy]),w=_o}else w=M3.call(w);return w}function G2(w,B){return w>B}function F_(w,B){return null!=w&&r0.call(w,B)}function y0(w,B){return null!=w&&B in zc(w)}function GL(w,B,H){for(var _e=H?F:P,_o=w[0].length,la=w.length,xa=la,hc=_E(la),xc=1/0,Yc=[];xa--;){var ll=w[xa];xa&&B&&(ll=G(ll,_u(B))),xc=Wp(ll.length,xc),hc[xa]=!H&&(B||120<=_o&&120<=ll.length)?new wS(xa&&ll):ba}ll=w[0];var Ml=-1,ld=hc[0];e:for(;++Ml<_o&&Yc.length<xc;){var Pl=ll[Ml],Uh=B?B(Pl):Pl;if(Pl=H||0!==Pl?Pl:0,ld?!ld.has(Uh):!_e(Yc,Uh,H)){for(xa=la;--xa;){var If=hc[xa];if(If?!If.has(Uh):!_e(w[xa],Uh,H))continue e}ld&&ld.push(Uh),Yc.push(Pl)}}return Yc}function HL(w,B,H){return null==(B=null==(w=2>(B=m1(B,w)).length?w:OS(w,iy(B,0,-1)))?w:w[Q1(V1(B))])?ba:o(B,w,H)}function hV(w){return Y0(w)&&"[object Arguments]"==y_(w)}function Hf(w,B,H,_e,_o){if(w===B)return!0;if(null==w||null==B||!Y0(w)&&!Y0(B))return w!=w&&B!=B;e:{var la=vp(w),xa=vp(B),hc=la?"[object Array]":Ny(w),xc=xa?"[object Array]":Ny(B),Yc="[object Object]"==(hc="[object Arguments]"==hc?"[object Object]":hc);if(xa="[object Object]"==(xc="[object Arguments]"==xc?"[object Object]":xc),(xc=hc==xc)&&dS(w)){if(!dS(B)){B=!1;break e}la=!0,Yc=!1}if(xc&&!Yc)_o||(_o=new xp),B=la||N_(w)?_R(w,B,H,_e,Hf,_o):function(If,wp,_A,ef,d0,sy,o0){switch(_A){case"[object DataView]":if(If.byteLength!=wp.byteLength||If.byteOffset!=wp.byteOffset)break;If=If.buffer,wp=wp.buffer;case"[object ArrayBuffer]":if(If.byteLength!=wp.byteLength||!sy(new Ry(If),new Ry(wp)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return G1(+If,+wp);case"[object Error]":return If.name==wp.name&&If.message==wp.message;case"[object RegExp]":case"[object String]":return If==wp+"";case"[object Map]":var d_=Sl;case"[object Set]":if(d_||(d_=Bl),If.size!=wp.size&&!(1&ef))break;return(_A=o0.get(If))?_A==wp:(ef|=2,o0.set(If,wp),wp=_R(d_(If),d_(wp),ef,d0,sy,o0),o0.delete(If),wp);case"[object Symbol]":if(FO)return FO.call(If)==FO.call(wp)}return!1}(w,B,hc,H,_e,Hf,_o);else{if(!(1&H)&&(la=Yc&&r0.call(w,"__wrapped__"),hc=xa&&r0.call(B,"__wrapped__"),la||hc)){w=la?w.value():w,B=hc?B.value():B,_o||(_o=new xp),B=Hf(w,B,H,_e,_o);break e}if(xc)t:if(_o||(_o=new xp),la=1&H,hc=IR(w),xa=hc.length,xc=IR(B).length,xa==xc||la){for(xc=xa;xc--;){var ll=hc[xc];if(!(la?ll in B:r0.call(B,ll))){B=!1;break t}}if(Yc=_o.get(w),ll=_o.get(B),Yc&&ll)B=Yc==B&&ll==w;else{Yc=!0,_o.set(w,B),_o.set(B,w);for(var Ml=la;++xc<xa;){var ld=w[ll=hc[xc]],Pl=B[ll];if(_e)var Uh=la?_e(Pl,ld,ll,B,w,_o):_e(ld,Pl,ll,w,B,_o);if(Uh===ba?ld!==Pl&&!Hf(ld,Pl,H,_e,_o):!Uh){Yc=!1;break}Ml||(Ml="constructor"==ll)}Yc&&!Ml&&(H=w.constructor)!=(_e=B.constructor)&&"constructor"in w&&"constructor"in B&&!("function"==typeof H&&H instanceof H&&"function"==typeof _e&&_e instanceof _e)&&(Yc=!1),_o.delete(w),_o.delete(B),B=Yc}}else B=!1;else B=!1}}return B}function u6(w,B,H,_e){var _o=H.length,la=_o,xa=!_e;if(null==w)return!la;for(w=zc(w);_o--;){var hc=H[_o];if(xa&&hc[2]?hc[1]!==w[hc[0]]:!(hc[0]in w))return!1}for(;++_o<la;){var xc=(hc=H[_o])[0],Yc=w[xc],ll=hc[1];if(xa&&hc[2]){if(Yc===ba&&!(xc in w))return!1}else{if(hc=new xp,_e)var Ml=_e(Yc,ll,xc,w,B,hc);if(Ml===ba?!Hf(ll,Yc,3,_e,hc):!Ml)return!1}}return!0}function M1(w){return!(!I0(w)||TP&&TP in w)&&(H1(w)?_1:lz).test(vO(w))}function WL(w){return"function"==typeof w?w:null==w?w_:"object"==Ia(w)?vp(w)?q2(w[0],w[1]):H2(w):Nf(w)}function __(w){if(!OT(w))return t_(w);var B,H=[];for(B in zc(w))r0.call(w,B)&&"constructor"!=B&&H.push(B);return H}function db(w,B){return w<B}function l6(w,B){var H=-1,_e=S_(w)?_E(w.length):[];return PT(w,function(_o,la,xa){_e[++H]=B(_o,la,xa)}),_e}function H2(w){var B=kS(w);return 1==B.length&&B[0][2]?v1(B[0][0],B[0][1]):function(H){return H===w||u6(H,w,B)}}function q2(w,B){return X2(w)&&B==B&&!I0(B)?v1(Q1(w),B):function(H){var _e=SP(H,w);return _e===ba&&_e===B?y6(H,w):Hf(B,_e,3)}}function DS(w,B,H,_e,_o){w!==B&&uN(B,function(la,xa){if(_o||(_o=new xp),I0(la)){la=_o;var hc=R3(w,xa),xc=R3(B,xa),Yc=la.get(xc);if(Yc)AR(w,xa,Yc);else{var ll=(Yc=_e?_e(hc,xc,xa+"",w,B,la):ba)===ba;if(ll){var Ml=vp(xc),ld=!Ml&&dS(xc),Pl=!Ml&&!ld&&N_(xc);Yc=xc,Ml||ld||Pl?vp(hc)?Yc=hc:oy(hc)?Yc=l_(hc):ld?(ll=!1,Yc=u_(xc,!0)):Pl?(ll=!1,Yc=T3(xc,!0)):Yc=[]:Z2(xc)||D_(xc)?(Yc=hc,D_(hc)?Yc=_D(hc):I0(hc)&&!H1(hc)||(Yc=p6(xc))):ll=!1}ll&&(la.set(xc,Yc),DS(Yc,xc,H,_e,la),la.delete(xc)),AR(w,xa,Yc)}}else(hc=_e?_e(R3(w,xa),la,xa+"",w,B,_o):ba)===ba&&(hc=la),AR(w,xa,hc)},L0)}function mR(w,B){var H=w.length;if(H)return wy(B+=0>B?H:0,H)?w[B]:ba}function W2(w,B,H){B=B.length?G(B,function(_o){return vp(_o)?function(la){return OS(la,1===_o.length?_o[0]:_o)}:_o}):[w_];var _e=-1;return B=G(B,_u(Gd())),function(_o,la){var xa=_o.length;for(_o.sort(function(_o,la){e:{for(var xa=-1,hc=_o.criteria,xc=la.criteria,Yc=hc.length,ll=H.length;++xa<Yc;){var Ml=JL(hc[xa],xc[xa]);if(Ml){if(xa>=ll){_o=Ml;break e}_o=Ml*("desc"==H[xa]?-1:1);break e}}_o=_o.index-la.index}return _o});xa--;)_o[xa]=_o[xa].value;return _o}(w=l6(w,function(_o,la,xa){return{criteria:G(B,function(hc){return hc(_o)}),index:++_e,value:_o}}))}function Of(w,B,H){for(var _e=-1,_o=B.length,la={};++_e<_o;){var xa=B[_e],hc=OS(w,xa);H(hc,xa)&&ER(la,m1(xa,w),hc)}return la}function K2(w,B,H,_e){var _o=_e?Da:Ta,la=-1,xa=B.length,hc=w;for(w===B&&(B=l_(B)),H&&(hc=G(w,_u(H)));++la<xa;){var xc=0,Yc=B[la];for(Yc=H?H(Yc):Yc;-1<(xc=_o(hc,Yc,xc,_e));)hc!==w&&kT.call(hc,xc,1),kT.call(w,xc,1)}return w}function d6(w,B){for(var H=w?B.length:0,_e=H-1;H--;){var _o=B[H];if(H==_e||_o!==la){var la=_o;wy(_o)?kT.call(w,_o,1):yT(w,_o)}}return w}function B1(w,B){return w+xO(b6()*(B-w+1))}function KL(w,B){var H="";if(!w||1>B||9007199254740991<B)return H;do{B%2&&(H+=w),(B=xO(B/2))&&(w+=w)}while(B);return H}function Hp(w,B){return G3(g6(w,B,w_),w+"")}function vT(w){return I3(gy(w))}function g1(w,B){return O3(w=gy(w),gO(B,0,w.length))}function ER(w,B,H,_e){if(!I0(w))return w;for(var _o=-1,la=(B=m1(B,w)).length,xa=la-1,hc=w;null!=hc&&++_o<la;){var xc=Q1(B[_o]),Yc=H;if("__proto__"===xc||"constructor"===xc||"prototype"===xc)break;if(_o!=xa){var ll=hc[xc];(Yc=_e?_e(ll,xc,hc):ba)===ba&&(Yc=I0(ll)?ll:wy(B[_o+1])?[]:{})}QL(hc,xc,Yc),hc=hc[xc]}return w}function h6(w){return O3(gy(w))}function iy(w,B,H){var _e=-1,_o=w.length;for(0>B&&(B=-B>_o?0:_o+B),0>(H=H>_o?_o:H)&&(H+=_o),_o=B>H?0:H-B>>>0,B>>>=0,H=_E(_o);++_e<_o;)H[_e]=w[_e+B];return H}function f6(w,B){var H;return PT(w,function(_e,_o,la){return!(H=B(_e,_o,la))}),!!H}function AO(w,B,H){var _e=0,_o=null==w?_e:w.length;if("number"==typeof B&&B==B&&2147483647>=_o){for(;_e<_o;){var la=_e+_o>>>1,xa=w[la];null!==xa&&!T_(xa)&&(H?xa<=B:xa<B)?_e=la+1:_o=la}return _o}return S3(w,B,w_,H)}function S3(w,B,H,_e){var _o=0,la=null==w?0:w.length;if(0===la)return 0;for(var xa=(B=H(B))!=B,hc=null===B,xc=T_(B),Yc=B===ba;_o<la;){var ll=xO((_o+la)/2),Ml=H(w[ll]),ld=Ml!==ba,Pl=null===Ml,Uh=Ml==Ml,If=T_(Ml);(xa?_e||Uh:Yc?Uh&&(_e||ld):hc?Uh&&ld&&(_e||!Pl):xc?Uh&&ld&&!Pl&&(_e||!If):!Pl&&!If&&(_e?Ml<=B:Ml<B))?_o=ll+1:la=ll}return Wp(la,4294967294)}function fV(w,B){for(var H=-1,_e=w.length,_o=0,la=[];++H<_e;){var xa=w[H],hc=B?B(xa):xa;if(!H||!G1(hc,xc)){var xc=hc;la[_o++]=0===xa?0:xa}}return la}function _v(w){return"number"==typeof w?w:T_(w)?R0:+w}function j_(w){if("string"==typeof w)return w;if(vp(w))return G(w,j_)+"";if(T_(w))return C6?C6.call(w):"";var B=w+"";return"0"==B&&1/w==-p1?"-0":B}function vR(w,B,H){var _e=-1,_o=P,la=w.length,xa=!0,hc=[],xc=hc;if(H)xa=!1,_o=F;else if(200<=la){if(_o=B?null:jO(w))return Bl(_o);xa=!1,_o=Rl,xc=new wS}else xc=B?[]:hc;e:for(;++_e<la;){var Yc=w[_e],ll=B?B(Yc):Yc;if(Yc=H||0!==Yc?Yc:0,xa&&ll==ll){for(var Ml=xc.length;Ml--;)if(xc[Ml]===ll)continue e;B&&xc.push(ll),hc.push(Yc)}else _o(xc,ll,H)||(xc!==hc&&xc.push(ll),hc.push(Yc))}return hc}function yT(w,B){return null==(w=2>(B=m1(B,w)).length?w:OS(w,iy(B,0,-1)))||delete w[Q1(V1(B))]}function e0(w,B,H,_e){for(var _o=w.length,la=_e?_o:-1;(_e?la--:++la<_o)&&B(w[la],la,w););return H?iy(w,_e?0:la,_e?la+1:_o):iy(w,_e?la+1:0,_e?_o:la)}function yR(w,B){return w instanceof Ph&&(w=w.value()),we(B,function(H,_e){return _e.func.apply(_e.thisArg,z([H],_e.args))},w)}function Y2(w,B,H){var _e=w.length;if(2>_e)return _e?vR(w[0]):[];for(var _o=-1,la=_E(_e);++_o<_e;)for(var xa=w[_o],hc=-1;++hc<_e;)hc!=_o&&(la[_o]=V2(la[_o]||xa,w[hc],B,H));return vR(c_(la,1),B,H)}function rS(w,B,H){for(var _e=-1,_o=w.length,la=B.length,xa={};++_e<_o;)H(xa,w[_e],_e<la?B[_e]:ba);return xa}function YL(w){return oy(w)?w:[]}function A1(w){return"function"==typeof w?w:w_}function m1(w,B){return vp(w)?w:X2(w,B)?[w]:H3(_f(w))}function pb(w,B,H){var _e=w.length;return H=H===ba?_e:H,!B&&H>=_e?w:iy(w,B,H)}function u_(w,B){return B?w.slice():(B=w.length,B=I6?I6(B):new w.constructor(B),w.copy(B),B)}function J2(w){var B=new w.constructor(w.byteLength);return new Ry(B).set(new Ry(w)),B}function T3(w,B){return B=B?J2(w.buffer):w.buffer,new w.constructor(B,w.byteOffset,w.length)}function JL(w,B){if(w!==B){var H=w!==ba,_e=null===w,_o=w==w,la=T_(w),xa=B!==ba,hc=null===B,xc=B==B,Yc=T_(B);if(!hc&&!Yc&&!la&&w>B||la&&xa&&xc&&!hc&&!Yc||_e&&xa&&xc||!H&&xc||!_o)return 1;if(!_e&&!la&&!Yc&&w<B||Yc&&H&&_o&&!_e&&!la||hc&&H&&_o||!xa&&_o||!xc)return-1}return 0}function w3(w,B,H,_e){var _o=-1,la=w.length,xa=H.length,hc=-1,xc=B.length,Yc=D0(la-xa,0),ll=_E(xc+Yc);for(_e=!_e;++hc<xc;)ll[hc]=B[hc];for(;++_o<xa;)(_e||_o<la)&&(ll[H[_o]]=w[_o]);for(;Yc--;)ll[hc++]=w[_o++];return ll}function E1(w,B,H,_e){var _o=-1,la=w.length,xa=-1,hc=H.length,xc=-1,Yc=B.length,ll=D0(la-hc,0),Ml=_E(ll+Yc);for(_e=!_e;++_o<ll;)Ml[_o]=w[_o];for(ll=_o;++xc<Yc;)Ml[ll+xc]=B[xc];for(;++xa<hc;)(_e||_o<la)&&(Ml[ll+H[xa]]=w[_o++]);return Ml}function l_(w,B){var H=-1,_e=w.length;for(B||(B=_E(_e));++H<_e;)B[H]=w[H];return B}function U1(w,B,H,_e){var _o=!H;H||(H={});for(var la=-1,xa=B.length;++la<xa;){var hc=B[la],xc=_e?_e(H[hc],w[hc],hc,H,w):ba;xc===ba&&(xc=w[hc]),_o?U0(H,hc,xc):QL(H,hc,xc)}return H}function py(w,B){return function(H,_e){var _o=vp(H)?l:b3,la=B?B():{};return _o(H,w,Gd(_e,2),la)}}function Cy(w){return Hp(function(B,H){var _e=-1,_o=H.length,la=1<_o?H[_o-1]:ba,xa=2<_o?H[2]:ba;for(la=3<w.length&&"function"==typeof la?(_o--,la):ba,xa&&F0(H[0],H[1],xa)&&(la=3>_o?ba:la,_o=1),B=zc(B);++_e<_o;)(xa=H[_e])&&w(B,xa,_e,la);return B})}function Sy(w,B){return function(H,_e){if(null==H)return H;if(!S_(H))return w(H,_e);for(var _o=H.length,la=B?_o:-1,xa=zc(H);(B?la--:++la<_o)&&!1!==_e(xa[la],la,xa););return H}}function NS(w){return function(B,H,_e){for(var _o=-1,la=zc(B),xa=(_e=_e(B)).length;xa--;){var hc=_e[w?xa:++_o];if(!1===H(la[hc],hc,la))break}return B}}function _T(w){return function(B){B=_f(B);var H=mT.test(B)?Th(B):ba,_e=H?H[0]:B.charAt(0);return B=H?pb(H,1).join(""):B.slice(1),_e[w]()+B}}function $y(w){return function(B){return we(P3(_h(B).replace(PL,"")),w,"")}}function IT(w){return function(){var B=arguments;switch(B.length){case 0:return new w;case 1:return new w(B[0]);case 2:return new w(B[0],B[1]);case 3:return new w(B[0],B[1],B[2]);case 4:return new w(B[0],B[1],B[2],B[3]);case 5:return new w(B[0],B[1],B[2],B[3],B[4]);case 6:return new w(B[0],B[1],B[2],B[3],B[4],B[5]);case 7:return new w(B[0],B[1],B[2],B[3],B[4],B[5],B[6])}var H=cN(w.prototype);return I0(B=w.apply(H,B))?B:H}}function XL(w){return function(B,H,_e){var _o=zc(B);if(!S_(B)){var la=Gd(H,3);B=z0(B),H=function(xa){return la(_o[xa],xa,_o)}}return-1<(H=w(B,H,_e))?_o[la?B[H]:H]:ba}}function mO(w){return gf(function(B){var H=B.length,_e=H,_o=Hd.prototype.thru;for(w&&B.reverse();_e--;){var la=B[_e];if("function"!=typeof la)throw new n0("Expected a function");if(_o&&!xa&&"wrapper"==wT(la))var xa=new Hd([],!0)}for(_e=xa?_e:H;++_e<H;){var hc="wrapper"==(_o=wT(la=B[_e]))?Dy(la):ba;xa=hc&&EO(hc[0])&&424==hc[1]&&!hc[4].length&&1==hc[9]?xa[wT(hc[0])].apply(xa,hc[3]):1==la.length&&EO(la)?xa[_o]():xa.thru(la)}return function(){var xc=arguments,Yc=xc[0];if(xa&&1==xc.length&&vp(Yc))return xa.plant(Yc).value();var ll=0;for(xc=H?B[ll].apply(this,xc):Yc;++ll<H;)xc=B[ll].call(this,xc);return xc}})}function F1(w,B,H,_e,_o,la,xa,hc,xc,Yc){var ll=128&B,Ml=1&B,ld=2&B,Pl=24&B,Uh=512&B,If=ld?ba:IT(w);return function wp(){for(var _A=arguments.length,ef=_E(_A),d0=_A;d0--;)ef[d0]=arguments[d0];if(Pl){var sy,o0=j1(wp);for(d0=ef.length,sy=0;d0--;)ef[d0]===o0&&++sy}if(_e&&(ef=w3(ef,_e,_o,Pl)),la&&(ef=E1(ef,la,xa,Pl)),_A-=sy,Pl&&_A<Yc)return o0=Fd(ef,o0),S0(w,B,F1,wp.placeholder,H,ef,o0,hc,xc,Yc-_A);if(o0=Ml?H:this,d0=ld?o0[w]:w,_A=ef.length,hc)for(var d_=Wp(hc.length,sy=ef.length),$P=l_(ef);d_--;){var i2=hc[d_];ef[d_]=wy(i2,sy)?$P[i2]:ba}else Uh&&1<_A&&ef.reverse();return ll&&xc<_A&&(ef.length=xc),this&&this!==B0&&this instanceof wp&&(d0=If||IT(d0)),d0.apply(o0,ef)}}function bT(w,B){return function(H,_e){return _o=H,la=w,xa=B(_e),hc={},RS(_o,function(xc,Yc,ll){la(hc,xa(xc),Yc,ll)}),hc;var _o,la,xa,hc}}function Ty(w,B){return function(H,_e){var _o;if(H===ba&&_e===ba)return B;if(H!==ba&&(_o=H),_e!==ba){if(_o===ba)return _e;"string"==typeof H||"string"==typeof _e?(H=j_(H),_e=j_(_e)):(H=_v(H),_e=_v(_e)),_o=w(H,_e)}return _o}}function iS(w){return gf(function(B){return B=G(B,_u(Gd())),Hp(function(H){var _e=this;return w(B,function(_o){return o(_o,_e,H)})})})}function I_(w,B){var H=(B=B===ba?" ":j_(B)).length;return 2>H?H?KL(B,w):B:(H=KL(B,kO(w/Jp(B))),mT.test(B)?pb(Th(H),0,w).join(""):H.slice(0,w))}function Hl(w){return function(B,H,_e){_e&&"number"!=typeof _e&&F0(B,H,_e)&&(H=_e=ba),B=y1(B),H===ba?(H=B,B=0):H=y1(H),_e=_e===ba?B<H?1:-1:y1(_e);var _o=-1;H=D0(kO((H-B)/(_e||1)),0);for(var la=_E(H);H--;)la[w?H:++_o]=B,B+=_e;return la}}function Tp(w){return function(B,H){return"string"==typeof B&&"string"==typeof H||(B=zg(B),H=zg(H)),w(B,H)}}function S0(w,B,H,_e,_o,la,xa,hc,xc,Yc){var ll=8&B;return 4&(B=(B|(ll?32:64))&~(ll?64:32))||(B&=-4),_o=[w,B,_o,ll?la:ba,ll?xa:ba,la=ll?ba:la,xa=ll?ba:xa,hc,xc,Yc],H=H.apply(ba,_o),EO(w)&&dN(H,_o),H.placeholder=_e,A6(H,w,B)}function b_(w){var B=CO[w];return function(H,_e){return H=zg(H),(_e=null==_e?0:Wp(Dp(_e),292))&&F3(H)?(H=(_f(H)+"e").split("e"),+((H=(_f(H=B(H[0]+"e"+(+H[1]+_e)))+"e").split("e"))[0]+"e"+(+H[1]-_e))):B(H)}}function CT(w){return function(B){var _e,_o,la,H=Ny(B);return"[object Map]"==H?Sl(B):"[object Set]"==H?(_e=B,_o=-1,la=Array(_e.size),_e.forEach(function(xa){la[++_o]=[xa,xa]}),la):function(_e,_o){return G(_o,function(la){return[la,_e[la]]})}(B,w(B))}}function t0(w,B,H,_e,_o,la,xa,hc){var xc=2&B;if(!xc&&"function"!=typeof w)throw new n0("Expected a function");var Yc=_e?_e.length:0;if(Yc||(B&=-97,_e=_o=ba),xa=xa===ba?xa:D0(Dp(xa),0),hc=hc===ba?hc:Dp(hc),Yc-=_o?_o.length:0,64&B){var ll=_e,Ml=_o;_e=_o=ba}var Pl,Uh,If,wp,ld=xc?ba:Dy(w);return la=[w,B,H,_e,_o,ll,Ml,la,xa,hc],ld&&(B=(H=la[1])|(w=ld[1]),_e=128==w&&8==H||128==w&&256==H&&la[7].length<=ld[8]||384==w&&ld[7].length<=ld[8]&&8==H,131>B||_e)&&(1&w&&(la[2]=ld[2],B|=1&H?0:4),(H=ld[3])&&(la[3]=(_e=la[3])?w3(_e,H,ld[4]):H,la[4]=_e?Fd(la[3],"__lodash_placeholder__"):ld[4]),(H=ld[5])&&(la[5]=(_e=la[5])?E1(_e,H,ld[6]):H,la[6]=_e?Fd(la[5],"__lodash_placeholder__"):ld[6]),(H=ld[7])&&(la[7]=H),128&w&&(la[8]=null==la[8]?ld[8]:Wp(la[8],ld[8])),null==la[9]&&(la[9]=ld[9]),la[0]=ld[0],la[1]=B),w=la[0],B=la[1],H=la[2],_e=la[3],_o=la[4],!(hc=la[9]=la[9]===ba?xc?0:w.length:D0(la[9]-Yc,0))&&24&B&&(B&=-25),xc=B&&1!=B?8==B||16==B?(Uh=B,If=hc,wp=IT(Pl=w),function _A(){for(var ef=arguments.length,d0=_E(ef),sy=ef,o0=j1(_A);sy--;)d0[sy]=arguments[sy];return(ef-=(sy=3>ef&&d0[0]!==o0&&d0[ef-1]!==o0?[]:Fd(d0,o0)).length)<If?S0(Pl,Uh,F1,_A.placeholder,ba,d0,sy,ba,ba,If-ef):o(this&&this!==B0&&this instanceof _A?wp:Pl,this,d0)}):32!=B&&33!=B||_o.length?F1.apply(ba,la):function(Pl,Uh,If,wp){var _A=1&Uh,ef=IT(Pl);return function d0(){for(var sy=-1,o0=arguments.length,d_=-1,$P=wp.length,i2=_E($P+o0),H6=this&&this!==B0&&this instanceof d0?ef:Pl;++d_<$P;)i2[d_]=wp[d_];for(;o0--;)i2[d_++]=arguments[++sy];return o(H6,_A?If:this,i2)}}(w,B,H,_e):function(Pl,Uh,If){var wp=1&Uh,_A=IT(Pl);return function ef(){return(this&&this!==B0&&this instanceof ef?_A:Pl).apply(wp?If:this,arguments)}}(w,B,H),A6((ld?lN:dN)(xc,la),w,B)}function ST(w,B,H,_e){return w===ba||G1(w,sS[H])&&!r0.call(_e,H)?B:w}function l0(w,B,H,_e,_o,la){return I0(w)&&I0(B)&&(la.set(B,w),DS(w,B,ba,l0,la),la.delete(B)),w}function z2(w){return Z2(w)?ba:w}function _R(w,B,H,_e,_o,la){var xa=1&H,hc=w.length,xc=B.length;if(hc!=xc&&!(xa&&xc>hc))return!1;xc=la.get(w);var Yc=la.get(B);if(xc&&Yc)return xc==B&&Yc==w;xc=-1,Yc=!0;var ll=2&H?new wS:ba;for(la.set(w,B),la.set(B,w);++xc<hc;){var Ml=w[xc],ld=B[xc];if(_e)var Pl=xa?_e(ld,Ml,xc,B,w,la):_e(Ml,ld,xc,w,B,la);if(Pl!==ba){if(Pl)continue;Yc=!1;break}if(ll){if(!_n(B,function(Uh,If){if(!ll.has(If)&&(Ml===Uh||_o(Ml,Uh,H,_e,la)))return ll.push(If)})){Yc=!1;break}}else if(Ml!==ld&&!_o(Ml,ld,H,_e,la)){Yc=!1;break}}return la.delete(w),la.delete(B),Yc}function gf(w){return G3(g6(w,ba,mV),w+"")}function IR(w){return dV(w,z0,xT)}function TT(w){return dV(w,L0,LP)}function wT(w){for(var B=w.name+"",H=BO[B],_e=r0.call(BO,B)?H.length:0;_e--;){var _o=H[_e],la=_o.func;if(null==la||la==w)return _o.name}return B}function j1(w){return(r0.call($e,"placeholder")?$e:w).placeholder}function Gd(){var w=$e.iteratee||q1;return w=w===q1?WL:w,arguments.length?w(arguments[0],arguments[1]):w}function RT(w,B){w=w.__data__;var H=Ia(B);return("string"==H||"number"==H||"symbol"==H||"boolean"==H?"__proto__"!==B:null===B)?w["string"==typeof B?"string":"hash"]:w.map}function kS(w){for(var B=z0(w),H=B.length;H--;){var _e=B[H],_o=w[_e];B[H]=[_e,_o,_o==_o&&!I0(_o)]}return B}function jy(w,B){return M1(w=null==w?ba:w[B])?w:ba}function _0(w,B,H){for(var _e=-1,_o=(B=m1(B,w)).length,la=!1;++_e<_o;){var xa=Q1(B[_e]);if(!(la=null!=w&&H(w,xa)))break;w=w[xa]}return la||++_e!=_o?la:!!(_o=null==w?0:w.length)&&Qy(_o)&&wy(xa,_o)&&(vp(w)||D_(w))}function p6(w){return"function"!=typeof w.constructor||OT(w)?{}:cN(e_(w))}function pV(w){return vp(w)||D_(w)||!!(OP&&w&&w[OP])}function wy(w,B){var H=Ia(w);return!!(B=null==B?9007199254740991:B)&&("number"==H||"symbol"!=H&&U2.test(w))&&-1<w&&w%1==0&&w<B}function F0(w,B,H){if(!I0(H))return!1;var _e=Ia(B);return!!("number"==_e?S_(H)&&wy(B,H.length):"string"==_e&&B in H)&&G1(H[B],w)}function X2(w,B){if(vp(w))return!1;var H=Ia(w);return!("number"!=H&&"symbol"!=H&&"boolean"!=H&&null!=w&&!T_(w))||iV.test(w)||!$j.test(w)||null!=B&&w in zc(B)}function EO(w){var B=wT(w),H=$e[B];return"function"==typeof H&&B in Ph.prototype&&(w===H||!!(B=Dy(H))&&w===B[0])}function OT(w){var B=w&&w.constructor;return w===("function"==typeof B&&B.prototype||sS)}function v1(w,B){return function(H){return null!=H&&H[w]===B&&(B!==ba||w in zc(H))}}function g6(w,B,H){return B=D0(B===ba?w.length-1:B,0),function(){for(var _e=arguments,_o=-1,la=D0(_e.length-B,0),xa=_E(la);++_o<la;)xa[_o]=_e[B+_o];for(_o=-1,la=_E(B+1);++_o<B;)la[_o]=_e[_o];return la[B]=H(xa),o(w,this,la)}}function R3(w,B){if(("constructor"!==B||"function"!=typeof w[B])&&"__proto__"!=B)return w[B]}function A6(w,B,H){var _e=B+"";B=G3;var _o=hz,la=(la=_e.match(az))?la[1].split(fR):[];return H=_o(la,H),(_o=H.length)&&(H[la=_o-1]=(1<_o?"& ":"")+H[la],H=H.join(2<_o?", ":" "),_e=_e.replace(sV,"{\n/* [wrapped with "+H+"] */\n")),B(w,_e)}function m6(w){var B=0,H=0;return function(){var _e=bV(),_o=16-(_e-H);if(H=_e,0<_o){if(800<=++B)return arguments[0]}else B=0;return w.apply(ba,arguments)}}function O3(w,B){var H=-1,_e=w.length,_o=_e-1;for(B=B===ba?_e:B;++H<B;){var la=w[_e=B1(H,_o)];w[_e]=w[H],w[H]=la}return w.length=B,w}function Q1(w){if("string"==typeof w||T_(w))return w;var B=w+"";return"0"==B&&1/w==-p1?"-0":B}function vO(w){if(null!=w){try{return wO.call(w)}catch(B){}return w+""}return""}function hz(w,B){return p(zy,function(H){var _e="_."+H[0];B&H[1]&&!P(w,_e)&&w.push(_e)}),w.sort()}function gV(w){if(w instanceof Ph)return w.clone();var B=new Hd(w.__wrapped__,w.__chain__);return B.__actions__=l_(w.__actions__),B.__index__=w.__index__,B.__values__=w.__values__,B}function $2(w,B,H){var _e=null==w?0:w.length;return _e?(0>(H=null==H?0:Dp(H))&&(H=D0(_e+H,0)),da(w,Gd(B,3),H)):-1}function AV(w,B,H){var _e=null==w?0:w.length;if(!_e)return-1;var _o=_e-1;return H!==ba&&(_o=Dp(H),_o=0>H?D0(_e+_o,0):Wp(_o,_e-1)),da(w,Gd(B,3),_o,!0)}function mV(w){return null!=w&&w.length?c_(w,1):[]}function EV(w){return w&&w.length?w[0]:ba}function V1(w){var B=null==w?0:w.length;return B?w[B-1]:ba}function D3(w,B){return w&&w.length&&B&&B.length?K2(w,B):w}function $L(w){return null==w?w:SV.call(w)}function E6(w){if(!w||!w.length)return[];var B=0;return w=M(w,function(H){if(oy(H))return B=D0(H.length,B),!0}),E0(B,function(H){return G(w,Nl(H))})}function vV(w,B){return w&&w.length?(w=E6(w),null==B?w:G(w,function(H){return o(B,ba,H)})):[]}function N3(w){return(w=$e(w)).__chain__=!0,w}function yO(w,B){return B(w)}function yV(w,B){return(vp(w)?p:PT)(w,Gd(B,3))}function _V(w,B){return(vp(w)?_:DR)(w,Gd(B,3))}function C_(w,B){return(vp(w)?G:l6)(w,Gd(B,3))}function DT(w,B,H){return B=H?ba:B,t0(w,128,ba,ba,ba,ba,B=w&&null==B?w.length:B)}function k3(w,B){var H;if("function"!=typeof B)throw new n0("Expected a function");return w=Dp(w),function(){return 0<--w&&(H=B.apply(this,arguments)),1>=w&&(B=ba),H}}function LS(w,B,H){function _e(ef){var d0=xc,sy=Yc;return xc=Yc=ba,Pl=ef,ll=w.apply(sy,d0)}function _o(ef){var d0=ef-ld;return ef-=Pl,ld===ba||d0>=B||0>d0||If&&ef>=_A}function la(){var ef=US();if(_o(ef))return xa(ef);var d0=GO,sy=ef-Pl;ef=B-(ef-ld),sy=If?Wp(ef,_A-sy):ef,Ml=d0(la,sy)}function xa(ef){return Ml=ba,wp&&xc?_e(ef):(xc=Yc=ba,ll)}function hc(){var ef=US(),d0=_o(ef);if(xc=arguments,Yc=this,ld=ef,d0){if(Ml===ba)return Pl=ef=ld,Ml=GO(la,B),Uh?_e(ef):ll;if(If)return V3(Ml),Ml=GO(la,B),_e(ld)}return Ml===ba&&(Ml=GO(la,B)),ll}var xc,Yc,ll,Ml,ld,Pl=0,Uh=!1,If=!1,wp=!0;if("function"!=typeof w)throw new n0("Expected a function");if(B=zg(B)||0,I0(H)){Uh=!!H.leading;var _A=(If="maxWait"in H)?D0(zg(H.maxWait)||0,B):_A;wp="trailing"in H?!!H.trailing:wp}return hc.cancel=function(){Ml!==ba&&V3(Ml),Pl=0,xc=ld=Yc=Ml=ba},hc.flush=function(){return Ml===ba?ll:xa(US())},hc}function _O(w,B){if("function"!=typeof w||null!=B&&"function"!=typeof B)throw new n0("Expected a function");var H=function _e(){var _o=arguments,la=B?B.apply(this,_o):_o[0],xa=_e.cache;return xa.has(la)?xa.get(la):(_o=w.apply(this,_o),_e.cache=xa.set(la,_o)||xa,_o)};return H.cache=new(_O.Cache||Dg),H}function bR(w){if("function"!=typeof w)throw new n0("Expected a function");return function(){var B=arguments;switch(B.length){case 0:return!w.call(this);case 1:return!w.call(this,B[0]);case 2:return!w.call(this,B[0],B[1]);case 3:return!w.call(this,B[0],B[1],B[2])}return!w.apply(this,B)}}function G1(w,B){return w===B||w!=w&&B!=B}function S_(w){return null!=w&&Qy(w.length)&&!H1(w)}function oy(w){return Y0(w)&&S_(w)}function CR(w){if(!Y0(w))return!1;var B=y_(w);return"[object Error]"==B||"[object DOMException]"==B||"string"==typeof w.message&&"string"==typeof w.name&&!Z2(w)}function H1(w){return!!I0(w)&&("[object Function]"==(w=y_(w))||"[object GeneratorFunction]"==w||"[object AsyncFunction]"==w||"[object Proxy]"==w)}function v6(w){return"number"==typeof w&&w==Dp(w)}function Qy(w){return"number"==typeof w&&-1<w&&w%1==0&&9007199254740991>=w}function I0(w){var B=Ia(w);return null!=w&&("object"==B||"function"==B)}function Y0(w){return null!=w&&"object"==Ia(w)}function ZL(w){return"number"==typeof w||Y0(w)&&"[object Number]"==y_(w)}function Z2(w){return!(!Y0(w)||"[object Object]"!=y_(w))&&(null===(w=e_(w))||"function"==typeof(w=r0.call(w,"constructor")&&w.constructor)&&w instanceof w&&wO.call(w)==TR)}function _P(w){return"string"==typeof w||!vp(w)&&Y0(w)&&"[object String]"==y_(w)}function T_(w){return"symbol"==Ia(w)||Y0(w)&&"[object Symbol]"==y_(w)}function L3(w){if(!w)return[];if(S_(w))return _P(w)?Th(w):l_(w);if(wR&&w[wR]){w=w[wR]();for(var B,H=[];!(B=w.next()).done;)H.push(B.value);return H}return("[object Map]"==(B=Ny(w))?Sl:"[object Set]"==B?Bl:gy)(w)}function y1(w){return w?(w=zg(w))===p1||w===-p1?17976931348623157e292*(0>w?-1:1):w==w?w:0:0===w?w:0}function Dp(w){var B=(w=y1(w))%1;return w==w?B?w-B:w:0}function J0(w){return w?gO(Dp(w),0,4294967295):0}function zg(w){if("number"==typeof w)return w;if(T_(w))return R0;if(I0(w)&&(w=I0(w="function"==typeof w.valueOf?w.valueOf():w)?w+"":w),"string"!=typeof w)return 0===w?w:+w;w=Ha(w);var B=uz.test(w);return B||dz.test(w)?o6(w.slice(2),B?2:8):NL.test(w)?R0:+w}function _D(w){return U1(w,L0(w))}function _f(w){return null==w?"":j_(w)}function SP(w,B,H){return(w=null==w?ba:OS(w,B))===ba?H:w}function y6(w,B){return null!=w&&_0(w,B,y0)}function z0(w){return S_(w)?gR(w):__(w)}function L0(w){if(S_(w))w=gR(w,!0);else if(I0(w)){var B=OT(w),H=[];for(_e in w)("constructor"!=_e||!B&&r0.call(w,_e))&&H.push(_e);w=H}else{var _e=[];if(null!=w)for(B in zc(w))_e.push(B);w=_e}return w}function O0(w,B){if(null==w)return{};var H=G(TT(w),function(_e){return[_e]});return B=Gd(B),Of(w,H,function(_e,_o){return B(_e,_o[0])})}function gy(w){return null==w?[]:ul(w,z0(w))}function oS(w){return e2(_f(w).toLowerCase())}function _h(w){return(w=_f(w))&&w.replace(n6,fO).replace(ML,"")}function P3(w,B,H){return w=_f(w),(B=H?ba:B)===ba?r6.test(w)?w.match(F2)||[]:w.match(aV)||[]:w.match(B)||[]}function IO(w){return function(){return w}}function w_(w){return w}function q1(w){return WL("function"==typeof w?w:P1(w,1))}function bO(w,B,H){var _e=z0(B),_o=Fy(B,_e);null!=H||I0(B)&&(_o.length||!_e.length)||(H=B,B=w,w=this,_o=Fy(B,z0(B)));var la=!(I0(H)&&"chain"in H&&!H.chain),xa=H1(w);return p(_o,function(hc){var xc=B[hc];w[hc]=xc,xa&&(w.prototype[hc]=function(){var Yc=this.__chain__;if(la||Yc){var ll=w(this.__wrapped__);return(ll.__actions__=l_(this.__actions__)).push({func:xc,args:arguments,thisArg:w}),ll.__chain__=Yc,ll}return xc.apply(w,z([this.value()],arguments))})}),w}function X0(){}function Nf(w){return X2(w)?Nl(Q1(w)):(B=w,function(H){return OS(H,B)});var B}function R_(){return[]}function _6(){return!1}var eN,_E=(ml=null==ml?B0:pO.defaults(B0.Object(),ml,pO.pick(B0,BL))).Array,SR=ml.Date,tN=ml.Error,x3=ml.Function,CO=ml.Math,zc=ml.Object,Mp=ml.RegExp,NT=ml.String,n0=ml.TypeError,nN=_E.prototype,sS=zc.prototype,Zy=ml["__core-js_shared__"],wO=x3.prototype.toString,r0=sS.hasOwnProperty,fz=0,TP=(eN=/[^.]+$/.exec(Zy&&Zy.keys&&Zy.keys.IE_PROTO||""))?"Symbol(src)_1."+eN:"",M3=sS.toString,TR=wO.call(zc),O_=B0._,_1=Mp("^"+wO.call(r0).replace(DL,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rN=dO?ml.Buffer:ba,Eb=ml.Symbol,Ry=ml.Uint8Array,I6=rN?rN.allocUnsafe:ba,e_=kl(zc.getPrototypeOf,zc),aS=zc.create,RP=sS.propertyIsEnumerable,kT=nN.splice,OP=Eb?Eb.isConcatSpreadable:ba,wR=Eb?Eb.iterator:ba,Oy=Eb?Eb.toStringTag:ba,cS=function(){try{var w=jy(zc,"defineProperty");return w({},"",{}),w}catch(B){}}(),B3=ml.clearTimeout!==B0.clearTimeout&&ml.clearTimeout,DO=SR&&SR.now!==B0.Date.now&&SR.now,U3=ml.setTimeout!==B0.setTimeout&&ml.setTimeout,kO=CO.ceil,xO=CO.floor,iN=zc.getOwnPropertySymbols,PS=rN?rN.isBuffer:ba,F3=ml.isFinite,IV=nN.join,t_=kl(zc.keys,zc),D0=CO.max,Wp=CO.min,bV=SR.now,CV=ml.parseInt,b6=CO.random,SV=nN.reverse,oN=jy(ml,"DataView"),sN=jy(ml,"Map"),xS=jy(ml,"Promise"),MS=jy(ml,"Set"),LT=jy(ml,"WeakMap"),RR=jy(zc,"create"),_b=LT&&new LT,BO={},uS=vO(oN),OR=vO(sN),j3=vO(xS),Q3=vO(MS),aN=vO(LT),BS=Eb?Eb.prototype:ba,FO=BS?BS.valueOf:ba,C6=BS?BS.toString:ba,cN=function(){function w(){}return function(B){return I0(B)?aS?aS(B):(w.prototype=B,B=new w,w.prototype=ba,B):{}}}();$e.templateSettings={escape:rV,evaluate:wj,interpolate:qj,variable:"",imports:{_:$e}},($e.prototype=Qh.prototype).constructor=$e,(Hd.prototype=cN(Qh.prototype)).constructor=Hd,(Ph.prototype=cN(Qh.prototype)).constructor=Ph,fy.prototype.clear=function(){this.__data__=RR?RR(null):{},this.size=0},fy.prototype.delete=function(w){return w=this.has(w)&&delete this.__data__[w],this.size-=w?1:0,w},fy.prototype.get=function(w){var B=this.__data__;return RR?"__lodash_hash_undefined__"===(w=B[w])?ba:w:r0.call(B,w)?B[w]:ba},fy.prototype.has=function(w){var B=this.__data__;return RR?B[w]!==ba:r0.call(B,w)},fy.prototype.set=function(w,B){var H=this.__data__;return this.size+=this.has(w)?0:1,H[w]=RR&&B===ba?"__lodash_hash_undefined__":B,this},sb.prototype.clear=function(){this.__data__=[],this.size=0},sb.prototype.delete=function(w){var B=this.__data__;return!(0>(w=$p(B,w))||(w==B.length-1?B.pop():kT.call(B,w,1),--this.size,0))},sb.prototype.get=function(w){var B=this.__data__;return 0>(w=$p(B,w))?ba:B[w][1]},sb.prototype.has=function(w){return-1<$p(this.__data__,w)},sb.prototype.set=function(w,B){var H=this.__data__,_e=$p(H,w);return 0>_e?(++this.size,H.push([w,B])):H[_e][1]=B,this},Dg.prototype.clear=function(){this.size=0,this.__data__={hash:new fy,map:new(sN||sb),string:new fy}},Dg.prototype.delete=function(w){return w=RT(this,w).delete(w),this.size-=w?1:0,w},Dg.prototype.get=function(w){return RT(this,w).get(w)},Dg.prototype.has=function(w){return RT(this,w).has(w)},Dg.prototype.set=function(w,B){var H=RT(this,w),_e=H.size;return H.set(w,B),this.size+=H.size==_e?0:1,this},wS.prototype.add=wS.prototype.push=function(w){return this.__data__.set(w,"__lodash_hash_undefined__"),this},wS.prototype.has=function(w){return this.__data__.has(w)},xp.prototype.clear=function(){this.__data__=new sb,this.size=0},xp.prototype.delete=function(w){var B=this.__data__;return w=B.delete(w),this.size=B.size,w},xp.prototype.get=function(w){return this.__data__.get(w)},xp.prototype.has=function(w){return this.__data__.has(w)},xp.prototype.set=function(w,B){var H=this.__data__;if(H instanceof sb){var _e=H.__data__;if(!sN||199>_e.length)return _e.push([w,B]),this.size=++H.size,this;H=this.__data__=new Dg(_e)}return H.set(w,B),this.size=H.size,this};var PT=Sy(RS),DR=Sy(c6,!0),uN=NS(),NP=NS(!0),lN=_b?function(w,B){return _b.set(w,B),w}:w_,W1=cS?function(w,B){return cS(w,"toString",{configurable:!0,enumerable:!1,value:IO(B),writable:!0})}:w_,V3=B3||function(w){return B0.clearTimeout(w)},jO=MS&&1/Bl(new MS([,-0]))[1]==p1?function(w){return new MS(w)}:X0,Dy=_b?function(w){return _b.get(w)}:X0,xT=iN?function(w){return null==w?[]:(w=zc(w),M(iN(w),function(B){return RP.call(w,B)}))}:R_,LP=iN?function(w){for(var B=[];w;)z(B,xT(w)),w=e_(w);return B}:R_,Ny=y_;(oN&&"[object DataView]"!=Ny(new oN(new ArrayBuffer(1)))||sN&&"[object Map]"!=Ny(new sN)||xS&&"[object Promise]"!=Ny(xS.resolve())||MS&&"[object Set]"!=Ny(new MS)||LT&&"[object WeakMap]"!=Ny(new LT))&&(Ny=function(w){var B=y_(w);if(w=(w="[object Object]"==B?w.constructor:ba)?vO(w):"")switch(w){case uS:return"[object DataView]";case OR:return"[object Map]";case j3:return"[object Promise]";case Q3:return"[object Set]";case aN:return"[object WeakMap]"}return B});var w,B,pz=Zy?H1:_6,dN=m6(lN),GO=U3||function(w,B){return B0.setTimeout(w,B)},G3=m6(W1),H3=(w=function(w){var B=[];return 46===w.charCodeAt(0)&&B.push(""),w.replace(g3,function(H,_e,_o,la){B.push(_o?la.replace(cV,"$1"):_e||H)}),B},B=(w=_O(w,function(H){return 500===B.size&&B.clear(),H})).cache,w),hN=Hp(function(w,B){return oy(w)?V2(w,c_(B,1,oy,!0)):[]}),PP=Hp(function(w,B){var H=V1(B);return oy(H)&&(H=ba),oy(w)?V2(w,c_(B,1,oy,!0),Gd(H,2)):[]}),MP=Hp(function(w,B){var H=V1(B);return oy(H)&&(H=ba),oy(w)?V2(w,c_(B,1,oy,!0),ba,H):[]}),MT=Hp(function(w){var B=G(w,YL);return B.length&&B[0]===w[0]?GL(B):[]}),lS=Hp(function(w){var B=V1(w),H=G(w,YL);return B===V1(H)?B=ba:H.pop(),H.length&&H[0]===w[0]?GL(H,Gd(B,2)):[]}),S6=Hp(function(w){var B=V1(w),H=G(w,YL);return(B="function"==typeof B?B:ba)&&H.pop(),H.length&&H[0]===w[0]?GL(H,ba,B):[]}),T6=Hp(D3),$0=gf(function(w,B){var H=null==w?0:w.length,_e=C3(w,B);return d6(w,G(B,function(_o){return wy(_o,H)?+_o:_o}).sort(JL)),_e}),w6=Hp(function(w){return vR(c_(w,1,oy,!0))}),q3=Hp(function(w){var B=V1(w);return oy(B)&&(B=ba),vR(c_(w,1,oy,!0),Gd(B,2))}),R6=Hp(function(w){var B=V1(w);return B="function"==typeof B?B:ba,vR(c_(w,1,oy,!0),ba,B)}),TV=Hp(function(w,B){return oy(w)?V2(w,B):[]}),UP=Hp(function(w){return Y2(M(w,oy))}),fN=Hp(function(w){var B=V1(w);return oy(B)&&(B=ba),Y2(M(w,oy),Gd(B,2))}),wV=Hp(function(w){var B=V1(w);return B="function"==typeof B?B:ba,Y2(M(w,oy),ba,B)}),O6=Hp(E6),D6=Hp(function(w){var B=w.length;return B="function"==typeof(B=1<B?w[B-1]:ba)?(w.pop(),B):ba,vV(w,B)}),HO=gf(function(w){var B=w.length,H=B?w[0]:0,_e=this.__wrapped__,_o=function(la){return C3(la,w)};return!(1<B||this.__actions__.length)&&_e instanceof Ph&&wy(H)?((_e=_e.slice(H,+H+(B?1:0))).__actions__.push({func:yO,args:[_o],thisArg:ba}),new Hd(_e,this.__chain__).thru(function(la){return B&&!la.length&&la.push(ba),la})):this.thru(_o)}),QP=py(function(w,B,H){r0.call(w,H)?++w[H]:U0(w,H,1)}),VP=XL($2),NR=XL(AV),qO=py(function(w,B,H){r0.call(w,H)?w[H].push(B):U0(w,H,[B])}),BT=Hp(function(w,B,H){var _e=-1,_o="function"==typeof B,la=S_(w)?_E(w.length):[];return PT(w,function(xa){la[++_e]=_o?o(B,xa,H):HL(xa,B,H)}),la}),JO=py(function(w,B,H){U0(w,H,B)}),W3=py(function(w,B,H){w[H?0:1].push(B)},function(){return[[],[]]}),K3=Hp(function(w,B){if(null==w)return[];var H=B.length;return 1<H&&F0(w,B[0],B[1])?B=[]:2<H&&F0(B[0],B[1],B[2])&&(B=[B[0]]),W2(w,c_(B,1),[])}),US=DO||function(){return B0.Date.now()},N6=Hp(function(w,B,H){var _e=1;if(H.length){var _o=Fd(H,j1(N6));_e|=32}return t0(w,_e,B,H,_o)}),k6=Hp(function(w,B,H){var _e=3;if(H.length){var _o=Fd(H,j1(k6));_e|=32}return t0(B,_e,w,H,_o)}),Zp=Hp(function(w,B){return U_(w,1,B)}),RV=Hp(function(w,B,H){return U_(w,zg(B)||0,H)});_O.Cache=Dg;var gz=Hp(function(w,B){var H=(B=1==B.length&&vp(B[0])?G(B[0],_u(Gd())):G(c_(B,1),_u(Gd()))).length;return Hp(function(_e){for(var _o=-1,la=Wp(_e.length,H);++_o<la;)_e[_o]=B[_o].call(this,_e[_o]);return o(w,this,_e)})}),L6=Hp(function(w,B){var H=Fd(B,j1(L6));return t0(w,32,ba,B,H)}),P6=Hp(function(w,B){var H=Fd(B,j1(P6));return t0(w,64,ba,B,H)}),Az=gf(function(w,B){return t0(w,256,ba,ba,ba,B)}),mz=Tp(G2),Ez=Tp(function(w,B){return w>=B}),D_=hV(function(){return arguments}())?hV:function(w){return Y0(w)&&r0.call(w,"callee")&&!RP.call(w,"callee")},vp=_E.isArray,ky=UL?_u(UL):function(w){return Y0(w)&&"[object ArrayBuffer]"==y_(w)},dS=PS||_6,pN=s6?_u(s6):function(w){return Y0(w)&&"[object Date]"==y_(w)},x6=FL?_u(FL):function(w){return Y0(w)&&"[object Map]"==Ny(w)},Y3=v3?_u(v3):function(w){return Y0(w)&&"[object RegExp]"==y_(w)},Db=hO?_u(hO):function(w){return Y0(w)&&"[object Set]"==Ny(w)},N_=y3?_u(y3):function(w){return Y0(w)&&Qy(w.length)&&!!k0[y_(w)]},FS=Tp(db),Q_=Tp(function(w,B){return w<=B}),zO=Cy(function(w,B){if(OT(B)||S_(B))U1(B,z0(B),w);else for(var H in B)r0.call(B,H)&&QL(w,H,B[H])}),WP=Cy(function(w,B){U1(B,L0(B),w)}),YP=Cy(function(w,B,H,_e){U1(B,L0(B),w,_e)}),OV=Cy(function(w,B,H,_e){U1(B,z0(B),w,_e)}),vz=gf(C3),I1=Hp(function(w,B){w=zc(w);var H=-1,_e=B.length,_o=2<_e?B[2]:ba;for(_o&&F0(B[0],B[1],_o)&&(_e=1);++H<_e;)for(var la=L0(_o=B[H]),xa=-1,hc=la.length;++xa<hc;){var xc=la[xa],Yc=w[xc];(Yc===ba||G1(Yc,sS[xc])&&!r0.call(w,xc))&&(w[xc]=_o[xc])}return w}),M6=Hp(function(w){return w.push(ba,l0),o(z3,ba,w)}),Pb=bT(function(w,B,H){null!=B&&"function"!=typeof B.toString&&(B=M3.call(B)),w[B]=H},IO(w_)),J3=bT(function(w,B,H){null!=B&&"function"!=typeof B.toString&&(B=M3.call(B)),r0.call(w,B)?w[B].push(H):w[B]=[H]},Gd),jS=Hp(HL),DV=Cy(function(w,B,H){DS(w,B,H)}),z3=Cy(function(w,B,H,_e){DS(w,B,H,_e)}),X3=gf(function(w,B){var H={};if(null==w)return H;var _e=!1;B=G(B,function(la){return la=m1(la,w),_e||(_e=1<la.length),la}),U1(w,TT(w),H),_e&&(H=P1(H,7,z2));for(var _o=B.length;_o--;)yT(H,B[_o]);return H}),NV=gf(function(w,B){return null==w?{}:Of(H=w,B,function(_o,la){return y6(H,la)});var H}),B6=CT(z0),U6=CT(L0),kV=$y(function(w,B,H){return B=B.toLowerCase(),w+(H?oS(B):B)}),F6=$y(function(w,B,H){return w+(H?"-":"")+B.toLowerCase()}),$3=$y(function(w,B,H){return w+(H?" ":"")+B.toLowerCase()}),hS=_T("toLowerCase"),Z3=$y(function(w,B,H){return w+(H?"_":"")+B.toLowerCase()}),gN=$y(function(w,B,H){return w+(H?" ":"")+e2(B)}),_B=$y(function(w,B,H){return w+(H?" ":"")+B.toUpperCase()}),e2=_T("toUpperCase"),j6=Hp(function(w,B){try{return o(w,ba,B)}catch(H){return CR(H)?H:new tN(H)}}),LV=gf(function(w,B){return p(B,function(H){H=Q1(H),U0(w,H,N6(w[H],w))}),w}),t2=mO(),Q6=mO(!0),n2=Hp(function(w,B){return function(H){return HL(H,w,B)}}),r2=Hp(function(w,B){return function(H){return HL(w,H,B)}}),V6=iS(G),Ly=iS(R),Mh=iS(_n),G6=Hl(),eU=Hl(!0),tU=Ty(function(w,B){return w+B},0),AN=b_("ceil"),PV=Ty(function(w,B){return w/B},1),QS=b_("floor"),xV=Ty(function(w,B){return w*B},1),XP=b_("round"),UT=Ty(function(w,B){return w-B},0);return $e.after=function(w,B){if("function"!=typeof B)throw new n0("Expected a function");return w=Dp(w),function(){if(1>--w)return B.apply(this,arguments)}},$e.ary=DT,$e.assign=zO,$e.assignIn=WP,$e.assignInWith=YP,$e.assignWith=OV,$e.at=vz,$e.before=k3,$e.bind=N6,$e.bindAll=LV,$e.bindKey=k6,$e.castArray=function(){if(!arguments.length)return[];var w=arguments[0];return vp(w)?w:[w]},$e.chain=N3,$e.chunk=function(w,B,H){if(B=(H?F0(w,B,H):B===ba)?1:D0(Dp(B),0),!(H=null==w?0:w.length)||1>B)return[];for(var _e=0,_o=0,la=_E(kO(H/B));_e<H;)la[_o++]=iy(w,_e,_e+=B);return la},$e.compact=function(w){for(var B=-1,H=null==w?0:w.length,_e=0,_o=[];++B<H;){var la=w[B];la&&(_o[_e++]=la)}return _o},$e.concat=function(){var w=arguments.length;if(!w)return[];for(var B=_E(w-1),H=arguments[0];w--;)B[w-1]=arguments[w];return z(vp(H)?l_(H):[H],c_(B,1))},$e.cond=function(w){var B=null==w?0:w.length,H=Gd();return w=B?G(w,function(_e){if("function"!=typeof _e[1])throw new n0("Expected a function");return[H(_e[0]),_e[1]]}):[],Hp(function(_e){for(var _o=-1;++_o<B;){var la=w[_o];if(o(la[0],this,_e))return o(la[1],this,_e)}})},$e.conforms=function(w){return function(B){var H=z0(B);return function(_e){return Q2(_e,B,H)}}(P1(w,1))},$e.constant=IO,$e.countBy=QP,$e.create=function(w,B){return w=cN(w),null==B?w:up(w,B)},$e.curry=function w(B,H,_e){return(B=t0(B,8,ba,ba,ba,ba,ba,H=_e?ba:H)).placeholder=w.placeholder,B},$e.curryRight=function w(B,H,_e){return(B=t0(B,16,ba,ba,ba,ba,ba,H=_e?ba:H)).placeholder=w.placeholder,B},$e.debounce=LS,$e.defaults=I1,$e.defaultsDeep=M6,$e.defer=Zp,$e.delay=RV,$e.difference=hN,$e.differenceBy=PP,$e.differenceWith=MP,$e.drop=function(w,B,H){var _e=null==w?0:w.length;return _e?iy(w,0>(B=H||B===ba?1:Dp(B))?0:B,_e):[]},$e.dropRight=function(w,B,H){var _e=null==w?0:w.length;return _e?iy(w,0,0>(B=_e-(B=H||B===ba?1:Dp(B)))?0:B):[]},$e.dropRightWhile=function(w,B){return w&&w.length?e0(w,Gd(B,3),!0,!0):[]},$e.dropWhile=function(w,B){return w&&w.length?e0(w,Gd(B,3),!0):[]},$e.fill=function(w,B,H,_e){var _o=null==w?0:w.length;if(!_o)return[];for(H&&"number"!=typeof H&&F0(w,B,H)&&(H=0,_e=_o),_o=w.length,0>(H=Dp(H))&&(H=-H>_o?0:_o+H),0>(_e=_e===ba||_e>_o?_o:Dp(_e))&&(_e+=_o),_e=H>_e?0:J0(_e);H<_e;)w[H++]=B;return w},$e.filter=function(w,B){return(vp(w)?M:x1)(w,Gd(B,3))},$e.flatMap=function(w,B){return c_(C_(w,B),1)},$e.flatMapDeep=function(w,B){return c_(C_(w,B),p1)},$e.flatMapDepth=function(w,B,H){return H=H===ba?1:Dp(H),c_(C_(w,B),H)},$e.flatten=mV,$e.flattenDeep=function(w){return null!=w&&w.length?c_(w,p1):[]},$e.flattenDepth=function(w,B){return null!=w&&w.length?c_(w,B=B===ba?1:Dp(B)):[]},$e.flip=function(w){return t0(w,512)},$e.flow=t2,$e.flowRight=Q6,$e.fromPairs=function(w){for(var B=-1,H=null==w?0:w.length,_e={};++B<H;){var _o=w[B];_e[_o[0]]=_o[1]}return _e},$e.functions=function(w){return null==w?[]:Fy(w,z0(w))},$e.functionsIn=function(w){return null==w?[]:Fy(w,L0(w))},$e.groupBy=qO,$e.initial=function(w){return null!=w&&w.length?iy(w,0,-1):[]},$e.intersection=MT,$e.intersectionBy=lS,$e.intersectionWith=S6,$e.invert=Pb,$e.invertBy=J3,$e.invokeMap=BT,$e.iteratee=q1,$e.keyBy=JO,$e.keys=z0,$e.keysIn=L0,$e.map=C_,$e.mapKeys=function(w,B){var H={};return B=Gd(B,3),RS(w,function(_e,_o,la){U0(H,B(_e,_o,la),_e)}),H},$e.mapValues=function(w,B){var H={};return B=Gd(B,3),RS(w,function(_e,_o,la){U0(H,_o,B(_e,_o,la))}),H},$e.matches=function(w){return H2(P1(w,1))},$e.matchesProperty=function(w,B){return q2(w,P1(B,1))},$e.memoize=_O,$e.merge=DV,$e.mergeWith=z3,$e.method=n2,$e.methodOf=r2,$e.mixin=bO,$e.negate=bR,$e.nthArg=function(w){return w=Dp(w),Hp(function(B){return mR(B,w)})},$e.omit=X3,$e.omitBy=function(w,B){return O0(w,bR(Gd(B)))},$e.once=function(w){return k3(2,w)},$e.orderBy=function(w,B,H,_e){return null==w?[]:(vp(B)||(B=null==B?[]:[B]),vp(H=_e?ba:H)||(H=null==H?[]:[H]),W2(w,B,H))},$e.over=V6,$e.overArgs=gz,$e.overEvery=Ly,$e.overSome=Mh,$e.partial=L6,$e.partialRight=P6,$e.partition=W3,$e.pick=NV,$e.pickBy=O0,$e.property=Nf,$e.propertyOf=function(w){return function(B){return null==w?ba:OS(w,B)}},$e.pull=T6,$e.pullAll=D3,$e.pullAllBy=function(w,B,H){return w&&w.length&&B&&B.length?K2(w,B,Gd(H,2)):w},$e.pullAllWith=function(w,B,H){return w&&w.length&&B&&B.length?K2(w,B,ba,H):w},$e.pullAt=$0,$e.range=G6,$e.rangeRight=eU,$e.rearg=Az,$e.reject=function(w,B){return(vp(w)?M:x1)(w,bR(Gd(B,3)))},$e.remove=function(w,B){var H=[];if(!w||!w.length)return H;var _e=-1,_o=[],la=w.length;for(B=Gd(B,3);++_e<la;){var xa=w[_e];B(xa,_e,w)&&(H.push(xa),_o.push(_e))}return d6(w,_o),H},$e.rest=function(w,B){if("function"!=typeof w)throw new n0("Expected a function");return Hp(w,B=B===ba?B:Dp(B))},$e.reverse=$L,$e.sampleSize=function(w,B,H){return B=(H?F0(w,B,H):B===ba)?1:Dp(B),(vp(w)?j2:g1)(w,B)},$e.set=function(w,B,H){return null==w?w:ER(w,B,H)},$e.setWith=function(w,B,H,_e){return _e="function"==typeof _e?_e:ba,null==w?w:ER(w,B,H,_e)},$e.shuffle=function(w){return(vp(w)?Sp:h6)(w)},$e.slice=function(w,B,H){var _e=null==w?0:w.length;return _e?(H&&"number"!=typeof H&&F0(w,B,H)?(B=0,H=_e):(B=null==B?0:Dp(B),H=H===ba?_e:Dp(H)),iy(w,B,H)):[]},$e.sortBy=K3,$e.sortedUniq=function(w){return w&&w.length?fV(w):[]},$e.sortedUniqBy=function(w,B){return w&&w.length?fV(w,Gd(B,2)):[]},$e.split=function(w,B,H){return H&&"number"!=typeof H&&F0(w,B,H)&&(B=H=ba),(H=H===ba?4294967295:H>>>0)?(w=_f(w))&&("string"==typeof B||null!=B&&!Y3(B))&&!(B=j_(B))&&mT.test(w)?pb(Th(w),0,H):w.split(B,H):[]},$e.spread=function(w,B){if("function"!=typeof w)throw new n0("Expected a function");return B=null==B?0:D0(Dp(B),0),Hp(function(H){var _e=H[B];return H=pb(H,0,B),_e&&z(H,_e),o(w,this,H)})},$e.tail=function(w){var B=null==w?0:w.length;return B?iy(w,1,B):[]},$e.take=function(w,B,H){return w&&w.length?iy(w,0,0>(B=H||B===ba?1:Dp(B))?0:B):[]},$e.takeRight=function(w,B,H){var _e=null==w?0:w.length;return _e?iy(w,0>(B=_e-(B=H||B===ba?1:Dp(B)))?0:B,_e):[]},$e.takeRightWhile=function(w,B){return w&&w.length?e0(w,Gd(B,3),!1,!0):[]},$e.takeWhile=function(w,B){return w&&w.length?e0(w,Gd(B,3)):[]},$e.tap=function(w,B){return B(w),w},$e.throttle=function(w,B,H){var _e=!0,_o=!0;if("function"!=typeof w)throw new n0("Expected a function");return I0(H)&&(_e="leading"in H?!!H.leading:_e,_o="trailing"in H?!!H.trailing:_o),LS(w,B,{leading:_e,maxWait:B,trailing:_o})},$e.thru=yO,$e.toArray=L3,$e.toPairs=B6,$e.toPairsIn=U6,$e.toPath=function(w){return vp(w)?G(w,Q1):T_(w)?[w]:l_(H3(_f(w)))},$e.toPlainObject=_D,$e.transform=function(w,B,H){var _e=vp(w),_o=_e||dS(w)||N_(w);if(B=Gd(B,4),null==H){var la=w&&w.constructor;H=_o?_e?new la:[]:I0(w)&&H1(la)?cN(e_(w)):{}}return(_o?p:RS)(w,function(xa,hc,xc){return B(H,xa,hc,xc)}),H},$e.unary=function(w){return DT(w,1)},$e.union=w6,$e.unionBy=q3,$e.unionWith=R6,$e.uniq=function(w){return w&&w.length?vR(w):[]},$e.uniqBy=function(w,B){return w&&w.length?vR(w,Gd(B,2)):[]},$e.uniqWith=function(w,B){return B="function"==typeof B?B:ba,w&&w.length?vR(w,ba,B):[]},$e.unset=function(w,B){return null==w||yT(w,B)},$e.unzip=E6,$e.unzipWith=vV,$e.update=function(w,B,H){return null!=w&&(w=ER(w,B,(H=A1(H))(OS(w,B)),void 0)),w},$e.updateWith=function(w,B,H,_e){return _e="function"==typeof _e?_e:ba,null!=w&&(w=ER(w,B,(H=A1(H))(OS(w,B)),_e)),w},$e.values=gy,$e.valuesIn=function(w){return null==w?[]:ul(w,L0(w))},$e.without=TV,$e.words=P3,$e.wrap=function(w,B){return L6(A1(B),w)},$e.xor=UP,$e.xorBy=fN,$e.xorWith=wV,$e.zip=O6,$e.zipObject=function(w,B){return rS(w||[],B||[],QL)},$e.zipObjectDeep=function(w,B){return rS(w||[],B||[],ER)},$e.zipWith=D6,$e.entries=B6,$e.entriesIn=U6,$e.extend=WP,$e.extendWith=YP,bO($e,$e),$e.add=tU,$e.attempt=j6,$e.camelCase=kV,$e.capitalize=oS,$e.ceil=AN,$e.clamp=function(w,B,H){return H===ba&&(H=B,B=ba),H!==ba&&(H=(H=zg(H))==H?H:0),B!==ba&&(B=(B=zg(B))==B?B:0),gO(zg(w),B,H)},$e.clone=function(w){return P1(w,4)},$e.cloneDeep=function(w){return P1(w,5)},$e.cloneDeepWith=function(w,B){return P1(w,5,B="function"==typeof B?B:ba)},$e.cloneWith=function(w,B){return P1(w,4,B="function"==typeof B?B:ba)},$e.conformsTo=function(w,B){return null==B||Q2(w,B,z0(B))},$e.deburr=_h,$e.defaultTo=function(w,B){return null==w||w!=w?B:w},$e.divide=PV,$e.endsWith=function(w,B,H){w=_f(w),B=j_(B);var _e=w.length;return _e=H=H===ba?_e:gO(Dp(H),0,_e),0<=(H-=B.length)&&w.slice(H,_e)==B},$e.eq=G1,$e.escape=function(w){return(w=_f(w))&&lO.test(w)?w.replace(eb,pR):w},$e.escapeRegExp=function(w){return(w=_f(w))&&A3.test(w)?w.replace(DL,"\\$&"):w},$e.every=function(w,B,H){var _e=vp(w)?R:Xy;return H&&F0(w,B,H)&&(B=ba),_e(w,Gd(B,3))},$e.find=VP,$e.findIndex=$2,$e.findKey=function(w,B){return fa(w,Gd(B,3),RS)},$e.findLast=NR,$e.findLastIndex=AV,$e.findLastKey=function(w,B){return fa(w,Gd(B,3),c6)},$e.floor=QS,$e.forEach=yV,$e.forEachRight=_V,$e.forIn=function(w,B){return null==w?w:uN(w,Gd(B,3),L0)},$e.forInRight=function(w,B){return null==w?w:NP(w,Gd(B,3),L0)},$e.forOwn=function(w,B){return w&&RS(w,Gd(B,3))},$e.forOwnRight=function(w,B){return w&&c6(w,Gd(B,3))},$e.get=SP,$e.gt=mz,$e.gte=Ez,$e.has=function(w,B){return null!=w&&_0(w,B,F_)},$e.hasIn=y6,$e.head=EV,$e.identity=w_,$e.includes=function(w,B,H,_e){return w=S_(w)?w:gy(w),H=H&&!_e?Dp(H):0,_e=w.length,0>H&&(H=D0(_e+H,0)),_P(w)?H<=_e&&-1<w.indexOf(B,H):!!_e&&-1<Ta(w,B,H)},$e.indexOf=function(w,B,H){var _e=null==w?0:w.length;return _e?(0>(H=null==H?0:Dp(H))&&(H=D0(_e+H,0)),Ta(w,B,H)):-1},$e.inRange=function(w,B,H){return B=y1(B),H===ba?(H=B,B=0):H=y1(H),(w=zg(w))>=Wp(B,H)&&w<D0(B,H)},$e.invoke=jS,$e.isArguments=D_,$e.isArray=vp,$e.isArrayBuffer=ky,$e.isArrayLike=S_,$e.isArrayLikeObject=oy,$e.isBoolean=function(w){return!0===w||!1===w||Y0(w)&&"[object Boolean]"==y_(w)},$e.isBuffer=dS,$e.isDate=pN,$e.isElement=function(w){return Y0(w)&&1===w.nodeType&&!Z2(w)},$e.isEmpty=function(w){if(null==w)return!0;if(S_(w)&&(vp(w)||"string"==typeof w||"function"==typeof w.splice||dS(w)||N_(w)||D_(w)))return!w.length;var B=Ny(w);if("[object Map]"==B||"[object Set]"==B)return!w.size;if(OT(w))return!__(w).length;for(var H in w)if(r0.call(w,H))return!1;return!0},$e.isEqual=function(w,B){return Hf(w,B)},$e.isEqualWith=function(w,B,H){var _e=(H="function"==typeof H?H:ba)?H(w,B):ba;return _e===ba?Hf(w,B,ba,H):!!_e},$e.isError=CR,$e.isFinite=function(w){return"number"==typeof w&&F3(w)},$e.isFunction=H1,$e.isInteger=v6,$e.isLength=Qy,$e.isMap=x6,$e.isMatch=function(w,B){return w===B||u6(w,B,kS(B))},$e.isMatchWith=function(w,B,H){return H="function"==typeof H?H:ba,u6(w,B,kS(B),H)},$e.isNaN=function(w){return ZL(w)&&w!=+w},$e.isNative=function(w){if(pz(w))throw new tN("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return M1(w)},$e.isNil=function(w){return null==w},$e.isNull=function(w){return null===w},$e.isNumber=ZL,$e.isObject=I0,$e.isObjectLike=Y0,$e.isPlainObject=Z2,$e.isRegExp=Y3,$e.isSafeInteger=function(w){return v6(w)&&-9007199254740991<=w&&9007199254740991>=w},$e.isSet=Db,$e.isString=_P,$e.isSymbol=T_,$e.isTypedArray=N_,$e.isUndefined=function(w){return w===ba},$e.isWeakMap=function(w){return Y0(w)&&"[object WeakMap]"==Ny(w)},$e.isWeakSet=function(w){return Y0(w)&&"[object WeakSet]"==y_(w)},$e.join=function(w,B){return null==w?"":IV.call(w,B)},$e.kebabCase=F6,$e.last=V1,$e.lastIndexOf=function(w,B,H){var _e=null==w?0:w.length;if(!_e)return-1;var _o=_e;if(H!==ba&&(_o=0>(_o=Dp(H))?D0(_e+_o,0):Wp(_o,_e-1)),B==B)e:{for(H=_o+1;H--;)if(w[H]===B){w=H;break e}w=H}else w=da(w,Ja,_o,!0);return w},$e.lowerCase=$3,$e.lowerFirst=hS,$e.lt=FS,$e.lte=Q_,$e.max=function(w){return w&&w.length?VL(w,w_,G2):ba},$e.maxBy=function(w,B){return w&&w.length?VL(w,Gd(B,2),G2):ba},$e.mean=function(w){return rl(w,w_)},$e.meanBy=function(w,B){return rl(w,Gd(B,2))},$e.min=function(w){return w&&w.length?VL(w,w_,db):ba},$e.minBy=function(w,B){return w&&w.length?VL(w,Gd(B,2),db):ba},$e.stubArray=R_,$e.stubFalse=_6,$e.stubObject=function(){return{}},$e.stubString=function(){return""},$e.stubTrue=function(){return!0},$e.multiply=xV,$e.nth=function(w,B){return w&&w.length?mR(w,Dp(B)):ba},$e.noConflict=function(){return B0._===this&&(B0._=O_),this},$e.noop=X0,$e.now=US,$e.pad=function(w,B,H){w=_f(w);var _e=(B=Dp(B))?Jp(w):0;return!B||_e>=B?w:I_(xO(B=(B-_e)/2),H)+w+I_(kO(B),H)},$e.padEnd=function(w,B,H){w=_f(w);var _e=(B=Dp(B))?Jp(w):0;return B&&_e<B?w+I_(B-_e,H):w},$e.padStart=function(w,B,H){w=_f(w);var _e=(B=Dp(B))?Jp(w):0;return B&&_e<B?I_(B-_e,H)+w:w},$e.parseInt=function(w,B,H){return H||null==B?B=0:B&&(B=+B),CV(_f(w).replace(m3,""),B||0)},$e.random=function(w,B,H){if(H&&"boolean"!=typeof H&&F0(w,B,H)&&(B=H=ba),H===ba&&("boolean"==typeof B?(H=B,B=ba):"boolean"==typeof w&&(H=w,w=ba)),w===ba&&B===ba?(w=0,B=1):(w=y1(w),B===ba?(B=w,w=0):B=y1(B)),w>B){var _e=w;w=B,B=_e}return H||w%1||B%1?(H=b6(),Wp(w+H*(B-w+uV("1e-"+((H+"").length-1))),B)):B1(w,B)},$e.reduce=function(w,B,H){var _e=vp(w)?we:xl,_o=3>arguments.length;return _e(w,Gd(B,4),H,_o,PT)},$e.reduceRight=function(w,B,H){var _e=vp(w)?xe:xl,_o=3>arguments.length;return _e(w,Gd(B,4),H,_o,DR)},$e.repeat=function(w,B,H){return B=(H?F0(w,B,H):B===ba)?1:Dp(B),KL(_f(w),B)},$e.replace=function(){var w=arguments,B=_f(w[0]);return 3>w.length?B:B.replace(w[1],w[2])},$e.result=function(w,B,H){var _e=-1,_o=(B=m1(B,w)).length;for(_o||(_o=1,w=ba);++_e<_o;){var la=null==w?ba:w[Q1(B[_e])];la===ba&&(_e=_o,la=H),w=H1(la)?la.call(w):la}return w},$e.round=XP,$e.runInContext=yc,$e.sample=function(w){return(vp(w)?I3:vT)(w)},$e.size=function(w){if(null==w)return 0;if(S_(w))return _P(w)?Jp(w):w.length;var B=Ny(w);return"[object Map]"==B||"[object Set]"==B?w.size:__(w).length},$e.snakeCase=Z3,$e.some=function(w,B,H){var _e=vp(w)?_n:f6;return H&&F0(w,B,H)&&(B=ba),_e(w,Gd(B,3))},$e.sortedIndex=function(w,B){return AO(w,B)},$e.sortedIndexBy=function(w,B,H){return S3(w,B,Gd(H,2))},$e.sortedIndexOf=function(w,B){var H=null==w?0:w.length;if(H){var _e=AO(w,B);if(_e<H&&G1(w[_e],B))return _e}return-1},$e.sortedLastIndex=function(w,B){return AO(w,B,!0)},$e.sortedLastIndexBy=function(w,B,H){return S3(w,B,Gd(H,2),!0)},$e.sortedLastIndexOf=function(w,B){if(null!=w&&w.length){var H=AO(w,B,!0)-1;if(G1(w[H],B))return H}return-1},$e.startCase=gN,$e.startsWith=function(w,B,H){return w=_f(w),H=null==H?0:gO(Dp(H),0,w.length),B=j_(B),w.slice(H,H+B.length)==B},$e.subtract=UT,$e.sum=function(w){return w&&w.length?kd(w,w_):0},$e.sumBy=function(w,B){return w&&w.length?kd(w,Gd(B,2)):0},$e.template=function(w,B,H){var _e=$e.templateSettings;H&&F0(w,B,H)&&(B=ba),w=_f(w),B=YP({},B,_e,ST);var _o,la,xa=z0(H=YP({},B.imports,_e.imports,ST)),hc=ul(H,xa),xc=0,Yc="__p += '";H=Mp((B.escape||AT).source+"|"+(H=B.interpolate||AT).source+"|"+(H===qj?e6:AT).source+"|"+(B.evaluate||AT).source+"|$","g");var ll="//# sourceURL="+(r0.call(B,"sourceURL")?(B.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++nS+"]")+"\n";if(w.replace(H,function(Ml,ld,Pl,Uh,If,wp){return Pl||(Pl=Uh),Yc+=w.slice(xc,wp).replace(LL,tl),ld&&(_o=!0,Yc+="' +\n__e("+ld+") +\n'"),If&&(la=!0,Yc+="';\n"+If+";\n__p += '"),Pl&&(Yc+="' +\n((__t = ("+Pl+")) == null ? '' : __t) +\n'"),xc=wp+Ml.length,Ml}),Yc+="';\n",B=r0.call(B,"variable")&&B.variable){if(cz.test(B))throw new tN("Invalid `variable` option passed into `_.template`")}else Yc="with (obj) {\n"+Yc+"\n}\n";if(Yc=(la?Yc.replace(u0,""):Yc).replace(p3,"$1").replace(v0,"$1;"),Yc="function("+(B||"obj")+") {\n"+(B?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(_o?", __e = _.escape":"")+(la?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Yc+"return __p\n}",(B=j6(function(){return x3(xa,ll+"return "+Yc).apply(ba,hc)})).source=Yc,CR(B))throw B;return B},$e.times=function(w,B){if(1>(w=Dp(w))||9007199254740991<w)return[];var H=4294967295,_e=Wp(w,4294967295);for(w-=4294967295,_e=E0(_e,B=Gd(B));++H<w;)B(H);return _e},$e.toFinite=y1,$e.toInteger=Dp,$e.toLength=J0,$e.toLower=function(w){return _f(w).toLowerCase()},$e.toNumber=zg,$e.toSafeInteger=function(w){return w?gO(Dp(w),-9007199254740991,9007199254740991):0===w?w:0},$e.toString=_f,$e.toUpper=function(w){return _f(w).toUpperCase()},$e.trim=function(w,B,H){return(w=_f(w))&&(H||B===ba)?Ha(w):w&&(B=j_(B))?pb(w=Th(w),B=ic(w,H=Th(B)),H=wc(w,H)+1).join(""):w},$e.trimEnd=function(w,B,H){return(w=_f(w))&&(H||B===ba)?w.slice(0,H0(w)+1):w&&(B=j_(B))?pb(w=Th(w),0,B=wc(w,Th(B))+1).join(""):w},$e.trimStart=function(w,B,H){return(w=_f(w))&&(H||B===ba)?w.replace(m3,""):w&&(B=j_(B))?pb(w=Th(w),B=ic(w,Th(B))).join(""):w},$e.truncate=function(w,B){var H=30,_e="...";if(I0(B)){var _o="separator"in B?B.separator:_o;H="length"in B?Dp(B.length):H,_e="omission"in B?j_(B.omission):_e}if(B=(w=_f(w)).length,mT.test(w)){var la=Th(w);B=la.length}if(H>=B)return w;if(1>(B=H-Jp(_e)))return _e;if(H=la?pb(la,0,B).join(""):w.slice(0,B),_o===ba)return H+_e;if(la&&(B+=H.length-B),Y3(_o)){if(w.slice(B).search(_o)){for(la=H,_o.global||(_o=Mp(_o.source,_f(t6.exec(_o))+"g")),_o.lastIndex=0;w=_o.exec(la);)var xa=w.index;H=H.slice(0,xa===ba?B:xa)}}else w.indexOf(j_(_o),B)!=B&&-1<(_o=H.lastIndexOf(_o))&&(H=H.slice(0,_o));return H+_e},$e.unescape=function(w){return(w=_f(w))&&TS.test(w)?w.replace(OL,a6):w},$e.uniqueId=function(w){var B=++fz;return _f(w)+B},$e.upperCase=_B,$e.upperFirst=e2,$e.each=yV,$e.eachRight=_V,$e.first=EV,bO($e,function(){var w={};return RS($e,function(B,H){r0.call($e.prototype,H)||(w[H]=B)}),w}(),{chain:!1}),$e.VERSION="4.17.21",p("bind bindKey curry curryRight partial partialRight".split(" "),function(w){$e[w].placeholder=$e}),p(["drop","take"],function(w,B){Ph.prototype[w]=function(H){H=H===ba?1:D0(Dp(H),0);var _e=this.__filtered__&&!B?new Ph(this):this.clone();return _e.__filtered__?_e.__takeCount__=Wp(H,_e.__takeCount__):_e.__views__.push({size:Wp(H,4294967295),type:w+(0>_e.__dir__?"Right":"")}),_e},Ph.prototype[w+"Right"]=function(H){return this.reverse()[w](H).reverse()}}),p(["filter","map","takeWhile"],function(w,B){var H=B+1,_e=1==H||3==H;Ph.prototype[w]=function(_o){var la=this.clone();return la.__iteratees__.push({iteratee:Gd(_o,3),type:H}),la.__filtered__=la.__filtered__||_e,la}}),p(["head","last"],function(w,B){var H="take"+(B?"Right":"");Ph.prototype[w]=function(){return this[H](1).value()[0]}}),p(["initial","tail"],function(w,B){var H="drop"+(B?"":"Right");Ph.prototype[w]=function(){return this.__filtered__?new Ph(this):this[H](1)}}),Ph.prototype.compact=function(){return this.filter(w_)},Ph.prototype.find=function(w){return this.filter(w).head()},Ph.prototype.findLast=function(w){return this.reverse().find(w)},Ph.prototype.invokeMap=Hp(function(w,B){return"function"==typeof w?new Ph(this):this.map(function(H){return HL(H,w,B)})}),Ph.prototype.reject=function(w){return this.filter(bR(Gd(w)))},Ph.prototype.slice=function(w,B){w=Dp(w);var H=this;return H.__filtered__&&(0<w||0>B)?new Ph(H):(0>w?H=H.takeRight(-w):w&&(H=H.drop(w)),B!==ba&&(H=0>(B=Dp(B))?H.dropRight(-B):H.take(B-w)),H)},Ph.prototype.takeRightWhile=function(w){return this.reverse().takeWhile(w).reverse()},Ph.prototype.toArray=function(){return this.take(4294967295)},RS(Ph.prototype,function(w,B){var H=/^(?:filter|find|map|reject)|While$/.test(B),_e=/^(?:head|last)$/.test(B),_o=$e[_e?"take"+("last"==B?"Right":""):B],la=_e||/^find/.test(B);_o&&($e.prototype[B]=function(){var xa=this.__wrapped__,hc=_e?[1]:arguments,xc=xa instanceof Ph,Yc=hc[0],ll=xc||vp(xa),Ml=function(Uh){return Uh=_o.apply($e,z([Uh],hc)),_e&&ld?Uh[0]:Uh};ll&&H&&"function"==typeof Yc&&1!=Yc.length&&(xc=ll=!1);var ld=this.__chain__,Pl=!!this.__actions__.length;return Yc=la&&!ld,xc=xc&&!Pl,!la&&ll?(xa=xc?xa:new Ph(this),(xa=w.apply(xa,hc)).__actions__.push({func:yO,args:[Ml],thisArg:ba}),new Hd(xa,ld)):Yc&&xc?w.apply(this,hc):(xa=this.thru(Ml),Yc?_e?xa.value()[0]:xa.value():xa)})}),p("pop push shift sort splice unshift".split(" "),function(w){var B=nN[w],H=/^(?:push|sort|unshift)$/.test(w)?"tap":"thru",_e=/^(?:pop|shift)$/.test(w);$e.prototype[w]=function(){var _o=arguments;if(_e&&!this.__chain__){var la=this.value();return B.apply(vp(la)?la:[],_o)}return this[H](function(xa){return B.apply(vp(xa)?xa:[],_o)})}}),RS(Ph.prototype,function(w,B){if(w=$e[B]){var H=w.name+"";r0.call(BO,H)||(BO[H]=[]),BO[H].push({name:B,func:w})}}),BO[F1(ba,2).name]=[{name:"wrapper",func:ba}],Ph.prototype.clone=function(){var w=new Ph(this.__wrapped__);return w.__actions__=l_(this.__actions__),w.__dir__=this.__dir__,w.__filtered__=this.__filtered__,w.__iteratees__=l_(this.__iteratees__),w.__takeCount__=this.__takeCount__,w.__views__=l_(this.__views__),w},Ph.prototype.reverse=function(){if(this.__filtered__){var w=new Ph(this);w.__dir__=-1,w.__filtered__=!0}else(w=this.clone()).__dir__*=-1;return w},Ph.prototype.value=function(){for(var w=this.__wrapped__.value(),B=this.__dir__,H=vp(w),_e=0>B,_o=H?w.length:0,la=0,xa=_o,hc=this.__views__,xc=-1,Yc=hc.length;++xc<Yc;){var ll=hc[xc],Ml=ll.size;switch(ll.type){case"drop":la+=Ml;break;case"dropRight":xa-=Ml;break;case"take":xa=Wp(xa,la+Ml);break;case"takeRight":la=D0(la,xa-Ml)}}if(xa=(hc=xa)-la,la=_e?hc:la-1,xc=(hc=this.__iteratees__).length,Yc=0,ll=Wp(xa,this.__takeCount__),!H||!_e&&_o==xa&&ll==xa)return yR(w,this.__actions__);H=[];e:for(;xa--&&Yc<ll;){for(_e=-1,_o=w[la+=B];++_e<xc;){var ld=hc[_e];if(Ml=ld.iteratee,ld=ld.type,Ml=Ml(_o),2==ld)_o=Ml;else if(!Ml){if(1==ld)continue e;break e}}H[Yc++]=_o}return H},$e.prototype.at=HO,$e.prototype.chain=function(){return N3(this)},$e.prototype.commit=function(){return new Hd(this.value(),this.__chain__)},$e.prototype.next=function(){this.__values__===ba&&(this.__values__=L3(this.value()));var w=this.__index__>=this.__values__.length;return{done:w,value:w?ba:this.__values__[this.__index__++]}},$e.prototype.plant=function(w){for(var B,H=this;H instanceof Qh;){var _e=gV(H);_e.__index__=0,_e.__values__=ba,B?_o.__wrapped__=_e:B=_e;var _o=_e;H=H.__wrapped__}return _o.__wrapped__=w,B},$e.prototype.reverse=function(){var w=this.__wrapped__;return w instanceof Ph?(this.__actions__.length&&(w=new Ph(this)),(w=w.reverse()).__actions__.push({func:yO,args:[$L],thisArg:ba}),new Hd(w,this.__chain__)):this.thru($L)},$e.prototype.toJSON=$e.prototype.valueOf=$e.prototype.value=function(){return yR(this.__wrapped__,this.__actions__)},$e.prototype.first=$e.prototype.head,wR&&($e.prototype[wR]=function(){return this}),$e}();q0?((q0.exports=pO)._=pO,by._=pO):B0._=pO}).call(qb)}),Nz=1/0,wq=function(r){return r?(r=hl(r))===Nz||r===-Nz?17976931348623157e292*(0>r?-1:1):r==r?r:0:0===r?r:0},KO=Math.max,AC=function(r,t,o){var l=Object(r);if(!$f(r)){var p=Ch(t);r=Wf(r),t=function(_){return p(l[_],_,l)}}return-1<(t=function(_,R,M){var P=null==_?0:_.length;if(!P)return-1;if(null==M)M=0;else{var F=(M=wq(M))%1;M=M==M?F?M-F:M:0}return 0>M&&(M=KO(P+M,0)),Cv(_,Ch(R),M)}(r,t,o))?l[p?r[t]:t]:void 0},zC=function(r,t){return r&&r.length?Do(r,void 0,"function"==typeof t?t:void 0):[]},Oz=function(){function r(){ab(this,r),E(this,"size",0),E(this,"fields",new Map)}return Qb(r,[{key:"define",value:function(t,o,l){if(this.size+=l,64<this.size)throw new RangeError("the struct over 64 bits is not supported");ak(o={val:0,isNumber:"number"===o,isBoolean:"boolean"===o,oneof:"number"===o||"boolean"===o?void 0:o,len:l}),this.fields.set(t,o)}},{key:"set",value:function(t,o){if(!(t=this.fields.get(t)))throw Error("field not found");var l=t.oneof;if(!D.isLong(o)&&"number"!=typeof o)if("boolean"==typeof o)o=o?1:0;else{if(void 0===l)throw Error("invalid field type");if(void 0===(o=l[o]))throw Error("field type not found")}ak(t,o),t.val=o}},{key:"toNumber",value:function(){for(var t=0,o=0,l=0,p=Array.from(this.fields);l<p.length;l++){var _=Lb(p[l],2)[1],R=_.len;void 0!==(_=_.val)&&(t+=D.fromValue(_).shiftLeft(o).toNumber(),o+=R)}return t}},{key:"toLong",value:function(){for(var t=D.fromNumber(0,!0),o=0,l=0,p=Array.from(this.fields);l<p.length;l++){var _=Lb(p[l],2)[1],R=_.len;void 0!==(_=_.val)&&(t=D.fromValue(_).shiftLeft(o).add(t),o+=R)}return t}},{key:"assert",value:function(t,o){function l(R){if(!D.isLong(R)&&"number"!=typeof R)if("boolean"==typeof R)R=R?1:0;else{if(void 0===_)throw Error("invalid field type");if(void 0===(R=_[R]))throw Error("field type not found")}return ak(p,R),Zj(R,p.val)}var p=this.fields.get(t);if(!p)throw Error("field not found");var _=p.oneof;if(!Array.isArray(o))return l(o);if(1===o.length)return l(o[0]);if(o.every(function(R){return"string"==typeof R})&&void 0!==_)return o.some(function(R){return l(R)});throw Error("invalid valueTypes")}},{key:"from",value:function(t){t=D.fromValue(t);for(var o=0,l=0,p=Array.from(this.fields);l<p.length;l++){var _=Lb(p[l],2)[1],R=_.len,M=D.fromNumber(Math.pow(2,R)-1,!0).shiftLeft(o);ak(_,M=t.and(M).shiftRightUnsigned(o)),_.val=M,o+=R}}},{key:"typeOf",value:function(t){if(void 0!==(t=this.fields.get(t))){var o=t.oneof;if(t=t.val,void 0!==o){var l=0;for(o=Object.entries(o);l<o.length;l++){var p=Lb(o[l],2),_=p[0];if(Zj(t,p[1]))return _}}}throw new TypeError("can only get type of oneof type")}}]),r}(),Pz=function(r){function t(l){ab(this,t);var p=o.call(this);return p.define("Rejoin","boolean",1),p.define("Unused","number",31),p.define("Platform","number",8),p.define("Version","number",12),p.define("Subversion","number",12),p.set("Platform",7),p.set("Version",7),p.set("Subversion",228),p.set("Rejoin",l),p}nb(t,r);var o=ob(t);return t}(Oz),LO=tb(tb({},{PeerTextMessage:0,ChannelTextMessage:1,VendorTextMessage:2}),{PeerRawMessage:3,ChannelRawMessage:4,VendorRawMessage:5}),Qz={CallInvite:101,CallAccept:102,CallReject:103,CallCancel:104},MO=tb(tb({},LO),Qz),NO={Uncompressed:0,Zlib:1},Yh=function(r){function t(l){ab(this,t);var p=o.call(this);if(p.define("MessageType",MO,8),p.define("BroadcastJumps","number",2),p.define("ToCache","boolean",1),p.define("FromCache","boolean",1),p.define("CompressionMethod",NO,2),p.define("IterationNumber","number",4),p.define("BufferedMessage","boolean",1),p.define("ToArchive","boolean",1),p.define("FromArchive","boolean",1),"number"==typeof l||D.isLong(l))p.from(l);else if(void 0!==l){var _=0;for(l=Vj(l);_<l.length;_++){var R=Lb(l[_],2);p.set(R[0],R[1])}}return p}nb(t,r);var o=ob(t);return Qb(t,[{key:"isTextMessage",value:function(){return this.assert("MessageType",["PeerTextMessage","ChannelTextMessage","VendorTextMessage"])}},{key:"isRawMessage",value:function(){return this.assert("MessageType",["ChannelRawMessage","PeerRawMessage","VendorRawMessage"])}},{key:"isRawPeerMessage",value:function(){return this.assert("MessageType","PeerRawMessage")}},{key:"isRawChannelMessage",value:function(){return this.assert("MessageType","ChannelRawMessage")}},{key:"isPeerTextMessage",value:function(){return this.assert("MessageType","PeerTextMessage")}},{key:"isChannelTextMessage",value:function(){return this.assert("MessageType","ChannelTextMessage")}},{key:"isInvitation",value:function(l){var p=this;return void 0!==l?this.assert("MessageType",l):vi(Qz).some(function(_){return p.assert("MessageType",_)})}},{key:"isPeerMessage",value:function(){return this.assert("MessageType",["PeerTextMessage","PeerRawMessage"])}},{key:"isZlibCompressed",value:function(){return this.assert("CompressionMethod","Zlib")}},{key:"isFromCache",value:function(){return this.assert("FromCache",!0)}},{key:"isBufferedMessage",value:function(){return this.assert("BufferedMessage",!0)}},{key:"getInvitationType",value:function(){if(!this.isInvitation())throw new TypeError("cannot get InvitationType of a normal message type");return this.typeOf("MessageType")}}]),t}(Oz),Fs=function(){function r(t){var o,l,p,_,R;ab(this,r),E(this,"key",void 0),E(this,"value",void 0),E(this,"revision",void 0),E(this,"updateTs",void 0),E(this,"authorUserId",void 0),this.key=null!==(o=null==t?void 0:t.key)&&void 0!==o?o:"",this.value=null!==(l=null==t?void 0:t.value)&&void 0!==l?l:"",this.revision=null!==(p=null==t?void 0:t.revision)&&void 0!==p?p:-1,this.updateTs=null!==(_=null==t?void 0:t.updateTs)&&void 0!==_?_:0,this.authorUserId=null!==(R=null==t?void 0:t.authorUserId)&&void 0!==R?R:""}return Qb(r,[{key:"setKey",value:function(t){if("string"!=typeof t)throw new Ib("Cannot set MetaDataItem key as ".concat(t));this.key=t,this.key=t}},{key:"getKey",value:function(){if("string"==typeof this.key)return this.key;throw new Ib("Cannot get MetaDataItem key")}},{key:"setValue",value:function(t){if("string"!=typeof t&&!Pd.isNull(null))throw new Ib("Cannot set MetaDataItem value as ".concat(t));this.value=t}},{key:"getValue",value:function(){if("string"==typeof this.value||Pd.isNull(null))return this.value;throw new Ib("Cannot get MetaDataItem value")}},{key:"setRevision",value:function(t){if("number"!=typeof t||t%1!=0)throw new Ib("Cannot set MetaDataItem revision as ".concat(t));this.revision=t}},{key:"getRevision",value:function(){if("number"==typeof this.revision)return this.revision;throw new Ib("Cannot get MetaDataItem revision")}},{key:"getUpdateTs",value:function(){return this.updateTs}},{key:"getAuthorUserId",value:function(){return this.authorUserId}}]),r}(),Ge,bg;(function(r){r.STATE_REVISION_KEY_PREFIX="_rev_",r.STATE_TIMESTAMP_PREFIX="_t_",r.STATE_AUTHOR_PREFIX="_m_",r.STATE_REVISION="_rev",r.STATE_INTERNAL_PREFIX="_"})(Ge||(Ge={})),function(r){r[r.StateOk=0]="StateOk",r[r.DuplicatedOperation=1]="DuplicatedOperation",r[r.SyncServerError=2]="SyncServerError",r[r.ArgumentError=3]="ArgumentError",r[r.AuthicationError=4]="AuthicationError",r[r.ExceedLimitationError=5]="ExceedLimitationError",r[r.OutdateRevision=6]="OutdateRevision",r[r.LockAcquireFailed=7]="LockAcquireFailed",r[r.LockExpired=8]="LockExpired",r[r.LockWatching=9]="LockWatching",r[r.InvalidLock=10]="InvalidLock",r[r.TimeOutError=100]="TimeOutError",r[r.UnknownError=255]="UnknownError"}(bg||(bg={}));var OO=Math.max,PO=Math.min,Rz=function(r,t,o){return t=wq(t),void 0===o?(o=t,t=0):o=wq(o),(r=hl(r))>=PO(t,o)&&r<OO(t,o)},Wl=function(r){function t(l,p,_){return ab(this,t),E(L(p=o.call(this,p,"MessageReport")),"messagecount",p.getInitMessageCount()),E(L(p),"context",void 0),E(L(p),"rtmMessageCategory",void 0),E(L(p),"seq",D.fromNumber(1,!0)),p.context=l,p.rtmMessageCategory=_,p}nb(t,r);var o=ob(t);return Qb(t,[{key:"incGetSeq",value:function(){return this.seq=this.seq.add(1)}},{key:"getInitMessageCount",value:function(){return{peerack10mscount:D.fromNumber(0),peerack25mscount:D.fromNumber(0),peerack50mscount:D.fromNumber(0),peerack75mscount:D.fromNumber(0),peerack100mscount:D.fromNumber(0),peerack150mscount:D.fromNumber(0),peerack200mscount:D.fromNumber(0),peerack250mscount:D.fromNumber(0),peerack300mscount:D.fromNumber(0),peerack400mscount:D.fromNumber(0),peerack500mscount:D.fromNumber(0),peerack600mscount:D.fromNumber(0),peerack800mscount:D.fromNumber(0),peerack1000mscount:D.fromNumber(0),peerack2000mscount:D.fromNumber(0),peerack3000mscount:D.fromNumber(0),peerack5000mscount:D.fromNumber(0),peerack7000mscount:D.fromNumber(0),peerackslowcount:D.fromNumber(0),norecipientack10mscount:D.fromNumber(0),norecipientack25mscount:D.fromNumber(0),norecipientack50mscount:D.fromNumber(0),norecipientack75mscount:D.fromNumber(0),norecipientack100mscount:D.fromNumber(0),norecipientack150mscount:D.fromNumber(0),norecipientack200mscount:D.fromNumber(0),norecipientack250mscount:D.fromNumber(0),norecipientack300mscount:D.fromNumber(0),norecipientack400mscount:D.fromNumber(0),norecipientack500mscount:D.fromNumber(0),norecipientack600mscount:D.fromNumber(0),norecipientack800mscount:D.fromNumber(0),norecipientack1000mscount:D.fromNumber(0),norecipientack2000mscount:D.fromNumber(0),norecipientack3000mscount:D.fromNumber(0),norecipientack5000mscount:D.fromNumber(0),norecipientack7000mscount:D.fromNumber(0),norecipientackslowcount:D.fromNumber(0),sentcount:D.fromNumber(0),receivedcount:D.fromNumber(0),acktimeoutcount:D.fromNumber(0),toooftencount:0,receiverofflinecount:0,invalidmessagecount:0,unknowerrorcount:0,servercachedcount:0,timeoutcount:0,successcount:0}}},{key:"updatePeerAckCount",value:function(l){l/=2;for(var p=[[0,10],[10,25],[25,50],[50,75],[75,100],[100,150],[150,200],[200,250],[250,300],[300,400],[400,500],[500,600],[600,800],[800,1e3],[1e3,2e3],[2e3,3e3],[3e3,5e3],[5e3,7e3]],_=0;_<p.length;_++){var R,M=p[_];if(Rz(l,M[0],M[1]))M="peerack".concat(M[1],"mscount"),this.messagecount[M]=null===(R=this.messagecount[M])||void 0===R?void 0:R.add(1);else if(7e3<l){var P;this.messagecount.peerackslowcount=null===(P=this.messagecount.peerackslowcount)||void 0===P?void 0:P.add(1)}}}},{key:"updateNorecipientackCount",value:function(l){l/=2;for(var p=[[0,10],[10,25],[25,50],[50,75],[75,100],[100,150],[150,200],[200,250],[250,300],[300,400],[400,500],[500,600],[600,800],[800,1e3],[1e3,2e3],[2e3,3e3],[3e3,5e3],[5e3,7e3]],_=0;_<p.length;_++){var R,M=p[_];if(Rz(l,M[0],M[1]))M="norecipientack".concat(M[1],"mscount"),this.messagecount[M]=null===(R=this.messagecount[M])||void 0===R?void 0:R.add(1);else if(7e3<l){var P;this.messagecount.norecipientackslowcount=null===(P=this.messagecount.norecipientackslowcount)||void 0===P?void 0:P.add(1)}}}},{key:"updateCommonCount",value:function(l){var p=this.messagecount[l];this.messagecount[l]=D.isLong(p)?p.add(1):p+1}},{key:"report",value:function(){var l,p;$a("RtmSdkMessageCount",new Bx(tb(tb({},this.messagecount),{},{vid:D.fromString(null!==(l=this.context.vid)&&void 0!==l?l:"0"),os:7,lts:D.fromNumber(Date.now()),sid:this.context.sid,reportsequence:this.incGetSeq(),apimajorversion:7,apiminorversion:228,userid:this.context.uid,messagecategory:this.rtmMessageCategory})),null!==(p=this.context.config.enableCloudProxy)&&void 0!==p&&p),this.messagecount=tb(tb({},this.messagecount),{},{toooftencount:0,receiverofflinecount:0,invalidmessagecount:0,unknowerrorcount:0,servercachedcount:0,timeoutcount:0,successcount:0})}}]),t}(Dd()),QO=function(r){function t(l){return ab(this,t),E(L(l=o.call(this,l,"ChatManager")),"dialogueLru",new kG(void 0,{maxlen:1e4,ttl:1e4})),l}nb(t,r);var o=ob(t);return Qb(t,[{key:"getChatInfo",value:function(l){var p=this.dialogueLru.get(l);if(this.dialogueLru.prune(),p){var _=p.dialogue,R={dialogue:_,sequence:p=p.sequence.add(1)};return this.dialogueLru.set(l,{dialogue:_,sequence:p}),R}return _={dialogue:Rj(),sequence:D.fromNumber(1,!0)},this.dialogueLru.set(l,_),_}}]),t}(Dd()),X={};"object"==Ia(module)&&(module.exports=X),X.parse=function(r,t){var o,l=X.bin.readUshort,p=X.bin.readUint,_={};for(o=(r=new Uint8Array(r)).length-4;101010256!=p(r,o);)o--;var R=l(r,o=o+4+4);l(r,o+=2),p(r,o+=2),o=p(r,o+=4);for(var M=0;M<R;M++){p(r,o),o+=4,o+=4,o+=4,p(r,o+=4);var P=p(r,o+=4),F=p(r,o+=4),G=l(r,o+=4),z=l(r,o+2),we=l(r,o+4);o+=6;var xe=p(r,o+=8);o+=4,o+=G+z+we,X._readLocal(r,xe,_,P,F,t)}return _},X._readLocal=function(r,t,o,l,p,_){var R=X.bin.readUshort,M=X.bin.readUint;M(r,t),R(r,t+=4),R(r,t+=2);var P=R(r,t+=2);M(r,t+=2),M(r,t+=4),M=R(r,t=t+4+8);var F=R(r,t+=2);if(R=X.bin.readUTF8(r,t+=2,M),t=t+M+F,_)o[R]={size:p,csize:l};else if(r=new Uint8Array(r.buffer,t),0==P)o[R]=new Uint8Array(r.buffer.slice(t,t+l));else{if(8!=P)throw"unknown compression method: "+P;t=new Uint8Array(p),X.inflateRaw(r,t),o[R]=t}},X.inflateRaw=function(r,t){return X.F.inflate(r,t)},X.inflate=function(r,t){return X.inflateRaw(new Uint8Array(r.buffer,r.byteOffset+2,r.length-2),t)},X.deflate=function(r,t){null==t&&(t={level:6});var o=0,l=new Uint8Array(50+Math.floor(1.1*r.length));return l[o]=120,l[o+1]=156,o=X.F.deflateRaw(r,l,o+2,t.level),r=X.adler(r,0,r.length),l[o+0]=r>>>24&255,l[o+1]=r>>>16&255,l[o+2]=r>>>8&255,l[o+3]=r>>>0&255,new Uint8Array(l.buffer,0,o+4)},X.deflateRaw=function(r,t){null==t&&(t={level:6});var o=new Uint8Array(50+Math.floor(1.1*r.length)),l=X.F.deflateRaw(r,o,l,t.level);return new Uint8Array(o.buffer,0,l)},X.encode=function(r,t){null==t&&(t=!1);var o,l=0,p=X.bin.writeUint,_=X.bin.writeUshort,R={};for(o in r){var M=!X._noNeed(o)&&!t,P=r[o],F=X.crc.crc(P,0,P.length);R[o]={cpr:M,usize:P.length,crc:F,file:M?X.deflateRaw(P):P}}for(o in R)l+=R[o].file.length+30+46+2*X.bin.sizeUTF8(o);for(o in r=new Uint8Array(l+22),t=0,P=[],R)F=R[o],P.push(t),t=X._writeHeader(r,t,o,F,0);for(o in l=0,M=t,R)F=R[o],P.push(t),t=X._writeHeader(r,t,o,F,1,P[l++]);return R=t-M,p(r,t,101010256),_(r,t=t+4+4,l),_(r,t+=2,l),p(r,t+=2,R),p(r,t+4,M),r.buffer},X._noNeed=function(r){return r=r.split(".").pop().toLowerCase(),-1!="png,jpg,jpeg,zip".indexOf(r)},X._writeHeader=function(r,t,o,l,p,_){var R=X.bin.writeUint,M=X.bin.writeUshort,P=l.file;return R(r,t,0==p?67324752:33639248),t+=4,1==p&&(t+=2),M(r,t,20),M(r,t+=2,0),M(r,t+=2,l.cpr?8:0),R(r,t+=2,0),R(r,t+=4,l.crc),R(r,t+=4,P.length),R(r,t+=4,l.usize),M(r,t+=4,X.bin.sizeUTF8(o)),M(r,t+=2,0),t+=2,1==p&&(R(r,t=t+2+2+6,_),t+=4),t+=o=X.bin.writeUTF8(r,t,o),0==p&&(r.set(P,t),t+=P.length),t},X.crc={table:function(){for(var r=new Uint32Array(256),t=0;256>t;t++){for(var o=t,l=0;8>l;l++)o=1&o?3988292384^o>>>1:o>>>1;r[t]=o}return r}(),update:function(r,t,o,l){for(var p=0;p<l;p++)r=X.crc.table[255&(r^t[o+p])]^r>>>8;return r},crc:function(r,t,o){return 4294967295^X.crc.update(4294967295,r,t,o)}},X.adler=function(r,t,o){var l=1,p=0,_=t;for(t+=o;_<t;){for(o=Math.min(_+5552,t);_<o;)p+=l+=r[_++];l%=65521,p%=65521}return p<<16|l},X.bin={readUshort:function(r,t){return r[t]|r[t+1]<<8},writeUshort:function(r,t,o){r[t]=255&o,r[t+1]=o>>8&255},readUint:function(r,t){return 16777216*r[t+3]+(r[t+2]<<16|r[t+1]<<8|r[t])},writeUint:function(r,t,o){r[t]=255&o,r[t+1]=o>>8&255,r[t+2]=o>>16&255,r[t+3]=o>>24&255},readASCII:function(r,t,o){for(var l="",p=0;p<o;p++)l+=String.fromCharCode(r[t+p]);return l},writeASCII:function(r,t,o){for(var l=0;l<o.length;l++)r[t+l]=o.charCodeAt(l)},pad:function(r){return 2>r.length?"0"+r:r},readUTF8:function(r,t,o){for(var l,p="",_=0;_<o;_++)p+="%"+X.bin.pad(r[t+_].toString(16));try{l=decodeURIComponent(p)}catch(R){return X.bin.readASCII(r,t,o)}return l},writeUTF8:function(r,t,o){for(var l=o.length,p=0,_=0;_<l;_++){var R=o.charCodeAt(_);if(0==(4294967168&R))r[t+p]=R,p++;else if(0==(4294965248&R))r[t+p]=192|R>>6,r[t+p+1]=128|R>>0&63,p+=2;else if(0==(4294901760&R))r[t+p]=224|R>>12,r[t+p+1]=128|R>>6&63,r[t+p+2]=128|R>>0&63,p+=3;else{if(0!=(4292870144&R))throw"e";r[t+p]=240|R>>18,r[t+p+1]=128|R>>12&63,r[t+p+2]=128|R>>6&63,r[t+p+3]=128|R>>0&63,p+=4}}return p},sizeUTF8:function(r){for(var t=r.length,o=0,l=0;l<t;l++){var p=r.charCodeAt(l);if(0==(4294967168&p))o++;else if(0==(4294965248&p))o+=2;else if(0==(4294901760&p))o+=3;else{if(0!=(4292870144&p))throw"e";o+=4}}return o}},X.F={},X.F.deflateRaw=function(r,t,o,l){var p=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][l],_=X.F.U,R=X.F._goodIndex,M=X.F._putsE,P=0;o<<=3;var F=0,G=r.length;if(0==l){for(;P<G;){var z=Math.min(65535,G-P);M(t,o,P+z==G?1:0),o=X.F._copyExact(r,P,z,t,o+8),P+=z}return o>>>3}M=_.lits,l=_.strt;var we=_.prev,xe=0,_n=0,fa=0,da=0,Ta=0;for(2<G&&(l[Ta=X.F._hash(r,0)]=0),P=0;P<G;P++){if(z=Ta,P+1<G-2){Ta=X.F._hash(r,P+1);var Da=P+1&32767;we[Da]=l[Ta],l[Ta]=Da}if(F<=P){if((14e3<xe||26697<_n)&&100<G-P&&(F<P&&(M[xe]=P-F,xe+=2,F=P),o=X.F._writeBlock(P==G-1||F==G?1:0,M,xe,da,r,fa,P-fa,t,o),xe=_n=da=0,fa=P),Da=0,P<G-2&&(Da=X.F._bestMatch(r,P,we,z,Math.min(p[2],G-P),p[3])),0!=Da){z=Da>>>16,Da&=65535;var Ja=R(z,_.of0);_.lhst[257+Ja]++;var rl=R(Da,_.df0);_.dhst[rl]++,da+=_.exb[Ja]+_.dxb[rl],M[xe]=z<<23|P-F,M[xe+1]=Da<<16|Ja<<8|rl,xe+=2,F=P+z}else _.lhst[r[P]]++;_n++}}for(fa==P&&0!=r.length||(F<P&&(M[xe]=P-F,xe+=2),o=X.F._writeBlock(1,M,xe,da,r,fa,P-fa,t,o));0!=(7&o);)o++;return o>>>3},X.F._bestMatch=function(r,t,o,l,p,_){var R=32767&t,M=o[R],P=R-M+32768&32767;if(M==R||l!=X.F._hash(r,t-P))return 0;for(var F=l=0,G=Math.min(32767,t);P<=G&&0!=--_&&M!=R;){if((0==l||r[t+l]==r[t+l-P])&&(R=X.F._howLong(r,t,P))>l){if(F=P,(l=R)>=p)break;P+2<R&&(R=P+2);for(var z=0,we=0;we<R-2;we++){var xe=t-P+we+32768&32767,_n=xe-o[xe]+32768&32767;_n>z&&(z=_n,M=xe)}}P+=(R=M)-(M=o[R])+32768&32767}return l<<16|F},X.F._howLong=function(r,t,o){if(r[t]!=r[t-o]||r[t+1]!=r[t+1-o]||r[t+2]!=r[t+2-o])return 0;var l=t,p=Math.min(r.length,t+258);for(t+=3;t<p&&r[t]==r[t-o];)t++;return t-l},X.F._hash=function(r,t){return(r[t]<<8|r[t+1])+(r[t+2]<<4)&65535},X.saved=0,X.F._writeBlock=function(r,t,o,l,p,_,R,M,P){var F=X.F.U,G=X.F._putsF,z=X.F._putsE;F.lhst[256]++;var we=X.F.getTrees(),xe=we[0],_n=we[1],fa=we[2],da=we[3],Ta=we[4],Da=we[5],Ja=we[6];we=we[7];var rl=32+(0==(P+3&7)?0:8-(P+3&7))+(R<<3),Nl=l+X.F.contSize(F.fltree,F.lhst)+X.F.contSize(F.fdtree,F.dhst);l=l+X.F.contSize(F.ltree,F.lhst)+X.F.contSize(F.dtree,F.dhst),l+=14+3*Da+X.F.contSize(F.itree,F.ihst)+(2*F.ihst[16]+3*F.ihst[17]+7*F.ihst[18]);for(var Vl=0;286>Vl;Vl++)F.lhst[Vl]=0;for(Vl=0;30>Vl;Vl++)F.dhst[Vl]=0;for(Vl=0;19>Vl;Vl++)F.ihst[Vl]=0;if(rl=rl<Nl&&rl<l?0:Nl<l?1:2,G(M,P,r),G(M,P+1,rl),P+=3,0==rl){for(;0!=(7&P);)P++;P=X.F._copyExact(p,_,R,M,P)}else{if(1==rl)var xl=F.fltree,kd=F.fdtree;if(2==rl){for(X.F.makeCodes(F.ltree,xe),X.F.revCodes(F.ltree,xe),X.F.makeCodes(F.dtree,_n),X.F.revCodes(F.dtree,_n),X.F.makeCodes(F.itree,fa),X.F.revCodes(F.itree,fa),xl=F.ltree,kd=F.dtree,z(M,P,da-257),z(M,P+=5,Ta-1),z(M,P+=5,Da-4),P+=4,r=0;r<Da;r++)z(M,P+3*r,F.itree[1+(F.ordr[r]<<1)]);P=X.F._codeTiny(Ja,F.itree,M,P+3*Da),P=X.F._codeTiny(we,F.itree,M,P)}for(Da=0;Da<o;Da+=2){for(Ja=(r=t[Da])>>>23,r=_+(8388607&r);_<r;)P=X.F._writeLit(p[_++],xl,M,P);0!=Ja&&(r=(xe=t[Da+1])>>16,R=xe>>8&255,xe&=255,z(M,P=X.F._writeLit(257+R,xl,M,P),Ja-F.of0[R]),G(M,P=X.F._writeLit(xe,kd,M,P+=F.exb[R]),r-F.df0[xe]),P+=F.dxb[xe],_+=Ja)}P=X.F._writeLit(256,xl,M,P)}return P},X.F._copyExact=function(r,t,o,l,p){var _=p>>>3;return l[_]=o,l[_+1]=o>>>8,l[_+2]=255-l[_],l[_+3]=255-l[_+1],_+=4,l.set(new Uint8Array(r.buffer,t,o),_),p+(o+4<<3)},X.F.getTrees=function(){for(var r=X.F.U,t=X.F._hufTree(r.lhst,r.ltree,15),o=X.F._hufTree(r.dhst,r.dtree,15),l=[],p=X.F._lenCodes(r.ltree,l),_=[],R=X.F._lenCodes(r.dtree,_),M=0;M<l.length;M+=2)r.ihst[l[M]]++;for(M=0;M<_.length;M+=2)r.ihst[_[M]]++;M=X.F._hufTree(r.ihst,r.itree,7);for(var P=19;4<P&&0==r.itree[1+(r.ordr[P-1]<<1)];)P--;return[t,o,M,p,R,P,l,_]},X.F.getSecond=function(r){for(var t=[],o=0;o<r.length;o+=2)t.push(r[o+1]);return t},X.F.nonZero=function(r){for(var t="",o=0;o<r.length;o+=2)0!=r[o+1]&&(t+=(o>>1)+",");return t},X.F.contSize=function(r,t){for(var o=0,l=0;l<t.length;l++)o+=t[l]*r[1+(l<<1)];return o},X.F._codeTiny=function(r,t,o,l){for(var p=0;p<r.length;p+=2){var _=r[p],R=r[p+1];l=X.F._writeLit(_,t,o,l);var M=16==_?2:17==_?3:7;15<_&&(X.F._putsE(o,l,R,M),l+=M)}return l},X.F._lenCodes=function(r,t){for(var o=r.length;2!=o&&0==r[o-1];)o-=2;for(var l=0;l<o;l+=2){var p=r[l+1],_=l+3<o?r[l+3]:-1,R=l+5<o?r[l+5]:-1,M=0==l?-1:r[l-1];if(0==p&&_==p&&R==p){for(_=l+5;_+2<o&&r[_+2]==p;)_+=2;11>(p=Math.min(_+1-l>>>1,138))?t.push(17,p-3):t.push(18,p-11),l+=2*p-2}else if(p==M&&_==p&&R==p){for(_=l+5;_+2<o&&r[_+2]==p;)_+=2;p=Math.min(_+1-l>>>1,6),t.push(16,p-3),l+=2*p-2}else t.push(p,0)}return o>>>1},X.F._hufTree=function(r,t,o){var l=[],p=r.length,_=t.length,R=0;for(R=0;R<_;R+=2)t[R]=0,t[R+1]=0;for(R=0;R<p;R++)0!=r[R]&&l.push({lit:R,f:r[R]});if(r=l.length,p=l.slice(0),0==r)return 0;if(1==r)return t[1+((o=l[0].lit)<<1)]=1,t[1+((0==o?1:0)<<1)]=1;l.sort(function(G,z){return G.f-z.f});var M=0,P=1,F=2;for(l[0]={lit:-1,f:(R=l[0]).f+(_=l[1]).f,l:R,r:_,d:0};P!=r-1;)R=M!=P&&(F==r||l[M].f<l[F].f)?l[M++]:l[F++],_=M!=P&&(F==r||l[M].f<l[F].f)?l[M++]:l[F++],l[P++]={lit:-1,f:R.f+_.f,l:R,r:_};for((l=X.F.setDepth(l[P-1],0))>o&&(X.F.restrictDepth(p,o,l),l=o),R=0;R<r;R++)t[1+(p[R].lit<<1)]=p[R].d;return l},X.F.setDepth=function(r,t){return-1!=r.lit?r.d=t:Math.max(X.F.setDepth(r.l,t+1),X.F.setDepth(r.r,t+1))},X.F.restrictDepth=function(r,t,o){var l=0,p=1<<o-t,_=0;for(r.sort(function(M,P){return P.d==M.d?M.f-P.f:P.d-M.d}),l=0;l<r.length&&r[l].d>t;l++){var R=r[l].d;r[l].d=t,_+=p-(1<<o-R)}for(_>>>=o-t;0<_;)(R=r[l].d)<t?(r[l].d++,_-=1<<t-R-1):l++;for(;0<=l;l--)r[l].d==t&&0>_&&(r[l].d--,_++);0!=_&&console.log("debt left")},X.F._goodIndex=function(r,t){var o=0;return t[16|o]<=r&&(o|=16),t[8|o]<=r&&(o|=8),t[4|o]<=r&&(o|=4),t[2|o]<=r&&(o|=2),t[1|o]<=r&&(o|=1),o},X.F._writeLit=function(r,t,o,l){return X.F._putsF(o,l,t[r<<1]),l+t[1+(r<<1)]},X.F.inflate=function(r,t){var o=Uint8Array;if(3==r[0]&&0==r[1])return t||new o(0);var l=X.F,p=l._bitsF,_=l._bitsE,R=l._decodeTiny,M=l.makeCodes,P=l.codes2map,F=l._get17,G=l.U,z=null==t;z&&(t=new o(r.length>>>2<<3));for(var we,xe,_n,fa,da=0,Ta=0,Da=xe=0,Ja=0;0==da;)if(da=p(r,Ja,1),we=p(r,Ja+1,2),Ja+=3,0==we)0!=(7&Ja)&&(Ja+=8-(7&Ja)),we=r[(Ja=4+(Ja>>>3))-4]|r[Ja-3]<<8,z&&(t=X.F._check(t,Da+we)),t.set(new o(r.buffer,r.byteOffset+Ja,we),Da),Ja=Ja+we<<3,Da+=we;else{if(z&&(t=X.F._check(t,Da+131072)),1==we&&(_n=G.flmap,fa=G.fdmap,Ta=511,xe=31),2==we){for(xe=_(r,Ja,5)+257,we=_(r,Ja+5,5)+1,_n=_(r,Ja+10,4)+4,Ja+=14,fa=0;38>fa;fa+=2)G.itree[fa]=0,G.itree[fa+1]=0;for(Ta=1,fa=0;fa<_n;fa++){var rl=_(r,Ja+3*fa,3);G.itree[1+(G.ordr[fa]<<1)]=rl,rl>Ta&&(Ta=rl)}Ja+=3*_n,M(G.itree,Ta),P(G.itree,Ta,G.imap),_n=G.lmap,fa=G.dmap,Ja=R(G.imap,(1<<Ta)-1,xe+we,r,Ja,G.ttree),Ta=(1<<(rl=l._copyOut(G.ttree,0,xe,G.ltree)))-1,xe=(1<<(we=l._copyOut(G.ttree,xe,we,G.dtree)))-1,M(G.ltree,rl),P(G.ltree,rl,_n),M(G.dtree,we),P(G.dtree,we,fa)}for(;;)if(Ja+=15&(we=_n[F(r,Ja)&Ta]),(rl=we>>>4)>>>8==0)t[Da++]=rl;else{if(256==rl)break;we=Da+rl-254,264<rl&&(we=Da+((rl=G.ldef[rl-257])>>>3)+_(r,Ja,7&rl),Ja+=7&rl),Ja+=15&(rl=fa[F(r,Ja)&xe]);var Nl=((rl=G.ddef[rl>>>4])>>>4)+p(r,Ja,15&rl);for(Ja+=15&rl,z&&(t=X.F._check(t,Da+131072));Da<we;)t[Da]=t[Da++-Nl],t[Da]=t[Da++-Nl],t[Da]=t[Da++-Nl],t[Da]=t[Da++-Nl];Da=we}}return t.length==Da?t:t.slice(0,Da)},X.F._check=function(r,t){var o=r.length;return t<=o?r:((t=new Uint8Array(Math.max(o<<1,t))).set(r,0),t)},X.F._decodeTiny=function(r,t,o,l,p,_){for(var R=X.F._bitsE,M=X.F._get17,P=0;P<o;){var F=r[M(l,p)&t];p+=15&F;var G=F>>>4;if(15>=G)_[P]=G,P++;else{var z=F=0;for(16==G?(z=3+R(l,p,2),p+=2,F=_[P-1]):17==G?(z=3+R(l,p,3),p+=3):18==G&&(z=11+R(l,p,7),p+=7),G=P+z;P<G;)_[P]=F,P++}}return p},X.F._copyOut=function(r,t,o,l){for(var p=0,_=0,R=l.length>>>1;_<o;){var M=r[_+t];l[_<<1]=0,l[1+(_<<1)]=M,M>p&&(p=M),_++}for(;_<R;)l[_<<1]=0,l[1+(_<<1)]=0,_++;return p},X.F.makeCodes=function(r,t){var o,l,p=X.F.U,_=r.length,R=p.bl_count;for(o=0;o<=t;o++)R[o]=0;for(o=1;o<_;o+=2)R[r[o]]++;for(p=p.next_code,o=0,R[0]=0,l=1;l<=t;l++)p[l]=o=o+R[l-1]<<1;for(t=0;t<_;t+=2)0!=(R=r[t+1])&&(r[t]=p[R],p[R]++)},X.F.codes2map=function(r,t,o){for(var l=r.length,p=X.F.U.rev15,_=0;_<l;_+=2)if(0!=r[_+1]){var R=r[_+1],M=_>>1<<4|R,P=t-R;for(P=(R=r[_]<<P)+(1<<P);R!=P;)o[p[R]>>>15-t]=M,R++}},X.F.revCodes=function(r,t){for(var o=X.F.U.rev15,l=15-t,p=0;p<r.length;p+=2)r[p]=o[r[p]<<t-r[p+1]]>>>l},X.F._putsE=function(r,t,o){o<<=7&t,r[t>>>=3]|=o,r[t+1]|=o>>>8},X.F._putsF=function(r,t,o){o<<=7&t,r[t>>>=3]|=o,r[t+1]|=o>>>8,r[t+2]|=o>>>16},X.F._bitsE=function(r,t,o){return(r[t>>>3]|r[1+(t>>>3)]<<8)>>>(7&t)&(1<<o)-1},X.F._bitsF=function(r,t,o){return(r[t>>>3]|r[1+(t>>>3)]<<8|r[2+(t>>>3)]<<16)>>>(7&t)&(1<<o)-1},X.F._get17=function(r,t){return(r[t>>>3]|r[1+(t>>>3)]<<8|r[2+(t>>>3)]<<16)>>>(7&t)},X.F._get25=function(r,t){return(r[t>>>3]|r[1+(t>>>3)]<<8|r[2+(t>>>3)]<<16|r[3+(t>>>3)]<<24)>>>(7&t)},X.F.U=function(){var r=Uint16Array,t=Uint32Array;return{next_code:new r(16),bl_count:new r(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new r(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new r(512),fltree:[],fdmap:new r(32),fdtree:[],lmap:new r(32768),ltree:[],ttree:[],dmap:new r(32768),dtree:[],imap:new r(512),itree:[],rev15:new r(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new r(65536),prev:new r(32768)}}(),function(){function r(p,_,R){for(;0!=_--;)p.push(0,R)}for(var t=X.F.U,o=0;32768>o;o++){var l=o;l=(4278255360&(l=(4042322160&(l=(3435973836&(l=(2863311530&l)>>>1|(1431655765&l)<<1))>>>2|(858993459&l)<<2))>>>4|(252645135&l)<<4))>>>8|(16711935&l)<<8,t.rev15[o]=(l>>>16|l<<16)>>>17}for(o=0;32>o;o++)t.ldef[o]=t.of0[o]<<3|t.exb[o],t.ddef[o]=t.df0[o]<<4|t.dxb[o];r(t.fltree,144,8),r(t.fltree,112,9),r(t.fltree,24,7),r(t.fltree,8,8),X.F.makeCodes(t.fltree,9),X.F.codes2map(t.fltree,9,t.flmap),X.F.revCodes(t.fltree,9),r(t.fdtree,32,5),X.F.makeCodes(t.fdtree,5),X.F.codes2map(t.fdtree,5,t.fdmap),X.F.revCodes(t.fdtree,5),r(t.itree,19,0),r(t.ltree,286,0),r(t.dtree,30,0),r(t.ttree,320,0)}();var RO=Array.isArray||function(r){return r&&"number"==typeof r.length},SO=Object.defineProperty({isArray:RO},"__esModule",{value:!0}),TO=Object.defineProperty({isObject:function(r){return null!==r&&"object"===Ia(r)}},"__esModule",{value:!0}),UO=Object.defineProperty({isFunction:function(r){return"function"==typeof r}},"__esModule",{value:!0}),VO=function(){function r(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(o,l){return l+1+") "+o.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return r.prototype=Object.create(Error.prototype),r}(),bk=Object.defineProperty({UnsubscriptionError:VO},"__esModule",{value:!0}),WO=function(){function r(o){this.closed=!1,this._subscriptions=this._parentOrParents=null,o&&(this._ctorUnsubscribe=!0,this._unsubscribe=o)}var t;return r.prototype.unsubscribe=function(){if(!this.closed){var o=this._parentOrParents,l=this._ctorUnsubscribe,p=this._unsubscribe,_=this._subscriptions;if(this.closed=!0,this._subscriptions=this._parentOrParents=null,o instanceof r)o.remove(this);else if(null!==o)for(var R=0;R<o.length;++R)o[R].remove(this);if(UO.isFunction(p)){l&&(this._unsubscribe=void 0);try{p.call(this)}catch(P){var M=P instanceof bk.UnsubscriptionError?Gs(P.errors):[P]}}if(SO.isArray(_))for(R=-1,o=_.length;++R<o;)if(TO.isObject(l=_[R]))try{l.unsubscribe()}catch(P){M=M||[],P instanceof bk.UnsubscriptionError?M=M.concat(Gs(P.errors)):M.push(P)}if(M)throw new bk.UnsubscriptionError(M)}},r.prototype.add=function(o){var l=o;if(!o)return r.EMPTY;switch(Ia(o)){case"function":l=new r(o);case"object":if(l===this||l.closed||"function"!=typeof l.unsubscribe)return l;if(this.closed)return l.unsubscribe(),l;l instanceof r||(o=l,(l=new r)._subscriptions=[o]);break;default:throw Error("unrecognized teardown "+o+" added to Subscription.")}if(null===(o=l._parentOrParents))l._parentOrParents=this;else if(o instanceof r){if(o===this)return l;l._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return l;o.push(this)}return null===(o=this._subscriptions)?this._subscriptions=[l]:o.push(l),l},r.prototype.remove=function(o){var l=this._subscriptions;l&&-1!==(o=l.indexOf(o))&&l.splice(o,1)},r.EMPTY=((t=new r).closed=!0,t),r}(),XO=Object.defineProperty({Subscription:WO},"__esModule",{value:!0}),YO=qb&&qb.__extends||function(){var r=function(t,o){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,p){l.__proto__=p}||function(l,p){for(var _ in p)p.hasOwnProperty(_)&&(l[_]=p[_])})(t,o)};return function(t,o){function l(){this.constructor=t}r(t,o),t.prototype=null===o?Object.create(o):(l.prototype=o.prototype,new l)}}(),ZO=function(r){function t(o,l){return r.call(this)||this}return YO(t,r),t.prototype.schedule=function(o,l){return this},t}(XO.Subscription),$O=Object.defineProperty({Action:ZO},"__esModule",{value:!0}),aP=qb&&qb.__extends||function(){var r=function(t,o){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,p){l.__proto__=p}||function(l,p){for(var _ in p)p.hasOwnProperty(_)&&(l[_]=p[_])})(t,o)};return function(t,o){function l(){this.constructor=t}r(t,o),t.prototype=null===o?Object.create(o):(l.prototype=o.prototype,new l)}}(),Sz=function(r){function t(o,l){var p=r.call(this,o,l)||this;return p.scheduler=o,p.work=l,p.pending=!1,p}return aP(t,r),t.prototype.schedule=function(o,l){if(void 0===l&&(l=0),this.closed)return this;this.state=o;var p=this.scheduler;return null!=(o=this.id)&&(this.id=this.recycleAsyncId(p,o,l)),this.pending=!0,this.delay=l,this.id=this.id||this.requestAsyncId(p,this.id,l),this},t.prototype.requestAsyncId=function(o,l,p){return void 0===p&&(p=0),setInterval(o.flush.bind(o,this),p)},t.prototype.recycleAsyncId=function(o,l,p){if(void 0===p&&(p=0),null!==p&&this.delay===p&&!1===this.pending)return l;clearInterval(l)},t.prototype.execute=function(o,l){return this.closed?Error("executing a cancelled action"):(this.pending=!1,(o=this._execute(o,l))?o:void(!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))))},t.prototype._execute=function(o,l){l=!1;var p=void 0;try{this.work(o)}catch(_){l=!0,p=!!_&&_||Error(_)}if(l)return this.unsubscribe(),p},t.prototype._unsubscribe=function(){var o=this.id,l=this.scheduler,p=l.actions,_=p.indexOf(this);this.state=this.work=null,this.pending=!1,this.scheduler=null,-1!==_&&p.splice(_,1),null!=o&&(this.id=this.recycleAsyncId(l,o,null)),this.delay=null},t}($O.Action);Object.defineProperty({AsyncAction:Sz},"__esModule",{value:!0});var bP=function(){function r(t,o){void 0===o&&(o=r.now),this.SchedulerAction=t,this.now=o}return r.prototype.schedule=function(t,o,l){return void 0===o&&(o=0),new this.SchedulerAction(this,t).schedule(l,o)},r.now=function(){return Date.now()},r}(),Tz=Object.defineProperty({Scheduler:bP},"__esModule",{value:!0}),cP=qb&&qb.__extends||function(){var r=function(t,o){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,p){l.__proto__=p}||function(l,p){for(var _ in p)p.hasOwnProperty(_)&&(l[_]=p[_])})(t,o)};return function(t,o){function l(){this.constructor=t}r(t,o),t.prototype=null===o?Object.create(o):(l.prototype=o.prototype,new l)}}(),Uz=function(r){function t(o,l){void 0===l&&(l=Tz.Scheduler.now);var p=r.call(this,o,function(){return t.delegate&&t.delegate!==p?t.delegate.now():l()})||this;return p.actions=[],p.active=!1,p.scheduled=void 0,p}return cP(t,r),t.prototype.schedule=function(o,l,p){return void 0===l&&(l=0),t.delegate&&t.delegate!==this?t.delegate.schedule(o,l,p):r.prototype.schedule.call(this,o,l,p)},t.prototype.flush=function(o){var l=this.actions;if(this.active)l.push(o);else{var p;this.active=!0;do{if(p=o.execute(o.state,o.delay))break}while(o=l.shift());if(this.active=!1,p){for(;o=l.shift();)o.unsubscribe();throw p}}},t}(Tz.Scheduler);Object.defineProperty({AsyncScheduler:Uz},"__esModule",{value:!0});var dP=mb("iterator"),xq=!Ga(function(){var r=new URL("b?a=1&b=2&c=3","http://a"),t=r.searchParams,o="";return r.pathname="c%20d",t.forEach(function(l,p){t.delete("b"),o+=p+l}),!t.sort||"http://a/c%20d?a=1&c=3"!==r.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[dP]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==o||"x"!==new URL("http://x",void 0).host}),eP=/[^\0-\u007E]/,fP=/[.\u3002\uFF0E\uFF61]/g,Zh=Math.floor,yq=String.fromCharCode,Vz=function(r){var t=Gi(r);if("function"!=typeof t)throw TypeError(String(r)+" is not iterable");return ub(t.call(r))},Wz=me("fetch"),zq=me("Headers"),gP=mb("iterator"),Xz=Sb.set,od=Sb.getterFor("URLSearchParams"),hP=Sb.getterFor("URLSearchParamsIterator"),iP=/\+/g,Yz=Array(4),jP=function(r){try{return decodeURIComponent(r)}catch(t){return r}},Zz=function(r){var t=r.replace(iP," ");r=4;try{return decodeURIComponent(t)}catch(p){for(;r;){var o=t.replace,l=r--;l=Yz[l-1]||(Yz[l-1]=RegExp("((?:%[\\da-f]{2}){"+l+"})","gi")),t=o.call(t,l,jP)}return t}},$z=/[!'()~]|%20/g,kP={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},aA=function(r){return kP[r]},bA=function(r,t){if(t){t=t.split("&");for(var o,l=0;l<t.length;)(o=t[l++]).length&&(o=o.split("="),r.push({key:Zz(o.shift()),value:Zz(o.join("="))}))}},lP=function(r){this.entries.length=0,bA(this.entries,r)},$h=function(r,t){if(r<t)throw TypeError("Not enough arguments")},Aq=yt(function(r,t){Xz(this,{type:"URLSearchParamsIterator",iterator:Vz(od(r).entries),kind:t})},"Iterator",function(){var r=hP(this),t=r.kind,o=(r=r.iterator.next()).value;return r.done||(r.value="keys"===t?o.key:"values"===t?o.value:[o.key,o.value]),r}),xj=function(){Ud(this,xj,"URLSearchParams");var r,t,o,l=0<arguments.length?arguments[0]:void 0,p=[];if(Xz(this,{type:"URLSearchParams",entries:p,updateURL:function(){},updateSearchParams:lP}),void 0!==l)if(fb(l)){var _=Gi(l);if("function"==typeof _)for(l=_.call(l),_=l.next;!(r=_.call(l)).done;){var R=(r=Vz(ub(r.value))).next;if((t=R.call(r)).done||(o=R.call(r)).done||!R.call(r).done)throw TypeError("Expected sequence with length 2");p.push({key:t.value+"",value:o.value+""})}else for(r in l)Fa(l,r)&&p.push({key:r,value:l[r]+""})}else bA(p,"string"==typeof l?"?"===l.charAt(0)?l.slice(1):l:l+"")},Xl=xj.prototype;qh(Xl,{append:function(r,t){$h(arguments.length,2);var o=od(this);o.entries.push({key:r+"",value:t+""}),o.updateURL()},delete:function(r){$h(arguments.length,1);for(var t=od(this),o=t.entries,l=r+"",p=0;p<o.length;)o[p].key===l?o.splice(p,1):p++;t.updateURL()},get:function(r){$h(arguments.length,1);for(var t=od(this).entries,o=r+"",l=0;l<t.length;l++)if(t[l].key===o)return t[l].value;return null},getAll:function(r){$h(arguments.length,1);for(var t=od(this).entries,o=r+"",l=[],p=0;p<t.length;p++)t[p].key===o&&l.push(t[p].value);return l},has:function(r){$h(arguments.length,1);for(var t=od(this).entries,o=r+"",l=0;l<t.length;)if(t[l++].key===o)return!0;return!1},set:function(r,t){$h(arguments.length,1);for(var o,l=od(this),p=l.entries,_=!1,R=r+"",M=t+"",P=0;P<p.length;P++)(o=p[P]).key===R&&(_?p.splice(P--,1):(_=!0,o.value=M));_||p.push({key:R,value:M}),l.updateURL()},sort:function(){var r,t,o=od(this),l=o.entries,p=l.slice();for(t=l.length=0;t<p.length;t++){var _=p[t];for(r=0;r<t;r++)if(l[r].key>_.key){l.splice(r,0,_);break}r===t&&l.push(_)}o.updateURL()},forEach:function(r){for(var t,o=od(this).entries,l=tf(r,1<arguments.length?arguments[1]:void 0,3),p=0;p<o.length;)l((t=o[p++]).value,t.key,this)},keys:function(){return new Aq(this,"keys")},values:function(){return new Aq(this,"values")},entries:function(){return new Aq(this,"entries")}},{enumerable:!0}),Ob(Xl,gP,Xl.entries),Ob(Xl,"toString",function(){for(var r,t=od(this).entries,o=[],l=0;l<t.length;)r=t[l++],o.push(encodeURIComponent(r.key).replace($z,aA)+"="+encodeURIComponent(r.value).replace($z,aA));return o.join("&")},{enumerable:!0}),Td(xj,"URLSearchParams"),wa({global:!0,forced:!xq},{URLSearchParams:xj}),xq||"function"!=typeof Wz||"function"!=typeof zq||wa({global:!0,enumerable:!0,forced:!0},{fetch:function(r){var t=[r];if(1<arguments.length){var o=arguments[1];if(fb(o)){var l=o.body;if("URLSearchParams"===ph(l)){var p=o.headers?new zq(o.headers):new zq;p.has("content-type")||p.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),o=vd(o,{body:ke(0,String(l)),headers:ke(0,p)})}}t.push(o)}return Wz.apply(this,t)}});var yj=na.URL,mP=xj,nP=Sb.set,Tb=Sb.getterFor("URL"),oP=Math.floor,cA=Math.pow,dA=/[A-Za-z]/,pP=/[\d+-.A-Za-z]/,Bq=/\d/,qP=/^(0x|0X)/,rP=/^[0-7]+$/,sP=/^\d+$/,eA=/^[\dA-Fa-f]+$/,tP=/[\0\t\n\r #%/:?@[\\]]/,uP=/[\0\t\n\r #/:?@[\\]]/,vP=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,wP=/[\t\n\r]/g,Cq=function(r,t){var o;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return"Invalid host";var l=xP(t.slice(1,-1));if(!l)return"Invalid host"}else if(rc(r)){for(l=[],t=t.toLowerCase().replace(fP,".").split("."),o=0;o<t.length;o++){var p=t[o],_=l,R=_.push;if(eP.test(p)){var M=p;p=[];var P=M;M=[];for(var F=0,G=P.length;F<G;){var z=P.charCodeAt(F++);if(55296<=z&&56319>=z&&F<G){var we=P.charCodeAt(F++);56320==(64512&we)?M.push(((1023&z)<<10)+(1023&we)+65536):(M.push(z),F--)}else M.push(z)}F=M.length,G=128;var xe=0,_n=72;for(P=0;P<M.length;P++){var fa=M[P];128>fa&&p.push(yq(fa))}for((we=z=p.length)&&p.push("-");we<F;){var da=2147483647;for(P=0;P<M.length;P++)(fa=M[P])>=G&&fa<da&&(da=fa);var Ta=we+1;if(da-G>Zh((2147483647-xe)/Ta))throw RangeError("Overflow: input needs wider integers to process");for(xe+=(da-G)*Ta,G=da,P=0;P<M.length;P++){if((fa=M[P])<G&&2147483647<++xe)throw RangeError("Overflow: input needs wider integers to process");if(fa==G){var Da=xe;for(fa=36;!(Da<(da=fa<=_n?1:fa>=_n+26?26:fa-_n));fa+=36){var Ja=36-da;da+=(Da-=da)%Ja,p.push.call(p,yq(da+22+75*(26>da))),Da=Zh(Da/Ja)}for(p.push(yq(Da+22+75*(26>Da))),_n=Ta,fa=0,xe=we==z?Zh(xe/700):xe>>1,xe+=Zh(xe/_n);455<xe;fa+=36)xe=Zh(xe/35);_n=Zh(fa+36*xe/(xe+38)),xe=0,++we}}++xe,++G}p="xn--"+p.join("")}R.call(_,p)}if(t=l.join("."),tP.test(t)||null===(l=yP(t)))return"Invalid host"}else{if(uP.test(t))return"Invalid host";for(l="",t=hg(t),o=0;o<t.length;o++)l+=Qf(t[o],Yl)}r.host=l},yP=function(r){var t,o=r.split(".");o.length&&""==o[o.length-1]&&o.pop();var l=o.length;if(4<l)return r;var p=[];for(t=0;t<l;t++){var _=o[t];if(""==_)return r;var R=10;if(1<_.length&&"0"==_.charAt(0)&&(R=qP.test(_)?16:8,_=_.slice(8==R?1:2)),""===_)_=0;else{if(!(10==R?sP:8==R?rP:eA).test(_))return r;_=parseInt(_,R)}p.push(_)}for(t=0;t<l;t++)if(_=p[t],t==l-1){if(_>=cA(256,5-l))return null}else if(255<_)return null;for(r=p.pop(),t=0;t<p.length;t++)r+=p[t]*cA(256,3-t);return r},xP=function(r){var t,o,l=[0,0,0,0,0,0,0,0],p=0,_=null,R=0,M=function(){return r.charAt(R)};if(":"==M()){if(":"!=r.charAt(1))return;R+=2,_=++p}for(;M();){if(8==p)return;if(":"==M()){if(null!==_)return;R++,_=++p}else{for(t=o=0;4>o&&eA.test(M());)t=16*t+parseInt(M(),16),R++,o++;if("."==M()){if(0==o||(R-=o,6<p))return;for(t=0;M();){if(o=null,0<t){if(!("."==M()&&4>t))return;R++}if(!Bq.test(M()))return;for(;Bq.test(M());){var P=parseInt(M(),10);if(null===o)o=P;else{if(0==o)return;o=10*o+P}if(255<o)return;R++}l[p]=256*l[p]+o,2!=++t&&4!=t||p++}if(4!=t)return;break}if(":"==M()){if(R++,!M())return}else if(M())return;l[p++]=t}}if(null!==_)for(M=p-_,p=7;0!=p&&0<M;)t=l[p],l[p--]=l[_+M-1],l[_+--M]=t;else if(8!=p)return;return l},zj=function(r){var t,o;if("number"==typeof r){var l=[];for(t=0;4>t;t++)l.unshift(r%256),r=oP(r/256);return l.join(".")}if("object"==typeof r){l="",t=null;for(var p=1,_=null,R=0,M=0;8>M;M++)0!==r[M]?(R>p&&(t=_,p=R),_=null,R=0):(null===_&&(_=M),++R);for(R>p&&(t=_),p=t,t=0;8>t;t++)o&&0===r[t]||(o&&(o=!1),p===t?(l+=t?":":"::",o=!0):(l+=r[t].toString(16),7>t&&(l+=":")));return"["+l+"]"}return r},Yl={},fA=Vi({},Yl,{" ":1,'"':1,"<":1,">":1,"`":1}),gA=Vi({},fA,{"#":1,"?":1,"{":1,"}":1}),Dq=Vi({},gA,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Qf=function(r,t){var o=fD(r,0);return 32<o&&127>o&&!Fa(t,r)?r:encodeURIComponent(r)},Zl={ftp:21,file:null,http:80,https:443,ws:80,wss:443},rc=function(r){return Fa(Zl,r.scheme)},Eq=function(r){return!r.host||r.cannotBeABaseURL||"file"==r.scheme},Aj=function(r,t){var o;return 2==r.length&&dA.test(r.charAt(0))&&(":"==(o=r.charAt(1))||!t&&"|"==o)},hA=function(r){var t;return 1<r.length&&Aj(r.slice(0,2))&&(2==r.length||"/"===(t=r.charAt(2))||"\\"===t||"?"===t||"#"===t)},iA=function(r){var t=r.path,o=t.length;!o||"file"==r.scheme&&1==o&&Aj(t[0],!0)||t.pop()},Fq={},jA={},Gq={},kA={},lA={},Hq={},mA={},nA={},$l={},am={},Iq={},Jq={},Kq={},Lq={},oA={},Mq={},Bj={},ze={},pA={},Gg={},hf={},Ae=function(r,t,o,l){var p=o||Fq,_=0,R="",M=!1,P=!1,F=!1;for(o||(r.scheme="",r.username="",r.password="",r.host=null,r.port=null,r.path=[],r.query=null,r.fragment=null,r.cannotBeABaseURL=!1,t=t.replace(vP,"")),t=t.replace(wP,""),t=hg(t);_<=t.length;){var G=t[_];switch(p){case Fq:if(!G||!dA.test(G)){if(o)return"Invalid scheme";p=Gq;continue}R+=G.toLowerCase(),p=jA;break;case jA:if(G&&(pP.test(G)||"+"==G||"-"==G||"."==G))R+=G.toLowerCase();else{if(":"!=G){if(o)return"Invalid scheme";R="",p=Gq,_=0;continue}if(o&&(rc(r)!=Fa(Zl,R)||"file"==R&&(""!=r.username||""!=r.password||null!==r.port)||"file"==r.scheme&&!r.host))return;if(r.scheme=R,o)return void(rc(r)&&Zl[r.scheme]==r.port&&(r.port=null));R="","file"==r.scheme?p=Lq:rc(r)&&l&&l.scheme==r.scheme?p=kA:rc(r)?p=nA:"/"==t[_+1]?(p=lA,_++):(r.cannotBeABaseURL=!0,r.path.push(""),p=pA)}break;case Gq:if(!l||l.cannotBeABaseURL&&"#"!=G)return"Invalid scheme";if(l.cannotBeABaseURL&&"#"==G){r.scheme=l.scheme,r.path=l.path.slice(),r.query=l.query,r.fragment="",r.cannotBeABaseURL=!0,p=hf;break}p="file"==l.scheme?Lq:Hq;continue;case kA:if("/"!=G||"/"!=t[_+1]){p=Hq;continue}p=$l,_++;break;case lA:if("/"==G){p=am;break}p=ze;continue;case Hq:if(r.scheme=l.scheme,null==G)r.username=l.username,r.password=l.password,r.host=l.host,r.port=l.port,r.path=l.path.slice(),r.query=l.query;else if("/"==G||"\\"==G&&rc(r))p=mA;else if("?"==G)r.username=l.username,r.password=l.password,r.host=l.host,r.port=l.port,r.path=l.path.slice(),r.query="",p=Gg;else{if("#"!=G){r.username=l.username,r.password=l.password,r.host=l.host,r.port=l.port,r.path=l.path.slice(),r.path.pop(),p=ze;continue}r.username=l.username,r.password=l.password,r.host=l.host,r.port=l.port,r.path=l.path.slice(),r.query=l.query,r.fragment="",p=hf}break;case mA:if(!rc(r)||"/"!=G&&"\\"!=G){if("/"!=G){r.username=l.username,r.password=l.password,r.host=l.host,r.port=l.port,p=ze;continue}p=am}else p=$l;break;case nA:if(p=$l,"/"!=G||"/"!=R.charAt(_+1))continue;_++;break;case $l:if("/"!=G&&"\\"!=G){p=am;continue}break;case am:if("@"==G){for(M&&(R="%40"+R),M=!0,R=hg(R),G=0;G<R.length;G++){var z=R[G];":"!=z||F?(z=Qf(z,Dq),F?r.password+=z:r.username+=z):F=!0}R=""}else if(null==G||"/"==G||"?"==G||"#"==G||"\\"==G&&rc(r)){if(M&&""==R)return"Invalid authority";_-=hg(R).length+1,R="",p=Iq}else R+=G;break;case Iq:case Jq:if(o&&"file"==r.scheme){p=Mq;continue}if(":"!=G||P){if(null==G||"/"==G||"?"==G||"#"==G||"\\"==G&&rc(r)){if(rc(r)&&""==R)return"Invalid host";if(o&&""==R&&(""!=r.username||""!=r.password||null!==r.port))return;if(p=Cq(r,R))return p;if(R="",p=Bj,o)return;continue}"["==G?P=!0:"]"==G&&(P=!1),R+=G}else{if(""==R)return"Invalid host";if(p=Cq(r,R))return p;if(R="",p=Kq,o==Jq)return}break;case Kq:if(!Bq.test(G)){if(null==G||"/"==G||"?"==G||"#"==G||"\\"==G&&rc(r)||o){if(""!=R){if(65535<(p=parseInt(R,10)))return"Invalid port";r.port=rc(r)&&p===Zl[r.scheme]?null:p,R=""}if(o)return;p=Bj;continue}return"Invalid port"}R+=G;break;case Lq:if(r.scheme="file","/"==G||"\\"==G)p=oA;else{if(!l||"file"!=l.scheme){p=ze;continue}if(null==G)r.host=l.host,r.path=l.path.slice(),r.query=l.query;else if("?"==G)r.host=l.host,r.path=l.path.slice(),r.query="",p=Gg;else{if("#"!=G){hA(t.slice(_).join(""))||(r.host=l.host,r.path=l.path.slice(),iA(r)),p=ze;continue}r.host=l.host,r.path=l.path.slice(),r.query=l.query,r.fragment="",p=hf}}break;case oA:if("/"==G||"\\"==G){p=Mq;break}l&&"file"==l.scheme&&!hA(t.slice(_).join(""))&&(Aj(l.path[0],!0)?r.path.push(l.path[0]):r.host=l.host),p=ze;continue;case Mq:if(null==G||"/"==G||"\\"==G||"?"==G||"#"==G){if(!o&&Aj(R))p=ze;else{if(""==R){if(r.host="",o)return}else{if(p=Cq(r,R))return p;if("localhost"==r.host&&(r.host=""),o)return;R=""}p=Bj}continue}R+=G;break;case Bj:if(rc(r)){if(p=ze,"/"!=G&&"\\"!=G)continue}else if(o||"?"!=G)if(o||"#"!=G){if(null!=G&&(p=ze,"/"!=G))continue}else r.fragment="",p=hf;else r.query="",p=Gg;break;case ze:if(null==G||"/"==G||"\\"==G&&rc(r)||!o&&("?"==G||"#"==G)){if(".."===(z=(z=R).toLowerCase())||"%2e."===z||".%2e"===z||"%2e%2e"===z?(iA(r),"/"==G||"\\"==G&&rc(r)||r.path.push("")):"."===R||"%2e"===R.toLowerCase()?"/"==G||"\\"==G&&rc(r)||r.path.push(""):("file"==r.scheme&&!r.path.length&&Aj(R)&&(r.host&&(r.host=""),R=R.charAt(0)+":"),r.path.push(R)),R="","file"==r.scheme&&(null==G||"?"==G||"#"==G))for(;1<r.path.length&&""===r.path[0];)r.path.shift();"?"==G?(r.query="",p=Gg):"#"==G&&(r.fragment="",p=hf)}else R+=Qf(G,gA);break;case pA:"?"==G?(r.query="",p=Gg):"#"==G?(r.fragment="",p=hf):null!=G&&(r.path[0]+=Qf(G,Yl));break;case Gg:o||"#"!=G?null!=G&&("'"==G&&rc(r)?r.query+="%27":r.query="#"==G?r.query+"%23":r.query+Qf(G,Yl)):(r.fragment="",p=hf);break;case hf:null!=G&&(r.fragment+=Qf(G,fA))}_++}},Rf=function(r){var t=Ud(this,Rf,"URL"),o=1<arguments.length?arguments[1]:void 0,l=String(r),p=nP(t,{type:"URL"});if(void 0!==o)if(o instanceof Rf)var _=Tb(o);else if(o=Ae(_={},String(o)))throw TypeError(o);if(o=Ae(p,l,null,_))throw TypeError(o);var R=p.searchParams=new mP;(l=od(R)).updateSearchParams(p.query),l.updateURL=function(){p.query=String(R)||null},cb||(t.href=bm.call(t),t.origin=qA.call(t),t.protocol=rA.call(t),t.username=sA.call(t),t.password=tA.call(t),t.host=uA.call(t),t.hostname=vA.call(t),t.port=wA.call(t),t.pathname=xA.call(t),t.search=yA.call(t),t.searchParams=zA.call(t),t.hash=AA.call(t))},Nq=Rf.prototype,bm=function(){var r=Tb(this),t=r.scheme,l=r.password,p=r.host,_=r.port,R=r.path,M=r.query,P=r.fragment,F=t+":";return null!==p?(F+="//",""==r.username&&""==r.password||(F+=r.username+(l?":"+l:"")+"@"),F+=zj(p),null!==_&&(F+=":"+_)):"file"==t&&(F+="//"),F+=r.cannotBeABaseURL?R[0]:R.length?"/"+R.join("/"):"",null!==M&&(F+="?"+M),null!==P&&(F+="#"+P),F},qA=function(){var r=Tb(this),t=r.scheme,o=r.port;if("blob"==t)try{return new Rf(t.path[0]).origin}catch(l){return"null"}return"file"!=t&&rc(r)?t+"://"+zj(r.host)+(null!==o?":"+o:""):"null"},rA=function(){return Tb(this).scheme+":"},sA=function(){return Tb(this).username},tA=function(){return Tb(this).password},uA=function(){var r=Tb(this),t=r.host;return r=r.port,null===t?"":null===r?zj(t):zj(t)+":"+r},vA=function(){var r=Tb(this).host;return null===r?"":zj(r)},wA=function(){var r=Tb(this).port;return null===r?"":String(r)},xA=function(){var r=Tb(this),t=r.path;return r.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},yA=function(){var r=Tb(this).query;return r?"?"+r:""},zA=function(){return Tb(this).searchParams},AA=function(){var r=Tb(this).fragment;return r?"#"+r:""},Kd=function(r,t){return{get:r,set:t,configurable:!0,enumerable:!0}};if(cb&&vt(Nq,{href:Kd(bm,function(r){var t=Tb(this);if(r=Ae(t,String(r)))throw TypeError(r);od(t.searchParams).updateSearchParams(t.query)}),origin:Kd(qA),protocol:Kd(rA,function(r){var t=Tb(this);Ae(t,String(r)+":",Fq)}),username:Kd(sA,function(r){var t=Tb(this);if(r=hg(String(r)),!Eq(t)){t.username="";for(var o=0;o<r.length;o++)t.username+=Qf(r[o],Dq)}}),password:Kd(tA,function(r){var t=Tb(this);if(r=hg(String(r)),!Eq(t)){t.password="";for(var o=0;o<r.length;o++)t.password+=Qf(r[o],Dq)}}),host:Kd(uA,function(r){var t=Tb(this);t.cannotBeABaseURL||Ae(t,String(r),Iq)}),hostname:Kd(vA,function(r){var t=Tb(this);t.cannotBeABaseURL||Ae(t,String(r),Jq)}),port:Kd(wA,function(r){var t=Tb(this);Eq(t)||(""==(r=String(r))?t.port=null:Ae(t,r,Kq))}),pathname:Kd(xA,function(r){var t=Tb(this);t.cannotBeABaseURL||(t.path=[],Ae(t,r+"",Bj))}),search:Kd(yA,function(r){var t=Tb(this);""==(r=String(r))?t.query=null:("?"==r.charAt(0)&&(r=r.slice(1)),t.query="",Ae(t,r,Gg)),od(t.searchParams).updateSearchParams(t.query)}),searchParams:Kd(zA),hash:Kd(AA,function(r){var t=Tb(this);""==(r=String(r))?t.fragment=null:("#"==r.charAt(0)&&(r=r.slice(1)),t.fragment="",Ae(t,r,hf))})}),Ob(Nq,"toJSON",function(){return bm.call(this)},{enumerable:!0}),Ob(Nq,"toString",function(){return bm.call(this)},{enumerable:!0}),yj){var BA=yj.createObjectURL,CA=yj.revokeObjectURL;BA&&Ob(Rf,"createObjectURL",function(r){return BA.apply(yj,arguments)}),CA&&Ob(Rf,"revokeObjectURL",function(r){return CA.apply(yj,arguments)})}Td(Rf,"URL"),wa({global:!0,forced:!xq,sham:!cb},{URL:Rf});var zP=new Blob(["var fakeIdToId = {};onmessage = function (event) {\tvar data = event.data,\t\tname = data.name,\t\tfakeId = data.fakeId,\t\ttime;\tif(data.hasOwnProperty('time')) {\t\ttime = data.time;\t}\tswitch (name) {\t\tcase 'setInterval':\t\t\tfakeIdToId[fakeId] = setInterval(function () {\t\t\t\tpostMessage({fakeId: fakeId});\t\t\t}, time);\t\t\tbreak;\t\tcase 'clearInterval':\t\t\tif (fakeIdToId.hasOwnProperty (fakeId)) {\t\t\t\tclearInterval(fakeIdToId[fakeId]);\t\t\t\tdelete fakeIdToId[fakeId];\t\t\t}\t\t\tbreak;\t}}"]),AP=window.URL.createObjectURL(zP),gh={},xi=0,Xm=new Worker(AP);Xm.onmessage=function(r){if(gh.hasOwnProperty(r=r.data.fakeId)){var t=gh[r];r=t.callback,t=t.parameters,r.apply(window,t)}};var BP=function(r){function t(){return ab(this,t),o.apply(this,arguments)}nb(t,r);var o=ob(t);return Qb(t,[{key:"requestAsyncId",value:function(l,p){var _=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return BC(l.flush.bind(l,this),_)}},{key:"recycleAsyncId",value:function(l,p){var _=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(null!==_&&this.delay===_&&!1===this.pending)return p;gh.hasOwnProperty(p)&&(delete gh[p],Xm.postMessage({name:"clearInterval",fakeId:p}))}}]),t}(Sz),CP=new Uz(BP),DP=["group"],Oq=X.inflate,DA=X.deflate,Pq=function(r){function t(p,_,R,M){ab(this,t);var P=l.call(this,M,"Session");return E(L(P),"lastNoticeTicket",""),E(L(P),"chatManager",void 0),E(L(P),"usedChannelIds",[]),E(L(P),"lastUserMeteUpdateRecord",{}),E(L(P),"lastChannelMetaUpdateRecord",{}),E(L(P),"msgDedupLru",new ue(void 0,{maxlen:200})),E(L(P),"startTime",Date.now()),E(L(P),"seq",D.fromNumber(1,!0)),E(L(P),"userJoinOptions",new Pz(!1)),E(L(P),"seqSentStatuses",[!1,!1]),E(L(P),"dialogueSequenceLru",new ue(void 0,{maxlen:1e4})),E(L(P),"loggedOut",!1),E(L(P),"messageSentTimes",[]),E(L(P),"curLoginSockets",[void 0,void 0]),E(L(P),"loginSocketSubs",[{channels:new Map,receivers:[]},{channels:new Map,receivers:[]}]),E(L(P),"lastLoginSockets",[new ah(1),new ah(1)]),E(L(P),"dialPendingMsgSubjectMap",new Map),E(L(P),"context",void 0),E(L(P),"connection",void 0),E(L(P),"instanceId",void 0),E(L(P),"lastPingTime",void 0),E(L(P),"chanelStringMessageReport",void 0),E(L(P),"chanelRawMessageReport",void 0),E(L(P),"p2pSMsgNoOfflineReport",void 0),E(L(P),"p2pRMsgNoOfflineReport",void 0),E(L(P),"registerSocketsFailureListener",function(){P.connection.once("socketsFailure",function(){P.log("socketsFailure, creating a new connection"),lf(function(){return P.connection.removeAllListeners(),P.connection=new Gx(P.context,P.logger,!0),P.loginHandler(15e3,!0)}).pipe(Zg(function(F){return F.pipe(mf(wg.getParameter("RECONNECTING_AP_INTERVAL")))}),he(P.connection.apClient.apFinish$)).subscribe(function(){P.log("new connection connected")})}),0===P.connection.listenerCount("tokenExpired")&&P.connection.on("tokenExpired",function(){P.emit("tokenExpired")})}),P.context=p,P.context.startTime=P.startTime,P.connection=_,P.instanceId=R,P.chatManager=new QO(M),P.lastPingTime=[0,0],P.setMaxListeners(512),P.log("The instanceId is %s",P.instanceId.toString()),P.chanelStringMessageReport=new Wl(p,M,vb.ChannelSMsg),P.chanelRawMessageReport=new Wl(p,M,vb.ChannelRMsg),P.p2pSMsgNoOfflineReport=new Wl(p,M,vb.P2pSMsgNoOfflineFlag),P.p2pRMsgNoOfflineReport=new Wl(p,M,vb.P2pRMsgNoOfflineFlag),P}nb(t,r);var o,l=ob(t);return Qb(t,[{key:"loginHandler",value:function(){var p=this,_=0<arguments.length&&void 0!==arguments[0]?arguments[0]:12e3,R=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(this.loggedOut&&R)throw new ia("Already logged out, request ignored");R&&this.registerSocketsFailureListener(),this.connection.initConnection();var M=this.getSocketLoginObservables(this.connection.lastOpenSockets,this.seq),P=Date.now();return M.forEach(function(F,G){var z=p.loginSocketSubs[G].login;void 0!==z&&z.unsubscribe(),p.loginSocketSubs[G].login=F.pipe(Ka(function(we){var xe;p.curLoginSockets[G]=we;var _n=Date.now();$a("Link",{ackedServerIp:we.address,destServerIp:we.ip,ec:0,sc:0,elapse:Nb(p.startTime),lts:D.fromNumber(_n),responseTime:_n-P,sid:fc(p.instanceId),userId:p.context.uid},null!==(xe=p.context.config.enableCloudProxy)&&void 0!==xe&&xe),p.emit("userJoined",we.env),R&&p.connection.apClient.apFinish$.next(void 0)})).subscribe(p.lastLoginSockets[G])}),this.initKeepAliveSender(),this.initKeepAliveReconnector(),this.initLoginReceiver(),Nc.apply(void 0,ra(M).concat([Bc(this.connection,"connectionInitFailure").pipe(Ka(function(F){throw Sa(F)||uc(F)?F:new Pa("Login failure",{code:Ew,originalError:F})}))])).pipe(Xb(1),Oc(_),Rb(function(F){return F instanceof ad&&p.warn("Client login timeout"),F&&F.code===bl&&(p.connection.emit("tokenExpired"),p.connection.apClient.apFinish$.next(void 0)),p.clearSockets(0,R),Va(F)}),Ka(function(){R||p.registerSocketsFailureListener()}),Mj(function(){R||p.connection.apClient.apFinish$.next(void 0)}))}},{key:"logoutHandler",value:(o=za(W.mark(function p(){var _,R,M,P,F=this;return W.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return this.loggedOut=!0,this.connection.apClient.apFinish$.next(void 0),_=this.incGetSeq(),R=this.getLoginSockets(),M=R.map(function(z){var we,xe;return z.sendPacket("StateUnsubscribe",{sequence:_,target:F.context.uid,subTarget:"",flags:D.fromNumber(0)}),delete F.lastUserMeteUpdateRecord[F.context.sid],$a("SyncSubscribeEvent",{lts:D.fromNumber(Date.now()),userid:F.context.uid,vid:null!==(we=F.context)&&void 0!==we&&we.vid?D.fromString(F.context.vid):D.fromNumber(0),sid:"",usersid:F.context.sid,target:F.context.uid,requestts:D.fromNumber(Date.now()),replyts:D.fromNumber(Date.now()),eventtype:"UnSubscribe",sdktype:3,flags:D.fromNumber(0),code:0,seq:_,index:{index1:F.context.uid,index2:F.context.appId,index3:"enableLogUpload=".concat(F.context.config.enableLogUpload)},subtarget:F.context.uid},null!==(xe=F.context.config.enableCloudProxy)&&void 0!==xe&&xe),z.sendPacket("UserQuit",{}),F.connection.waitClosing(z)}),this.clearSockets(5e3),P=R.map(function(z){return z.env}),[0,1].filter(function(z){return!P.includes(z)}).forEach(function(z){F.connection.closeSocket(z,0)}),G.abrupt("return",Nc.apply(void 0,ra(M)).toPromise());case 10:case"end":return G.stop()}},p,this)})),function(){return o.apply(this,arguments)})},{key:"requestChannelJoin",value:function(){var p=za(W.mark(function _(R){var M,P,F,G=this;return W.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(0!==this.getLoginSockets().length){z.next=2;break}throw new ia("Client is not logged in. Cannot join the channel",Aw);case 2:return M=Bc(this,"channelLeft").pipe(sc(function(we){return R===we}),Xb(1)),P=this.incGetSeq(),(F=this.lastLoginSockets.map(function(we){return we.pipe(Cc(function(xe,_n){0!==_n&&G.incSeqIfNeeded(xe.env);var fa=0===_n?P:G.seq;return xe.sendPacket("GroupEnter",{account:R,seq:fa}),xe.fromReceived("GroupReply").pipe(La(function(da){return fa.eq(da.seq)}),Ka(function(da){if(0!==(da=da.code))throw new Pa(["Channel join failure. The response code is %d",da],ww)}))}),he(M),$g())})).forEach(function(we,xe){var _n=function(){return G.loginSocketSubs[xe].channels.delete(R)};G.loginSocketSubs[xe].channels.set(R,we.subscribe({error:_n,complete:_n}))}),z.next=8,Nc.apply(void 0,ra(F)).pipe(Xb(1),Oc(1e4),Rb(function(we){return we instanceof ad&&G.warn("Channel join timeout"),Va(we)})).toPromise();case 8:case"end":return z.stop()}},_,this)}));return function(_){return p.apply(this,arguments)}}()},{key:"requestChannelLeave",value:function(p){this.getLoginSockets().forEach(function(_){_.sendPacket("GroupLeave",{account:p})})}},{key:"requestUpdateEdgeTicket",value:function(p){var _=this,R=this.getLoginSockets();if(0===R.length)throw new ia("Client is not logged in. Cannot renew token",Mw);var M=this.incGetSeq();return R.forEach(function(P){P.sendPacket("UserRenewTokenReq",{instance:_.instanceId,seq:M,account:_.context.uid,ticket:p})}),bb.apply(void 0,[t.genTimeoutError(jp)].concat(ra(R.map(function(P){return P.fromReceived("UserRenewTokenResp").pipe(La(function(F){var G=F.code;return M.eq(F.seq)&&0===G}))}))))}},{key:"requestChannelMemberList",value:function(p){var _=this.getLoginSockets();if(0===_.length)throw new ia("Client is not logged in. Cannot get the channel members",wI);var R=this.incGetSeq();return _.forEach(function(M){M.sendPacket("GroupAllUsersList",{group:p,pageNumber:0,pageSize:200,seq:R})}),bb.apply(void 0,[t.genTimeoutError(uw)].concat(ra(_.map(function(M){return M.fromReceived("GroupAllUsersResult").pipe(La(function(P){return P.group===p&&R.eq(P.seq)}))}))))}},{key:"requestPeersOnlineStatus",value:function(p){var _=this.getLoginSockets();if(0===_.length)throw new ia("Client is not logged in");var R=this.incGetSeq();return _.forEach(function(M){M.sendPacket("UserStatusList",{users:p,seq:R})}),bb.apply(void 0,[t.genTimeoutError(II)].concat(ra(_.map(function(M){return M.fromReceived("UserStatusResult").pipe(La(function(P){return R.eq(P.seq)}))}))))}},{key:"requestSetLocalUserAttributes",value:function(p,_){var R=this,M=this.getLoginSockets();if(0===M.length)throw new ia("Client is not logged in");var P=this.incGetSeq();return M.forEach(function(F,G){void 0!==_&&G!==_||F.sendPacket("UserAttributeSet",{account:R.context.uid,attributeInfos:Object.entries(p).map(function(z){return{key:(z=Lb(z,2))[0],value:z[1]}}),seq:P})}),bb.apply(void 0,ra(M.map(function(F){return F.fromReceived("UserAttributeErr").pipe(La(function(G){return P.eq(G.seq)}),Wa(function(G){throw new Pa(["The user attributes set failure, code %d",G.code],Ad)}))})).concat([t.genTimeoutError(Bd)],ra(M.map(function(F){return F.fromReceived("UserAttributeRsp").pipe(La(function(G){return P.eq(G.seq)}))}))))}},{key:"requestSetChannelAttributes",value:function(p,_,R){var M=this.getLoginSockets();if(0===M.length)throw new ia("Client is not logged in");var P=this.incGetSeq();return M.forEach(function(F){F.sendPacket("GroupAttributeSet",{broadcast:R,group:p,attributeInfos:Object.entries(_).map(function(G){return{key:(G=Lb(G,2))[0],value:G[1]}}),seq:P})}),bb.apply(void 0,ra(M.map(function(F){return F.fromReceived("GroupAttributeErr").pipe(La(function(G){return P.eq(G.seq)}),Wa(function(G){throw new Pa(["The group attributes set failure, code %d",G.code],Ad)}))})).concat([t.genTimeoutError(Bd)],ra(M.map(function(F){return F.fromReceived("GroupAttributeRsp").pipe(La(function(G){return P.eq(G.seq)}))}))))}},{key:"requestAddOrUpdateLocalUserAttributes",value:function(p){var _=this,R=this.getLoginSockets();if(0===R.length)throw new ia("Client is not logged in");var M=this.incGetSeq();return R.forEach(function(P){P.sendPacket("UserAttributeMod",{account:_.context.uid,attributeInfos:Object.entries(p).map(function(F){return{key:(F=Lb(F,2))[0],value:F[1]}}),seq:M})}),bb.apply(void 0,ra(R.map(function(P){return P.fromReceived("UserAttributeErr").pipe(La(function(F){return M.eq(F.seq)}),Wa(function(F){throw new Pa(["The user attributes add or update failure, code %d",F.code],Ad)}))})).concat([t.genTimeoutError(Bd)],ra(R.map(function(P){return P.fromReceived("UserAttributeRsp").pipe(La(function(F){return M.eq(F.seq)}))}))))}},{key:"requestAddOrUpdateChannelAttributes",value:function(p,_,R){var M=this.getLoginSockets();if(0===M.length)throw new ia("Client is not logged in");var P=this.incGetSeq();return M.forEach(function(F){F.sendPacket("GroupAttributeMod",{broadcast:R,group:p,attributeInfos:Object.entries(_).map(function(G){return{key:(G=Lb(G,2))[0],value:G[1]}}),seq:P})}),bb.apply(void 0,ra(M.map(function(F){return F.fromReceived("GroupAttributeErr").pipe(La(function(G){return P.eq(G.seq)}),Wa(function(G){throw new Pa(["The group attributes add or update failure, code %d",G.code],Ad)}))})).concat([t.genTimeoutError(Bd)],ra(M.map(function(F){return F.fromReceived("GroupAttributeRsp").pipe(La(function(G){return P.eq(G.seq)}))}))))}},{key:"requestDeleteLocalUserAttributesByKeys",value:function(p){var _=this,R=this.getLoginSockets();if(0===R.length)throw new ia("Client is not logged in");var M=this.incGetSeq();return R.forEach(function(P){P.sendPacket("UserAttributeDel",{account:_.context.uid,attributes:p,seq:M})}),bb.apply(void 0,ra(R.map(function(P){return P.fromReceived("UserAttributeErr").pipe(La(function(F){return M.eq(F.seq)}),Wa(function(F){throw new Pa(["The user attributes delete failure, code %d",F.code],Ad)}))})).concat([t.genTimeoutError(Bd)],ra(R.map(function(P){return P.fromReceived("UserAttributeRsp").pipe(La(function(F){return M.eq(F.seq)}))}))))}},{key:"requestGetChannelMetaData",value:function(p){var _=this.getLoginSockets();if(0===_.length)throw new ia("Client is not logged in. Cannot get the channel metadata",oc);if(void 0!==this.context.lastGetMetaDataTime&&250>Date.now()-this.context.lastGetMetaDataTime)throw new Fc(["The frequency of metedata operation exceeded the limit of %d queries per %d second",20,5e3],Vc);this.context.lastGetMetaDataTime=Date.now();var R=this.incGetSeq();return _.forEach(function(M){M.sendPacket("StateGet",{target:p,subTarget:"",lock:"",sequence:R,flags:new D(1,0,!0),lockRev:D.fromNumber(0)})}),bb.apply(void 0,[t.genTimeoutError(cd)].concat(ra(_.map(function(M){return M.fromReceived("StateGetResult").pipe(La(function(P){return R.eq(P.sequence)}),Wa(function(P){var F=P.code;if(P=P.allStates,ud(F)!==bd)throw new Pa(["Get metaData failure. The response code from the RTM service is %d",F],He);return P}))}))))}},{key:"requestGetLocalMetaData",value:function(p){var _=this.getLoginSockets();if(0===_.length)throw new ia("Client is not logged in. Cannot get the local metaData",oc);if(void 0!==this.context.lastGetMetaDataTime&&250>Date.now()-this.context.lastGetMetaDataTime)throw new Fc(["The frequency of metedata operation exceeded the limit of %d queries per %d second",20,5e3],Vc);this.context.lastGetMetaDataTime=Date.now();var R=this.incGetSeq();return _.forEach(function(M){M.sendPacket("StateGet",{target:p,subTarget:"",lock:"",sequence:R,flags:D.fromNumber(0),lockRev:D.fromNumber(0)})}),bb.apply(void 0,[t.genTimeoutError(cd)].concat(ra(_.map(function(M){return M.fromReceived("StateGetResult").pipe(La(function(P){return R.eq(P.sequence)}),Wa(function(P){var F=P.code;if(P=P.allStates,ud(F)!==bd)throw new Pa(["Get metaData failure. The response code from the RTM service is %d",F],He);return P}))}))))}},{key:"requestDeleteChannelAttributesByKeys",value:function(p,_,R){var M=this.getLoginSockets();if(0===M.length)throw new ia("Client is not logged in");var P=this.incGetSeq();return M.forEach(function(F){F.sendPacket("GroupAttributeDel",{group:p,broadcast:R,attributes:_,seq:P})}),bb.apply(void 0,ra(M.map(function(F){return F.fromReceived("GroupAttributeErr").pipe(La(function(G){return P.eq(G.seq)}),Wa(function(G){throw new Pa(["The channel attributes delete failure, code %d",G.code],Ad)}))})).concat([t.genTimeoutError(Bd)],ra(M.map(function(F){return F.fromReceived("GroupAttributeRsp").pipe(La(function(G){return P.eq(G.seq)}))}))))}},{key:"requestClearLocalUserAttributes",value:function(){var p=this,_=this.getLoginSockets();if(0===_.length)throw new ia("Client is not logged in");var R=this.incGetSeq();return _.forEach(function(M){M.sendPacket("UserAttributeSet",{account:p.context.uid,seq:R,attributeInfos:[]})}),bb.apply(void 0,ra(_.map(function(M){return M.fromReceived("UserAttributeErr").pipe(La(function(P){return R.eq(P.seq)}),Wa(function(P){throw new Pa(["The user attributes clear failure, code %d",P.code],Ad)}))})).concat([t.genTimeoutError(Bd)],ra(_.map(function(M){return M.fromReceived("UserAttributeRsp").pipe(La(function(P){return R.eq(P.seq)}))}))))}},{key:"requestClearChannelAttributes",value:function(p,_){var R=this.getLoginSockets();if(0===R.length)throw new ia("Client is not logged in");var M=this.incGetSeq();return R.forEach(function(P){P.sendPacket("GroupAttributeSet",{group:p,seq:M,attributeInfos:[],broadcast:_})}),bb.apply(void 0,ra(R.map(function(P){return P.fromReceived("GroupAttributeErr").pipe(La(function(F){return M.eq(F.seq)}),Wa(function(F){throw new Pa(["The channel attributes clear failure, code %d",F.code],Ad)}))})).concat([t.genTimeoutError(Bd)],ra(R.map(function(P){return P.fromReceived("GroupAttributeRsp").pipe(La(function(F){return M.eq(F.seq)}))}))))}},{key:"requestAddChannelMetadata",value:function(p){var _=this,R=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{majorRevision:-1,enableRecordTs:!1,enableRecordUserId:!1},M=2<arguments.length?arguments[2]:void 0,P=this.getLoginSockets();if(0===P.length)throw new ia("Client is not logged in");if(R.majorRevision&&(-1>R.majorRevision||R.majorRevision%1!=0))throw new ja("MajorRevision should be set to a value greater than  -1",Mb);if(nf({items:p,maxMetaDataCount:32,maxMetaValueSize:16384,type:"Add"}),void 0!==this.context.lastModifyMeteDataTime&&250>Date.now()-this.context.lastModifyMeteDataTime)throw new Fc(["The frequency of metedata operation exceeded the limit of %d queries per %d second",20,5e3],Vc);this.context.lastModifyMeteDataTime=Date.now();var F=this.incGetSeq(),G=JSON.stringify(pf(Pd.cloneDeep(p).map(function(we){return we.setRevision(0),we}),R.majorRevision)),z=Date.now();return P.forEach(function(we){we.sendPacket("StateModify",{sequence:F,target:M,requestUuid:"".concat(F,"_").concat(_.instanceId),lock:"",lockRev:D.fromNumber(0),value:G,baseRevision:D.fromNumber(0),author:R.enableRecordUserId?_.context.uid:"",flags:new D(R.enableRecordTs?524289:1,0,!0)})}),bb.apply(void 0,[t.genTimeoutError(cd)].concat(ra(P.map(function(we){return we.fromReceived("StateRequestResult").pipe(La(function(xe){return F.eq(xe.sequence)}),Wa(function(xe){var _n,fa,da=ud(xe=xe.code);if($a("SyncOperateEvent",{lts:D.fromNumber(Date.now()),userid:_.context.uid,vid:D.fromString(null!==(_n=_.context.vid)&&void 0!==_n?_n:"0"),sid:"",usersid:_.context.sid,requestts:D.fromNumber(z),replyts:D.fromNumber(Date.now()),target:M,eventtype:"Add",revision:D.fromNumber(0),uuid:"".concat(F,"_").concat(_.instanceId),sdktype:3,flags:new D(R.enableRecordTs?524289:1,0,!0),code:da,seq:F,index:{index1:M,index2:_.context.appId,index3:"enableLogUpload=".concat(_.context.config.enableLogUpload)},lock:"",lockrev:D.fromNumber(0),subtarget:_.context.uid},null!==(fa=_.context.config.enableCloudProxy)&&void 0!==fa&&fa),da!==bd)throw new Pa(["MetaData modify failure. The response code from the RTM service is %d",xe],da)}))}))))}},{key:"requestUpdateChannelMetadata",value:function(p){var _=this,R=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{majorRevision:-1,enableRecordTs:!1,enableRecordUserId:!1},M=2<arguments.length?arguments[2]:void 0,P=this.getLoginSockets();if(0===P.length)throw new ia("Client is not logged in");if(R.majorRevision&&(-1>R.majorRevision||R.majorRevision%1!=0))throw new ja("MajorRevision should be set to a value greater than  -1",Mb);if(0===R.majorRevision)throw new ja("MajorRevision can not be set to 0",of);if(nf({items:p,maxMetaDataCount:32,maxMetaValueSize:16384,type:"Update"}),void 0!==this.context.lastModifyMeteDataTime&&250>Date.now()-this.context.lastModifyMeteDataTime)throw new Fc(["The frequency of metedata operation exceeded the limit of %d queries per %d second",20,5e3],Vc);this.context.lastModifyMeteDataTime=Date.now();var F=this.incGetSeq(),G=JSON.stringify(pf(Pd.cloneDeep(p).map(function(we){return-1===we.getRevision()&&we.setRevision(-2),we}),R.majorRevision)),z=Date.now();return P.forEach(function(we){we.sendPacket("StateModify",{sequence:F,target:M,requestUuid:"".concat(F,"_").concat(_.instanceId),lock:"",lockRev:D.fromNumber(0),value:G,baseRevision:D.fromNumber(0),author:R.enableRecordUserId?_.context.uid:"",flags:new D(R.enableRecordTs?524289:1,0,!0)})}),bb.apply(void 0,[t.genTimeoutError(cd)].concat(ra(P.map(function(we){return we.fromReceived("StateRequestResult").pipe(La(function(xe){return F.eq(xe.sequence)}),Wa(function(xe){var _n,fa,da=ud(xe=xe.code);if($a("SyncOperateEvent",{lts:D.fromNumber(Date.now()),userid:_.context.uid,vid:D.fromString(null!==(_n=_.context.vid)&&void 0!==_n?_n:"0"),sid:"",usersid:_.context.sid,requestts:D.fromNumber(z),replyts:D.fromNumber(Date.now()),target:M,eventtype:"Update",revision:D.fromNumber(0),uuid:"".concat(F,"_").concat(_.instanceId),sdktype:3,flags:new D(R.enableRecordTs?524289:1,0,!0),code:da,seq:F,index:{index1:_.context.uid,index2:_.context.appId,index3:"enableLogUpload=".concat(_.context.config.enableLogUpload)},lock:"",lockrev:D.fromNumber(0),subtarget:_.context.uid},null!==(fa=_.context.config.enableCloudProxy)&&void 0!==fa&&fa),da!==bd)throw new Pa(["MetaData modify failure. The response code from the RTM service is %d",xe],da)}))}))))}},{key:"requestDeleteChannelMetadata",value:function(p){var _=this,R=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{majorRevision:-1,enableRecordTs:!1,enableRecordUserId:!1},M=2<arguments.length?arguments[2]:void 0,P=this.getLoginSockets();if(0===P.length)throw new ia("Client is not logged in");if(R.majorRevision&&(-1>R.majorRevision||R.majorRevision%1!=0))throw new ja("MajorRevision should be set to a value greater than  -1",Mb);if(0===R.majorRevision)throw new ja("MajorRevision can not be set to 0",of);if(nf({items:p,maxMetaDataCount:32,maxMetaValueSize:16384,type:"Delete"}),void 0!==this.context.lastModifyMeteDataTime&&250>Date.now()-this.context.lastModifyMeteDataTime)throw new Fc(["The frequency of metedata operation exceeded the limit of %d queries per %d second",20,5e3],Vc);this.context.lastModifyMeteDataTime=Date.now();var F=this.incGetSeq(),G=JSON.stringify(pf(Pd.cloneDeep(p).map(function(we){return we.setValue(null),we}),R.majorRevision)),z=Date.now();return P.forEach(function(we){we.sendPacket("StateModify",{sequence:F,target:M,requestUuid:"".concat(F,"_").concat(_.instanceId),lock:"",lockRev:D.fromNumber(0),value:G,baseRevision:D.fromNumber(0),author:R.enableRecordUserId?_.context.uid:"",flags:new D(R.enableRecordTs?524289:1,0,!0)})}),bb.apply(void 0,[t.genTimeoutError(cd)].concat(ra(P.map(function(we){return we.fromReceived("StateRequestResult").pipe(La(function(xe){return F.eq(xe.sequence)}),Wa(function(xe){var _n,fa,da=ud(xe=xe.code);if($a("SyncOperateEvent",{lts:D.fromNumber(Date.now()),userid:_.context.uid,vid:D.fromString(null!==(_n=_.context.vid)&&void 0!==_n?_n:"0"),sid:"",usersid:_.context.sid,requestts:D.fromNumber(z),replyts:D.fromNumber(Date.now()),target:M,eventtype:"Delete",revision:D.fromNumber(0),uuid:"".concat(F,"_").concat(_.instanceId),sdktype:3,flags:new D(R.enableRecordTs?524289:1,0,!0),code:da,seq:F,index:{index1:_.context.uid,index2:_.context.appId,index3:"enableLogUpload=".concat(_.context.config.enableLogUpload)},lock:"",lockrev:D.fromNumber(0),subtarget:_.context.uid},null!==(fa=_.context.config.enableCloudProxy)&&void 0!==fa&&fa),da!==bd)throw new Pa(["MetaData modify failure. The response code from the RTM service is %d",xe],He)}))}))))}},{key:"requestSetChannelMetadata",value:function(p){var _=this,R=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{majorRevision:-1,enableRecordTs:!1,enableRecordUserId:!1},M=2<arguments.length?arguments[2]:void 0,P=this.getLoginSockets();if(0===P.length)throw new ia("Client is not logged in");if(R.majorRevision&&(-1>R.majorRevision||R.majorRevision%1!=0))throw new ja("MajorRevision should be set to a value greater than  -1",Mb);if(nf({items:p,maxMetaDataCount:32,maxMetaValueSize:16384,type:"Set"}),void 0!==this.context.lastModifyMeteDataTime&&250>Date.now()-this.context.lastModifyMeteDataTime)throw new Fc(["The frequency of metedata operation exceeded the limit of %d queries per %d second",20,5e3],Vc);this.context.lastModifyMeteDataTime=Date.now();var F=this.incGetSeq(),G=Date.now();return P.forEach(function(z){z.sendPacket("StateSet",{sequence:F,target:M,requestUuid:"".concat(F,"_").concat(_.instanceId),value:JSON.stringify(pf(p,R.majorRevision)),lock:"",lockRev:D.fromNumber(0),baseRevision:D.fromNumber(0),author:R.enableRecordUserId?_.context.uid:"",flags:new D(R.enableRecordTs?524289:1,0,!0)})}),bb.apply(void 0,[t.genTimeoutError(cd)].concat(ra(P.map(function(z){return z.fromReceived("StateRequestResult").pipe(La(function(we){return F.eq(we.sequence)}),Wa(function(we){var xe,_n,fa=ud(we=we.code);if($a("SyncOperateEvent",{lts:D.fromNumber(Date.now()),userid:_.context.uid,vid:D.fromString(null!==(xe=_.context.vid)&&void 0!==xe?xe:"0"),sid:"",usersid:_.context.sid,requestts:D.fromNumber(G),replyts:D.fromNumber(Date.now()),target:M,eventtype:"Set",revision:D.fromNumber(0),uuid:"".concat(F,"_").concat(_.instanceId),sdktype:3,flags:new D(R.enableRecordTs?524289:1,0,!0),code:fa,seq:F,index:{index1:_.context.uid,index2:_.context.appId,index3:"enableLogUpload=".concat(_.context.config.enableLogUpload)},lock:"",lockrev:D.fromNumber(0),subtarget:_.context.uid},null!==(_n=_.context.config.enableCloudProxy)&&void 0!==_n&&_n),fa!==bd)throw new Pa(["MetaData modify failure. The response code from the RTM service is %d",we],fa)}))}))))}},{key:"requestClearChannelMetadata",value:function(){var p=this,_=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{majorRevision:-1,enableRecordTs:!1,enableRecordUserId:!1},R=1<arguments.length?arguments[1]:void 0,M=this.getLoginSockets();if(0===M.length)throw new ia("Client is not logged in");if(_.majorRevision&&-1>_.majorRevision&&_.majorRevision%1==0)throw new ja("MajorRevision should be set to a value greater than  -1",Mb);if(0===_.majorRevision)throw new ja("MajorRevision can not be set to 0",of);if(void 0!==this.context.lastModifyMeteDataTime&&250>Date.now()-this.context.lastModifyMeteDataTime)throw new Fc(["The frequency of metedata operation exceeded the limit of %d queries per %d second",20,5e3],Vc);this.context.lastModifyMeteDataTime=Date.now();var P=this.incGetSeq(),F=Date.now();return M.forEach(function(G){G.sendPacket("StateSet",{sequence:P,target:R,requestUuid:"".concat(P,"_").concat(p.instanceId),lock:"",lockRev:D.fromNumber(0),value:JSON.stringify({}),baseRevision:D.fromNumber(0),author:_.enableRecordUserId?p.context.uid:"",flags:new D(_.enableRecordTs?589825:65537,0,!0)})}),bb.apply(void 0,[t.genTimeoutError(cd)].concat(ra(M.map(function(G){return G.fromReceived("StateRequestResult").pipe(La(function(z){return P.eq(z.sequence)}),Wa(function(z){var we,xe,_n=ud(z=z.code);if($a("SyncOperateEvent",{lts:D.fromNumber(Date.now()),userid:p.context.uid,vid:D.fromString(null!==(we=p.context.vid)&&void 0!==we?we:"0"),sid:"",usersid:p.context.sid,requestts:D.fromNumber(F),replyts:D.fromNumber(Date.now()),target:R,eventtype:"Clear",revision:D.fromNumber(0),uuid:"".concat(P,"_").concat(p.instanceId),sdktype:3,flags:new D(_.enableRecordTs?589825:65537,0,!0),code:_n,seq:P,index:{index1:p.context.uid,index2:p.context.appId,index3:"enableLogUpload=".concat(p.context.config.enableLogUpload)},lock:"",lockrev:D.fromNumber(0),subtarget:p.context.uid},null!==(xe=p.context.config.enableCloudProxy)&&void 0!==xe&&xe),_n!==bd)throw new Pa(["MetaData modify failure. The response code from the RTM service is %d",z],_n)}))}))))}},{key:"requestAddLocalMetadata",value:function(p){var _=this,R=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{majorRevision:-1,enableRecordTs:!1,enableRecordUserId:!1},M=this.getLoginSockets();if(0===M.length)throw new ia("Client is not logged in");if(R.majorRevision&&(-1>R.majorRevision||R.majorRevision%1!=0))throw new ja("MajorRevision should be set to a value greater than  -1",Mb);if(nf({items:p,maxMetaDataCount:32,maxMetaValueSize:16384,type:"Add"}),void 0!==this.context.lastModifyMeteDataTime&&250>Date.now()-this.context.lastModifyMeteDataTime)throw new Fc(["The frequency of metedata operation exceeded the limit of %d queries per %d second",20,5e3],Vc);this.context.lastModifyMeteDataTime=Date.now();var P=this.incGetSeq(),F=JSON.stringify(pf(Pd.cloneDeep(p).map(function(z){return z.setRevision(0),z}),R.majorRevision)),G=Date.now();return M.forEach(function(z){z.sendPacket("StateModify",{sequence:P,target:_.context.uid,requestUuid:"".concat(P,"_").concat(_.instanceId),lock:"",lockRev:D.fromNumber(0),value:F,baseRevision:D.fromNumber(0),author:R.enableRecordUserId?_.context.uid:"",flags:R.enableRecordTs?new D(524288,0,!0):D.fromNumber(0)})}),bb.apply(void 0,[t.genTimeoutError(cd)].concat(ra(M.map(function(z){return z.fromReceived("StateRequestResult").pipe(La(function(we){return P.eq(we.sequence)}),Ka(function(we){var xe,_n,fa=ud(we=we.code);if($a("SyncOperateEvent",{lts:D.fromNumber(Date.now()),userid:_.context.uid,vid:D.fromString(null!==(xe=_.context.vid)&&void 0!==xe?xe:"0"),sid:"",usersid:_.context.sid,requestts:D.fromNumber(G),replyts:D.fromNumber(Date.now()),target:_.context.uid,eventtype:"Add",revision:D.fromNumber(0),uuid:"".concat(P,"_").concat(_.instanceId),sdktype:3,flags:R.enableRecordTs?new D(524288,0,!0):D.fromNumber(0),code:fa,seq:P,index:{index1:_.context.uid,index2:_.context.appId,index3:"enableLogUpload=".concat(_.context.config.enableLogUpload)},lock:"",lockrev:D.fromNumber(0),subtarget:_.context.uid},null!==(_n=_.context.config.enableCloudProxy)&&void 0!==_n&&_n),fa!==bd)throw new Pa(["MetaData modify failure. The response code from the RTM service is %d",we],fa)}))}))))}},{key:"requestUpdateLocalMetadata",value:function(p){var _=this,R=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{majorRevision:-1,enableRecordTs:!1,enableRecordUserId:!1},M=this.getLoginSockets();if(0===M.length)throw new ia("Client is not logged in");if(R.majorRevision&&(-1>R.majorRevision||R.majorRevision%1!=0))throw new ja("MajorRevision should be set to a value greater than  -1",Mb);if(0===R.majorRevision)throw new ja("MajorRevision can not be set to 0",of);if(nf({items:p,maxMetaDataCount:32,maxMetaValueSize:16384,type:"Update"}),void 0!==this.context.lastModifyMeteDataTime&&250>Date.now()-this.context.lastModifyMeteDataTime)throw new Fc(["The frequency of metedata operation exceeded the limit of %d queries per %d second",20,5e3],Vc);this.context.lastModifyMeteDataTime=Date.now();var P=this.incGetSeq(),F=JSON.stringify(pf(Pd.cloneDeep(p).map(function(z){return-1===z.getRevision()&&z.setRevision(-2),z}),R.majorRevision)),G=Date.now();return M.forEach(function(z){z.sendPacket("StateModify",{sequence:P,target:_.context.uid,requestUuid:"".concat(P,"_").concat(_.instanceId),lock:"",lockRev:D.fromNumber(0),value:F,baseRevision:D.fromNumber(0),author:R.enableRecordUserId?_.context.uid:"",flags:R.enableRecordTs?new D(524288,0,!0):D.fromNumber(0)})}),bb.apply(void 0,[t.genTimeoutError(cd)].concat(ra(M.map(function(z){return z.fromReceived("StateRequestResult").pipe(La(function(we){return P.eq(we.sequence)}),Ka(function(we){var xe,_n,fa=ud(we=we.code);if($a("SyncOperateEvent",{lts:D.fromNumber(Date.now()),userid:_.context.uid,vid:D.fromString(null!==(xe=_.context.vid)&&void 0!==xe?xe:"0"),sid:"",usersid:_.context.sid,requestts:D.fromNumber(G),replyts:D.fromNumber(Date.now()),target:_.context.uid,eventtype:"Update",revision:D.fromNumber(0),uuid:"".concat(P,"_").concat(_.instanceId),sdktype:3,flags:R.enableRecordTs?new D(524288,0,!0):D.fromNumber(0),code:fa,seq:P,index:{index1:_.context.uid,index2:_.context.appId,index3:"enableLogUpload=".concat(_.context.config.enableLogUpload)},lock:"",lockrev:D.fromNumber(0),subtarget:_.context.uid},null!==(_n=_.context.config.enableCloudProxy)&&void 0!==_n&&_n),fa!==bd)throw new Pa(["MetaData modify failure. The response code from the RTM service is %d",we],fa)}))}))))}},{key:"requestDeleteLocalMetadata",value:function(p){var _=this,R=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{majorRevision:-1,enableRecordTs:!1,enableRecordUserId:!1},M=this.getLoginSockets();if(0===M.length)throw new ia("Client is not logged in");if(R.majorRevision&&(-1>R.majorRevision||R.majorRevision%1!=0))throw new ja("MajorRevision should be set to a value greater than  -1",Mb);if(0===R.majorRevision)throw new ja("MajorRevision can not be set to 0",of);if(nf({items:p,maxMetaDataCount:32,maxMetaValueSize:16384,type:"Delete"}),void 0!==this.context.lastModifyMeteDataTime&&250>Date.now()-this.context.lastModifyMeteDataTime)throw new Fc(["The frequency of metedata operation exceeded the limit of %d queries per %d second",20,5e3],Vc);this.context.lastModifyMeteDataTime=Date.now();var P=this.incGetSeq(),F=JSON.stringify(pf(Pd.cloneDeep(p).map(function(z){return z.setValue(null),z}),R.majorRevision)),G=Date.now();return M.forEach(function(z){z.sendPacket("StateModify",{sequence:P,target:_.context.uid,requestUuid:"".concat(P,"_").concat(_.instanceId),lock:"",lockRev:D.fromNumber(0),value:F,baseRevision:D.fromNumber(0),author:R.enableRecordUserId?_.context.uid:"",flags:R.enableRecordTs?new D(524288,0,!0):D.fromNumber(0)})}),bb.apply(void 0,[t.genTimeoutError(cd)].concat(ra(M.map(function(z){return z.fromReceived("StateRequestResult").pipe(La(function(we){return P.eq(we.sequence)}),Ka(function(we){var xe,_n,fa=ud(we=we.code);if($a("SyncOperateEvent",{lts:D.fromNumber(Date.now()),userid:_.context.uid,vid:D.fromString(null!==(xe=_.context.vid)&&void 0!==xe?xe:"0"),sid:"",usersid:_.context.sid,requestts:D.fromNumber(G),replyts:D.fromNumber(Date.now()),target:_.context.uid,eventtype:"Delete",revision:D.fromNumber(0),uuid:"".concat(P,"_").concat(_.instanceId),sdktype:3,flags:R.enableRecordTs?new D(524288,0,!0):D.fromNumber(0),code:fa,seq:P,index:{index1:_.context.uid,index2:_.context.appId,index3:"enableLogUpload=".concat(_.context.config.enableLogUpload)},lock:"",lockrev:D.fromNumber(0),subtarget:_.context.uid},null!==(_n=_.context.config.enableCloudProxy)&&void 0!==_n&&_n),fa!==bd)throw new Pa(["MetaData modify failure. The response code from the RTM service is %d",we],fa)}))}))))}},{key:"requestSetLocalMetadata",value:function(p){var _=this,R=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{majorRevision:-1,enableRecordTs:!1,enableRecordUserId:!1},M=this.getLoginSockets();if(0===M.length)throw new ia("Client is not logged in");if(R.majorRevision&&(-1>R.majorRevision||R.majorRevision%1!=0))throw new ja("MajorRevision should be set to a value greater than  -1",Mb);if(nf({items:p,maxMetaDataCount:32,maxMetaValueSize:16384,type:"Set"}),void 0!==this.context.lastModifyMeteDataTime&&250>Date.now()-this.context.lastModifyMeteDataTime)throw new Fc(["The frequency of metedata operation exceeded the limit of %d queries per %d second",20,5e3],Vc);this.context.lastModifyMeteDataTime=Date.now();var P=this.incGetSeq(),F=Date.now();return M.forEach(function(G){G.sendPacket("StateSet",{sequence:P,target:_.context.uid,requestUuid:"".concat(P,"_").concat(_.instanceId),value:JSON.stringify(pf(p,R.majorRevision)),lock:"",lockRev:D.fromNumber(0),baseRevision:D.fromNumber(0),author:R.enableRecordUserId?_.context.uid:"",flags:new D(R.enableRecordTs?524288:0,0,!0)})}),bb.apply(void 0,[t.genTimeoutError(cd)].concat(ra(M.map(function(G){return G.fromReceived("StateRequestResult").pipe(La(function(z){return P.eq(z.sequence)}),Ka(function(z){var we,xe,_n=ud(z=z.code);if($a("SyncOperateEvent",{lts:D.fromNumber(Date.now()),userid:_.context.uid,vid:D.fromString(null!==(we=_.context.vid)&&void 0!==we?we:"0"),sid:"",usersid:_.context.sid,requestts:D.fromNumber(F),replyts:D.fromNumber(Date.now()),target:_.context.uid,eventtype:"Set",revision:D.fromNumber(0),uuid:"".concat(P,"_").concat(_.instanceId),sdktype:3,flags:R.enableRecordTs?new D(524288,0,!0):D.fromNumber(0),code:_n,seq:P,index:{index1:_.context.uid,index2:_.context.appId,index3:"enableLogUpload=".concat(_.context.config.enableLogUpload)},lock:"",lockrev:D.fromNumber(0),subtarget:_.context.uid},null!==(xe=_.context.config.enableCloudProxy)&&void 0!==xe&&xe),_n!==bd)throw new Pa(["MetaData modify failure. The response code from the RTM service is %d",z],_n)}))}))))}},{key:"requestClearLocalMetadata",value:function(){var p=this,_=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{majorRevision:-1,enableRecordTs:!1,enableRecordUserId:!1},R=this.getLoginSockets();if(0===R.length)throw new ia("Client is not logged in");if(_.majorRevision&&(-1>_.majorRevision||_.majorRevision%1!=0))throw new ja("MajorRevision should be set to a value greater than  -1",Mb);if(0===_.majorRevision)throw new ja("MajorRevision can not be set to 0",of);if(void 0!==this.context.lastModifyMeteDataTime&&250>Date.now()-this.context.lastModifyMeteDataTime)throw new Fc(["The frequency of metedata operation exceeded the limit of %d queries per %d second",20,5e3],Vc);this.context.lastModifyMeteDataTime=Date.now();var M=this.incGetSeq(),P=Date.now();return R.forEach(function(F){F.sendPacket("StateSet",{sequence:M,target:p.context.uid,requestUuid:"".concat(M,"_").concat(p.instanceId),lock:"",lockRev:D.fromNumber(0),value:JSON.stringify({}),baseRevision:D.fromNumber(0),author:_.enableRecordUserId?p.context.uid:"",flags:new D(_.enableRecordTs?589824:65536,0,!0)})}),bb.apply(void 0,[t.genTimeoutError(cd)].concat(ra(R.map(function(F){return F.fromReceived("StateRequestResult").pipe(La(function(G){return M.eq(G.sequence)}),Ka(function(G){var z,we,xe=ud(G=G.code);if($a("SyncOperateEvent",{lts:D.fromNumber(Date.now()),userid:p.context.uid,vid:D.fromString(null!==(z=p.context.vid)&&void 0!==z?z:"0"),sid:"",usersid:p.context.sid,requestts:D.fromNumber(P),replyts:D.fromNumber(Date.now()),target:p.context.uid,eventtype:"Clear",revision:D.fromNumber(0),uuid:"".concat(M,"_").concat(p.instanceId),sdktype:3,flags:_.enableRecordTs?new D(524288,0,!0):D.fromNumber(0),code:xe,seq:M,index:{index1:p.context.uid,index2:p.context.appId,index3:"enableLogUpload=".concat(p.context.config.enableLogUpload)},lock:"",lockrev:D.fromNumber(0),subtarget:p.context.uid},null!==(we=p.context.config.enableCloudProxy)&&void 0!==we&&we),xe!==bd)throw new Pa(["MetaData modify failure. The response code from the RTM service is %d",G],xe)}))}))))}},{key:"requestSubscribeUserMetadata",value:function(p,_){var R=this,M=this.getLoginSockets();if(0===M.length)throw new ia("Client is not logged in");if(void 0!==this.context.lastSubscribeMetaDataTime&&500>Date.now()-this.context.lastSubscribeMetaDataTime)throw new Fc(["The frequency of subscription metedata exceeded the limit of %d queries per %d second",10,5e3],Vc);this.context.lastSubscribeMetaDataTime=Date.now();var P=this.incGetSeq(),F=Date.now();return M.forEach(function(G){G.sendPacket("StateSubscribe",{sequence:P,target:p,subTarget:"",flags:D.fromNumber(0)})}),bb.apply(void 0,[t.genTimeoutErrorWithoutNotice(cl,void 0,_)].concat(ra(M.map(function(G){return G.fromReceived("StateSubscribeResult").pipe(La(function(z){return P.eq(z.sequence)}),Ka(function(z){var we,xe,_n=Pw;if(0!==(z=z.code)&&1!==z&&(_n=100===z?cl:lp),_n!==Pw)throw new Pa(["User metaData Subscribe failure. The response code from the RTM service is %d",z],_n);"RECONNECTED"!==_&&void 0===R.lastUserMeteUpdateRecord[p]&&(R.lastUserMeteUpdateRecord[p]=-1),$a("SyncSubscribeEvent",{lts:D.fromNumber(Date.now()),userid:R.context.uid,vid:D.fromString(null!==(we=R.context.vid)&&void 0!==we?we:"0"),sid:"",usersid:R.context.sid,target:p,requestts:D.fromNumber(F),replyts:D.fromNumber(Date.now()),eventtype:"Subscribe",sdktype:3,flags:D.fromNumber(0),code:0,seq:P,index:{index1:R.context.uid,index2:R.context.appId,index3:"enableLogUpload=".concat(R.context.config.enableLogUpload)},subtarget:R.context.uid},null!==(xe=R.context.config.enableCloudProxy)&&void 0!==xe&&xe)}))}))))}},{key:"requestUnsubscribeUserMetadata",value:function(p){var _,R,M=this.getLoginSockets();if(0===M.length)throw new ia("Client is not logged in");var P=this.incGetSeq(),F=Date.now();M.forEach(function(G){G.sendPacket("StateUnsubscribe",{sequence:P,target:p,subTarget:"",flags:D.fromNumber(0)})}),delete this.lastUserMeteUpdateRecord[p],$a("SyncSubscribeEvent",{lts:D.fromNumber(Date.now()),userid:this.context.uid,vid:D.fromString(null!==(_=this.context.vid)&&void 0!==_?_:"0"),sid:"",usersid:this.context.sid,target:p,requestts:D.fromNumber(F),replyts:D.fromNumber(Date.now()),eventtype:"UnSubscribe",sdktype:3,flags:D.fromNumber(0),code:0,seq:P,index:{index1:this.context.uid,index2:this.context.appId,index3:"enableLogUpload=".concat(this.context.config.enableLogUpload)},subtarget:this.context.uid},null!==(R=this.context.config.enableCloudProxy)&&void 0!==R&&R)}},{key:"requestUnsubscribeChannelMetadata",value:function(p){var _,R,M=this.getLoginSockets();if(0===M.length)throw new ia("Client is not logged in");var P=this.incGetSeq();M.forEach(function(F){F.sendPacket("StateUnsubscribe",{sequence:P,target:p,subTarget:"",flags:new D(1,0,!0)})}),delete this.lastChannelMetaUpdateRecord[p],$a("SyncSubscribeEvent",{lts:D.fromNumber(Date.now()),userid:this.context.uid,vid:D.fromString(null!==(_=this.context.vid)&&void 0!==_?_:"0"),sid:"",usersid:this.context.sid,target:p,requestts:D.fromNumber(Date.now()),replyts:D.fromNumber(Date.now()),eventtype:"UnSubscribe",sdktype:3,flags:new D(1,0,!0),code:0,seq:P,index:{index1:this.context.uid,index2:this.context.appId,index3:"enableLogUpload=".concat(this.context.config.enableLogUpload)},subtarget:this.context.uid},null!==(R=this.context.config.enableCloudProxy)&&void 0!==R&&R)}},{key:"requestSubscribeChannelMetadata",value:function(p,_){var R=this,M=this.getLoginSockets();if(0===M.length)throw new ia("Client is not logged in");if(void 0!==this.context.lastSubscribeMetaDataTime&&500>Date.now()-this.context.lastSubscribeMetaDataTime)throw new Fc(["The frequency of subscription metedata exceeded the limit of %d queries per %d second",10,5e3],Vc);var P=this.incGetSeq(),F=Date.now();return M.forEach(function(G){G.sendPacket("StateSubscribe",{sequence:P,target:p,subTarget:"",flags:new D(1,0,!0)})}),bb.apply(void 0,[t.genTimeoutError(cl)].concat(ra(M.map(function(G){return G.fromReceived("StateSubscribeResult").pipe(La(function(z){return P.eq(z.sequence)}),Ka(function(z){var we,xe;if(0!==(z=z.code)&&1!==z)throw new Pa(["MetaData Subscribe failure. The response code from the RTM service is %d",z],100===z?cl:lp);"JOIN"===_&&(R.lastChannelMetaUpdateRecord[p]=-1),$a("SyncSubscribeEvent",{lts:D.fromNumber(Date.now()),userid:R.context.uid,vid:D.fromString(null!==(we=R.context.vid)&&void 0!==we?we:"0"),sid:"",usersid:R.context.sid,target:p,requestts:D.fromNumber(F),replyts:D.fromNumber(Date.now()),eventtype:"Subscribe",sdktype:3,flags:D.fromNumber(0),code:z,seq:P,index:{index1:R.context.uid,index2:R.context.appId,index3:"enableLogUpload=".concat(R.context.config.enableLogUpload)},subtarget:R.context.uid},null!==(xe=R.context.config.enableCloudProxy)&&void 0!==xe&&xe)}))}))))}},{key:"requestGetUserAttributesByKeys",value:function(p,_){var R=this.getLoginSockets();if(0===R.length)throw new ia("Client is not logged in");var M=this.incGetSeq();return R.forEach(function(P){P.sendPacket("UserAttributeGet",{account:p,seq:M,attributes:_})}),bb.apply(void 0,[t.genTimeoutError(Bd)].concat(ra(R.map(function(P){return P.fromReceived("UserAttributeErr").pipe(La(function(F){return M.eq(F.seq)}),Wa(function(F){throw 10008===(F=F.code)?new Pa("The user requested is not online",qw):new id(["User attribute operation unknown error code: %d",F],Ad)}))})),ra(R.map(function(P){return P.fromReceived("UserAttributeRet").pipe(La(function(F){return M.eq(F.seq)}))}))))}},{key:"requestGetChannelAttributesByKeys",value:function(p,_){var R=this.getLoginSockets();if(0===R.length)throw new ia("Client is not logged in");var M=this.incGetSeq();return R.forEach(function(P){P.sendPacket("GroupAttributeGet",{group:p,seq:M,attributes:_})}),bb.apply(void 0,[t.genTimeoutError(Bd)].concat(ra(R.map(function(P){return P.fromReceived("GroupAttributeErr").pipe(La(function(F){return M.eq(F.seq)}),Wa(function(F){throw new Pa(["The channel attributes get failure, code %d",F.code],Ad)}))})),ra(R.map(function(P){return P.fromReceived("GroupAttributeRet").pipe(La(function(F){return M.eq(F.seq)}))}))))}},{key:"requestGetUserAttributeKeys",value:function(p){var _=this.getLoginSockets();if(0===_.length)throw new ia("Client is not logged in");var R=this.incGetSeq();return _.forEach(function(M){M.sendPacket("UserAttributeKeysGet",{account:p,seq:R})}),bb.apply(void 0,[t.genTimeoutError(Bd)].concat(ra(_.map(function(M){return M.fromReceived("UserAttributeErr").pipe(La(function(P){return R.eq(P.seq)}),Wa(function(P){throw 10008===(P=P.code)?new Pa("The user requested is not online",qw):new id(["User attribute operation unknown error code: %d",P],Ad)}))})),ra(_.map(function(M){return M.fromReceived("UserAttributeKeysRet").pipe(La(function(P){return R.eq(P.seq)}))}))))}},{key:"requestGetChannelAttributesKeys",value:function(p){var _=this.getLoginSockets();if(0===_.length)throw new ia("Client is not logged in");var R=this.incGetSeq();return _.forEach(function(M){M.sendPacket("GroupAttributeKeysGet",{group:p,seq:R})}),bb.apply(void 0,[t.genTimeoutError(Bd)].concat(ra(_.map(function(M){return M.fromReceived("GroupAttributeErr").pipe(La(function(P){return R.eq(P.seq)}),Wa(function(P){throw new id(["Channel attribute operation unknown error code: %d",P.code],Ad)}))})),ra(_.map(function(M){return M.fromReceived("GroupAttributeKeysRet").pipe(La(function(P){return R.eq(P.seq)}))}))))}},{key:"requestGetChannelMemberCount",value:function(p){var _=this.getLoginSockets();if(0===_.length)throw new ia("Client is not logged in");var R=this.incGetSeq();return _.forEach(function(M){M.sendPacket("GroupStatusList",{groups:p,seq:R})}),bb.apply(void 0,[t.genTimeoutError(uw)].concat(ra(_.map(function(M){return M.fromReceived("GroupStatusResult").pipe(La(function(P){return R.eq(P.seq)}))}))))}},{key:"requestSubscribePeersOnlineStatus",value:function(p){var _=this.getLoginSockets();if(0===_.length)throw new ia("Client is not logged in");var R=this.incGetSeq();return _.forEach(function(M){M.sendPacket("SubscribeUserStatus",{seq:R,users:p})}),bb.apply(void 0,[t.genTimeoutError(NI)].concat(ra(_.map(function(M){return M.fromReceived("SubscribeResponse").pipe(La(function(P){return R.eq(P.seq)}))}))))}},{key:"requestUnsubscribePeersOnlineStatus",value:function(p){var _=this.getLoginSockets();if(0===_.length)throw new ia("Client is not logged in");var R=this.incGetSeq();_.forEach(function(M){M.sendPacket("UnsubscribeUserStatus",{seq:R,users:p})})}},{key:"sendInvitationMessage",value:function(){var p=za(W.mark(function _(R){var M,F,G,z,we,xe,_n,fa,da,Ja=this;return W.wrap(function(rl){for(;;)switch(rl.prev=rl.next){case 0:if(M=R.peerId,F=R.extra,z=R.channelId,we=R.type,xe={callId:R.callId},void 0===(G=R.isAcceptAck)){rl.next=6;break}if("CallAccept"===we){rl.next=5;break}throw Error("invalid invitation type");case 5:xe.type=G?"ack":"request";case 6:return xe.channel=z,("CallInvite"===we||"CallCancel"===we||"CallReject"===we||"CallAccept"===we&&!1===G)&&void 0!==F&&(xe.extra=F),_n=Rj(),this.log("The sent invitation body is %o",xe),fa=function(Nl){return{MiscMap:{},sequence:D.fromNumber(1),dialogue:_n,instance:Ja.instanceId,dst:M,ms:D.fromNumber(Date.now(),!0),options:new Yh({IterationNumber:Nl,MessageType:we}).toLong(),payload:(new TextEncoder).encode(JSON.stringify(xe)),src:Ja.context.uid}},rl.next=14,ge(this.sendMessageToRetry(fa,!0)).pipe(Oc(1e4),Rb(function(Nl){return Nl instanceof ad&&Ja.warn("Send invitation timeout"),Va(Nl)})).toPromise();case 14:return rl.abrupt("return",{hasPeerReceived:0===(da=rl.sent).code,hasReSent:0!==da.retryTimes});case 18:case"end":return rl.stop()}},_,this)}));return function(_){return p.apply(this,arguments)}}()},{key:"sendRawMessage",value:function(){var p=za(W.mark(function _(R,M,P,F,G){var z,we,xe,_n,fa,da,Ta,Da,Nl,Vl=this;return W.wrap(function(xl){for(;;)switch(xl.prev=xl.next){case 0:if(z=Date.now(),we=F?vb.P2pRMsgNoOfflineFlag:vb.ChannelRMsg,yb(P)&&R instanceof Uint8Array&&"string"==typeof M){xl.next=4;break}throw new ja("The send message arguments are not valid",F?Kw:Zk);case 4:if(!(32768<R.byteLength+new Blob([M]).size)){xl.next=8;break}throw this.emit("messageCount",{messageCategory:we,type:"common",key:"sentcount"}),this.emit("messageCount",{messageCategory:we,type:"common",key:"invalidmessagecount"}),new Dc("The message size is over the 32KB limit",F?si:fp);case 8:return xe=!wg.getParameter("DISABLE_MESSAGE_COMPRESSION")&&128<=R.byteLength,_n=this.chatManager.getChatInfo(P),fa=_n.dialogue,da=_n.sequence,this.log('A%s %s raw message is sending to %s: "'.concat(Ta=this.instanceId,"-").concat(fa,"#").concat(da,'"'),xe?" compressed":"",F?"peer":"channel",wb(P)),Da=function(kd){return{MiscMap:{description:(new TextEncoder).encode(M)},sequence:da,dialogue:fa,instance:Ta,dst:P,ms:D.fromNumber(Date.now(),!0),options:new Yh({IterationNumber:kd,CompressionMethod:xe?"Zlib":"Uncompressed",MessageType:F?"PeerRawMessage":"ChannelRawMessage",ToCache:!1,ToArchive:!1}).toLong(),payload:xe?DA(R):R,src:Vl.context.uid}},xl.next=15,ge(this.sendMessageToRetry(Da,!0)).pipe(Oc(void 0===G?1e4:G),Rb(function(kd){return kd instanceof ad&&Vl.warn("Send message timeout"),Va(kd)})).toPromise();case 15:return Nl=0===xl.sent.code,this.emit("messageCount",{messageCategory:we,type:"common",key:"sentcount"}),Nl&&(this.emit("messageCount",{messageCategory:we,type:"common",key:"successcount"}),this.emit("messageCount",{messageCategory:we,type:F?"peer":"recipient",delay:Nb(z).toNumber()})),xl.abrupt("return",{hasPeerReceived:Nl});case 21:case"end":return xl.stop()}},_,this)}));return function(_,R,M,P,F){return p.apply(this,arguments)}}()},{key:"sendTextMessage",value:function(){var p=za(W.mark(function _(R,M,P,F){var G,z,we,xe,_n,fa,da,Ta,Da,Nl,Vl=this;return W.wrap(function(xl){for(;;)switch(xl.prev=xl.next){case 0:if(G=Date.now(),z=P?vb.P2pSMsgNoOfflineFlag:vb.ChannelSMsg,yb(M)){xl.next=4;break}throw new ja("The send message arguments are not valid",P?Kw:Zk);case 4:if(!(32768<new Blob([R]).size)){xl.next=8;break}throw this.emit("messageCount",{messageCategory:z,type:"common",key:"sentcount"}),this.emit("messageCount",{messageCategory:z,type:"common",key:"invalidmessagecount"}),new Dc("The message size is over the 32KB limit",P?si:fp);case 8:return we=!wg.getParameter("DISABLE_MESSAGE_COMPRESSION")&&128<=new Blob([R]).size,xe=this.chatManager.getChatInfo(M),_n=xe.dialogue,fa=xe.sequence,this.log('A%s %s message is sending to %s: "'.concat(da=this.instanceId,"-").concat(_n,"#").concat(fa,'"'),we?" compressed":"",P?"peer":"channel",wb(M)),Ta=(new TextEncoder).encode(R),Da=function(kd){return{MiscMap:{},sequence:fa,dialogue:_n,instance:da,dst:M,ms:D.fromNumber(Date.now(),!0),options:new Yh({IterationNumber:kd,CompressionMethod:we?"Zlib":"Uncompressed",MessageType:P?"PeerTextMessage":"ChannelTextMessage",ToCache:!1,ToArchive:!1}).toLong(),payload:we?DA(Ta):Ta,src:Vl.context.uid}},xl.next=16,ge(this.sendMessageToRetry(Da,!0)).pipe(Oc(void 0===F?1e4:F),Rb(function(kd){return kd instanceof ad&&(Vl.emit("messageCount",{messageCategory:z,type:"common",key:"sentcount"}),Vl.emit("messageCount",{messageCategory:z,type:"common",key:"timeoutcount"}),Vl.warn("Send message timeout")),Va(kd)})).toPromise();case 16:return Nl=0===xl.sent.code,this.emit("messageCount",{messageCategory:z,type:"common",key:"sentcount"}),Nl&&(this.emit("messageCount",{messageCategory:z,type:"common",key:"successcount"}),this.emit("messageCount",{messageCategory:z,type:P?"peer":"recipient",delay:Nb(G).toNumber()})),xl.abrupt("return",{hasPeerReceived:Nl});case 22:case"end":return xl.stop()}},_,this)}));return function(_,R,M,P){return p.apply(this,arguments)}}()},{key:"cleanLoginSubs",value:function(p,_){Object.entries(this.loginSocketSubs[p]).forEach(function(R){var M=(R=Lb(R,2))[1];"channels"===R[0]&&_||(Array.isArray(M)||M instanceof Map?M.forEach(function(P){return P.unsubscribe()}):M&&M.unsubscribe())}),this.loginSocketSubs[p]={channels:_?this.loginSocketSubs[p].channels:new Map,receivers:[]}}},{key:"sendMessageToRetry",value:function(){var p=za(W.mark(function _(R,M){var P,F,G,z,we,xe,_n,da,Ta=this,Da=arguments;return W.wrap(function(Ja){for(;;)switch(Ja.prev=Ja.next){case 0:if(P=2<Da.length&&void 0!==Da[2]?Da[2]:0,this.log("Attempt to send the message ".concat(M?" with retrying, %o":"without retrying"),{retryTimes:P}),0!==(F=this.getLoginSockets()).length){Ja.next=5;break}throw Error("no logged-in sockets");case 5:return G=R(P),F.forEach(function(rl){rl.sendPacket("Message",G)}),z=G.dialogue,we=G.sequence,xe=G.instance,_n=F.map(function(rl){return rl.fromReceived("Ack").pipe(sc(function(Nl){return z.eq(Nl.dialogue)&&we.eq(Nl.sequence)&&xe.eq(Nl.instance)}))}),Ja.prev=9,Ja.next=12,Nc.apply(void 0,ra(_n)).pipe(Oc(6e3),Rb(function(rl){return uc(rl)&&Ta.warn("Message send timeout, retry times %d",P),Va(rl)}),Xb(1)).toPromise();case 12:return this.log("The message has been acked, %o",{code:da=Ja.sent.code}),Ja.abrupt("return",{code:da,retryTimes:P});case 18:if(Ja.prev=18,Ja.t0=Ja.catch(9),!(Ja.t0 instanceof ad&&M)){Ja.next=22;break}return Ja.abrupt("return",this.sendMessageToRetry(R,!1,P+1));case 22:throw Ja.t0;case 23:case"end":return Ja.stop()}},_,this,[[9,18]])}));return function(_,R){return p.apply(this,arguments)}}()},{key:"initKeepAliveSender",value:function(){var p=this;this.lastLoginSockets.map(function(_){return _.pipe(Cc(function(R){return Fe(0,2500,Kg()?void 0:CP).pipe(Ka(function(){p.sendPing(R)}))}))}).forEach(function(_,R){var M=p.loginSocketSubs[R].keepAlive;void 0!==M&&M.unsubscribe(),p.loginSocketSubs[R].keepAlive=_.subscribe({error:function(){}})})}},{key:"initKeepAliveReconnector",value:function(){var p=this;this.lastLoginSockets.map(function(_){return _.pipe(Cc(function(R){var M,P=!1,F=R.userJoin$.pipe(Ka(function(){P=!0})),G=R.input$.pipe(Ka(function(z){"Ping"!==Tm[z.uri].slice(0,-3)&&(P=!1)}));return Nc(Fe(6e3,1e4).pipe(iC(R.receivedPacket),Ka(function(z){z=Lb(z,2),z=Lb(z[1],2)[1],M!==z||P||R.forceReconnect(),M=z})),F,G)}))}).forEach(function(_,R){var M=p.loginSocketSubs[R].keepAliveReconnector;void 0!==M&&M.unsubscribe(),p.loginSocketSubs[R].keepAliveReconnector=_.subscribe({error:function(){}})})}},{key:"initLoginReceiver",value:function(){var p=this;bb.apply(void 0,ra(this.lastLoginSockets.map(function(M){return M.pipe(Cc(function(P){return P.fromReceived("UserTicketNearlyExpire").pipe(cC(5e3),Ka(p.onUserTicketNearlyExpire(P)))}))}))).subscribe(),bb.apply(void 0,ra(this.lastLoginSockets.map(function(M){return M.pipe(Cc(function(P){return P.fromReceived("StateUpdate").pipe(Ka(p.onStateUpdate()))}))}))).subscribe();var _=Bc(this,"messageCount"),R=_.pipe(sc(function(M){return M.messageCategory===vb.ChannelSMsg}));R.subscribe(function(M){return p.updateMessageCount(M)}),R.pipe(Kj(6e3)).subscribe(function(M){M.length&&p.chanelStringMessageReport.report()}),Nc(Wb(void 0),R).pipe(Cc(function(){return Yg(36e5)})).subscribe(function(){p.chanelStringMessageReport.report()}),(R=_.pipe(sc(function(M){return M.messageCategory===vb.ChannelRMsg}))).subscribe(function(M){return p.updateMessageCount(M)}),R.pipe(Kj(6e3)).subscribe(function(M){M.length&&p.chanelRawMessageReport.report()}),Nc(Wb(void 0),R).pipe(Cc(function(){return Yg(36e5)})).subscribe(function(){p.chanelRawMessageReport.report()}),(R=_.pipe(sc(function(M){return M.messageCategory===vb.P2pSMsgNoOfflineFlag}))).subscribe(function(M){return p.updateMessageCount(M)}),R.pipe(Kj(6e3)).subscribe(function(M){M.length&&p.p2pSMsgNoOfflineReport.report()}),Nc(Wb(void 0),R).pipe(Cc(function(){return Yg(36e5)})).subscribe(function(){p.p2pSMsgNoOfflineReport.report()}),(_=_.pipe(sc(function(M){return M.messageCategory===vb.P2pRMsgNoOfflineFlag}))).subscribe(function(M){return p.updateMessageCount(M)}),_.pipe(Kj(6e3)).subscribe(function(M){M.length&&p.p2pRMsgNoOfflineReport.report()}),Nc(Wb(void 0),_).pipe(Cc(function(){return Yg(36e5)})).subscribe(function(){p.p2pSMsgNoOfflineReport.report()}),this.lastLoginSockets.map(function(M){return M.pipe(Cc(function(P){return Nc(Bc(P,"reconnect").pipe(Ka(p.onSocketReconnect(P))),P.fromReceived("Message").pipe(Ka(p.onMessage(P))),P.fromReceived("GroupEnterNotice").pipe(Ka(p.onGroupEnterNotice())),P.fromReceived("GroupLeaveNotice").pipe(Ka(p.onGroupLeaveNotice())),P.fromReceived("GroupCountNotice").pipe(Ka(p.onGroupCountNotice())),P.fromReceived("GroupAttributeAlt").pipe(Ka(p.onGroupAttributeAlt())),P.fromReceived("UserJoinNotice").pipe(Ka(p.onUserNotice(Oa.PeerOnlineState.ONLINE))),P.fromReceived("UserQuitNotice").pipe(Ka(p.onUserNotice(Oa.PeerOnlineState.OFFLINE))),P.fromReceived("UserWaitNotice").pipe(Ka(p.onUserNotice(Oa.PeerOnlineState.UNREACHABLE))),P.fromReceived("Pong").pipe(Ka(p.onPong())),P.fromReceived("UserDrop").pipe(Ka(p.onUserDrop(P))),P.fromReceived("GroupDrop").pipe(Ka(p.onGroupDrop()))).pipe(ni(void 0))}))}).forEach(function(M,P){p.loginSocketSubs[P].receivers.push(M.subscribe({error:function(){}}))})}},{key:"requestSocketLogin",value:function(p,_,R){var M=this;return Pr(lf(function(){M.userJoinOptions=new Pz(_),p.sendPacket("UserJoin",{account:M.context.uid,instance:M.instanceId,opt:M.userJoinOptions.toLong(),seq:R,ticket:p.ticket})}),p.fromReceived("UserResp").pipe(La(function(P){return R.eq(P.seq)}),Ka(function(P){if(0!==(P=P.code))throw M.clearSockets(),M.logError("Connected to gateway success but the Rtm server rejected login"),new Pa(["Login failure. The response code from the RTM service is %d",P],ij);p.attemptsSinceLastError=0,p.loggedIn=!0,M.log("ENV_%d logged in",p.env)}),ni(p),Oc(6e3))).pipe(sc(function(P){return void 0!==P}),Rb(function(P){P instanceof ad&&M.warn("Login response timeout, rejoin: %s",_);var F=M.getLoginSockets();if(0<F.length){var G=F.map(function(z){return z.env});[0,1].filter(function(z){return!G.includes(z)}).forEach(function(z){M.cleanLoginSubs(z,!1),M.connection.closeSocket(z,0)})}return P.name="loginRespTimeout",M.emit("banEdgeIP",p.ip),Va(P)}))}},{key:"getSocketLoginObservables",value:function(p,_){var R=this;return p.map(function(M){return M.pipe(Cc(function(P,F){return R.incSeqIfNeeded(P.env),R.requestSocketLogin(P,0!==F,0===F?_:R.seq)}),$g())})}},{key:"incSeqIfNeeded",value:function(p){if(![0,1].includes(p))throw new rb({INVALID_ENV:"The env argument is not 0 or 1"});this.seqSentStatuses[p]&&(this.seq=this.seq.add(1),this.seqSentStatuses=[!1,!1]),this.seqSentStatuses[p]=!0}},{key:"incGetSeq",value:function(){return this.seq=this.seq.add(1),this.seqSentStatuses=[!0,!0],this.seq}},{key:"getLoginSockets",value:function(){for(var p=this.curLoginSockets,_=-1,R=null==p?0:p.length,M=0,P=[];++_<R;){var F=p[_];F&&(P[M++]=F)}return P}},{key:"emitMessage",value:function(p,_){var R,M=p.options,P=p.payload,F=p.src,G=p.dst,z=p.instance,we=p.dialogue,xe=p.sequence,_n=p.ms,fa=p.MiscMap;this.dialogueSequenceLru.set(we.toString(),xe),z="".concat(z,"-").concat(we,"#").concat(xe),this.msgDedupLru.has(z)?this.warn("Env_%d: Messages out-of-order or not start with 1: %s",_,z):(this.msgDedupLru.set(z,void 0),M=new Yh(M),this.lastLoginSockets.forEach((R=za(W.mark(function da(Ta){return W.wrap(function(Ja){for(;;)switch(Ja.prev=Ja.next){case 0:return Ja.next=2,Ta.pipe(Xb(1)).toPromise();case 2:t.sendMessageAck(p,Ja.sent);case 4:case"end":return Ja.stop()}},da)})),function(da){return R.apply(this,arguments)})),_=M.isZlibCompressed(),M.isInvitation()?(G=ti(_?Oq(zs(P,Uint8Array.of(0,0,0,0))):P),G=JSON.parse(G),this.log("The received invitation body is %o",G),this.emit("invitationMessage",{body:G,type:M.getInvitationType(),peerId:F,serverReceivedTs:_n.toNumber()})):M.isTextMessage()?(fa=M.isPeerTextMessage(),P=ti(_?Oq(zs(P,Uint8Array.of(0,0,0,0))):P),this.info("Received a %s %s text message from %s to %s, %s",_?" compressed":"",fa?"peer":"channel",wb(F),wb(G),z),fa?(F={text:P,peerId:F,properties:{serverReceivedTs:_n.toNumber()}},this.emit("peerTextMessage",F),this.emit("messageCount",{messageCategory:vb.P2pSMsgNoOfflineFlag,type:"common",key:"receivedcount"})):(this.emit("channelTextMessage",{channelId:G,memberId:F,text:P,properties:{serverReceivedTs:_n.toNumber()}}),this.emit("messageCount",{messageCategory:vb.ChannelSMsg,type:"common",key:"receivedcount"}))):M.isRawMessage()&&(M=M.isRawPeerMessage(),fa=void 0===(fa=fa.description)?"":ti(fa),P=_?Oq(P):P,this.info("Received a %s %s raw message from %s to %s, %s",_?" compressed":"",M?"peer":"channel",wb(F),wb(G),z),M?(F={desc:fa,raw:P,peerId:F,properties:{serverReceivedTs:_n.toNumber()}},this.emit("peerRawMessage",F),this.emit("messageCount",{messageCategory:vb.P2pRMsgNoOfflineFlag,type:"common",key:"receivedcount"})):(this.emit("channelRawMessage",{desc:fa,raw:P,channelId:G,memberId:F,properties:{serverReceivedTs:_n.toNumber()}}),this.emit("messageCount",{messageCategory:vb.ChannelRMsg,type:"common",key:"receivedcount"}))))}},{key:"onSocketReconnect",value:function(p){var _=this;return function(){var R=[0,1].filter(function(M){return M!==p.env})[0];(R=_.connection.curOpenSockets[R])&&!R.loggedIn&&_.emit("connectionLost")}}},{key:"onUserTicketNearlyExpire",value:function(p){var _=this;return function(R){(R=R.ticket)!==_.lastNoticeTicket&&R===p.ticket?(_.lastNoticeTicket=R,_.emit("tokenPrivilegeWillExpire")):_.requestUpdateEdgeTicket(p.ticket).toPromise()}}},{key:"onGroupDrop",value:function(){var p=this;return function(_){var R,M=_.account;$a("ChnLeave",{cname:M,lts:D.fromNumber(Date.now()),elapse:Nb(p.startTime),errCode:EI,sid:fc(p.instanceId),userId:p.context.uid},null!==(R=p.context.config.enableCloudProxy)&&void 0!==R&&R),[0,1].forEach(function(P){return p.loginSocketSubs[P].channels.delete(M)}),p.logError("the user is kicked out of the current channel")}}},{key:"onStateUpdate",value:function(){var p=this;return function(_){var R=_.flags,M=_.target;_=Wm(_.allStates),R.and(new D(1,0,!0)).isZero()?void 0!==p.lastUserMeteUpdateRecord[M]&&_.majorRevision>p.lastUserMeteUpdateRecord[M]&&(p.emit("userMetaDataUpdated",{uid:M,data:R.and(new D(0,2,!0)).isZero()?_:tb(tb({},_),{},{majorRevision:0})}),p.lastUserMeteUpdateRecord[M]=_.majorRevision):void 0!==p.lastChannelMetaUpdateRecord[M]&&_.majorRevision>p.lastChannelMetaUpdateRecord[M]&&(p.emit("channelMetaDataUpdated",{channelId:M,data:R.and(new D(0,2,!0)).isZero()?_:tb(tb({},_),{},{majorRevision:0})}),p.lastChannelMetaUpdateRecord[M]=_.majorRevision)}}},{key:"onUserDrop",value:function(p){var _=this;return function(R){var M;R=R.code,$a("KickedOff",{code:0,elapse:Nb(_.startTime),linkId:parseInt(p.name.split("-")[1],10),lts:D.fromNumber(Date.now()),server:p.address,serverCode:R,sid:fc(_.instanceId),userId:_.context.uid},null!==(M=_.context.config.enableCloudProxy)&&void 0!==M&&M),10006===R||10001===R?_.warn("Login too often and kicked off, reconnect and login"):10009===R?(_.warn("The instance ID conflicts, reconnecting"),_.instanceId=Rj(),_.context.sid=fc(_.instanceId),_.emit("instanceChanged",_.instanceId)):[2,11,14,15,16,10019].includes(R)&&(_.emit("userDrop",R),_.clearSockets())}}},{key:"clearSockets",value:function(){var p=this,_=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,R=1<arguments.length&&void 0!==arguments[1]&&arguments[1];[0,1].forEach(function(M){p.cleanLoginSubs(M,R),p.connection.closeSocket(M,_)})}},{key:"onMessage",value:function(p){var _=this;return function(R){var M=R.dialogue,P=R.instance,F=R.sequence,G=R.options;if(R.src===_.context.uid)_.log("The message is from the local account, ignored");else{var z=M.toString(),we=_.dialPendingMsgSubjectMap.get(z);if(M="".concat(P,"-").concat(M,"#").concat(F),we)we.next(R),_.log("Env_%d: The dialogue has pending messages, next: %s",p.env,M);else{var xe=_.dialogueSequenceLru.get(z);if(we=!xe&&F.eq(1),P=void 0!==xe&&F.sub(xe).eq(1),we||P)_.emitMessage(R,p.env);else{if(xe){if(F.lte(xe))return;_.log("Env_%d: The message pended, the sequence is not continuous with the last: %s",p.env,M)}else _.log("Env_%d: The message pended, the first sequence is not equal to 1: %s",p.env,M);F=new ec,_.dialPendingMsgSubjectMap.set(z,F);var _n=F.pipe(kB(Xo),Nj(function(fa,da){return[].concat(ra(fa),[da])},[]),Wa(function(fa){return ra(fa).sort(function(da,Ta){return(da=da.sequence).eq(Ta=Ta.sequence)?0:da.gt(Ta)?1:-1})}),Yr(1));G=!(G=new Yh(G)).isFromCache()&&!G.isBufferedMessage(),_n.pipe(he(Fe(G?750:1500)),La(function(fa){if(2>fa.length)return!1;for(var da=void 0===xe?D.fromNumber(1,!0):xe.add(1),Ta=0;Ta<fa.length;da=da.add(1),Ta++)if(!fa[Ta].sequence.eq(da))return!1;return!0}),Mj(function(){_.dialPendingMsgSubjectMap.delete(z)})).subscribe(function(fa){fa.forEach(function(da){_.emitMessage(da,p.env),_.log("Env_%d: The message queue has fully ordered, emitting: %s",p.env,"".concat(da.instance,"-").concat(da.dialogue,"#").concat(da.sequence))})},function(fa){fa instanceof Lj&&_n.pipe(Xb(1)).subscribe(function(da){return da.forEach(function(Ta){_.log("Env_%d: The message pending queue expired, emitting: %s",p.env,"".concat(Ta.instance,"-").concat(Ta.dialogue,"#").concat(Ta.sequence)),_.emitMessage(Ta,p.env)})})}),F.next(R)}}}}}},{key:"onPong",value:function(){var p=this;return function(){document.hidden&&p.getLoginSockets().forEach(function(_){p.sendPing(_)})}}},{key:"onGroupEnterNotice",value:function(){var p=this;return function(_){p.emit("memberNotice",{channelId:_.group,seq:_.seq,instance:_.instance,memberId:_.user,type:"MemberJoined",size:_.size})}}},{key:"onGroupLeaveNotice",value:function(){var p=this;return function(_){p.emit("memberNotice",{channelId:_.group,seq:_.seq,instance:_.instance,memberId:_.user,type:"MemberLeft",size:_.size})}}},{key:"onGroupCountNotice",value:function(){var p=this;return function(_){p.emit("memberNotice",{channelId:_.group,seq:_.seq,instance:_.instance,type:"MemberCountUpdated",size:_.size})}}},{key:"onGroupAttributeAlt",value:function(){var p=this;return function(_){var R=_.group;_=em(_,DP),p.emit("channelAttributesUpdated",tb({channelId:R},_))}}},{key:"onUserNotice",value:function(p){var _=this;return function(R){_.emit("peerOnlineStatusChanged",{peerId:R.user,instance:R.instance,seq:R.seq,state:p})}}},{key:"sendPing",value:function(p){2500>=Date.now()-this.lastPingTime[p.env]||(this.incSeqIfNeeded(p.env),p.sendPacket("Ping",{ms:D.fromNumber(Date.now(),!0),seq:this.seq}),this.lastPingTime[p.env]=Date.now())}},{key:"updateMessageCount",value:function(p){var _,R=(_={},E(_,vb.ChannelRMsg,this.chanelRawMessageReport),E(_,vb.ChannelSMsg,this.chanelStringMessageReport),E(_,vb.P2pRMsgNoOfflineFlag,this.p2pRMsgNoOfflineReport),E(_,vb.P2pSMsgNoOfflineFlag,this.p2pSMsgNoOfflineReport),E(_,3,void 0),E(_,4,void 0),E(_,7,void 0),E(_,8,void 0),E(_,9,void 0),E(_,10,void 0),_)[p.messageCategory];"common"===p.type?null==R||R.updateCommonCount(p.key):"peer"===p.type?null==R||R.updatePeerAckCount(p.delay):null==R||R.updateNorecipientackCount(p.delay)}}],[{key:"sendMessageAck",value:function(p,_){var R=new Yh(p.options);(R.isInvitation()||R.isPeerMessage())&&_.sendPacket("Ack",{code:0,dialogue:p.dialogue,instance:p.instance,sequence:p.sequence})}}]),t}(Dd());E(Pq,"genTimeoutErrorWithoutNotice",function(r,t,o){return Wb(void 0).pipe(mf(void 0===t?1e4:t),Wa(function(){if("JOIN"!==o)throw new Pc(["Request timed out after %ds",(void 0===t?1e4:t)/1e3],r)}))}),E(Pq,"genTimeoutError",function(r,t){return Wb(void 0).pipe(mf(void 0===t?1e4:t),Wa(function(){throw new Pc(["Request timed out after %ds",(void 0===t?1e4:t)/1e3],r)}))});var EA,Qq,Rq=0,Sq=0;gj.v1=function(r,t,o){o=t&&o||0;var l=t||[],p=(r=r||{}).node||EA,_=void 0!==r.clockseq?r.clockseq:Qq;if(null==p||null==_){var R=ow();null==p&&(p=EA=[1|R[0],R[1],R[2],R[3],R[4],R[5]]),null==_&&(_=Qq=16383&(R[6]<<8|R[7]))}R=void 0!==r.msecs?r.msecs:(new Date).getTime();var M=void 0!==r.nsecs?r.nsecs:Sq+1,P=R-Rq+(M-Sq)/1e4;if(0>P&&void 0===r.clockseq&&(_=_+1&16383),(0>P||R>Rq)&&void 0===r.nsecs&&(M=0),1e4<=M)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");for(Rq=R,Sq=M,Qq=_,r=(1e4*(268435455&(R+=122192928e5))+M)%4294967296,l[o++]=r>>>24&255,l[o++]=r>>>16&255,l[o++]=r>>>8&255,l[o++]=255&r,l[o++]=(r=R/4294967296*1e4&268435455)>>>8&255,l[o++]=255&r,l[o++]=r>>>24&15|16,l[o++]=r>>>16&255,l[o++]=_>>>8|128,l[o++]=255&_,_=0;6>_;++_)l[o+_]=p[_];return t||pw(l)},gj.v4=gj;var Tq=il(),Sf,ai=Oa.LocalInvitationFailureReason,Fb=Oa.LocalInvitationState,EP=(Sf=function(r){function t(l,p,_){ab(this,t);var R=o.call(this,_,"RtmLocalInvitation",!0);return E(L(R),"state",Fb.IDLE),E(L(R),"localInvitationEnd$",bb(Bc(L(R),"LocalInvitationAccepted"),Bc(L(R),"LocalInvitationRefused"),Bc(L(R),"LocalInvitationFailure"),Bc(L(R),"LocalInvitationCanceled")).pipe(Xb(1))),E(L(R),"callId",gj.v4()),E(L(R),"_content",""),E(L(R),"_channelId",""),E(L(R),"_response",""),E(L(R),"calleeId",void 0),E(L(R),"logger",void 0),E(L(R),"getSession",void 0),R.calleeId=l,R.getSession=p,R.logger=_,R}nb(t,r);var o=ob(t);return Qb(t,[{key:"channelId",get:function(){return this._channelId},set:function(l){this.state!==Fb.IDLE?this.info("set channelId only allow before invitation sent to remote"):(this.log("set channelId for %s",this.callId),this._channelId=l)}},{key:"content",get:function(){return this._content},set:function(l){this.log("set content for %s",this.callId),this._content=l}},{key:"response",get:function(){return this._response},set:function(l){throw new ja('Cannot set the "response" of the LocalInvitation instance.',ve)}},{key:"send",value:function(){var l,p=this;if(this.state===Fb.SENT_TO_REMOTE||this.state===Fb.RECEIVED_BY_REMOTE)throw new ia("The local invitation send failure. The call invitation has already been sent.",AI);if(this.isLocalInvitationEnd())throw new ia("The local invitation send failure. The call invitation has ended.",$k);if(0<this._channelId.length&&!yb(this._channelId))throw new ja("Illegal invitation channel ID",ve);if(!yb(this.calleeId))throw new ja("Illegal invitation callee user ID",ve);if(8192<Wj(this._content))throw new ja('The length of the "content" overflows. The number of bytes representing content must not exceed 8 \xd7 1024 if encoded in UTF-8.',ve);this.state=Fb.SENT_TO_REMOTE,lf(za(W.mark(function _(){var R,M,P;return W.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,p.getSession().sendInvitationMessage({peerId:p.calleeId,callId:p.callId,extra:p._content,type:"CallInvite",channelId:p._channelId});case 2:if(M=(R=F.sent).hasPeerReceived,P=R.hasReSent,!p.isLocalInvitationEnd()){F.next=7;break}throw new Pc("send invitation timeout");case 7:if(p.log("The local invitation has sent to the callee"),M||P){F.next=11;break}throw l=new Tq({PEER_NOT_ONLINE:"The peer of the invitation is not online"});case 11:if(M){F.next=14;break}throw l=new Tq({RESENT_AND_OFFLINE:"Resent and the peer of the invitation is not online"});case 14:case"end":return F.stop()}},_)}))).pipe(Zg(function(_){return _.pipe(Ka(function(R){if(!(R instanceof Tq))throw R}),mf(2e3))}),Oc(3e4),Rb(function(_){return uc(_)&&p.warn("local invitation ack timed out"),Va(_)}),he(this.localInvitationEnd$)).subscribe({next:function(){p.state===Fb.RECEIVED_BY_REMOTE?p.log('The local invitation state is already "RECEIVED_BY_REMOTE", skipped emitting "LocalInvitationReceivedByPeer"'):p.state!==Fb.SENT_TO_REMOTE?p.log("The invitation has ended, skipped emitting the %s event","LocalInvitationReceivedByPeer"):(p.info("The peer received the local invitation %s.",p.callId),p.state=Fb.RECEIVED_BY_REMOTE,p.emit("LocalInvitationReceivedByPeer"),p.localInvitationEnd$.pipe(Oc(6e4),Rb(function(_){return uc(_)&&p.warn("local invitation expired"),Va(_)})).subscribe({error:function(){p.state=Fb.FAILURE,p.emit("LocalInvitationFailure",ai.INVITATION_EXPIRE)}}))},error:function(_){p.isLocalInvitationEnd()?p.log("The invitation has ended, skipped emitting the %s event","LocalInvitationFailure"):(p.state=Fb.FAILURE,uc(_)&&l?"PEER_NOT_ONLINE"===l.code?p.emit("LocalInvitationFailure",ai.PEER_OFFLINE):"RESENT_AND_OFFLINE"===l.code&&p.emit("LocalInvitationFailure",ai.PEER_NO_RESPONSE):uc(_)?p.emit("LocalInvitationFailure",ai.PEER_NO_RESPONSE):p.emit("LocalInvitationFailure","RtmInvalidStatusError"===_.name?ai.NOT_LOGGEDIN:ai.UNKNOWN))}})}},{key:"cancel",value:function(){if(this.isLocalInvitationEnd())throw new ia("The local invitation cancel failure",$k);if(this.state===Fb.IDLE)throw new ia("The local invitation has not been sent",zI);if(8192<Wj(this._content))throw new ja('The length of the "content" overflows. The number of bytes representing content must not exceed 8 \xd7 1024 if encoded in UTF-8.',ve);this.getSession().sendInvitationMessage({callId:this.callId,peerId:this.calleeId,type:"CallCancel",channelId:this._channelId,extra:this._content}),this.state=Fb.CANCELED,this.emit("LocalInvitationCanceled")}},{key:"onAcceptReceived",value:function(l){if(this.isLocalInvitationEnd()&&this.state!==Fb.ACCEPTED_BY_REMOTE)this.log("The invitation has ended, skipped emitting the %s event","LocalInvitationAccepted");else{if(this.state===Fb.IDLE)throw new ia("the local have not sent the invitation, how can remote accept it?");this.getSession().sendInvitationMessage({callId:this.callId,isAcceptAck:!0,type:"CallAccept",peerId:this.calleeId,channelId:this.channelId}),this.state===Fb.ACCEPTED_BY_REMOTE?this.log("already in ACCEPTED_BY_REMOTE state, ignore emit ACCEPTED_BY_REMOTE"):(this.state===Fb.SENT_TO_REMOTE&&(this.log("receive LocalInvitationAccepted before remote response to the invitation"),this.state=Fb.RECEIVED_BY_REMOTE,this.emit("LocalInvitationReceivedByPeer")),this.state=Fb.ACCEPTED_BY_REMOTE,this._response=l,this.emit("LocalInvitationAccepted",l))}}},{key:"onRefuseReceived",value:function(l){if(this.isLocalInvitationEnd())this.log("The invitation has ended, skipped emitting the %s event","LocalInvitationRefused");else{if(this.state===Fb.IDLE)throw new ia("the local have not sent the invitation, how can remote refuse it?");this.state===Fb.SENT_TO_REMOTE&&(this.log("receive LocalInvitationRefused before remote response to the invitation"),this.state=Fb.RECEIVED_BY_REMOTE,this.emit("LocalInvitationReceivedByPeer")),this._response=l,this.state=Fb.REFUSED_BY_REMOTE,this.emit("LocalInvitationRefused",l)}}},{key:"isLocalInvitationEnd",value:function(){return[Fb.CANCELED,Fb.FAILURE,Fb.ACCEPTED_BY_REMOTE,Fb.REFUSED_BY_REMOTE].includes(this.state)}}]),t}(Dd()),Na(Sf.prototype,"send",[je],Object.getOwnPropertyDescriptor(Sf.prototype,"send"),Sf.prototype),Na(Sf.prototype,"cancel",[je],Object.getOwnPropertyDescriptor(Sf.prototype,"cancel"),Sf.prototype),Sf),cm=Oa.RemoteInvitationFailureReason,Ic=Oa.RemoteInvitationState,FP=function(r){function t(l){var p=l.invitationChannel,_=l.extraContent,R=l.callId,M=l.callerId,P=l.logger;l=l.getSession,ab(this,t);var F=o.call(this,P,"RtmRemoteInvitation",!0);return E(L(F),"state",Ic.INVITATION_RECEIVED),E(L(F),"remoteInvitationEnd$",bb(Bc(L(F),"RemoteInvitationCanceled"),Bc(L(F),"RemoteInvitationRefused"),Bc(L(F),"RemoteInvitationAccepted"),Bc(L(F),"RemoteInvitationFailure")).pipe(Xb(1))),E(L(F),"callerId",void 0),E(L(F),"callId",void 0),E(L(F),"_getSession",void 0),E(L(F),"logger",void 0),E(L(F),"_content",void 0),E(L(F),"_channelId",void 0),E(L(F),"_response",""),F._channelId=p,F._content=_,F.callId=R,F.callerId=M,F._getSession=l,F.logger=P,F.remoteInvitationEnd$.pipe(Oc(6e4),Rb(function(G){return uc(G)&&F.warn("Remote invitation expired"),Va(G)})).subscribe({error:function(){F.state=Ic.FAILURE,F.emit("RemoteInvitationFailure",cm.INVITATION_EXPIRE)}}),F}nb(t,r);var o=ob(t);return Qb(t,[{key:"channelId",get:function(){return this._channelId},set:function(l){throw new ja('Cannot set the "response" of the RemoteInvitation instance.',ve)}},{key:"content",get:function(){return this._content},set:function(l){throw new ja('Cannot set the "content" of the RemoteInvitation instance.',ve)}},{key:"response",get:function(){return this._response},set:function(l){this._response=l}},{key:"accept",value:function(){var l,p=this;if(this.isRemoteInvitationEnd())throw new ia("The local invitation has ended. Cannot accept.",$k);if(this.state===Ic.ACCEPT_SENT_TO_LOCAL)throw new ia("The remote invitation is accepting. Cannot do the operation.",vw);if(8192<Wj(this._response))throw new ja('The length of the "response" overflows. The number of bytes representing content must not exceed 8 \xd7 1024 if encoded in UTF-8.',ve);this.state=Ic.ACCEPT_SENT_TO_LOCAL,Nc(Yg(1e3).pipe(Ac(function(){return lf(za(W.mark(function _(){return W.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",p._getSession().sendInvitationMessage({peerId:p.callerId,callId:p.callId,extra:p.response,type:"CallAccept",isAcceptAck:!1,channelId:p.channelId}));case 1:case"end":return R.stop()}},_)})))}),sc(function(_){return l=_.hasPeerReceived}),Xb(1)),Bc(this,"RemoteInvitationAccepted")).pipe(Oc(5e3),he(this.remoteInvitationEnd$)).subscribe({error:function(_){if(p.logError(_),p.state=Ic.FAILURE,uc(_))switch(l){case void 0:case!0:return void p.emit("RemoteInvitationFailure",cm.ACCEPT_FAILURE);case!1:return void p.emit("RemoteInvitationFailure",cm.PEER_OFFLINE)}p.emit("RemoteInvitationFailure",cm.UNKNOWN)}})}},{key:"refuse",value:function(){if(this.state===Ic.ACCEPT_SENT_TO_LOCAL)throw new ia("The remote invitation is accepting. Cannot do the operation.",vw);if(this.isRemoteInvitationEnd())throw new ia("The invitation is end. Cannot refuse",$k);if(8192<Wj(this._response))throw new ja('The length of the "response" overflows. The number of bytes representing content must not exceed 8 \xd7 1024 if encoded in UTF-8.',ve);this._getSession().sendInvitationMessage({peerId:this.callerId,callId:this.callId,extra:this.response,type:"CallReject",channelId:this.channelId}),this.state=Ic.REFUSED,this.emit("RemoteInvitationRefused")}},{key:"onCancelReceived",value:function(l){this.isRemoteInvitationEnd()?this.log("The invitation has ended, skipped emitting the %s event","RemoteInvitationCanceled"):(this.state===Ic.ACCEPT_SENT_TO_LOCAL&&this.log("caller canceled before receive accept"),this._content=l,this.state=Ic.CANCELED,this.emit("RemoteInvitationCanceled",l))}},{key:"onAcceptAckReceived",value:function(){this.state!==Ic.ACCEPT_SENT_TO_LOCAL?this.log("The invitation has ended, skipped emitting the %s event","ori:".concat(this.state,", to: RemoteInvitationAccepted")):(this.state=Ic.ACCEPTED,this.emit("RemoteInvitationAccepted"))}},{key:"isRemoteInvitationEnd",value:function(){return[Ic.ACCEPTED,Ic.REFUSED,Ic.CANCELED,Ic.FAILURE].includes(this.state)}}]),t}(Dd()),GP=function(r){function t(l,p){ab(this,t);var _=o.call(this,p,"InvitationManager");return E(L(_),"getSession",void 0),E(L(_),"invitationDispatcher",new kb.EventEmitter),E(L(_),"outgoingLocalInvitations",new Map),E(L(_),"receivedRemoteInvitations",new ue(void 0,{maxlen:1e4})),E(L(_),"logger",void 0),_.getSession=Hs(l),_.logger=p,_.invitationDispatcher.on("remoteInvitationToManager",function(R){var M=R.callId,P=R.extra,F=R.callerId;R=R.channelId,_.receivedRemoteInvitations.has(M)||((P=new FP({callerId:F,callId:M,getSession:_.getSession,logger:p,extraContent:P,invitationChannel:R})).remoteInvitationEnd$.subscribe(function(){_.receivedRemoteInvitations.delete(M)}),_.receivedRemoteInvitations.set(M,P),_.emit("remoteInvitationInstance",P))}),_.invitationDispatcher.on("acceptAckToRemoteInvitation",function(R){(R=_.receivedRemoteInvitations.get(R.callId))&&R.onAcceptAckReceived()}),_.invitationDispatcher.on("cancelToRemoteInvitation",function(R){var M=R.extra;(R=_.receivedRemoteInvitations.get(R.callId))&&R.onCancelReceived(M)}),_.invitationDispatcher.on("acceptToLocalInvitation",function(R){var M=R.extra;(R=_.outgoingLocalInvitations.get(R.callId))&&R.onAcceptReceived(M)}),_.invitationDispatcher.on("refuseToLocalInvitation",function(R){var M=R.extra;(R=_.outgoingLocalInvitations.get(R.callId))&&R.onRefuseReceived(M)}),_}nb(t,r);var o=ob(t);return Qb(t,[{key:"invitationMessageHandler",value:function(l){var p=l.body,_=p.callId,R=p.extra;R=void 0===R?"":R;var M=p.type,P=void 0===(p=p.channel)?"":p,F=l.type;switch(p=l.peerId,l=l.serverReceivedTs,F){case"CallAccept":"ack"===M?this.invitationDispatcher.emit("acceptAckToRemoteInvitation",{callId:_}):"request"===M&&this.invitationDispatcher.emit("acceptToLocalInvitation",{callId:_,extra:R});break;case"CallInvite":this.invitationDispatcher.emit("remoteInvitationToManager",{callId:_,callerId:p,extra:R,channelId:P});break;case"CallCancel":if("0"===_){_="".concat("AgoraRTMLegacyEndcallCompatibleMessagePrefix","_").concat(P,"_").concat(R),this.getSession().emit("peerTextMessage",{peerId:p,properties:{serverReceivedTs:l},text:_});break}this.invitationDispatcher.emit("cancelToRemoteInvitation",{callId:_,extra:R});break;case"CallReject":this.invitationDispatcher.emit("refuseToLocalInvitation",{callId:_,extra:R});break;default:throw ps("invitationType",F)}}},{key:"genLocalInvitation",value:function(l){var p=this,_=new EP(l,this.getSession,this.logger);return _.localInvitationEnd$.subscribe(function(){p.outgoingLocalInvitations.delete(_.callId)}),this.outgoingLocalInvitations.set(_.callId,_),_}}]),t}(Dd()),HP=function(r,t,o){var l=!0,p=!0;if("function"!=typeof r)throw new TypeError("Expected a function");return Kc(o)&&(l="leading"in o?!!o.leading:l,p="trailing"in o?!!o.trailing:p),LK(r,t,{leading:l,maxWait:t,trailing:p})},lb,bi;!function(r){r[r.JOINED=0]="JOINED",r[r.LEFT=1]="LEFT"}(bi||(bi={}));var Ld=Oa.ConnectionState,IP=(lb=function(r){function t(p,_,R,M){ab(this,t);var P=l.call(this,M,"RtmChannel",!0);return E(L(P),"onMemberCountUpdated",HP(function(F){F!==P.memberCount&&(P.memberCount=F,P.emit("MemberCountUpdated",F))},1e3)),E(L(P),"onMetadataUpdated",function(F){P.emit("MetaDataUpdated",F)}),E(L(P),"getSession",void 0),E(L(P),"memberCount",0),E(L(P),"joinState","LEFT"),E(L(P),"joinPromise",void 0),E(L(P),"memberJoinedLru",new ue(void 0,{maxlen:1e4})),E(L(P),"memberLeftLru",new ue(void 0,{maxlen:1e4})),E(L(P),"memberJoinStateLru",new ue(void 0,{maxlen:1e4})),E(L(P),"attributesSeqLru",new ue(void 0,{maxlen:1e4})),E(L(P),"channelId",void 0),E(L(P),"client",void 0),E(L(P),"onChannelMetaDataUpdated",function(F){P.channelId===F.channelId&&P.onMetadataUpdated(F.data)}),E(L(P),"onChannelMemberCountUpdated",function(F,G){P.channelId===F&&P.onMemberCountUpdated(G)}),E(L(P),"onLogout",function(){try{P.clearChannel(P.getSession())}catch(F){}}),E(L(P),"onAttributesUpdated",function(F){var G=F.channelId,z=F.attributeMaps,we=F.seq;F=F.instance.toString();var xe=P.attributesSeqLru.get(F);if((!xe||we.greaterThan(xe))&&(P.attributesSeqLru.set(F,we),G===P.channelId)){for(G={},we=0;we<z.length;we++){var _n=z[we];F=_n.key,xe=_n.ms;var fa=_n.value;if(_n=_n.origin,"string"!=typeof F||!D.isLong(xe)||"string"!=typeof fa||!yb(_n))break;G[F]={value:fa,lastUpdateUserId:_n,lastUpdateTs:xe.toNumber()}}P.emit("AttributesUpdated",G)}}),E(L(P),"onChannelTextMessage",function(F){F.channelId===P.channelId&&P.emit("ChannelMessage",{text:F.text,messageType:Oa.MessageType.TEXT},F.memberId,F.properties)}),E(L(P),"onChannelRawMessage",function(F){F.channelId===P.channelId&&P.emit("ChannelMessage",{messageType:Oa.MessageType.RAW,rawMessage:F.raw,description:F.desc},F.memberId,F.properties)}),E(L(P),"onMemberNotice",function(F){var G=F.memberId,z=F.type,we=F.size;if(F.channelId===P.channelId){var xe=F.instance.toString();F=F.seq.toString();var _n={MemberLeft:P.memberLeftLru,MemberJoined:P.memberJoinedLru,MemberCountUpdated:void 0}[z];if(_n){if(_n.has(xe+F))return void P.log("received duplicated %s notice (seq: %s), channel '%s', member '%s'",z,F,wb(P.channelId),wb(G||""));if(_n.set(xe+F,void 0),"string"!=typeof G)return;if(G!==P.getSession().context.uid&&((xe=P.memberJoinStateLru.get(G))===bi.JOINED&&"MemberJoined"===z||xe===bi.LEFT&&"MemberLeft"===z))return void P.log("received duplicated %s state (seq: %s), channel '%s', member '%s'",z,F,wb(P.channelId),wb(G||""));P.memberJoinStateLru.set(G,"MemberJoined"===z?bi.JOINED:bi.LEFT)}P.info("Channel %s - %s, memberId: %s",z,wb(P.channelId),"MemberCountUpdated"===z?"[unknown]":wb(G||"")),xe=G===P.getSession().context.uid,"MemberLeft"===z&&yb(G)||"MemberJoined"===z&&yb(G)?(xe||P.emit(z,G),P.onMemberCountUpdated(we)):"MemberCountUpdated"===z&&"number"==typeof we&&P.onMemberCountUpdated(we)}}),P.getSession=Hs(_),P.channelId=p,P.client=R,P.info("A channel created, id %s",wb(p)),P}nb(t,r);var o,l=ob(t);return Qb(t,[{key:"join",value:(o=za(W.mark(function p(){var _,R,M,P,F,G,z,we=this;return W.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:if(this.client.connectionState===Ld.CONNECTED){xe.next=2;break}throw new ia("The client is not logged in. Cannot do the operation",oc);case 2:xe.prev=2,_=this.getSession(),xe.next=9;break;case 6:throw xe.prev=6,xe.t0=xe.catch(2),new ia("The client is not logged in. Cannot do the operation",Aw);case 9:if(xe.prev=9,yb(this.channelId)){xe.next=12;break}throw new ja(["The %s in the arguments is invalid","channelId"],BI);case 12:if("LEFT"===this.joinState){xe.next=15;break}throw $a("ChnJoin",{cname:this.channelId,lts:D.fromNumber(Date.now()),userId:_.context.uid,elapse:Nb(_.startTime),errCode:zw,sid:fc(_.instanceId)},null!==(P=this.client.context.config.enableCloudProxy)&&void 0!==P&&P),new ia("The channel has joined. Cannot rejoin",zw);case 15:if(!_.usedChannelIds.includes(this.channelId)){xe.next=18;break}throw $a("ChnJoin",{cname:this.channelId,lts:D.fromNumber(Date.now()),userId:_.context.uid,elapse:Nb(_.startTime),errCode:Bw,sid:fc(_.instanceId)},null!==(F=this.client.context.config.enableCloudProxy)&&void 0!==F&&F),new ia("A channel of the same channel ID has already joined. Cannot rejoin",Bw);case 18:if(!(20<=_.usedChannelIds.length)){xe.next=21;break}throw $a("ChnJoin",{cname:this.channelId,lts:D.fromNumber(Date.now()),userId:_.context.uid,elapse:Nb(_.startTime),errCode:yw,sid:fc(_.instanceId)},null!==(G=this.client.context.config.enableCloudProxy)&&void 0!==G&&G),new Dc("The joined channels has exceeded the limit of 20",yw);case 21:return $a("ChnJoin",{cname:this.channelId,lts:D.fromNumber(Date.now()),userId:_.context.uid,elapse:Nb(_.startTime),errCode:0,sid:fc(_.instanceId)},null!==(R=this.client.context.config.enableCloudProxy)&&void 0!==R&&R),this.log("Joining the channel %s",wb(this.channelId)),this.joinState="JOINING",_.usedChannelIds.push(this.channelId),this.joinPromise=_.requestChannelJoin(this.channelId).then(function(){we.joinState="JOINED",_.requestSubscribeChannelMetadata(we.channelId,"JOIN").toPromise()}),xe.next=28,this.joinPromise;case 28:$a("ChnJoinRes",{cname:this.channelId,lts:D.fromNumber(Date.now()),elapse:Nb(_.startTime),errCode:0,sid:fc(_.instanceId),serverErrCode:0,userId:_.context.uid},null!==(M=this.client.context.config.enableCloudProxy)&&void 0!==M&&M),this.info("The channel %s joined successfully",wb(this.channelId)),_.on("channelTextMessage",this.onChannelTextMessage),_.on("channelRawMessage",this.onChannelRawMessage),_.on("memberNotice",this.onMemberNotice),_.on("channelAttributesUpdated",this.onAttributesUpdated),_.on("channelMetaDataUpdated",this.onChannelMetaDataUpdated),this.client.internalEmitter.on("channelMemberCountUpdated",this.onChannelMemberCountUpdated),this.client.internalEmitter.once("LOGOUT",this.onLogout),xe.next=49;break;case 39:if(xe.prev=39,xe.t1=xe.catch(9),"JOINING"===this.joinState&&(this.joinState="LEFT"),this.logError(xe.t1),!Sa(xe.t1)){xe.next=45;break}throw xe.t1;case 45:if(!uc(xe.t1)){xe.next=48;break}throw $a("ChnJoinRes",{cname:this.channelId,lts:D.fromNumber(Date.now()),elapse:Nb(_.startTime),errCode:xw,sid:fc(_.instanceId),serverErrCode:0,userId:_.context.uid},null!==(z=this.client.context.config.enableCloudProxy)&&void 0!==z&&z),new Pc(["Join channel %s timed out",wb(this.channelId)],xw);case 48:throw new id(["The channel %s join failure",wb(this.channelId)],{code:ww,originalError:xe.t1});case 49:case"end":return xe.stop()}},p,this,[[2,6],[9,39]])})),function(){return o.apply(this,arguments)})},{key:"leave",value:function(){var p=za(W.mark(function _(){var R,M,P,F;return W.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(this.client.connectionState===Ld.CONNECTED){G.next=2;break}throw new ia("The client is not logged in. Cannot do the operation",oc);case 2:G.prev=2,M=this.getSession(),G.next=9;break;case 6:throw G.prev=6,G.t0=G.catch(2),new ia("The client is not logged in. Cannot do the operation",DI);case 9:if("LEFT"!==this.joinState){G.next=11;break}throw new ia("The channel does not join. Cannot do the operation",CI);case 11:return G.prev=11,M.requestChannelLeave(this.channelId),G.next=15,M.requestUnsubscribeChannelMetadata(this.channelId);case 15:return G.next=17,this.clearChannel(M);case 17:G.next=28;break;case 19:if(G.prev=19,G.t1=G.catch(11),this.logError(G.t1),!Sa(G.t1)){G.next=26;break}throw void 0===G.t1.code&&(G.t1.code=Dw),$a("ChnLeave",{cname:this.channelId,lts:D.fromNumber(Date.now()),elapse:Nb(M.startTime),errCode:Dw,sid:fc(M.instanceId),userId:M.context.uid},null!==(F=this.client.context.config.enableCloudProxy)&&void 0!==F&&F),G.t1;case 26:throw $a("ChnLeave",{cname:this.channelId,lts:D.fromNumber(Date.now()),elapse:Nb(M.startTime),errCode:Cw,sid:fc(M.instanceId),userId:M.context.uid},null!==(P=this.client.context.config.enableCloudProxy)&&void 0!==P&&P),new id("The channel leave failure",{code:Cw,originalError:G.t1});case 28:$a("ChnLeave",{cname:this.channelId,lts:D.fromNumber(Date.now()),elapse:Nb(M.startTime),errCode:0,sid:fc(M.instanceId),userId:M.context.uid},null!==(R=this.client.context.config.enableCloudProxy)&&void 0!==R&&R);case 29:case"end":return G.stop()}},_,this,[[2,6],[11,19]])}));return function(){return p.apply(this,arguments)}}()},{key:"sendMessage",value:function(){var p=za(W.mark(function _(R){var M,P=this;return W.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(vs(R,fp),this.client.connectionState!==Ld.CONNECTED||"JOINED"===this.joinState){F.next=3;break}throw new ia("The channel does not join. Cannot do the operation",rI);case 3:if(this.client.connectionState!==Ld.RECONNECTING){F.next=8;break}return M=Date.now(),F.next=7,new Promise(function(G,z){var we,xe=(we=za(W.mark(function fa(){var da;return W.wrap(function(Ta){for(;;)switch(Ta.prev=Ta.next){case 0:return da=Date.now()-M,Ta.prev=1,Ta.next=4,Uj({message:R,peerId:P.channelId,toPeer:!1,session:P.getSession(),errorCodes:{NOT_LOGGED_IN:gp,TOO_OFTEN:rw},diff:da,logger:P.logger});case 4:G(),Ta.next=12;break;case 7:Ta.prev=7,Ta.t0=Ta.catch(1),uc(Ta.t0)&&z(new Pc(vg(P.name,"sendMessageToPeer",1e4),ep)),Sa(Ta.t0)&&z(Ta.t0),z(new Pa("Channel message send failure",{code:Zk,originalError:Ta.t0}));case 12:return Ta.prev=12,clearTimeout(_n),Ta.finish(12);case 15:case"end":return Ta.stop()}},fa,null,[[1,7,12,15]])})),function(){return we.apply(this,arguments)});P.client.internalEmitter.once("RECONNECTED",xe);var _n=setTimeout(function(){P.client.internalEmitter.off("RECONNECTED",xe),z(new Pc(vg(P.name,"sendMessageToPeer",1e4),ep))},9e3)});case 7:return F.abrupt("return");case 8:if(this.client.connectionState===Ld.CONNECTED){F.next=10;break}throw new ia("The client is not logged in. Cannot do the operation",gp);case 10:return F.prev=10,F.next=13,Uj({message:R,peerId:this.channelId,toPeer:!1,session:this.getSession(),errorCodes:{NOT_LOGGED_IN:gp,TOO_OFTEN:rw},diff:0,logger:this.logger});case 13:F.next=23;break;case 15:if(F.prev=15,F.t0=F.catch(10),!uc(F.t0)){F.next=19;break}throw new Pc(vg(this.name,"sendMessage",1e4),ep);case 19:if(!Sa(F.t0)){F.next=22;break}throw this.logError(F.t0),F.t0;case 22:throw new id("The channel message send failure",Zk);case 23:case"end":return F.stop()}},_,this,[[10,15]])}));return function(_){return p.apply(this,arguments)}}()},{key:"getChannelMetadata",value:function(){var p=za(W.mark(function _(){var R;return W.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(this.client.connectionState===Ld.CONNECTED){P.next=2;break}throw new ia("The client is not logged in. Cannot do the operation",oc);case 2:return P.prev=2,R=this.getSession().requestGetChannelMetaData(this.channelId),P.next=6,R.pipe(Wa(function(F){return Wm(F)})).toPromise();case 6:return P.abrupt("return",P.sent);case 10:if(P.prev=10,P.t0=P.catch(2),!Sa(P.t0)){P.next=15;break}throw this.logError(P.t0),P.t0;case 15:throw new id("The channel metadata get failure",lp);case 16:case"end":return P.stop()}},_,this,[[2,10]])}));return function(){return p.apply(this,arguments)}}()},{key:"setChannelMetadata",value:function(){var p=za(W.mark(function _(R,M){var P;return W.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(this.client.connectionState===Ld.CONNECTED){F.next=2;break}throw new ia("The client is not logged in. Cannot do the operation",oc);case 2:if("JOINED"===this.joinState){F.next=4;break}throw new ia("The channel does not join. Cannot do the operation",kj);case 4:return F.prev=4,P=this.getSession().requestSetChannelMetadata(R,M,this.channelId).toPromise(),F.next=8,P;case 8:F.next=16;break;case 10:if(F.prev=10,F.t0=F.catch(4),!Sa(F.t0)){F.next=15;break}throw this.logError(F.t0),F.t0;case 15:throw new id("The channel metadata set failure",He);case 16:case"end":return F.stop()}},_,this,[[4,10]])}));return function(_,R){return p.apply(this,arguments)}}()},{key:"clearChannelMetadata",value:function(){var p=za(W.mark(function _(R){var M;return W.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(this.client.connectionState===Ld.CONNECTED){P.next=2;break}throw new ia("The client is not logged in. Cannot do the operation",oc);case 2:if("JOINED"===this.joinState){P.next=4;break}throw new ia("The channel does not join. Cannot do the operation",kj);case 4:return P.prev=4,M=this.getSession().requestClearChannelMetadata(R,this.channelId).toPromise(),P.next=8,M;case 8:P.next=16;break;case 10:if(P.prev=10,P.t0=P.catch(4),!Sa(P.t0)){P.next=15;break}throw this.logError(P.t0),P.t0;case 15:throw new id("The channel metadata clear failure",He);case 16:case"end":return P.stop()}},_,this,[[4,10]])}));return function(_){return p.apply(this,arguments)}}()},{key:"addChannelMetadata",value:function(){var p=za(W.mark(function _(R,M){var P;return W.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(this.client.connectionState===Ld.CONNECTED){F.next=2;break}throw new ia("The client is not logged in. Cannot do the operation",oc);case 2:if("JOINED"===this.joinState){F.next=4;break}throw new ia("The channel does not join. Cannot do the operation",kj);case 4:return F.prev=4,P=this.getSession().requestAddChannelMetadata(R,M,this.channelId).toPromise(),F.next=8,P;case 8:F.next=16;break;case 10:if(F.prev=10,F.t0=F.catch(4),!Sa(F.t0)){F.next=15;break}throw this.logError(F.t0),F.t0;case 15:throw new id("The channel metadata clear failure",He);case 16:case"end":return F.stop()}},_,this,[[4,10]])}));return function(_,R){return p.apply(this,arguments)}}()},{key:"updateChannelMetadata",value:function(){var p=za(W.mark(function _(R,M){var P;return W.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(this.client.connectionState===Ld.CONNECTED){F.next=2;break}throw new ia("The client is not logged in. Cannot do the operation",oc);case 2:if("JOINED"===this.joinState){F.next=4;break}throw new ia("The channel does not join. Cannot do the operation",kj);case 4:return F.prev=4,P=this.getSession().requestUpdateChannelMetadata(R,M,this.channelId).toPromise(),F.next=8,P;case 8:F.next=16;break;case 10:if(F.prev=10,F.t0=F.catch(4),!Sa(F.t0)){F.next=15;break}throw this.logError(F.t0),F.t0;case 15:throw new id("The channel metadata clear failure",He);case 16:case"end":return F.stop()}},_,this,[[4,10]])}));return function(_,R){return p.apply(this,arguments)}}()},{key:"deleteChannelMetadata",value:function(){var p=za(W.mark(function _(R,M){var P;return W.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(this.client.connectionState===Ld.CONNECTED){F.next=2;break}throw new ia("The client is not logged in. Cannot do the operation",oc);case 2:if("JOINED"===this.joinState){F.next=4;break}throw new ia("The channel does not join. Cannot do the operation",kj);case 4:return F.prev=4,P=this.getSession().requestDeleteChannelMetadata(R,M,this.channelId).toPromise(),F.next=8,P;case 8:F.next=16;break;case 10:if(F.prev=10,F.t0=F.catch(4),!Sa(F.t0)){F.next=15;break}throw this.logError(F.t0),F.t0;case 15:throw new id("The channel metadata clear failure",He);case 16:case"end":return F.stop()}},_,this,[[4,10]])}));return function(_,R){return p.apply(this,arguments)}}()},{key:"getMembers",value:function(){var p=za(W.mark(function _(){var R,M;return W.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(P.prev=0,this.client.connectionState===Ld.CONNECTED){P.next=3;break}throw new ia("The client is not logged in. Cannot do the operation",yI);case 3:if("JOINED"===this.joinState){P.next=5;break}throw new ia("The channel does not join. Cannot do the operation",xI);case 5:return R=this.getSession().requestChannelMemberList(this.channelId),P.next=8,R.pipe(Wa(function(F){return F.memberInfos.map(function(G){return G.account})})).toPromise();case 8:return M=P.sent,this.info("Channel %s - get members success, %o",wb(this.channelId),M.map(wb)),P.abrupt("return",M);case 13:if(P.prev=13,P.t0=P.catch(0),!Sa(P.t0)){P.next=18;break}throw this.logError(P.t0),P.t0;case 18:throw new id("The channel members get failure",vI);case 19:case"end":return P.stop()}},_,this,[[0,13]])}));return function(){return p.apply(this,arguments)}}()},{key:"clearChannel",value:function(){var p=za(W.mark(function _(R){var M=this;return W.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(R.emit("channelLeft",this.channelId),"JOINING"!==this.joinState){P.next=4;break}return P.next=4,this.joinPromise;case 4:this.joinState="LEFT",this.memberLeftLru.empty(),this.memberJoinedLru.empty(),this.attributesSeqLru.empty(),this.memberJoinStateLru.empty(),this.memberCount=0,R.removeListener("channelTextMessage",this.onChannelTextMessage),R.removeListener("channelRawMessage",this.onChannelRawMessage),R.removeListener("memberNotice",this.onMemberNotice),R.removeListener("channelAttributesUpdated",this.onAttributesUpdated),R.removeListener("channelMetaDataUpdated",this.onChannelMetaDataUpdated),this.client.internalEmitter.removeListener("channelMemberCountUpdated",this.onChannelMemberCountUpdated),this.client.internalEmitter.removeListener("LOGOUT",this.onLogout),R.usedChannelIds=R.usedChannelIds.filter(function(F){return F!==M.channelId});case 18:case"end":return P.stop()}},_,this)}));return function(_){return p.apply(this,arguments)}}()}]),t}(Dd()),Na(lb.prototype,"join",[je],Object.getOwnPropertyDescriptor(lb.prototype,"join"),lb.prototype),Na(lb.prototype,"leave",[je],Object.getOwnPropertyDescriptor(lb.prototype,"leave"),lb.prototype),Na(lb.prototype,"sendMessage",[je],Object.getOwnPropertyDescriptor(lb.prototype,"sendMessage"),lb.prototype),Na(lb.prototype,"getChannelMetadata",[gb],Object.getOwnPropertyDescriptor(lb.prototype,"getChannelMetadata"),lb.prototype),Na(lb.prototype,"setChannelMetadata",[gb],Object.getOwnPropertyDescriptor(lb.prototype,"setChannelMetadata"),lb.prototype),Na(lb.prototype,"clearChannelMetadata",[gb],Object.getOwnPropertyDescriptor(lb.prototype,"clearChannelMetadata"),lb.prototype),Na(lb.prototype,"addChannelMetadata",[gb],Object.getOwnPropertyDescriptor(lb.prototype,"addChannelMetadata"),lb.prototype),Na(lb.prototype,"updateChannelMetadata",[gb],Object.getOwnPropertyDescriptor(lb.prototype,"updateChannelMetadata"),lb.prototype),Na(lb.prototype,"deleteChannelMetadata",[gb],Object.getOwnPropertyDescriptor(lb.prototype,"deleteChannelMetadata"),lb.prototype),Na(lb.prototype,"getMembers",[gb],Object.getOwnPropertyDescriptor(lb.prototype,"getMembers"),lb.prototype),lb),ka,Jc=Oa.ConnectionChangeReason,Ea=Oa.ConnectionState,FA={DISCONNECTED:1,CONNECTING:2,CONNECTED:3,RECONNECTING:4,ABORTED:5},JP={LOGIN:1,LOGIN_SUCCESS:2,LOGIN_FAILURE:3,LOGIN_TIMEOUT:4,INTERRUPTED:5,LOGOUT:6,BANNED_BY_SERVER:7,REMOTE_LOGIN:8,TOKEN_EXPIRED:9},KP=(ka=function(r){function t(p,_,R,M){ab(this,t);var P=l.call(this,_,"RtmClient",!0);return E(L(P),"connectionState",Ea.DISCONNECTED),E(L(P),"internalEmitter",new kb),E(L(P),"context",void 0),E(L(P),"attributes",{}),E(L(P),"loginPromise",void 0),E(L(P),"attributeDrafts",new Set),E(L(P),"session",void 0),E(L(P),"lastLoginTime",void 0),E(L(P),"reconnId",0),E(L(P),"channelAttributesCacheLru",new ue(void 0,{maxlen:1e4})),E(L(P),"invitationManager",void 0),E(L(P),"subscribedPeerStatusCache",{}),E(L(P),"subscribedUserMetaCache",{}),E(L(P),"pendingPeerStatusSubCount",0),E(L(P),"peerStatusSeqLru",new ue(void 0,{maxlen:1e4})),E(L(P),"peerUnreachableTimers",{}),E(L(P),"setParameters",void 0),E(L(P),"updateConfig",void 0),E(L(P),"blacklistedIP",{}),E(L(P),"TokenPrivilegeWillExpireHandler",function(){P.emit("TokenPrivilegeWillExpire")}),E(L(P),"userMetaDataUpdatedHandler",function(F){var G=F.uid;F=F.data,P.subscribedUserMetaCache[G]&&P.emit("UserMetaDataUpdated",G,F)}),E(L(P),"userDropHandler",function(F){if(P.connectionState!==Ea.ABORTED)switch(F){case 2:P.logError("Server banned because of token is expired"),P.onConnectionStateChanged(Ea.ABORTED,Jc.TOKEN_EXPIRED),P.emit("TokenExpired");break;case 11:P.logError("Kicked off by remote session"),P.onConnectionStateChanged(Ea.ABORTED,Jc.REMOTE_LOGIN);break;case 14:case 15:case 16:P.logError("Server banned because of illegal ".concat({14:"User ID",15:"IP",16:"Channel Name"}[F])),P.onConnectionStateChanged(Ea.ABORTED,Jc.BANNED_BY_SERVER);break;case 10019:P.logError("Kicked off by authorization"),P.onConnectionStateChanged(Ea.ABORTED,Jc.BANNED_BY_SERVER);break;default:P.logError("User kicked off for unknown code: ".concat(F)),P.onConnectionStateChanged(Ea.ABORTED,Jc.INTERRUPTED)}}),P.context=new yL(p,R,_),P.context.config=R,P.setParameters=M.bind(L(P)),P.updateConfig=M.bind(L(P)),P.invitationManager=new GP(function(){return P.session},_),P.invitationManager.on("remoteInvitationInstance",function(F){P.emit("RemoteInvitationReceived",F)}),P.setMaxListeners(512),P.internalEmitter.setMaxListeners(512),P}nb(t,r);var o,l=ob(t);return Qb(t,[{key:"renewToken",value:(o=za(W.mark(function p(_){var R,P,F,G=this;return W.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if("string"==typeof _&&0!==_.length){z.next=2;break}throw new ja("Invalid argument",KI);case 2:if(this.connectionState!==Ea.ABORTED){z.next=5;break}return z.next=5,new Promise(function(){});case 5:if(this.connectionState===Ea.CONNECTED||this.connectionState===Ea.RECONNECTING){z.next=7;break}throw new ia("The client is not logged in",Mw);case 7:if(void 0!==this.session){z.next=9;break}throw new rb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return z.prev=9,R=this.context.token,this.context.token=_,z.next=14,this.session.connection.apClient.getApEdgeInfo$(!1).pipe(Zf(function(){return Error("No available edge address to connect")}),Zg(function(we){return we.pipe(Ka(function(xe){if(Sa(xe))throw xe}),mf(2500),Xb(4))}),Xb(1),Oc(2e4),Rb(function(we){return uc(we)&&G.warn("renewToken timed out"),Va(we)})).toPromise();case 14:P=z.sent.ticket,z.next=27;break;case 18:if(z.prev=18,z.t0=z.catch(9),this.context.token=R,z.t0.code!==Fw&&z.t0.code!==Gw){z.next=23;break}throw new Gh("Invalid token",MI);case 23:if(z.t0.code!==bl){z.next=25;break}throw new Gh("The token expired",LI);case 25:if(!uc(z.t0)){z.next=27;break}throw new Pc("Renew token timed out",jp);case 27:F=this.session,this.session.requestUpdateEdgeTicket(P).toPromise().then(function(we){if(0!==we.code)throw new Pa(["RenewToken failure. The response code is %d",we.code],jp);F.curLoginSockets.filter(function(xe){return void 0!==xe}).forEach(function(xe){return xe.ticket=P})});case 29:case"end":return z.stop()}},p,this,[[9,18]])})),function(p){return o.apply(this,arguments)})},{key:"queryPeersOnlineStatus",value:function(){var p=za(W.mark(function _(R){var P,F=this;return W.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(this.connectionState===Ea.CONNECTED){G.next=2;break}throw new ia("The client is not logged in",JI);case 2:if(void 0!==this.session){G.next=4;break}throw new rb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(!(!Array.isArray(R)||0===R.length||R.some(function(z){return!yb(z)})||256<R.length)){G.next=6;break}throw new ja("invalid arguments",Lw);case 6:return G.next=8,this.session.requestPeersOnlineStatus(R).toPromise();case 8:return P=Pe(Ro(G.sent.userInfos,"account"),function(z){return!!z.ts}),Object.keys(P).forEach(function(z){if(z in F.subscribedPeerStatusCache&&F.subscribedPeerStatusCache[z]!==Oa.PeerOnlineState.UNREACHABLE){var we=P[z]?Oa.PeerOnlineState.ONLINE:Oa.PeerOnlineState.OFFLINE;F.emit("PeersOnlineStatusChanged",E({},z,we)),F.subscribedPeerStatusCache[z]=we}}),G.abrupt("return",P);case 12:case"end":return G.stop()}},_,this)}));return function(_){return p.apply(this,arguments)}}()},{key:"getChannelMemberCount",value:function(){var p=za(W.mark(function _(R){var M,P,G,z,we,xe,_n,fa;return W.wrap(function(da){for(;;)switch(da.prev=da.next){case 0:if(this.connectionState===Ea.CONNECTED){da.next=2;break}throw new ia("The client is not logged in",uI);case 2:if(void 0!==this.session){da.next=4;break}throw new rb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(R)&&R.every(function(Ta){return"string"==typeof Ta})&&0!==R.length){da.next=6;break}throw new ja("Invalid arguments: channelIds",tw);case 6:if(!(32<R.length)){da.next=8;break}throw new ja("getChannelMemberCount exceed limit of 32 channelIds",tI);case 8:M=0;case 9:if(!(M<R.length)){da.next=16;break}if(yb(P=R[M])){da.next=13;break}throw new ja(["getChannelMemberCount channel id %s is invalid",P],tw);case 13:M++,da.next=9;break;case 16:return da.next=18,this.session.requestGetChannelMemberCount(R).toPromise();case 18:for(G=da.sent.groupInfos,z={},we=0;we<G.length;we++)fa=(xe=G[we]).memberCount,yb(_n=xe.group)&&"number"==typeof fa&&(this.internalEmitter.emit("channelMemberCountUpdated",_n,fa),z[_n]=fa);return da.abrupt("return",z);case 23:case"end":return da.stop()}},_,this)}));return function(_){return p.apply(this,arguments)}}()},{key:"setLocalUserAttributes",value:function(){var p=za(W.mark(function _(R){var M,P;return W.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(ri({attributes:R,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),this.connectionState===Ea.CONNECTED){F.next=3;break}throw new ia("The client is not logged in",Cd);case 3:if(void 0!==this.session){F.next=5;break}throw new rb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 5:return M=this.session.requestSetLocalUserAttributes(R).toPromise(),this.attributeDrafts.add(P={attribute:R,promise:M}),F.prev=8,F.next=11,M;case 11:this.attributes=R,F.next=19;break;case 14:if(F.prev=14,F.t0=F.catch(8),!Sa(F.t0)){F.next=18;break}throw F.t0;case 18:throw new ja("arguments is not valid",Ub);case 19:return F.prev=19,this.attributeDrafts.delete(P),F.finish(19);case 22:case"end":return F.stop()}},_,this,[[8,14,19,22]])}));return function(_){return p.apply(this,arguments)}}()},{key:"setChannelAttributes",value:function(){var p=za(W.mark(function _(R,M){var F,G,z,we,xe=arguments;return W.wrap(function(_n){for(;;)switch(_n.prev=_n.next){case 0:if(G=void 0!==(F=(2<xe.length&&void 0!==xe[2]?xe[2]:{}).enableNotificationToChannelMembers)&&F,ri({attributes:M,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:32768}),this.connectionState===Ea.CONNECTED){_n.next=4;break}throw new ia("The client is not logged in",Cd);case 4:if(void 0!==this.session){_n.next=6;break}throw new rb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return z=this.session.requestSetChannelAttributes(R,M,G).toPromise(),_n.prev=7,_n.next=10,z;case 10:we=Pe(M,function(fa){return new Blob([fa]).size}),this.channelAttributesCacheLru.set(R,we),_n.next=19;break;case 14:if(_n.prev=14,_n.t0=_n.catch(7),!Sa(_n.t0)){_n.next=18;break}throw _n.t0;case 18:throw new ja("arguments is not valid",Ub);case 19:case"end":return _n.stop()}},_,this,[[7,14]])}));return function(_,R){return p.apply(this,arguments)}}()},{key:"addOrUpdateLocalUserAttributes",value:function(){var p=za(W.mark(function _(R){var M,P,F;return W.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(M=tb(tb({},this.attributes),R),ri({attributes:R,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),ri({attributes:M,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),this.connectionState===Ea.CONNECTED){G.next=5;break}throw new ia("The client is not logged in",Cd);case 5:if(void 0!==this.session){G.next=7;break}throw new rb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 7:return P=this.session.requestAddOrUpdateLocalUserAttributes(R).toPromise(),this.attributeDrafts.add(F={attribute:M,promise:P}),G.prev=10,G.next=13,P;case 13:this.attributes=M,G.next=21;break;case 16:if(G.prev=16,G.t0=G.catch(10),!Sa(G.t0)){G.next=20;break}throw G.t0;case 20:throw new ja("arguments is not valid",Lw);case 21:return G.prev=21,this.attributeDrafts.delete(F),G.finish(21);case 24:case"end":return G.stop()}},_,this,[[10,16,21,24]])}));return function(_){return p.apply(this,arguments)}}()},{key:"addOrUpdateChannelAttributes",value:function(){var p=za(W.mark(function _(R,M){var F,G,z,we,xe,_n,fa=arguments;return W.wrap(function(da){for(;;)switch(da.prev=da.next){case 0:if(G=void 0!==(F=(2<fa.length&&void 0!==fa[2]?fa[2]:{}).enableNotificationToChannelMembers)&&F,z=this.channelAttributesCacheLru.get(R,{}),we=Pe(M,function(Ta){return new Blob([Ta]).size}),xe=tb(tb({},z),we),ri({attributes:M,attrSizeMap:xe,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:32768}),this.connectionState===Ea.CONNECTED){da.next=7;break}throw new ia("The client is not logged in",Cd);case 7:if(void 0!==this.session){da.next=9;break}throw new rb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return _n=this.session.requestAddOrUpdateChannelAttributes(R,M,G).toPromise(),da.prev=10,da.next=13,_n;case 13:this.channelAttributesCacheLru.set(R,xe),da.next=21;break;case 16:if(da.prev=16,da.t0=da.catch(10),!Sa(da.t0)){da.next=20;break}throw da.t0;case 20:throw new ja("arguments is not valid",Ub);case 21:case"end":return da.stop()}},_,this,[[10,16]])}));return function(_,R){return p.apply(this,arguments)}}()},{key:"deleteLocalUserAttributesByKeys",value:function(){var p=za(W.mark(function _(R){var M,P,F;return W.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Array.isArray(R)&&0!==R.length&&!R.some(function(we){return 0===we.length})){z.next=2;break}throw new ia("arguments is not valid",Ub);case 2:if(this.connectionState===Ea.CONNECTED){z.next=4;break}throw new ia("The client is not logged in",Cd);case 4:if(void 0!==this.session){z.next=6;break}throw new rb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return M=this.session.requestDeleteLocalUserAttributesByKeys(R).toPromise(),P={attribute:Oo(this.attributes,R),promise:M},this.attributeDrafts.add(P),z.prev=9,z.next=12,M;case 12:for(F=0;F<R.length;F++)delete this.attributes[R[F]];z.next=20;break;case 15:if(z.prev=15,z.t0=z.catch(9),!Sa(z.t0)){z.next=19;break}throw z.t0;case 19:throw new ja("arguments is not valid",Ub);case 20:return z.prev=20,this.attributeDrafts.delete(P),z.finish(20);case 23:case"end":return z.stop()}},_,this,[[9,15,20,23]])}));return function(_){return p.apply(this,arguments)}}()},{key:"deleteChannelAttributesByKeys",value:function(){var p=za(W.mark(function _(R,M){var F,G,z,we,xe,fa=arguments;return W.wrap(function(da){for(;;)switch(da.prev=da.next){case 0:if(G=void 0!==(F=(2<fa.length&&void 0!==fa[2]?fa[2]:{}).enableNotificationToChannelMembers)&&F,Array.isArray(M)&&0!==M.length&&yb(R)&&!M.some(function(Ta){return 0===Ta.length||512<Ta.length})){da.next=3;break}throw new ia("arguments is not valid",Ub);case 3:if(this.connectionState===Ea.CONNECTED){da.next=5;break}throw new ia("The client is not logged in",Cd);case 5:if(void 0!==this.session){da.next=7;break}throw new rb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 7:return z=this.session.requestDeleteChannelAttributesByKeys(R,M,G).toPromise(),da.prev=8,da.next=11,z;case 11:if(we=this.channelAttributesCacheLru.get(R))for(xe=0;xe<M.length;xe++)delete we[M[xe]];da.next=20;break;case 15:if(da.prev=15,da.t0=da.catch(8),!Sa(da.t0)){da.next=19;break}throw da.t0;case 19:throw new ja("arguments is not valid",Ub);case 20:case"end":return da.stop()}},_,this,[[8,15]])}));return function(_,R){return p.apply(this,arguments)}}()},{key:"clearLocalUserAttributes",value:function(){var p=za(W.mark(function _(){var R,M;return W.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(this.connectionState===Ea.CONNECTED){P.next=2;break}throw new ia("The client is not logged in",Cd);case 2:if(void 0!==this.session){P.next=4;break}throw new rb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return R=this.session.requestClearLocalUserAttributes().toPromise(),this.attributeDrafts.add(M={attribute:{},promise:R}),P.prev=7,P.next=10,R;case 10:this.attributes={},P.next=18;break;case 13:if(P.prev=13,P.t0=P.catch(7),!Sa(P.t0)){P.next=17;break}throw P.t0;case 17:throw new ja("arguments is not valid",Ub);case 18:return P.prev=18,this.attributeDrafts.delete(M),P.finish(18);case 21:case"end":return P.stop()}},_,this,[[7,13,18,21]])}));return function(){return p.apply(this,arguments)}}()},{key:"clearChannelAttributes",value:function(){var p=za(W.mark(function _(R){var P,F,G,z=arguments;return W.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:if(F=void 0!==(P=(1<z.length&&void 0!==z[1]?z[1]:{}).enableNotificationToChannelMembers)&&P,this.connectionState===Ea.CONNECTED){we.next=3;break}throw new ia("The client is not logged in",Cd);case 3:if(void 0!==this.session){we.next=5;break}throw new rb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 5:return G=this.session.requestClearChannelAttributes(R,F).toPromise(),we.prev=6,we.next=9,G;case 9:this.channelAttributesCacheLru.delete(R),we.next=17;break;case 12:if(we.prev=12,we.t0=we.catch(6),!Sa(we.t0)){we.next=16;break}throw we.t0;case 16:throw new ja("arguments is not valid",Ub);case 17:case"end":return we.stop()}},_,this,[[6,12]])}));return function(_){return p.apply(this,arguments)}}()},{key:"getUserAttributes",value:function(){var p=za(W.mark(function _(R){var P,F;return W.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(yb(R)){G.next=2;break}throw new ja("Not a valid user ID",Ub);case 2:if(this.connectionState===Ea.CONNECTED){G.next=4;break}throw new ia("The client is not logged in",Cd);case 4:if(void 0!==this.session){G.next=6;break}throw new rb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return G.prev=6,G.next=9,this.session.requestGetUserAttributeKeys(R).toPromise();case 9:return P=G.sent.keys,G.next=13,this.session.requestGetUserAttributesByKeys(R,P.slice(0,512)).toPromise();case 13:F=G.sent,G.next=21;break;case 16:if(G.prev=16,G.t0=G.catch(6),!Sa(G.t0)){G.next=20;break}throw G.t0;case 20:throw new ja("arguments is not valid",Ub);case 21:return G.abrupt("return",Dv(F.attributeInfos.map(function(z){return[z.key,z.value]})));case 22:case"end":return G.stop()}},_,this,[[6,16]])}));return function(_){return p.apply(this,arguments)}}()},{key:"getChannelAttributes",value:function(){var p=za(W.mark(function _(R){var P,G,z,we,xe,_n,fa,da,Ta;return W.wrap(function(Da){for(;;)switch(Da.prev=Da.next){case 0:if(yb(R)){Da.next=2;break}throw new ja("Not a valid channel ID",Ub);case 2:if(this.connectionState===Ea.CONNECTED){Da.next=4;break}throw new ia("The client is not logged in",Cd);case 4:if(void 0!==this.session){Da.next=6;break}throw new rb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return Da.prev=6,Da.next=9,this.session.requestGetChannelAttributesKeys(R).toPromise();case 9:return P=Da.sent.keys,Da.next=13,this.session.requestGetChannelAttributesByKeys(R,P).toPromise();case 13:G=Da.sent.attributeMaps,Da.next=22;break;case 17:if(Da.prev=17,Da.t0=Da.catch(6),!Sa(Da.t0)){Da.next=21;break}throw Da.t0;case 21:throw new ja("arguments is not valid",Ub);case 22:z={},we=0;case 24:if(!(we<G.length)){Da.next=32;break}if(fa=(xe=G[we]).ms,da=xe.value,Ta=xe.origin,"string"==typeof(_n=xe.key)&&D.isLong(fa)&&"string"==typeof da&&yb(Ta)){Da.next=28;break}return Da.abrupt("break",32);case 28:z[_n]={value:da,lastUpdateUserId:Ta,lastUpdateTs:fa.toNumber()};case 29:we++,Da.next=24;break;case 32:return this.channelAttributesCacheLru.set(R,Pe(z,function(Ja){return new Blob([Ja.value]).size})),Da.abrupt("return",z);case 34:case"end":return Da.stop()}},_,this,[[6,17]])}));return function(_){return p.apply(this,arguments)}}()},{key:"getChannelAttributesByKeys",value:function(){var p=za(W.mark(function _(R,M){var F,G,z,we,xe,_n,fa,da,Ta;return W.wrap(function(Da){for(;;)switch(Da.prev=Da.next){case 0:if(this.connectionState===Ea.CONNECTED){Da.next=2;break}throw new ia("The client is not logged in",Cd);case 2:if(void 0!==this.session){Da.next=4;break}throw new rb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return os(R,M),Da.prev=5,Da.next=8,this.session.requestGetChannelAttributesByKeys(R,M).toPromise();case 8:F=Da.sent.attributeMaps,Da.next=17;break;case 12:if(Da.prev=12,Da.t0=Da.catch(5),!Sa(Da.t0)){Da.next=16;break}throw Da.t0;case 16:throw new ja("arguments is not valid",Ub);case 17:G={},z=this.channelAttributesCacheLru.get(R,{}),we=0;case 20:if(!(we<F.length)){Da.next=29;break}if(fa=(xe=F[we]).ms,da=xe.value,Ta=xe.origin,"string"==typeof(_n=xe.key)&&D.isLong(fa)&&"string"==typeof da&&yb(Ta)){Da.next=24;break}return Da.abrupt("break",29);case 24:z[_n]=new Blob([da]).size,G[_n]={value:da,lastUpdateUserId:Ta,lastUpdateTs:fa.toNumber()};case 26:we++,Da.next=20;break;case 29:return this.channelAttributesCacheLru.set(R,z),Da.abrupt("return",G);case 31:case"end":return Da.stop()}},_,this,[[5,12]])}));return function(_,R){return p.apply(this,arguments)}}()},{key:"getUserAttributesByKeys",value:function(){var p=za(W.mark(function _(R,M){var P;return W.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(this.connectionState===Ea.CONNECTED){F.next=2;break}throw new ia("The client is not logged in",Cd);case 2:if(void 0!==this.session){F.next=4;break}throw new rb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return os(R,M),F.prev=5,F.next=8,this.session.requestGetUserAttributesByKeys(R,M).toPromise();case 8:P=F.sent,F.next=16;break;case 11:if(F.prev=11,F.t0=F.catch(5),!Sa(F.t0)){F.next=15;break}throw F.t0;case 15:throw new ja("arguments is not valid",Ub);case 16:return F.abrupt("return",Dv(P.attributeInfos.map(function(G){return[G.key,G.value]})));case 17:case"end":return F.stop()}},_,this,[[5,11]])}));return function(_,R){return p.apply(this,arguments)}}()},{key:"getUserMetadata",value:function(){var p=za(W.mark(function _(R){var P;return W.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(this.connectionState===Ea.CONNECTED){F.next=2;break}throw new ia("The client is not logged in",oc);case 2:if(void 0!==this.session){F.next=4;break}throw new rb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(!R.split("").includes(".")){F.next=6;break}throw new ja("The uid cannot contain the character .",Mb);case 6:return F.prev=6,F.next=9,this.session.requestGetLocalMetaData(R).toPromise();case 9:return P=Wm(F.sent),F.abrupt("return",P);case 14:if(F.prev=14,F.t0=F.catch(6),!Sa(F.t0)){F.next=18;break}throw F.t0;case 18:throw new ja("arguments is not valid",Mb);case 19:case"end":return F.stop()}},_,this,[[6,14]])}));return function(_){return p.apply(this,arguments)}}()},{key:"setLocalUserMetadata",value:function(){var p=za(W.mark(function _(R,M){return W.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(this.connectionState===Ea.CONNECTED){P.next=2;break}throw new ia("The client is not logged in",oc);case 2:if(void 0!==this.session){P.next=4;break}throw new rb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return P.prev=4,P.next=7,this.session.requestSetLocalMetadata(R,M).toPromise();case 7:P.next=14;break;case 9:if(P.prev=9,P.t0=P.catch(4),!Sa(P.t0)){P.next=13;break}throw P.t0;case 13:throw new ja("arguments is not valid",Mb);case 14:case"end":return P.stop()}},_,this,[[4,9]])}));return function(_,R){return p.apply(this,arguments)}}()},{key:"clearLocalUserMetadata",value:function(){var p=za(W.mark(function _(R){return W.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(this.connectionState===Ea.CONNECTED){M.next=2;break}throw new ia("The client is not logged in",oc);case 2:if(void 0!==this.session){M.next=4;break}throw new rb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return M.prev=4,M.next=7,this.session.requestClearLocalMetadata(R).toPromise();case 7:M.next=14;break;case 9:if(M.prev=9,M.t0=M.catch(4),!Sa(M.t0)){M.next=13;break}throw M.t0;case 13:throw new ja("arguments is not valid",Mb);case 14:case"end":return M.stop()}},_,this,[[4,9]])}));return function(_){return p.apply(this,arguments)}}()},{key:"addLocalUserMetadata",value:function(){var p=za(W.mark(function _(R,M){return W.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(this.connectionState===Ea.CONNECTED){P.next=2;break}throw new ia("The client is not logged in",oc);case 2:if(void 0!==this.session){P.next=4;break}throw new rb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return P.prev=4,P.next=7,this.session.requestAddLocalMetadata(R,M).toPromise();case 7:P.next=14;break;case 9:if(P.prev=9,P.t0=P.catch(4),!Sa(P.t0)){P.next=13;break}throw P.t0;case 13:throw new ja("arguments is not valid",Mb);case 14:case"end":return P.stop()}},_,this,[[4,9]])}));return function(_,R){return p.apply(this,arguments)}}()},{key:"updateLocalUserMetadata",value:function(){var p=za(W.mark(function _(R,M){return W.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(this.connectionState===Ea.CONNECTED){P.next=2;break}throw new ia("The client is not logged in",oc);case 2:if(void 0!==this.session){P.next=4;break}throw new rb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return P.prev=4,P.next=7,this.session.requestUpdateLocalMetadata(R,M).toPromise();case 7:P.next=14;break;case 9:if(P.prev=9,P.t0=P.catch(4),!Sa(P.t0)){P.next=13;break}throw P.t0;case 13:throw new ja("arguments is not valid",Mb);case 14:case"end":return P.stop()}},_,this,[[4,9]])}));return function(_,R){return p.apply(this,arguments)}}()},{key:"deleteLocalUserMetadata",value:function(){var p=za(W.mark(function _(R,M){return W.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(this.connectionState===Ea.CONNECTED){P.next=2;break}throw new ia("The client is not logged in",oc);case 2:if(void 0!==this.session){P.next=4;break}throw new rb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return P.prev=4,P.next=7,this.session.requestDeleteLocalMetadata(R,M).toPromise();case 7:P.next=14;break;case 9:if(P.prev=9,P.t0=P.catch(4),!Sa(P.t0)){P.next=13;break}throw P.t0;case 13:throw new ja("arguments is not valid",Mb);case 14:case"end":return P.stop()}},_,this,[[4,9]])}));return function(_,R){return p.apply(this,arguments)}}()},{key:"subscribeUserMetadata",value:function(){var p=za(W.mark(function _(R){return W.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(this.connectionState===Ea.CONNECTED){M.next=2;break}throw new ia("The client is not logged in",oc);case 2:if(void 0!==this.session){M.next=4;break}throw new rb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(yb(R)){M.next=6;break}throw new ja("Not a valid user ID",dl);case 6:if(!R.split("").includes(".")){M.next=8;break}throw new ja("The uid cannot contain the character .",dl);case 8:if(!(51<=Object.values(this.subscribedUserMetaCache).filter(function(P){return P===Oa.subscribedState.SUBSCRIBED}).length)){M.next=10;break}throw new Dc("Subscribed user metadata overflows",OI);case 10:return M.prev=10,M.next=13,this.session.requestSubscribeUserMetadata(R,"NORMAL").toPromise();case 13:this.subscribedUserMetaCache[R]=Oa.subscribedState.SUBSCRIBED,M.next=21;break;case 16:if(M.prev=16,M.t0=M.catch(10),!Sa(M.t0)){M.next=20;break}throw M.t0;case 20:throw new ja("arguments is not valid",Mb);case 21:case"end":return M.stop()}},_,this,[[10,16]])}));return function(_){return p.apply(this,arguments)}}()},{key:"unsubscribeUserMetadata",value:function(){var p=za(W.mark(function _(R){return W.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(this.connectionState===Ea.CONNECTED){M.next=2;break}throw new ia("The client is not logged in",oc);case 2:if(void 0!==this.session){M.next=4;break}throw new rb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(yb(R)){M.next=6;break}throw new ja("Not a valid user ID",dl);case 6:if(!R.split("").includes(".")){M.next=8;break}throw new ja("The uid cannot contain the character .",dl);case 8:if(this.subscribedUserMetaCache[R]&&this.subscribedUserMetaCache[R]!==Oa.subscribedState.UNSUBSCRIBED){M.next=10;break}throw new ia("The user can not be unsubscribed",PI);case 10:return M.prev=10,M.next=13,this.session.requestUnsubscribeUserMetadata(R);case 13:this.subscribedUserMetaCache[R]=Oa.subscribedState.UNSUBSCRIBED,M.next=21;break;case 16:if(M.prev=16,M.t0=M.catch(10),!Sa(M.t0)){M.next=20;break}throw M.t0;case 20:throw new ja("arguments is not valid",Mb);case 21:case"end":return M.stop()}},_,this,[[10,16]])}));return function(_){return p.apply(this,arguments)}}()},{key:"login",value:function(){var p=za(W.mark(function _(R){var M,P,F,G,z,we;return W.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:if(Zr(!0),P=Rj(),F=R.token,R.token===this.context.appId&&(F=void 0),$a("Session",{appId:this.context.appId,did:navigator.userAgent,elapse:Nb(this.session&&this.session.startTime),index:{index1:R.uid,index2:this.context.appId,index3:"enableLogUpload=".concat(this.context.config.enableLogUpload)},installId:hj,lts:D.fromNumber(Date.now()),os:7,sid:fc(P),token:F||"",userId:R.uid,ver:"1.6.0-205",buildno:928,subVersion:228,version:7},null!==(M=this.context.config.enableCloudProxy)&&void 0!==M&&M,!0),Lg(R)&&yb(R.uid)){xe.next=7;break}throw new ja("not a valid user id",al);case 7:if("string"!=typeof F||!F){xe.next=11;break}this.context.token=F,xe.next=13;break;case 11:if("string"==typeof F||null==F){xe.next=13;break}throw new ja('The "token" is not a valid string.',al);case 13:return G=Date.now(),this.context.sid=fc(P),this.loginPromise=this.loginImpl({uid:R.uid,instanceId:P}),this.info("RTM Client logging in as ".concat(wb(R.uid))),xe.prev=17,xe.next=20,this.loginPromise;case 20:return xe.next=22,null===(z=this.session)||void 0===z?void 0:z.requestSubscribeUserMetadata(R.uid,"JOIN").toPromise();case 22:this.subscribedUserMetaCache[R.uid]=Oa.subscribedState.SUBSCRIBED,xe.next=31;break;case 25:throw xe.prev=25,xe.t0=xe.catch(17),Sa(xe.t0)&&$a("Link",{ackedServerIp:"",destServerIp:"",ec:xe.t0.code||1,sc:xe.t0.serverCode,elapse:Nb(this.session&&this.session.startTime),lts:D.fromNumber(Date.now()),responseTime:Date.now()-G,sid:fc(P),userId:R.uid},null!==(we=this.context.config.enableCloudProxy)&&void 0!==we&&we),this.context.token=void 0,this.context.socketUseProxy=!1,xe.t0;case 31:return xe.prev=31,this.loginPromise=void 0,xe.finish(31);case 34:this.context.socketUseProxy&&this.emit("FallbackProxyConnected"),Zr(!1);case 36:case"end":return xe.stop()}},_,this,[[17,25,31,34]])}));return function(_){return p.apply(this,arguments)}}()},{key:"logout",value:function(){var p=za(W.mark(function _(){var R;return W.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(!this.loginPromise){M.next=3;break}return M.next=3,this.loginPromise;case 3:if(this.connectionState!==Ea.DISCONNECTED){M.next=6;break}throw this.logError("Already in logout state"),new ia("Logout failure. The client has already been logged out",Hw);case 6:if(this.internalEmitter.emit("LOGOUT"),this.connectionState!==Ea.ABORTED){M.next=11;break}return this.info('Reset connection state from "ABORTED" to "DISCONNECTED"'),this.onConnectionStateChanged(Ea.DISCONNECTED,Jc.LOGOUT),M.abrupt("return");case 11:if(void 0!==this.session){M.next=14;break}return this.onConnectionStateChanged(Ea.DISCONNECTED,Jc.LOGOUT),M.abrupt("return");case 14:return $a("Logout",{elapse:Nb(this.session.startTime),lts:D.fromNumber(Date.now()),sid:fc(this.session.instanceId),userId:this.context.uid},null!==(R=this.context.config.enableCloudProxy)&&void 0!==R&&R),M.next=17,this.session.logoutHandler();case 17:this.onConnectionStateChanged(Ea.DISCONNECTED,Jc.LOGOUT),this.log("Log out success");case 19:case"end":return M.stop()}},_,this)}));return function(){return p.apply(this,arguments)}}()},{key:"logoutSync",value:function(){var p,_=this;if(this.connectionState===Ea.DISCONNECTED)throw this.logError("Already in logout state"),new ia("Logout failure. The client has already been logged out",Hw);this.connectionState===Ea.ABORTED?this.info('Reset connection state from "ABORTED" to "DISCONNECTED"'):void 0!==this.session&&($a("Logout",{elapse:Nb(this.session.startTime),lts:D.fromNumber(Date.now()),sid:fc(this.session.instanceId),userId:this.context.uid},null!==(p=this.context.config.enableCloudProxy)&&void 0!==p&&p),this.session.logoutHandler().then(function(){_.log("Log out success")})),this.onConnectionStateChanged(Ea.DISCONNECTED,Jc.LOGOUT)}},{key:"sendMessageToPeer",value:function(){var p=za(W.mark(function _(R,M){var P,F,G=this;return W.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(vs(R,si),P="TEXT"===R.messageType?vb.P2pSMsgNoOfflineFlag:vb.P2pRMsgNoOfflineFlag,this.connectionState!==Ea.RECONNECTING){z.next=5;break}return F=Date.now(),z.abrupt("return",new Promise(function(we,xe){var _n,fa=(_n=za(W.mark(function Ta(){var Da;return W.wrap(function(Ja){for(;;)switch(Ja.prev=Ja.next){case 0:if(void 0!==G.session){Ja.next=2;break}throw new rb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 2:return Da=Date.now()-F,Ja.prev=3,Ja.t0=we,Ja.next=7,Uj({message:R,peerId:M,toPeer:!0,session:G.session,errorCodes:{NOT_LOGGED_IN:ip,TOO_OFTEN:Jw},diff:Da,logger:G.logger});case 7:Ja.t1=Ja.sent,(0,Ja.t0)(Ja.t1),Ja.next=18;break;case 11:Ja.prev=11,Ja.t2=Ja.catch(3),uc(Ja.t2)&&(G.session.emit("messageCount",{messageCategory:P,type:"common",key:"sentcount"}),G.session.emit("messageCount",{messageCategory:P,type:"common",key:"timeoutcount"}),xe(new Pc(vg(G.name,"sendMessageToPeer",1e4),hp))),Sa(Ja.t2)&&xe(Ja.t2),G.session.emit("messageCount",{messageCategory:P,type:"common",key:"sentcount"}),G.session.emit("messageCount",{messageCategory:P,type:"common",key:"unknowerrorcount"}),xe(new Pa("Peer-to-peer message send failure",{code:Iw,originalError:Ja.t2}));case 18:return Ja.prev=18,clearTimeout(da),Ja.finish(18);case 21:case"end":return Ja.stop()}},Ta,null,[[3,11,18,21]])})),function(){return _n.apply(this,arguments)});G.internalEmitter.once("RECONNECTED",fa);var da=setTimeout(function(){G.internalEmitter.off("RECONNECTED",fa),xe(new Pc(vg(G.name,"sendMessageToPeer",1e4),hp))},9e3)}));case 5:if(this.connectionState===Ea.CONNECTED){z.next=7;break}throw new ia("Failed to send the peer-to-peer message. The client is not logged in",ip);case 7:if(void 0!==this.session){z.next=9;break}throw new rb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return z.prev=9,z.next=12,Uj({message:R,peerId:M,toPeer:!0,session:this.session,errorCodes:{NOT_LOGGED_IN:ip,TOO_OFTEN:Jw},diff:0,logger:this.logger});case 12:return z.abrupt("return",z.sent);case 15:if(z.prev=15,z.t0=z.catch(9),!uc(z.t0)){z.next=21;break}throw this.session.emit("messageCount",{messageCategory:P,type:"common",key:"sentcount"}),this.session.emit("messageCount",{messageCategory:P,type:"common",key:"timeoutcount"}),new Pc(vg(this.name,"sendMessageToPeer",1e4),hp);case 21:if(!Sa(z.t0)){z.next=23;break}throw z.t0;case 23:throw this.session.emit("messageCount",{messageCategory:P,type:"common",key:"sentcount"}),this.session.emit("messageCount",{messageCategory:P,type:"common",key:"unknowerrorcount"}),new Pa("Peer-to-peer message send failure",{code:Iw,originalError:z.t0});case 26:case"end":return z.stop()}},_,this,[[9,15]])}));return function(_,R){return p.apply(this,arguments)}}()},{key:"createChannel",value:function(p){var _=this;if(!yb(p))throw new ja(["The %s in the arguments is invalid",Object.keys({channelId:p})[0]],sI);return new IP(p,function(){return _.session},this,this.logger)}},{key:"createMetadataItem",value:function(){return new Fs}},{key:"createLocalInvitation",value:function(p){if(!yb(p))throw new ja(["The %s in the arguments is invalid",Object.keys({calleeId:p})[0]],ve);return this.invitationManager.genLocalInvitation(p)}},{key:"subscribePeersOnlineStatus",value:function(){var p=za(W.mark(function _(R){var M,P,F,z,we,xe,_n,fa,da,Ta,Da,Ja,rl=this;return W.wrap(function(Nl){for(;;)switch(Nl.prev=Nl.next){case 0:if(this.connectionState===Ea.CONNECTED){Nl.next=2;break}throw new ia("The client is not logged in",kp);case 2:if(void 0!==this.session){Nl.next=4;break}throw new rb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(R)&&0!==R.length){Nl.next=6;break}throw new ja("Invalid arguments: peerIds",jj);case 6:M=0;case 7:if(!(M<R.length)){Nl.next=14;break}if(yb(P=R[M])){Nl.next=11;break}throw new ja(["subscribePeersOnlineStatus peer id %s is invalid",P],jj);case 11:M++,Nl.next=7;break;case 14:if(!(512<(F=R&&R.length?Do(R):[]).length+Object.keys(this.subscribedPeerStatusCache).length+this.pendingPeerStatusSubCount)){Nl.next=17;break}throw new Dc("Subscribed peers overflows",Ow);case 17:return this.pendingPeerStatusSubCount+=F.length,Nl.next=20,this.session.requestSubscribePeersOnlineStatus(F).toPromise();case 20:z=Nl.sent.errors,this.pendingPeerStatusSubCount-=F.length,we=[],xe=[],_n=0;case 26:if(!(_n<z.length)){Nl.next=34;break}if(da=(fa=z[_n]).code,"string"==typeof(Ta=fa.account)){Nl.next=30;break}throw new Pa("Returned account is invalid",Nw);case 30:0!==da&&we.push(Ta);case 31:_n++,Nl.next=26;break;case 34:for(Da=0;Da<F.length;Da++)we.includes(Ja=F[Da])||(xe.push(Ja),this.subscribedPeerStatusCache[Ja]=void 0);if(this.session.requestPeersOnlineStatus(xe).pipe(Wa(function(Vl){return Pe(Ro(Vl.userInfos,"account"),function(xl){return!!xl.ts})})).subscribe(function(Vl){Vl=Pe(Vl,function(xl,kd){return rl.subscribedPeerStatusCache[kd]=xl?Oa.PeerOnlineState.ONLINE:Oa.PeerOnlineState.OFFLINE}),rl.emit("PeersOnlineStatusChanged",Vl)}),0===we.length){Nl.next=38;break}throw new Pa("Subscription failed",Nw);case 38:case"end":return Nl.stop()}},_,this)}));return function(_){return p.apply(this,arguments)}}()},{key:"unsubscribePeersOnlineStatus",value:function(){var p=za(W.mark(function _(R){var M,P,F,G;return W.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:if(this.connectionState===Ea.CONNECTED){we.next=2;break}throw new ia("The client is not logged in",kp);case 2:if(void 0!==this.session){we.next=4;break}throw new rb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(R)&&0!==R.length){we.next=6;break}throw new ja("Invalid arguments: peerIds",jj);case 6:M=0;case 7:if(!(M<R.length)){we.next=14;break}if(yb(P=R[M])){we.next=11;break}throw new ja(["subscribePeersOnlineStatus peer id %s is invalid",P],jj);case 11:M++,we.next=7;break;case 14:if(!(512<R.length)){we.next=16;break}throw new Dc("Unsubscribed peers overflows",Ow);case 16:for(F=R&&R.length?Do(R):[],this.session.requestUnsubscribePeersOnlineStatus(F),G=0;G<F.length;G++)delete this.subscribedPeerStatusCache[F[G]];case 19:case"end":return we.stop()}},_,this)}));return function(_){return p.apply(this,arguments)}}()},{key:"queryPeersBySubscriptionOption",value:function(){var p=za(W.mark(function _(R){return W.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(this.connectionState===Ea.CONNECTED){M.next=2;break}throw new ia("The client is not logged in",kp);case 2:if(R!==Oa.PeerSubscriptionOption.ONLINE_STATUS){M.next=4;break}return M.abrupt("return",Object.keys(this.subscribedPeerStatusCache));case 4:throw new ja("Subscription option not supported",jj);case 5:case"end":return M.stop()}},_,this)}));return function(_){return p.apply(this,arguments)}}()},{key:"createMessage",value:function(p){return p}},{key:"loginImpl",value:function(){var p=za(W.mark(function _(R){var M,P,F,G,z,we,xe,fa=this;return W.wrap(function(da){for(;;)switch(da.prev=da.next){case 0:if(M=R.uid,G=void 0===(F=R.forceLoginTime)?0:F,z=P=R.instanceId,!(void 0!==this.lastLoginTime&&500>Date.now()-this.lastLoginTime)){da.next=4;break}throw new Fc(["The frequency of login exceeded the limit of %d queries per second",2],HI);case 4:if(this.connectionState===Ea.DISCONNECTED||0!==G){da.next=6;break}throw new ia("The SDK is either logging in or has logged in the Agora RTM system",FI);case 6:da.prev=6,this.context.uid=M,da.next=13;break;case 10:throw da.prev=10,da.t0=da.catch(6),new ja(["The %s in the arguments is invalid",Object.keys({uid:M})[0]],al);case 13:return 0===G&&this.onConnectionStateChanged(Ea.CONNECTING,Jc.LOGIN),(we=new Gx(this.context,this.logger,!1)).blacklistedIP=this.blacklistedIP,this.session=xe=new Pq(this.context,we,z,this.logger),xe.on("connectionLost",function(){fa.connectionState===Ea.CONNECTED&&(fa.onConnectionStateChanged(Ea.RECONNECTING,Jc.INTERRUPTED),fa.session)&&fa.session.once("userJoined",function(){fa.onConnectionStateChanged(Ea.CONNECTED,Jc.LOGIN_SUCCESS)})}),xe.on("tokenExpired",function(){fa.emit("TokenExpired")}),xe.on("tokenPrivilegeWillExpire",this.TokenPrivilegeWillExpireHandler),xe.once("userDrop",this.userDropHandler),this.session.on("peerTextMessage",function(Ta){fa.emit("MessageFromPeer",{text:Ta.text,messageType:Oa.MessageType.TEXT},Ta.peerId,Ta.properties)}),this.session.on("peerRawMessage",function(Ta){fa.emit("MessageFromPeer",{rawMessage:Ta.raw,description:Ta.desc,messageType:Oa.MessageType.RAW},Ta.peerId,Ta.properties)}),xe.on("instanceChanged",function(Ta){return z=Ta}),xe.on("peerOnlineStatusChanged",function(Ta){var Da=Ta.instance.toString()+Ta.state,Ja=fa.peerStatusSeqLru.get(Da);!Ja||Ta.seq.greaterThan(Ja)?(fa.peerStatusSeqLru.set(Da,Ta.seq),Ta.state!==fa.subscribedPeerStatusCache[Ta.peerId]&&fa.emit("PeersOnlineStatusChanged",E({},Ta.peerId,Ta.state)),fa.subscribedPeerStatusCache[Ta.peerId]=Ta.state,clearTimeout(fa.peerUnreachableTimers[Da]),Ta.state===Oa.PeerOnlineState.UNREACHABLE&&(fa.peerUnreachableTimers[Da]=setTimeout(function(){fa.subscribedPeerStatusCache[Ta.peerId]===Oa.PeerOnlineState.UNREACHABLE&&(fa.subscribedPeerStatusCache[Ta.peerId]=Oa.PeerOnlineState.ONLINE,fa.emit("PeersOnlineStatusChanged",E({},Ta.peerId,Oa.PeerOnlineState.ONLINE)))},3e4))):fa.log("peerOnlineStatusChanged dedup for %s, %d",Da,Ta.seq.toNumber())}),xe.on("invitationMessage",this.invitationManager.invitationMessageHandler.bind(this.invitationManager)),xe.on("channelAttributesUpdated",function(Ta){var Da=Ta.channelId;Ta=Ta.attributeMaps;for(var Ja={},rl=0;rl<Ta.length;rl++){var Nl=Ta[rl],Vl=Nl.key,xl=Nl.ms,kd=Nl.value;if(Nl=Nl.origin,"string"!=typeof Vl||!D.isLong(xl)||"string"!=typeof kd||!yb(Nl))break;Ja[Vl]=new Blob([kd]).size}fa.channelAttributesCacheLru.set(Da,Ja)}),xe.on("userJoined",function(Ta){if(0!==Object.keys(fa.attributes).length){if(void 0===fa.session)return;fa.session.requestSetLocalUserAttributes(fa.attributes,Ta).toPromise()}if(0!==fa.attributeDrafts.size)for(var Da=function(Nl,Vl){var xl=(Nl=Vl[Nl]).attribute;Nl.promise.then(function(){void 0!==fa.session&&fa.session.requestSetLocalUserAttributes(xl,Ta).toPromise()})},Ja=0,rl=Array.from(fa.attributeDrafts);Ja<rl.length;Ja++)Da(Ja,rl);0!==Object.keys(fa.subscribedPeerStatusCache).length&&xe.requestSubscribePeersOnlineStatus(Object.keys(fa.subscribedPeerStatusCache))}),xe.on("banEdgeIP",function(Ta){fa.banIP(Ta)}),xe.on("userMetaDataUpdated",this.userMetaDataUpdatedHandler),this.lastLoginTime=Date.now(),da.prev=33,da.next=36,xe.loginHandler().toPromise();case 36:da.next=54;break;case 38:if(da.prev=38,da.t1=da.catch(33),!("loginRespTimeout"===da.t1.name&&2>G)){da.next=47;break}return xe.removeAllListeners(),da.next=44,this.loginImpl({uid:M,instanceId:P,forceLoginTime:G+1});case 44:return da.abrupt("return");case 47:if(!uc(da.t1)){da.next=50;break}throw this.onConnectionStateChanged(Ea.DISCONNECTED,Jc.LOGIN_TIMEOUT),new Pc(vg(this.name,"login",12e3),GI);case 50:if(this.onConnectionStateChanged(Ea.DISCONNECTED,Jc.LOGIN_FAILURE),!Sa(da.t1)){da.next=53;break}throw da.t1;case 53:throw new Pa("Login failure",{code:Ew,originalError:da.t1});case 54:this.onConnectionStateChanged(Ea.CONNECTED,Jc.LOGIN_SUCCESS);case 55:case"end":return da.stop()}},_,this,[[6,10],[33,38]])}));return function(_){return p.apply(this,arguments)}}()},{key:"rennectSubscribeduserMetadata",value:function(){var p=za(W.mark(function _(R){var M,P;return W.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:M=0;case 1:if(!(M<R.length)){F.next=10;break}if(P=R[M],!this.session){F.next=7;break}return F.next=6,this.session.requestSubscribeUserMetadata(P,"RECONNECTED").toPromise();case 6:this.subscribedUserMetaCache[P]=Oa.subscribedState.SUBSCRIBED;case 7:M++,F.next=1;break;case 10:case"end":return F.stop()}},_,this)}));return function(_){return p.apply(this,arguments)}}()},{key:"onConnectionStateChanged",value:function(p,_){var R,M,P,F=this;p===Ea.RECONNECTING&&(this.reconnId+=1),$a("ConnectionStateChange",{elapse:Nb(this.session&&this.session.startTime),lts:D.fromNumber(Date.now()),newState:FA[p],oldState:FA[this.connectionState],reason:JP[_],sid:fc(this.session&&this.session.instanceId||D.fromNumber(0)),userId:this.context.uid,reconnId:this.reconnId},null!==(R=this.context.config.enableCloudProxy)&&void 0!==R&&R),this.connectionState===Ea.RECONNECTING&&p===Ea.CONNECTED&&(0!==Object.keys(this.subscribedPeerStatusCache).length&&void 0!==this.session&&this.session.requestPeersOnlineStatus(Object.keys(this.subscribedPeerStatusCache)).pipe(Wa(function(G){return Pe(Ro(G.userInfos,"account"),function(z){return!!z.ts})})).subscribe(function(G){G=Pe(G,function(z,we){return F.subscribedPeerStatusCache[we]=z?Oa.PeerOnlineState.ONLINE:Oa.PeerOnlineState.OFFLINE}),F.emit("PeersOnlineStatusChanged",G)}),0!==Object.keys(this.subscribedUserMetaCache).length&&void 0!==this.session&&this.rennectSubscribeduserMetadata(Object.keys(this.subscribedUserMetaCache)),null!==(M=this.session)&&void 0!==M&&M.usedChannelIds&&0<(null===(P=this.session)||void 0===P?void 0:P.usedChannelIds.length)&&this.session.usedChannelIds.map(function(G){var z;return null===(z=F.session)||void 0===z?void 0:z.requestSubscribeChannelMetadata(G,"RECONNECTED")}),this.internalEmitter.emit("RECONNECTED")),this.connectionState=p,p!==Ea.ABORTED&&p!==Ea.DISCONNECTED||(this.pendingPeerStatusSubCount=this.reconnId=0,this.attributes={},this.session&&(this.session.removeAllListeners(),this.session.msgDedupLru.empty(),this.session.dialogueSequenceLru.empty(),this.session.dialPendingMsgSubjectMap.clear()),this.channelAttributesCacheLru.empty(),this.peerStatusSeqLru.empty(),this.peerUnreachableTimers={},this.subscribedPeerStatusCache={},this.subscribedUserMetaCache={},this.attributeDrafts.clear(),this.context.token=void 0),this.emit("ConnectionStateChanged",p,_)}},{key:"banIP",value:function(p){var _;this.log("ip banned",p);var R=null!==(_=this.blacklistedIP[p])&&void 0!==_?_:0;this.blacklistedIP[p]=R+1}}]),t}(Dd()),Na(ka.prototype,"renewToken",[gb],Object.getOwnPropertyDescriptor(ka.prototype,"renewToken"),ka.prototype),Na(ka.prototype,"queryPeersOnlineStatus",[gb],Object.getOwnPropertyDescriptor(ka.prototype,"queryPeersOnlineStatus"),ka.prototype),Na(ka.prototype,"getChannelMemberCount",[gb],Object.getOwnPropertyDescriptor(ka.prototype,"getChannelMemberCount"),ka.prototype),Na(ka.prototype,"setLocalUserAttributes",[gb],Object.getOwnPropertyDescriptor(ka.prototype,"setLocalUserAttributes"),ka.prototype),Na(ka.prototype,"setChannelAttributes",[gb],Object.getOwnPropertyDescriptor(ka.prototype,"setChannelAttributes"),ka.prototype),Na(ka.prototype,"addOrUpdateLocalUserAttributes",[gb],Object.getOwnPropertyDescriptor(ka.prototype,"addOrUpdateLocalUserAttributes"),ka.prototype),Na(ka.prototype,"addOrUpdateChannelAttributes",[gb],Object.getOwnPropertyDescriptor(ka.prototype,"addOrUpdateChannelAttributes"),ka.prototype),Na(ka.prototype,"deleteLocalUserAttributesByKeys",[gb],Object.getOwnPropertyDescriptor(ka.prototype,"deleteLocalUserAttributesByKeys"),ka.prototype),Na(ka.prototype,"deleteChannelAttributesByKeys",[gb],Object.getOwnPropertyDescriptor(ka.prototype,"deleteChannelAttributesByKeys"),ka.prototype),Na(ka.prototype,"clearLocalUserAttributes",[je],Object.getOwnPropertyDescriptor(ka.prototype,"clearLocalUserAttributes"),ka.prototype),Na(ka.prototype,"clearChannelAttributes",[gb],Object.getOwnPropertyDescriptor(ka.prototype,"clearChannelAttributes"),ka.prototype),Na(ka.prototype,"getUserAttributes",[gb],Object.getOwnPropertyDescriptor(ka.prototype,"getUserAttributes"),ka.prototype),Na(ka.prototype,"getChannelAttributes",[gb],Object.getOwnPropertyDescriptor(ka.prototype,"getChannelAttributes"),ka.prototype),Na(ka.prototype,"getChannelAttributesByKeys",[gb],Object.getOwnPropertyDescriptor(ka.prototype,"getChannelAttributesByKeys"),ka.prototype),Na(ka.prototype,"getUserAttributesByKeys",[gb],Object.getOwnPropertyDescriptor(ka.prototype,"getUserAttributesByKeys"),ka.prototype),Na(ka.prototype,"getUserMetadata",[gb],Object.getOwnPropertyDescriptor(ka.prototype,"getUserMetadata"),ka.prototype),Na(ka.prototype,"setLocalUserMetadata",[gb],Object.getOwnPropertyDescriptor(ka.prototype,"setLocalUserMetadata"),ka.prototype),Na(ka.prototype,"clearLocalUserMetadata",[gb],Object.getOwnPropertyDescriptor(ka.prototype,"clearLocalUserMetadata"),ka.prototype),Na(ka.prototype,"addLocalUserMetadata",[gb],Object.getOwnPropertyDescriptor(ka.prototype,"addLocalUserMetadata"),ka.prototype),Na(ka.prototype,"updateLocalUserMetadata",[gb],Object.getOwnPropertyDescriptor(ka.prototype,"updateLocalUserMetadata"),ka.prototype),Na(ka.prototype,"deleteLocalUserMetadata",[gb],Object.getOwnPropertyDescriptor(ka.prototype,"deleteLocalUserMetadata"),ka.prototype),Na(ka.prototype,"subscribeUserMetadata",[gb],Object.getOwnPropertyDescriptor(ka.prototype,"subscribeUserMetadata"),ka.prototype),Na(ka.prototype,"login",[je],Object.getOwnPropertyDescriptor(ka.prototype,"login"),ka.prototype),Na(ka.prototype,"logout",[je],Object.getOwnPropertyDescriptor(ka.prototype,"logout"),ka.prototype),Na(ka.prototype,"logoutSync",[je],Object.getOwnPropertyDescriptor(ka.prototype,"logoutSync"),ka.prototype),Na(ka.prototype,"sendMessageToPeer",[gb],Object.getOwnPropertyDescriptor(ka.prototype,"sendMessageToPeer"),ka.prototype),Na(ka.prototype,"createChannel",[gb],Object.getOwnPropertyDescriptor(ka.prototype,"createChannel"),ka.prototype),Na(ka.prototype,"createMetadataItem",[gb],Object.getOwnPropertyDescriptor(ka.prototype,"createMetadataItem"),ka.prototype),Na(ka.prototype,"createLocalInvitation",[gb],Object.getOwnPropertyDescriptor(ka.prototype,"createLocalInvitation"),ka.prototype),Na(ka.prototype,"subscribePeersOnlineStatus",[gb],Object.getOwnPropertyDescriptor(ka.prototype,"subscribePeersOnlineStatus"),ka.prototype),Na(ka.prototype,"unsubscribePeersOnlineStatus",[gb],Object.getOwnPropertyDescriptor(ka.prototype,"unsubscribePeersOnlineStatus"),ka.prototype),Na(ka.prototype,"queryPeersBySubscriptionOption",[gb],Object.getOwnPropertyDescriptor(ka.prototype,"queryPeersBySubscriptionOption"),ka.prototype),Na(ka.prototype,"createMessage",[je],Object.getOwnPropertyDescriptor(ka.prototype,"createMessage"),ka.prototype),ka),Uq,Vq,Wq,Xq,GA=null===(Uq=/Chrome\/([0-9.]+)/.exec(null===(Wq=window)||void 0===Wq||null===(Xq=Wq.navigator)||void 0===Xq?void 0:Xq.userAgent))||void 0===Uq||null===(Vq=Uq[1])||void 0===Vq?void 0:Vq.split(".")[0];if(GA&&88<=parseInt(GA,10)&&!Kg()){var Yq,Hg=document.createElement("video"),Ig=document.createElement("canvas");Hg.setAttribute("style","display:none"),Hg.setAttribute("muted",""),Hg.muted=!0,Hg.setAttribute("autoplay",""),Hg.autoplay=!0,Hg.setAttribute("playsinline",""),Ig.setAttribute("style","display:none"),Ig.setAttribute("width","2"),Ig.setAttribute("height","2"),null===(Yq=Ig.getContext("2d"))||void 0===Yq||Yq.fillRect(0,0,1,1),Hg.srcObject=null==Ig?void 0:Ig.captureStream()}var HA={LOG_FILTER_OFF:{error:!1,warn:!1,info:!1,track:!1,debug:!1},LOG_FILTER_ERROR:{error:!0,warn:!1,info:!1,track:!1,debug:!1},LOG_FILTER_WARNING:{error:!0,warn:!0,info:!1,track:!1,debug:!1},LOG_FILTER_INFO:{error:!0,warn:!0,info:!0,track:!1,debug:!1},LOG_FILTER_DEBUG:{error:!0,warn:!0,info:!0,track:!0,debug:!0}},IA={enableLogUpload:!1,logFilter:HA.LOG_FILTER_INFO,enableCloudProxy:!1},wg=tb(tb({createInstance:function(r){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=2<arguments.length?arguments[2]:void 0;if(!/^[\dA-Za-z]{32}$/.test(r))throw new ja(["The %s in the arguments is invalid",Object.keys({appId:r})[0]],sw);var l=Object.keys(t).filter(function(G){return!(G in IA)});if(0!==l.length)throw new ja("Invalid RTM config: ".concat(l.join(", ")),sw);var p=tb(tb({},IA),t);if(void 0!==o&&(!Array.isArray(o)||0===o.length))throw new ja("Invalid area config");if(null!=o){if(!o.every(function(G){return G in Oa.LegacyAreaCode}))throw new ja("Invalid area codes: ".concat(o.filter(function(G){return!(G in Oa)}).join(", ")));Ba=eh(o.map(function(G){return SK[G]}))}o=qp=qb.__global_unique_id__=(qb.__global_unique_id__||0)+1;var _=WK(p);l=XK(p);var R=YK(p),M=ZK(o,p),P=zx(o,p),F=P("RTM:DEBUG","<Entry> ");return sx.rtmConfig=p,_("The Agora RTM Web SDK version is %s","1.6.0-205"),t.enableCloudProxy&&_("RTM cloud proxy enabled"),t.enableLogUpload&&_("Log upload enabled"),Ba&&F("Area is set to %s",Array.from(Ba.CODES).map(function(G){return vi(oa).find(function(z){return oa[z]===G})}).join(", ")),F("Creating an RtmClient instance"),F('The Git commit ID is "'.concat("v1.5.1-67-g0f6d3600",'"')),F("The App ID is %s",ws(r,4,10,"*".repeat(6))),_("The process ID is %s",hj),F("The build is %s","v1.5.1-67-g0f6d3600"),F("NODE_ENV is %s","production"),new KP(r,{genLogger:P,genTracker:M,info:_,warn:l,logError:R,loggerId:o},p,function(G){for(var z=0,we=vi(G);z<we.length;z++){var xe=we[z];try{var _n=G[xe];null!=_n&&(G.enableCloudProxy&&_("RTM cloud proxy enabled"),G.enableLogUpload&&_("Log upload enabled"),p[xe]=_n)}catch(fa){throw new ja(["The %s in the arguments is invalid",xe],void 0)}}})},BUILD:"v1.5.1-67-g0f6d3600",VERSION:"1.6.0-205",END_CALL_PREFIX:"AgoraRTMLegacyEndcallCompatibleMessagePrefix",processId:hj,ConnectionChangeReason:Oa.ConnectionChangeReason,ConnectionState:Oa.ConnectionState,LocalInvitationFailureReason:Oa.LocalInvitationFailureReason,LocalInvitationState:Oa.LocalInvitationState,RemoteInvitationFailureReason:Oa.RemoteInvitationFailureReason,RemoteInvitationState:Oa.RemoteInvitationState,MessageType:Oa.MessageType,PeerOnlineState:Oa.PeerOnlineState,PeerSubscriptionOption:Oa.PeerSubscriptionOption},HA),{},{setParameter:function(r,t){Object.keys(Yd).includes(r)&&(Yd[r]=t)},getParameter:function(r){return Yd[r]},setArea:function(r){var t=r.areaCodes;if(r=r.excludedArea,!Array.isArray(t)||0===t.length||!t.every(function(o){return o in Oa.AreaCode}))throw new ja("Invalid area config");if(void 0!==r&&r===Oa.AreaCode.GLOBAL)throw new ja("Excluded area cannot be global");if(void 0===r)Ba=eh(t.map(function(o){return oa[o]}));else{if(t.includes(r))throw new ja("Excluded area cannot be in areaCodes");if(!(r in oa))throw new ja("Invalid excludedArea:",r);Ba=tC({areas:t.map(function(o){return oa[o]}),excludedArea:oa[r]})}}});return wg},module.exports=t()},926:r=>{function t(l,p,_,R,M,P,F){try{var G=l[P](F),z=G.value}catch(we){return void _(we)}G.done?p(z):Promise.resolve(z).then(R,M)}r.exports=function o(l){return function(){var p=this,_=arguments;return new Promise(function(R,M){var P=l.apply(p,_);function F(z){t(P,R,M,F,G,"next",z)}function G(z){t(P,R,M,F,G,"throw",z)}F(void 0)})}},r.exports.__esModule=!0,r.exports.default=r.exports}},r=>{r(r.s=104)}]);